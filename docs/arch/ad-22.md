# ADR 21: Drawing tools

## The drawing model

A drawing task has drawing tools. Each tool creates marks. On task completion, a drawing annotation is created, which is an array of all drawn marks.

## Filesystem

Drawing tools are stored in `lib-classifier/src/plugins/drawingTools`, in three directories:
- _components_: React components that render marks (one for each Mark model) and any helper functions and components.
- _models_: MobX State Tree models for drawing tools and marks.

## React Components

A React component for a mark takes a Mark model and renders it as SVG. The basic shape is:
```jsx
<MarkComponent active mark={mark} scale={scale} />
```

_scale_ is the linear scale of the subject image (_clientWidth_ / _naturalWidth_). _active_ is a boolean attribute indicating whether the mark is currently editable.

## Tool models

The [base Tool model](https://github.com/zooniverse/front-end-monorepo/tree/master/packages/lib-classifier/src/plugins/drawingTools/models/tools/Tool) defines the following common properties and actions for all drawing tools.
- _color (string)_
- _label (string)_
- _max (number = Infinity)_
- _min (number = 0)_
- _details (Array)_ An array of definitions for subtasks of this tool.
- _tasks (Map)_ A map of Tasks for the subtasks of this tool. Automatically generated from `tool.details`.
- _disabled (boolean)_ Read only. True if new marks cannot be created.
- _isComplete (boolean)_ Read only. True if all required marks have been made and all required mark tasks have been annotated.
- _createMark(snapshot) (Mark)_ Returns a new mark from the supplied snapshot, and stores it.
- _createTask(snapshot) (Task)_ Returns a new task from the supplied snapshot, and stores it.
- _deleteMark(mark)_ Removes the specified mark from this tool.

All tools should extend the Tool model by implementing the following:
- _marks_: a map of mark types for this particular tool eg. `types.map(Line)` for the Line tool.
- _type_: a string uniquely identifying this type of tool.
- _createMark(snapshot)_: an action which creates a new mark from the supplied snapshot, then stores it in `self.marks`.
