(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[1054],{"../../node_modules/sinon/pkg sync recursive":module=>{function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="../../node_modules/sinon/pkg sync recursive",module.exports=webpackEmptyContext},"../../node_modules/valid-url/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{!function(module){"use strict";module.exports.is_uri=is_iri,module.exports.is_http_uri=is_http_iri,module.exports.is_https_uri=is_https_iri,module.exports.is_web_uri=is_web_iri,module.exports.isUri=is_iri,module.exports.isHttpUri=is_http_iri,module.exports.isHttpsUri=is_https_iri,module.exports.isWebUri=is_web_iri;var splitUri=function(uri){return uri.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)};function is_iri(value){if(value&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(value)&&!/%[^0-9a-f]/i.test(value)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)){var splitted,authority,path,query,fragment,scheme="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme&&scheme.length&&path.length>=0){if(authority&&authority.length){if(0!==path.length&&!/^\//.test(path))return}else if(/^\/\//.test(path))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(scheme.toLowerCase()))return out+=scheme+":",authority&&authority.length&&(out+="//"+authority),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_http_iri(value,allowHttps){if(is_iri(value)){var splitted,path,query,fragment,scheme="",authority="",port="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme){if(allowHttps){if("https"!=scheme.toLowerCase())return}else if("http"!=scheme.toLowerCase())return;if(authority)return/:(\d+)$/.test(authority)&&(port=authority.match(/:(\d+)$/)[0],authority=authority.replace(/:\d+$/,"")),out+=scheme+":",out+="//"+authority,port&&(out+=port),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_https_iri(value){return is_http_iri(value,!0)}function is_web_iri(value){return is_http_iri(value)||is_https_iri(value)}}(module=__webpack_require__.nmd(module))},"../lib-react-components/dist/esm/MovableModal/MovableModal.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>MovableModal_MovableModal});var react=__webpack_require__("../../node_modules/react/index.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),lib=__webpack_require__("../../node_modules/react-rnd/lib/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledWrapper=styled_components_browser_esm.default.span.withConfig({displayName:"ResizeIcon__StyledWrapper",componentId:"sc-1oobo67-0"})([""," display:flex;justify-content:center;"],(props=>props.theme.dark?(0,styled_components_browser_esm.css)(["color:",";"],props.theme.global.colors.text.dark):(0,styled_components_browser_esm.css)(["color:",";"],props.theme.global.colors.text.light)));const ResizeIcon_ResizeIcon=function ResizeIcon(props){return(0,jsx_runtime.jsx)(StyledWrapper,_objectSpread(_objectSpread({},props),{},{children:"⇲"}))};var withLayer=__webpack_require__("../lib-react-components/dist/esm/helpers/withLayer/withLayer.js"),Modal=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js"),_excluded=["children","closeFn","headingBackground","overflow","pad","rndProps","title","titleColor"],_excluded2=["cancel","minHeight","minWidth"];function MovableModal_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function MovableModal_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?MovableModal_ownKeys(Object(t),!0).forEach((function(r){MovableModal_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):MovableModal_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function MovableModal_defineProperty(e,r,t){return(r=function MovableModal_toPropertyKey(t){var i=function MovableModal_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var defaultRndProps={default:{x:0,y:0},minHeight:100,minWidth:350},MovableModal=(0,react.forwardRef)((function(_ref,ref){var{children,closeFn,headingBackground,overflow="auto",pad,rndProps=defaultRndProps,title="",titleColor}=_ref,rest=_objectWithoutProperties(_ref,_excluded),{cancel,minHeight,minWidth}=rndProps,restRndProps=_objectWithoutProperties(rndProps,_excluded2);return(0,jsx_runtime.jsx)(lib.p,MovableModal_objectSpread(MovableModal_objectSpread({cancel,enableResizing:{bottom:!0,bottomLeft:!1,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!1,topRight:!1},minHeight,minWidth,resizeHandleComponent:{bottomRight:(0,jsx_runtime.jsx)(ResizeIcon_ResizeIcon,{})},resizeHandleStyles:{bottomLeft:{bottom:0,left:0},bottomRight:{bottom:0,height:"20px",right:0,width:"14px"},topLeft:{left:0,top:0},topRight:{right:0,top:0}}},restRndProps),{},{children:(0,jsx_runtime.jsx)(Modal.a,MovableModal_objectSpread(MovableModal_objectSpread({ref,closeFn,headingBackground,overflow,pad,title,titleColor},rest),{},{children}))}))}));MovableModal.propTypes={children:prop_types.node,closeFn:prop_types.func,headingBackground:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),overflow:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),pad:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),rndProps:(0,prop_types.shape)({cancel:prop_types.string,minHeight:prop_types.number,minWidth:prop_types.number,position:(0,prop_types.shape)({x:prop_types.number,y:prop_types.number})}),title:prop_types.string,titleColor:(0,prop_types.oneOfType)([prop_types.object,prop_types.string])};const MovableModal_MovableModal=(0,withLayer.A)(MovableModal);MovableModal.__docgenInfo={description:"",methods:[],displayName:"MovableModal",props:{children:{description:"",type:{name:"custom",raw:"node"},required:!1},closeFn:{description:"",type:{name:"custom",raw:"func"},required:!1},headingBackground:{description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1},overflow:{description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1},pad:{description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1},rndProps:{description:"",type:{name:"shape",value:{cancel:{name:"string",required:!1},minHeight:{name:"number",required:!1},minWidth:{name:"number",required:!1},position:{name:"shape",value:{x:{name:"number",required:!1},y:{name:"number",required:!1}},required:!1}}},required:!1},title:{description:"",type:{name:"custom",raw:"string"},required:!1},titleColor:{description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1}}}},"./src/components/Classifier/components/ImageToolbar/components/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{MA:()=>_ZoomOutButton__WEBPACK_IMPORTED_MODULE_7__.A,U9:()=>_ResetButton__WEBPACK_IMPORTED_MODULE_4__.A,Z8:()=>_ZoomInButton__WEBPACK_IMPORTED_MODULE_6__.A,g3:()=>_MoveButton__WEBPACK_IMPORTED_MODULE_3__.A,vB:()=>_AnnotateButton__WEBPACK_IMPORTED_MODULE_0__.A,wi:()=>_RotateButton__WEBPACK_IMPORTED_MODULE_5__.A,zj:()=>_InvertButton__WEBPACK_IMPORTED_MODULE_2__.A});var _AnnotateButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/AnnotateButton/index.js"),_InvertButton__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/FullscreenButton/index.js"),__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/InvertButton/index.js")),_MoveButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/MoveButton/index.js"),_ResetButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ResetButton/index.js"),_RotateButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/RotateButton/index.js"),_ZoomInButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomInButton/index.js"),_ZoomOutButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomOutButton/index.js")},"./src/components/Classifier/components/SubjectViewer/components/InteractionLayer/components/SubTaskPopup/components/ConfirmModal/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>ConfirmModal_ConfirmModal});var Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),Modal=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js"),PrimaryButton=__webpack_require__("../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ConfirmModal(_ref){var _ref$onClose=_ref.onClose,onClose=void 0===_ref$onClose?function(){return!0}:_ref$onClose,_ref$onDelete=_ref.onDelete,onDelete=void 0===_ref$onDelete?function(){return!0}:_ref$onDelete,t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsxs)(Modal.A,{active:!0,modal:!1,children:[(0,jsx_runtime.jsx)(Paragraph.f,{margin:{bottom:"medium"},children:t("SubjectViewer.InteractionLayer.ConfirmModal.confirm")}),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",gap:"small",justify:"center",children:[(0,jsx_runtime.jsx)(Button.$,{label:t("SubjectViewer.InteractionLayer.ConfirmModal.keepWorking"),onClick:onClose}),(0,jsx_runtime.jsx)(PrimaryButton.A,{label:t("SubjectViewer.InteractionLayer.ConfirmModal.close"),color:"teal",onClick:onDelete})]})]})}ConfirmModal.displayName="ConfirmModal",ConfirmModal.propTypes={onClose:prop_types.func,onDelete:prop_types.func};const ConfirmModal_ConfirmModal=ConfirmModal;ConfirmModal.__docgenInfo={description:"An alert which confirms 'keep working' or 'delete' for incomplete annotations. Incomplete annotations must be either completed or deleted.",methods:[],displayName:"ConfirmModal",props:{onClose:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onDelete:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/InteractionLayer/components/SubTaskPopup/components/SaveButton/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>SaveButton_SaveButton});var PrimaryButton=__webpack_require__("../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js"),withThemeContext=__webpack_require__("../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const SaveButton_theme={text:{extend:function extend(props){return(0,styled_components_browser_esm.css)(["text-transform:capitalize;html[lang=\"ar\"],html[lang=\"he\"]{&:after{content:' ←';}}&:after{content:' →';}"])}}};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function SaveButton(_ref){var _ref$autoFocus=_ref.autoFocus,autoFocus=void 0!==_ref$autoFocus&&_ref$autoFocus,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,onClick=_ref.onClick,label=(0,(0,i18n.Bd)("components").t)("SubjectViewer.InteractionLayer.SaveButton.save");return(0,jsx_runtime.jsx)(PrimaryButton.A,{autoFocus,disabled,label,onClick})}SaveButton.displayName="SaveButton",SaveButton.propTypes={autoFocus:prop_types.bool,disabled:prop_types.bool,onClick:prop_types.func.isRequired};const SaveButton_SaveButton=(0,withThemeContext.A)(SaveButton,SaveButton_theme);SaveButton.__docgenInfo={description:"",methods:[],displayName:"SaveButton",props:{autoFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},onClick:{description:"",type:{name:"func"},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewer.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithZoomControls:()=>WithZoomControls,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SubjectGroupViewer_stories});var Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),hooks=__webpack_require__("./src/hooks/index.js"),mockStore=__webpack_require__("./test/mockStore/index.js"),SubjectGroupViewerContainer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewerContainer.jsx"),components=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/index.js");var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var _excluded=["children"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var subject=rosie.$.build("subject",{locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"}]}),workflow=rosie.$.build("workflow",{configuration:{subject_viewer:"subjectGroup",cell_width:300,cell_height:200,cell_style:{stroke:"#fff",strokeWidth:"4",fill:"#000"},grid_columns:3,grid_rows:2}}),store=(0,mockStore.A)({subject,workflow});function ViewerContext(_ref){var children=_ref.children;return(0,jsx_runtime.jsx)(mobxreact_esm.Kq,{classifierStore:store,children})}ViewerContext.displayName="ViewerContext";const SubjectGroupViewer_stories={title:"Subject Viewers / SubjectGroupViewer",component:SubjectGroupViewerContainer.A,parameters:{docs:{description:{component:"# Subject Group Viewer\n\nThe Subject Group Viewer (SGV) is a variant of the Subject Viewer that's used to \ndisplay Subjects containing an array of sub-Subjects, with each sub-Subject\nshown on a grid.\n\nThe Subject Group Viewer was originally created by @shaunanoordin on Mar 2020, for the SURVOS project.\n\n## Features\n\n**Intent:**\n\nThe Subject Group Viewer's is designed to address two specific needs:\n\n- (UI/UX) allow volunteers to compare a large number of \"images\" (possible extension: videos too) side-by-side.\n  - _Technical: each \"image\" is actually its own single-image Subject. This super-grouping of single-image Subjects is a variant of a Subject resource called a \"SubjectGroup\", i.e. a Subject that contains Subjects._\n- (Classification) allow volunteers to select any number of cells to answer the Task question. (e.g. \"which of these images look blurry?\")\n  - _Technical: this requires a uniqe Classification task, and the answer will be submitted as an array of Subject IDs._\n\n**UI/UX specifics:**\n\nThe Subject Group Viewer...\n\n- displays Subjects in a grid of X by Y cells.\n- lets you pan the view via mouse-drag or keyboard (arrow keys).\n- lets you zoom the view via mouse-wheel, keyboard (+ and - keys), or pressing the zoom in/zoom out buttons on the Image Toolbar component.\n- panning the view in one cell causes all cells to pan.\n- zooming the view in one cell causes all cells to zoom in/out.\n\nNote: mouse zoom/pan actions only register when the subject viewer is in 'move mode'.\n\nWhen the _current task_ on the Classifier is a Subject Group Task - which usually asks users to mark the images that look different from the others - then the Subject Group Viewer...\n\n- allows users to mark (or unmark) cells by \n- allows users to tab-navigate between cells\n\n**Classification specifics:**\n\n- Annotations in the form of an _array of selected cell indexes._ (Indices?)\n- For example, in a 3x3 grid where the middle and bottom-middle cells are selected, the annotation submitted will look like: `[4, 7]`.\n- Or maybe `[7, 4]`. The annotation doesn't bother to sort the indices. (Indexes?)\n- NOTE: this is just a placeholder. Long-term, the annotations should be in the form of an _array of subject IDs,_ since a Panoptes \"SubjectGroup\" resource is meant to contain a group of single image subjects, with each single image subject being displayed in a single grid cell.\n\n## External Setup\n\n**Workflow: Configuration**\n\nTo enable the SGV, the Workflow of the project must have its `.configuration` set up. For example, this is for a 5x5 grid with 200x200px cells:\n\n```\nworkflow.configuration = {\n  subject_viewer: 'subjectGroup',\n  subject_viewer_config: {\n    cell_width: 200,\n    cell_height: 200,\n    grid_columns: 5,\n    grid_rows: 5,\n  },\n  subject_group: {\n    num_columns: 5,  // This must match grid_columns\n    num_rows: 5,     // This must match grid_rows\n  }\n}\n```\n\n(Note 1: the actual size of the cells will be \"squished\" to fit the actual visible size of the viewer on the classifier.)\n\n(Note 2: `subject_viewer_config` is used by the frontend UI, while `subject_group` is used by the backend service. There's a small duplication of values here, don't mind it.)\n\n**Optional:** if the grid isn't fitting properly on the screen (e.g. the grid is too tall, and since the grid automatically tries to fit to width, this causes the bottom half of the grid to be cut off) then try setting some maximum size settings. Be sure to specify unit of measure, e.g. `px`\n\n```\nworkflow.configuration = {\n  subject_viewer_config: {\n    grid_max_width: '1000px',\n    grid_max_height: '50vh',\n    ...\n  },\n  ...\n}\n```\n\n**Optional:** the SGV can be further configured with specific styles.\n\n```\nworkflow.configuration = {\n  subject_viewer: 'subjectGroup',\n  subject_viewer_config: {\n    cell_width: 1200,\n    cell_height: 1000,\n    cell_style: {\n      stroke: '#fff',\n      strokeWidth: '1',\n      overlay: 'rgba(41,103,255,0.3)',\n      selectedStroke: '#2967FF',\n      selectedStrokeWidth: '8',\n      focusOutline: '2px dashed rgba(255, 255, 255, 0.5)',\n      background: '#000'\n    },\n    grid_columns: 5,\n    grid_rows: 5\n  },\n  subject_group: {\n    num_columns: 5,\n    num_rows: 5,\n  }\n}\n```\n\nSome notes on cell_style:\n\n- 'stroke' and 'strokeWidth' define the border around each cell, when that cell is idle (not being focused on, and not marked as selected)\n- 'selectedStroke' and 'selectedStrokeWidth' define the border around each cell, when that cell is marked/selected.\n- A cell can also be in the \"has keyboard focus\" state. This is visually represented by 'focusOutline'.\n- 'background' indicates the colour to fill the cell with when, e.g. the image doesn't fill the cell's available visible space.\n\n**Associated Subject \"type\": Subject Groups**\n\n- The Subject Group _Viewer_ is STRONGLY ASSOCIATED with the Subject Group \"type\" of Subject.\n- Subjects for the SubjectGroupViewer are a special case; a \"Group Subject\" is a randomised collection of X **single image Subjects** (where X = rows x columns) that the backend packages in to a single \"pseudo\" Subject.\n- Please see `src/store/SubjectGroup/README.md` for more details.\n\n**Associated Task: Subject Group Comparison Task**\n\n- The Subject Group _Viewer_ is STRONGLY ASSOCIATED with the Subject Group _Comparison Task._\n- The SGComparisonTask allows users to CLICK ON cells in the grid to \"select\" them. (i.e. to pick the cells that look different from the others)\n- If the SGComparisonTask has NO subtasks, then...\n  - ...clicking on an _unselected cell_ will select it, and clicking on a _selected cell_ will unselect it. Pretty straightforward.\n- If the SGComparisonTask has SUBTASKS, then...\n  - clicking on an _unselected cell_ will _select it,_ and then open the SubjectGroupSubTaskPopup.\n  - clicking on _an already selected cell_ will open the SubjectGroupSubTaskPopup.\n  - a selected cell can only be un-selected/removed via a button in the SubjectGroupSubTaskPopup.\n- Without this Task, the viewer is just a fancy way of seeing multiple images in a grid.\n- Please see `src/plugins/tasks/SubjectGroupComparisonTask/README.md` for more details.\n"}}}};var Default=function Default(){return(0,jsx_runtime.jsx)(ViewerContext,{children:(0,jsx_runtime.jsx)(Box.a,{height:"medium",width:"large",children:(0,jsx_runtime.jsx)(SubjectGroupViewerContainer.A,{subject:store.subjects.active})})})};function Toolbar(_ref2){var children=_ref2.children,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref2,_excluded),onKeyZoom=(0,hooks.KG)().onKeyZoom;return(0,jsx_runtime.jsx)(Box.a,_objectSpread(_objectSpread({onKeyDown:onKeyZoom},props),{},{children}))}Default.displayName="Default",Toolbar.displayName="Toolbar";var WithZoomControls=function WithZoomControls(){return(0,jsx_runtime.jsxs)(ViewerContext,{children:[(0,jsx_runtime.jsxs)(Toolbar,{direction:"row",height:"4rem",children:[(0,jsx_runtime.jsx)(components.vB,{}),(0,jsx_runtime.jsx)(components.g3,{}),(0,jsx_runtime.jsx)(components.Z8,{}),(0,jsx_runtime.jsx)(components.MA,{}),(0,jsx_runtime.jsx)(components.wi,{}),(0,jsx_runtime.jsx)(components.U9,{})]}),(0,jsx_runtime.jsx)(Box.a,{height:"medium",width:"large",children:(0,jsx_runtime.jsx)(SubjectGroupViewerContainer.A,{subject:store.subjects.active})})]})};WithZoomControls.displayName="WithZoomControls",Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"() => {\n  return <ViewerContext>\n      <Box height='medium' width='large'>\n        <SubjectGroupViewer subject={store.subjects.active} />\n      </Box>\n    </ViewerContext>;\n}",...Default.parameters?.docs?.source}}},WithZoomControls.parameters={...WithZoomControls.parameters,docs:{...WithZoomControls.parameters?.docs,source:{originalSource:"() => {\n  return <ViewerContext>\n      <Toolbar direction='row' height='4rem'>\n        <AnnotateButton />\n        <MoveButton />\n        <ZoomInButton />\n        <ZoomOutButton />\n        <RotateButton />\n        <ResetButton />\n      </Toolbar>\n      <Box height='medium' width='large'>\n        <SubjectGroupViewer subject={store.subjects.active} />\n      </Box>\n    </ViewerContext>;\n}",...WithZoomControls.parameters?.docs?.source}}};const __namedExportsOrder=["Default","WithZoomControls"]},"./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>locationValidator_locationValidator});var valid_url=__webpack_require__("../../node_modules/valid-url/index.js"),mimeTypeRe=/^[-\w+.]+\/[-\w+.]+$/;const locationValidator_locationValidator=function locationValidator(propValue,key,componentName,location,propFullName){var subjectLocation=propValue[key],mimeType=subjectLocation.mimeType,url=subjectLocation.url;if(!mimeTypeRe.test(mimeType)||!(0,valid_url.isUri)(url))return new Error("Invalid prop `"+propFullName+"` supplied to `"+componentName+"`. Validation failed.")}},"./test/factories/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{wC:()=>DrawingTaskFactory,vR:()=>FieldGuideFactory,MJ:()=>FieldGuideMediumFactory,uQ:()=>ProjectFactory,vk:()=>SubjectFactory,$Z:()=>SubjectSetFactory,Ym:()=>TutorialMediumFactory,ez:()=>UPPFactory,s4:()=>WorkflowFactory});var rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),medium=(new rosie.$).sequence("id",(function(id){return id.toString()})).attr("external_link",!1),TutorialMediumFactory=(new rosie.$).extend(medium).attr("content_type","image/gif").attr("href",["id"],(function(id){return"/tutorials/20/attached_images/".concat(id)})).attr("links",{linked:{href:"/tutorials/20",id:"20",type:"tutorials"}}).attr("media_type","tutorial_attached_image").attr("metadata",{}).attr("src","https://panoptes-uploads.zooniverse.org/staging/tutorial_attached_image/1ab2bd93-b422-4d10-a700-fa34d4e7e716.gif"),FieldGuideMediumFactory=(new rosie.$).extend(medium).attr("content_type","image/png").attr("external_link",!1).attr("href",["id"],(function(id){return"/field_guides/25/attached_images/".concat(id)})).attr("links",{linked:{href:"/field_guides/25",id:"20",type:"field_guides"}}).attr("media_type","field_guide_attached_image").attr("metadata",{}).attr("src","https://panoptes-uploads.zooniverse.org/staging/field_guide_attached_image/a04dc00f-ef28-4e52-9490-368ba9029aca.png");const ProjectFactory=(new rosie.$).sequence("id",(function(id){return id.toString()})).option("activeWorkflowId","12345").option("workflowId","67890").attr("display_name",["id"],(function(id){return"Project #".concat(id)})).attr("configuration",["activeWorkflowId"],(function(activeWorkflowId){return{default_workflow:activeWorkflowId}})).attr("experimental_tools",[]).attr("links",["activeWorkflowId","workflowId"],(function(activeWorkflowId,workflowId){return{active_workflows:[activeWorkflowId],workflows:[activeWorkflowId,workflowId]}})).attr("slug","zooniverse/example");const SubjectFactory=rosie.$.define("subject").sequence("id",(function(id){return id.toString()})).attr("already_seen",!1).attr("favorite",!1).attr("finished_workflow",!1).attr("locations",(function(){return[1,2,3,4,5,6,7,8,9,10,11].map((function(int){var randomString=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);return{"image/png":"https://foo.bar/".concat(randomString,".png")}}))})).attr("metadata",{}).attr("retired",!1).attr("selected_at","2019-04-11T11:16:29.063Z").attr("selection_state","").attr("user_has_finished_workflow",!1),SubjectSetFactory=rosie.$.define("subject_set").sequence("id",(function(id){return id.toString()})).attr("display_name","Hello there!").attr("metadata",{}).attr("set_member_subjects_count",56).attr("links",{});var subjectSets=rosie.$.buildList("subject_set",5);const WorkflowFactory=rosie.$.define("workflow").sequence("id",(function(id){return id.toString()})).attr("display_name",["id"],(function(id){return"Workflow #".concat(id)})).attr("active",!0).attr("configuration",{}).attr("first_task","").attr("grouped",!1).attr("links",{subject_sets:subjectSets.map((function(subjectSet){return subjectSet.id}))}).attr("tasks",{}).attr("steps",[]).attr("subjectSets",{resources:{}}).attr("version","1.0"),UPPFactory=((new rosie.$).sequence("id",(function(id){return id.toString()})).attr("display_name",["id"],(function(id){return"Tutorial #".concat(id)})).attr("kind","tutorial").attr("language","en").attr("steps",[]),(new rosie.$).sequence("id",(function(id){return id.toString()})).attr("activity_count",100).attr("activity_count_by_workflow",{}).attr("links",{}).attr("preferences",{minicourses:{},selected_workflow:"",tutorials_completed_at:{}}).attr("settings",{})),FieldGuideFactory=((new rosie.$).sequence("id",(function(id){return id.toString()})).attr("admin",!1).attr("avatar_src","").attr("banned",!1).attr("beta_email_communication",!0).attr("credited_name","Jane Doe").attr("display_name","Jane").attr("email","jane@gmail.com").attr("global_email_communication",!0).attr("href",["id"],(function(id){return"/users/".concat(id)})).attr("intervention_notifications",!0).attr("languages",[]).attr("login","janedoe01").attr("login_prompt",!1).attr("private_profile",!0).attr("project_email_communication",!0).attr("subject_limit",100).attr("type","users").attr("upload_whitelist",!1).attr("uploaded_subjects_count",0).attr("ux_test_email_communication",!1).attr("valid_email",!0).attr("zooniverse_id",""),(new rosie.$).sequence("id",(function(id){return id.toString()})).attr("annotations",{}).attr("completed",!1).attr("links",{}).attr("metadata",{classifier_version:"2.0",source:"api",userLanguage:"",workflowVersion:""}),(new rosie.$).sequence("id",(function(id){return id.toString()})).attr("items",[]).attr("language","en")),DrawingTaskFactory=((new rosie.$).attr("isActive",!1).attr("rules",{}).attr("show_model",!1),(new rosie.$).attr("instruction","Please draw something").attr("tools",[]).attr("type","drawing"));(new rosie.$).attr("answers",[{label:"red"},{label:"blue"},{label:"green"}]).attr("required","").attr("strings",{question:"Check all of the colors that apply"}).attr("type","multiple"),(new rosie.$).attr("answers",[{label:"Yes"},{label:"No"}]).attr("required","true").attr("strings",{question:"Is there a galaxy?"}).attr("taskKey","").attr("type","single"),(new rosie.$).attr("modifiers",["insertion","deletion"]).attr("required",!1).attr("instruction","Enter some text").attr("taskKey","").attr("type","text"),(new rosie.$).attr("instruction","Please transcribe the text").attr("tools",[{details:[{instruction:"transcribe the text.",taskKey:"T0.0",type:"text"}],type:"transcriptionLine"}]).attr("type","transcription");var cuid=__webpack_require__("../../node_modules/cuid/index.js"),cuid_default=__webpack_require__.n(cuid);(new rosie.$).attr("id",cuid_default()()).attr("task","T0").attr("taskType","single").attr("value",0)},"./test/mockStore/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>mockStore});var async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),sinon_esm=__webpack_require__("../../node_modules/sinon/pkg/sinon-esm.js"),store=__webpack_require__("./src/store/index.js"),factories=__webpack_require__("./test/factories/index.js");function createResponse(url,factories){var endpoint=url.split("/")[1],response={},mockResponse=factories[url]||factories[endpoint];return response[endpoint]=mockResponse?[].concat(mockResponse):[],Promise.resolve({body:response})}const branchingWorkflow=factories.s4.build({display_name:"Branching workflow",first_task:"T0",tasks:{T0:{answers:[{label:"yes",next:"T1"},{label:"no",next:"T2"}],question:"Is there a cat?",required:!1,taskKey:"T0",type:"single"},T1:{answers:[{label:"napping"},{label:"standing"},{label:"playing"}],question:"What is/are the cat(s) doing?",required:!1,taskKey:"T1",type:"multiple"},T2:{answers:[{label:"oranges"},{label:"apples"},{label:"bananas"}],question:"Favourite fruit?",required:!1,taskKey:"T2",type:"multiple"}},version:"0.0"});function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var defaultClient={caesar:{request:sinon_esm.Ay.stub().callsFake((function(){return Promise.resolve({})}))},tutorials:{get:sinon_esm.Ay.stub().callsFake((function(){return Promise.resolve({body:{tutorials:[]}})}))}},defaultAuthClient={checkBearerToken:sinon_esm.Ay.stub().callsFake((function(){return Promise.resolve(null)})),checkCurrent:sinon_esm.Ay.stub().callsFake((function(){return Promise.resolve(null)})),listen:sinon_esm.Ay.stub(),stopListening:sinon_esm.Ay.stub()};function mockStore(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$authClient=_ref.authClient,authClient=void 0===_ref$authClient?defaultAuthClient:_ref$authClient,_ref$client=_ref.client,client=void 0===_ref$client?defaultClient:_ref$client,project=_ref.project,subject=_ref.subject,subjectSet=_ref.subjectSet,_ref$workflow=_ref.workflow,workflow=void 0===_ref$workflow?branchingWorkflow:_ref$workflow,subjectSnapshot=subject||factories.vk.build({metadata:{}}),subjectSetSnapshot=subjectSet||factories.$Z.build(),workflowSnapshot=workflow||factories.s4.build(),projectSnapshot=project||factories.uQ.build({},{activeWorkflowId:workflowSnapshot.id}),subjectResources={};rosie.$.buildList("subject",9).forEach((function(subject){return subjectResources[subject.id]=subject})),subjectResources[subjectSnapshot.id]=subjectSnapshot;var _stubPanoptesJs=function stubPanoptesJs(factories){return{panoptes:{get:function get(url){return createResponse(url,factories)},post:function post(url){return createResponse(url,factories)},put:function put(url){return createResponse(url,factories)}}}}({field_guides:[],projects:[projectSnapshot],subjects:Object.values(subjectResources),tutorials:[],workflows:[workflowSnapshot]}),panoptes=_stubPanoptesJs.panoptes,rootStore=store.A.create({projects:{active:projectSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},projectSnapshot.id,projectSnapshot)},subjects:{active:subjectSnapshot.id,loadingState:async_states_default().success,queue:Object.keys(subjectResources),resources:subjectResources},subjectSets:{active:subjectSetSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},subjectSetSnapshot.id,subjectSetSnapshot)},workflows:{active:workflowSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},workflowSnapshot.id,workflowSnapshot)}},{authClient:_objectSpread(_objectSpread({},defaultAuthClient),authClient),client:_objectSpread(_objectSpread({},defaultClient),{},{panoptes},client)});return rootStore.subjects.setActiveSubject(subjectSnapshot.id),rootStore}}}]);