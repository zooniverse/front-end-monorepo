"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[7233],{"../../node_modules/grommet/es6/components/List/List.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{B:()=>List});var react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),DataContext=__webpack_require__("../../node_modules/grommet/es6/contexts/DataContext.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),InfiniteScroll=__webpack_require__("../../node_modules/grommet/es6/components/InfiniteScroll/InfiniteScroll.js"),Keyboard=__webpack_require__("../../node_modules/grommet/es6/components/Keyboard/Keyboard.js"),Pagination=__webpack_require__("../../node_modules/grommet/es6/components/Pagination/Pagination.js"),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),styles=__webpack_require__("../../node_modules/grommet/es6/utils/styles.js"),colors=__webpack_require__("../../node_modules/grommet/es6/utils/colors.js"),refs=__webpack_require__("../../node_modules/grommet/es6/utils/refs.js"),pagination=__webpack_require__("../../node_modules/grommet/es6/utils/pagination.js"),AnalyticsContext=__webpack_require__("../../node_modules/grommet/es6/contexts/AnalyticsContext/AnalyticsContext.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);var sizes=["none","xxsmall","xsmall","small","medium","large","xlarge"],sides=["horizontal","vertical","top","bottom","left","right","start","end"],padShapeSides={};sides.forEach(function(side){padShapeSides[side]=prop_types_default().oneOf(sizes)});prop_types_default().bool,prop_types_default().oneOf(sides),prop_types_default().shape({color:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().shape({dark:prop_types_default().string,light:prop_types_default().string})]),side:prop_types_default().oneOf(sides),size:prop_types_default().oneOfType([prop_types_default().oneOf(sizes),prop_types_default().string])});var ListPropTypes={},useThemeValue=__webpack_require__("../../node_modules/grommet/es6/utils/useThemeValue.js"),_excluded=["a11yTitle","aria-label","action","as","background","border","children","data","defaultItemProps","disabled","focus","itemKey","itemProps","onActive","onClickItem","onKeyDown","onMore","onOrder","showIndex","pad","paginate","pinned","primaryKey","secondaryKey","show","step"];function List_extends(){return List_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},List_extends.apply(null,arguments)}var emptyData=[],StyledList=styled_components_browser_esm.default.ul.withConfig(styles.OY).withConfig({displayName:"List__StyledList",componentId:"sc-130gdqg-0"})(["list-style:none;"," padding:0;"," &:focus{","}","}&:focus:not(:focus-visible){","}"],function(props){return!props.margin&&"margin: 0;"},styles.m,function(props){return props.tabIndex>=0&&(0,styles.Y$)({forceOutline:!0,skipSvgChildren:!0})},function(props){return props.theme.list&&props.theme.list.extend},(0,styles.FF)()),StyledItem=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"List__StyledItem",componentId:"sc-130gdqg-1"})([""," "," &:focus{","}"," &:hover{","}",""],function(props){return props.onClick&&!props.isDisabled&&"cursor: pointer;"},function(props){return props.draggable&&!props.isDisabled&&"cursor: move;"},(0,styles.FF)({forceOutline:!0,skipSvgChildren:!0}),function(props){var _props$theme$list,disabledStyle;if(props.isDisabled&&null!=(_props$theme$list=props.theme.list)&&null!=(_props$theme$list=_props$theme$list.item)&&_props$theme$list.disabled){var _props$theme$list$ite=props.theme.list.item.disabled,color=_props$theme$list$ite.color,cursor=_props$theme$list$ite.cursor;disabledStyle={color:(0,colors.$2)(color,props.theme),cursor}}return disabledStyle},function(props){return props.isDisabled&&"background-color: unset;"},function(props){return props.theme.list&&props.theme.list.item&&props.theme.list.item.extend}),StyledContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"List__StyledContainer",componentId:"sc-130gdqg-2"})(["",";"],function(props){return props.theme.list&&props.theme.list.container&&props.theme.list.container.extend}),getValue=function getValue(item,index,key){return"function"==typeof key?key(item,index):"string"==typeof item?item:void 0!==key?null==item?void 0:item[key]:void 0},reorder=function reorder(array,pinnedArray,source,target){var result=array.slice(0),tmp=result[source];if(source<target)for(var i=source;i<target;i+=1)result[i]=result[i+1];else for(var _i=source;_i>target;_i-=1)result[_i]=result[_i-1];return result[target]=tmp,pinnedArray.data.length>0&&pinnedArray.data.forEach(function(pinnedItem,index){result.splice(pinnedArray.indexes[index],0,pinnedItem)}),result},getItemId=function getItemId(item,index,itemKey,primaryKey){var _getValue;return primaryKey?getValue(item,index,primaryKey):itemKey?getValue(item,index,itemKey):null!=(_getValue=getValue(item,index))?_getValue:index},List=react.forwardRef(function(_ref,ref){var a11yTitle=_ref.a11yTitle,ariaLabel=_ref["aria-label"],action=_ref.action,as=_ref.as,background=_ref.background,border=_ref.border,children=_ref.children,dataProp=_ref.data,defaultItemProps=_ref.defaultItemProps,disabledItems=_ref.disabled,defaultItemKey=(_ref.focus,_ref.itemKey),itemProps=_ref.itemProps,onActive=_ref.onActive,onClickItem=_ref.onClickItem,onKeyDown=_ref.onKeyDown,onMore=_ref.onMore,onOrder=_ref.onOrder,_ref$showIndex=_ref.showIndex,showIndex=void 0===_ref$showIndex||_ref$showIndex,pad=_ref.pad,paginate=_ref.paginate,_ref$pinned=_ref.pinned,pinned=void 0===_ref$pinned?[]:_ref$pinned,primaryKey=_ref.primaryKey,secondaryKey=_ref.secondaryKey,showProp=_ref.show,_ref$step=_ref.step,step=void 0===_ref$step?paginate?50:void 0:_ref$step,rest=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(_ref,_excluded),listRef=(0,refs.N)(ref),_useThemeValue=(0,useThemeValue.i)(),theme=_useThemeValue.theme,passThemeFlag=_useThemeValue.passThemeFlag,contextData=(0,react.useContext)(DataContext.y).data,data=dataProp||contextData||emptyData,itemKey=defaultItemKey||primaryKey||null,_useState=(0,react.useState)(),active=_useState[0],setActive=_useState[1],_useState2=(0,react.useState)(),lastActive=_useState2[0],setLastActive=_useState2[1],updateActive=function updateActive(nextActive){setActive(nextActive),onActive&&onClickItem&&nextActive!==active&&onActive(nextActive)},_useState3=(0,react.useState)(),itemFocus=_useState3[0],setItemFocus=_useState3[1],_useState4=(0,react.useState)(),dragging=_useState4[0],setDragging=_useState4[1],_useState5=(0,react.useState)(),orderingData=_useState5[0],setOrderingData=_useState5[1],_useMemo=(0,react.useMemo)(function(){var orderable=[],pinnedData=[],pinnedIndexes=[],currentData=orderingData||data;return 0===pinned.length?[currentData,{data:pinnedData,indexes:pinnedIndexes}]:(currentData.forEach(function(item,index){var _pinned$items,key=getValue(item,index,itemKey);(Array.isArray(pinned)?pinned.includes(key):"object"==typeof pinned&&(null==pinned||null==(_pinned$items=pinned.items)?void 0:_pinned$items.includes(key)))?(pinnedData.push(item),pinnedIndexes.push(index)):orderable.push(item)}),[orderable,{data:pinnedData,indexes:pinnedIndexes}])},[data,orderingData,itemKey,pinned]),orderableData=_useMemo[0],pinnedInfo=_useMemo[1],_usePagination=(0,pagination.W)(List_extends({data,page:(0,pagination.F)(showProp,step),step},paginate)),items=_usePagination[0],paginationProps=_usePagination[1],Container=paginate?StyledContainer:react.Fragment,containterProps=paginate?List_extends({},theme.list.container,passThemeFlag):void 0,draggingRef=(0,react.useRef)(),sendAnalytics=(0,AnalyticsContext.st)(),ariaProps={role:onClickItem?"listbox":"list"};if(active>=0){var activeId;if(onOrder){var buttonId=active%2?"MoveDown":"MoveUp",itemIndex=Math.trunc(active/2);activeId=""+getItemId(orderableData[itemIndex],itemIndex,itemKey,primaryKey)+buttonId}else onClickItem&&(activeId=getItemId(orderableData[active],active,itemKey,primaryKey));ariaProps["aria-activedescendant"]=activeId}var onSelectOption=function onSelectOption(event){if((onClickItem||onOrder)&&active>=0)if(onOrder){var index=Math.trunc(active/2);onOrder(reorder(orderableData,pinnedInfo,index,active%2?index+1:index-1)),updateActive(active%2?Math.min(active+2,2*orderableData.length-2):Math.max(active-2,1))}else if(null!=disabledItems&&disabledItems.includes(getValue(data[active],active,itemKey)))event.preventDefault();else if(onClickItem){event.persist();var adjustedEvent=event;adjustedEvent.item=data[active],adjustedEvent.index=active,onClickItem(adjustedEvent),sendAnalytics({type:"listItemClick",element:listRef.current,event:adjustedEvent,item:data[active],index:active})}};return react.createElement(Container,containterProps,react.createElement(Keyboard.s,{onEnter:onSelectOption,onSpace:function onSpace(event){(onClickItem||onOrder)&&event.preventDefault(),onSelectOption(event)},onUp:function onUp(event){if((onClickItem||onOrder)&&(event.preventDefault(),active)){var min=onOrder?1:0,activeElementIndex=Math.max(active-1,min);updateActive(activeElementIndex),setTimeout(function(){var _listRef$current;null==(_listRef$current=listRef.current)||null==(_listRef$current=_listRef$current.children[activeElementIndex])||_listRef$current.scrollIntoView({behavior:"smooth",block:"nearest"})},0)}},onDown:function onDown(event){if((onClickItem||onOrder)&&(event.preventDefault(),orderableData&&orderableData.length)){var min=onOrder?1:0,max=onOrder?2*orderableData.length-2:data.length-1,activeElementIndex=active>=min?Math.min(active+1,max):min;updateActive(activeElementIndex),setTimeout(function(){var _listRef$current2;null==(_listRef$current2=listRef.current)||null==(_listRef$current2=_listRef$current2.children[activeElementIndex])||_listRef$current2.scrollIntoView({behavior:"smooth",block:"nearest"})},0)}},onKeyDown},react.createElement(StyledList,List_extends({"aria-label":ariaLabel||a11yTitle,ref:listRef,as:as||"ul",itemFocus,tabIndex:onClickItem||onOrder?0:void 0,onFocus:function onFocus(){return updateActive(active||0===active?active:lastActive)},onBlur:function onBlur(){setLastActive(active),updateActive(void 0)}},ariaProps,passThemeFlag,rest),react.createElement(InfiniteScroll.u,{items:paginate?items:orderingData||data,onMore,show:paginate?void 0:showProp,step,renderMarker:function renderMarker(marker){return react.createElement(Box.a,{as:"li",flex:!1},marker)}},function(item,index){var _pinned$items2,content,isPinned,boxProps={},key=getValue(item,index,itemKey)||index;(Array.isArray(pinned)&&pinned.length>0||Array.isArray(null==pinned?void 0:pinned.items)&&(null==pinned||null==(_pinned$items2=pinned.items)?void 0:_pinned$items2.length)>0)&&("object"!=typeof item||itemKey||console.error("Warning: Missing prop itemKey. Prop pin requires itemKey to be specified when data is of type 'object'."),isPinned=Array.isArray(pinned)?null==pinned?void 0:pinned.includes(key):pinned.items.some(function(pinnedItem){return pinnedItem===key}));var pinnedColor=isPinned?pinned.color:void 0;if(children)content=children(item,index,onClickItem?{active:active===index}:void 0);else if(primaryKey){var primary=getValue(item,index,primaryKey);if(content="string"==typeof primary||"number"==typeof primary?react.createElement(Text.E,List_extends({color:pinnedColor,key:"p"},theme.list.primaryKey),primary):primary,secondaryKey){var secondary=getValue(item,index,secondaryKey);content=[content,"string"==typeof secondary||"number"==typeof secondary?react.createElement(Text.E,{color:pinnedColor,key:"s"},getValue(item,index,secondaryKey)):secondary],boxProps={direction:"row",align:"center",justify:"between",gap:"medium"}}}else if("object"==typeof item){var value=item[Object.keys(item)[0]];content=pinnedColor&&"string"==typeof value?react.createElement(Text.E,{color:pinnedColor},value):value}else content=pinnedColor?react.createElement(Text.E,{color:pinnedColor},item):item;var isDisabled,orderableIndex=orderableData.findIndex(function(ordItem,ordIndex){return getValue(ordItem,ordIndex,itemKey)===key});disabledItems&&("object"!=typeof item||itemKey||console.error("Warning: Missing prop itemKey. Prop disabled requires itemKey to be specified when data is of type 'object'."),isDisabled=null==disabledItems?void 0:disabledItems.includes(key)),action&&(content=[react.createElement(Box.a,{align:"start",key:"actionContainer"+index},content),action(item,index)],boxProps={direction:"row",align:secondaryKey?"start":"center",justify:"between",gap:"medium"});var adjustedBackground=background||theme.list.item.background;!onOrder&&active===index||dragging===index?adjustedBackground=theme.global.hover.background:Array.isArray(adjustedBackground)?adjustedBackground=adjustedBackground[index%adjustedBackground.length]:isPinned&&(adjustedBackground=(null==pinned?void 0:pinned.background)||theme.list.item.pinned.background);var clickProps,orderProps,orderControls,itemAriaProps,displayPinned,adjustedBorder=void 0!==border?border:theme.list.item.border;if("horizontal"===adjustedBorder&&index&&(adjustedBorder="bottom"),onClickItem&&!onOrder&&(clickProps={role:"option",tabIndex:-1,active:active===index,onClick:function onClick(event){if(isDisabled)event.preventDefault();else{event.persist();var adjustedEvent=event;adjustedEvent.item=item,adjustedEvent.index=index,onClickItem(adjustedEvent),sendAnalytics({type:"listItemClick",element:listRef.current,event:adjustedEvent,item,index})}},onMouseOver:function onMouseOver(){return updateActive(index)},onMouseOut:function onMouseOut(){return updateActive(void 0)},onFocus:function onFocus(){updateActive(index),setItemFocus(!0)},onBlur:function onBlur(){updateActive(void 0),setItemFocus(!1)}}),onOrder&&!isPinned){orderProps={draggable:!0,onDragStart:function onDragStart(event){event.dataTransfer.setData("text/plain",""),event.dataTransfer.effectAllowed="move",setDragging(orderableIndex),updateActive(void 0)},onDragEnd:function onDragEnd(){setDragging(void 0),setOrderingData(void 0)},onDragOver:function onDragOver(event){void 0!==dragging&&(event.preventDefault(),dragging!==orderableIndex&&(event.dataTransfer.dropEffect="move",setOrderingData(reorder(orderableData,pinnedInfo,dragging,orderableIndex)),setDragging(orderableIndex)))},onDrop:function onDrop(){orderingData&&onOrder(orderingData)},ref:dragging===orderableIndex?draggingRef:void 0};var Up=theme.list.icons.up,Down=theme.list.icons.down;orderControls=!isPinned&&react.createElement(Box.a,{direction:"row",align:"center",justify:"end"},react.createElement(Button.$,{id:key+"MoveUp",a11yTitle:orderableIndex+1+" "+key+" move up",icon:react.createElement(Up,null),hoverIndicator:!0,focusIndicator:!1,disabled:!orderableIndex,active:active===2*orderableIndex,onClick:function onClick(event){event.stopPropagation(),onOrder(reorder(orderableData,pinnedInfo,orderableIndex,orderableIndex-1))},tabIndex:-1,onMouseOver:function onMouseOver(){return updateActive(2*orderableIndex)},onMouseOut:function onMouseOut(){return updateActive(void 0)},onFocus:function onFocus(){updateActive(2*orderableIndex),setItemFocus(!0)},onBlur:function onBlur(){updateActive(void 0),setItemFocus(!1)}}),react.createElement(Button.$,{id:key+"MoveDown",a11yTitle:orderableIndex+1+" "+key+" move down",icon:react.createElement(Down,null),hoverIndicator:!0,focusIndicator:!1,disabled:orderableIndex>=orderableData.length-1,active:active===2*orderableIndex+1,onClick:function onClick(event){event.stopPropagation(),onOrder(reorder(orderableData,pinnedInfo,orderableIndex,orderableIndex+1))},tabIndex:-1,onMouseOver:function onMouseOver(){return updateActive(2*orderableIndex+1)},onMouseOut:function onMouseOut(){return updateActive(void 0)},onFocus:function onFocus(){updateActive(2*orderableIndex+1),setItemFocus(!0)},onBlur:function onBlur(){updateActive(void 0),setItemFocus(!1)}})),content=react.createElement(Box.a,List_extends({flex:!0},boxProps),content),boxProps={direction:"row",align:defaultItemProps&&defaultItemProps.align||"center",gap:"medium"}}if(isDisabled&&(itemAriaProps={"aria-disabled":!0},onClickItem&&(itemAriaProps=List_extends({},itemAriaProps,{"aria-selected":!1}))),isPinned){var _pinIcon$props,pinSize=theme.list.item.pinned.icon.size,pinPad=theme.list.item.pinned.icon.pad,Icon=(null==pinned?void 0:pinned.icon)||theme.list.icons.pin,pinIcon=react.isValidElement(Icon)?Icon:react.createElement(Icon,null);pinIcon=(0,react.cloneElement)(pinIcon,List_extends({},null!=(_pinIcon$props=pinIcon.props)&&_pinIcon$props.color||!pinnedColor?{}:{color:pinnedColor},{size:pinSize})),boxProps={direction:"row",align:defaultItemProps&&defaultItemProps.align||"center",gap:"medium"},displayPinned=react.createElement(Box.a,{direction:"row",align:"center",justify:"end",pad:pinPad},pinIcon),content=react.createElement(Box.a,{flex:!0},content)}return itemProps&&itemProps[index]&&(boxProps=List_extends({},boxProps,itemProps[index])),react.createElement(StyledItem,List_extends({key,tag:"li",background:adjustedBackground,border:adjustedBorder,isDisabled,flex:!1,pad:pad||theme.list.item.pad},defaultItemProps,boxProps,clickProps,orderProps,itemAriaProps,passThemeFlag),showIndex&&onOrder&&react.createElement(Text.E,{color:pinnedColor},index+1),content,displayPinned,orderControls)}))),paginate&&data.length>step&&items&&items.length?react.createElement(Pagination.d,List_extends({alignSelf:"end"},paginationProps)):null)});List.displayName="List",List.propTypes=ListPropTypes}}]);