/*! For license information please see 5620.c082d407.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[4559,5620,7262],{"./src/components/Classifier/components/Banners/components/AlreadySeenBanner/AlreadySeenBanner.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>AlreadySeenBanner});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/prop-types/index.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/translations/i18n.jsx"),_Banner__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Classifier/components/Banners/components/Banner/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function AlreadySeenBanner(_ref){var subject=_ref.subject,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_1__.Bd)("components").t,show=!!subject&&subject.id&&subject.alreadySeen&&!subject.retired&&!subject.finished_workflow&&!subject.user_has_finished_workflow;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Banner__WEBPACK_IMPORTED_MODULE_2__.A,{background:"status-critical",bannerText:t("Banners.AlreadySeenBanner.bannerText"),show,tooltipText:t("Banners.AlreadySeenBanner.tooltipText",{returnObjects:!0})})}AlreadySeenBanner.propTypes={subject:(0,prop_types__WEBPACK_IMPORTED_MODULE_0__.shape)({alreadySeen:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,finished_workflow:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,id:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,retired:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,user_has_finished_workflow:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool})},AlreadySeenBanner.__docgenInfo={description:"",methods:[],displayName:"AlreadySeenBanner",props:{subject:{description:"The current subject.",type:{name:"shape",value:{alreadySeen:{name:"bool",required:!1},finished_workflow:{name:"bool",required:!1},id:{name:"string",required:!1},retired:{name:"bool",required:!1},user_has_finished_workflow:{name:"bool",required:!1}}},required:!1}}}},"./src/components/Classifier/components/Banners/components/Banner/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>Banner_Banner});var PlainButton=__webpack_require__("../lib-react-components/dist/esm/PlainButton/PlainButton.js"),SpacedText=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Drop=__webpack_require__("../../node_modules/grommet/es6/components/Drop/Drop.js"),CaretPrevious=__webpack_require__("../../node_modules/grommet-icons/es6/icons/CaretPrevious.js"),CaretNext=__webpack_require__("../../node_modules/grommet-icons/es6/icons/CaretNext.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),DEFAULT_PAD={horizontal:"small"},SVG=styled_components_browser_esm.default.svg.withConfig({displayName:"Triangle__SVG",componentId:"sc-11lel6u-0"})(["display:block;"," z-index:1;"],function(props){return(0,styled_components_browser_esm.css)(["fill:",";height:","px;width:","px;"],props.fill,props.height,props.height)});function Triangle(_ref){var fill,backgroundColor=_ref.backgroundColor,_ref$height=_ref.height,height=void 0===_ref$height?20:_ref$height,_ref$justify=_ref.justify,justify=void 0===_ref$justify?"end":_ref$justify,_ref$pad=_ref.pad,pad=void 0===_ref$pad?DEFAULT_PAD:_ref$pad,_ref$pointDirection=_ref.pointDirection,pointDirection=void 0===_ref$pointDirection?"up":_ref$pointDirection,theme=_ref.theme,_ref$width=_ref.width,width=void 0===_ref$width?20:_ref$width,colors=theme.global.colors;fill=backgroundColor||("light"===theme.mode?colors.white:colors["dark-2"]);return(0,jsx_runtime.jsx)(Box.a,{"aria-hidden":"true",direction:"row",justify,pad,children:(0,jsx_runtime.jsx)(SVG,{fill,height,viewBox:"0 0 10 10",width,children:(0,jsx_runtime.jsx)("polygon",{points:{down:"0,0 10,0 5,10",left:"10,0 10,10 0,5",right:"0,0 0,10 10,5",up:"5,0 10,10 0,10"}[pointDirection]})})})}Triangle.propTypes={pad:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),pointDirection:(0,prop_types.oneOf)(["down","left","right","up"]),justify:(0,prop_types.oneOf)(["start","center","end"]),theme:(0,prop_types.shape)({global:(0,prop_types.shape)({colors:(0,prop_types.shape)({"dark-2":prop_types.string,white:prop_types.string})}),mode:(0,prop_types.oneOf)(["dark","light"])})};const Triangle_Triangle=(0,styled_components_browser_esm.withTheme)(Triangle);Triangle.__docgenInfo={description:"",methods:[],displayName:"Triangle",props:{height:{defaultValue:{value:"20",computed:!1},required:!1},justify:{defaultValue:{value:"'end'",computed:!1},description:"",type:{name:"enum",value:[{value:"'start'",computed:!1},{value:"'center'",computed:!1},{value:"'end'",computed:!1}]},required:!1},pad:{defaultValue:{value:"{ horizontal: 'small' }",computed:!1},description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1},pointDirection:{defaultValue:{value:"'up'",computed:!1},description:"",type:{name:"enum",value:[{value:"'down'",computed:!1},{value:"'left'",computed:!1},{value:"'right'",computed:!1},{value:"'up'",computed:!1}]},required:!1},width:{defaultValue:{value:"20",computed:!1},required:!1},theme:{description:"",type:{name:"shape",value:{global:{name:"shape",value:{colors:{name:"shape",value:{"dark-2":{name:"string",required:!1},white:{name:"string",required:!1}},required:!1}},required:!1},mode:{name:"enum",value:[{value:"'dark'",computed:!1},{value:"'light'",computed:!1}],required:!1}}},required:!1}}};var Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js");function TooltipText(props){var text=props.text,textArray=Array.isArray(text)?text:[text],isLastElement=function isLastElement(index){return function isLastElementOfArray(index,array){return index+1===array.length}(index,textArray)};return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:textArray.map(function(line,index){return(0,jsx_runtime.jsx)(Paragraph.f,{margin:{bottom:isLastElement(index)?"none":"xsmall",top:"none"},size:"small",children:line},"TooltipText_Line".concat(index))})})}TooltipText.propTypes={text:(0,prop_types.oneOfType)([prop_types.string,(0,prop_types.arrayOf)(prop_types.string)]).isRequired};const TooltipText_TooltipText=TooltipText;function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _callSuper(t,o,e){return o=_getPrototypeOf(o),function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}function _defineProperty(e,r,t){return(r=_toPropertyKey(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}TooltipText.__docgenInfo={description:"",methods:[],displayName:"TooltipText",props:{text:{description:"",type:{name:"union",value:[{name:"string"},{name:"arrayOf",value:{name:"string"}}]},required:!0}}};var DEFAULT_THEME={mode:"light"};function Label(_ref){var color=_ref.color,t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsx)(SpacedText.A,{color,children:t("Banners.Banner.whyAmISeeingThis")})}function Tooltip(_ref2){var mode=_ref2.mode,tooltipText=_ref2.tooltipText;return(0,jsx_runtime.jsxs)(Box.a,{direction:"column",margin:"xsmall",children:[(0,jsx_runtime.jsx)(Triangle_Triangle,{}),(0,jsx_runtime.jsx)(Box.a,{background:"light"===mode?"white":"dark-2",pad:"small",children:(0,jsx_runtime.jsx)(TooltipText_TooltipText,{text:tooltipText})})]})}var Banner=function(_Component){function Banner(){var _this;!function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}(this,Banner);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _defineProperty(_this=_callSuper(this,Banner,[].concat(args)),"state",{tooltipOpen:!1}),_defineProperty(_this,"ref",(0,react.createRef)()),_defineProperty(_this,"close",function(){return _this.setState({tooltipOpen:!1})}),_defineProperty(_this,"open",function(){return _this.setState({tooltipOpen:!0})}),_defineProperty(_this,"toggle",function(){return _this.setState(function(state){return{tooltipOpen:!state.tooltipOpen}})}),_this}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(Banner,_Component),function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(Banner,[{key:"componentDidUpdate",value:function componentDidUpdate(){!this.props.show&&this.state.tooltipOpen&&this.close()}},{key:"render",value:function render(){var _this$props=this.props,background=_this$props.background,_this$props$bannerTex=_this$props.bannerText,bannerText=void 0===_this$props$bannerTex?"":_this$props$bannerTex,_this$props$color=_this$props.color,color=void 0===_this$props$color?"neutral-6":_this$props$color,onNext=_this$props.onNext,onPrevious=_this$props.onPrevious,_this$props$show=_this$props.show,show=void 0!==_this$props$show&&_this$props$show,t=(_this$props.subjects,_this$props.t),_this$props$theme=_this$props.theme,theme=void 0===_this$props$theme?DEFAULT_THEME:_this$props$theme,tooltipText=_this$props.tooltipText,_theme$mode=theme.mode,mode=void 0===_theme$mode?DEFAULT_THEME.mode:_theme$mode;return show&&(0,jsx_runtime.jsxs)(Box.a,{align:"center",animation:"fadeIn",background:{color:background},direction:"row",justify:"between",pad:{vertical:"xsmall",horizontal:"small"},show,children:[onPrevious&&(0,jsx_runtime.jsx)(PlainButton.Ay,{color,icon:(0,jsx_runtime.jsx)(CaretPrevious.T,{color,size:"15px"}),onClick:onPrevious,text:t("Banners.Banner.previous")}),(0,jsx_runtime.jsx)(SpacedText.A,{color,weight:"bold",children:bannerText}),onNext&&(0,jsx_runtime.jsx)(PlainButton.Ay,{color,icon:(0,jsx_runtime.jsx)(CaretNext.P,{color,size:"15px"}),onClick:onNext,reverse:!0,text:t("Banners.Banner.next")}),(0,jsx_runtime.jsx)(Button.$,{disabled:!tooltipText,label:(0,jsx_runtime.jsx)(Label,{color}),onClick:this.toggle,plain:!0,ref:this.ref}),this.ref.current&&this.state.tooltipOpen&&(0,jsx_runtime.jsx)(Drop.e,{align:{right:"right",top:"bottom"},onEsc:this.close,plain:!0,target:this.ref.current,children:(0,jsx_runtime.jsx)(Tooltip,{mode,tooltipText})})]},bannerText)}}])}(react.Component);Banner.propTypes={background:prop_types.string.isRequired,bannerText:prop_types.string.isRequired,color:prop_types.string,onNext:prop_types.func,onPrevious:prop_types.func,show:prop_types.bool,theme:(0,prop_types.shape)({mode:(0,prop_types.oneOf)(["dark","light"])}),tooltipText:(0,prop_types.oneOfType)([prop_types.array,prop_types.string])};const Banner_Banner=(0,i18n.CI)("components")((0,styled_components_browser_esm.withTheme)(Banner));Tooltip.__docgenInfo={description:"",methods:[],displayName:"Tooltip"},Banner.__docgenInfo={description:"",methods:[{name:"close",docblock:null,modifiers:[],params:[],returns:null},{name:"open",docblock:null,modifiers:[],params:[],returns:null},{name:"toggle",docblock:null,modifiers:[],params:[],returns:null}],displayName:"Banner",props:{background:{description:"",type:{name:"string"},required:!0},bannerText:{description:"",type:{name:"string"},required:!0},color:{description:"",type:{name:"custom",raw:"string"},required:!1},onNext:{description:"",type:{name:"custom",raw:"func"},required:!1},onPrevious:{description:"",type:{name:"custom",raw:"func"},required:!1},show:{description:"",type:{name:"custom",raw:"bool"},required:!1},theme:{description:"",type:{name:"shape",value:{mode:{name:"enum",value:[{value:"'dark'",computed:!1},{value:"'light'",computed:!1}],required:!1}}},required:!1},tooltipText:{description:"",type:{name:"union",value:[{name:"array"},{name:"string"}]},required:!1}}}},"./src/components/Classifier/components/Banners/components/RetiredBanner/RetiredBanner.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>RetiredBanner});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/prop-types/index.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/translations/i18n.jsx"),_Banner__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Classifier/components/Banners/components/Banner/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function RetiredBanner(_ref){var subject=_ref.subject,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_1__.Bd)("components").t,show=!!subject&&subject.id&&subject.retired&&!subject.finished_workflow&&!subject.user_has_finished_workflow;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Banner__WEBPACK_IMPORTED_MODULE_2__.A,{background:"status-critical",bannerText:t("Banners.RetiredBanner.bannerText"),show,tooltipText:t("Banners.RetiredBanner.tooltipText",{returnObjects:!0})})}RetiredBanner.propTypes={subject:(0,prop_types__WEBPACK_IMPORTED_MODULE_0__.shape)({finished_workflow:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,id:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,retired:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,user_has_finished_workflow:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool})},RetiredBanner.__docgenInfo={description:"",methods:[],displayName:"RetiredBanner",props:{subject:{description:"The current subject",type:{name:"shape",value:{finished_workflow:{name:"bool",required:!1},id:{name:"string",required:!1},retired:{name:"bool",required:!1},user_has_finished_workflow:{name:"bool",required:!1}}},required:!1}}}},"./src/components/Classifier/components/Banners/components/SubjectSetProgressBanner/SubjectSetProgressBanner.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>SubjectSetProgressBanner_SubjectSetProgressBanner});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),Banner=__webpack_require__("./src/components/Classifier/components/Banners/components/Banner/index.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Modal=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js"),PrimaryButton=__webpack_require__("../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ConfirmModal(_ref){var _ref$active=_ref.active,active=void 0!==_ref$active&&_ref$active,_ref$onCancel=_ref.onCancel,onCancel=void 0===_ref$onCancel?function(){return!0}:_ref$onCancel,_ref$onConfirm=_ref.onConfirm,onConfirm=void 0===_ref$onConfirm?function(){return!0}:_ref$onConfirm,t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsxs)(Modal.A,{active,modal:!0,closeFn:onCancel,"data-testid":"confirm-modal",children:[(0,jsx_runtime.jsx)(Paragraph.f,{margin:{bottom:"medium"},children:t("Banners.InProgressConfirmModal.inProgress")}),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",gap:"small",justify:"center",children:[(0,jsx_runtime.jsx)(Button.$,{label:t("Banners.InProgressConfirmModal.cancel"),onClick:onCancel,"data-testid":"confirm-modal-cancel-btn"}),(0,jsx_runtime.jsx)(PrimaryButton.A,{label:t("Banners.InProgressConfirmModal.confirm"),color:"teal",onClick:onConfirm,"data-testid":"confirm-modal-confirm-btn"})]})]})}ConfirmModal.propTypes={active:prop_types.bool,onCancel:prop_types.func,onConfirm:prop_types.func};const ConfirmModal_ConfirmModal=ConfirmModal;function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function SubjectSetProgressBanner(_ref){var _workflow$subjectSet,_workflow$subjectSet2,_ref$checkForProgress=_ref.checkForProgress,checkForProgress=void 0!==_ref$checkForProgress&&_ref$checkForProgress,onNext=_ref.onNext,onPrevious=_ref.onPrevious,subject=_ref.subject,workflow=_ref.workflow,t=(0,i18n.Bd)("components").t,_useState2=_slicedToArray((0,react.useState)(!1),2),showModal=_useState2[0],setShowModal=_useState2[1],_useState4=_slicedToArray((0,react.useState)(void 0),2),intent=_useState4[0],setIntent=_useState4[1],setName=(null==workflow||null===(_workflow$subjectSet=workflow.subjectSet)||void 0===_workflow$subjectSet?void 0:_workflow$subjectSet.display_name)||"",subjectTotal=null==workflow||null===(_workflow$subjectSet2=workflow.subjectSet)||void 0===_workflow$subjectSet2?void 0:_workflow$subjectSet2.set_member_subjects_count,background=null!=subject&&subject.alreadySeen||null!=subject&&subject.retired?"status-critical":"status-ok",color=null!=subject&&subject.alreadySeen||null!=subject&&subject.retired?"neutral-6":"neutral-7",statusText=null!=subject&&subject.alreadySeen?"".concat(t("Banners.SubjectSetProgressBanner.alreadySeen")):"";statusText=null!=subject&&subject.retired?"".concat(t("Banners.SubjectSetProgressBanner.finished")):statusText;var progressText=t("Banners.SubjectSetProgressBanner.bannerText",{number:null==subject?void 0:subject.priority,setName,total:subjectTotal}),tooltipText=t("Banners.SubjectSetProgressBanner.tooltipText",{returnObjects:!0}),bannerText=statusText?"".concat(progressText," (").concat(statusText,")"):progressText;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Banner.A,{background,bannerText,color,onNext:onNext?function tryToGoNext(){if(checkForProgress)return setShowModal(!0),void setIntent(function(){return onNext});onNext()}:void 0,onPrevious:onPrevious?function tryToGoPrevious(){if(checkForProgress)return setShowModal(!0),void setIntent(function(){return onPrevious});onPrevious()}:void 0,show:!0,tooltipText}),(0,jsx_runtime.jsx)(ConfirmModal_ConfirmModal,{active:showModal,onCancel:function onCancel(){setShowModal(!1),setIntent(void 0)},onConfirm:function onConfirm(){intent&&intent(),setShowModal(!1),setIntent(void 0)}})]})}ConfirmModal.__docgenInfo={description:"An alert which - if you've already started annotation this Subject - asks if\nyou really want to navigate to the Next/Previous Subject.",methods:[],displayName:"ConfirmModal",props:{active:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},onCancel:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onConfirm:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1}}},SubjectSetProgressBanner.propTypes={checkForProgress:prop_types.bool,onNext:prop_types.func,onPrevious:prop_types.func,subject:(0,prop_types.shape)({alreadySeen:prop_types.bool,finished_workflow:prop_types.bool,id:prop_types.string,retired:prop_types.bool,user_has_finished_workflow:prop_types.bool}),workflow:(0,prop_types.shape)({subjectSet:(0,prop_types.shape)({display_name:prop_types.string,set_member_subjects_count:prop_types.number})})};const SubjectSetProgressBanner_SubjectSetProgressBanner=SubjectSetProgressBanner;SubjectSetProgressBanner.__docgenInfo={description:"A banner which shows progress through a prioritised subject set, showing `subject.metadata.priority` to the volunteer.\n\n  Optionally, it can also show Next and Previous subject navigation buttons for indexed workflows.",methods:[],displayName:"SubjectSetProgressBanner",props:{checkForProgress:{defaultValue:{value:"false",computed:!1},description:"Check for classification work in progress.",type:{name:"custom",raw:"bool"},required:!1},onNext:{description:"Callback to load the next subject (indexed workflows only.)",type:{name:"custom",raw:"func"},required:!1},onPrevious:{description:"Callback to load the previous subject (indexed workflows only.)",type:{name:"custom",raw:"func"},required:!1},subject:{description:"The active subject",type:{name:"shape",value:{alreadySeen:{name:"bool",required:!1},finished_workflow:{name:"bool",required:!1},id:{name:"string",required:!1},retired:{name:"bool",required:!1},user_has_finished_workflow:{name:"bool",required:!1}}},required:!1},workflow:{description:"The active workflow",type:{name:"shape",value:{subjectSet:{name:"shape",value:{display_name:{name:"string",required:!1},set_member_subjects_count:{name:"number",required:!1}},required:!1}}},required:!1}}}},"./src/components/Classifier/components/Banners/components/UserHasFinishedWorkflowBanner/UserHasFinishedWorkflowBanner.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>UserHasFinishedWorkflowBanner});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/prop-types/index.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/translations/i18n.jsx"),_Banner__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Classifier/components/Banners/components/Banner/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function UserHasFinishedWorkflowBanner(_ref){var subject=_ref.subject,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_1__.Bd)("components").t,show=!!subject&&!subject.finished_workflow&&subject.user_has_finished_workflow;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Banner__WEBPACK_IMPORTED_MODULE_2__.A,{background:"status-warning",bannerText:t("Banners.UserHasFinishedWorkflowBanner.bannerText"),show,tooltipText:t("Banners.UserHasFinishedWorkflowBanner.tooltipText",{returnObjects:!0})})}UserHasFinishedWorkflowBanner.propTypes={subject:(0,prop_types__WEBPACK_IMPORTED_MODULE_0__.shape)({finished_workflow:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,id:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,retired:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool})},UserHasFinishedWorkflowBanner.__docgenInfo={description:"",methods:[],displayName:"UserHasFinishedWorkflowBanner",props:{subject:{description:"The current subject.",type:{name:"shape",value:{finished_workflow:{name:"bool",required:!1},id:{name:"string",required:!1},retired:{name:"bool",required:!1}}},required:!1}}}},"./src/components/Classifier/components/Banners/components/WorkflowIsFinishedBanner/WorkflowIsFinishedBanner.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>WorkflowIsFinishedBanner});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/prop-types/index.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/translations/i18n.jsx"),_Banner__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/Classifier/components/Banners/components/Banner/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function WorkflowIsFinishedBanner(_ref){var subject=_ref.subject,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_1__.Bd)("components").t,show=!!subject&&subject.id&&subject.finished_workflow;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Banner__WEBPACK_IMPORTED_MODULE_2__.A,{background:"status-critical",bannerText:t("Banners.WorkflowIsFinishedBanner.bannerText"),show,tooltipText:t("Banners.WorkflowIsFinishedBanner.tooltipText",{returnObjects:!0})})}WorkflowIsFinishedBanner.propTypes={subject:(0,prop_types__WEBPACK_IMPORTED_MODULE_0__.shape)({finished_workflow:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,id:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,retired:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool})},WorkflowIsFinishedBanner.__docgenInfo={description:"",methods:[],displayName:"WorkflowIsFinishedBanner",props:{subject:{description:"The current subject",type:{name:"shape",value:{finished_workflow:{name:"bool",required:!1},id:{name:"string",required:!1},retired:{name:"bool",required:!1}}},required:!1}}}},"./src/components/Classifier/components/Banners/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>Banners_Banners});var mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),react=__webpack_require__("../../node_modules/react/index.js"),AlreadySeenBanner=__webpack_require__("./src/components/Classifier/components/Banners/components/AlreadySeenBanner/AlreadySeenBanner.jsx"),RetiredBanner=__webpack_require__("./src/components/Classifier/components/Banners/components/RetiredBanner/RetiredBanner.jsx"),SubjectSetProgressBanner=__webpack_require__("./src/components/Classifier/components/Banners/components/SubjectSetProgressBanner/SubjectSetProgressBanner.jsx"),WorkflowIsFinishedBanner=__webpack_require__("./src/components/Classifier/components/Banners/components/WorkflowIsFinishedBanner/WorkflowIsFinishedBanner.jsx"),UserHasFinishedWorkflowBanner=__webpack_require__("./src/components/Classifier/components/Banners/components/UserHasFinishedWorkflowBanner/UserHasFinishedWorkflowBanner.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function Banners(_ref2){var _subject$priority,_project$experimental,_subject$stepHistory,_useStores=function useStores(mockStores){var classifierStore=(null!=mockStores?mockStores:(0,react.useContext)(mobxreact_esm.Db)).classifierStore;return{project:classifierStore.projects.active,subject:classifierStore.subjects.active,subjects:classifierStore.subjects,workflow:classifierStore.workflows.active}}(_ref2.mockStores),project=_useStores.project,subject=_useStores.subject,subjects=_useStores.subjects,workflow=_useStores.workflow,subjectNumber=null!==(_subject$priority=null==subject?void 0:subject.priority)&&void 0!==_subject$priority?_subject$priority:-1,hasIndexedSubjects=null==workflow?void 0:workflow.hasIndexedSubjects,hasGroupedOrderedSubjects=(null==workflow?void 0:workflow.grouped)&&(null==workflow?void 0:workflow.prioritized),enableIndexedSubjectSetNextPrevButtons=null==project||null===(_project$experimental=project.experimental_tools)||void 0===_project$experimental?void 0:_project$experimental.includes("indexedSubjectSetNextPrevButtons"),onPrevious=subjects.previousIndexed,onNext=subjects.nextIndexed;return enableIndexedSubjectSetNextPrevButtons&&hasIndexedSubjects&&subjectNumber>-1?(0,jsx_runtime.jsx)(SubjectSetProgressBanner.A,{checkForProgress:null==subject||null===(_subject$stepHistory=subject.stepHistory)||void 0===_subject$stepHistory?void 0:_subject$stepHistory.checkForProgress,onNext,onPrevious,subject,workflow}):hasGroupedOrderedSubjects&&subjectNumber>-1?(0,jsx_runtime.jsx)(SubjectSetProgressBanner.A,{subject,workflow}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(AlreadySeenBanner.A,{subject}),(0,jsx_runtime.jsx)(RetiredBanner.A,{subject}),(0,jsx_runtime.jsx)(WorkflowIsFinishedBanner.A,{subject}),(0,jsx_runtime.jsx)(UserHasFinishedWorkflowBanner.A,{subject})]})}const Banners_Banners=(0,mobxreact_esm.PA)(Banners);Banners.__docgenInfo={description:"",methods:[],displayName:"Banners"}},"./src/components/Classifier/components/Feedback/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>Feedback_FeedbackModal});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Modal=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),helpers=__webpack_require__("./src/helpers/index.js"),mobx_state_tree_module=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),hooks=__webpack_require__("./src/hooks/index.js"),JSONDataViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/JSONDataViewer/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _toConsumableArray(r){return function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}(r)||function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}(r)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function storeMapper(classifierStore){var annotations=classifierStore.classifications.currentAnnotations,_classifierStore$feed=classifierStore.feedback;return{annotations,applicableRules:_classifierStore$feed.applicableRules,feedback:_classifierStore$feed.showModal,subject:classifierStore.subjects.active}}function Graph2dRangeFeedback(){var _useStores=(0,hooks.gy)(storeMapper),_useStores$annotation=_useStores.annotations,annotations=void 0===_useStores$annotation?[]:_useStores$annotation,_useStores$applicable=_useStores.applicableRules,applicableRules=void 0===_useStores$applicable?[]:_useStores$applicable,_useStores$feedback=_useStores.feedback,feedback=void 0!==_useStores$feedback&&_useStores$feedback,_useStores$subject=_useStores.subject,subject=void 0===_useStores$subject?null:_useStores$subject,annotationBrushes=[];annotations.forEach(function(annotation){var value=(0,mobx_state_tree_module.dV)(annotation).value;null==value||value.forEach(function(marking,i){var markingBrush={id:i,maxX:marking.x+marking.width/2,minX:marking.x-marking.width/2};annotationBrushes.push(markingBrush)})});var ruleBrushes=applicableRules.map(function(rule){return{id:rule.id,maxX:parseFloat(rule.x)+parseFloat(rule.width)/2+parseFloat(rule.tolerance),minX:parseFloat(rule.x)-parseFloat(rule.width)/2-parseFloat(rule.tolerance),success:rule.success}});return(0,jsx_runtime.jsx)(JSONDataViewer.A,{disabled:!0,subject,feedback,feedbackBrushes:[].concat(annotationBrushes,_toConsumableArray(ruleBrushes))})}const components_Graph2dRangeFeedback=Graph2dRangeFeedback;Graph2dRangeFeedback.__docgenInfo={description:"",methods:[],displayName:"Graph2dRangeFeedback"};var viewers={graph2drange:components_Graph2dRangeFeedback};const helpers_getFeedbackViewer=function getFeedbackViewer(applicableRules){if(0===applicableRules.length)return null;var strategies=applicableRules.map(function(rule){return rule.strategy}),uniqStrategies=strategies.filter(function(strat,index){return strategies.indexOf(strat)>=index});return uniqStrategies.length>1?null:viewers[[uniqStrategies]]||null};const helpers_reduceFeedbackMessages=function reduceFeedbackMessages(messages){var result=[];return messages&&messages.length&&(result=messages.reduce(function(acc,message){var messageExists=acc.find(function(obj){return obj.text===message});return messageExists?messageExists.count++:acc.push({text:message,count:1}),acc},[])),result};function FeedbackModal(_ref){var applicableRules=_ref.applicableRules,hideFeedback=_ref.hideFeedback,hideSubjectViewer=_ref.hideSubjectViewer,messages=_ref.messages,showModal=_ref.showModal,t=(0,i18n.Bd)("components").t,label=t("FeedbackModal.label"),showViewer=!hideSubjectViewer&&(null==applicableRules?void 0:applicableRules.length)>0,FeedbackViewer=showViewer?helpers_getFeedbackViewer(applicableRules):null,messageContainerHeight=showViewer&&FeedbackViewer?"400px":"100%",reducedMessages=helpers_reduceFeedbackMessages(messages);return showModal?(0,jsx_runtime.jsx)(Modal.A,{active:!0,closeFn:hideFeedback,title:label,children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[showViewer&&!!FeedbackViewer&&(0,jsx_runtime.jsx)(Box.a,{height:"400px",width:"600px",children:(0,jsx_runtime.jsx)(FeedbackViewer,{})}),(0,jsx_runtime.jsx)(Box.a,{height:messageContainerHeight,overflow:"scroll",children:(0,jsx_runtime.jsx)("ul",{children:reducedMessages.map(function(message){return(0,jsx_runtime.jsxs)("li",{children:[message.text," ",(0,jsx_runtime.jsxs)("small",{children:["(",message.count," ",1===message.count?"match":"matches",")"]})]},Math.random())})})}),(0,jsx_runtime.jsx)(Box.a,{pad:{top:"small"},children:(0,jsx_runtime.jsx)(Button.$,{onClick:hideFeedback,label:t("FeedbackModal.keepClassifying"),primary:!0})})]})}):null}FeedbackModal.propTypes={applicableRules:prop_types_default().arrayOf(prop_types_default().shape({strategy:prop_types_default().string})),hideFeedback:prop_types_default().func,hideSubjectViewer:prop_types_default().bool,messages:prop_types_default().arrayOf(prop_types_default().string),showModal:prop_types_default().bool};const Feedback_FeedbackModal=(0,helpers.Lg)(FeedbackModal,function FeedbackModal_storeMapper(classifierStore){var _classifierStore$feed=classifierStore.feedback;return{applicableRules:_classifierStore$feed.applicableRules,hideFeedback:_classifierStore$feed.hideFeedback,hideSubjectViewer:_classifierStore$feed.hideSubjectViewer,messages:_classifierStore$feed.messages,showModal:_classifierStore$feed.showModal}});FeedbackModal.__docgenInfo={description:"",methods:[],displayName:"FeedbackModal",props:{applicableRules:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{strategy:{name:"string",required:!1}}}},required:!1},hideFeedback:{description:"",type:{name:"func"},required:!1},hideSubjectViewer:{description:"",type:{name:"bool"},required:!1},messages:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},showModal:{description:"",type:{name:"bool"},required:!1}}}},"./src/components/Classifier/components/MetaTools/MetaTools.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>MetaTools_MetaTools});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),MetaToolsButton=__webpack_require__("../lib-react-components/dist/esm/MetaToolsButton/MetaToolsButton.js"),Blank=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledBlank=(0,styled_components_browser_esm.default)(Blank.h).withConfig({displayName:"HeartIcon__StyledBlank",componentId:"sc-1sa7tpr-0"})(["",""],props=>props.fill&&(0,styled_components_browser_esm.css)(["fill:",";"],props.fill));function HeartIcon(props){return(0,jsx_runtime.jsx)(StyledBlank,_objectSpread(_objectSpread({viewBox:"0 0 24 24"},props),{},{children:(0,jsx_runtime.jsx)("path",{strokeWidth:"1",d:"M1,8.4 C1,4 4.5,3 6.5,3 C9,3 11,5 12,6.5 C13,5 15,3 17.5,3 C19.5,3 23,4 23,8.4 C23,15 12,21 12,21 C12,21 1,15 1,8.4 Z"})}))}var i18n=__webpack_require__("../lib-react-components/dist/esm/translations/i18n.js"),DEFAULT_HANDLER=()=>{};function FavouritesButton(_ref){var{checked=!1,disabled=!1,onClick=DEFAULT_HANDLER}=_ref,[isFavourite,setIsFavourite]=(0,react.useState)(checked),{global}=(0,styled_components_browser_esm.useTheme)(),label=isFavourite?"FavouritesButton.remove":"FavouritesButton.add",fill=isFavourite?global.colors.statusColors.error:"none";var{t}=(0,i18n.B)();return(0,jsx_runtime.jsx)(MetaToolsButton.h,{"aria-checked":isFavourite,disabled,icon:(0,jsx_runtime.jsx)(HeartIcon,{color:"dark-5",fill,size:"15px"}),role:"checkbox",text:t(label),onClick:function toggleFavourite(){setIsFavourite(!isFavourite),onClick()}})}FavouritesButton.propTypes={checked:prop_types.bool,disabled:prop_types.bool,onClick:prop_types.func};const FavouritesButton_FavouritesButton=FavouritesButton;var hooks=__webpack_require__("./src/hooks/index.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),MetadataButton=__webpack_require__("./src/components/Classifier/components/MetaTools/components/Metadata/components/MetadataButton/MetadataButton.jsx"),MetadataModal=__webpack_require__("./src/components/Classifier/components/MetaTools/components/Metadata/components/MetadataModal/index.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var Metadata=function Metadata(_ref){var _ref$isThereMetadata=_ref.isThereMetadata,isThereMetadata=void 0!==_ref$isThereMetadata&&_ref$isThereMetadata,_ref$metadata=_ref.metadata,metadata=void 0===_ref$metadata?{}:_ref$metadata,_useState2=_slicedToArray((0,react.useState)(!1),2),showMetadataModal=_useState2[0],setShowMetadataModal=_useState2[1],toggleMetadataModal=function toggleMetadataModal(){setShowMetadataModal(!showMetadataModal)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(MetadataButton.A,{disabled:!isThereMetadata,onClick:toggleMetadataModal}),isThereMetadata&&(0,jsx_runtime.jsx)(MetadataModal.du,{active:showMetadataModal,closeFn:toggleMetadataModal,metadata})]})};Metadata.propTypes={isThereMetadata:prop_types_default().bool,metadata:prop_types_default().object};const Metadata_Metadata=Metadata;Metadata.__docgenInfo={description:"",methods:[],displayName:"Metadata",props:{isThereMetadata:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},metadata:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1}}};var CollectionsButton=__webpack_require__("./src/components/Classifier/components/MetaTools/components/CollectionsButton/CollectionsButton.jsx"),HidePreviousMarksButton=__webpack_require__("./src/components/Classifier/components/MetaTools/components/HidePreviousMarksButton/HidePreviousMarksButton.jsx"),HidePreviousTranscriptionsButton=__webpack_require__("./src/components/Classifier/components/MetaTools/components/HidePreviousMarksButton/HidePreviousTranscriptionsButton.jsx");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function HidePreviousMarksContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function HidePreviousMarksContainer_defineProperty(e,r,t){return(r=function HidePreviousMarksContainer_toPropertyKey(t){var i=function HidePreviousMarksContainer_toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function HidePreviousMarksContainer(props){var _props$type=props.type,HideMarksButton="transcription"===(void 0===_props$type?"drawing":_props$type)?HidePreviousTranscriptionsButton.Ay:HidePreviousMarksButton.A;return(0,jsx_runtime.jsx)(HideMarksButton,function HidePreviousMarksContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?HidePreviousMarksContainer_ownKeys(Object(t),!0).forEach(function(r){HidePreviousMarksContainer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):HidePreviousMarksContainer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},props))}function storeMapper(store){var _store$subjects=store.subjects,subject=_store$subjects.active,isThereMetadata=_store$subjects.isThereMetadata,upp=store.userProjectPreferences.active;return{interactionTask:store.workflowSteps.interactionTask,isThereMetadata,subject,upp}}HidePreviousMarksContainer.propTypes={type:prop_types_default().string},HidePreviousMarksContainer.__docgenInfo={description:"",methods:[],displayName:"HidePreviousMarksContainer",props:{type:{description:"",type:{name:"string"},required:!1}}};var MetaTools=function MetaTools(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_useStores=(0,hooks.gy)(storeMapper),_useStores$interactio=_useStores.interactionTask,interactionTask=void 0===_useStores$interactio?{}:_useStores$interactio,_useStores$isThereMet=_useStores.isThereMetadata,isThereMetadata=void 0!==_useStores$isThereMet&&_useStores$isThereMet,_useStores$subject=_useStores.subject,subject=void 0===_useStores$subject?null:_useStores$subject,_useStores$upp=_useStores.upp,upp=void 0===_useStores$upp?null:_useStores$upp,shownMarks=interactionTask.shownMarks,marks=interactionTask.marks,togglePreviousMarks=interactionTask.togglePreviousMarks,type=interactionTask.type;return(0,jsx_runtime.jsxs)(Box.a,{className,direction:"row-responsive",gap:"small",margin:{top:"small"},children:[(0,jsx_runtime.jsx)(Metadata_Metadata,{isThereMetadata,metadata:subject&&subject.metadata}),(0,jsx_runtime.jsx)(FavouritesButton_FavouritesButton,{checked:null==subject?void 0:subject.favorite,disabled:!subject||!upp,onClick:null==subject?void 0:subject.toggleFavorite}),(0,jsx_runtime.jsx)(CollectionsButton.A,{disabled:!subject||!upp,onClick:function addToCollection(){subject.addToCollection()}}),Object.keys(interactionTask).length>0&&(0,jsx_runtime.jsx)(HidePreviousMarksContainer,{disabled:0===(null==marks?void 0:marks.length),shownMarks,type,onClick:function onClick(state){return togglePreviousMarks(state)}})]},subject&&subject.id)};MetaTools.propTypes={className:prop_types_default().string,interactionTask:prop_types_default().shape({shownMarks:prop_types_default().string,togglePreviousMarks:prop_types_default().func,type:prop_types_default().string}),isThereMetadata:prop_types_default().bool,screenSize:prop_types_default().string,subject:prop_types_default().object,upp:prop_types_default().object};const MetaTools_MetaTools=(0,mobxreact_esm.PA)(MetaTools);MetaTools.__docgenInfo={description:"",methods:[],displayName:"MetaTools",props:{className:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},interactionTask:{description:"",type:{name:"shape",value:{shownMarks:{name:"string",required:!1},togglePreviousMarks:{name:"func",required:!1},type:{name:"string",required:!1}}},required:!1},isThereMetadata:{description:"",type:{name:"bool"},required:!1},screenSize:{description:"",type:{name:"string"},required:!1},subject:{description:"",type:{name:"object"},required:!1},upp:{description:"",type:{name:"object"},required:!1}}}},"./src/components/Classifier/components/MetaTools/components/CollectionsButton/CollectionsButton.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>CollectionsButton});var MetaToolsButton=__webpack_require__("../lib-react-components/dist/esm/MetaToolsButton/MetaToolsButton.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),i18n=__webpack_require__("./src/translations/i18n.jsx"),Blank=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function CollectionsIcon(props){return(0,jsx_runtime.jsx)(Blank.h,_objectSpread(_objectSpread({viewBox:"0 0 24 24"},props),{},{children:(0,jsx_runtime.jsx)("path",{strokeWidth:"1",d:"M1.96875,9 C2.14648526,9 2.30029232,9.06184834 2.43017578,9.18554688 C2.56005924,9.30924541 2.625,9.45572832 2.625,9.625 L2.625,10.875 C2.625,11.0442717 2.56005924,11.1907546 2.43017578,11.3144531 C2.30029232,11.4381517 2.14648526,11.5 1.96875,11.5 L0.65625,11.5 C0.478514736,11.5 0.324707681,11.4381517 0.194824219,11.3144531 C0.0649407568,11.1907546 0,11.0442717 0,10.875 L0,9.625 C0,9.45572832 0.0649407568,9.30924541 0.194824219,9.18554688 C0.324707681,9.06184834 0.478514736,9 0.65625,9 L1.96875,9 Z M20.34375,9.625 C20.5214853,9.625 20.6752923,9.68684834 20.8051758,9.81054688 C20.9350592,9.93424541 21,10.0807283 21,10.25 C21,10.4192717 20.9350592,10.5657546 20.8051758,10.6894531 C20.6752923,10.8131517 20.5214853,10.875 20.34375,10.875 L6.5625,10.875 C6.38476474,10.875 6.23095768,10.8131517 6.10107422,10.6894531 C5.97119076,10.5657546 5.90625,10.4192717 5.90625,10.25 C5.90625,10.0807283 5.97119076,9.93424541 6.10107422,9.81054688 C6.23095768,9.68684834 6.38476474,9.625 6.5625,9.625 L20.34375,9.625 Z M1.96875,14 C2.14648526,14 2.30029232,14.0618483 2.43017578,14.1855469 C2.56005924,14.3092454 2.625,14.4557283 2.625,14.625 L2.625,15.875 C2.625,16.0442717 2.56005924,16.1907546 2.43017578,16.3144531 C2.30029232,16.4381517 2.14648526,16.5 1.96875,16.5 L0.65625,16.5 C0.478514736,16.5 0.324707681,16.4381517 0.194824219,16.3144531 C0.0649407568,16.1907546 0,16.0442717 0,15.875 L0,14.625 C0,14.4557283 0.0649407568,14.3092454 0.194824219,14.1855469 C0.324707681,14.0618483 0.478514736,14 0.65625,14 L1.96875,14 Z M20.34375,14.625 C20.5214853,14.625 20.6752923,14.6868483 20.8051758,14.8105469 C20.9350592,14.9342454 21,15.0807283 21,15.25 C21,15.4192717 20.9350592,15.5657546 20.8051758,15.6894531 C20.6752923,15.8131517 20.5214853,15.875 20.34375,15.875 L6.5625,15.875 C6.38476474,15.875 6.23095768,15.8131517 6.10107422,15.6894531 C5.97119076,15.5657546 5.90625,15.4192717 5.90625,15.25 C5.90625,15.0807283 5.97119076,14.9342454 6.10107422,14.8105469 C6.23095768,14.6868483 6.38476474,14.625 6.5625,14.625 L20.34375,14.625 Z M1.96875,4 C2.14648526,4 2.30029232,4.06184834 2.43017578,4.18554688 C2.56005924,4.30924541 2.625,4.45572832 2.625,4.625 L2.625,5.875 C2.625,6.04427168 2.56005924,6.19075459 2.43017578,6.31445312 C2.30029232,6.43815166 2.14648526,6.5 1.96875,6.5 L0.65625,6.5 C0.478514736,6.5 0.324707681,6.43815166 0.194824219,6.31445312 C0.0649407568,6.19075459 0,6.04427168 0,5.875 L0,4.625 C0,4.45572832 0.0649407568,4.30924541 0.194824219,4.18554688 C0.324707681,4.06184834 0.478514736,4 0.65625,4 L1.96875,4 Z M6.5625,5.875 C6.38476474,5.875 6.23095768,5.81315166 6.10107422,5.68945312 C5.97119076,5.56575459 5.90625,5.41927168 5.90625,5.25 C5.90625,5.08072832 5.97119076,4.93424541 6.10107422,4.81054688 C6.23095768,4.68684834 6.38476474,4.625 6.5625,4.625 L20.34375,4.625 C20.5214853,4.625 20.6752923,4.68684834 20.8051758,4.81054688 C20.9350592,4.93424541 21,5.08072832 21,5.25 C21,5.41927168 20.9350592,5.56575459 20.8051758,5.68945312 C20.6752923,5.81315166 20.5214853,5.875 20.34375,5.875 L6.5625,5.875 Z"})}))}CollectionsIcon.__docgenInfo={description:"",methods:[],displayName:"CollectionsIcon"};var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1};function CollectionsButton(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$onClick=_ref.onClick,onClick=void 0===_ref$onClick?DEFAULT_HANDLER:_ref$onClick,t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsx)(MetaToolsButton.h,{disabled,icon:(0,jsx_runtime.jsx)(CollectionsIcon,{color:"dark-5",size:"15px"}),text:t("MetaTools.CollectionsButton.add"),onClick})}CollectionsButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func},CollectionsButton.__docgenInfo={description:"",methods:[],displayName:"CollectionsButton",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClick:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"func"},required:!1}}}},"./src/components/Classifier/components/MetaTools/components/HidePreviousMarksButton/HidePreviousMarksButton.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>HidePreviousMarksButton});var _zooniverse_react_components_MetaToolsButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-react-components/dist/esm/MetaToolsButton/MetaToolsButton.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),grommet_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormViewHide.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormView.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/translations/i18n.jsx"),_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/helpers/shownMarks.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1};function HidePreviousMarksButton(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$onClick=_ref.onClick,onClick=void 0===_ref$onClick?DEFAULT_HANDLER:_ref$onClick,_ref$shownMarks=_ref.shownMarks,shownMarks=void 0===_ref$shownMarks?_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_5__.A.ALL:_ref$shownMarks,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_4__.Bd)("components").t,text=shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_5__.A.ALL?t("MetaTools.HidePreviousMarksDrawingButton.hide"):t("MetaTools.HidePreviousMarksDrawingButton.show"),icon=shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_5__.A.ALL?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_3__.c,{}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_2__.K,{});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_zooniverse_react_components_MetaToolsButton__WEBPACK_IMPORTED_MODULE_0__.h,{"aria-checked":shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_5__.A.NONE,disabled,icon,role:"checkbox",text,onClick})}HidePreviousMarksButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,shownMarks:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string},HidePreviousMarksButton.__docgenInfo={description:"",methods:[],displayName:"HidePreviousMarksButton",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClick:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"func"},required:!1},shownMarks:{defaultValue:{value:"SHOWN_MARKS.ALL",computed:!0},description:"",type:{name:"string"},required:!1}}}},"./src/components/Classifier/components/MetaTools/components/HidePreviousMarksButton/HidePreviousTranscriptionsButton.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var _zooniverse_react_components_MetaToolsButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-react-components/dist/esm/MetaToolsButton/MetaToolsButton.js"),_zooniverse_react_components_SpacedText__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_2__),grommet__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/grommet/es6/components/DropButton/DropButton.js"),grommet__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormDown.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormViewHide.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormView.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Hide.js"),react__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/translations/i18n.jsx"),_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/helpers/shownMarks.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1},StyledDrop=(0,styled_components__WEBPACK_IMPORTED_MODULE_10__.default)(grommet__WEBPACK_IMPORTED_MODULE_3__.E).withConfig({displayName:"HidePreviousTranscriptionsButton__StyledDrop",componentId:"sc-1kmte49-0"})(["div{padding:0;}span{","}"],function(props){return(0,styled_components__WEBPACK_IMPORTED_MODULE_10__.css)(["line-height:",";"],props.theme.paragraph.small.height)});function HidePreviousTranscriptionsButton(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$onClick=_ref.onClick,_onClick=void 0===_ref$onClick?DEFAULT_HANDLER:_ref$onClick,_ref$shownMarks=_ref.shownMarks,shownMarks=void 0===_ref$shownMarks?_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.ALL:_ref$shownMarks,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_11__.Bd)("components").t,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_9__.useState)(!1),2),isOpen=_useState2[0],setOpen=_useState2[1],currentTitle={ALL:t("MetaTools.HidePreviousTranscriptionsButton.show"),USER:t("MetaTools.HidePreviousTranscriptionsButton.showUser"),NONE:t("MetaTools.HidePreviousTranscriptionsButton.hide")}[shownMarks];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(StyledDrop,{a11yTitle:currentTitle,dropContent:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_4__.a,{role:"radiogroup",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_zooniverse_react_components_MetaToolsButton__WEBPACK_IMPORTED_MODULE_0__.h,{a11yTitle:t("MetaTools.HidePreviousTranscriptionsButton.show"),active:shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.ALL,"aria-checked":shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.ALL,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_7__.c,{}),margin:{top:"0"},onClick:function onClick(){_onClick(_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.ALL),setOpen(!1)},padding:"0.5em",role:"radio",text:t("MetaTools.HidePreviousTranscriptionsButton.show")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_zooniverse_react_components_MetaToolsButton__WEBPACK_IMPORTED_MODULE_0__.h,{a11yTitle:t("MetaTools.HidePreviousTranscriptionsButton.showUser"),active:shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.USER,"aria-checked":shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.USER,disabled,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_6__.K,{}),margin:{top:"0"},onClick:function onClick(){_onClick(_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.USER),setOpen(!1)},padding:"0.5em",role:"radio",text:t("MetaTools.HidePreviousTranscriptionsButton.showUser")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_zooniverse_react_components_MetaToolsButton__WEBPACK_IMPORTED_MODULE_0__.h,{a11yTitle:t("MetaTools.HidePreviousTranscriptionsButton.hide"),active:shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.NONE,"aria-checked":shownMarks===_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.NONE,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_8__.L,{}),margin:{top:"0"},onClick:function onClick(){_onClick(_helpers_shownMarks__WEBPACK_IMPORTED_MODULE_12__.A.NONE),setOpen(!1)},padding:"0.5em",role:"radio",text:t("MetaTools.HidePreviousTranscriptionsButton.hide")})]}),dropProps:{align:{top:"bottom",left:"left"}},onClose:function onClose(){return setOpen(!1)},onOpen:function onOpen(){return setOpen(!0)},open:isOpen,plain:!0,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_4__.a,{align:"center",direction:"row",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_5__.t,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_13__.jsx)(_zooniverse_react_components_SpacedText__WEBPACK_IMPORTED_MODULE_1__.A,{color:{dark:"accent-1",light:"neutral-1"},children:currentTitle})]})})}HidePreviousTranscriptionsButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_2___default().bool,onClick:prop_types__WEBPACK_IMPORTED_MODULE_2___default().func,shownMarks:prop_types__WEBPACK_IMPORTED_MODULE_2___default().string};const __WEBPACK_DEFAULT_EXPORT__=(0,styled_components__WEBPACK_IMPORTED_MODULE_10__.withTheme)(HidePreviousTranscriptionsButton);HidePreviousTranscriptionsButton.__docgenInfo={description:"",methods:[],displayName:"HidePreviousTranscriptionsButton",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClick:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"func"},required:!1},shownMarks:{defaultValue:{value:"SHOWN_MARKS.ALL",computed:!0},description:"",type:{name:"string"},required:!1}}}},"./src/components/Classifier/components/MetaTools/components/Metadata/components/MetadataButton/MetadataButton.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>MetadataButton});var MetaToolsButton=__webpack_require__("../lib-react-components/dist/esm/MetaToolsButton/MetaToolsButton.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),i18n=__webpack_require__("./src/translations/i18n.jsx"),Blank=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function InfoIcon(props){return(0,jsx_runtime.jsx)(Blank.h,_objectSpread(_objectSpread({viewBox:"0 0 20 20"},props),{},{children:(0,jsx_runtime.jsx)("path",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",d:"M11.221875,13.84375 C11.3907235,13.84375 11.5368402,13.9025059 11.6602295,14.0200195 C11.7836188,14.1375331 11.8453125,14.2766919 11.8453125,14.4375 C11.8453125,14.5983081 11.7836188,14.7374669 11.6602295,14.8549805 C11.5368402,14.9724941 11.3907235,15.03125 11.221875,15.03125 L8.728125,15.03125 C8.5592765,15.03125 8.4131598,14.9724941 8.28977051,14.8549805 C8.16638122,14.7374669 8.1046875,14.5983081 8.1046875,14.4375 C8.1046875,14.2766919 8.16638122,14.1375331 8.28977051,14.0200195 C8.4131598,13.9025059 8.5592765,13.84375 8.728125,13.84375 L9.3515625,13.84375 L9.3515625,9.09375 L8.728125,9.09375 C8.5592765,9.09375 8.4131598,9.03499408 8.28977051,8.91748047 C8.16638122,8.79996686 8.1046875,8.6608081 8.1046875,8.5 C8.1046875,8.3391919 8.16638122,8.20003314 8.28977051,8.08251953 C8.4131598,7.96500592 8.5592765,7.90625 8.728125,7.90625 L9.975,7.90625 C10.1438485,7.90625 10.2899652,7.96500592 10.4133545,8.08251953 C10.5367438,8.20003314 10.5984375,8.3391919 10.5984375,8.5 L10.5984375,13.84375 L11.221875,13.84375 Z M9.07880859,6.38476562 C8.84501836,6.14973841 8.728125,5.86523604 8.728125,5.53125 C8.728125,5.19726396 8.8482654,4.91585401 9.0885498,4.68701172 C9.32883421,4.45816943 9.62431465,4.34375 9.975,4.34375 C10.3256853,4.34375 10.6211658,4.45816943 10.8614502,4.68701172 C11.1017346,4.91585401 11.221875,5.19726396 11.221875,5.53125 C11.221875,5.86523604 11.1017346,6.14664599 10.8614502,6.37548828 C10.6211658,6.60433057 10.3256853,6.71875 9.975,6.71875 C9.62431465,6.71875 9.32558717,6.60742299 9.07880859,6.38476562 Z M13.1116699,0.669921875 C14.1377493,0.991538066 15.059908,1.44303095 15.8781738,2.02441406 C16.6964396,2.60579718 17.410788,3.28612892 18.0212402,4.06542969 C18.6316925,4.84473046 19.10576,5.71988447 19.443457,6.69091797 C19.781154,7.66195147 19.95,8.66080216 19.95,9.6875 C19.95,10.9739648 19.6869899,12.2047467 19.1609619,13.3798828 C18.6349339,14.5550189 17.9270796,15.5662393 17.0373779,16.4135742 C16.1476762,17.2609092 15.0858948,17.9350561 13.852002,18.4360352 C12.6181091,18.9370142 11.325788,19.1875 9.975,19.1875 C8.624212,19.1875 7.33189094,18.9370142 6.09799805,18.4360352 C4.86410516,17.9350561 3.80232378,17.2609092 2.91262207,16.4135742 C2.02292036,15.5662393 1.31506611,14.5550189 0.789038086,13.3798828 C0.263010065,12.2047467 0,10.9739648 0,9.6875 C0,8.66080216 0.168845968,7.66195147 0.506542969,6.69091797 C0.84423997,5.71988447 1.31830749,4.84473046 1.92875977,4.06542969 C2.53921204,3.28612892 3.25356036,2.60579718 4.07182617,2.02441406 C4.89009198,1.44303095 5.80900369,0.991538066 6.82858887,0.669921875 C7.84817404,0.348305684 8.89696727,0.1875 9.975,0.1875 C11.0530327,0.1875 12.0985789,0.348305684 13.1116699,0.669921875 Z M9.975,18.0185547 C11.1569395,18.0185547 12.2869087,17.7989931 13.3649414,17.3598633 C14.4429741,16.9207335 15.371627,16.3269894 16.1509277,15.5786133 C16.9302285,14.8302371 17.5504127,13.9427135 18.011499,12.9160156 C18.4725853,11.8893178 18.703125,10.8131567 18.703125,9.6875 C18.703125,8.56184333 18.4725853,7.48568222 18.011499,6.45898438 C17.5504127,5.43228653 16.9302285,4.54785527 16.1509277,3.80566406 C15.371627,3.06347285 14.4429741,2.47282121 13.3649414,2.03369141 C12.2869087,1.59456161 11.1569395,1.375 9.975,1.375 C8.7930605,1.375 7.66309133,1.59456161 6.58505859,2.03369141 C5.50702586,2.47282121 4.57837304,3.06347285 3.79907227,3.80566406 C3.01977149,4.54785527 2.39958727,5.43228653 1.93850098,6.45898438 C1.47741469,7.48568222 1.246875,8.56184333 1.246875,9.6875 C1.246875,10.5904993 1.3929917,11.4656533 1.68522949,12.3129883 C1.97746728,13.1603232 2.39308813,13.9241502 2.93210449,14.6044922 C3.47112086,15.2848341 4.09779916,15.884763 4.8121582,16.4042969 C5.52651724,16.9238307 6.32853559,17.3227525 7.2182373,17.6010742 C8.10793902,17.8793959 9.02685073,18.0185547 9.975,18.0185547 Z"})}))}function MetadataButton(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$onClick=_ref.onClick,onClick=void 0===_ref$onClick?function(){return!0}:_ref$onClick,t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsx)(MetaToolsButton.h,{disabled,icon:(0,jsx_runtime.jsx)(InfoIcon,{color:"dark-5",size:"15px"}),text:t("MetaTools.MetadataButton.label"),onClick})}InfoIcon.__docgenInfo={description:"",methods:[],displayName:"InfoIcon"},MetadataButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func},MetadataButton.__docgenInfo={description:"",methods:[],displayName:"MetadataButton",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},onClick:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1}}}},"./src/components/Classifier/components/MetaTools/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>_MetaTools__WEBPACK_IMPORTED_MODULE_0__.A});var _MetaTools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/MetaTools/MetaTools.jsx")},"./src/components/Classifier/components/QuickTalk/QuickTalk.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>QuickTalk_QuickTalk});var react=__webpack_require__("../../node_modules/react/index.js"),ResponsiveContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ResponsiveContext/ResponsiveContext.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const withResponsiveContext_withResponsiveContext=function withResponsiveContext(WrappedComponent){return props=>(0,jsx_runtime.jsx)(ResponsiveContext.u.Consumer,{children:size=>(0,jsx_runtime.jsx)(WrappedComponent,_objectSpread(_objectSpread({},props),{},{screenSize:size}))})};var Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Keyboard=__webpack_require__("../../node_modules/grommet/es6/components/Keyboard/Keyboard.js"),Heading=__webpack_require__("../../node_modules/grommet/es6/components/Heading/Heading.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),Anchor=__webpack_require__("../../node_modules/grommet/es6/components/Anchor/Anchor.js"),Chat=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Chat.js"),Close=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Close.js"),FormNextLink=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormNextLink.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),i18n=__webpack_require__("./src/translations/i18n.jsx"),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),Markdownz=__webpack_require__("../lib-react-components/dist/esm/Markdownz/Markdownz.js"),Image=__webpack_require__("../../node_modules/grommet/es6/components/Image/Image.js"),DEFAULT_AVATAR="https://static.zooniverse.org/fem-assets/simple-avatar.jpg";function UserAvatar(_ref){var src=_ref.src,_ref$displayName=_ref.displayName,displayName=void 0===_ref$displayName?"":_ref$displayName,_ref$size=_ref.size,size=void 0===_ref$size?"3em":_ref$size,t=(0,i18n.Bd)("components").t,imgSrc=src&&src.length>0?src:DEFAULT_AVATAR;return(0,jsx_runtime.jsx)(Box.a,{alignSelf:"center",width:size,height:size,children:(0,jsx_runtime.jsx)(Image._,{alt:t("QuickTalk.aria.userAvatar",{name:displayName}),src:imgSrc,fallback:DEFAULT_AVATAR})})}UserAvatar.propTypes={src:prop_types_default().string,displayName:prop_types_default().string,size:prop_types_default().string};const components_UserAvatar=UserAvatar;function roleDisplayName(role){return"zooniverse"===role.section&&["admin","team"].indexOf(role.name)>=0?"Zooniverse Team":"zooniverse"!==role.section&&["admin","scientist","owner"].indexOf(role.name)>=0?"Researcher":role.name}function UserRole(_ref){var role=_ref.role;return role?(0,jsx_runtime.jsxs)(Text.E,{textAlign:"center",children:["[",roleDisplayName(role),"]"]}):null}UserAvatar.__docgenInfo={description:"",methods:[],displayName:"UserAvatar",props:{displayName:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},size:{defaultValue:{value:"'3em'",computed:!1},description:"",type:{name:"string"},required:!1},src:{description:"",type:{name:"string"},required:!1}}},UserRole.propTypes={role:prop_types_default().object};const components_UserRole=UserRole;function Comment(_ref){var author=_ref.author,comment=_ref.comment,roles=_ref.roles;return(0,jsx_runtime.jsxs)(Box.a,{as:"li",background:{dark:"dark-1",light:"light-1"},direction:"row",margin:{horizontal:"none",vertical:"xsmall"},children:[(0,jsx_runtime.jsxs)(Box.a,{margin:"xsmall",pad:"xsmall",width:"small",children:[(0,jsx_runtime.jsx)(components_UserAvatar,{src:null==author?void 0:author.avatar_src,displayName:null==author?void 0:author.display_name}),(0,jsx_runtime.jsx)(Text.E,{textAlign:"center",weight:"bold",children:null==author?void 0:author.display_name}),(0,jsx_runtime.jsxs)(Text.E,{textAlign:"center",children:["(@",null==author?void 0:author.login,")"]}),null==roles?void 0:roles.map(function(role){return(0,jsx_runtime.jsx)(components_UserRole,{role},"quicktalk-role-".concat(comment.id,"-").concat(role.name))})]}),(0,jsx_runtime.jsx)(Box.a,{flex:!0,pad:"xsmall",width:"medium",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{children:null==comment?void 0:comment.body})})]})}UserRole.__docgenInfo={description:"",methods:[],displayName:"UserRole",props:{role:{description:"",type:{name:"object"},required:!1}}},Comment.propTypes={author:prop_types_default().object,comment:prop_types_default().object,role:prop_types_default().object};const components_Comment=Comment;Comment.__docgenInfo={description:"",methods:[],displayName:"Comment",props:{author:{description:"",type:{name:"object"},required:!1},comment:{description:"",type:{name:"object"},required:!1},role:{description:"",type:{name:"object"},required:!1}}};var Form=__webpack_require__("../../node_modules/grommet/es6/components/Form/Form.js"),TextArea=__webpack_require__("../../node_modules/grommet/es6/components/TextArea/TextArea.js"),PrimaryButton=__webpack_require__("../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var SubmitButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"PostForm__SubmitButton",componentId:"sc-qzah0j-0"})(["display:block;margin:0 auto;"]);function PostForm(_ref){var postComment=_ref.postComment,postCommentStatus=_ref.postCommentStatus,postCommentStatusMessage=_ref.postCommentStatusMessage,t=(0,i18n.Bd)("components").t,_useState2=_slicedToArray((0,react.useState)(""),2),text=_useState2[0],setText=_useState2[1];function onSubmit(e){return postComment(text),function stopEvent(e){return!!e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0,!1)}(e)}(0,react.useEffect)(function(){setText("")},[postCommentStatus]);var statusText,disabled=postCommentStatus===async_states_default().loading;return postCommentStatusMessage?statusText=postCommentStatusMessage:postCommentStatus===async_states_default().initialized?statusText=t("QuickTalk.status.initialized"):postCommentStatus===async_states_default().loading?statusText=t("QuickTalk.status.loading"):postCommentStatus===async_states_default().success&&(statusText=t("QuickTalk.status.success")),(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-1",light:"light-1"},flex:!1,pad:"xsmall",children:[statusText&&(0,jsx_runtime.jsx)(Text.E,{role:"status","aria-live":"polite",children:statusText}),(0,jsx_runtime.jsxs)(Form.l,{onSubmit,children:[(0,jsx_runtime.jsx)(TextArea.f,{a11yTitle:"Write comments",value:text,onChange:function onChange(e){return setText(e.target.value)},disabled}),(0,jsx_runtime.jsx)(SubmitButton,{a11yTitle:"Post comment",onClick:onSubmit,type:"submit",label:"Post",disabled})]})]})}PostForm.propTypes={postComment:prop_types_default().func,postCommentStatus:prop_types_default().string,postCommentStatusMessage:prop_types_default().string};const components_PostForm=PostForm;function QuickTalk_slicedToArray(r,e){return function QuickTalk_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function QuickTalk_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function QuickTalk_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return QuickTalk_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?QuickTalk_arrayLikeToArray(r,a):void 0}}(r,e)||function QuickTalk_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QuickTalk_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}PostForm.__docgenInfo={description:"",methods:[],displayName:"PostForm",props:{postComment:{description:"",type:{name:"func"},required:!1},postCommentStatus:{description:"",type:{name:"string"},required:!1},postCommentStatusMessage:{description:"",type:{name:"string"},required:!1}}};var FixedBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuickTalk__FixedBox",componentId:"sc-dhmfag-0"})(["position:fixed;bottom:1em;right:2.5em;max-width:80vw;max-height:80vh;z-index:10;"]),ButtonContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuickTalk__ButtonContainer",componentId:"sc-dhmfag-1"})(["border-radius:1em;"]),FixedButtonContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuickTalk__FixedButtonContainer",componentId:"sc-dhmfag-2"})(["border-radius:1em;position:fixed;bottom:1em;right:2.5em;"]),UnorderedList=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuickTalk__UnorderedList",componentId:"sc-dhmfag-3"})(["margin:0;padding:0;"]);function QuickTalk(_ref){var subject=_ref.subject,_ref$comments=_ref.comments,comments=void 0===_ref$comments?[]:_ref$comments,_ref$authors=_ref.authors,authors=void 0===_ref$authors?{}:_ref$authors,_ref$authorRoles=_ref.authorRoles,authorRoles=void 0===_ref$authorRoles?{}:_ref$authorRoles,_ref$postCommentStatu=_ref.postCommentStatus,postCommentStatus=void 0===_ref$postCommentStatu?async_states_default().initialized:_ref$postCommentStatu,_ref$postCommentStatu2=_ref.postCommentStatusMessage,postCommentStatusMessage=void 0===_ref$postCommentStatu2?"":_ref$postCommentStatu2,_ref$postComment=_ref.postComment,postComment=void 0===_ref$postComment?function(){}:_ref$postComment,userId=_ref.userId,_ref$expand=(_ref.screenSize,_ref.expand),expand=void 0!==_ref$expand&&_ref$expand,_ref$fixedPosition=_ref.fixedPosition,fixedPosition=void 0===_ref$fixedPosition||_ref$fixedPosition,_ref$showBadge=_ref.showBadge,showBadge=void 0===_ref$showBadge||_ref$showBadge,panelContent=(0,react.useRef)(),t=(0,i18n.Bd)("components").t;if((0,react.useEffect)(function scrollToLatestComment(){if(postCommentStatus===async_states_default().success){var _panelContent$current,_panelContent$current2,newYCoord=null===(_panelContent$current=panelContent.current)||void 0===_panelContent$current?void 0:_panelContent$current.scrollHeight;null===(_panelContent$current2=panelContent.current)||void 0===_panelContent$current2||_panelContent$current2.scrollTo({top:newYCoord,left:0,behavior:"smooth"})}},[postCommentStatus]),!subject)return null;var _useState2=QuickTalk_slicedToArray((0,react.useState)(expand),2),_expand=_useState2[0],setExpand=_useState2[1],badge=!!(showBadge&&comments.length>0)&&comments.length,QTButtonContainer=fixedPosition?FixedButtonContainer:ButtonContainer,QTPanel=fixedPosition?FixedBox:Box.a;return _expand?(0,jsx_runtime.jsx)(Keyboard.s,{onEsc:function onEsc(){return setExpand(!1)},children:(0,jsx_runtime.jsxs)(QTPanel,{a11yTitle:t("QuickTalk.aria.mainPanel"),elevation:"medium",role:"dialog",background:{dark:"dark-3",light:"light-3"},children:[(0,jsx_runtime.jsxs)(Box.a,{direction:"row",flex:!1,justify:"between",pad:{vertical:"none",horizontal:"small"},children:[(0,jsx_runtime.jsx)(Heading.D,{level:"4",margin:{top:"small",bottom:"none"},pad:"none",children:t("QuickTalk.aria.panelHeading")}),(0,jsx_runtime.jsx)(Button.$,{a11yTitle:t("QuickTalk.aria.closeButton"),autoFocus:!0,icon:(0,jsx_runtime.jsx)(Close.b,{size:"small"}),onClick:function onClick(){return setExpand(!1)},plain:!0})]}),(0,jsx_runtime.jsx)(Box.a,{ref:panelContent,"aria-label":t("QuickTalk.aria.panelContent"),overflow:{vertical:"auto",horizontal:"hidden"},role:"group",tabIndex:"0",children:(0,jsx_runtime.jsxs)(Box.a,{flex:!1,pad:{bottom:"small",left:"small",right:"small"},children:[comments.length>0&&(0,jsx_runtime.jsx)(UnorderedList,{as:"ul",flex:!1,children:comments.map(function(comment){var author=authors[comment.user_id],roles=authorRoles[comment.user_id];return(0,jsx_runtime.jsx)(components_Comment,{comment,author,roles},"quicktalk-comment-".concat(comment.id))})}),!comments.length&&(0,jsx_runtime.jsx)(Box.a,{background:{dark:"dark-1",light:"light-1"},margin:{horizontal:"none",vertical:"xsmall"},pad:"xsmall",children:(0,jsx_runtime.jsx)(Paragraph.f,{textAlign:"center",children:t("QuickTalk.subjectHasNoComments")})})]})}),(0,jsx_runtime.jsxs)(Box.a,{flex:!1,pad:{horizontal:"small",vertical:"xsmall"},children:[userId&&(0,jsx_runtime.jsx)(components_PostForm,{postComment,postCommentStatus,postCommentStatusMessage}),!userId&&(0,jsx_runtime.jsx)(Box.a,{background:{dark:"dark-1",light:"light-1"},margin:{horizontal:"none",vertical:"xsmall"},pad:"xsmall",children:(0,jsx_runtime.jsx)(Paragraph.f,{textAlign:"center",children:t("QuickTalk.loginToPost")})}),(0,jsx_runtime.jsx)(Anchor.M,{alignSelf:"center",label:t("QuickTalk.aria.goToTalk"),href:subject.talkURL,icon:(0,jsx_runtime.jsx)(FormNextLink.s,{size:"small"}),margin:"xsmall",target:"_blank",rel:"nofollow noopener noreferrer",reverse:!0,size:"xsmall"})]})]})}):(0,jsx_runtime.jsx)(QTButtonContainer,{background:{dark:"dark-3",light:"light-3"},elevation:"small",children:(0,jsx_runtime.jsx)(Button.$,{a11yTitle:t("QuickTalk.aria.openButton",{count:comments.length}),onClick:function onClick(){return setExpand(!0)},icon:(0,jsx_runtime.jsx)(Chat.r,{}),badge})})}QuickTalk.propTypes={subject:prop_types_default().object,comments:prop_types_default().arrayOf(prop_types_default().object),authors:prop_types_default().object,authorRoles:prop_types_default().object,postCommentStatus:prop_types_default().string,postCommentStatusMessage:prop_types_default().string,postComment:prop_types_default().func,userId:prop_types_default().string,expand:prop_types_default().bool,fixedPosition:prop_types_default().bool,showBadge:prop_types_default().bool};const QuickTalk_QuickTalk=withResponsiveContext_withResponsiveContext(QuickTalk);QuickTalk.__docgenInfo={description:"",methods:[],displayName:"QuickTalk",props:{comments:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"object"}},required:!1},authors:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},authorRoles:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},postCommentStatus:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},postCommentStatusMessage:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},postComment:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},expand:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},fixedPosition:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},showBadge:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},subject:{description:"",type:{name:"object"},required:!1},userId:{description:"",type:{name:"string"},required:!1}}}},"./src/components/Classifier/components/QuickTalk/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>QuickTalk_QuickTalkContainer});var react=__webpack_require__("../../node_modules/react/index.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),i18n=__webpack_require__("./src/translations/i18n.jsx"),index=__webpack_require__("../../node_modules/swr/dist/index/index.mjs"),helpers=__webpack_require__("./src/helpers/index.js"),hooks=__webpack_require__("./src/hooks/index.js"),QuickTalk=__webpack_require__("./src/components/Classifier/components/QuickTalk/QuickTalk.jsx"),src=__webpack_require__("../lib-panoptes-js/src/index.js");function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return _regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),_regeneratorDefine2(u),_regeneratorDefine2(u,o,"Generator"),_regeneratorDefine2(u,n,function(){return this}),_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,r,n,t)}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getDefaultTalkBoard(_x){return _getDefaultTalkBoard.apply(this,arguments)}function _getDefaultTalkBoard(){return _getDefaultTalkBoard=function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(_regenerator().m(function _callee(project){var query;return _regenerator().w(function(_context){for(;;)switch(_context.n){case 0:if(project){_context.n=1;break}return _context.a(2,void 0);case 1:return query={section:"project-".concat(project.id),subject_default:!0},_context.a(2,src.Hv.get("/boards",query).then(function(response){var _response$body;return null==response||null===(_response$body=response.body)||void 0===_response$body||null===(_response$body=_response$body.boards)||void 0===_response$body?void 0:_response$body[0]}))}},_callee)})),_getDefaultTalkBoard.apply(this,arguments)}function getTalkComments_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return getTalkComments_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(getTalkComments_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,getTalkComments_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,getTalkComments_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),getTalkComments_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",getTalkComments_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),getTalkComments_regeneratorDefine2(u),getTalkComments_regeneratorDefine2(u,o,"Generator"),getTalkComments_regeneratorDefine2(u,n,function(){return this}),getTalkComments_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(getTalkComments_regenerator=function _regenerator(){return{w:i,m:f}})()}function getTalkComments_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}getTalkComments_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){getTalkComments_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},getTalkComments_regeneratorDefine2(e,r,n,t)}function getTalkComments_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getTalkComments(_x){return _getTalkComments.apply(this,arguments)}function _getTalkComments(){return _getTalkComments=function getTalkComments_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getTalkComments_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getTalkComments_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(getTalkComments_regenerator().m(function _callee(subject){var query;return getTalkComments_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:if(null!=subject&&subject.project){_context.n=1;break}return _context.a(2,[]);case 1:return query={section:"project-".concat(subject.project.id),focus_id:subject.id,focus_type:"Subject",page:1,sort:"created_at"},_context.a(2,src.Hv.get("/comments",query).then(function(response){var _response$body;return(null==response||null===(_response$body=response.body)||void 0===_response$body?void 0:_response$body.comments)||[]}))}},_callee)})),_getTalkComments.apply(this,arguments)}function getTalkDiscussion_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return getTalkDiscussion_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(getTalkDiscussion_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,getTalkDiscussion_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,getTalkDiscussion_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),getTalkDiscussion_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",getTalkDiscussion_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),getTalkDiscussion_regeneratorDefine2(u),getTalkDiscussion_regeneratorDefine2(u,o,"Generator"),getTalkDiscussion_regeneratorDefine2(u,n,function(){return this}),getTalkDiscussion_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(getTalkDiscussion_regenerator=function _regenerator(){return{w:i,m:f}})()}function getTalkDiscussion_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}getTalkDiscussion_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){getTalkDiscussion_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},getTalkDiscussion_regeneratorDefine2(e,r,n,t)}function getTalkDiscussion_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getTalkDiscussion(_x,_x2){return _getTalkDiscussion.apply(this,arguments)}function _getTalkDiscussion(){return _getTalkDiscussion=function getTalkDiscussion_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getTalkDiscussion_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getTalkDiscussion_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(getTalkDiscussion_regenerator().m(function _callee(board,title){var query;return getTalkDiscussion_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:if(board&&title){_context.n=1;break}return _context.a(2,void 0);case 1:return query={board_id:board.id,title,subject_default:!0},_context.a(2,src.Hv.get("/discussions",query).then(function(response){var _response$body;return null==response||null===(_response$body=response.body)||void 0===_response$body||null===(_response$body=_response$body.discussions)||void 0===_response$body?void 0:_response$body[0]}))}},_callee)})),_getTalkDiscussion.apply(this,arguments)}function getTalkRoles_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return getTalkRoles_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(getTalkRoles_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,getTalkRoles_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,getTalkRoles_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),getTalkRoles_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",getTalkRoles_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),getTalkRoles_regeneratorDefine2(u),getTalkRoles_regeneratorDefine2(u,o,"Generator"),getTalkRoles_regeneratorDefine2(u,n,function(){return this}),getTalkRoles_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(getTalkRoles_regenerator=function _regenerator(){return{w:i,m:f}})()}function getTalkRoles_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}getTalkRoles_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){getTalkRoles_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},getTalkRoles_regeneratorDefine2(e,r,n,t)}function getTalkRoles_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getTalkRoles(_x){return _getTalkRoles.apply(this,arguments)}function _getTalkRoles(){return _getTalkRoles=function getTalkRoles_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getTalkRoles_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getTalkRoles_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(getTalkRoles_regenerator().m(function _callee(_ref){var _ref$userIds,userIds,project,query;return getTalkRoles_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:if(_ref$userIds=_ref.userIds,userIds=void 0===_ref$userIds?[]:_ref$userIds,project=_ref.project,0!==userIds.length&&project){_context.n=1;break}return _context.a(2,[]);case 1:return query={user_id:userIds.join(","),section:["zooniverse","project-".concat(project.id)].join(","),is_shown:!0},_context.a(2,src.Hv.get("/roles",query).then(function(response){var _response$body;return(null==response||null===(_response$body=response.body)||void 0===_response$body?void 0:_response$body.roles)||[]}))}},_callee)})),_getTalkRoles.apply(this,arguments)}function getUsersByID_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return getUsersByID_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(getUsersByID_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,getUsersByID_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,getUsersByID_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),getUsersByID_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",getUsersByID_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),getUsersByID_regeneratorDefine2(u),getUsersByID_regeneratorDefine2(u,o,"Generator"),getUsersByID_regeneratorDefine2(u,n,function(){return this}),getUsersByID_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(getUsersByID_regenerator=function _regenerator(){return{w:i,m:f}})()}function getUsersByID_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}getUsersByID_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){getUsersByID_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},getUsersByID_regeneratorDefine2(e,r,n,t)}function getUsersByID_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getUsersByID(){return _getUsersByID.apply(this,arguments)}function _getUsersByID(){return _getUsersByID=function getUsersByID_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getUsersByID_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getUsersByID_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(getUsersByID_regenerator().m(function _callee(){var userIds,query,_args=arguments;return getUsersByID_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:if(0!==(userIds=_args.length>0&&void 0!==_args[0]?_args[0]:[]).length){_context.n=1;break}return _context.a(2,[]);case 1:return query={id:userIds.join(",")},_context.a(2,src.bB.get("/users",query).then(function(response){var _response$body;return(null==response||null===(_response$body=response.body)||void 0===_response$body?void 0:_response$body.users)||[]}))}},_callee)})),_getUsersByID.apply(this,arguments)}function postTalkComment_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return postTalkComment_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(postTalkComment_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,postTalkComment_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,postTalkComment_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),postTalkComment_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",postTalkComment_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),postTalkComment_regeneratorDefine2(u),postTalkComment_regeneratorDefine2(u,o,"Generator"),postTalkComment_regeneratorDefine2(u,n,function(){return this}),postTalkComment_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(postTalkComment_regenerator=function _regenerator(){return{w:i,m:f}})()}function postTalkComment_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}postTalkComment_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){postTalkComment_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},postTalkComment_regeneratorDefine2(e,r,n,t)}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function postTalkComment_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function postTalkComment(_x,_x2,_x3,_x4){return _postTalkComment.apply(this,arguments)}function _postTalkComment(){return _postTalkComment=function postTalkComment_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){postTalkComment_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){postTalkComment_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(postTalkComment_regenerator().m(function _callee(text,discussion,user,authorization){var _response$body,comments,response,_response$body$commen,comment;return postTalkComment_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:if(text&&discussion&&user&&authorization){_context.n=1;break}return _context.a(2,void 0);case 1:return comments={user_id:user.id,body:text,discussion_id:+discussion.id},_context.n=2,src.Hv.post("/comments",{comments},{authorization});case 2:if(null==(response=_context.v)||null===(_response$body=response.body)||void 0===_response$body||!_response$body.comments){_context.n=3;break}return _response$body$commen=_slicedToArray(response.body.comments,1),comment=_response$body$commen[0],_context.a(2,comment);case 3:return _context.a(2,null)}},_callee)})),_postTalkComment.apply(this,arguments)}function postTalkDiscussion_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return postTalkDiscussion_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(postTalkDiscussion_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,postTalkDiscussion_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,postTalkDiscussion_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),postTalkDiscussion_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",postTalkDiscussion_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),postTalkDiscussion_regeneratorDefine2(u),postTalkDiscussion_regeneratorDefine2(u,o,"Generator"),postTalkDiscussion_regeneratorDefine2(u,n,function(){return this}),postTalkDiscussion_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(postTalkDiscussion_regenerator=function _regenerator(){return{w:i,m:f}})()}function postTalkDiscussion_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}postTalkDiscussion_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){postTalkDiscussion_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},postTalkDiscussion_regeneratorDefine2(e,r,n,t)}function postTalkDiscussion_slicedToArray(r,e){return function postTalkDiscussion_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function postTalkDiscussion_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function postTalkDiscussion_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return postTalkDiscussion_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?postTalkDiscussion_arrayLikeToArray(r,a):void 0}}(r,e)||function postTalkDiscussion_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function postTalkDiscussion_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function postTalkDiscussion_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function postTalkDiscussion(_x,_x2,_x3,_x4,_x5,_x6){return _postTalkDiscussion.apply(this,arguments)}function _postTalkDiscussion(){return _postTalkDiscussion=function postTalkDiscussion_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){postTalkDiscussion_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){postTalkDiscussion_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(postTalkDiscussion_regenerator().m(function _callee(text,title,subject,board,user,authorization){var _response$body,comments,discussions,response,_response$body$discus,discussion;return postTalkDiscussion_regenerator().w(function(_context){for(;;)switch(_context.n){case 0:if(text&&title&&subject&&board&&user&&authorization){_context.n=1;break}return _context.a(2,void 0);case 1:return comments=[{user_id:user.id,body:text,focus_id:+subject.id,focus_type:"Subject"}],discussions={title,user_id:user.id,subject_default:!0,board_id:board.id,comments},_context.n=2,src.Hv.post("/discussions",{discussions},{authorization});case 2:if(null==(response=_context.v)||null===(_response$body=response.body)||void 0===_response$body||!_response$body.discussions){_context.n=3;break}return _response$body$discus=postTalkDiscussion_slicedToArray(response.body.discussions,1),discussion=_response$body$discus[0],_context.a(2,discussion);case 3:return _context.a(2,null)}},_callee)})),_postTalkDiscussion.apply(this,arguments)}var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function QuickTalkContainer_regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return QuickTalkContainer_regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(QuickTalkContainer_regeneratorDefine2(t={},n,function(){return this}),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,QuickTalkContainer_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,QuickTalkContainer_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),QuickTalkContainer_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",QuickTalkContainer_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),QuickTalkContainer_regeneratorDefine2(u),QuickTalkContainer_regeneratorDefine2(u,o,"Generator"),QuickTalkContainer_regeneratorDefine2(u,n,function(){return this}),QuickTalkContainer_regeneratorDefine2(u,"toString",function(){return"[object Generator]"}),(QuickTalkContainer_regenerator=function _regenerator(){return{w:i,m:f}})()}function QuickTalkContainer_regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}QuickTalkContainer_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){QuickTalkContainer_regeneratorDefine2(e,r,function(e){return this._invoke(r,n,e)})}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},QuickTalkContainer_regeneratorDefine2(e,r,n,t)}function QuickTalkContainer_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function QuickTalkContainer_slicedToArray(r,e){return function QuickTalkContainer_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function QuickTalkContainer_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function QuickTalkContainer_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return QuickTalkContainer_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?QuickTalkContainer_arrayLikeToArray(r,a):void 0}}(r,e)||function QuickTalkContainer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function QuickTalkContainer_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function storeMapper(store){return{authClient:store.authClient,subject:store.subjects.active}}var SWROptions={revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:0};function QuickTalkContainer(){var _author_ids,t=(0,i18n.Bd)().t,_useStores=(0,hooks.gy)(storeMapper),authClient=_useStores.authClient,subject=_useStores.subject,user=(0,hooks.F5)(authClient).data,userId=null==user?void 0:user.id,authorization=(0,hooks.UK)({authClient,userID:userId}),comments=(0,index.Ay)(subject,getTalkComments,SWROptions).data,author_ids=null==comments?void 0:comments.map(function(comment){return comment.user_id});author_ids=null===(_author_ids=author_ids)||void 0===_author_ids?void 0:_author_ids.filter(function(id,i){return author_ids.indexOf(id)===i});var authors={},authorRoles={},allUsers=(0,index.Ay)([author_ids],getUsersByID,SWROptions).data;null==allUsers||allUsers.forEach(function(user){authors[user.id]=user,authorRoles[user.id]=[]});var rolesKey=null!=subject&&subject.project?{userIds:author_ids,project:subject.project}:null,allRoles=(0,index.Ay)(rolesKey,getTalkRoles,SWROptions).data;null==allRoles||allRoles.forEach(function(role){var _authorRoles$role$use;null===(_authorRoles$role$use=authorRoles[role.user_id])||void 0===_authorRoles$role$use||_authorRoles$role$use.push(role)});var _useState2=QuickTalkContainer_slicedToArray((0,react.useState)(async_states_default().initialized),2),postCommentStatus=_useState2[0],setPostCommentStatus=_useState2[1],_useState4=QuickTalkContainer_slicedToArray((0,react.useState)(""),2),postCommentStatusMessage=_useState4[0],setPostCommentStatusMessage=_useState4[1];if(!subject)return null;function _postComment(){return _postComment=function QuickTalkContainer_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){QuickTalkContainer_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){QuickTalkContainer_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(QuickTalkContainer_regenerator().m(function _callee(text){var project,defaultBoard,discussionTitle,existingDiscussion,newComment,discussion,_t;return QuickTalkContainer_regenerator().w(function(_context){for(;;)switch(_context.p=_context.n){case 0:if(project=null==subject?void 0:subject.project,subject&&project){_context.n=1;break}return _context.a(2);case 1:if(setPostCommentStatus(async_states_default().loading),setPostCommentStatusMessage(""),_context.p=2,text&&0!==text.trim().length){_context.n=3;break}throw new Error(t("QuickTalk.errors.noText"));case 3:if(authorization){_context.n=4;break}throw new Error(t("QuickTalk.errors.noUser"));case 4:return _context.n=5,getDefaultTalkBoard(project);case 5:if(defaultBoard=_context.v){_context.n=6;break}throw new Error(t("QuickTalk.errors.noBoard"));case 6:return discussionTitle="Subject ".concat(subject.id),_context.n=7,getTalkDiscussion(defaultBoard,discussionTitle);case 7:if(!(existingDiscussion=_context.v)){_context.n=10;break}return _context.n=8,postTalkComment(text,existingDiscussion,user,authorization);case 8:if(newComment=_context.v){_context.n=9;break}throw new Error(t("QuickTalk.errors.failPostComment"));case 9:comments.push(newComment),setPostCommentStatus(async_states_default().success),setPostCommentStatusMessage(""),_context.n=13;break;case 10:return _context.n=11,postTalkDiscussion(text,discussionTitle,subject,defaultBoard,user,authorization);case 11:if(discussion=_context.v){_context.n=12;break}throw new Error(t("QuickTalk.errors.failPostDiscussion"));case 12:comments.push(discussion.latest_comment),setPostCommentStatus(async_states_default().success),setPostCommentStatusMessage("");case 13:_context.n=15;break;case 14:_context.p=14,_t=_context.v,console.error(_t),setPostCommentStatus(async_states_default().error),setPostCommentStatusMessage((null==_t?void 0:_t.message)||_t);case 15:return _context.a(2)}},_callee,null,[[2,14]])})),_postComment.apply(this,arguments)}return(0,jsx_runtime.jsx)(QuickTalk.A,{subject,comments,authors,authorRoles,postCommentStatus,postCommentStatusMessage,postComment:function postComment(_x){return _postComment.apply(this,arguments)},userId})}const QuickTalk_QuickTalkContainer=(0,helpers.lb)((0,mobxreact_esm.PA)(QuickTalkContainer),"quicktalk");QuickTalkContainer.__docgenInfo={description:"",methods:[],displayName:"QuickTalkContainer"}},"./src/components/Classifier/components/SlideTutorial/SlideTutorial.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>SlideTutorial_SlideTutorial});var react=__webpack_require__("../../node_modules/react/index.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Markdownz=__webpack_require__("../lib-react-components/dist/esm/Markdownz/Markdownz.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),RadioButtonGroup=__webpack_require__("../../node_modules/grommet/es6/components/RadioButtonGroup/RadioButtonGroup.js"),FormPrevious=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormPrevious.js"),FormNext=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormNext.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"StepNavigation__StyledButton",componentId:"sc-ok9dw1-0"})(["&:first-of-type{margin:0 15px 0 0;padding:0;}&:last-of-type{margin:0;padding:0;}"]),StyledRadioButtonGroup=(0,styled_components_browser_esm.default)(RadioButtonGroup.z).withConfig({displayName:"StepNavigation__StyledRadioButtonGroup",componentId:"sc-ok9dw1-1"})(["position:relative;flex-wrap:wrap;gap:20px 0;> label{> span{height:0;overflow:hidden;position:absolute;width:0;}> div{margin-right:15px;}}"]);function StepNavigation(_ref){var _ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$name=_ref.name,name=void 0===_ref$name?"step-selectors":_ref$name,_ref$onChange=_ref.onChange,onChange=void 0===_ref$onChange?function(){return!0}:_ref$onChange,_ref$stepIndex=_ref.stepIndex,stepIndex=void 0===_ref$stepIndex?0:_ref$stepIndex,_ref$steps=_ref.steps,steps=void 0===_ref$steps?[]:_ref$steps,t=(0,i18n.Bd)("components").t;if((null==steps?void 0:steps.length)>1){var nextStep=stepIndex+1,prevStep=stepIndex-1,options=steps.map(function(step,index){var label=t("StepNavigation.go",{index:index+1}),value="step-".concat(index);return{id:"".concat(name,"-").concat(value),label,value}});return(0,jsx_runtime.jsxs)(Box.a,{align:"center",className,direction:"row",justify:"center",margin:{top:"medium"},children:[(0,jsx_runtime.jsx)(StyledButton,{a11yTitle:t("StepNavigation.previous"),"data-index":prevStep,disabled:0===stepIndex,icon:(0,jsx_runtime.jsx)(FormPrevious.Q,{}),onClick:function onClick(){return onChange(prevStep)},plain:!0}),(0,jsx_runtime.jsx)(StyledRadioButtonGroup,{direction:"row",gap:"none",name,onChange:function onRadioChange(event){var _event$target$value$s2=_slicedToArray(event.target.value.split("-"),2),value=(_event$target$value$s2[0],_event$target$value$s2[1]),indexValue=parseInt(value);onChange(indexValue)},options,value:"step-".concat(stepIndex)}),(0,jsx_runtime.jsx)(StyledButton,{a11yTitle:t("StepNavigation.next"),"data-index":nextStep,disabled:stepIndex===steps.length-1,icon:(0,jsx_runtime.jsx)(FormNext.O,{}),onClick:function onClick(){return onChange(nextStep)},plain:!0})]})}return null}StepNavigation.propTypes={className:prop_types_default().string,name:prop_types_default().string,onChange:prop_types_default().func,stepIndex:prop_types_default().number,steps:prop_types_default().array};const StepNavigation_StepNavigation=StepNavigation;function SlideTutorial_slicedToArray(r,e){return function SlideTutorial_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function SlideTutorial_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function SlideTutorial_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return SlideTutorial_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?SlideTutorial_arrayLikeToArray(r,a):void 0}}(r,e)||function SlideTutorial_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SlideTutorial_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}StepNavigation.__docgenInfo={description:"",methods:[],displayName:"StepNavigation",props:{className:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},name:{defaultValue:{value:"'step-selectors'",computed:!1},description:"",type:{name:"string"},required:!1},onChange:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},stepIndex:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},steps:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"array"},required:!1}}};var StyledMarkdownWrapper=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"SlideTutorial__StyledMarkdownWrapper",componentId:"sc-zx5fnv-0"})(["> h1,h2{font-size:26px;line-height:31px;}> p{margin-top:10px;margin-bottom:10px;}"]);function SlideTutorial(_ref){var _ref$activeStep=_ref.activeStep,activeStep=void 0===_ref$activeStep?0:_ref$activeStep,_ref$className=_ref.className,className=void 0===_ref$className?"":_ref$className,_ref$onClick=(_ref.projectDisplayName,_ref.onClick),onClick=void 0===_ref$onClick?function(){return!0}:_ref$onClick,height=_ref.height,_ref$pad=_ref.pad,pad=void 0===_ref$pad?"medium":_ref$pad,_ref$steps=_ref.steps,steps=void 0===_ref$steps?[]:_ref$steps,stepWithMedium=_ref.stepWithMedium,_ref$strings=_ref.strings,strings=void 0===_ref$strings?{}:_ref$strings,width=_ref.width,_useState2=SlideTutorial_slicedToArray((0,react.useState)(activeStep),2),stepIndex=_useState2[0],setStepIndex=_useState2[1],t=(0,i18n.Bd)("components").t,_stepWithMedium=stepWithMedium(stepIndex),medium=_stepWithMedium.medium,step=_stepWithMedium.step,isThereMedia=null==medium?void 0:medium.src,isLastStep=stepIndex===steps.length-1;return step?(0,jsx_runtime.jsxs)(Box.a,{className,height,justify:"between",pad,width,children:[(0,jsx_runtime.jsxs)(StyledMarkdownWrapper,{"aria-live":"polite",autoFocus:!0,height:"100%",overflow:{horizontal:"hidden",vertical:"auto"},children:[isThereMedia&&(0,jsx_runtime.jsx)(Media.A,{alt:t("SlideTutorial.alt",{activeStep:stepIndex}),fit:"contain",height:200,src:medium.src}),(0,jsx_runtime.jsx)(Markdownz.Ay,{children:strings["steps.".concat(stepIndex,".content")]})]}),(0,jsx_runtime.jsx)(StepNavigation_StepNavigation,{name:"TutorialStepNavigation",onChange:setStepIndex,stepIndex,steps}),isLastStep&&(0,jsx_runtime.jsx)(Button.$,{label:t("SlideTutorial.getStarted"),onClick,margin:{top:"medium"},primary:!0})]}):(0,jsx_runtime.jsx)(Box.a,{height:"100%",justify:"between",pad,children:(0,jsx_runtime.jsx)(Paragraph.f,{children:t("SlideTutorial.error")})})}var tutorialStep=prop_types_default().shape({content:prop_types_default().string,medium:prop_types_default().string});SlideTutorial.propTypes={activeStep:prop_types_default().number,className:prop_types_default().string,height:prop_types_default().string,projectDisplayName:prop_types_default().string,onClick:prop_types_default().func,steps:prop_types_default().arrayOf(tutorialStep),stepWithMedium:prop_types_default().func.isRequired,strings:prop_types_default().object,width:prop_types_default().string};const SlideTutorial_SlideTutorial=SlideTutorial;SlideTutorial.__docgenInfo={description:"A workflow slide tutorial which can be embedded directly into the classifier or shown in a popup.\n\n```\n<SlideTutorial\n  activeStep={0}\n  height='100%'\n  steps={[...steps]}\n  stepwithMedium={index => steps[index]}\n  width='40vw'\n/>\n```",methods:[],displayName:"SlideTutorial",props:{activeStep:{defaultValue:{value:"0",computed:!1},description:"Array index of the current tutorial step.",type:{name:"number"},required:!1},className:{defaultValue:{value:"''",computed:!1},description:"Optional CSS classes",type:{name:"string"},required:!1},projectDisplayName:{defaultValue:{value:"''",computed:!1},description:"The project name",type:{name:"string"},required:!1},onClick:{defaultValue:{value:"() => true",computed:!1},description:"Callback for the Get Started button.",type:{name:"func"},required:!1},pad:{defaultValue:{value:"'medium'",computed:!1},required:!1},steps:{defaultValue:{value:"[]",computed:!1},description:"Array of tutorial steps.\n    A step is a string of markdown content and an optional reference to a media file (image/audio/video.)",type:{name:"arrayOf",value:{name:"custom",raw:"tutorialStep"}},required:!1},strings:{defaultValue:{value:"{}",computed:!1},description:"Translated strings for the tutorial content",type:{name:"object"},required:!1},height:{description:"Tutorial height (CSS units).",type:{name:"string"},required:!1},stepWithMedium:{description:"A function which should return the step and media file for a given step index.",type:{name:"func"},required:!0},width:{description:"Tutorial width (CSS units).",type:{name:"string"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/DataImageViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>DataImageViewerConnector});var helpers=__webpack_require__("./src/helpers/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Grid=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),withParentSize=__webpack_require__("../../node_modules/@visx/responsive/esm/enhancers/withParentSize.js"),ScatterPlotViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/ScatterPlotViewer/index.js"),SingleImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"),getZoomBackgroundColor=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/getZoomBackgroundColor/getZoomBackgroundColor.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"DataImageViewer__StyledBox",componentId:"sc-j3kw6w-0"})(["position:relative;"]),CHART_MARGINS={bottom:50,left:70,right:10,top:40},JSON_DATA={data:[],chartOptions:{xAxisLabel:"",yAxisLabel:""}},DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},DEFAULT_THEME={dark:!1,global:{colors:{}}},DataImageViewer=(0,react.forwardRef)(function DataImageViewer(_ref,ref){var _ref$allowPanZoom=_ref.allowPanZoom,allowPanZoom=void 0===_ref$allowPanZoom?"":_ref$allowPanZoom,_ref$imageLocation=_ref.imageLocation,imageLocation=void 0===_ref$imageLocation?null:_ref$imageLocation,_ref$jsonData=_ref.jsonData,jsonData=void 0===_ref$jsonData?JSON_DATA:_ref$jsonData,loadingState=_ref.loadingState,parentWidth=_ref.parentWidth,_ref$resetView=_ref.resetView,resetView=void 0===_ref$resetView?DEFAULT_HANDLER:_ref$resetView,_ref$setAllowPanZoom=_ref.setAllowPanZoom,setAllowPanZoom=void 0===_ref$setAllowPanZoom?DEFAULT_HANDLER:_ref$setAllowPanZoom,_ref$setOnPan=_ref.setOnPan,setOnPan=void 0===_ref$setOnPan?DEFAULT_HANDLER:_ref$setOnPan,_ref$setOnZoom=_ref.setOnZoom,setOnZoom=void 0===_ref$setOnZoom?DEFAULT_HANDLER:_ref$setOnZoom,_ref$theme=_ref.theme,theme=void 0===_ref$theme?DEFAULT_THEME:_ref$theme,zoomConfiguration=_ref.zoomConfiguration,dark=theme.dark,_theme$global$colors=theme.global.colors,colors=void 0===_theme$global$colors?{}:_theme$global$colors,chartOptions=jsonData.chartOptions,zoomEnabled={image:"image"===allowPanZoom,scatterPlot:"scatterPlot"===allowPanZoom},imageViewerBackground=(0,getZoomBackgroundColor.A)(dark,zoomEnabled.image,colors),areas=parentWidth<=500?[{name:"scatterPlot",start:[0,0],end:[0,0]},{name:"image",start:[0,1],end:[0,1]}]:[{name:"scatterPlot",start:[0,0],end:[0,0]},{name:"image",start:[1,0],end:[1,0]}],columns=parentWidth<=500?["full"]:["1/2","1/2"],rows=parentWidth<=500?["auto","auto"]:["full"];var data=jsonData.data?jsonData.data:jsonData;return(0,jsx_runtime.jsxs)(Grid.x,{areas,columns,fill:!0,forwardedRef:ref,gap:"xsmall",pad:{horizontal:"xsmall"},rows,children:[(0,jsx_runtime.jsx)(StyledBox,{border:zoomEnabled.scatterPlot&&{color:"brand",size:"xsmall"},gridArea:"scatterPlot",height:"500px",children:(0,jsx_runtime.jsx)(ScatterPlotViewer.A,{data,invertAxes:null==chartOptions?void 0:chartOptions.invertAxes,margin:CHART_MARGINS,setOnPan:zoomEnabled.scatterPlot?setOnPan:DEFAULT_HANDLER,setOnZoom:zoomEnabled.scatterPlot?setOnZoom:DEFAULT_HANDLER,xAxisLabel:null==chartOptions?void 0:chartOptions.xAxisLabel,yAxisLabel:null==chartOptions?void 0:chartOptions.yAxisLabel,yAxisLabelOffset:50,zoomConfiguration,zoomControlFn:zoomEnabled.scatterPlot?function(){return setAllowPanZoom("")}:function(){return setAllowPanZoom("scatterPlot")},zooming:zoomEnabled.scatterPlot})}),(0,jsx_runtime.jsx)(Box.a,{background:imageViewerBackground,border:zoomEnabled.image&&{color:"brand",size:"xsmall"},gridArea:"image",children:imageLocation&&(0,jsx_runtime.jsx)(SingleImageViewer.Ay,{enableInteractionLayer:!1,imageLocation,loadingState,setOnPan:zoomEnabled.image?setOnPan:DEFAULT_HANDLER,setOnZoom:zoomEnabled.image?setOnZoom:DEFAULT_HANDLER,zoomControlFn:zoomEnabled.image?function(){return function disableImageZoom(){resetView(),setAllowPanZoom("")}()}:function(){return setAllowPanZoom("image")},zooming:zoomEnabled.image})})]})});DataImageViewer.propTypes={allowPanZoom:prop_types_default().string,enableRotation:prop_types_default().func,imageLocation:prop_types_default().object,jsonData:prop_types_default().shape({data:prop_types_default().oneOfType([prop_types_default().array,prop_types_default().object]),chartOptions:prop_types_default().object}),move:prop_types_default().bool,parentWidth:prop_types_default().number,resetView:prop_types_default().func,rotation:prop_types_default().number,setAllowPanZoom:prop_types_default().func,setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,theme:prop_types_default().object};const DataImageViewer_DataImageViewer=(0,styled_components_browser_esm.withTheme)((0,withParentSize.A)(DataImageViewer));DataImageViewer.__docgenInfo={description:"",methods:[],displayName:"DataImageViewer",props:{allowPanZoom:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},imageLocation:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"object"},required:!1},jsonData:{defaultValue:{value:"{\n  data: [],\n  chartOptions: {\n    xAxisLabel: '',\n    yAxisLabel: ''\n  }\n}",computed:!1},description:"",type:{name:"shape",value:{data:{name:"union",value:[{name:"array"},{name:"object"}],required:!1},chartOptions:{name:"object",required:!1}}},required:!1},resetView:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setAllowPanZoom:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnPan:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnZoom:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},theme:{defaultValue:{value:"{\n  dark: false,\n  global: {\n    colors: {}\n  }\n}",computed:!1},description:"",type:{name:"object"},required:!1},enableRotation:{description:"",type:{name:"func"},required:!1},move:{description:"",type:{name:"bool"},required:!1},parentWidth:{description:"",type:{name:"number"},required:!1},rotation:{description:"",type:{name:"number"},required:!1}}};var hooks=__webpack_require__("./src/hooks/index.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var _excluded=["onError","onReady","subject","viewerConfiguration"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DataImageViewerContainer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},SUBJECT={id:"",locations:[]};function DataImageViewerContainer(_ref){var _jsonData$chartOption,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DataImageViewerContainer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DataImageViewerContainer_DEFAULT_HANDLER:_ref$onReady,_ref$subject=_ref.subject,subject=void 0===_ref$subject?SUBJECT:_ref$subject,viewerConfiguration=_ref.viewerConfiguration,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),_useState2=_slicedToArray((0,react.useState)(""),2),allowPanZoom=_useState2[0],setAllowPanZoom=_useState2[1],_useDataImageSubject=function useDataImageSubject(_ref){var onError=_ref.onError,onReady=_ref.onReady,subject=_ref.subject,_useSubjectJSON=(0,hooks.ej)({onError,onReady,subject}),loading=_useSubjectJSON.loading,data=(_useSubjectJSON.error,_useSubjectJSON.data),viewer=_useSubjectJSON.viewer,jsonData={data:[],chartOptions:{}},imageLocation=null;data&&!loading&&(jsonData=data);var locations=subject.locations.filter(function(location){return"image"===location.type});return(null==locations?void 0:locations.length)>0&&(imageLocation=locations.reverse()[0]),{imageLocation,jsonData,loading,viewer}}({onError,onReady,subject}),imageLocation=_useDataImageSubject.imageLocation,jsonData=_useDataImageSubject.jsonData,viewer=(_useDataImageSubject.loading,_useDataImageSubject.viewer);if(!subject.id)return null;var zoomConfiguration=(null===(_jsonData$chartOption=jsonData.chartOptions)||void 0===_jsonData$chartOption?void 0:_jsonData$chartOption.zoomConfiguration)||(null==viewerConfiguration?void 0:viewerConfiguration.zoomConfiguration);return(0,jsx_runtime.jsx)(DataImageViewer_DataImageViewer,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({allowPanZoom,imageLocation,ref:viewer,jsonData,setAllowPanZoom,zoomConfiguration},rest))}DataImageViewerContainer.propTypes={onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator.A)})},DataImageViewerContainer.__docgenInfo={description:"",methods:[],displayName:"DataImageViewerContainer",props:{onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"{\n  id: '',\n  locations: []\n}",computed:!1},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1}}};const DataImageViewerConnector=(0,helpers.Lg)(DataImageViewerContainer,function storeMapper(classifierStore){var subject=classifierStore.subjects.active,_classifierStore$subj=classifierStore.subjectViewer;return{resetView:_classifierStore$subj.resetView,setOnPan:_classifierStore$subj.setOnPan,setOnZoom:_classifierStore$subj.setOnZoom,subject}})},"./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/GeoMapViewer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>GeoMapViewer_GeoMapViewer});var models_namespaceObject={};__webpack_require__.r(models_namespaceObject),__webpack_require__.d(models_namespaceObject,{Point:()=>models_Point_Point});var Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Map=__webpack_require__("../../node_modules/ol/Map.js"),View=__webpack_require__("../../node_modules/ol/View.js"),condition=__webpack_require__("../../node_modules/ol/events/condition.js"),GeoJSON=__webpack_require__("../../node_modules/ol/format/GeoJSON.js"),Select=__webpack_require__("../../node_modules/ol/interaction/Select.js"),Translate=__webpack_require__("../../node_modules/ol/interaction/Translate.js"),Tile=__webpack_require__("../../node_modules/ol/layer/Tile.js"),Vector=__webpack_require__("../../node_modules/ol/layer/Vector.js"),OSM=__webpack_require__("../../node_modules/ol/source/OSM.js"),source_Vector=__webpack_require__("../../node_modules/ol/source/Vector.js"),RecenterButton=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/components/RecenterButton/RecenterButton.jsx"),ResetButton=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/components/ResetButton/ResetButton.jsx"),mobx_state_tree_module=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),Point=__webpack_require__("../../node_modules/ol/geom/Point.js"),Style=__webpack_require__("../../node_modules/ol/style/Style.js"),Fill=__webpack_require__("../../node_modules/ol/style/Fill.js"),Stroke=__webpack_require__("../../node_modules/ol/style/Stroke.js"),Circle=__webpack_require__("../../node_modules/ol/style/Circle.js");const models_Point_Point=mobx_state_tree_module.gK.model("Point",{type:mobx_state_tree_module.gK.literal("Feature"),geometry:mobx_state_tree_module.gK.model({type:mobx_state_tree_module.gK.literal("Point"),coordinates:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.number)}),properties:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.model({uncertainty_radius:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number)}),{})}).preProcessSnapshot(function(snapshot){var _newGeometry$getType,_newGeometry$getCoord,newSnapshot=Object.assign({},snapshot,{type:"Feature"}),newGeometry=newSnapshot.geometry||{},coordinates=[];"function"==typeof newGeometry.getType?coordinates=(null===(_newGeometry$getCoord=newGeometry.getCoordinates)||void 0===_newGeometry$getCoord?void 0:_newGeometry$getCoord.call(newGeometry))||[]:coordinates=newGeometry.coordinates||[];return newSnapshot.geometry={type:newGeometry.type||(null===(_newGeometry$getType=newGeometry.getType)||void 0===_newGeometry$getType?void 0:_newGeometry$getType.call(newGeometry))||"Point",coordinates:Array.isArray(coordinates)?coordinates:[]},newSnapshot}).views(function(self){return{getCenterCoordinates:function getCenterCoordinates(_ref){var _feature$getGeometry,_feature$getGeometry$,feature=_ref.feature,olCenter=null==feature||null===(_feature$getGeometry=feature.getGeometry)||void 0===_feature$getGeometry||null===(_feature$getGeometry=_feature$getGeometry.call(feature))||void 0===_feature$getGeometry||null===(_feature$getGeometry$=_feature$getGeometry.getCoordinates)||void 0===_feature$getGeometry$?void 0:_feature$getGeometry$.call(_feature$getGeometry);return Array.isArray(olCenter)&&olCenter.length>=2?olCenter:self.geometry.coordinates},getDragHandleCoordinates:function getDragHandleCoordinates(_ref2){var feature=_ref2.feature,geoDrawingTask=_ref2.geoDrawingTask,radius=self.getUncertaintyRadius({feature,geoDrawingTask});if(null!=radius){var center=self.getCenterCoordinates({feature});if(Array.isArray(center)&&!(center.length<2))return[center[0]+radius,center[1]]}},getTool:function getTool(_ref3){var _feature$get,feature=_ref3.feature,geoDrawingTask=_ref3.geoDrawingTask,tools=null==geoDrawingTask?void 0:geoDrawingTask.tools;if(tools){var toolIndex=null==feature||null===(_feature$get=feature.get)||void 0===_feature$get?void 0:_feature$get.call(feature,"toolIndex");return("number"==typeof toolIndex?tools[toolIndex]:void 0)||tools.find(function(tool){return"Point"===tool.type})}},getStyles:function getStyles(_ref4){var feature=_ref4.feature,geoDrawingTask=_ref4.geoDrawingTask,resolution=_ref4.resolution,_ref4$isSelected=_ref4.isSelected,isSelected=void 0!==_ref4$isSelected&&_ref4$isSelected,tool=self.getTool({feature,geoDrawingTask}),color=(null==tool?void 0:tool.color)||"#007bff",pointRadius=isSelected?8:6,strokeWidth=isSelected?3:2,strokeColor=isSelected?"white":color,styles=[new Style.Ay({image:new Circle.A({radius:pointRadius,fill:new Fill.A({color}),stroke:new Stroke.A({color:strokeColor,width:strokeWidth})})})],uncertaintyRadiusPixels=self.getUncertaintyRadiusPixels({feature,geoDrawingTask,resolution});if(uncertaintyRadiusPixels&&(styles.push(new Style.Ay({image:new Circle.A({radius:uncertaintyRadiusPixels,stroke:new Stroke.A({color,width:2,lineDash:[5,10]})})})),isSelected)){var dragHandleCoordinates=self.getDragHandleCoordinates({feature,geoDrawingTask});dragHandleCoordinates&&styles.push(new Style.Ay({geometry:new Point.A(dragHandleCoordinates),image:new Circle.A({radius:6,fill:new Fill.A({color}),stroke:new Stroke.A({color:"white",width:2})})}))}return styles},getUncertaintyRadius:function getUncertaintyRadius(_ref5){var _feature$get2,_feature$get3,_self$properties,feature=_ref5.feature,geoDrawingTask=_ref5.geoDrawingTask,tool=self.getTool({feature,geoDrawingTask});return!0===(null==tool?void 0:tool.uncertainty_circle)?null!==(_feature$get2=null==feature||null===(_feature$get3=feature.get)||void 0===_feature$get3?void 0:_feature$get3.call(feature,"uncertainty_radius"))&&void 0!==_feature$get2?_feature$get2:null===(_self$properties=self.properties)||void 0===_self$properties?void 0:_self$properties.uncertainty_radius:null},getUncertaintyRadiusPixels:function getUncertaintyRadiusPixels(_ref6){var feature=_ref6.feature,geoDrawingTask=_ref6.geoDrawingTask,resolution=_ref6.resolution;if(resolution){var radiusCoords=self.getUncertaintyRadius({feature,geoDrawingTask});if(null!=radiusCoords)return radiusCoords/resolution}}}});const helpers_asMSTFeature=function asMSTFeature(feature){return feature?(0,mobx_state_tree_module.gk)(feature)?feature:function toMSTFeature(olFeature){var _olFeature$getGeometr,_geometry$getType,_olFeature$getPropert,geometry=null==olFeature||null===(_olFeature$getGeometr=olFeature.getGeometry)||void 0===_olFeature$getGeometr?void 0:_olFeature$getGeometr.call(olFeature),geometryType=null==geometry||null===(_geometry$getType=geometry.getType)||void 0===_geometry$getType?void 0:_geometry$getType.call(geometry),GeoFeatureModel=geometryType?models_namespaceObject[geometryType]:void 0;return null!=GeoFeatureModel&&GeoFeatureModel.create?GeoFeatureModel.create({geometry,properties:null===(_olFeature$getPropert=olFeature.getProperties)||void 0===_olFeature$getPropert?void 0:_olFeature$getPropert.call(olFeature)}):null}(feature):null};const helpers_getFeatureStyle=function getFeatureStyle(_ref){var feature=_ref.feature,geoDrawingTask=_ref.geoDrawingTask,_ref$isSelected=_ref.isSelected,isSelected=void 0!==_ref$isSelected&&_ref$isSelected,resolution=_ref.resolution,mstFeature=helpers_asMSTFeature(feature);return mstFeature?mstFeature.getStyles({feature,geoDrawingTask,isSelected,resolution}):null};var Pointer=__webpack_require__("../../node_modules/ol/interaction/Pointer.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}const helpers_createModifyUncertaintyInteraction=function createModifyUncertaintyInteraction(_ref){var geoDrawingTask=_ref.geoDrawingTask,selectInteraction=_ref.selectInteraction,translateInteraction=_ref.translateInteraction,_ref$dragHandleTolera=_ref.dragHandleTolerance,dragHandleTolerance=void 0===_ref$dragHandleTolera?15:_ref$dragHandleTolera,_ref$minRadius=_ref.minRadius,minRadius=void 0===_ref$minRadius?10:_ref$minRadius,state={draggedFeature:null,isDragging:!1},mstFeatureCache=new WeakMap;function getCachedMSTFeature(olFeature){return mstFeatureCache.has(olFeature)||mstFeatureCache.set(olFeature,helpers_asMSTFeature(olFeature)),mstFeatureCache.get(olFeature)}function distance(_ref2,_ref3){var _ref4=_slicedToArray(_ref2,2),x1=_ref4[0],y1=_ref4[1],_ref5=_slicedToArray(_ref3,2),dx=_ref5[0]-x1,dy=_ref5[1]-y1;return Math.sqrt(dx*dx+dy*dy)}function checkDragHandleClick(pixel,map){if(!selectInteraction)return null;var _step,_iterator=function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}(selectInteraction.getFeatures().getArray());try{for(_iterator.s();!(_step=_iterator.n()).done;){var _mstFeature$getUncert,_mstFeature$getDragHa,olFeature=_step.value,mstFeature=getCachedMSTFeature(olFeature);if(mstFeature)if(null!==(null===(_mstFeature$getUncert=mstFeature.getUncertaintyRadius)||void 0===_mstFeature$getUncert?void 0:_mstFeature$getUncert.call(mstFeature,{feature:olFeature,geoDrawingTask}))){var dragHandleCoordinates=null===(_mstFeature$getDragHa=mstFeature.getDragHandleCoordinates)||void 0===_mstFeature$getDragHa?void 0:_mstFeature$getDragHa.call(mstFeature,{feature:olFeature,geoDrawingTask});if(dragHandleCoordinates)if(distance(pixel,map.getPixelFromCoordinate(dragHandleCoordinates))<dragHandleTolerance)return olFeature}}}catch(err){_iterator.e(err)}finally{_iterator.f()}return null}return new Pointer.A({handleDownEvent:function handleDownEvent(event){var map=this.getMap();if(!map)return!1;var selectedFeature=checkDragHandleClick(event.pixel,map);if(selectedFeature){state.draggedFeature=selectedFeature,state.isDragging=!0,translateInteraction&&translateInteraction.setActive(!1);var viewport=map.getViewport();return viewport&&(viewport.style.cursor="ew-resize"),!0}return!1},handleDragEvent:function handleDragEvent(event){if(state.isDragging&&state.draggedFeature){var map=this.getMap();if(map){var coordinate=map.getCoordinateFromPixel(event.pixel),centerCoordinates=state.draggedFeature.getGeometry().getCoordinates(),newRadius=Math.max(minRadius,distance(centerCoordinates,coordinate));state.draggedFeature.set("uncertainty_radius",newRadius),state.draggedFeature.changed()}}},handleUpEvent:function handleUpEvent(event){if(state.isDragging){state.isDragging=!1,state.draggedFeature=null,translateInteraction&&translateInteraction.setActive(!0);var map=this.getMap(),viewport=null==map?void 0:map.getViewport();return viewport&&(viewport.style.cursor=""),!1}return!0},handleMoveEvent:function handleMoveEvent(event){var map=this.getMap();if(map&&!state.isDragging){var viewport=map.getViewport();if(viewport){var selectedFeature=checkDragHandleClick(event.pixel,map);viewport.style.cursor=selectedFeature?"ew-resize":""}}}})};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),MapContainer=styled_components_browser_esm.default.div.withConfig({displayName:"GeoMapViewer__MapContainer",componentId:"sc-ut4gi2-0"})(["height:100%;min-height:400px;width:100%;"]),ControlsBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"GeoMapViewer__ControlsBox",componentId:"sc-ut4gi2-1"})(["position:absolute;top:80px;left:10px;z-index:1;"]);function fitViewToFeatures(map,features){map.getView().fit(features.getExtent(),{padding:[32,32,32,32],maxZoom:12,duration:250})}function GeoMapViewer(_ref){var geoDrawingTask=_ref.geoDrawingTask,_ref$geoJSON=_ref.geoJSON,geoJSON=void 0===_ref$geoJSON?void 0:_ref$geoJSON,mapContainerRef=(0,react.useRef)(),mapRef=(0,react.useRef)(),featuresRef=(0,react.useRef)(),featuresLayerRef=(0,react.useRef)(),geoJSONFormatRef=(0,react.useRef)(),selectRef=(0,react.useRef)(),translateRef=(0,react.useRef)(),modifyUncertaintyRef=(0,react.useRef)(),pointerMoveHandlerRef=(0,react.useRef)(),geoJSONReadOptions={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"};return(0,react.useEffect)(function createMapOnce(){if(!mapRef.current&&mapContainerRef.current){var geoJSONFormat=new GeoJSON.A;geoJSONFormatRef.current=geoJSONFormat;var baseLayer=new Tile.A({preload:1,source:new OSM.A}),featuresSource=new source_Vector.A({features:[]});featuresRef.current=featuresSource;var featuresLayer=new Vector.A({source:featuresSource});featuresLayerRef.current=featuresLayer;var map=new Map.A({target:mapContainerRef.current,layers:[baseLayer,featuresLayer],view:new View.Ay({center:[0,0],zoom:0})}),hasGeoDrawingTask=geoDrawingTask&&geoDrawingTask.tools.length>0;if(hasGeoDrawingTask){var select=new Select.A({condition:condition.jM,layers:[featuresLayer],style:function style(feature){return handleFeatureStyle({feature,isSelected:!0})}});featuresLayer.setStyle(function(feature){return handleFeatureStyle({feature,isSelected:select.getFeatures().getArray().includes(feature)})});var translate=new Translate.A({features:select.getFeatures()});map.addInteraction(select),map.addInteraction(translate),selectRef.current=select,translateRef.current=translate;var modifyUncertainty=helpers_createModifyUncertaintyInteraction({geoDrawingTask,selectInteraction:select,translateInteraction:translate});map.addInteraction(modifyUncertainty),modifyUncertaintyRef.current=modifyUncertainty;var handlePointerMove=function handlePointerMove(event){var hit=map.hasFeatureAtPixel(event.pixel,{layerFilter:function layerFilter(layer){return layer===featuresLayer}}),element=map.getTargetElement();element&&(element.style.cursor=hit?"pointer":"")};map.on("pointermove",handlePointerMove),pointerMoveHandlerRef.current=handlePointerMove}else featuresLayer.setStyle(function(feature){return handleFeatureStyle({feature,isSelected:!1})});return mapRef.current=map,function(){selectRef.current&&map.removeInteraction(selectRef.current),translateRef.current&&map.removeInteraction(translateRef.current),modifyUncertaintyRef.current&&map.removeInteraction(modifyUncertaintyRef.current),pointerMoveHandlerRef.current&&map.un("pointermove",pointerMoveHandlerRef.current),map.setTarget(void 0),mapRef.current=void 0,featuresRef.current=void 0,featuresLayerRef.current=void 0,geoJSONFormatRef.current=void 0,selectRef.current=void 0,translateRef.current=void 0,modifyUncertaintyRef.current=void 0,pointerMoveHandlerRef.current=void 0}}function handleFeatureStyle(_ref2){var feature=_ref2.feature,_ref2$isSelected=_ref2.isSelected;return helpers_getFeatureStyle({feature,geoDrawingTask:hasGeoDrawingTask?geoDrawingTask:null,isSelected:void 0!==_ref2$isSelected&&_ref2$isSelected,resolution:map.getView().getResolution()})}},[]),(0,react.useEffect)(function updateFeatures(){var map=mapRef.current,features=featuresRef.current;if(map&&features){var geoJSONFormat=geoJSONFormatRef.current||new GeoJSON.A;if(geoJSONFormatRef.current=geoJSONFormat,features.clear(),geoJSON){var newFeatures=geoJSONFormat.readFeatures(geoJSON,geoJSONReadOptions);features.addFeatures(newFeatures),features.getFeatures().length&&fitViewToFeatures(map,features)}}},[geoJSON]),(0,jsx_runtime.jsxs)(Box.a,{as:"section",fill:!0,children:[(0,jsx_runtime.jsx)(MapContainer,{ref:mapContainerRef,className:"map-container","data-testid":"geo-map-container"}),geoJSON&&(0,jsx_runtime.jsxs)(ControlsBox,{children:[(0,jsx_runtime.jsx)(RecenterButton.A,{onClick:function handleRecenter(){var map=mapRef.current,features=featuresRef.current;map&&features&&features.getFeatures().length>0&&fitViewToFeatures(map,features)}}),(0,jsx_runtime.jsx)(ResetButton.A,{onClick:function handleReset(){var map=mapRef.current,features=featuresRef.current;if(map&&features&&geoJSON){var geoJSONFormat=geoJSONFormatRef.current||new GeoJSON.A;geoJSONFormatRef.current=geoJSONFormat,features.clear();var newFeatures=geoJSONFormat.readFeatures(geoJSON,geoJSONReadOptions);features.addFeatures(newFeatures),features.getFeatures().length&&fitViewToFeatures(map,features)}}})]})]})}GeoMapViewer.propTypes={geoDrawingTask:(0,prop_types.shape)({tools:(0,prop_types.arrayOf)((0,prop_types.shape)({type:prop_types.string.isRequired,label:prop_types.string,color:prop_types.string})),type:prop_types.string.isRequired}),geoJSON:(0,prop_types.shape)({})};const GeoMapViewer_GeoMapViewer=GeoMapViewer;GeoMapViewer.__docgenInfo={description:"",methods:[],displayName:"GeoMapViewer",props:{geoJSON:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"shape",value:{}},required:!1},geoDrawingTask:{description:"",type:{name:"shape",value:{tools:{name:"arrayOf",value:{name:"shape",value:{type:{name:"string",required:!0},label:{name:"string",required:!1},color:{name:"string",required:!1}}},required:!1},type:{name:"string",required:!0}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/components/ControlButton/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>ControlButton_ControlButton});var Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var _excluded=["a11yTitle","icon","onClick","title"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledControlButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ControlButton__StyledControlButton",componentId:"sc-umnj2x-0"})(["margin:1px;padding:0;height:24.75px;width:24.75px;background-color:white;border:1px solid transparent;border-radius:2px;text-align:center;&:hover{border-color:black;}"]);function ControlButton(_ref){var a11yTitle=_ref.a11yTitle,icon=_ref.icon,onClick=_ref.onClick,title=_ref.title,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return(0,jsx_runtime.jsx)(StyledControlButton,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({a11yTitle,icon,onClick,title},rest))}ControlButton.propTypes={a11yTitle:prop_types.string.isRequired,icon:prop_types.node.isRequired,onClick:prop_types.func.isRequired,title:prop_types.string.isRequired};const ControlButton_ControlButton=ControlButton;ControlButton.__docgenInfo={description:"",methods:[],displayName:"ControlButton",props:{a11yTitle:{description:"",type:{name:"string"},required:!0},icon:{description:"",type:{name:"node"},required:!0},onClick:{description:"",type:{name:"func"},required:!0},title:{description:"",type:{name:"string"},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/components/RecenterButton/RecenterButton.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Location.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/translations/i18n.jsx"),_ControlButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/components/ControlButton/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function RecenterButton(_ref){var onClick=_ref.onClick,label=(0,(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_2__.Bd)("components").t)("SubjectViewer.GeoMapViewer.RecenterButton.ariaLabel");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ControlButton__WEBPACK_IMPORTED_MODULE_3__.A,{a11yTitle:label,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_0__.a,{color:"dark-5",size:"small"}),onClick,title:label})}RecenterButton.propTypes={onClick:prop_types__WEBPACK_IMPORTED_MODULE_1__.func.isRequired};const __WEBPACK_DEFAULT_EXPORT__=RecenterButton;RecenterButton.__docgenInfo={description:"",methods:[],displayName:"RecenterButton",props:{onClick:{description:"",type:{name:"func"},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/components/ResetButton/ResetButton.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet_icons__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Revert.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/translations/i18n.jsx"),_ControlButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/components/ControlButton/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ResetButton(_ref){var onClick=_ref.onClick,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_2__.Bd)("components").t,label=t("SubjectViewer.GeoMapViewer.ResetButton.ariaLabel");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_ControlButton__WEBPACK_IMPORTED_MODULE_3__.A,{a11yTitle:label,icon:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_0__.z,{color:"dark-5",size:"small"}),onClick:function handleClick(){var confirmMessage=t("SubjectViewer.GeoMapViewer.ResetButton.confirm");window.confirm(confirmMessage)&&onClick()},title:label})}ResetButton.propTypes={onClick:prop_types__WEBPACK_IMPORTED_MODULE_1__.func.isRequired};const __WEBPACK_DEFAULT_EXPORT__=ResetButton;ResetButton.__docgenInfo={description:"",methods:[],displayName:"ResetButton",props:{onClick:{description:"",type:{name:"func"},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/ImageAndTextViewer/ImageAndTextViewerConnector.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>ImageAndTextViewerConnector});var helpers=__webpack_require__("./src/helpers/index.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),ThemeContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),FormPrevious=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormPrevious.js"),DocumentText=__webpack_require__("../../node_modules/grommet-icons/es6/icons/DocumentText.js"),FormNext=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormNext.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx");const theme={global:{colors:{icon:{dark:"white",light:"black"},text:{dark:"white",light:"black"}},hover:{background:"accent-1"}},select:{icons:{margin:"0"},options:{text:{size:"small"}}}};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DirectionButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__DirectionButton",componentId:"sc-1vj916i-0"})(["border:none;padding:0;& > div{flex-direction:column;}"]),ThumbnailButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__ThumbnailButton",componentId:"sc-1vj916i-1"})(["display:flex;"," "," padding:0;border:none;background-size:cover;background-repeat:no-repeat;background-position:center;"," &[aria-selected=true]{border:solid 2px ",";}"],function(props){return(0,styled_components_browser_esm.css)(["height:",";"],props.thumbnailDimension)},function(props){return(0,styled_components_browser_esm.css)(["width:",";"],props.thumbnailDimension)},function(props){return(0,styled_components_browser_esm.css)(["background-image:url(",");"],props.thumbnailerUrl)},function(props){return props.theme.global.colors["neutral-2"]}),TextButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__TextButton",componentId:"sc-1vj916i-2"})(["align-items:center;border:solid 1px ",";display:flex;justify-content:center;padding:0;"," "," &:hover{box-shadow:0px 0px 0px 2px ",";}&[aria-selected=true]{border:solid 2px ",";}"],function(props){return props.theme.global.colors["light-3"]},function(props){return(0,styled_components_browser_esm.css)(["height:",";"],props.thumbnailDimension)},function(props){return(0,styled_components_browser_esm.css)(["width:",";"],props.thumbnailDimension)},function(props){return props.theme.global.colors.brand},function(props){return props.theme.global.colors["neutral-2"]}),backgrounds={dark:"dark-3",light:"neutral-6"},ImageAndTextControls=function ImageAndTextControls(_ref){var _ref$currentFrame=_ref.currentFrame,currentFrame=void 0===_ref$currentFrame?0:_ref$currentFrame,_ref$locations=_ref.locations,locations=void 0===_ref$locations?[]:_ref$locations,_ref$onFrameChange=_ref.onFrameChange,onFrameChange=void 0===_ref$onFrameChange?function(){return!0}:_ref$onFrameChange,t=(0,i18n.Bd)("components").t,_useState2=_slicedToArray((0,react.useState)(!1),2),smallScreenStyle=_useState2[0],setSmallScreenStyle=_useState2[1],controlsContainer=(0,react.useRef)(null),resizeObserver=(0,react.useRef)(null);(0,react.useEffect)(function(){return resizeObserver.current=new window.ResizeObserver(function(entries){entries[0].contentRect.width<500?setSmallScreenStyle(!0):setSmallScreenStyle(!1)}),controlsContainer.current&&resizeObserver.current.observe(controlsContainer.current),function(){controlsContainer.current&&resizeObserver.current.unobserve(controlsContainer.current)}},[]);var handleKeyDown=function handleKeyDown(event){var index=currentFrame;switch(event.key){case"ArrowRight":event.preventDefault(),event.stopPropagation(),handleNext(),index<locations.length-1?document.getElementById("thumbnail-".concat(index+1)).focus():document.getElementById("thumbnail-".concat(0)).focus();break;case"ArrowLeft":event.preventDefault(),event.stopPropagation(),handlePrevious(),index>0?document.getElementById("thumbnail-".concat(index-1)).focus():document.getElementById("thumbnail-".concat(locations.length-1)).focus();break;default:return!0}},handlePrevious=function handlePrevious(){onFrameChange(currentFrame>0?currentFrame-1:locations.length-1)},handleNext=function handleNext(){currentFrame<locations.length-1?onFrameChange(currentFrame+1):onFrameChange(0)},handleThumbnailClick=function handleThumbnailClick(index){onFrameChange(index)};return(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:theme,children:(0,jsx_runtime.jsx)(Box.a,{background:backgrounds,ref:controlsContainer,children:(0,jsx_runtime.jsx)(Box.a,{fill:!0,pad:smallScreenStyle?{horizontal:"10px",vertical:"5px"}:{horizontal:"20px",vertical:"10px"},gap:smallScreenStyle?"xsmall":"small",children:(0,jsx_runtime.jsxs)(Box.a,{direction:"row",justify:"center",gap:smallScreenStyle?"xsmall":"small",children:[(0,jsx_runtime.jsx)(DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormPrevious.Q,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"),onClick:handlePrevious}),(0,jsx_runtime.jsx)(Box.a,{"aria-label":"Image thumbnail and text icon",direction:"row",gap:"5px",role:"tablist",align:"center",children:(null==locations?void 0:locations.length)&&locations.map(function(_ref2,index){var mimeType=_ref2.mimeType,url=_ref2.url,activeFrame=currentFrame===index,tabIndex=activeFrame?0:-1;if("text/plain"!==mimeType){var thumbnailerUrl="https://thumbnails.zooniverse.org/100x100".concat(url.slice(7,url.length));return(0,jsx_runtime.jsx)(ThumbnailButton,{id:"thumbnail-".concat(index),"aria-controls":"image-and-text-tab-panel","aria-label":t("SubjectViewer.MultiFrameViewer.FrameCarousel.thumbnailAltText"),"aria-selected":activeFrame?"true":"false",onClick:function onClick(){return handleThumbnailClick(index)},onKeyDown:handleKeyDown,role:"tab",tabIndex,thumbnailDimension:smallScreenStyle?"30px":"40px",thumbnailerUrl},"".concat(url,"-").concat(index))}return(0,jsx_runtime.jsx)(TextButton,{id:"thumbnail-".concat(index),"aria-controls":"image-and-text-tab-panel","aria-label":t("SubjectViewer.ImageAndTextViewer.textIconAltText"),"aria-selected":activeFrame?"true":"false",icon:(0,jsx_runtime.jsx)(DocumentText.T,{}),onClick:function onClick(){return handleThumbnailClick(index)},onKeyDown:handleKeyDown,role:"tab",tabIndex,thumbnailDimension:smallScreenStyle?"30px":"40px"},"".concat(url,"-").concat(index))})}),(0,jsx_runtime.jsx)(DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormNext.O,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"),onClick:handleNext})]})})})})};ImageAndTextControls.propTypes={currentFrame:prop_types_default().number,locations:prop_types_default().arrayOf(locationValidator.A).isRequired,onFrameChange:prop_types_default().func};const components_ImageAndTextControls=(0,styled_components_browser_esm.withTheme)(ImageAndTextControls);ImageAndTextControls.__docgenInfo={description:"",methods:[],displayName:"ImageAndTextControls",props:{currentFrame:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},locations:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"}},required:!1},onFrameChange:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1}}};var SingleImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"),SingleTextViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/index.js"),DEFAULT_DIMENSIONS=[{clientHeight:400}],DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function ImageAndTextViewerContainer(_ref){var _ref$dimensions=_ref.dimensions,dimensions=void 0===_ref$dimensions?DEFAULT_DIMENSIONS:_ref$dimensions,_ref$frame=_ref.frame,frame=void 0===_ref$frame?0:_ref$frame,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,_ref$setFrame=_ref.setFrame,setFrame=void 0===_ref$setFrame?DEFAULT_HANDLER:_ref$setFrame,subject=_ref.subject;if(loadingState===async_states_default().error)return(0,jsx_runtime.jsx)("div",{children:"Something went wrong."});var _dimensions$,_dimensions$2,type=subject.locations[frame].type;return loadingState!==async_states_default().initialized?(0,jsx_runtime.jsxs)(Box.a,{fill:"horizontal",children:["text"===type?(0,jsx_runtime.jsx)(SingleTextViewer.Ay,{frame,height:null!==(_dimensions$=dimensions[0])&&void 0!==_dimensions$&&_dimensions$.clientHeight?"".concat(null===(_dimensions$2=dimensions[0])||void 0===_dimensions$2?void 0:_dimensions$2.clientHeight,"px"):"",onError,onReady}):(0,jsx_runtime.jsx)(SingleImageViewer.Ay,{enableInteractionLayer:!1,loadingState,onError,onReady}),(0,jsx_runtime.jsx)(components_ImageAndTextControls,{currentFrame:frame,locations:subject.locations,onFrameChange:function handleFrameChange(newFrame){setFrame(newFrame)}})]}):null}ImageAndTextViewerContainer.propTypes={dimensions:prop_types_default().arrayOf(prop_types_default().shape({clientHeight:prop_types_default().number})),frame:prop_types_default().number,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,setFrame:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator.A)})};const ImageAndTextViewer_ImageAndTextViewerContainer=ImageAndTextViewerContainer;ImageAndTextViewerContainer.__docgenInfo={description:"",methods:[],displayName:"ImageAndTextViewerContainer",props:{dimensions:{defaultValue:{value:"[{\n  clientHeight: 400\n}]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"shape",value:{clientHeight:{name:"number",required:!1}}}},required:!1},frame:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setFrame:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1}}};const ImageAndTextViewerConnector=(0,helpers.Lg)(ImageAndTextViewer_ImageAndTextViewerContainer,function storeMapper(store){var subject=store.subjects.active,_store$subjectViewer=store.subjectViewer;return{dimensions:_store$subjectViewer.dimensions,frame:_store$subjectViewer.frame,loadingState:_store$subjectViewer.loadingState,setFrame:_store$subjectViewer.setFrame,subject}})},"./src/components/Classifier/components/SubjectViewer/components/JSONDataViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>_JSONDataViewer__WEBPACK_IMPORTED_MODULE_0__.A});var _JSONDataViewer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/JSONDataViewer/JSONDataViewer.jsx")},"./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/MultiFrameViewerContainer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>MultiFrameViewer_MultiFrameViewerContainer});var async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),helpers=__webpack_require__("./src/helpers/index.js"),locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),SingleImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),FormUp=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormUp.js"),FormDown=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormDown.js"),More=__webpack_require__("../../node_modules/grommet-icons/es6/icons/More.js"),polished_esm=__webpack_require__("../../node_modules/polished/dist/polished.esm.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}function _callSuper(t,o,e){return o=_getPrototypeOf(o),function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}var StyledControlButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FrameCarousel__StyledControlButton",componentId:"sc-eb3aut-0"})(["",""],function(props){return props.theme&&(0,styled_components_browser_esm.css)(["color:",";background:",";&:focus:not(:disabled),&:hover:not(:disabled){background:",";box-shadow:none;}"],props.theme.global.colors["neutral-6"],props.theme.global.colors.brand,(0,polished_esm.uq)(.5,props.theme.global.colors.brand))});function PreviousLabel(){var t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsxs)(Box.a,{as:"span",align:"center",direction:"column",children:[(0,jsx_runtime.jsx)(FormUp.I,{color:"neutral-6"}),t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel")]})}function NextLabel(){var t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsxs)(Box.a,{as:"span",align:"center",direction:"column",children:[t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"),(0,jsx_runtime.jsx)(FormDown.t,{color:"neutral-6"})]})}var StyledMedia=(0,styled_components_browser_esm.default)(Media.A).withConfig({displayName:"FrameCarousel__StyledMedia",componentId:"sc-eb3aut-1"})(["height:40px;width:40px;img{aspect-ratio:1 / 1;}"]),StyledLabel=styled_components_browser_esm.default.label.withConfig({displayName:"FrameCarousel__StyledLabel",componentId:"sc-eb3aut-2"})([""," input{opacity:0.01;position:absolute;height:0;width:0;}:hover{cursor:pointer;}"],function(props){return props.theme&&(0,styled_components_browser_esm.css)(["input:checked + ","{border:solid ",";}input:focus + ","{outline:2px solid ",";}input:hover + ","{outline:2px solid ",";}"],StyledMedia,props.theme.global.colors["neutral-2"],StyledMedia,(0,polished_esm.uq)(.5,props.theme.global.colors.brand),StyledMedia,(0,polished_esm.uq)(.5,props.theme.global.colors.brand))}),StyledFrameList=styled_components_browser_esm.default.ul.withConfig({displayName:"FrameCarousel__StyledFrameList",componentId:"sc-eb3aut-3"})(["align-items:center;display:flex;flex-direction:column;flex:1 1 auto;list-style-type:none;margin:0;overflow:auto;padding:0;position:relative;scroll-behavior:smooth;li{height:40px;margin:5px 0;width:40px;&:first-child{margin-top:14px;}&:last-child{margin-bottom:14px;}}"]),FrameCarousel=function(_Component){function FrameCarousel(props){var _this;return function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}(this,FrameCarousel),(_this=_callSuper(this,FrameCarousel,[props])).theme=props.theme||{global:{colors:{}}},_this.handleScroll=_this.handleScroll.bind(_this),_this.handlePrevious=_this.handlePrevious.bind(_this),_this.handleNext=_this.handleNext.bind(_this),_this.activeLabel=(0,react.createRef)(),_this.frameList=(0,react.createRef)(),_this}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(FrameCarousel,_Component),function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(FrameCarousel,[{key:"componentDidMount",value:function componentDidMount(){this.handleScroll()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var frame=this.props.frame;prevProps.frame!==frame&&this.handleScroll()}},{key:"handleScroll",value:function handleScroll(){var _this$activeLabel$cur,_this$frameList$curre,_this$activeLabel$cur2,_this$frameList$curre2,_this$frameList$curre3,labelIsAboveContainerTop=(null===(_this$activeLabel$cur=this.activeLabel.current)||void 0===_this$activeLabel$cur?void 0:_this$activeLabel$cur.offsetTop)<=(null===(_this$frameList$curre=this.frameList.current)||void 0===_this$frameList$curre?void 0:_this$frameList$curre.scrollTop),labelIsBelowContainerBottom=(null===(_this$activeLabel$cur2=this.activeLabel.current)||void 0===_this$activeLabel$cur2?void 0:_this$activeLabel$cur2.offsetTop)>=(null===(_this$frameList$curre2=this.frameList.current)||void 0===_this$frameList$curre2?void 0:_this$frameList$curre2.scrollTop)+(null===(_this$frameList$curre3=this.frameList.current)||void 0===_this$frameList$curre3?void 0:_this$frameList$curre3.clientHeight);if(labelIsAboveContainerTop||labelIsBelowContainerBottom){var newContainerTopPosition=this.activeLabel.current.offsetTop-this.activeLabel.current.offsetHeight;this.frameList.current.scrollTop=newContainerTopPosition}}},{key:"handleFrameChange",value:function handleFrameChange(frameIndex){(0,this.props.onFrameChange)(frameIndex)}},{key:"handlePrevious",value:function handlePrevious(){var frame=this.props.frame;frame>0&&this.handleFrameChange(frame-1)}},{key:"handleNext",value:function handleNext(){var _this$props=this.props,frame=_this$props.frame;frame<_this$props.locations.length&&this.handleFrameChange(frame+1)}},{key:"render",value:function render(){var _this2=this,_this$props2=this.props,frame=_this$props2.frame,locations=_this$props2.locations,t=_this$props2.t,locationElements=locations.map(function(location,index){location.mimeType;var url=location.url,activeFrame=frame===index;return(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsxs)(StyledLabel,{ref:activeFrame?_this2.activeLabel:null,children:[(0,jsx_runtime.jsx)("input",{checked:activeFrame,name:"frame",onChange:function onChange(){return _this2.handleFrameChange(index)},type:"radio"}),(0,jsx_runtime.jsx)(StyledMedia,{alt:t("SubjectViewer.MultiFrameViewer.FrameCarousel.thumbnailAltText"),background:"accent-1",fit:"cover",height:40,placeholder:(0,jsx_runtime.jsx)(More.K,{color:"neutral-6",size:"medium"}),src:url,width:40})]})},"".concat(url,"-").concat(index))});return(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-3",light:"neutral-6"},direction:"column",height:{max:"450px"},width:"4em",children:[(0,jsx_runtime.jsx)(StyledControlButton,{disabled:0===frame,fill:"horizontal",label:(0,jsx_runtime.jsx)(PreviousLabel,{}),onClick:function onClick(){return _this2.handlePrevious()}}),(0,jsx_runtime.jsx)(StyledFrameList,{ref:this.frameList,children:locationElements}),(0,jsx_runtime.jsx)(StyledControlButton,{align:"center",disabled:frame===locations.length-1,fill:"horizontal",label:(0,jsx_runtime.jsx)(NextLabel,{}),onClick:function onClick(){return _this2.handleNext()}})]})}}])}(react.Component);FrameCarousel.propTypes={frame:prop_types_default().number.isRequired,locations:prop_types_default().arrayOf(locationValidator.A).isRequired,onFrameChange:prop_types_default().func.isRequired,theme:prop_types_default().object};var ThemedFrameCarousel=(0,styled_components_browser_esm.withTheme)(FrameCarousel);const MultiFrameViewer_FrameCarousel=(0,i18n.CI)("components")(ThemedFrameCarousel);function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}PreviousLabel.__docgenInfo={description:"",methods:[],displayName:"PreviousLabel"},NextLabel.__docgenInfo={description:"",methods:[],displayName:"NextLabel"},FrameCarousel.__docgenInfo={description:"",methods:[{name:"handleScroll",docblock:null,modifiers:[],params:[],returns:null},{name:"handleFrameChange",docblock:null,modifiers:[],params:[{name:"frameIndex",optional:!1,type:null}],returns:null},{name:"handlePrevious",docblock:null,modifiers:[],params:[],returns:null},{name:"handleNext",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FrameCarousel",props:{frame:{description:"",type:{name:"number"},required:!0},locations:{description:"",type:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"}},required:!0},onFrameChange:{description:"",type:{name:"func"},required:!0},theme:{description:"",type:{name:"object"},required:!1}}};var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},DEFAULT_TOOL={validate:function validate(){}};function MultiFrameViewerContainer(_ref2){var _ref2$activeTool=_ref2.activeTool,activeTool=void 0===_ref2$activeTool?DEFAULT_TOOL:_ref2$activeTool,_ref2$enableInteracti=_ref2.enableInteractionLayer,enableInteractionLayer=void 0!==_ref2$enableInteracti&&_ref2$enableInteracti,_ref2$frame=_ref2.frame,frame=void 0===_ref2$frame?0:_ref2$frame,_ref2$loadingState=_ref2.loadingState,loadingState=void 0===_ref2$loadingState?async_states_default().initialized:_ref2$loadingState,_ref2$onError=_ref2.onError,onError=void 0===_ref2$onError?DEFAULT_HANDLER:_ref2$onError,_ref2$onReady=_ref2.onReady,onReady=void 0===_ref2$onReady?DEFAULT_HANDLER:_ref2$onReady,_ref2$resetView=_ref2.resetView,resetView=void 0===_ref2$resetView?DEFAULT_HANDLER:_ref2$resetView,_ref2$setFrame=_ref2.setFrame,setFrame=void 0===_ref2$setFrame?DEFAULT_HANDLER:_ref2$setFrame,subject=_ref2.subject;return(0,react.useEffect)(function onFrameChange(){null==activeTool||activeTool.validate(),resetView()},[frame]),loadingState===async_states_default().error?(0,jsx_runtime.jsx)("div",{children:"Something went wrong."}):loadingState!==async_states_default().initialized?(0,jsx_runtime.jsxs)(Box.a,{direction:"row",fill:"horizontal",children:[(0,jsx_runtime.jsx)(MultiFrameViewer_FrameCarousel,{frame,onFrameChange:setFrame,locations:subject.locations}),(0,jsx_runtime.jsx)(SingleImageViewer.Ay,{enableInteractionLayer,loadingState,onError,onReady})]}):null}MultiFrameViewerContainer.propTypes={activeTool:prop_types_default().shape({validate:prop_types_default().func}),enableInteractionLayer:prop_types_default().bool,frame:prop_types_default().number,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,resetView:prop_types_default().func,setFrame:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator.A)}).isRequired};const MultiFrameViewer_MultiFrameViewerContainer=(0,helpers.Lg)(MultiFrameViewerContainer,function storeMapper(store){var _store$subjectViewer=store.subjectViewer,frame=_store$subjectViewer.frame,resetView=_store$subjectViewer.resetView,setFrame=_store$subjectViewer.setFrame;return{activeTool:(_slicedToArray(store.workflowSteps.activeStepTasks.filter(function(task){return"drawing"===task.type||"transcription"===task.type}),1)[0]||{}).activeTool,frame,resetView,setFrame}});MultiFrameViewerContainer.__docgenInfo={description:"",methods:[],displayName:"MultiFrameViewerContainer",props:{activeTool:{defaultValue:{value:"{\n  validate: () => {}\n}",computed:!1},description:"",type:{name:"shape",value:{validate:{name:"func",required:!1}}},required:!1},enableInteractionLayer:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},frame:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},resetView:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setFrame:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>_MultiFrameViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A});var _MultiFrameViewerContainer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/MultiFrameViewerContainer.jsx")},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledPre=styled_components__WEBPACK_IMPORTED_MODULE_2__.default.pre.withConfig({displayName:"SingleTextViewer__StyledPre",componentId:"sc-igtbcc-0"})(["white-space:pre-wrap;color:",";font-family:'Anonymous Pro',monospace;@font-face{font-family:'Anonymous Pro';font-style:normal;font-weight:400;src:local('Anonymous Pro'),local('Anonymous Pro-Regular'),url(https://fonts.gstatic.com/s/anonymouspro/v21/rP2Bp2a15UIB7Un-bOeISG3pHls29QP-4Ks.woff2)  format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}"],function(props){return props.theme.dark?"inherit":"black"});function SingleTextViewer(_ref){var _ref$content=_ref.content,content=void 0===_ref$content?[""]:_ref$content,_ref$height=_ref.height,height=void 0===_ref$height?"":_ref$height,_ref$subjectId=_ref.subjectId,subjectId=void 0===_ref$subjectId?"":_ref$subjectId,theme=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.useTheme)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{a11yTitle:"Subject ".concat(subjectId," text"),as:"section",flex:"grow",height:{min:height},pad:"xsmall",tabIndex:"0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(StyledPre,{theme,children:content})})}SingleTextViewer.propTypes={content:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prop_types__WEBPACK_IMPORTED_MODULE_1___default().node])),height:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,subjectId:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string};const __WEBPACK_DEFAULT_EXPORT__=SingleTextViewer;SingleTextViewer.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewer",props:{content:{defaultValue:{value:"['']",computed:!1},description:"Array defined by a subject's text mime type location, including labeled text nodes with highlighter task annotations",type:{name:"arrayOf",value:{name:"union",value:[{name:"string"},{name:"node"}]}},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"Minimum height of the text viewer in CSS units eg. '400px', '0.25vh', '20rem' etc.",type:{name:"string"},required:!1},subjectId:{defaultValue:{value:"''",computed:!1},description:"Subject ID",type:{name:"string"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerConnector.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/index.js"),_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx");const __WEBPACK_DEFAULT_EXPORT__=(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.Lg)(_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__.A,function storeMapper(store){var subject=store.subjects.active,loadingState=store.subjectViewer.loadingState;return{latest:null==subject?void 0:subject.stepHistory.latest,loadingState,subject}})},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>SingleTextViewer_SingleTextViewerContainer});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),hooks=__webpack_require__("./src/hooks/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledMark=styled_components_browser_esm.default.mark.withConfig({displayName:"Selection__StyledMark",componentId:"sc-19qu8jh-0"})(["background-color:",";border-radius:8px;color:black;margin-right:.2em;padding:.1em .3em;"],function(props){return props.color}),StyledDeleteButton=styled_components_browser_esm.default.button.withConfig({displayName:"Selection__StyledDeleteButton",componentId:"sc-19qu8jh-1"})(["border:none;background:transparent;font-size:1.2em;padding:0;&:hover{cursor:pointer;}"]);function DEFAULT_HANDLER(){return!0}function Selection(_ref){var color=_ref.color,_ref$handleDelete=_ref.handleDelete,handleDelete=void 0===_ref$handleDelete?DEFAULT_HANDLER:_ref$handleDelete,label=_ref.label,text=_ref.text,t=(0,i18n.Bd)("plugins").t;return(0,jsx_runtime.jsxs)(StyledMark,{"aria-label":"".concat(label,": ").concat(text),"data-selection":text,color,onKeyDown:function onKeyDown(event){"Delete"!==event.key&&"Backspace"!==event.key||handleDelete()},tabIndex:"0",children:[text," ",(0,jsx_runtime.jsx)(StyledDeleteButton,{"aria-label":t("HighlighterTask.delete"),onClick:handleDelete,title:t("HighlighterTask.delete"),children:""})]})}Selection.propTypes={color:prop_types_default().string.isRequired,handleDelete:prop_types_default().func,label:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired};const components_Selection=Selection;Selection.__docgenInfo={description:"",methods:[],displayName:"Selection",props:{handleDelete:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},color:{description:"",type:{name:"string"},required:!0},label:{description:"",type:{name:"string"},required:!0},text:{description:"",type:{name:"string"},required:!0}}};var locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),SingleTextViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var defaultSubject={id:"",locations:[]};function SingleTextViewerContainer_DEFAULT_HANDLER(){return!0}function SingleTextViewerContainer(_ref){var highlighterAnnotation,content,_latest$annotations,_ref$frame=_ref.frame,frame=void 0===_ref$frame?0:_ref$frame,_ref$height=_ref.height,height=void 0===_ref$height?"":_ref$height,latest=_ref.latest,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?SingleTextViewerContainer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?SingleTextViewerContainer_DEFAULT_HANDLER:_ref$onReady,_ref$subject=_ref.subject,subject=void 0===_ref$subject?defaultSubject:_ref$subject,_useSubjectText=(0,hooks.XW)({frame,subject,onReady,onError}),data=_useSubjectText.data,error=_useSubjectText.error;_useSubjectText.loading;latest&&(highlighterAnnotation=_slicedToArray(null==latest||null===(_latest$annotations=latest.annotations)||void 0===_latest$annotations?void 0:_latest$annotations.filter(function(annotation){return"highlighter"===annotation.taskType}),1)[0]);return loadingState===async_states_default().error?(0,jsx_runtime.jsxs)("p",{children:["Something went wrong. ",null==error?void 0:error.message]}):loadingState!==async_states_default().initialized?(content=highlighterAnnotation&&highlighterAnnotation.value.length>0?function labeledContent(data,annotation){var newContent=[],lastFocusIndex=0,dataIndex=0,deleteHighlight=annotation.deleteHighlight,value=annotation.value;for(dataIndex=0;dataIndex<data.length;dataIndex++){var _step,_iterator=_createForOfIteratorHelper(value);try{var _loop=function _loop(){var highlight=_step.value;if(highlight.start===dataIndex){var preContent=data.slice(lastFocusIndex,dataIndex);newContent.push(preContent);var newLabel=(0,jsx_runtime.jsx)(components_Selection,{color:highlight.labelInformation.color,handleDelete:function handleDelete(){return deleteHighlight(value.indexOf(highlight))},label:highlight.labelInformation.label,text:highlight.text},"".concat(highlight.start,"-").concat(highlight.end));newContent.push(newLabel),lastFocusIndex=highlight.end+1}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}var endContent=data.slice(lastFocusIndex,dataIndex);return newContent.push(endContent),newContent}(data,highlighterAnnotation):[data],(0,jsx_runtime.jsx)(SingleTextViewer.A,{content,height,subjectId:subject.id})):null}SingleTextViewerContainer.propTypes={height:prop_types_default().string,latest:prop_types_default().shape({annotations:prop_types_default().array}),loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator.A)})};const SingleTextViewer_SingleTextViewerContainer=(0,mobxreact_esm.PA)(SingleTextViewerContainer);SingleTextViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewerContainer",props:{frame:{defaultValue:{value:"0",computed:!1},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"{\n  id: '',\n  locations: []\n}",computed:!1},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1},latest:{description:"",type:{name:"shape",value:{annotations:{name:"array",required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Ay:()=>_SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_0__.A});var _SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerConnector.jsx");__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx"),__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx")},"./src/components/Classifier/components/SubjectViewer/components/SingleVideoViewer/SingleVideoViewerContainer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>SingleVideoViewer_SingleVideoViewerContainer});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),hooks=__webpack_require__("./src/hooks/index.js"),locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),react=__webpack_require__("../../node_modules/react/index.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),lib=__webpack_require__("../../node_modules/react-player/lib/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),SubjectContainer=styled_components_browser_esm.default.div.withConfig({displayName:"VideoViewer__SubjectContainer",componentId:"sc-1aqsme0-0"})(["position:relative;video{filter:invert(",");","}"],function(props){return props.$invert?1:0},function(props){return props.$limitSubjectHeight&&(0,styled_components_browser_esm.css)(["display:flex;width:auto;max-height:90vh;max-width:100%;margin-left:auto;"])});function VideoViewer(_ref){var _ref$invert=_ref.invert,invert=void 0!==_ref$invert&&_ref$invert,_ref$limitSubjectHeig=_ref.limitSubjectHeight,limitSubjectHeight=void 0!==_ref$limitSubjectHeig&&_ref$limitSubjectHeig,_ref$onError=_ref.onError,onError=void 0===_ref$onError?function(){return!0}:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?function(){return!0}:_ref$onReady,subject=_ref.subject,t=(0,i18n.Bd)("components").t,playerRef=(0,react.useRef)(null),videoLocation=subject?subject.locations.find(function(l){return"video"===l.type}):null,onReactPlayerReady=function onReactPlayerReady(){try{var _playerRef$current,_playerRef$current2,_playerRef$current3,_playerRef$current4,reactPlayerVideoHeight=null===(_playerRef$current=playerRef.current)||void 0===_playerRef$current?void 0:_playerRef$current.getInternalPlayer().videoHeight,reactPlayerVideoWidth=null===(_playerRef$current2=playerRef.current)||void 0===_playerRef$current2?void 0:_playerRef$current2.getInternalPlayer().videoWidth,reactPlayerClientHeight=null===(_playerRef$current3=playerRef.current)||void 0===_playerRef$current3?void 0:_playerRef$current3.getInternalPlayer().getBoundingClientRect().height,reactPlayerClientWidth=null===(_playerRef$current4=playerRef.current)||void 0===_playerRef$current4?void 0:_playerRef$current4.getInternalPlayer().getBoundingClientRect().width;onReady({target:{clientHeight:reactPlayerClientHeight,clientWidth:reactPlayerClientWidth,naturalHeight:reactPlayerVideoHeight,naturalWidth:reactPlayerVideoWidth}})}catch(error){onError(error)}},handlePlayerError=function handlePlayerError(error){onError(error)},memoizedViewer=(0,react.useMemo)(function(){return(0,jsx_runtime.jsx)(lib.A,{controls:!0,height:"100%",onError:handlePlayerError,onReady:onReactPlayerReady,ref:playerRef,width:"100%",url:null==videoLocation?void 0:videoLocation.url,config:{file:{attributes:{controlsList:["nodownload"],style:{display:"block",height:"100%",width:limitSubjectHeight?"auto":"100%"}}}}})},[videoLocation]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:videoLocation?(0,jsx_runtime.jsx)(SubjectContainer,{$invert:invert,$limitSubjectHeight:limitSubjectHeight,children:memoizedViewer}):(0,jsx_runtime.jsx)(Box.a,{children:t("SubjectViewer.SingleVideoViewerContainer.error")})})}VideoViewer.propTypes={invert:prop_types.bool,limitSubjectHeight:prop_types.bool,onError:prop_types.func,onReady:prop_types.func,subject:(0,prop_types.shape)({locations:(0,prop_types.arrayOf)(locationValidator.A)})};const VideoViewer_VideoViewer=VideoViewer;VideoViewer.__docgenInfo={description:"",methods:[],displayName:"VideoViewer",props:{invert:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},limitSubjectHeight:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},subject:{description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1}}};var Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),SVGContext=__webpack_require__("./src/plugins/drawingTools/shared/SVGContext.js"),InteractionLayer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/InteractionLayer/index.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Select=__webpack_require__("../../node_modules/grommet/es6/components/Select/Select.js"),RangeInput=__webpack_require__("../../node_modules/grommet/es6/components/RangeInput/RangeInput.js"),ResponsiveContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ResponsiveContext/ResponsiveContext.js"),ThemeContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),Grid=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),Pause=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Pause.js"),CirclePlay=__webpack_require__("../../node_modules/grommet-icons/es6/icons/CirclePlay.js"),FormDown=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormDown.js"),VolumeMute=__webpack_require__("../../node_modules/grommet-icons/es6/icons/VolumeMute.js"),VolumeLow=__webpack_require__("../../node_modules/grommet-icons/es6/icons/VolumeLow.js"),Volume=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Volume.js"),Expand=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Expand.js");const theme={global:{input:{display:"block",padding:{horizontal:"0",vertical:"0"}},spacing:"10px"},select:{icons:{margin:"0"}},rangeInput:{track:{height:"3px",lower:{color:{light:"black",dark:"light-1"}},upper:{color:{light:"dark-5",dark:"dark-6"}}},thumb:{color:"neutral-1"}}};var formatTimeStamp=__webpack_require__("./src/helpers/formatTimeStamp/formatTimeStamp.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var color={light:"dark-5",dark:"white"},StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"VideoController__StyledButton",componentId:"sc-gqcv9c-0"})(["height:40px;width:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;&:hover:not(:disabled),&:focus:not(:disabled){"," > svg{stroke:white;}}"],function(props){return props.theme.dark?(0,styled_components_browser_esm.css)(["background-color:",";"],props.theme.global.colors["neutral-1"]):(0,styled_components_browser_esm.css)(["background-color:",";"],props.theme.global.colors["accent-1"])}),SpeedSelect=(0,styled_components_browser_esm.default)(Select.l).withConfig({displayName:"VideoController__SpeedSelect",componentId:"sc-gqcv9c-1"})(["display:flex;align-content:center;width:2rem;text-align:right;"]),VolumeContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"VideoController__VolumeContainer",componentId:"sc-gqcv9c-2"})(["position:relative;"]),VolumeRange=(0,styled_components_browser_esm.default)(RangeInput.s).withConfig({displayName:"VideoController__VolumeRange",componentId:"sc-gqcv9c-3"})(["display:block;width:100px;height:24px;padding:0 8px;background:",";position:absolute;left:-30px;bottom:80px;transform:rotate(-90deg);"],function(props){return props.theme.dark?props.theme.global.colors["dark-1"]:props.theme.global.colors["light-1"]}),DEFAULT_HANDLER=function DEFAULT_HANDLER(){},VideoController=function VideoController(_ref){var _ref$duration=_ref.duration,duration=void 0===_ref$duration?0:_ref$duration,_ref$isPlaying=(_ref.enableDrawing,_ref.isPlaying),isPlaying=void 0!==_ref$isPlaying&&_ref$isPlaying,_ref$handleFullscreen=_ref.handleFullscreen,handleFullscreen=void 0===_ref$handleFullscreen?DEFAULT_HANDLER:_ref$handleFullscreen,_ref$handleSeekChange=_ref.handleSeekChange,handleSeekChange=void 0===_ref$handleSeekChange?DEFAULT_HANDLER:_ref$handleSeekChange,_ref$handleSeekMouseD=_ref.handleSeekMouseDown,handleSeekMouseDown=void 0===_ref$handleSeekMouseD?DEFAULT_HANDLER:_ref$handleSeekMouseD,_ref$handleSeekMouseU=_ref.handleSeekMouseUp,handleSeekMouseUp=void 0===_ref$handleSeekMouseU?DEFAULT_HANDLER:_ref$handleSeekMouseU,_ref$onPlayPause=_ref.onPlayPause,onPlayPause=void 0===_ref$onPlayPause?DEFAULT_HANDLER:_ref$onPlayPause,_ref$onSpeedChange=_ref.onSpeedChange,onSpeedChange=void 0===_ref$onSpeedChange?DEFAULT_HANDLER:_ref$onSpeedChange,_ref$playbackSpeed=_ref.playbackSpeed,playbackSpeed=void 0===_ref$playbackSpeed?"1x":_ref$playbackSpeed,_ref$played=_ref.played,played=void 0===_ref$played?0:_ref$played,playerRef=_ref.playerRef,_ref$setVolume=_ref.setVolume,setVolume=void 0===_ref$setVolume?DEFAULT_HANDLER:_ref$setVolume,_ref$volume=_ref.volume,volume=void 0===_ref$volume?1:_ref$volume,_ref$volumeDisabled=_ref.volumeDisabled,volumeDisabled=void 0!==_ref$volumeDisabled&&_ref$volumeDisabled,size=(0,react.useContext)(ResponsiveContext.u),t=(0,i18n.Bd)("components").t,_useState2=_slicedToArray((0,react.useState)(!1),2),volumeOpen=_useState2[0],setVolumeOpen=_useState2[1],playPauseLabel=isPlaying?"SubjectViewer.VideoController.pause":"SubjectViewer.VideoController.play",volumeButtonLabel=volumeOpen?"SubjectViewer.VideoController.closeVolume":"SubjectViewer.VideoController.openVolume",secondsPlayed=played*duration,displayedDuration=(0,react.useMemo)(function(){return(0,formatTimeStamp.A)(duration)},[duration]),handleVolumeKeys=function handleVolumeKeys(e){"ArrowUp"===e.key&&volume<1?(e.preventDefault(),e.stopPropagation(),setVolume(volume+.25)):"ArrowDown"===e.key&&volume>0&&(e.preventDefault(),e.stopPropagation(),setVolume(volume-.25))};return(0,jsx_runtime.jsx)(Box.a,{background:{light:"white",dark:"dark-3"},pad:{horizontal:"small"===size?"0":"small"},border:[{color:{dark:"dark-1",light:"light-3"},side:"all"},{color:{dark:"transparent",light:"transparent"},side:"top"}],children:(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:theme,children:(0,jsx_runtime.jsxs)(Grid.x,{columns:["min-content","flex","min-content"],rows:["1fr"],"data-testid":"video subject viewer custom controls",children:[(0,jsx_runtime.jsxs)(Box.a,{direction:"row",children:[(0,jsx_runtime.jsx)(StyledButton,{a11yTitle:t(playPauseLabel),onClick:onPlayPause,icon:isPlaying?(0,jsx_runtime.jsx)(Pause.v,{size:"1rem",color}):(0,jsx_runtime.jsx)(CirclePlay.H,{size:"1rem",color}),plain:!0}),(0,jsx_runtime.jsx)(SpeedSelect,{a11yTitle:t("SubjectViewer.VideoController.playbackSpeed"),options:["0.25x","0.5x","1x"],value:playbackSpeed,onChange:function onChange(_ref2){var option=_ref2.option;return onSpeedChange(option)},plain:!0,icon:(0,jsx_runtime.jsx)(FormDown.t,{size:"0.75rem",color}),focusIndicator:!0,size:"0.75rem",color}),(0,jsx_runtime.jsx)(Box.a,{direction:"row",align:"center",width:{min:"3.7rem",max:"3.7rem"},margin:{horizontal:"small"===size?"10px":"20px"},children:(0,jsx_runtime.jsxs)(Text.E,{size:"0.75rem",color,children:[(0,jsx_runtime.jsx)("time",{dateTime:"P".concat(Math.round(secondsPlayed),"S"),children:(0,formatTimeStamp.A)(secondsPlayed)})," / ",(0,jsx_runtime.jsx)("time",{dateTime:"P".concat(Math.round(duration),"S"),children:displayedDuration})]})})]}),(0,jsx_runtime.jsx)(Box.a,{direction:"row",align:"center",margin:{right:"10px"},children:(0,jsx_runtime.jsx)(RangeInput.s,{a11yTitle:t("SubjectViewer.VideoController.scrubber"),min:0,max:.999999,step:.01,value:played,onChange:handleSeekChange,onKeyDown:function handleSliderKeys(e){if("Space"===e.code||"Enter"===e.code)e.preventDefault(),e.stopPropagation(),onPlayPause();else if("ArrowLeft"===e.code){var _playerRef$current,_playerRef$current2;if(e.preventDefault(),e.stopPropagation(),0===played)return;0<played&&played<=.05?null==playerRef||null===(_playerRef$current=playerRef.current)||void 0===_playerRef$current||_playerRef$current.seekTo(0):null==playerRef||null===(_playerRef$current2=playerRef.current)||void 0===_playerRef$current2||_playerRef$current2.seekTo(played-.05)}else if("ArrowRight"===e.code){var _playerRef$current3,_playerRef$current4;if(e.preventDefault(),e.stopPropagation(),1===played)return;1>played&&played>=.95?null==playerRef||null===(_playerRef$current3=playerRef.current)||void 0===_playerRef$current3||_playerRef$current3.seekTo(duration):null==playerRef||null===(_playerRef$current4=playerRef.current)||void 0===_playerRef$current4||_playerRef$current4.seekTo(played+.05)}},onMouseDown:handleSeekMouseDown,onMouseUp:handleSeekMouseUp})}),(0,jsx_runtime.jsxs)(Box.a,{align:"center",direction:"row",fill:!0,children:[(0,jsx_runtime.jsxs)(VolumeContainer,{children:[(0,jsx_runtime.jsx)(StyledButton,{a11yTitle:t(volumeButtonLabel),disabled:volumeDisabled,icon:volume<=0||volumeDisabled?(0,jsx_runtime.jsx)(VolumeMute.W,{size:"1rem",color}):volume<=.5?(0,jsx_runtime.jsx)(VolumeLow.Z,{size:"1rem",color}):(0,jsx_runtime.jsx)(Volume.f,{size:"1rem",color}),onClick:function onClick(){return setVolumeOpen(!volumeOpen)},onKeyDown:handleVolumeKeys,plain:!0}),volumeOpen&&(0,jsx_runtime.jsx)(VolumeRange,{a11yTitle:t("SubjectViewer.VideoController.volumeSlider"),disabled:volumeDisabled,min:0,max:1,step:.25,onChange:function onVolumeChange(e){setVolume(parseFloat(e.target.value))},onKeyDown:handleVolumeKeys,value:volume})]}),(0,jsx_runtime.jsx)(StyledButton,{a11yTitle:t("SubjectViewer.VideoController.fullscreen"),icon:(0,jsx_runtime.jsx)(Expand.J,{size:"1rem",color}),plain:!0,onClick:handleFullscreen})]})]})})})};VideoController.propTypes={duration:prop_types.number,enableDrawing:prop_types.bool,isPlaying:prop_types.bool,handleFullscreen:prop_types.func,handleSeekChange:prop_types.func,handleSeekMouseDown:prop_types.func,handleSeekMouseUp:prop_types.func,onPlayPause:prop_types.func,onSpeedChange:prop_types.func,playbackSpeed:prop_types.string,played:prop_types.number,setVolume:prop_types.func,volume:prop_types.number,volumeDisabled:prop_types.bool};const VideoController_VideoController=VideoController;function VideoWithDrawing_slicedToArray(r,e){return function VideoWithDrawing_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function VideoWithDrawing_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function VideoWithDrawing_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return VideoWithDrawing_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?VideoWithDrawing_arrayLikeToArray(r,a):void 0}}(r,e)||function VideoWithDrawing_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VideoWithDrawing_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}VideoController.__docgenInfo={description:"",methods:[],displayName:"VideoController",props:{duration:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},enableDrawing:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},isPlaying:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},handleFullscreen:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},handleSeekChange:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},handleSeekMouseDown:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},handleSeekMouseUp:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onPlayPause:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onSpeedChange:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},playbackSpeed:{defaultValue:{value:"'1x'",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},played:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},setVolume:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},volume:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},volumeDisabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1}}};var VideoWithDrawing_SubjectContainer=styled_components_browser_esm.default.div.withConfig({displayName:"VideoWithDrawing__SubjectContainer",componentId:"sc-hgjq1t-0"})(["position:relative;video{filter:invert(",");","}"],function(props){return props.$invert?1:0},function(props){return props.$limitSubjectHeight&&(0,styled_components_browser_esm.css)(["display:flex;width:auto;max-height:90vh;max-width:100%;margin-left:auto;"])}),DrawingLayer=styled_components_browser_esm.default.div.withConfig({displayName:"VideoWithDrawing__DrawingLayer",componentId:"sc-hgjq1t-1"})(["position:absolute;top:0px;width:100%;cursor:default;"]),VideoWithDrawing_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function VideoWithDrawing(_ref){var _ref$invert=_ref.invert,invert=void 0!==_ref$invert&&_ref$invert,_ref$limitSubjectHeig=_ref.limitSubjectHeight,limitSubjectHeight=void 0!==_ref$limitSubjectHeig&&_ref$limitSubjectHeig,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?VideoWithDrawing_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?VideoWithDrawing_DEFAULT_HANDLER:_ref$onReady,_ref$onKeyDown=_ref.onKeyDown,onKeyDown=void 0===_ref$onKeyDown?VideoWithDrawing_DEFAULT_HANDLER:_ref$onKeyDown,_ref$setVideoSpeed=_ref.setVideoSpeed,setVideoSpeed=void 0===_ref$setVideoSpeed?VideoWithDrawing_DEFAULT_HANDLER:_ref$setVideoSpeed,_ref$setVolume=_ref.setVolume,setVolume=void 0===_ref$setVolume?VideoWithDrawing_DEFAULT_HANDLER:_ref$setVolume,subject=_ref.subject,_ref$videoSpeed=_ref.videoSpeed,videoSpeed=void 0===_ref$videoSpeed?"1x":_ref$videoSpeed,_ref$volume=_ref.volume,volume=void 0===_ref$volume?1:_ref$volume,_useState2=VideoWithDrawing_slicedToArray((0,react.useState)(0),2),duration=_useState2[0],setDuration=_useState2[1],_useState4=VideoWithDrawing_slicedToArray((0,react.useState)(!1),2),fullscreenError=_useState4[0],setFullscreenError=_useState4[1],_useState6=VideoWithDrawing_slicedToArray((0,react.useState)(!1),2),isPlaying=_useState6[0],setIsPlaying=_useState6[1],_useState8=VideoWithDrawing_slicedToArray((0,react.useState)(!1),2),isSeeking=_useState8[0],setIsSeeking=_useState8[1],_useState0=VideoWithDrawing_slicedToArray((0,react.useState)(0),2),played=_useState0[0],setPlayed=_useState0[1],_useState10=VideoWithDrawing_slicedToArray((0,react.useState)(!0),2),volumeDisabled=_useState10[0],setVolumeDisabled=_useState10[1],_useState12=VideoWithDrawing_slicedToArray((0,react.useState)(0),2),clientWidth=_useState12[0],setClientWidth=_useState12[1],_useState14=VideoWithDrawing_slicedToArray((0,react.useState)(0),2),videoHeight=_useState14[0],setVideoHeight=_useState14[1],_useState16=VideoWithDrawing_slicedToArray((0,react.useState)(0),2),videoWidth=_useState16[0],setVideoWidth=_useState16[1],playerRef=(0,react.useRef)(),interactionLayerSVG=(0,react.useRef)(),transformLayer=(0,react.useRef)(),t=(0,i18n.Bd)("components").t,videoLocation=subject?subject.locations.find(function(l){return"video"===l.type}):null,enableDrawing=loadingState===async_states_default().success,sanitizedSpeed=Number(videoSpeed.slice(0,-1)),canvas=null==transformLayer?void 0:transformLayer.current,interactionLayerScale=clientWidth/videoWidth,svgStyle={touchAction:"pinch-zoom"};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[videoLocation?(0,jsx_runtime.jsxs)(VideoWithDrawing_SubjectContainer,{$invert:invert,$limitSubjectHeight:limitSubjectHeight,children:[(0,jsx_runtime.jsx)(lib.A,{controls:!1,height:"100%",onDuration:function handleVideoDuration(duration){setDuration(duration)},onEnded:function handleVideoEnded(){setIsPlaying(!1)},onError:function handlePlayerError(error){onError(error)},onReady:function onReactPlayerReady(){try{var _playerRef$current,_playerRef$current2,_playerRef$current3,_playerRef$current4,reactPlayerVideoHeight=null===(_playerRef$current=playerRef.current)||void 0===_playerRef$current?void 0:_playerRef$current.getInternalPlayer().videoHeight,reactPlayerVideoWidth=null===(_playerRef$current2=playerRef.current)||void 0===_playerRef$current2?void 0:_playerRef$current2.getInternalPlayer().videoWidth,reactPlayerClientHeight=null===(_playerRef$current3=playerRef.current)||void 0===_playerRef$current3?void 0:_playerRef$current3.getInternalPlayer().getBoundingClientRect().height,reactPlayerClientWidth=null===(_playerRef$current4=playerRef.current)||void 0===_playerRef$current4?void 0:_playerRef$current4.getInternalPlayer().getBoundingClientRect().width;onReady({target:{clientHeight:reactPlayerClientHeight,clientWidth:reactPlayerClientWidth,naturalHeight:reactPlayerVideoHeight,naturalWidth:reactPlayerVideoWidth}}),function detectAudioTrack(){var internalVideo=playerRef.current.getInternalPlayer();(void 0!==internalVideo.webkitAudioDecodedByteCount&&internalVideo.webkitAudioDecodedByteCount>0||internalVideo.audioTracks&&internalVideo.audioTracks.length||void 0!==internalVideo.mozHasAudio)&&setVolumeDisabled(!1)}(),setVideoHeight(reactPlayerVideoHeight),setVideoWidth(reactPlayerVideoWidth),setClientWidth(reactPlayerClientWidth)}catch(error){onError(error)}},onProgress:function handleVideoProgress(reactPlayerState){var played=reactPlayerState.played;isSeeking||setPlayed(played)},playing:isPlaying,playbackRate:sanitizedSpeed,playsinline:!0,progressInterval:10,ref:playerRef,width:"100%",volume,url:null==videoLocation?void 0:videoLocation.url,config:{file:{attributes:{style:{display:"block",height:"100%",width:limitSubjectHeight?"auto":"100%"}}}}}),enableDrawing&&(0,jsx_runtime.jsx)(DrawingLayer,{children:(0,jsx_runtime.jsx)(Box.a,{overflow:"hidden",children:(0,jsx_runtime.jsx)(SVGContext.A.Provider,{value:{canvas},children:(0,jsx_runtime.jsx)("svg",{ref:interactionLayerSVG,focusable:!0,onKeyDown,style:svgStyle,tabIndex:0,viewBox:"0 0 ".concat(videoWidth," ").concat(videoHeight),xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("g",{ref:transformLayer,transform:"",children:(0,jsx_runtime.jsx)(InteractionLayer.A,{scale:interactionLayerScale,duration,height:videoHeight,played,width:videoWidth})})})})})})]}):(0,jsx_runtime.jsx)(Box.a,{children:t("SubjectViewer.SingleVideoViewerContainer.error")}),(0,jsx_runtime.jsx)(VideoController_VideoController,{duration,enableDrawing,isPlaying,handleFullscreen:function handleFullscreen(){try{var _playerRef$current6;null===(_playerRef$current6=playerRef.current)||void 0===_playerRef$current6||_playerRef$current6.getInternalPlayer().requestFullscreen()}catch(error){setFullscreenError(!0)}},handleSeekChange:function handleSeekChange(e){var _playerRef$current5;setPlayed(parseFloat(e.target.value)),null==playerRef||null===(_playerRef$current5=playerRef.current)||void 0===_playerRef$current5||_playerRef$current5.seekTo(parseFloat(e.target.value))},handleSeekMouseDown:function handleSeekMouseDown(e){setIsSeeking(!0)},handleSeekMouseUp:function handleSeekMouseUp(e){setIsSeeking(!1)},onPlayPause:function handlePlayPause(){setIsPlaying(!isPlaying)},onSpeedChange:function handleSetPlaybackSpeed(speed){setVideoSpeed(speed)},played,playbackSpeed:videoSpeed,playerRef,setVolume,volume,volumeDisabled}),fullscreenError&&(0,jsx_runtime.jsx)(Text.E,{children:"Fullscreen not supported in some mobile browsers"})]})}VideoWithDrawing.propTypes={invert:prop_types.bool,limitSubjectHeight:prop_types.bool,loadingState:prop_types.string,onError:prop_types.func,onKeyDown:prop_types.func,onReady:prop_types.func,setVideoSpeed:prop_types.func,setVolume:prop_types.func,subject:(0,prop_types.shape)({locations:(0,prop_types.arrayOf)(locationValidator.A)}),videoSpeed:prop_types.string,volume:prop_types.number};const VideoWithDrawing_VideoWithDrawing=VideoWithDrawing;function storeMapper(store){var drawingTasks=store.workflowSteps.findTasksByType("drawing"),_store$subjectViewer=store.subjectViewer,invert=_store$subjectViewer.invert,setVideoSpeed=_store$subjectViewer.setVideoSpeed,setVolume=_store$subjectViewer.setVolume,videoSpeed=_store$subjectViewer.videoSpeed,volume=_store$subjectViewer.volume,limitSubjectHeight=store.workflows.active.configuration.limit_subject_height;return{enableInteractionLayer:!(null==drawingTasks||!drawingTasks.length),invert,limitSubjectHeight,setVideoSpeed,setVolume,videoSpeed,volume}}VideoWithDrawing.__docgenInfo={description:"",methods:[],displayName:"VideoWithDrawing",props:{invert:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},limitSubjectHeight:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"custom",raw:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onKeyDown:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},setVideoSpeed:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},setVolume:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},videoSpeed:{defaultValue:{value:"'1x'",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},volume:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},subject:{description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1}}};var SingleVideoViewerContainer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){};function SingleVideoViewerContainer(_ref){var _ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?SingleVideoViewerContainer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?SingleVideoViewerContainer_DEFAULT_HANDLER:_ref$onReady,_ref$onKeyDown=_ref.onKeyDown,onKeyDown=void 0===_ref$onKeyDown?SingleVideoViewerContainer_DEFAULT_HANDLER:_ref$onKeyDown,subject=_ref.subject,_useStores=(0,hooks.gy)(storeMapper),enableInteractionLayer=_useStores.enableInteractionLayer,invert=_useStores.invert,limitSubjectHeight=_useStores.limitSubjectHeight,setVideoSpeed=_useStores.setVideoSpeed,setVolume=_useStores.setVolume,videoSpeed=_useStores.videoSpeed,volume=_useStores.volume;return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:enableInteractionLayer?(0,jsx_runtime.jsx)(VideoWithDrawing_VideoWithDrawing,{invert,limitSubjectHeight,loadingState,onError,onReady,onKeyDown,setVideoSpeed,setVolume,subject,volume,videoSpeed}):(0,jsx_runtime.jsx)(VideoViewer_VideoViewer,{invert,limitSubjectHeight,onError,onReady,subject})})}SingleVideoViewerContainer.propTypes={loadingState:prop_types.string,onError:prop_types.func,onKeyDown:prop_types.func,onReady:prop_types.func,subject:(0,prop_types.shape)({locations:(0,prop_types.arrayOf)(locationValidator.A)})};const SingleVideoViewer_SingleVideoViewerContainer=(0,mobxreact_esm.PA)(SingleVideoViewerContainer);SingleVideoViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SingleVideoViewerContainer",props:{loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"custom",raw:"string"},required:!1},onError:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onReady:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onKeyDown:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},subject:{description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/VolumetricViewer/VolumetricViewerWrapper.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),mobx_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){},VolumetricViewer=(0,react__WEBPACK_IMPORTED_MODULE_1__.lazy)(function(){return Promise.all([__webpack_require__.e(4175),__webpack_require__.e(6480),__webpack_require__.e(8490),__webpack_require__.e(6352),__webpack_require__.e(8144),__webpack_require__.e(7833)]).then(__webpack_require__.bind(__webpack_require__,"../lib-subject-viewers/dist/esm/VolumetricViewer/VolumetricFull/index.js"))});function VolumetricViewerWrapper(_ref){var _stores$classifierSto,_stores$classifierSto2,_stores$classifierSto3,_stores$classifierSto4,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,subject=_ref.subject,stores=(0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(mobx_react__WEBPACK_IMPORTED_MODULE_2__.Db),addAnnotation=null!==(_stores$classifierSto=null==stores||null===(_stores$classifierSto2=stores.classifierStore)||void 0===_stores$classifierSto2||null===(_stores$classifierSto2=_stores$classifierSto2.classifications)||void 0===_stores$classifierSto2?void 0:_stores$classifierSto2.addAnnotation)&&void 0!==_stores$classifierSto?_stores$classifierSto:DEFAULT_HANDLER,activeStepTasks=null!==(_stores$classifierSto3=null==stores||null===(_stores$classifierSto4=stores.classifierStore)||void 0===_stores$classifierSto4||null===(_stores$classifierSto4=_stores$classifierSto4.workflowSteps)||void 0===_stores$classifierSto4?void 0:_stores$classifierSto4.activeStepTasks)&&void 0!==_stores$classifierSto3?_stores$classifierSto3:[];var config={loadingState,onAnnotation:function onAnnotationUpdate(annotations){activeStepTasks[0]&&addAnnotation(activeStepTasks[0],annotations)},onError,onReady,subject};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(react__WEBPACK_IMPORTED_MODULE_1__.Suspense,{fallback:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("p",{children:"Loading Volumetric Viewer..."}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(VolumetricViewer,_objectSpread({},config))})}const __WEBPACK_DEFAULT_EXPORT__=VolumetricViewerWrapper;VolumetricViewerWrapper.__docgenInfo={description:"",methods:[],displayName:"VolumetricViewerWrapper",props:{loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},required:!1},onError:{defaultValue:{value:"() => {}",computed:!1},required:!1},onReady:{defaultValue:{value:"() => {}",computed:!1},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>SubjectViewer_SubjectViewer});var async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),i18n=__webpack_require__("./src/translations/i18n.jsx"),helpers=__webpack_require__("./src/helpers/index.js"),DataImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/DataImageViewer/index.js"),FlipbookViewerContainer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/FlipbookViewer/FlipbookViewerContainer.jsx"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),react=__webpack_require__("../../node_modules/react/index.js"),hooks=__webpack_require__("./src/hooks/index.js"),GeoMapViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/GeoMapViewer/GeoMapViewer.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function storeMapper(classifierStore){var subject=classifierStore.subjects.active,loadingState=classifierStore.subjectViewer.loadingState;return{activeStepTasks:classifierStore.workflowSteps.activeStepTasks,latest:null==subject?void 0:subject.stepHistory.latest,loadingState,subject}}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function GeoMapViewerContainer(_ref){var _ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,_useStores=(0,hooks.gy)(storeMapper),activeStepTasks=_useStores.activeStepTasks,latest=_useStores.latest,loadingState=_useStores.loadingState,subject=_useStores.subject,_useSubjectJSON=(0,hooks.ej)({onError,onReady,subject}),data=_useSubjectJSON.data,error=_useSubjectJSON.error,loading=_useSubjectJSON.loading,type=_useSubjectJSON.type,geoJSONData=(_useSubjectJSON.viewer,null);if(data&&"GeoJSON"===(null==type?void 0:type.name)&&(geoJSONData=data),(0,react.useEffect)(function(){var _latest$annotations,geoAnnotation=null==latest||null===(_latest$annotations=latest.annotations)||void 0===_latest$annotations?void 0:_latest$annotations.find(function(annotation){return"geoDrawing"===annotation.taskType});geoAnnotation&&geoJSONData&&0===geoAnnotation.value.length&&geoAnnotation.update([geoJSONData])},[geoJSONData,null==latest?void 0:latest.annotations]),loadingState===async_states_default().loading||loading)return null;if(error)return(0,jsx_runtime.jsx)("p",{children:error.message});var geoDrawingTask=activeStepTasks.find(function(task){return"geoDrawing"===task.type});return(0,jsx_runtime.jsx)(GeoMapViewer.A,{geoDrawingTask,geoJSON:geoJSONData,subjectId:subject.id})}GeoMapViewerContainer.propTypes={onError:prop_types.func,onReady:prop_types.func};const GeoMapViewer_GeoMapViewerContainer=(0,mobxreact_esm.PA)(GeoMapViewerContainer);GeoMapViewerContainer.__docgenInfo={description:"",methods:[],displayName:"GeoMapViewerContainer",props:{onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1}}};var JSONDataViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/JSONDataViewer/index.js"),ImageAndTextViewerConnector=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/ImageAndTextViewer/ImageAndTextViewerConnector.jsx"),MultiFrameViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/index.js"),SingleImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"),SingleTextViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/index.js"),SingleVideoViewerContainer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleVideoViewer/SingleVideoViewerContainer.jsx"),SubjectGroupViewerContainer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewerContainer.jsx"),VolumetricViewerWrapper=(__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewer.jsx"),__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/VolumetricViewer/VolumetricViewerWrapper.jsx")),viewers={dataImage:DataImageViewer.A,flipbook:FlipbookViewerContainer.A,geoMap:GeoMapViewer_GeoMapViewerContainer,jsonData:JSONDataViewer.A,imageAndText:ImageAndTextViewerConnector.A,lightCurve:JSONDataViewer.A,multiFrame:MultiFrameViewer.A,scatterPlot:JSONDataViewer.A,singleImage:SingleImageViewer.Ay,singleText:SingleTextViewer.Ay,singleVideo:SingleVideoViewerContainer.A,subjectGroup:SubjectGroupViewerContainer.A,variableStar:JSONDataViewer.A,volumetric:VolumetricViewerWrapper.A};const getViewer_getViewer=function getViewer(viewer){return viewers[viewer]||null};function SubjectViewer(_ref){var enableInteractionLayer=_ref.enableInteractionLayer,onError=_ref.onError,onSubjectReady=_ref.onSubjectReady,subject=_ref.subject,_ref$subjectQueueStat=_ref.subjectQueueState,subjectQueueState=void 0===_ref$subjectQueueStat?async_states_default().initialized:_ref$subjectQueueStat,subjectReadyState=_ref.subjectReadyState,t=(0,i18n.Bd)("components").t;switch(subjectQueueState){case async_states_default().initialized:return null;case async_states_default().loading:return(0,jsx_runtime.jsx)("div",{children:t("SubjectViewer.loading")});case async_states_default().error:return console.error("There was an error loading the subjects"),null;case async_states_default().success:var Viewer=getViewer_getViewer(null==subject?void 0:subject.viewer);return Viewer?(0,jsx_runtime.jsx)(Viewer,{enableInteractionLayer,loadingState:subjectReadyState,onError,onReady:onSubjectReady,subject,title:{id:"subject-title",text:"Subject ".concat(subject.id)},viewerConfiguration:null==subject?void 0:subject.viewerConfiguration},subject.id):null}}SubjectViewer.propTypes={subjectQueueState:prop_types_default().oneOf(async_states_default().values),subject:prop_types_default().shape({viewer:prop_types_default().string})};const SubjectViewer_SubjectViewer=(0,helpers.Lg)(SubjectViewer,function SubjectViewer_storeMapper(classifierStore){var _classifierStore$subj=classifierStore.subjects,subject=_classifierStore$subj.active,subjectQueueState=_classifierStore$subj.loadingState,_classifierStore$subj2=classifierStore.subjectViewer,onSubjectReady=_classifierStore$subj2.onSubjectReady,onError=_classifierStore$subj2.onError,subjectReadyState=_classifierStore$subj2.loadingState,drawingTasks=null==classifierStore?void 0:classifierStore.workflowSteps.findTasksByType("drawing"),transcriptionTasks=null==classifierStore?void 0:classifierStore.workflowSteps.findTasksByType("transcription");return{enableInteractionLayer:drawingTasks.length>0||transcriptionTasks.length>0,onError,onSubjectReady,subject,subjectQueueState,subjectReadyState}});SubjectViewer.__docgenInfo={description:"",methods:[],displayName:"SubjectViewer",props:{subjectQueueState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"enum",computed:!0,value:"asyncStates.values"},required:!1},subject:{description:"",type:{name:"shape",value:{viewer:{name:"string",required:!1}}},required:!1}}}},"./src/components/Classifier/components/TaskArea/components/DisabledTaskPopup/DisabledTaskPopup.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>DisabledTaskPopup});var _zooniverse_react_components_PlainButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-react-components/dist/esm/PlainButton/PlainButton.js"),_zooniverse_react_components_PrimaryButton__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js"),_zooniverse_react_components_Modal__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js"),grommet__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/prop-types/index.js"),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/translations/i18n.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var StyledDialog=styled_components__WEBPACK_IMPORTED_MODULE_6__.default.dialog.withConfig({displayName:"DisabledTaskPopup__StyledDialog",componentId:"sc-1e0q0fu-0"})(["z-index:1000;border:none;padding:0;margin:2em 1em;height:min-content;min-height:30ch;"]);function DisabledTaskPopup(_ref){var _ref$isOpen=_ref.isOpen,isOpen=void 0!==_ref$isOpen&&_ref$isOpen,nextAvailable=_ref.nextAvailable,_ref$onClose=_ref.onClose,onClose=void 0===_ref$onClose?function(){return!0}:_ref$onClose,reset=_ref.reset,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_7__.Bd)("components").t,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(isOpen),2),active=_useState2[0],setActive=_useState2[1];return(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)(function onLoaded(){setActive(isOpen)},[isOpen]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(StyledDialog,{open:active,"aria-label":t("TaskArea.DisabledTaskPopup.title"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_zooniverse_react_components_Modal__WEBPACK_IMPORTED_MODULE_2__.a,{full:"horizontal",title:t("TaskArea.DisabledTaskPopup.title"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_3__.f,{children:t("TaskArea.DisabledTaskPopup.body")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_zooniverse_react_components_PlainButton__WEBPACK_IMPORTED_MODULE_0__.Ay,{alignSelf:"center",onClick:function onReset(){setActive(!1),reset()},text:t("TaskArea.DisabledTaskPopup.options.select")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_zooniverse_react_components_PrimaryButton__WEBPACK_IMPORTED_MODULE_1__.A,{alignSelf:"center",color:"teal",label:t("TaskArea.DisabledTaskPopup.options.next"),onClick:function onNext(){setActive(!1),nextAvailable()},margin:"xsmall"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_zooniverse_react_components_PlainButton__WEBPACK_IMPORTED_MODULE_0__.Ay,{alignSelf:"center",text:t("TaskArea.DisabledTaskPopup.options.dismiss"),onClick:function closeModal(){setActive(!1),onClose()}})]})})}DisabledTaskPopup.propTypes={isOpen:prop_types__WEBPACK_IMPORTED_MODULE_4__.bool,nextAvailable:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,onClose:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,reset:prop_types__WEBPACK_IMPORTED_MODULE_4__.func},DisabledTaskPopup.__docgenInfo={description:"A popup which interrupts classification for subjects that are retired or already seen.\n\n Volunteers are offered options to choose something else to work on, or to dismiss the popup and continue anyway.\n\n ```\n  <DisabledTaskPopup\n   isOpen\n   onClose={callback}\n   target={parentNode}\n  />\n ```",methods:[],displayName:"DisabledTaskPopup",props:{isOpen:{defaultValue:{value:"false",computed:!1},description:"open the popup on mount.",type:{name:"custom",raw:"bool"},required:!1},onClose:{defaultValue:{value:"() => true",computed:!1},description:"callback to run when the popup closes",type:{name:"custom",raw:"func"},required:!1},nextAvailable:{description:"load the next unclassified subject",type:{name:"custom",raw:"func"},required:!1},reset:{description:"reset the subject store and choose a new subject",type:{name:"custom",raw:"func"},required:!1}}}},"./src/components/Classifier/components/TaskArea/components/Tasks/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>_TasksConnector__WEBPACK_IMPORTED_MODULE_0__.A});var _TasksConnector__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/TaskArea/components/Tasks/TasksConnector.jsx")},"./src/components/Classifier/components/TaskArea/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>TaskAreaConnector});var helpers=__webpack_require__("./src/helpers/index.js"),Tab=__webpack_require__("../../node_modules/grommet/es6/components/Tab/Tab.js"),SpacedText=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const esm_Tab_Tab=function Tab_Tab(props){var clonedProps=_objectSpread({},props);return"string"==typeof clonedProps.title&&(clonedProps.title=(0,jsx_runtime.jsx)(SpacedText.A,{size:"medium",weight:"bold",children:clonedProps.title})),(0,jsx_runtime.jsx)(Tab.o,_objectSpread({},clonedProps))};var Tabs=__webpack_require__("../../node_modules/grommet/es6/components/Tabs/Tabs.js"),withThemeContext=__webpack_require__("../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js"),polished_esm=__webpack_require__("../../node_modules/polished/dist/polished.esm.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");const Tabs_theme={tab:{active:{background:{dark:"dark-3",light:"white"}},background:{dark:"dark-2",light:"light-1"},hover:{color:{dark:"light-5",light:"dark-5"}},margin:"0"},tabs:{extend:props=>{var _props$children,tabHeaderColor=function getTabHeaderColor(props){return getFromTheme(props,"light-5","dark-5")}(props),borderColor=getBorderColor(props),activeTabHeaderColor=function getActiveTabHeaderColor(props){return getFromTheme(props,"white","black")}(props),hoverBackgroundColor=function getHoverBackground(props){var color=getFromTheme(props,"neutral-1","accent-1"),darkColors=[(0,polished_esm.e$)(.04,color),(0,polished_esm.e$)(.11,color)],lightColors=[(0,polished_esm.a)(.05,color),(0,polished_esm.e$)(.11,color)],activeColors=props.theme.dark?darkColors:lightColors;return(0,styled_components_browser_esm.css)(["linear-gradient(",",",");"],activeColors[0],activeColors[1])}(props),tabChildren=null===(_props$children=props.children)||void 0===_props$children||null===(_props$children=_props$children[0])||void 0===_props$children||null===(_props$children=_props$children.props)||void 0===_props$children?void 0:_props$children.children,flexBasis=tabChildren?"".concat(100/tabChildren.length,"%"):"auto";return(0,styled_components_browser_esm.css)(['button[role="tab"]{color:',";flex:1 1 ",";> div{height:40px;padding:0;justify-content:center;border-bottom:1px solid ",";border-right:1px solid ",';}&:last-of-type > div{border-right:none;}&:disabled{cursor:not-allowed;opacity:1;}&[aria-selected="true"]{pointer-events:none;> div{border-bottom:1px solid transparent;color:',';}}&:enabled[aria-selected="false"] > div{&:focus,&:hover{background:',";}}}"],tabHeaderColor,flexBasis,borderColor,borderColor,activeTabHeaderColor,hoverBackgroundColor)},header:{background:{dark:"dark-2",light:"light-1"},extend:props=>{var borderColor=getBorderColor(props);return(0,styled_components_browser_esm.css)(["border-left:1px solid ",";border-right:1px solid ",";border-top:1px solid ",";text-align:center;"],borderColor,borderColor,borderColor)}},panel:{extend:props=>{var backgroundColor=function getBackgroundColor(props){return getFromTheme(props,"dark-3","white")}(props),borderColor=getBorderColor(props);return(0,styled_components_browser_esm.css)(["background-color:",";border-bottom:1px solid ",";border-left:1px solid ",";border-right:1px solid ",";padding:20px 20px 30px 20px;"],backgroundColor,borderColor,borderColor,borderColor)}}}};function getBorderColor(props){return getFromTheme(props,"dark-1","light-3")}function getFromTheme(props,darkColor,lightColor){return props.theme.dark?props.theme.global.colors[darkColor]:props.theme.global.colors[lightColor]}const Tabs_Tabs=(0,withThemeContext.A)(Tabs.t,Tabs_theme);var Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),DisabledTaskPopup=__webpack_require__("./src/components/Classifier/components/TaskArea/components/DisabledTaskPopup/DisabledTaskPopup.jsx");const DisabledTaskPopupConnector=(0,helpers.Lg)(DisabledTaskPopup.A,function storeMapper(store){var _store$subjects=store.subjects;return{nextAvailable:_store$subjects.nextAvailable,reset:_store$subjects.clearQueue}});var Tasks=__webpack_require__("./src/components/Classifier/components/TaskArea/components/Tasks/index.js"),ResponsiveContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ResponsiveContext/ResponsiveContext.js"),hooks=__webpack_require__("./src/hooks/index.js"),SlideTutorial=__webpack_require__("./src/components/Classifier/components/SlideTutorial/SlideTutorial.jsx");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var _excluded=["locale","pad","projectDisplayName","tutorial"];function SlideTutorialContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function SlideTutorialContainer_defineProperty(e,r,t){return(r=function SlideTutorialContainer_toPropertyKey(t){var i=function SlideTutorialContainer_toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var defaultTutorial={activeStep:0,steps:[]};function SlideTutorialContainer(_ref){var locale=_ref.locale,_ref$pad=_ref.pad,pad=void 0===_ref$pad?"medium":_ref$pad,_ref$projectDisplayNa=_ref.projectDisplayName,projectDisplayName=void 0===_ref$projectDisplayNa?"":_ref$projectDisplayNa,_ref$tutorial=_ref.tutorial,tutorial=void 0===_ref$tutorial?defaultTutorial:_ref$tutorial,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),tutorialTranslation=(0,hooks.io)({translated_type:"tutorial",translated_id:null==tutorial?void 0:tutorial.id,language:locale}),size=(0,react.useContext)(ResponsiveContext.u),strings=null==tutorialTranslation?void 0:tutorialTranslation.strings,activeStep=tutorial.activeStep,steps=tutorial.steps,stepWithMedium=tutorial.stepWithMedium,height="small"===size?"100%":"73vh";return(0,jsx_runtime.jsx)(SlideTutorial.A,function SlideTutorialContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SlideTutorialContainer_ownKeys(Object(t),!0).forEach(function(r){SlideTutorialContainer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SlideTutorialContainer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({activeStep,height,pad,projectDisplayName,steps,stepWithMedium,strings},props))}SlideTutorialContainer.propTypes={locale:prop_types_default().string,projectDisplayName:prop_types_default().string,tutorial:prop_types_default().shape({activeStep:prop_types_default().number,steps:prop_types_default().array,stepWithMedium:prop_types_default().func.isRequired})};const SlideTutorial_SlideTutorialContainer=(0,helpers.Lg)(SlideTutorialContainer,function SlideTutorialContainer_storeMapper(classifierStore){var locale=classifierStore.locale,project=classifierStore.projects.active,_classifierStore$tuto=classifierStore.tutorials,tutorial=_classifierStore$tuto.active,activeStep=_classifierStore$tuto.activeStep,stepWithMedium=_classifierStore$tuto.stepWithMedium,steps=null==tutorial?void 0:tutorial.steps;return{activeStep,locale,projectDisplayName:project.display_name,steps,stepWithMedium,tutorial}});function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}SlideTutorialContainer.__docgenInfo={description:"",methods:[],displayName:"SlideTutorialContainer",props:{pad:{defaultValue:{value:"'medium'",computed:!1},required:!1},projectDisplayName:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},tutorial:{defaultValue:{value:"{\n  activeStep: 0,\n  steps: []\n}",computed:!1},description:"",type:{name:"shape",value:{activeStep:{name:"number",required:!1},steps:{name:"array",required:!1},stepWithMedium:{name:"func",required:!0}}},required:!1},locale:{description:"",type:{name:"string"},required:!1}}};var TaskContainer=styled_components_browser_esm.default.div.withConfig({displayName:"TaskArea__TaskContainer",componentId:"sc-1jnocm-0"})(["&[inert]{opacity:0.5;}"]);function TaskArea(_ref){var alreadySeen=_ref.alreadySeen,className=_ref.className,_ref$currentStepIndex=_ref.currentStepIndex,currentStepIndex=void 0===_ref$currentStepIndex?1:_ref$currentStepIndex,_ref$disableTutorialT=_ref.disableTutorialTab,disableTutorialTab=void 0===_ref$disableTutorialT||_ref$disableTutorialT,_ref$setActiveTutoria=_ref.setActiveTutorial,setActiveTutorial=void 0===_ref$setActiveTutoria?function(){return!0}:_ref$setActiveTutoria,retired=_ref.retired,subject=_ref.subject,_ref$totalSteps=_ref.totalSteps,totalSteps=void 0===_ref$totalSteps?1:_ref$totalSteps,_ref$tutorial=_ref.tutorial,tutorial=void 0===_ref$tutorial?null:_ref$tutorial,_ref$workflow=_ref.workflow,workflow=void 0===_ref$workflow?{hasIndexedSubjects:!1}:_ref$workflow,t=(0,i18n.Bd)("components").t,_useState2=_slicedToArray((0,react.useState)(0),2),activeIndex=_useState2[0],setActiveIndex=_useState2[1],_useState4=_slicedToArray((0,react.useState)(!1),2),disabled=_useState4[0],setDisabled=_useState4[1],taskArea=(0,react.useRef)(null),finished=retired||alreadySeen;return taskArea.current&&(taskArea.current.inert=finished&&disabled),(0,react.useEffect)(function onSubjectChange(){setDisabled(finished&&workflow.hasIndexedSubjects)},[alreadySeen,subject,retired]),(0,react.useEffect)(function onWorkflowChange(){setActiveIndex(0)},[workflow]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DisabledTaskPopupConnector,{isOpen:disabled,onClose:function enableTasks(){setDisabled(!1)}}),(0,jsx_runtime.jsx)(TaskContainer,{"aria-label":"Task area: Step ".concat(currentStepIndex," of ").concat(totalSteps),className:"classifier-task-area",ref:taskArea,role:"region",tabIndex:-1,children:(0,jsx_runtime.jsxs)(Tabs_Tabs,{activeIndex,className,onActive:function onTabClick(newIndex){1===newIndex&&setActiveTutorial(tutorial.id),0===newIndex&&setActiveTutorial(),setActiveIndex(newIndex)},flex:!0,children:[(0,jsx_runtime.jsx)(esm_Tab_Tab,{title:t("TaskArea.task"),children:(0,jsx_runtime.jsx)(Box.a,{fill:!0,children:(0,jsx_runtime.jsx)(Tasks.A,{disabled})})}),(0,jsx_runtime.jsx)(esm_Tab_Tab,{disabled:disabled||disableTutorialTab,title:t("TaskArea.tutorial"),children:(0,jsx_runtime.jsx)(Box.a,{children:(0,jsx_runtime.jsx)(SlideTutorial_SlideTutorialContainer,{onClick:function onClose(){setActiveIndex(0),null==tutorial||tutorial.setSeenTime()},pad:"none"})})})]})})]})}TaskArea.propTypes={className:prop_types.string,currentStepIndex:prop_types.number,disableTutorialTab:prop_types.bool,setActiveTutorial:prop_types.func,subject:(0,prop_types.shape)({already_seen:prop_types.bool,id:prop_types.string,retired:prop_types.bool}),totalSteps:prop_types.number,workflow:(0,prop_types.shape)({hasIndexedSubjects:prop_types.bool})},TaskArea.__docgenInfo={description:"The tabbed tasks area of the classifier, with tabs for the tutorial and active tasks.",methods:[],displayName:"TaskArea",props:{currentStepIndex:{defaultValue:{value:"1",computed:!1},description:"The current step index (1-based)",type:{name:"custom",raw:"number"},required:!1},disableTutorialTab:{defaultValue:{value:"true",computed:!1},description:"disable the tutorial tab",type:{name:"custom",raw:"bool"},required:!1},setActiveTutorial:{defaultValue:{value:"() => true",computed:!1},description:"select an active tutorial",type:{name:"custom",raw:"func"},required:!1},totalSteps:{defaultValue:{value:"1",computed:!1},description:"Total number of steps in the workflow",type:{name:"custom",raw:"number"},required:!1},tutorial:{defaultValue:{value:"null",computed:!1},required:!1},workflow:{defaultValue:{value:"{\n  hasIndexedSubjects: false\n}",computed:!1},description:"the active workflow",type:{name:"shape",value:{hasIndexedSubjects:{name:"bool",required:!1}}},required:!1},className:{description:"Optional CSS classes",type:{name:"custom",raw:"string"},required:!1},subject:{description:"the current subject.",type:{name:"shape",value:{already_seen:{name:"bool",required:!1},id:{name:"string",required:!1},retired:{name:"bool",required:!1}}},required:!1}}};const TaskAreaConnector=(0,helpers.Lg)(TaskArea,function TaskAreaConnector_storeMapper(store){var subject=store.subjects.active,_store$tutorials=store.tutorials,disableTutorialTab=_store$tutorials.disableTutorialTab,setActiveTutorial=_store$tutorials.setActiveTutorial,tutorial=_store$tutorials.tutorial,workflow=store.workflows.active,_store$workflowSteps=store.workflowSteps,step=_store$workflowSteps.active,steps=_store$workflowSteps.steps,currentStepIndex=1,totalSteps=1;if(null!=step&&step.stepKey&&steps){var stepKeysArray=Array.from(steps.keys());currentStepIndex=stepKeysArray.indexOf(step.stepKey)+1,totalSteps=stepKeysArray.length}return{alreadySeen:null==subject?void 0:subject.alreadySeen,currentStepIndex,disableTutorialTab,setActiveTutorial,retired:null==subject?void 0:subject.retired,subject,totalSteps,tutorial,workflow}})}}]);