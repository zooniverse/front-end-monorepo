"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[446],{"./src/components/Classifier/components/ImageToolbar/components/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MA:()=>_ZoomOutButton__WEBPACK_IMPORTED_MODULE_7__.A,U9:()=>_ResetButton__WEBPACK_IMPORTED_MODULE_4__.A,Z8:()=>_ZoomInButton__WEBPACK_IMPORTED_MODULE_6__.A,g3:()=>_MoveButton__WEBPACK_IMPORTED_MODULE_3__.A,vB:()=>_AnnotateButton__WEBPACK_IMPORTED_MODULE_0__.A,wi:()=>_RotateButton__WEBPACK_IMPORTED_MODULE_5__.A,zj:()=>_InvertButton__WEBPACK_IMPORTED_MODULE_2__.A});var _AnnotateButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/AnnotateButton/index.js"),_InvertButton__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/FullscreenButton/index.js"),__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/InvertButton/index.js")),_MoveButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/MoveButton/index.js"),_ResetButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ResetButton/index.js"),_RotateButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/RotateButton/index.js"),_ZoomInButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomInButton/index.js"),_ZoomOutButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomOutButton/index.js")},"./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/SeparateFramesViewer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var mobx_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),grommet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/hooks/index.js"),_helpers_locationValidator__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),_components_SeparateFrame_SeparateFrame__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/SeparateFrame/SeparateFrame.jsx"),_components_ViewModeButton_ViewModeButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/ViewModeButton/ViewModeButton.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function storeMapper(store){var _store$workflows,_store$workflows$acti=null===(_store$workflows=store.workflows)||void 0===_store$workflows||null===(_store$workflows=_store$workflows.active)||void 0===_store$workflows?void 0:_store$workflows.configuration;return{limitSubjectHeight:_store$workflows$acti.limit_subject_height,multiImageLayout:_store$workflows$acti.multi_image_layout}}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function SeparateFramesViewer(_ref){var _subject$locations2,_ref$enableInteractio=_ref.enableInteractionLayer,enableInteractionLayer=void 0!==_ref$enableInteractio&&_ref$enableInteractio,_ref$enableRotation=_ref.enableRotation,enableRotation=void 0===_ref$enableRotation?DEFAULT_HANDLER:_ref$enableRotation,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4___default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,subject=_ref.subject,_useStores=(0,_hooks__WEBPACK_IMPORTED_MODULE_6__.gy)(storeMapper),limitSubjectHeight=_useStores.limitSubjectHeight,multiImageLayout=_useStores.multiImageLayout,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(!1),2),forceColLayout=_useState2[0],setForceColLayout=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(1),2),numFramesHorizontally=_useState4[0],setNumFramesHorizontally=_useState4[1];(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){var _subject$locations;"row"===multiImageLayout?setNumFramesHorizontally(null==subject||null===(_subject$locations=subject.locations)||void 0===_subject$locations?void 0:_subject$locations.length):"grid2"===multiImageLayout?setNumFramesHorizontally(2):"grid3"===multiImageLayout&&setNumFramesHorizontally(3)}),[multiImageLayout]);var framesContainer=(0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null),resizeObserver=(0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){var tooSmallContainerWidth=300*numFramesHorizontally;return resizeObserver.current=new window.ResizeObserver((function(entries){entries[0].contentRect.width<tooSmallContainerWidth?setForceColLayout(!0):setForceColLayout(!1)})),framesContainer.current&&resizeObserver.current.observe(framesContainer.current),function(){framesContainer.current&&resizeObserver.current.unobserve(framesContainer.current)}}),[numFramesHorizontally]),loadingState!==_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4___default().error&&null!=subject&&subject.locations?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{ref:framesContainer,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_1__.x,{gap:"xsmall",columns:forceColLayout?"auto":["repeat(".concat(numFramesHorizontally,", 1fr)")],rows:"auto",children:null===(_subject$locations2=subject.locations)||void 0===_subject$locations2?void 0:_subject$locations2.map((function(location,index){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_components_SeparateFrame_SeparateFrame__WEBPACK_IMPORTED_MODULE_8__.A,{enableInteractionLayer,enableRotation,frame:index,frameUrl:location.url,limitSubjectHeight,onError,onReady,subject},location.url)}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_2__.a,{justify:"center",pad:"xsmall",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_components_ViewModeButton_ViewModeButton__WEBPACK_IMPORTED_MODULE_9__.A,{})})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:"Something went wrong."})}SeparateFramesViewer.displayName="SeparateFramesViewer";const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_0__.PA)(SeparateFramesViewer);SeparateFramesViewer.propTypes={enableInteractionLayer:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,enableRotation:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,loadingState:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,onError:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,onReady:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,subject:prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({locations:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(_helpers_locationValidator__WEBPACK_IMPORTED_MODULE_7__.A)}).isRequired},SeparateFramesViewer.__docgenInfo={description:"",methods:[],displayName:"SeparateFramesViewer",props:{enableInteractionLayer:{defaultValue:{value:"false",computed:!1},description:"Determined per mobx store WorkflowStepStore via SubjectViewer.",type:{name:"bool"},required:!1},enableRotation:{defaultValue:{value:"() => true",computed:!1},description:"Passed from Subject Viewer Store",type:{name:"func"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"@zooniverse/async-states",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and called if `useSubjectImage()` hook fails.",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and dimensions are added to classification metadata. Called after svg layers successfully load with `defaultFrameSrc`.",type:{name:"func"},required:!1},subject:{description:"Required. Passed from mobx store via SubjectViewer.",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/SeparateFramesViewer.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OneColumn:()=>OneColumn,OneRow:()=>OneRow,ThreeColumnGrid:()=>ThreeColumnGrid,TwoColumnGrid:()=>TwoColumnGrid,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var mobx_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),_test_mockStore__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./test/mockStore/index.js"),_test_factories__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./test/factories/index.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_3__),_SeparateFramesViewer__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/SeparateFramesViewer.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Subject Viewers / SeparateFramesViewer / Layouts",component:_SeparateFramesViewer__WEBPACK_IMPORTED_MODULE_4__.A};var mockSubject=_test_factories__WEBPACK_IMPORTED_MODULE_2__.vk.build({locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/subject_location/1e54b552-4608-4701-9db9-b8342b81278a.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/subject_location/098f3fb6-5021-410a-82a2-477a28b2bcd6.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/subject_location/8fcb18b0-de80-42cd-ba2a-4871da30c74f.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/subject_location/85d8d82a-c88d-493c-b3db-7cd9f2ca5ad8.jpeg"}]}),workflowWithOneColumn=_test_factories__WEBPACK_IMPORTED_MODULE_2__.s4.build({configuration:{invert_subject:!0,multi_image_layout:"col"}}),storeWithOneColumn=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_1__.A)({subject:mockSubject,workflow:workflowWithOneColumn});storeWithOneColumn.subjectViewer.setSeparateFramesView(!0),storeWithOneColumn.subjectViewer.enableRotation(!0);var OneColumn=function OneColumn(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_0__.Kq,{classifierStore:storeWithOneColumn,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_SeparateFramesViewer__WEBPACK_IMPORTED_MODULE_4__.A,{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_3___default().success,subject:storeWithOneColumn.subjects.active})})};OneColumn.displayName="OneColumn";var workflowWithOneRow=_test_factories__WEBPACK_IMPORTED_MODULE_2__.s4.build({configuration:{invert_subject:!0,multi_image_layout:"row"}}),storeWithOneRow=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_1__.A)({subject:mockSubject,workflow:workflowWithOneRow});storeWithOneRow.subjectViewer.setSeparateFramesView(!0),storeWithOneRow.subjectViewer.enableRotation(!0);var OneRow=function OneRow(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_0__.Kq,{classifierStore:storeWithOneRow,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_SeparateFramesViewer__WEBPACK_IMPORTED_MODULE_4__.A,{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_3___default().success,subject:storeWithOneRow.subjects.active})})};OneRow.displayName="OneRow";var workflowWithTwoColGrid=_test_factories__WEBPACK_IMPORTED_MODULE_2__.s4.build({configuration:{invert_subject:!0,multi_image_layout:"grid2"}}),storeWithTwoColGrid=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_1__.A)({subject:mockSubject,workflow:workflowWithTwoColGrid});storeWithTwoColGrid.subjectViewer.setSeparateFramesView(!0),storeWithTwoColGrid.subjectViewer.enableRotation(!0);var TwoColumnGrid=function TwoColumnGrid(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_0__.Kq,{classifierStore:storeWithTwoColGrid,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_SeparateFramesViewer__WEBPACK_IMPORTED_MODULE_4__.A,{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_3___default().success,subject:storeWithTwoColGrid.subjects.active})})};TwoColumnGrid.displayName="TwoColumnGrid";var workflowWithThreeColGrid=_test_factories__WEBPACK_IMPORTED_MODULE_2__.s4.build({configuration:{invert_subject:!0,multi_image_layout:"grid3"}}),storeWithThreeColGrid=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_1__.A)({subject:mockSubject,workflow:workflowWithThreeColGrid});storeWithThreeColGrid.subjectViewer.setSeparateFramesView(!0),storeWithThreeColGrid.subjectViewer.enableRotation(!0);var ThreeColumnGrid=function ThreeColumnGrid(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_0__.Kq,{classifierStore:storeWithThreeColGrid,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_SeparateFramesViewer__WEBPACK_IMPORTED_MODULE_4__.A,{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_3___default().success,subject:storeWithThreeColGrid.subjects.active})})};ThreeColumnGrid.displayName="ThreeColumnGrid",OneColumn.parameters={...OneColumn.parameters,docs:{...OneColumn.parameters?.docs,source:{originalSource:"() => {\n  return <Provider classifierStore={storeWithOneColumn}>\n      <SeparateFramesViewer loadingState={asyncStates.success} subject={storeWithOneColumn.subjects.active} />\n    </Provider>;\n}",...OneColumn.parameters?.docs?.source}}},OneRow.parameters={...OneRow.parameters,docs:{...OneRow.parameters?.docs,source:{originalSource:"() => {\n  return <Provider classifierStore={storeWithOneRow}>\n      <SeparateFramesViewer loadingState={asyncStates.success} subject={storeWithOneRow.subjects.active} />\n    </Provider>;\n}",...OneRow.parameters?.docs?.source}}},TwoColumnGrid.parameters={...TwoColumnGrid.parameters,docs:{...TwoColumnGrid.parameters?.docs,source:{originalSource:"() => {\n  return <Provider classifierStore={storeWithTwoColGrid}>\n      <SeparateFramesViewer loadingState={asyncStates.success} subject={storeWithTwoColGrid.subjects.active} />\n    </Provider>;\n}",...TwoColumnGrid.parameters?.docs?.source}}},ThreeColumnGrid.parameters={...ThreeColumnGrid.parameters,docs:{...ThreeColumnGrid.parameters?.docs,source:{originalSource:"() => {\n  return <Provider classifierStore={storeWithThreeColGrid}>\n      <SeparateFramesViewer loadingState={asyncStates.success} subject={storeWithThreeColGrid.subjects.active} />\n    </Provider>;\n}",...ThreeColumnGrid.parameters?.docs?.source}}};const __namedExportsOrder=["OneColumn","OneRow","TwoColumnGrid","ThreeColumnGrid"]},"./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/SeparateFrame/SeparateFrame.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.js"),_hooks_useKeyZoom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/hooks/useKeyZoom.js"),_SingleImageViewer_SingleImageViewer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewer.jsx"),_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function storeMapper(classifierStore){return{hasAnnotateTask:classifierStore.subjectViewer.hasAnnotateTask}}var SeparateFrame=function SeparateFrame(_ref){var _ref$enableInteractio=_ref.enableInteractionLayer,enableInteractionLayer=void 0!==_ref$enableInteractio&&_ref$enableInteractio,_ref$enableRotation=_ref.enableRotation,enableRotation=void 0===_ref$enableRotation?DEFAULT_HANDLER:_ref$enableRotation,_ref$frame=_ref.frame,frame=void 0===_ref$frame?0:_ref$frame,_ref$frameUrl=_ref.frameUrl,frameUrl=void 0===_ref$frameUrl?"":_ref$frameUrl,_ref$limitSubjectHeig=_ref.limitSubjectHeight,limitSubjectHeight=void 0!==_ref$limitSubjectHeig&&_ref$limitSubjectHeig,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,subject=_ref.subject,_useSubjectImage=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.Ze)({frame,src:frameUrl,onError,onReady}),img=_useSubjectImage.img,subjectImage=(_useSubjectImage.error,_useSubjectImage.loading,_useSubjectImage.subjectImage),_img$naturalHeight=img.naturalHeight,naturalHeight=void 0===_img$naturalHeight?600:_img$naturalHeight,_img$naturalWidth=img.naturalWidth,naturalWidth=void 0===_img$naturalWidth?800:_img$naturalWidth,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),2),invert=_useState2[0],setInvert=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),2),rotation=_useState4[0],setRotation=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(DEFAULT_HANDLER),2),onPan=_useState6[0],setOnPanState=_useState6[1],_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(DEFAULT_HANDLER),2),onZoom=_useState8[0],setOnZoomState=_useState8[1],_useState0=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),2),separateFrameAnnotate=_useState0[0],setSeparateFrameAnnotate=_useState0[1],_useState10=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),2),separateFrameMove=_useState10[0],setSeparateFrameMove=_useState10[1],handleSetOnPan=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(fn){setOnPanState((function(){return fn}))}),[]),handleSetOnZoom=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(fn){setOnZoomState((function(){return fn}))}),[]);var onKeyZoom=(0,_hooks_useKeyZoom__WEBPACK_IMPORTED_MODULE_4__.o)({panLeft:function panLeft(){onPan(-1,0)},panRight:function panRight(){onPan(1,0)},panUp:function panUp(){onPan(0,-1)},panDown:function panDown(){onPan(0,1)},rotate:rotation,zoomIn:function zoomIn(){onZoom("zoomin",1)},zoomOut:function zoomOut(){onZoom("zoomout",-1)}}).onKeyZoom,separateFrameEnableMove=function separateFrameEnableMove(){setSeparateFrameMove(!0),setSeparateFrameAnnotate(!1)},hasAnnotateTask=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.gy)(storeMapper).hasAnnotateTask;return!hasAnnotateTask&&separateFrameAnnotate&&separateFrameEnableMove(),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{direction:"row",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_SingleImageViewer_SingleImageViewer__WEBPACK_IMPORTED_MODULE_5__.A,{enableInteractionLayer,enableRotation,frame,imgRef:subjectImage,invert,limitSubjectHeight,move:separateFrameMove,naturalHeight,naturalWidth,onKeyDown:onKeyZoom,rotation,setOnPan:handleSetOnPan,setOnZoom:handleSetOnZoom,src:img.src,subject}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{background:{dark:"dark-3",light:"white"},border:{color:{dark:"dark-1",light:"light-3"},side:"all"},direction:"column",height:"fit-content",pad:"8px",style:{width:"3rem"},children:[hasAnnotateTask&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.vB,{separateFrameAnnotate,separateFrameEnableAnnotate:function separateFrameEnableAnnotate(){setSeparateFrameAnnotate(!0),setSeparateFrameMove(!1)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.g3,{separateFrameMove,separateFrameEnableMove}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.Z8,{separateFrameZoomIn:function separateFrameZoomIn(){onZoom("zoomin",1)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.MA,{separateFrameZoomOut:function separateFrameZoomOut(){onZoom("zoomout",-1)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.wi,{separateFrameRotate:function separateFrameRotate(){setRotation((function(prevRotation){return prevRotation-90}))}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.U9,{separateFrameResetView:function separateFrameResetView(){setRotation(0),setInvert(!1),onZoom("zoomto",1)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.zj,{separateFrameInvert:function separateFrameInvert(){setInvert((function(prev){return!prev}))}})]})]})};SeparateFrame.displayName="SeparateFrame",SeparateFrame.propTypes={enableInteractionLayer:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,enableRotation:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,frame:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,frameUrl:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,limitSubjectHeight:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onError:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onReady:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,subject:prop_types__WEBPACK_IMPORTED_MODULE_1___default().shape({locations:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().shape({url:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string}))})};const __WEBPACK_DEFAULT_EXPORT__=SeparateFrame;SeparateFrame.__docgenInfo={description:"",methods:[],displayName:"SeparateFrame",props:{enableInteractionLayer:{defaultValue:{value:"false",computed:!1},description:"Determined per mobx store WorkflowStepStore via SubjectViewer.",type:{name:"bool"},required:!1},enableRotation:{defaultValue:{value:"() => true",computed:!1},description:"Function passed from Subject Viewer Store",type:{name:"func"},required:!1},frame:{defaultValue:{value:"0",computed:!1},description:"Index of the Frame",type:{name:"number"},required:!1},frameUrl:{defaultValue:{value:"''",computed:!1},description:"String of Object.values(subject.locations[this frame index][0])",type:{name:"string"},required:!1},limitSubjectHeight:{defaultValue:{value:"false",computed:!1},description:"Passed from Workflow Store per workflow configuration",type:{name:"bool"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and called if `useSubjectImage()` hook fails.",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and dimensions are added to classification metadata. Called after svg layers successfully load with `defaultFrameSrc`.",type:{name:"func"},required:!1},subject:{description:"Subject Object",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"shape",value:{url:{name:"string",required:!1}}},required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/ViewModeButton/ViewModeButton.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var mobx_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/translations/i18n.jsx"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var SwitchToFlipbook=function SwitchToFlipbook(props){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(grommet_icons__WEBPACK_IMPORTED_MODULE_4__.h,_objectSpread(_objectSpread({viewBox:"0 0 640 512",color:{light:"black",dark:"white"}},props),{},{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("path",{d:"M596.7-0.2H230.3c-22.6,0-41.5,16.9-41.5,37.7v276.6c0,20.8,18.9,37.7,41.5,37.7h366.4c23.3,0,42.3-16.9,42.3-37.7V37.5 C639,16.7,620.9-0.2,596.7-0.2z M286.7,295.3c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3v-37.7c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3L286.7,295.3z M286.7,194.7c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3V157c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H286.7z M286.7,94.1c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3V56.4c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3L286.7,94.1z M498.1,289c0,6.9-6.3,12.6-14.1,12.6H343.1c-7.8,0-14.1-5.6-14.1-12.6v-75.4c0-6.9,6.3-12.6,14.1-12.6H484c7.8,0,14.1,5.6,14.1,12.6V289z M498.1,138.1c0,6.9-6.3,12.6-14.1,12.6H343.1c-7.8,0-14.1-5.6-14.1-12.6V62.7c0-6.9,6.3-12.6,14.1-12.6H484c7.8,0,14.1,5.6,14.1,12.6V138.1z M596.7,295.3c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-6.3-2.8-6.3-6.3v-37.7c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H596.7z M596.7,194.7c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-7-2.8-7-6.3V157c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3V194.7z M596.7,94.1c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-7-2.8-7-6.3V56.4c0-3.5,3.2-6.3,6.3-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H596.7z"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("path",{d:"M158.4,307.7V128H54.9C25.6,128,0,151.4,0,180.4v279.3C0,488.6,24.6,512,54.9,512h402.3c30.3,0,54.9-23.4,54.9-52.4v-75.2h-97.6l21.4,30.6c3.8,5.3,4.1,12.2,0.9,18c-3.2,5.7-9.4,9.2-16.1,9.2H90.4c-6.9,0-12.1-3.7-15.3-9.5c-3.1-5.9-2.5-13,1.6-18.2M107,197.8c20.2,0,36.6,15.6,36.6,34.9s-16.4,34.9-36.6,34.9c-19.2,0-36.6-15.6-36.6-34.9S87.8,197.8,107,197.8z"})]}))};SwitchToFlipbook.displayName="SwitchToFlipbook";var SwitchToSeparateFrames=function SwitchToSeparateFrames(props){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_4__.h,_objectSpread(_objectSpread({viewBox:"0 0 640 512",color:{light:"black",dark:"white"}},props),{},{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("path",{d:"M352 432c0 8.836-7.164 16-16 16H176c-8.838 0-16-7.164-16-16L160 128H48C21.49 128 .0003 149.5 .0003 176v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48L512 384h-160L352 432zM104 439c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9V439zM104 335c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9V335zM104 231c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30C56 196 60.03 192 65 192h30c4.969 0 9 4.031 9 9V231zM408 409c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9v30c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9V409zM591.1 0H239.1C213.5 0 191.1 21.49 191.1 48v256c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48v-256C640 21.49 618.5 0 591.1 0zM303.1 64c17.68 0 32 14.33 32 32s-14.32 32-32 32C286.3 128 271.1 113.7 271.1 96S286.3 64 303.1 64zM574.1 279.6C571.3 284.8 565.9 288 560 288H271.1C265.1 288 260.5 284.6 257.7 279.3C255 273.9 255.5 267.4 259.1 262.6l70-96C332.1 162.4 336.9 160 341.1 160c5.11 0 9.914 2.441 12.93 6.574l22.35 30.66l62.74-94.11C442.1 98.67 447.1 96 453.3 96c5.348 0 10.34 2.672 13.31 7.125l106.7 160C576.6 268 576.9 274.3 574.1 279.6z"})}))};function storeMapper(classifierStore){var _classifierStore$subj=classifierStore.subjectViewer;return{separateFramesView:_classifierStore$subj.separateFramesView,setSeparateFramesView:_classifierStore$subj.setSeparateFramesView}}SwitchToSeparateFrames.displayName="SwitchToSeparateFrames";var ViewModeButton=function ViewModeButton(_ref){var smallScreenStyle=_ref.smallScreenStyle,_useStores=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.gy)(storeMapper),separateFramesView=_useStores.separateFramesView,setSeparateFramesView=_useStores.setSeparateFramesView,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_2__.Bd)("components").t,a11yTitle=t(separateFramesView?"SubjectViewer.SeparateFramesViewer.ViewModeButton.switchToFlipbook":"SubjectViewer.SeparateFramesViewer.ViewModeButton.switchToSeparateFrames");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_1__.$,{a11yTitle,plain:!0,icon:separateFramesView?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SwitchToFlipbook,{onClick:function onClick(){return setSeparateFramesView(!1)},size:smallScreenStyle?"20px":"medium"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SwitchToSeparateFrames,{onClick:function onClick(){return setSeparateFramesView(!0)},size:smallScreenStyle?"20px":"medium"}),style:{width:"fit-content"}})};ViewModeButton.displayName="ViewModeButton";const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_0__.PA)(ViewModeButton);ViewModeButton.__docgenInfo={description:"",methods:[],displayName:"ViewModeButton"}},"./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>locationValidator_locationValidator});var valid_url=__webpack_require__("../../node_modules/valid-url/index.js"),mimeTypeRe=/^[-\w+.]+\/[-\w+.]+$/;const locationValidator_locationValidator=function locationValidator(propValue,key,componentName,location,propFullName){var subjectLocation=propValue[key],mimeType=subjectLocation.mimeType,url=subjectLocation.url;if(!mimeTypeRe.test(mimeType)||!(0,valid_url.isUri)(url))return new Error("Invalid prop `"+propFullName+"` supplied to `"+componentName+"`. Validation failed.")}}}]);