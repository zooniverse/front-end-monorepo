/*! For license information please see 4298.ef03c7bb.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[4298],{"./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>SubjectGroupViewer_SubjectGroupViewer});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),SVGContext=__webpack_require__("./src/plugins/drawingTools/shared/SVGContext.js"),components=__webpack_require__("./src/plugins/drawingTools/components/index.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),MovableModal=__webpack_require__("../lib-react-components/dist/esm/MovableModal/MovableModal.js"),PrimaryButton=__webpack_require__("../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),hooks=__webpack_require__("./src/hooks/index.js"),tasks=__webpack_require__("./src/plugins/tasks/index.js"),SaveButton=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/InteractionLayer/components/SubTaskPopup/components/SaveButton/index.js"),ConfirmModal=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/InteractionLayer/components/SubTaskPopup/components/ConfirmModal/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function SubjectGroupSubTaskPopup(_ref){var cellIndex=_ref.cellIndex,cellBounds=_ref.cellBounds,annotation=_ref.annotation,currentTask=_ref.currentTask,_ref$onClose=_ref.onClose,onClose=void 0===_ref$onClose?DEFAULT_HANDLER:_ref$onClose,_ref$onSave=_ref.onSave,onSave=void 0===_ref$onSave?DEFAULT_HANDLER:_ref$onSave,_ref$onCancelSelectio=_ref.onCancelSelection,onCancelSelection=void 0===_ref$onCancelSelectio?DEFAULT_HANDLER:_ref$onCancelSelectio,t=(0,i18n.Bd)("components").t,_useClientRect2=_slicedToArray((0,hooks.F)(),2),dimensions=_useClientRect2[0],measuredContentRef=_useClientRect2[1],_useState2=_slicedToArray((0,react.useState)(null),2),position=_useState2[0],setPosition=_useState2[1],_useState4=_slicedToArray((0,react.useState)("pending"),2),confirmationState=_useState4[0],setConfirm=_useState4[1],_useState6=_slicedToArray((0,react.useState)({width:window.innerWidth,height:window.innerHeight}),2),viewportSize=_useState6[0],setViewportSize=_useState6[1];(0,react.useEffect)((function(){var handleResize=function handleResize(){setViewportSize({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",handleResize),function(){return window.removeEventListener("resize",handleResize)}}),[]);var subtaskDefinitions=(null==currentTask?void 0:currentTask.subtasks)||[],currentCell=null==annotation?void 0:annotation.getCellByIndex(cellIndex);if(!subtaskDefinitions||0===subtaskDefinitions.length||!currentCell)return null;function normalizeAnswerLabel(answer){return"string"==typeof answer?answer:(null==answer?void 0:answer.label)||(null==answer?void 0:answer.value)||String(answer)}var subtasks=subtaskDefinitions.map((function(subtaskDef,index){try{var TaskModel=(tasks[subtaskDef.type]||{}).TaskModel;if(TaskModel){var taskSnapshot={taskKey:"".concat(currentTask.taskKey,".cell.").concat(cellIndex,".subtask.").concat(index),type:subtaskDef.type,required:subtaskDef.required||!1,strings:{question:subtaskDef.question||subtaskDef.instruction||"Select an option",instruction:subtaskDef.instruction||subtaskDef.question||"",help:subtaskDef.help||""}};return subtaskDef.answers&&Array.isArray(subtaskDef.answers)&&(taskSnapshot.answers=subtaskDef.answers.map((function(answer){return{label:normalizeAnswerLabel(answer)}})).filter((function(answer){return answer.label})),subtaskDef.answers.forEach((function(answer,answerIndex){taskSnapshot.strings["answers.".concat(answerIndex,".label")]=normalizeAnswerLabel(answer)}))),TaskModel.create(taskSnapshot)}}catch(error){console.warn("Could not create Task for subtask type ".concat(subtaskDef.type,":"),error)}return null})).filter(Boolean);function getAnnotationForTask(task){return currentCell.annotation(task)}function isTaskComplete(task){var annotation=getAnnotationForTask(task);return!!annotation&&annotation.isComplete}function handleClose(event){null==event||event.preventDefault(),null==event||event.stopPropagation(),!function areAllRequiredTasksComplete(){return subtasks.every((function(subtask){return!("true"===subtask.required||!0===subtask.required)||isTaskComplete(subtask)}))}()?setConfirm("confirming"):(onSave({}),onClose())}var minHeight=(null==dimensions?void 0:dimensions.height)||200,minWidth=(null==dimensions?void 0:dimensions.width)||350,disabled="confirming"===confirmationState;(0,react.useEffect)((function(){var x=cellBounds.x+cellBounds.width+10,y=cellBounds.y,maxX=viewportSize.width-minWidth-10,maxY=viewportSize.height-minHeight-10;setPosition({x:Math.max(10,Math.min(x,maxX)),y:Math.max(10,Math.min(y,maxY))})}),[cellBounds,minWidth,minHeight,viewportSize]);var rndProps={cancel:".element-that-ignores-drag-actions",minHeight,minWidth,onDragStop:function onDragStop(_,data){var x=data.x,y=data.y;setPosition({x,y})},onResize:function onResize(_,__,___,____,newPosition){setPosition(newPosition)},position};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(MovableModal.A,{ref:measuredContentRef,active:!0,closeFn:handleClose,headingBackground:"transparent",onWheel:function onWheel(event){event.stopPropagation()},pad:{bottom:"medium",left:"medium",right:"medium"},plain:!0,position:"top-left",rndProps,title:"Cell ".concat(cellIndex+1," Details"),titleColor:"",children:(0,jsx_runtime.jsx)(Box.a,{className:"element-that-ignores-drag-actions",gap:"small",children:(0,jsx_runtime.jsxs)("form",{onSubmit:handleClose,children:[subtasks.map((function(subtask,index){var annotation=getAnnotationForTask(subtask);annotation||(annotation=function createAnnotationForTask(task){return currentCell.addAnnotation(task)}(subtask));var taskType=subtask.type;"dropdown-simple"===taskType&&(taskType="dropdownSimple");var TaskComponent=(tasks[taskType]||{}).TaskComponent;if(annotation&&TaskComponent){var requiredEmphasis=("true"===subtask.required||!0===subtask.required)&&!isTaskComplete(subtask)&&"closed"===confirmationState;return(0,jsx_runtime.jsxs)(Box.a,{border:!!requiredEmphasis&&{size:"small",color:"tomato"},overflow:"auto",pad:{horizontal:"2px"},children:[(0,jsx_runtime.jsx)(TaskComponent,{annotation,autoFocus:0===index,disabled,task:subtask}),requiredEmphasis&&(0,jsx_runtime.jsx)(Paragraph.f,{children:(0,jsx_runtime.jsx)("strong",{children:t("SubjectViewer.InteractionLayer.SubTaskPopup.required")})})]},annotation.id)}return(0,jsx_runtime.jsx)(Box.a,{pad:"none",children:(0,jsx_runtime.jsx)(Paragraph.f,{children:t("SubjectViewer.InteractionLayer.SubTaskPopup.notRender")})},"".concat(index,"-").concat(null==subtask?void 0:subtask.type))})),(0,jsx_runtime.jsx)(SaveButton.A,{disabled,onClick:handleClose}),(0,jsx_runtime.jsx)(PrimaryButton.A,{label:"Unselect",onClick:function handleCancelSelection(){subtasks.forEach((function(subtask){var annotation=getAnnotationForTask(subtask);annotation&&currentCell.removeAnnotation(annotation)})),onCancelSelection(),onClose()},disabled,color:"teal",margin:{top:"small"}})]})})}),"confirming"===confirmationState&&(0,jsx_runtime.jsx)(ConfirmModal.A,{onClose:function onCloseConfirm(){setConfirm("closed")},onDelete:function deleteCellData(){setConfirm("closed"),subtasks.forEach((function(subtask){var annotation=getAnnotationForTask(subtask);annotation&&currentCell.removeAnnotation(annotation)})),onSave({}),onClose()}})]})}SubjectGroupSubTaskPopup.propTypes={cellIndex:prop_types.number.isRequired,cellBounds:(0,prop_types.shape)({x:prop_types.number,y:prop_types.number,width:prop_types.number,height:prop_types.number}).isRequired,annotation:(0,prop_types.shape)({getCellByIndex:prop_types.func}),currentTask:(0,prop_types.shape)({subtasks:prop_types.array}),onClose:prop_types.func.isRequired,onSave:prop_types.func.isRequired,onCancelSelection:prop_types.func};const components_SubjectGroupSubTaskPopup=SubjectGroupSubTaskPopup;function SGVGridCell_slicedToArray(r,e){return function SGVGridCell_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function SGVGridCell_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function SGVGridCell_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return SGVGridCell_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?SGVGridCell_arrayLikeToArray(r,a):void 0}}(r,e)||function SGVGridCell_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SGVGridCell_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}SubjectGroupSubTaskPopup.__docgenInfo={description:"",methods:[],displayName:"SubjectGroupSubTaskPopup",props:{onClose:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onSave:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onCancelSelection:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},cellIndex:{description:"",type:{name:"number"},required:!0},cellBounds:{description:"",type:{name:"shape",value:{x:{name:"number",required:!1},y:{name:"number",required:!1},width:{name:"number",required:!1},height:{name:"number",required:!1}}},required:!0},annotation:{description:"",type:{name:"shape",value:{getCellByIndex:{name:"func",required:!1}}},required:!1},currentTask:{description:"",type:{name:"shape",value:{subtasks:{name:"array",required:!1}}},required:!1}}};var SGVGridCell_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1},DraggableImage=(0,components.kZ)((0,styled_components_browser_esm.default)("image").withConfig({shouldForwardProp:function shouldForwardProp(prop){return"dragging"!==prop}}).withConfig({displayName:"SGVGridCell__DraggableImage",componentId:"sc-1unwdfp-0"})(["cursor:grab;"])),DraggableRect=(0,components.kZ)((0,styled_components_browser_esm.default)("rect").withConfig({shouldForwardProp:function shouldForwardProp(prop){return"dragging"!==prop}}).withConfig({displayName:"SGVGridCell__DraggableRect",componentId:"sc-1unwdfp-1"})(["cursor:grab;"])),ClickableRect=(0,styled_components_browser_esm.default)("rect").withConfig({shouldForwardProp:function shouldForwardProp(prop){return"cellStyle"!==prop}}).withConfig({displayName:"SGVGridCell__ClickableRect",componentId:"sc-1unwdfp-2"})(["cursor:pointer;&:focus{","}}"],(function(props){return(0,styled_components_browser_esm.css)(["outline:",";"],props.cellStyle.focusOutline)}));function SGVGridCell(props){var _props$image=props.image,image=void 0===_props$image?void 0:_props$image,_props$index=props.index,index=void 0===_props$index?0:_props$index,_props$subjectId=props.subjectId,subjectId=void 0===_props$subjectId?"":_props$subjectId,_props$dragMove=props.dragMove,dragMove=void 0===_props$dragMove?SGVGridCell_DEFAULT_HANDLER:_props$dragMove,_props$cellWidth=props.cellWidth,cellWidth=void 0===_props$cellWidth?200:_props$cellWidth,_props$cellHeight=props.cellHeight,cellHeight=void 0===_props$cellHeight?200:_props$cellHeight,_props$cellStyle=props.cellStyle,cellStyle=void 0===_props$cellStyle?{}:_props$cellStyle,_props$gridRows=props.gridRows,gridRows=void 0===_props$gridRows?1:_props$gridRows,_props$gridColumns=props.gridColumns,gridColumns=void 0===_props$gridColumns?1:_props$gridColumns,_props$panX=props.panX,panX=void 0===_props$panX?0:_props$panX,_props$panY=props.panY,panY=void 0===_props$panY?0:_props$panY,_props$zoom=props.zoom,zoom=void 0===_props$zoom?1:_props$zoom,_props$annotation=props.annotation,annotation=void 0===_props$annotation?void 0:_props$annotation,_props$annotationMode=props.annotationMode,annotationMode=void 0===_props$annotationMode||_props$annotationMode,_props$cellAnnotated=props.cellAnnotated,cellAnnotated=void 0!==_props$cellAnnotated&&_props$cellAnnotated,currentTask=props.currentTask,_useState2=SGVGridCell_slicedToArray((0,react.useState)(cellAnnotated),2),checked=_useState2[0],setChecked=_useState2[1],_useState4=SGVGridCell_slicedToArray((0,react.useState)(!1),2),showSubTaskPopup=_useState4[0],setShowSubTaskPopup=_useState4[1],row=Math.floor(index/gridColumns),col=index%gridColumns,cellXOffset=col*cellWidth,cellYOffset=row*cellHeight;if(!image||!image.src||!image.naturalHeight||!image.naturalWidth||row<0||row>=gridRows||col<0||col>=gridColumns||!cellWidth||!cellHeight||!gridColumns||!gridRows)return null;var fitRatio=Math.max(image.naturalWidth/cellWidth,image.naturalHeight/cellHeight),imageHeight=image.naturalHeight/fitRatio,imageWidth=image.naturalWidth/fitRatio,imageX=(cellWidth-imageWidth)/2,imageY=(cellHeight-imageHeight)/2,clipPathID="subjectGroupViewer-clipPath-".concat(index);function toggleCellAnnotation(){var _currentTask$hasSubta;if(annotationMode&&annotation&&currentTask){var hasSubtasks=null==currentTask||null===(_currentTask$hasSubta=currentTask.hasSubtasks)||void 0===_currentTask$hasSubta?void 0:_currentTask$hasSubta.call(currentTask);annotation.getCellByIndex(index)?hasSubtasks?setShowSubTaskPopup(!0):(annotation.removeCell(index),setChecked(!1),setShowSubTaskPopup(!1)):(setChecked(!0),annotation.addCell(index,subjectId),hasSubtasks&&setShowSubTaskPopup(!0))}}var addOriginOffset="translate(".concat(imageWidth/2,", ").concat(imageHeight/2,")"),removeOriginOffset="translate(".concat(-imageWidth/2,", ").concat(-imageHeight/2,")"),imageTransform="".concat(addOriginOffset," scale(").concat(zoom,") ").concat(removeOriginOffset," translate(").concat(panX,", ").concat(panY,")"),cellBounds={x:cellXOffset,y:cellYOffset,width:cellWidth,height:cellHeight};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("g",{transform:"translate(".concat(cellXOffset,", ").concat(cellYOffset,")"),children:[(0,jsx_runtime.jsx)("clipPath",{id:clipPathID,children:(0,jsx_runtime.jsx)("rect",{width:cellWidth,height:cellHeight})}),(0,jsx_runtime.jsx)(DraggableRect,{fill:cellStyle.background,width:cellWidth,height:cellHeight,dragMove}),(0,jsx_runtime.jsxs)("g",{clipPath:"url(#".concat(clipPathID,")"),children:[(0,jsx_runtime.jsx)(DraggableImage,{dragMove,height:imageHeight,width:imageWidth,href:image.src,x:imageX,y:imageY,transform:imageTransform}),(0,jsx_runtime.jsx)(DraggableRect,{fill:checked?cellStyle.overlay:"none",stroke:checked?cellStyle.selectedStroke:cellStyle.stroke,strokeWidth:checked?cellStyle.selectedStrokeWidth:cellStyle.strokeWidth,width:cellWidth,height:cellHeight}),annotationMode&&(0,jsx_runtime.jsx)(ClickableRect,{tabIndex:0,role:"checkbox","aria-checked":checked,"aria-label":"Cell at row ".concat(row," column ").concat(col),fill:"transparent",cellStyle,x:2,y:2,width:cellWidth-4,height:cellHeight-4,onClick:function onClick(e){toggleCellAnnotation(),e.preventDefault()},onKeyDown:function onKeyDown(e){"Enter"===e.key&&(toggleCellAnnotation(),e.preventDefault())}})]})]}),showSubTaskPopup&&checked&&(0,jsx_runtime.jsx)(components_SubjectGroupSubTaskPopup,{cellIndex:index,cellBounds,annotation,currentTask,onClose:function handleSubTaskClose(){setShowSubTaskPopup(!1)},onSave:function handleSubTaskSave(){setShowSubTaskPopup(!1)},onCancelSelection:function handleCancelSelection(){annotation.removeCell(index),setChecked(!1),setShowSubTaskPopup(!1)}})]})}SGVGridCell.propTypes={image:prop_types.object,index:prop_types.number,subjectId:prop_types.string,dragMove:prop_types.func,cellWidth:prop_types.number,cellHeight:prop_types.number,cellStyle:prop_types.object,gridRows:prop_types.number,gridColumns:prop_types.number,panX:prop_types.number,panY:prop_types.number,zoom:prop_types.number,annotation:(0,prop_types.shape)({getCellByIndex:prop_types.func,addCell:prop_types.func,removeCell:prop_types.func}),annotationMode:prop_types.bool,cellAnnotated:prop_types.bool,currentTask:(0,prop_types.shape)({hasSubtasks:prop_types.func})};const SGVGridCell_SGVGridCell=SGVGridCell;SGVGridCell.__docgenInfo={description:"",methods:[],displayName:"SGVGridCell",props:{image:{description:"",type:{name:"custom",raw:"object"},required:!1},index:{description:"",type:{name:"custom",raw:"number"},required:!1},subjectId:{description:"",type:{name:"custom",raw:"string"},required:!1},dragMove:{description:"",type:{name:"custom",raw:"func"},required:!1},cellWidth:{description:"",type:{name:"custom",raw:"number"},required:!1},cellHeight:{description:"",type:{name:"custom",raw:"number"},required:!1},cellStyle:{description:"",type:{name:"custom",raw:"object"},required:!1},gridRows:{description:"",type:{name:"custom",raw:"number"},required:!1},gridColumns:{description:"",type:{name:"custom",raw:"number"},required:!1},panX:{description:"",type:{name:"custom",raw:"number"},required:!1},panY:{description:"",type:{name:"custom",raw:"number"},required:!1},zoom:{description:"",type:{name:"custom",raw:"number"},required:!1},annotation:{description:"",type:{name:"shape",value:{getCellByIndex:{name:"func",required:!1},addCell:{name:"func",required:!1},removeCell:{name:"func",required:!1}}},required:!1},annotationMode:{description:"",type:{name:"custom",raw:"bool"},required:!1},cellAnnotated:{description:"",type:{name:"custom",raw:"bool"},required:!1},currentTask:{description:"",type:{name:"shape",value:{hasSubtasks:{name:"func",required:!1}}},required:!1}}};var DEFAULT_CELL_STYLE={},DEFAULT_IMAGES=[],SubjectGroupViewer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1},DEFAULT_SUBJECT_IDS=[],Container=styled_components_browser_esm.default.div.withConfig({shouldForwardProp:function shouldForwardProp(prop){return!["gridMaxWidth","gridMaxHeight"].includes(prop)}}).withConfig({displayName:"SubjectGroupViewer__Container",componentId:"sc-xdc4t-0"})(["overflow:hidden;height:100%;width:100%;"," "," animation:fadein 1s 0s forwards;@keyframes fadein{from{opacity:0;}to{opacity:100%;}}"],(function(props){return props.gridMaxWidth?(0,styled_components_browser_esm.css)(["max-width:",";"],props.gridMaxWidth):""}),(function(props){return props.gridMaxHeight?(0,styled_components_browser_esm.css)(["max-height:",";"],props.gridMaxHeight):""})),SVG=styled_components_browser_esm.default.svg.withConfig({shouldForwardProp:function shouldForwardProp(prop){return!["gridMaxWidth","gridMaxHeight"].includes(prop)}}).withConfig({displayName:"SubjectGroupViewer__SVG",componentId:"sc-xdc4t-1"})(["width:100%;height:100%;"," ",""],(function(props){return props.gridMaxWidth?(0,styled_components_browser_esm.css)(["max-width:",";"],props.gridMaxWidth):""}),(function(props){return props.gridMaxHeight?(0,styled_components_browser_esm.css)(["max-height:",";"],props.gridMaxHeight):""})),SubjectGroupViewer=(0,react.forwardRef)((function SubjectGroupViewer(_ref,ref){var _ref$images=_ref.images,images=void 0===_ref$images?DEFAULT_IMAGES:_ref$images,_ref$subjectIds=_ref.subjectIds,subjectIds=void 0===_ref$subjectIds?DEFAULT_SUBJECT_IDS:_ref$subjectIds,_ref$dragMove=_ref.dragMove,dragMove=void 0===_ref$dragMove?SubjectGroupViewer_DEFAULT_HANDLER:_ref$dragMove,_ref$onKeyDown=_ref.onKeyDown,onKeyDown=void 0===_ref$onKeyDown?SubjectGroupViewer_DEFAULT_HANDLER:_ref$onKeyDown,_ref$cellWidth=_ref.cellWidth,cellWidth=void 0===_ref$cellWidth?200:_ref$cellWidth,_ref$cellHeight=_ref.cellHeight,cellHeight=void 0===_ref$cellHeight?200:_ref$cellHeight,_ref$cellStyle=_ref.cellStyle,cellStyle=void 0===_ref$cellStyle?DEFAULT_CELL_STYLE:_ref$cellStyle,_ref$gridRows=_ref.gridRows,gridRows=void 0===_ref$gridRows?1:_ref$gridRows,_ref$gridColumns=_ref.gridColumns,gridColumns=void 0===_ref$gridColumns?1:_ref$gridColumns,_ref$gridMaxWidth=_ref.gridMaxWidth,gridMaxWidth=void 0===_ref$gridMaxWidth?"":_ref$gridMaxWidth,_ref$gridMaxHeight=_ref.gridMaxHeight,gridMaxHeight=void 0===_ref$gridMaxHeight?"":_ref$gridMaxHeight,width=_ref.width,height=_ref.height,_ref$panX=_ref.panX,panX=void 0===_ref$panX?0:_ref$panX,_ref$panY=_ref.panY,panY=void 0===_ref$panY?0:_ref$panY,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?1:_ref$zoom,annotation=_ref.annotation,_ref$currentTask=_ref.currentTask,currentTask=void 0===_ref$currentTask?null:_ref$currentTask,_ref$interactionMode=_ref.interactionMode,interactionMode=void 0===_ref$interactionMode?"move":_ref$interactionMode,_ref$isCurrentTaskVal=_ref.isCurrentTaskValidForAnnotation,isCurrentTaskValidForAnnotation=void 0!==_ref$isCurrentTaskVal&&_ref$isCurrentTaskVal,transformLayer=(0,react.useRef)(),canvas=transformLayer.current,annotatedValues=null!=annotation&&annotation.value?annotation.value.map((function(cell){return cell.index})):[],annotationMode="annotate"===interactionMode&&isCurrentTaskValidForAnnotation;return(0,jsx_runtime.jsx)(SVGContext.A.Provider,{value:{canvas},children:(0,jsx_runtime.jsx)(Container,{gridMaxWidth,gridMaxHeight,children:(0,jsx_runtime.jsx)(SVG,{ref,focusable:!0,onKeyDown,tabIndex:0,viewBox:"0 0 ".concat(width," ").concat(height),gridMaxWidth,gridMaxHeight,xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("g",{ref:transformLayer,children:images.map((function(image,index){return(0,jsx_runtime.jsx)(SGVGridCell_SGVGridCell,{image,index,subjectId:subjectIds[index],dragMove,cellWidth,cellHeight,cellStyle,gridRows,gridColumns,panX,panY,zoom,annotation,annotationMode,cellAnnotated:annotatedValues.includes(index),currentTask},"sgv-grid-cell-".concat(index))}))})})})})}));SubjectGroupViewer.propTypes={images:prop_types.array,subjectIds:(0,prop_types.arrayOf)(prop_types.string),dragMove:prop_types.func,onKeyDown:prop_types.func,cellWidth:prop_types.number,cellHeight:prop_types.number,cellStyle:prop_types.object,gridRows:prop_types.number,gridColumns:prop_types.number,gridMaxWidth:prop_types.string,gridMaxHeight:prop_types.string,width:prop_types.number.isRequired,height:prop_types.number.isRequired,panX:prop_types.number,panY:prop_types.number,zoom:prop_types.number,annotation:(0,prop_types.shape)({value:prop_types.array,getCellByIndex:prop_types.func,addCell:prop_types.func,removeCell:prop_types.func}),currentTask:prop_types.object,interactionMode:(0,prop_types.oneOf)(["annotate","move"]),isCurrentTaskValidForAnnotation:prop_types.bool};const SubjectGroupViewer_SubjectGroupViewer=SubjectGroupViewer;SubjectGroupViewer.__docgenInfo={description:"",methods:[],displayName:"SubjectGroupViewer",props:{images:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"custom",raw:"array"},required:!1},subjectIds:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},dragMove:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onKeyDown:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},cellWidth:{defaultValue:{value:"200",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},cellHeight:{defaultValue:{value:"200",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},cellStyle:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"custom",raw:"object"},required:!1},gridRows:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},gridColumns:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},gridMaxWidth:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},gridMaxHeight:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},panX:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},panY:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},zoom:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},currentTask:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"custom",raw:"object"},required:!1},interactionMode:{defaultValue:{value:"'move'",computed:!1},description:"",type:{name:"enum",value:[{value:"'annotate'",computed:!1},{value:"'move'",computed:!1}]},required:!1},isCurrentTaskValidForAnnotation:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},width:{description:"",type:{name:"number"},required:!0},height:{description:"",type:{name:"number"},required:!0},annotation:{description:"",type:{name:"shape",value:{value:{name:"array",required:!1},getCellByIndex:{name:"func",required:!1},addCell:{name:"func",required:!1},removeCell:{name:"func",required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewerContainer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__),mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_helpers__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/helpers/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/hooks/index.js"),_SubjectGroupViewer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SubjectGroupViewer/SubjectGroupViewer.jsx"),_helpers_locationValidator__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _regenerator(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var c=n&&n.prototype instanceof Generator?n:Generator,u=Object.create(c.prototype);return _regeneratorDefine2(u,"_invoke",function(r,n,o){var i,c,u,f=0,p=o||[],y=!1,G={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function d(t,r){return i=t,c=0,u=e,G.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!y&&f&&!o&&t<p.length;t++){var o,i=p[t],d=G.p,l=i[2];r>3?(o=l===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,G.v=n,G.n=i[1]):d<l&&(o=r<3||i[0]>n||n>l)&&(i[4]=r,i[5]=n,G.n=l,c=0))}if(o||r>1)return a;throw y=!0,n}return function(o,p,l){if(f>1)throw TypeError("Generator is already running");for(y&&1===p&&d(p,l),c=p,u=l;(t=c<2?e:u)||!y;){i||(c?c<3?(c>1&&(G.n=-1),d(c,u)):G.n=u:G.v=u);try{if(f=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(y=G.n<0)?u:r.call(n,G))!==a)break}catch(t){i=e,c=1,u=t}finally{f=1}}return{value:t,done:y}}}(r,o,i),!0),u}var a={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}t=Object.getPrototypeOf;var c=[][n]?t(t([][n]())):(_regeneratorDefine2(t={},n,(function(){return this})),t),u=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(c);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,_regeneratorDefine2(e,o,"GeneratorFunction")),e.prototype=Object.create(u),e}return GeneratorFunction.prototype=GeneratorFunctionPrototype,_regeneratorDefine2(u,"constructor",GeneratorFunctionPrototype),_regeneratorDefine2(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName="GeneratorFunction",_regeneratorDefine2(GeneratorFunctionPrototype,o,"GeneratorFunction"),_regeneratorDefine2(u),_regeneratorDefine2(u,o,"Generator"),_regeneratorDefine2(u,n,(function(){return this})),_regeneratorDefine2(u,"toString",(function(){return"[object Generator]"})),(_regenerator=function _regenerator(){return{w:i,m:f}})()}function _regeneratorDefine2(e,r,n,t){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}_regeneratorDefine2=function _regeneratorDefine(e,r,n,t){function o(r,n){_regeneratorDefine2(e,r,(function(e){return this._invoke(r,n,e)}))}r?i?i(e,r,{value:n,enumerable:!t,configurable:!t,writable:!t}):e[r]=n:(o("next",0),o("throw",1),o("return",2))},_regeneratorDefine2(e,r,n,t)}function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DEFAULT_CELL_STYLE={stroke:"#fff",strokeWidth:"1",overlay:"rgba(41,103,255,0.3)",selectedStroke:"#2967FF",selectedStrokeWidth:"8",focusOutline:"2px dashed rgba(255, 255, 255, 0.5)",background:"#000"},DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function SubjectGroupViewerContainer(_ref){var annotation=_ref.annotation,cellWidth=_ref.cellWidth,cellHeight=_ref.cellHeight,cellStyle=_ref.cellStyle,currentTask=_ref.currentTask,gridColumns=_ref.gridColumns,gridRows=_ref.gridRows,gridMaxWidth=_ref.gridMaxWidth,gridMaxHeight=_ref.gridMaxHeight,_ref$ImageObject=_ref.ImageObject,ImageObject=void 0===_ref$ImageObject?window.Image:_ref$ImageObject,_ref$interactionMode=_ref.interactionMode,interactionMode=void 0===_ref$interactionMode?"annotate":_ref$interactionMode,isCurrentTaskValidForAnnotation=_ref.isCurrentTaskValidForAnnotation,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,_ref$setOnPan=_ref.setOnPan,setOnPan=void 0===_ref$setOnPan?DEFAULT_HANDLER:_ref$setOnPan,_ref$setOnZoom=_ref.setOnZoom,setOnZoom=void 0===_ref$setOnZoom?DEFAULT_HANDLER:_ref$setOnZoom,_ref$subject=_ref.subject,subject=void 0===_ref$subject?void 0:_ref$subject,onKeyZoom=(0,_hooks__WEBPACK_IMPORTED_MODULE_5__.KG)().onKeyZoom,groupViewer=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(),scrollContainer=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(),_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]),2),images=_useState2[0],setImages=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),2),panX=_useState4[0],setPanX=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),2),panY=_useState6[0],setPanY=_useState6[1],_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(1),2),zoom=_useState8[0],setZoom=_useState8[1];function onUnmount(){var _scrollContainer$curr;setOnPan((function(){return!0})),setOnZoom((function(){return!0})),null===(_scrollContainer$curr=scrollContainer.current)||void 0===_scrollContainer$curr||_scrollContainer$curr.removeEventListener("wheel",onWheel)}function fetchImage(url){return new Promise((function(resolve,reject){var img=new ImageObject;return img.onload=function(){return resolve(img)},img.onerror=reject,img.src=url,img}))}function preload(){return _preload.apply(this,arguments)}function _preload(){return(_preload=_asyncToGenerator(_regenerator().m((function _callee(){var imageUrls,_images;return _regenerator().w((function(_context){for(;;)switch(_context.n){case 0:if(null==subject||!subject.locations){_context.n=2;break}return imageUrls=subject.locations.map((function(l){return l.url})),_context.n=1,Promise.all(imageUrls.map(fetchImage));case 1:_images=_context.v,setImages(_images);case 2:return _context.a(2)}}),_callee)})))).apply(this,arguments)}function getGridSize(){var svg=groupViewer.current||{},_ref2=svg.getBoundingClientRect&&svg.getBoundingClientRect()||{},clientWidth=_ref2.width;return{clientHeight:_ref2.height,clientWidth,gridHeight:gridRows*cellHeight,gridWidth:gridColumns*cellWidth}}function _onLoad(){return(_onLoad=_asyncToGenerator(_regenerator().m((function _callee2(){var _getGridSize,clientHeight,clientWidth,naturalHeight,naturalWidth,_t;return _regenerator().w((function(_context2){for(;;)switch(_context2.p=_context2.n){case 0:return _context2.p=0,_context2.n=1,preload();case 1:_getGridSize=getGridSize(),clientHeight=_getGridSize.clientHeight,clientWidth=_getGridSize.clientWidth,naturalHeight=_getGridSize.gridHeight,naturalWidth=_getGridSize.gridWidth,onReady({target:{clientHeight,clientWidth,naturalHeight,naturalWidth}}),_context2.n=3;break;case 2:_context2.p=2,_t=_context2.v,console.error(_t),onError(_t);case 3:return _context2.a(2)}}),_callee2,null,[[0,2]])})))).apply(this,arguments)}function onDrag(event,difference){doPan(difference.x,difference.y)}function onPanViaExternalControls(dx,dy){var ARBITRARY_FACTOR=Math.min(cellWidth,cellHeight)/20;doPan(dx*ARBITRARY_FACTOR,dy*ARBITRARY_FACTOR)}function doPan(dx,dy){setPanX((function(_panX){return _panX+dx})),setPanY((function(_panY){return _panY+dy}))}function onZoomViaExternalControls(type){doZoom(type)}function doZoom(type){switch(type){case"zoomin":setZoom((function(_zoom){return Math.min(_zoom+.1,4)}));break;case"zoomout":setZoom((function(_zoom){return Math.max(_zoom-.1,1)}));break;case"zoomto":setZoom(1),setPanX(0),setPanY(0)}}function onWheel(event){doZoom(event.deltaY<0?"zoomout":"zoomin"),function preventDefault(e){e.preventDefault()}(event)}(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function onMount(){var _scrollContainer$curr2;return function onLoad(){return _onLoad.apply(this,arguments)}(),setOnPan(onPanViaExternalControls),setOnZoom(onZoomViaExternalControls),null===(_scrollContainer$curr2=scrollContainer.current)||void 0===_scrollContainer$curr2||_scrollContainer$curr2.addEventListener("wheel",onWheel),onUnmount}),[]);var gridWidth=gridColumns*cellWidth,gridHeight=gridRows*cellHeight;return loadingState===_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{children:"Something went wrong."}):subject&&subject.locations&&subject.locations.length>0&&cellHeight>0&&cellWidth>0&&gridColumns>0&&gridRows>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div",{ref:scrollContainer,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_SubjectGroupViewer__WEBPACK_IMPORTED_MODULE_6__.A,{ref:groupViewer,images,subjectIds:subject.subjectIds,dragMove:function dragMove(event,difference){onDrag&&onDrag(event,difference)},onKeyDown:onKeyZoom,cellWidth,cellHeight,cellStyle,gridRows,gridColumns,gridMaxWidth,gridMaxHeight,width:gridWidth,height:gridHeight,panX,panY,zoom,annotation,currentTask,interactionMode,isCurrentTaskValidForAnnotation})}):null}SubjectGroupViewerContainer.displayName="SubjectGroupViewerContainer",SubjectGroupViewerContainer.propTypes={subject:prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({locations:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(_helpers_locationValidator__WEBPACK_IMPORTED_MODULE_7__.A),subjectIds:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().string)}),loadingState:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,onError:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,onReady:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,interactionMode:prop_types__WEBPACK_IMPORTED_MODULE_3___default().oneOf(["annotate","move"]),setOnPan:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,setOnZoom:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,_helpers__WEBPACK_IMPORTED_MODULE_4__.Lg)(SubjectGroupViewerContainer,(function storeMapper(classifierStore){var _activeWorkflow$confi,_classifierStore$subj=classifierStore.subjectViewer,interactionMode=_classifierStore$subj.interactionMode,setOnPan=_classifierStore$subj.setOnPan,setOnZoom=_classifierStore$subj.setOnZoom,activeWorkflow=classifierStore.workflows.active,viewerConfig=(null==activeWorkflow||null===(_activeWorkflow$confi=activeWorkflow.configuration)||void 0===_activeWorkflow$confi?void 0:_activeWorkflow$confi.subject_viewer_config)||{},cellWidth=viewerConfig.cell_width||1200,cellHeight=viewerConfig.cell_height||1e3,cellStyle=viewerConfig.cell_style||DEFAULT_CELL_STYLE,gridColumns=viewerConfig.grid_columns||3,gridRows=viewerConfig.grid_rows||3,gridMaxWidth=viewerConfig.grid_max_width||"",gridMaxHeight=viewerConfig.grid_max_height||"",currentTask=_slicedToArray(classifierStore.workflowSteps.activeStepTasks.filter((function(task){return"subjectGroupComparison"===task.type})),1)[0],classification=classifierStore.classifications.active,isCurrentTaskValidForAnnotation=!!currentTask;return{cellWidth,cellHeight,cellStyle,gridColumns,gridRows,gridMaxWidth,gridMaxHeight,interactionMode,setOnZoom,setOnPan,annotation:(classification?Array.from(classification.annotations.values()):[]).find((function(item){return"SubjectGroupComparisonAnnotation"===(0,mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.Pw)(item).name})),currentTask,isCurrentTaskValidForAnnotation}}));SubjectGroupViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SubjectGroupViewerContainer",props:{ImageObject:{defaultValue:{value:"window.Image",computed:!0},required:!1},interactionMode:{defaultValue:{value:"'annotate'",computed:!1},description:"",type:{name:"enum",value:[{value:"'annotate'",computed:!1},{value:"'move'",computed:!1}]},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnPan:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnZoom:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1},subjectIds:{name:"arrayOf",value:{name:"string"},required:!1}}},required:!1}}}}}]);