"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[1426],{"../lib-react-components/dist/esm/PlainButton/PlainButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_SpacedText__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_excluded=["as","className","disabled","href","onClick","labelSize","text","color"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledPlainButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.default)(grommet__WEBPACK_IMPORTED_MODULE_0__.$).withConfig({displayName:"PlainButton__StyledPlainButton",componentId:"sc-4x2flx-0"})(["&:focus,&:hover{text-decoration:underline;}&:disabled{cursor:not-allowed;text-decoration:none;}"]),defaultColor={dark:"accent-1",light:"neutral-1"};function PlainButton(_ref){var{as="",className="",disabled=!1,href="",onClick=()=>{},labelSize="medium",text="",color=defaultColor}=_ref,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledPlainButton,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({as,className,disabled,href:disabled?"":href,gap:"xxsmall",label:text?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_SpacedText__WEBPACK_IMPORTED_MODULE_3__.A,{color,size:labelSize,children:text}):null,onClick,plain:!0},rest))}PlainButton.propTypes={as:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,className:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,color:(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.oneOfType)([(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.shape)({dark:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,light:prop_types__WEBPACK_IMPORTED_MODULE_1__.string}),prop_types__WEBPACK_IMPORTED_MODULE_1__.string]),disabled:prop_types__WEBPACK_IMPORTED_MODULE_1__.bool,href:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,labelSize:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1__.func,text:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,theme:(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.shape)({dark:prop_types__WEBPACK_IMPORTED_MODULE_1__.bool})};const __WEBPACK_DEFAULT_EXPORT__=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.withTheme)(PlainButton)},"../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>PrimaryButton_PrimaryButton});var Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),ThemeContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),utils=__webpack_require__("../../node_modules/grommet/utils/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),polished_esm=__webpack_require__("../../node_modules/polished/dist/polished.esm.js");function overlay(source){var overlay=arguments.length>1&&void 0!==arguments[1]?arguments[1]:76,value=source<128?2*overlay*source/255:255-2*(255-overlay)*(255-source)/255;return Math.round(value)}const helpers_getGradientShade=function getGradientShade(hex){var color=(0,polished_esm.kN)(hex);return color.red=overlay(color.red),color.green=overlay(color.green),color.blue=overlay(color.blue),(0,polished_esm.Qh)(color)};const blue={button:{border:{color:"neutral-5",width:"1px"},color:{dark:"white",light:"black"},primary:{color:{dark:"dark-3",light:"neutral-5"}},extend:props=>{var color=(0,utils.normalizeColor)("neutral-5",props.theme),gradientShade=helpers_getGradientShade(color);return(0,styled_components_browser_esm.css)(["transition:none;text-align:center;width:100%;max-width:350px;&:disabled{cursor:not-allowed;pointer-events:'none';}&:focus:not(:disabled),&:hover:not(:disabled){color:black;background:linear-gradient(",",",");box-shadow:none;}&:active:not(:disabled){color:black;background:linear-gradient(",",",");}"],color,gradientShade,gradientShade,color)}}};const gold={button:{border:{color:"neutral-2",width:"1px"},color:{dark:"white",light:"black"},primary:{color:{dark:"dark-3",light:"neutral-2"}},extend:props=>{var color=(0,utils.normalizeColor)("neutral-2",props.theme),gradientShade=helpers_getGradientShade(color);return(0,styled_components_browser_esm.css)(["transition:none;text-align:center;width:100%;max-width:350px;&:disabled{cursor:not-allowed;pointer-events:'none';}&:focus:not(:disabled),&:hover:not(:disabled){color:black;background:linear-gradient(",",",");box-shadow:none;}&:active:not(:disabled){color:black;background:linear-gradient(",",",");}"],color,gradientShade,gradientShade,color)}}};const green={button:{border:{color:"status-ok",width:"1px"},color:{dark:"white",light:"black"},primary:{color:{dark:"dark-3",light:"status-ok"}},extend:props=>{var color=(0,utils.normalizeColor)("status-ok",props.theme),gradientShade=helpers_getGradientShade(color);return(0,styled_components_browser_esm.css)(["transition:none;text-align:center;width:100%;max-width:350px;&:disabled{cursor:not-allowed;pointer-events:'none';}&:focus:not(:disabled),&:hover:not(:disabled){color:black;background:linear-gradient(",",",");box-shadow:none;}&:active:not(:disabled){color:black;background:linear-gradient(",",",");}"],color,gradientShade,gradientShade,color)}}};const teal={button:{border:{color:"brand",width:"1px"},color:{dark:"white",light:"white"},primary:{color:{dark:"dark-3",light:"brand"}},extend:props=>{var color=(0,utils.normalizeColor)("brand",props.theme),gradientShade=helpers_getGradientShade(color);return(0,styled_components_browser_esm.css)(["transition:none;text-align:center;width:100%;max-width:350px;&:disabled{cursor:not-allowed;pointer-events:'none';}&:focus:not(:disabled),&:hover:not(:disabled){color:white;background:linear-gradient(",",",");box-shadow:none;}&:active:not(:disabled){color:white;background:linear-gradient(",",",");}"],color,gradientShade,gradientShade,color)}}};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_excluded=["as","color","disabled","href","label","onClick"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var themeMap={blue,gold,green,teal};function PrimaryButton(_ref){var{as="",color="gold",disabled=!1,href="",label,onClick=()=>{}}=_ref,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),theme=themeMap[color]||themeMap.gold,wrappedLabel=(0,react.isValidElement)(label)?label:(0,jsx_runtime.jsx)(Text.E,{size:"medium",children:label});return(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:theme,children:(0,jsx_runtime.jsx)(Button.$,_objectSpread({as,disabled,href:disabled?"":href,label:wrappedLabel,primary:!0,onClick},rest))})}PrimaryButton.propTypes={as:prop_types.string,color:(0,prop_types.oneOf)(["blue","gold","green","teal"]),disabled:prop_types.bool,href:prop_types.string,label:(0,prop_types.oneOfType)([prop_types.element,prop_types.string]).isRequired,onClick:prop_types.func};const PrimaryButton_PrimaryButton=PrimaryButton},"./src/plugins/tasks/models/Annotation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var cuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/cuid/index.js"),cuid__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(cuid__WEBPACK_IMPORTED_MODULE_0__),mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js");const __WEBPACK_DEFAULT_EXPORT__=mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.model("Annotation",{id:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.identifier,task:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.string,taskType:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.literal("default")}).preProcessSnapshot((function(snapshot){var newSnapshot=Object.assign({},snapshot);return newSnapshot.id=snapshot.id||cuid__WEBPACK_IMPORTED_MODULE_0___default()(),newSnapshot})).postProcessSnapshot((function(snapshot){var newSnapshot=Object.assign({},snapshot);return delete newSnapshot.id,newSnapshot})).volatile((function(self){return{_inProgress:!1}})).views((function(self){return{get isComplete(){return!0},toSnapshot:function toSnapshot(){return(0,mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.dV)(self)}}})).actions((function(self){return{update:function update(value){self.value=value,self._inProgress=!0}}}))},"./src/plugins/tasks/models/Task.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var cuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/cuid/index.js"),cuid__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(cuid__WEBPACK_IMPORTED_MODULE_0__),mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),_Annotation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/plugins/tasks/models/Annotation.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const __WEBPACK_DEFAULT_EXPORT__=mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.model("Task",{annotation:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.safeReference(_Annotation__WEBPACK_IMPORTED_MODULE_2__.A),details:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.maybe(mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.array(mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.frozen())),taskKey:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.identifier,required:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.maybe(mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.union(mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.string,mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.boolean)),strings:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.map(mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.string),type:mobx_state_tree__WEBPACK_IMPORTED_MODULE_1__.gK.literal("default")}).views((function(self){return{defaultAnnotation:function defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid__WEBPACK_IMPORTED_MODULE_0___default()();return _Annotation__WEBPACK_IMPORTED_MODULE_2__.A.create({id,task:self.taskKey,taskType:self.type})},get help(){return self.strings.get("help")},get instruction(){return self.strings.get("instruction")},get subtasks(){return self.details&&Array.isArray(self.details)?self.details.map((function(detail,index){var stringOverrides={};return self.strings.forEach((function(value,key){var detailsMatch=key.match(new RegExp("^details\\.".concat(index,"\\.(.+)$")));detailsMatch&&(stringOverrides[detailsMatch[1]]=value)})),_objectSpread(_objectSpread(_objectSpread({},detail),stringOverrides),{},{taskKey:"".concat(self.taskKey,".details.").concat(index),index})})):[]},hasSubtasks:function hasSubtasks(){return self.subtasks.length>0},get question(){return self.strings.get("question")},isComplete:function isComplete(annotation){return!self.required||!(null==annotation||!annotation.isComplete)},get isValid(){return!0}}})).actions((function(self){return{complete:function complete(){},createAnnotation:function createAnnotation(){return self.defaultAnnotation()},reset:function reset(){},start:function start(){},validate:function validate(){}}}))},"./src/plugins/tasks/survey/components/SurveyTask.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>components_SurveyTask});var Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),Choice=__webpack_require__("./src/plugins/tasks/survey/components/components/Choice/Choice.jsx"),Markdownz=__webpack_require__("../lib-react-components/dist/esm/Markdownz/Markdownz.js"),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),AnnounceContext=__webpack_require__("../../node_modules/grommet/es6/contexts/AnnounceContext/AnnounceContext.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),FilterStatus=__webpack_require__("./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/FilterStatus/FilterStatus.jsx"),Choices=__webpack_require__("./src/plugins/tasks/survey/components/components/Chooser/components/Choices/Choices.jsx");var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"Chooser__StyledText",componentId:"sc-17onn59-0"})(["margin:0 0 20px;padding:0;width:100%;> *:first-child{margin-top:0;}"]),components={a:Text.E,h1:Text.E,h2:Text.E,h3:Text.E,h4:Text.E,h5:Text.E,h6:Text.E,p:Text.E,span:Text.E};function Chooser(_ref){var _task$choices,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$filters=_ref.filters,filters=void 0===_ref$filters?{}:_ref$filters,_ref$previousChoiceId=_ref.previousChoiceId,previousChoiceId=void 0===_ref$previousChoiceId?"":_ref$previousChoiceId,_ref$handleDelete=_ref.handleDelete,handleDelete=void 0===_ref$handleDelete?function(){}:_ref$handleDelete,_ref$handleFilter=_ref.handleFilter,handleFilter=void 0===_ref$handleFilter?function(){}:_ref$handleFilter,_ref$onChoose=_ref.onChoose,onChoose=void 0===_ref$onChoose?function(){return!0}:_ref$onChoose,_ref$selectedChoiceId=_ref.selectedChoiceIds,selectedChoiceIds=void 0===_ref$selectedChoiceId?[]:_ref$selectedChoiceId,task=_ref.task,_useState2=_slicedToArray((0,react.useState)(!1),2),filterOpen=_useState2[0],setFilterOpen=_useState2[1],filterStatusRef=(0,react.useRef)(null),announce=(0,react.useContext)(AnnounceContext.n),showFilters=task.characteristics.size>0,filteredChoiceIds=function getFilteredChoiceIds(filters,task){return task.choicesOrder.map((function(choiceId){var choice=task.choices.get(choiceId),rejected=!1;return Object.keys(filters).map((function(characteristicId){var valueId=filters[characteristicId];-1===(choice.characteristics.get(characteristicId)||[]).indexOf(valueId)&&(rejected=!0)})),rejected?null:choiceId})).filter(Boolean)}(filters,task);(0,react.useEffect)((function announceFilteredChoiceCount(){announce("Showing ".concat(filteredChoiceIds.length," of ").concat(task.choices.size," choices"),"polite",1e3)}),[null==filteredChoiceIds?void 0:filteredChoiceIds.length,null===(_task$choices=task.choices)||void 0===_task$choices?void 0:_task$choices.size,announce]);var filterButtonHasFocus=filterStatusRef.current&&filterStatusRef.current.contains(document.activeElement);return(0,jsx_runtime.jsxs)(Box.a,{as:task.instruction?"fieldset":"div",alignSelf:"center",margin:"0",pad:"0",style:{border:"none"},width:"100%",children:[task.instruction?(0,jsx_runtime.jsx)(StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{components,children:task.instruction})}):null,showFilters?(0,jsx_runtime.jsx)(FilterStatus.A,{ref:filterStatusRef,disabled,filterOpen,filters,handleFilter,handleFilterOpen:function handleFilterOpen(){setFilterOpen(!filterOpen),filterOpen&&filterStatusRef.current.scrollIntoView({behavior:"smooth"})},showingChoices:filteredChoiceIds.length,task}):null,(0,jsx_runtime.jsx)(Choices.A,{disabled,filteredChoiceIds,filterOpen:filterOpen||filterButtonHasFocus,previousChoiceId,handleDelete,onChoose,selectedChoiceIds,task})]})}Chooser.displayName="Chooser",Chooser.propTypes={disabled:prop_types_default().bool,filters:prop_types_default().objectOf(prop_types_default().string),previousChoiceId:prop_types_default().string,handleDelete:prop_types_default().func,handleFilter:prop_types_default().func,onChoose:prop_types_default().func,selectedChoiceIds:prop_types_default().arrayOf(prop_types_default().string),task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired};const Chooser_Chooser=(0,mobxreact_esm.PA)(Chooser);function SurveyTask_slicedToArray(r,e){return function SurveyTask_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function SurveyTask_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function SurveyTask_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return SurveyTask_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?SurveyTask_arrayLikeToArray(r,a):void 0}}(r,e)||function SurveyTask_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SurveyTask_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function SurveyTask(_ref){var _annotation$value6,annotation=_ref.annotation,task=_ref.task,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_useState2=SurveyTask_slicedToArray((0,react.useState)({}),2),answers=_useState2[0],setAnswers=_useState2[1],_useState4=SurveyTask_slicedToArray((0,react.useState)({}),2),filters=_useState4[0],setFilters=_useState4[1],_useState6=SurveyTask_slicedToArray((0,react.useState)(""),2),previousChoice=_useState6[0],setPreviousChoice=_useState6[1],_useState8=SurveyTask_slicedToArray((0,react.useState)(""),2),selectedChoice=_useState8[0],setSelectedChoice=_useState8[1];function handleChoice(selectedChoice){var _annotation$value;if(""===selectedChoice?annotation.setChoiceInProgress(!1):annotation.setChoiceInProgress(!0),null!=annotation&&null!==(_annotation$value=annotation.value)&&void 0!==_annotation$value&&_annotation$value.map((function(item){return item.choice})).includes(selectedChoice)){var _annotation$value2,existingAnnotationValue=null==annotation||null===(_annotation$value2=annotation.value)||void 0===_annotation$value2?void 0:_annotation$value2.find((function(value){return value.choice===selectedChoice}));setAnswers(existingAnnotationValue.answers),setSelectedChoice(selectedChoice)}else setAnswers({}),setSelectedChoice(selectedChoice)}(0,react.useEffect)((function(){return function(){annotation._choiceInProgress&&annotation.setChoiceInProgress(!1)}}),[task]);var selectedChoiceIds=null==annotation||null===(_annotation$value6=annotation.value)||void 0===_annotation$value6?void 0:_annotation$value6.map((function(item){return item.choice}));return(0,jsx_runtime.jsx)(Box.a,{fill:!0,children:selectedChoice?(0,jsx_runtime.jsx)(Choice.A,{answers,choiceId:selectedChoice,handleAnswers:function handleAnswers(answers){setAnswers(answers)},handleCancel:function handleCancel(selectedChoice){setAnswers({}),setPreviousChoice(selectedChoice),setSelectedChoice(""),annotation.setChoiceInProgress(!1)},handleChoice,onIdentify:function handleIdentify(){var _annotation$value5,value=(null==annotation||null===(_annotation$value5=annotation.value)||void 0===_annotation$value5?void 0:_annotation$value5.filter((function(item){return item.choice!==selectedChoice})))||[];value.push({choice:selectedChoice,answers,filters}),setAnswers({}),setSelectedChoice(""),setPreviousChoice(selectedChoice),annotation.update(value),annotation.setChoiceInProgress(!1)},task}):(0,jsx_runtime.jsx)(Chooser_Chooser,{disabled,filters,previousChoiceId:previousChoice,handleDelete:function handleDelete(deletedChoice){var _annotation$value3;if(null!=annotation&&null!==(_annotation$value3=annotation.value)&&void 0!==_annotation$value3&&_annotation$value3.map((function(item){return item.choice})).includes(deletedChoice)){var _annotation$value4,value=(null==annotation||null===(_annotation$value4=annotation.value)||void 0===_annotation$value4?void 0:_annotation$value4.filter((function(item){return item.choice!==deletedChoice})))||[];annotation.update(value)}setAnswers({}),setPreviousChoice(deletedChoice),setSelectedChoice(""),annotation.setChoiceInProgress(!1)},handleFilter:function handleFilter(characteristicId,valueId){var newFilters=Object.assign({},filters);valueId?newFilters[characteristicId]=valueId:characteristicId?delete newFilters[characteristicId]:newFilters={},setFilters(newFilters)},onChoose:handleChoice,selectedChoiceIds,task})})}Chooser.__docgenInfo={description:"",methods:[],displayName:"Chooser",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},filters:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"string"}},required:!1},previousChoiceId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},handleDelete:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},handleFilter:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},onChoose:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},selectedChoiceIds:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},task:{description:"",type:{name:"shape",value:{help:{name:"string",required:!1},instruction:{name:"string",required:!1},required:{name:"union",value:[{name:"string"},{name:"bool"}],required:!1},taskKey:{name:"string",required:!1},type:{name:"string",required:!1}}},required:!0}}},SurveyTask.displayName="SurveyTask",SurveyTask.propTypes={annotation:prop_types_default().shape({setChoiceInProgress:prop_types_default().func,update:prop_types_default().func,value:prop_types_default().array,_choiceInProgress:prop_types_default().bool}).isRequired,disabled:prop_types_default().bool,task:prop_types_default().shape({help:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired};const components_SurveyTask=(0,mobxreact_esm.PA)(SurveyTask);SurveyTask.__docgenInfo={description:"",methods:[],displayName:"SurveyTask",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"will disable the task per subjectReadyState",type:{name:"bool"},required:!1},annotation:{description:"required, the current survey task annotation",type:{name:"shape",value:{setChoiceInProgress:{name:"func",required:!1},update:{name:"func",required:!1},value:{name:"array",required:!1},_choiceInProgress:{name:"bool",required:!1}}},required:!0},task:{description:"required, the current survey task",type:{name:"shape",value:{help:{name:"string",required:!1},required:{name:"union",value:[{name:"string"},{name:"bool"}],required:!1},taskKey:{name:"string",required:!1},type:{name:"string",required:!1}}},required:!0}}}},"./src/plugins/tasks/survey/components/components/Choice/Choice.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Choice_Choice});var PrimaryButton=__webpack_require__("../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),withThemeContext=__webpack_require__("../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Carousel=__webpack_require__("../../node_modules/grommet/es6/components/Carousel/Carousel.js"),Heading=__webpack_require__("../../node_modules/grommet/es6/components/Heading/Heading.js"),Collapsible=__webpack_require__("../../node_modules/grommet/es6/components/Collapsible/Collapsible.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),DropButton=__webpack_require__("../../node_modules/grommet/es6/components/DropButton/DropButton.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),SpacedHeading=__webpack_require__("../lib-react-components/dist/esm/SpacedHeading/SpacedHeading.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function Confusion(_ref){var _confusion$images,_ref$confusion=_ref.confusion,confusion=void 0===_ref$confusion?{}:_ref$confusion,_ref$confusionId=_ref.confusionId,confusionId=void 0===_ref$confusionId?"":_ref$confusionId,_ref$confusionText=_ref.confusionText,confusionText=void 0===_ref$confusionText?"":_ref$confusionText,_ref$handleChoice=_ref.handleChoice,handleChoice=void 0===_ref$handleChoice?function(){}:_ref$handleChoice,_ref$images=_ref.images,images=void 0===_ref$images?{}:_ref$images,label=_ref.label,_ref$onClose=_ref.onClose,onClose=void 0===_ref$onClose?function(){return!0}:_ref$onClose,t=(0,i18n.Bd)("plugins").t;return(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-3",light:"neutral-6"},elevation:"xlarge",flex:!1,pad:{bottom:"small",horizontal:"small",top:"none"},width:"medium",children:[(0,jsx_runtime.jsx)(SpacedHeading.A,{children:label}),(null===(_confusion$images=confusion.images)||void 0===_confusion$images?void 0:_confusion$images.length)>0&&(0,jsx_runtime.jsx)(Carousel.F,{"data-testid":"confusion-images",controls:"arrows",children:confusion.images.map((function(filename,index){return(0,jsx_runtime.jsx)(Media.A,{alt:"".concat(confusion.label,"-image").concat(index),src:images.get(filename),width:400},filename)}))}),(0,jsx_runtime.jsx)(Paragraph.f,{children:confusionText}),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",fill:"horizontal",gap:"xsmall",justify:"center",margin:{top:"small"},pad:{top:"small"},children:[(0,jsx_runtime.jsx)(Button.$,{fill:"horizontal",label:t("SurveyTask.ConfusedWith.cancel"),onClick:function onClick(){return onClose()},style:{overflow:"hidden"}}),(0,jsx_runtime.jsx)(PrimaryButton.A,{fill:"horizontal",label:t("SurveyTask.ConfusedWith.itsThis"),onClick:function onClick(){return handleChoice(confusionId)},style:{overflow:"hidden"}})]})]})}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}Confusion.displayName="Confusion",Confusion.propTypes={confusion:prop_types_default().shape({confusions:mobxreact_esm.By.observableMap,confusionsOrder:prop_types_default().arrayOf(prop_types_default().string),images:prop_types_default().arrayOf(prop_types_default().string),label:prop_types_default().string}),confusionId:prop_types_default().string,confusionText:prop_types_default().string,handleChoice:prop_types_default().func,images:mobxreact_esm.By.observableMap,onClose:prop_types_default().func},Confusion.__docgenInfo={description:"",methods:[],displayName:"Confusion",props:{confusion:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{confusions:{name:"custom",raw:"MobXPropTypes.observableMap",required:!1},confusionsOrder:{name:"arrayOf",value:{name:"string"},required:!1},images:{name:"arrayOf",value:{name:"string"},required:!1},label:{name:"string",required:!1}}},required:!1},confusionId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},confusionText:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},handleChoice:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"custom",raw:"MobXPropTypes.observableMap"},required:!1},onClose:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1}}};var StyledDropButton=(0,styled_components_browser_esm.default)(DropButton.E).withConfig({displayName:"ConfusedWith__StyledDropButton",componentId:"sc-1yp3rc-0"})(["background-color:",";border:none;border-radius:4px;color:",";font-size:1rem;height:40px;min-width:110px;margin-right:5px;padding:5px;&:hover:not(:focus-within){box-shadow:0 0 2px 2px ",";}"],(function(props){return props.theme.global.colors[props.backgroundColor]}),(function(props){return props.theme.dark?props.theme.global.colors["neutral-6"]:props.theme.global.colors["neutral-7"]}),(function(props){return props.theme.global.colors.brand}));function ConfusedWith(_ref){var _ref$choices=_ref.choices,choices=void 0===_ref$choices?{}:_ref$choices,choiceId=_ref.choiceId,_ref$confusionsOrder=(_ref.confusions,_ref.confusionsOrder),confusionsOrder=void 0===_ref$confusionsOrder?[]:_ref$confusionsOrder,_ref$handleChoice=_ref.handleChoice,handleChoice=void 0===_ref$handleChoice?function(){}:_ref$handleChoice,_ref$hasFocus=_ref.hasFocus,hasFocus=void 0!==_ref$hasFocus&&_ref$hasFocus,_ref$images=_ref.images,images=void 0===_ref$images?{}:_ref$images,strings=_ref.strings,theme=_ref.theme,t=(0,i18n.Bd)("plugins").t,_useState2=_slicedToArray((0,react.useState)(!1),2),open=_useState2[0],setOpen=_useState2[1];function _onClose(){setOpen(!1)}return(0,jsx_runtime.jsxs)(Box.a,{margin:{top:"20px"},children:[(0,jsx_runtime.jsx)(SpacedHeading.A,{color:{dark:"neutral-6",light:"dark-5"},margin:{bottom:"20px",top:"none"},size:"1rem",children:t("SurveyTask.ConfusedWith.confused")}),(0,jsx_runtime.jsx)(Box.a,{direction:"row",wrap:!0,children:confusionsOrder.map((function(confusionId,index){var backgroundColor="light-1";return theme.dark&&(backgroundColor="dark-4"),open===confusionId&&(backgroundColor="accent-1"),(0,jsx_runtime.jsx)(StyledDropButton,{a11yTitle:strings.get("choices.".concat(confusionId,".label")),autoFocus:hasFocus&&0===index,backgroundColor,dropAlign:{top:"bottom"},dropContent:(0,jsx_runtime.jsx)(Confusion,{confusion:choices.get(confusionId),confusionId,confusionText:strings.get("choices.".concat(choiceId,".confusions.").concat(confusionId)),handleChoice,images,label:strings.get("choices.".concat(confusionId,".label")),onClose:_onClose}),dropProps:{elevation:"none",overflow:"visible",responsive:!1},label:strings.get("choices.".concat(confusionId,".label")),margin:{bottom:"10px",right:"10px"},open:open===confusionId,onClose:function onClose(){return _onClose()},onOpen:function onOpen(){return function _onOpen(confusionId){setOpen(confusionId)}(confusionId)}},confusionId)}))})]})}ConfusedWith.displayName="ConfusedWith",ConfusedWith.propTypes={choices:mobxreact_esm.By.observableMap,confusions:mobxreact_esm.By.observableMap,confusionsOrder:prop_types_default().arrayOf(prop_types_default().string),handleChoice:prop_types_default().func,hasFocus:prop_types_default().bool,images:mobxreact_esm.By.observableMap};const ConfusedWith_ConfusedWith=(0,styled_components_browser_esm.withTheme)(ConfusedWith);ConfusedWith.__docgenInfo={description:"",methods:[],displayName:"ConfusedWith",props:{choices:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"custom",raw:"MobXPropTypes.observableMap"},required:!1},confusions:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"custom",raw:"MobXPropTypes.observableMap"},required:!1},confusionsOrder:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},handleChoice:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},hasFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"custom",raw:"MobXPropTypes.observableMap"},required:!1}}};var Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),FormUp=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormUp.js"),FormDown=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormDown.js"),StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"InfoLabel__StyledText",componentId:"sc-1v5jeq0-0"})(["font-size:0.75rem;width:max-content;"]);function InfoLabel(_ref){var _ref$showInfo=_ref.showInfo,showInfo=void 0!==_ref$showInfo&&_ref$showInfo,t=(0,i18n.Bd)("plugins").t;return(0,jsx_runtime.jsx)(Box.a,{align:"center",direction:"row",gap:"xsmall",children:showInfo?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledText,{children:t("SurveyTask.Choice.lessInfo")}),(0,jsx_runtime.jsx)(FormUp.I,{"aria-hidden":"true"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledText,{children:t("SurveyTask.Choice.moreInfo")}),(0,jsx_runtime.jsx)(FormDown.t,{"aria-hidden":"true"})]})})}InfoLabel.displayName="InfoLabel",InfoLabel.propTypes={showInfo:prop_types.bool};const InfoLabel_InfoLabel=InfoLabel;InfoLabel.__docgenInfo={description:"",methods:[],displayName:"InfoLabel",props:{showInfo:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1}}};var StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuestionInput__StyledBox",componentId:"sc-zvyl7m-0"})(["cursor:pointer;> span{cursor:pointer;}> input{cursor:pointer;opacity:0.01;position:absolute;}&:focus-within{box-shadow:0 0 2px 2px ",";}&:hover:not(:focus-within){box-shadow:0 0 2px 2px ",";}"],(function(props){return props.theme.global.colors[props.theme.global.colors.focus]}),(function(props){return props.theme.global.colors.brand})),DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1},DEFAULT_OPTION={label:"",value:""},DEFAULT_THEME={dark:!1};function QuestionInput(_ref){var _ref$handleCheckBoxCh=_ref.handleCheckBoxChange,handleCheckBoxChange=void 0===_ref$handleCheckBoxCh?DEFAULT_HANDLER:_ref$handleCheckBoxCh,_ref$handleRadioChang=_ref.handleRadioChange,handleRadioChange=void 0===_ref$handleRadioChang?DEFAULT_HANDLER:_ref$handleRadioChang,_ref$handleRadioKeyDo=_ref.handleRadioKeyDown,handleRadioKeyDown=void 0===_ref$handleRadioKeyDo?DEFAULT_HANDLER:_ref$handleRadioKeyDo,_ref$hasFocus=_ref.hasFocus,hasFocus=void 0!==_ref$hasFocus&&_ref$hasFocus,_ref$isChecked=_ref.isChecked,isChecked=void 0!==_ref$isChecked&&_ref$isChecked,_ref$option=_ref.option,option=void 0===_ref$option?DEFAULT_OPTION:_ref$option,_ref$questionId=_ref.questionId,questionId=void 0===_ref$questionId?"":_ref$questionId,_ref$theme=_ref.theme,theme=void 0===_ref$theme?DEFAULT_THEME:_ref$theme,type=_ref.type,backgroundColor="light-1";theme.dark&&(backgroundColor="dark-4"),isChecked&&(backgroundColor="accent-1");var handleChange="checkbox"===type?handleCheckBoxChange:handleRadioChange;return(0,jsx_runtime.jsx)("label",{children:(0,jsx_runtime.jsxs)(StyledBox,{align:"center",background:{color:backgroundColor},height:"40px",justify:"center",margin:{bottom:"10px",right:"10px"},pad:{horizontal:"10px"},round:"radio"===type?"20px / 50%":"4px",width:"radio"===type?{min:"40px"}:{min:"110px"},children:[(0,jsx_runtime.jsx)("input",{autoFocus:hasFocus,name:questionId,value:option.value,type,checked:isChecked,onChange:function onChange(_ref2){var target=_ref2.target;return handleChange(target.value,target.checked)},onClick:"radio"===type?function(_ref3){var target=_ref3.target;return handleRadioChange(target.value)}:null,onKeyDown:"radio"===type?function(event){return handleRadioKeyDown(event)}:null}),(0,jsx_runtime.jsx)(Text.E,{color:theme.dark&&!isChecked?"neutral-6":"neutral-7",size:"1rem",weight:isChecked?"bold":"normal",children:option.label})]})})}QuestionInput.displayName="QuestionInput",QuestionInput.propTypes={handleCheckBoxChange:prop_types_default().func,handleRadioChange:prop_types_default().func,handleRadioKeyDown:prop_types_default().func,hasFocus:prop_types_default().bool,isChecked:prop_types_default().bool,option:prop_types_default().shape({label:prop_types_default().string,value:prop_types_default().string}),questionId:prop_types_default().string,theme:prop_types_default().shape({dark:prop_types_default().bool}),type:prop_types_default().string.isRequired};const components_QuestionInput=(0,styled_components_browser_esm.withTheme)(QuestionInput);QuestionInput.__docgenInfo={description:"",methods:[],displayName:"QuestionInput",props:{handleCheckBoxChange:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"func"},required:!1},handleRadioChange:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"func"},required:!1},handleRadioKeyDown:{defaultValue:{value:"() => false",computed:!1},description:"",type:{name:"func"},required:!1},hasFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},isChecked:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},option:{defaultValue:{value:"{\n  label: '',\n  value: ''\n}",computed:!1},description:"",type:{name:"shape",value:{label:{name:"string",required:!1},value:{name:"string",required:!1}}},required:!1},questionId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},theme:{defaultValue:{value:"{\n  dark: false\n}",computed:!1},description:"",type:{name:"shape",value:{dark:{name:"bool",required:!1}}},required:!1},type:{description:"",type:{name:"string"},required:!0}}};var InputGroup_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!1};function InputGroup(props){var labelledBy=props.labelledBy,_props$handleAnswer=props.handleAnswer,handleAnswer=void 0===_props$handleAnswer?InputGroup_DEFAULT_HANDLER:_props$handleAnswer,_props$hasFocus=props.hasFocus,hasFocus=void 0!==_props$hasFocus&&_props$hasFocus,_props$options=props.options,options=void 0===_props$options?[]:_props$options,_props$questionAnswer=props.questionAnswer,questionAnswer=void 0===_props$questionAnswer?"":_props$questionAnswer,_props$questionId=props.questionId,questionId=void 0===_props$questionId?"":_props$questionId,type=props.type;function handleCheckBoxChange(value,checked){var newQuestionAnswer=Array.from(questionAnswer);checked?newQuestionAnswer.push(value):newQuestionAnswer.splice(newQuestionAnswer.indexOf(value),1),handleAnswer(newQuestionAnswer,questionId)}function handleRadioChange(value){handleAnswer(questionAnswer===value?"":value,questionId)}function handleRadioKeyDown(event){var value=event.target.value;if(questionAnswer!==value)return!0;switch(event.key){case" ":case"Backspace":case"Delete":return event.preventDefault(),event.stopPropagation(),handleAnswer("",questionId),!1;default:return!0}}return(0,jsx_runtime.jsx)(Box.a,{"aria-labelledby":labelledBy,direction:"row",wrap:!0,children:options.map((function(option,index){var isChecked;isChecked="checkbox"===type?!!questionAnswer&&questionAnswer.indexOf(option.value)>-1:questionAnswer===option.value;var inputHasFocus=!1;return inputHasFocus=questionAnswer?hasFocus&&isChecked:hasFocus&&0===index,(0,jsx_runtime.jsx)(components_QuestionInput,{handleCheckBoxChange,handleRadioChange,handleRadioKeyDown,hasFocus:inputHasFocus,isChecked,option,questionId,type},option.value)}))})}function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Questions(_ref){var _ref$answers=_ref.answers,answers=void 0===_ref$answers?{}:_ref$answers,_ref$hasFocus=_ref.hasFocus,hasFocus=void 0!==_ref$hasFocus&&_ref$hasFocus,_ref$questionIds=_ref.questionIds,questionIds=void 0===_ref$questionIds?[]:_ref$questionIds,_ref$questions=_ref.questions,questions=void 0===_ref$questions?{}:_ref$questions,_ref$setAnswers=_ref.setAnswers,setAnswers=void 0===_ref$setAnswers?function(){}:_ref$setAnswers,strings=_ref.strings;function handleAnswer(questionAnswer,questionId){var newAnswers=_objectSpread(_objectSpread({},answers),{},_defineProperty({},questionId,questionAnswer));0===questionAnswer.length&&delete newAnswers[questionId],setAnswers(newAnswers)}return(0,jsx_runtime.jsx)(Box.a,{flex:"grow",gap:"20px",children:questionIds.map((function(questionId,index){var question=questions.get(questionId)||{answers:{},answersOrder:[]},inputType=question.multiple?"checkbox":"radio",options=question.answersOrder.map((function(answerId){return{label:strings.get("questions.".concat(questionId,".answers.").concat(answerId,".label")),value:answerId}}));return(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(SpacedHeading.A,{id:"".concat(questionId,"-label"),color:{dark:"neutral-6",light:"dark-5"},margin:{top:"none",bottom:"20px"},size:"1rem",children:strings.get("questions.".concat(questionId,".label"))}),(0,jsx_runtime.jsx)(InputGroup,{labelledBy:"".concat(questionId,"-label"),handleAnswer,hasFocus:hasFocus&&0===index,options,questionId,questionAnswer:answers[questionId],type:inputType})]},questionId)}))})}function getQuestionIds(){var _task$choices$get,_task$questionsMap,choiceId=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",task=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return task.choices&&null!==(_task$choices$get=task.choices.get(choiceId))&&void 0!==_task$choices$get&&_task$choices$get.noQuestions?[]:null!==(_task$questionsMap=task.questionsMap)&&void 0!==_task$questionsMap&&_task$questionsMap.has(choiceId)?task.questionsMap.get(choiceId):task.questionsOrder}InputGroup.displayName="InputGroup",InputGroup.propTypes={handleAnswer:prop_types_default().func,hasFocus:prop_types_default().bool,options:prop_types_default().arrayOf(prop_types_default().shape({label:prop_types_default().string,value:prop_types_default().string})),questionAnswer:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().string),prop_types_default().string]),questionId:prop_types_default().string,type:prop_types_default().string.isRequired},InputGroup.__docgenInfo={description:"",methods:[],displayName:"InputGroup",props:{handleAnswer:{description:"",type:{name:"func"},required:!1},hasFocus:{description:"",type:{name:"bool"},required:!1},options:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{label:{name:"string",required:!1},value:{name:"string",required:!1}}}},required:!1},questionAnswer:{description:"",type:{name:"union",value:[{name:"arrayOf",value:{name:"string"}},{name:"string"}]},required:!1},questionId:{description:"",type:{name:"string"},required:!1},type:{description:"",type:{name:"string"},required:!0}}},Questions.displayName="Questions",Questions.propTypes={answers:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().string),prop_types_default().string])),hasFocus:prop_types_default().bool,questionIds:prop_types_default().arrayOf(prop_types_default().string),questions:prop_types_default().shape({answers:prop_types_default().objectOf(prop_types_default().shape({label:prop_types_default().string})),answersOrder:prop_types_default().arrayOf(prop_types_default().string),label:prop_types_default().string,multiple:prop_types_default().bool,required:prop_types_default().bool}),setAnswers:prop_types_default().func},Questions.__docgenInfo={description:"",methods:[],displayName:"Questions",props:{answers:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"arrayOf",value:{name:"string"}},{name:"string"}]}},required:!1},hasFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},questionIds:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},questions:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{answers:{name:"objectOf",value:{name:"shape",value:{label:{name:"string",required:!1}}},required:!1},answersOrder:{name:"arrayOf",value:{name:"string"},required:!1},label:{name:"string",required:!1},multiple:{name:"bool",required:!1},required:{name:"bool",required:!1}}},required:!1},setAnswers:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1}}};var Next=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Next.js"),Previous=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Previous.js");function StyledNext(){return(0,jsx_runtime.jsx)(Next.k,{color:"neutral-2",size:"large"})}function StyledPrevious(){return(0,jsx_runtime.jsx)(Previous.s,{color:"neutral-2",size:"large"})}StyledNext.displayName="StyledNext",StyledPrevious.displayName="StyledPrevious";const Choice_carouselTheme={carousel:{icons:{next:StyledNext,previous:StyledPrevious}}};function Choice_slicedToArray(r,e){return function Choice_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function Choice_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function Choice_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return Choice_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Choice_arrayLikeToArray(r,a):void 0}}(r,e)||function Choice_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Choice_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var Choice_StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"Choice__StyledBox",componentId:"sc-1igs6yn-0"})(["&:focus{outline:2px solid ",";}"],(function(props){return props.theme.global.colors[props.theme.global.colors.focus]})),StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"Choice__StyledButton",componentId:"sc-1igs6yn-1"})(["border:1px solid ",";border-radius:4px;flex:1 0;margin-right:1ch;max-width:350px;"],(function(props){return props.theme.global.colors.brand})),StyledPrimaryButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"Choice__StyledPrimaryButton",componentId:"sc-1igs6yn-2"})(["border-radius:4px;flex:1 0;"]),Choice_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function Choice(_ref){var _choice$images,_choice$confusionsOrd,_ref$answers=_ref.answers,answers=void 0===_ref$answers?{}:_ref$answers,_ref$choiceId=_ref.choiceId,choiceId=void 0===_ref$choiceId?"":_ref$choiceId,_ref$handleAnswers=_ref.handleAnswers,handleAnswers=void 0===_ref$handleAnswers?Choice_DEFAULT_HANDLER:_ref$handleAnswers,_ref$handleCancel=_ref.handleCancel,handleCancel=void 0===_ref$handleCancel?Choice_DEFAULT_HANDLER:_ref$handleCancel,_ref$handleChoice=_ref.handleChoice,handleChoice=void 0===_ref$handleChoice?Choice_DEFAULT_HANDLER:_ref$handleChoice,_ref$onIdentify=_ref.onIdentify,onIdentify=void 0===_ref$onIdentify?Choice_DEFAULT_HANDLER:_ref$onIdentify,task=_ref.task,_useState2=Choice_slicedToArray((0,react.useState)(!1),2),showInfo=_useState2[0],setShowInfo=_useState2[1],choices=task.choices,images=task.images,questions=task.questions,strings=task.strings,choiceRef=(0,react.useRef)(null);(0,react.useEffect)((function(){choiceRef.current&&choiceRef.current.focus()}),[choiceId]);var t=(0,i18n.Bd)("plugins").t,choice=(null==choices?void 0:choices.get(choiceId))||{},questionIds=getQuestionIds(choiceId,task),allowIdentify=function allowIdentification(){var answers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},choiceId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",task=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===getQuestionIds(choiceId,task).length)return!0;var answerProvided=[];return getQuestionIds(choiceId,task).map((function(questionId){if(task.questions.get(questionId).required){var answer=answers[questionId];answer&&answer.length>0?answerProvided.push(!0):answerProvided.push(!1)}else answerProvided.push(!0)})),answerProvided.every((function(answer){return!0===answer}))}(answers,choiceId,task);return(0,jsx_runtime.jsxs)(Choice_StyledBox,{ref:choiceRef,"aria-labelledby":"choice-label",background:{dark:"dark-3",light:"neutral-6"},flex:"grow",forwardedAs:"section",onKeyDown:function handleKeyDown(event){"Escape"===event.key&&handleCancel(choiceId)},tabIndex:0,children:[(null===(_choice$images=choice.images)||void 0===_choice$images?void 0:_choice$images.length)>0&&(0,jsx_runtime.jsx)(Carousel.F,{alignSelf:"center",controls:"arrows","data-testid":"choice-images",height:{max:"medium",min:"160px"},width:"100%",children:choice.images.map((function(filename,index){return(0,jsx_runtime.jsx)(Media.A,{alt:"".concat(choice.label,"-image").concat(index),src:images.get(filename)},filename)}))}),(0,jsx_runtime.jsxs)(Box.a,{pad:{bottom:"10px",top:"20px"},children:[(0,jsx_runtime.jsxs)(Box.a,{direction:"row",fill:"horizontal",height:"auto",justify:"between",margin:{bottom:"20px"},children:[(0,jsx_runtime.jsx)(Heading.D,{id:"choice-label",color:{dark:"accent-1",light:"neutral-7"},level:2,margin:"none",size:"1.5rem",weight:"bold",children:strings.get("choices.".concat(choiceId,".label"))}),(0,jsx_runtime.jsx)(Button.$,{label:(0,jsx_runtime.jsx)(InfoLabel_InfoLabel,{showInfo}),onClick:function onClick(){return setShowInfo(!showInfo)},plain:!0})]}),(0,jsx_runtime.jsx)(Collapsible.N,{open:showInfo,children:(0,jsx_runtime.jsxs)(Box.a,{margin:{bottom:"20px"},children:[(0,jsx_runtime.jsx)(Paragraph.f,{margin:"none",children:strings.get("choices.".concat(choiceId,".description"))}),(null===(_choice$confusionsOrd=choice.confusionsOrder)||void 0===_choice$confusionsOrd?void 0:_choice$confusionsOrd.length)>0&&(0,jsx_runtime.jsx)(ConfusedWith_ConfusedWith,{choices,choiceId,confusions:choice.confusions,confusionsOrder:choice.confusionsOrder,handleChoice,images,strings})]})}),questionIds.length>0&&(0,jsx_runtime.jsx)(Questions,{answers,questionIds,questions,setAnswers:handleAnswers,strings}),(0,jsx_runtime.jsxs)(Box.a,{border:{color:"light-5",side:"bottom",size:"small"},direction:"row",fill:"horizontal",justify:"center",pad:{vertical:"20px"},children:[(0,jsx_runtime.jsx)(StyledButton,{fill:"horizontal",label:t("SurveyTask.Choice.cancel"),onClick:function onClick(){return handleCancel(choiceId)}}),(0,jsx_runtime.jsx)(StyledPrimaryButton,{"data-testid":"choice-identify-button",disabled:!allowIdentify,fill:"horizontal",label:t("SurveyTask.Choice.identify"),onClick:function onClick(){return onIdentify()}})]})]})]})}Choice.displayName="Choice",Choice.propTypes={answers:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().string),prop_types_default().string])),choiceId:prop_types_default().string,handleAnswers:prop_types_default().func,handleCancel:prop_types_default().func,handleChoice:prop_types_default().func,onIdentify:prop_types_default().func,task:prop_types_default().shape({help:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired};const Choice_Choice=(0,withThemeContext.A)(Choice,Choice_carouselTheme);Choice.__docgenInfo={description:"",methods:[],displayName:"Choice",props:{answers:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"union",value:[{name:"arrayOf",value:{name:"string"}},{name:"string"}]}},required:!1},choiceId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},handleAnswers:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},handleCancel:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},handleChoice:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onIdentify:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},task:{description:"",type:{name:"shape",value:{help:{name:"string",required:!1},required:{name:"union",value:[{name:"string"},{name:"bool"}],required:!1},taskKey:{name:"string",required:!1},type:{name:"string",required:!1}}},required:!0}}}},"./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/Characteristics/Characteristics.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _zooniverse_react_components_SpacedText__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),grommet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormUp.js"),mobx_react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),prop_types__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__),styled_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/translations/i18n.jsx"),_components_CharacteristicSection__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/Characteristics/components/CharacteristicSection.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledBox=(0,styled_components__WEBPACK_IMPORTED_MODULE_6__.default)(grommet__WEBPACK_IMPORTED_MODULE_1__.a).withConfig({displayName:"Characteristics__StyledBox",componentId:"sc-43snfw-0"})(["background:",";border-radius:0px 0px 16px 16px;box-shadow:0px 4px 4px 0px rgba(0,0,0,0.20);"],(function(props){return props.theme.dark?"linear-gradient(180deg, rgba(51, 51, 51, 0.80) 0%, rgba(51, 51, 51, 0.80) 100%), #333333;":"linear-gradient(180deg, rgba(255, 255, 255, 0.80) 0%, rgba(239, 242, 245, 0.80) 100%), #FFF;"})),StyledButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_6__.default)(grommet__WEBPACK_IMPORTED_MODULE_2__.$).withConfig({displayName:"Characteristics__StyledButton",componentId:"sc-43snfw-1"})(["margin-top:5px;&:hover,&:focus{span{text-decoration:underline;}}"]),DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function Characteristics(_ref){var _ref$characteristics=_ref.characteristics,characteristics=void 0===_ref$characteristics?{}:_ref$characteristics,_ref$characteristicsO=_ref.characteristicsOrder,characteristicsOrder=void 0===_ref$characteristicsO?[]:_ref$characteristicsO,_ref$filters=_ref.filters,filters=void 0===_ref$filters?{}:_ref$filters,_ref$handleFilterOpen=_ref.handleFilterOpen,handleFilterOpen=void 0===_ref$handleFilterOpen?DEFAULT_HANDLER:_ref$handleFilterOpen,_ref$images=_ref.images,images=void 0===_ref$images?{}:_ref$images,_ref$onFilter=_ref.onFilter,onFilter=void 0===_ref$onFilter?DEFAULT_HANDLER:_ref$onFilter,strings=_ref.strings,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_7__.Bd)("plugins").t;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(StyledBox,{align:"center",pad:{bottom:"small",horizontal:"small"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_1__.a,{"data-testid":"characteristics",fill:"horizontal",flex:"grow",children:characteristicsOrder.map((function(characteristicId){var characteristic=characteristics.get(characteristicId)||{},selectedValueId=filters[characteristicId]||"";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_components_CharacteristicSection__WEBPACK_IMPORTED_MODULE_8__.A,{characteristic,characteristicId,images,label:strings.get("characteristics.".concat(characteristicId,".label")),onFilter,selectedValueId,strings},characteristicId)}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(StyledButton,{label:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_1__.a,{align:"center",direction:"row",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(_zooniverse_react_components_SpacedText__WEBPACK_IMPORTED_MODULE_0__.A,{size:"1rem",children:t("SurveyTask.CharacteristicsFilter.closeFilters")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_9__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_3__.I,{})]}),onClick:handleFilterOpen,plain:!0})]})}Characteristics.displayName="Characteristics",Characteristics.propTypes={characteristics:mobx_react__WEBPACK_IMPORTED_MODULE_4__.By.observableMap,characteristicsOrder:prop_types__WEBPACK_IMPORTED_MODULE_5___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().string),filters:prop_types__WEBPACK_IMPORTED_MODULE_5___default().objectOf(prop_types__WEBPACK_IMPORTED_MODULE_5___default().string),handleFilterOpen:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func,images:mobx_react__WEBPACK_IMPORTED_MODULE_4__.By.observableMap,onFilter:prop_types__WEBPACK_IMPORTED_MODULE_5___default().func};const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_4__.PA)(Characteristics);Characteristics.__docgenInfo={description:"",methods:[],displayName:"Characteristics",props:{characteristics:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"custom",raw:"MobXPropTypes.observableMap"},required:!1},characteristicsOrder:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},filters:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"string"}},required:!1},handleFilterOpen:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"custom",raw:"MobXPropTypes.observableMap"},required:!1},onFilter:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1}}}},"./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/Characteristics/components/CharacteristicSection.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>CharacteristicSection});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/RadioButtonGroup/RadioButtonGroup.js"),mobx_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/index.js"),_zooniverse_react_components_SpacedHeading__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../lib-react-components/dist/esm/SpacedHeading/SpacedHeading.js"),_components_FilterLabel__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/components/FilterLabel.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),DEFAULT_CHARACTERISTIC={values:{},valuesOrder:[]},DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function CharacteristicSection(_ref){var _ref$characteristic=_ref.characteristic,characteristic=void 0===_ref$characteristic?DEFAULT_CHARACTERISTIC:_ref$characteristic,_ref$characteristicId=_ref.characteristicId,characteristicId=void 0===_ref$characteristicId?"":_ref$characteristicId,_ref$images=_ref.images,images=void 0===_ref$images?{}:_ref$images,_ref$label=_ref.label,label=void 0===_ref$label?"":_ref$label,_ref$onFilter=_ref.onFilter,onFilter=void 0===_ref$onFilter?DEFAULT_HANDLER:_ref$onFilter,_ref$selectedValueId=_ref.selectedValueId,selectedValueId=void 0===_ref$selectedValueId?"":_ref$selectedValueId,strings=_ref.strings,onChange=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((function(_ref2){var target=_ref2.target;return onFilter(characteristicId,null==target?void 0:target.value)}),[characteristicId,onFilter]),radioButtonLabel=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((function(option,_ref3){var checked=_ref3.checked,focus=_ref3.focus,hover=_ref3.hover;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_components_FilterLabel__WEBPACK_IMPORTED_MODULE_6__.A,{characteristicId,characteristicLabel:label,checked,focus,hover,valueId:option.value,valueImageSrc:option.imageSrc,valueLabel:option.label})}),[characteristicId,label,onFilter]),characteristicOption=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)((function(valueId){var _characteristic$value,value=(null==characteristic||null===(_characteristic$value=characteristic.values)||void 0===_characteristic$value?void 0:_characteristic$value.get(valueId))||{},valueImageSrc=(null==images?void 0:images.get(value.image))||"",label=strings.get("characteristics.".concat(characteristicId,".values.").concat(valueId,".label"));return{disabled:!1,id:"".concat(characteristicId,"-").concat(valueId),imageSrc:valueImageSrc,label,value:valueId}}),[characteristic,characteristicId,images,strings]),characteristicOptions=characteristic.valuesOrder.map(characteristicOption);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{margin:{bottom:"xsmall"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_zooniverse_react_components_SpacedHeading__WEBPACK_IMPORTED_MODULE_5__.A,{id:"".concat(label,"-heading"),color:{dark:"neutral-6",light:"neutral-7"},margin:{bottom:"xsmall",top:"xsmall"},pad:"none",size:"1rem",children:label}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_1__.z,{"aria-labelledby":"".concat(label,"-heading"),cssGap:!0,direction:"row",gap:{column:"small",row:"xsmall"},name:"".concat(characteristic.label,"-filter"),onChange,options:characteristicOptions,value:selectedValueId,wrap:!0,children:radioButtonLabel})]})}CharacteristicSection.displayName="CharacteristicSection",CharacteristicSection.propTypes={characteristic:prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({label:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,values:mobx_react__WEBPACK_IMPORTED_MODULE_2__.By.observableMap,valuesOrder:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_3___default().string)}),characteristicId:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,images:mobx_react__WEBPACK_IMPORTED_MODULE_2__.By.observableMap,label:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,onFilter:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,selectedValueId:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string},CharacteristicSection.__docgenInfo={description:"",methods:[],displayName:"CharacteristicSection",props:{characteristic:{defaultValue:{value:"{\n  values: {},\n  valuesOrder: []\n}",computed:!1},description:"",type:{name:"shape",value:{label:{name:"string",required:!1},values:{name:"custom",raw:"MobXPropTypes.observableMap",required:!1},valuesOrder:{name:"arrayOf",value:{name:"string"},required:!1}}},required:!1},characteristicId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},images:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"custom",raw:"MobXPropTypes.observableMap"},required:!1},label:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},onFilter:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},selectedValueId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1}}}},"./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/FilterStatus/FilterStatus.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>FilterStatus_FilterStatus});var SpacedText=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Collapsible=__webpack_require__("../../node_modules/grommet/es6/components/Collapsible/Collapsible.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react=__webpack_require__("../../node_modules/react/index.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),Blank=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FilterIcon(props){return(0,jsx_runtime.jsxs)(Blank.h,_objectSpread(_objectSpread({transform:"rotate(-90)",viewBox:"0 0 512 512"},props),{},{children:[(0,jsx_runtime.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 128h80M64 128h240M368 384h80M64 384h240M208 256h240M64 256h80"}),(0,jsx_runtime.jsx)("circle",{cx:"336",cy:"128",r:"32",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),(0,jsx_runtime.jsx)("circle",{cx:"176",cy:"256",r:"32",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),(0,jsx_runtime.jsx)("circle",{cx:"336",cy:"384",r:"32",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}))}FilterIcon.displayName="FilterIcon",FilterIcon.__docgenInfo={description:"",methods:[],displayName:"FilterIcon"};var FilterLabel=__webpack_require__("./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/components/FilterLabel.jsx"),Characteristics=__webpack_require__("./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/Characteristics/Characteristics.jsx"),PlainButton=__webpack_require__("../lib-react-components/dist/esm/PlainButton/PlainButton.js"),DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function ClearFilters(_ref){var _ref$onClick=_ref.onClick,onClick=void 0===_ref$onClick?DEFAULT_HANDLER:_ref$onClick,_ref$showingChoices=_ref.showingChoices,showingChoices=void 0===_ref$showingChoices?0:_ref$showingChoices,_ref$totalChoices=_ref.totalChoices,totalChoices=void 0===_ref$totalChoices?0:_ref$totalChoices,t=(0,i18n.Bd)("plugins").t;return(0,jsx_runtime.jsxs)(Box.a,{align:"center",direction:"row",fill:"horizontal",gap:"xxsmall",justify:"between",children:[(0,jsx_runtime.jsx)(SpacedText.A,{size:"0.75rem",children:t("SurveyTask.CharacteristicsFilter.showing",{showing:showingChoices,total:totalChoices})}),(0,jsx_runtime.jsx)(PlainButton.Ay,{color:{dark:"neutral-6",light:"dark-5"},disabled:showingChoices===totalChoices,labelSize:"0.75rem",onClick,text:t("SurveyTask.CharacteristicsFilter.clearFilters")})]})}ClearFilters.displayName="ClearFilters",ClearFilters.propTypes={onClick:prop_types_default().func,showingChoices:prop_types_default().number,totalChoices:prop_types_default().number},ClearFilters.__docgenInfo={description:"",methods:[],displayName:"ClearFilters",props:{onClick:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},showingChoices:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},totalChoices:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1}}};var StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FilterStatus__StyledButton",componentId:"sc-1iuffqs-0"})(["border:none;border-radius:32px;height:40px;padding:8px 10px;&:focus{text-decoration:underline;}&:enabled:hover{color:",";text-decoration:underline;}",""],(function(props){return props.theme.dark?props.theme.global.colors.brand:props.theme.global.colors["neutral-1"]}),(function(props){return props.$filterOpen&&(0,styled_components_browser_esm.css)(["background-color:",";color:",";text-decoration:none;&:enabled:hover{color:",";text-decoration:underline;}"],(function(props){return props.theme.global.colors["neutral-1"]}),(function(props){return props.theme.global.colors["neutral-6"]}),(function(props){return props.theme.global.colors["neutral-6"]}))})),StyledLabel=(0,styled_components_browser_esm.default)(SpacedText.A).withConfig({displayName:"FilterStatus__StyledLabel",componentId:"sc-1iuffqs-1"})(["font-size:1rem;font-weight:500;text-transform:uppercase;"]),FilterStatus_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},FilterStatus=(0,react.forwardRef)((function(_ref,ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$filterOpen=_ref.filterOpen,filterOpen=void 0!==_ref$filterOpen&&_ref$filterOpen,_ref$filters=_ref.filters,filters=void 0===_ref$filters?{}:_ref$filters,_ref$handleFilter=_ref.handleFilter,handleFilter=void 0===_ref$handleFilter?FilterStatus_DEFAULT_HANDLER:_ref$handleFilter,_ref$handleFilterOpen=_ref.handleFilterOpen,handleFilterOpen=void 0===_ref$handleFilterOpen?FilterStatus_DEFAULT_HANDLER:_ref$handleFilterOpen,_ref$showingChoices=_ref.showingChoices,showingChoices=void 0===_ref$showingChoices?0:_ref$showingChoices,task=_ref.task,characteristics=task.characteristics,characteristicsOrder=task.characteristicsOrder,choices=task.choices,images=task.images,strings=task.strings,t=(0,i18n.Bd)("plugins").t,selectedCharacteristicIds=Object.keys(filters);return(0,jsx_runtime.jsxs)(Box.a,{margin:{bottom:"xxsmall"},children:[(0,jsx_runtime.jsxs)(Box.a,{align:"start","data-testid":"filter-status",direction:"row",gap:"xxsmall",wrap:!0,children:[(0,jsx_runtime.jsx)(StyledButton,{ref,a11yTitle:t("SurveyTask.CharacteristicsFilter.filter"),"aria-controls":"characteristics-collapsible","aria-expanded":filterOpen,disabled,$filterOpen:filterOpen,gap:"xsmall",icon:(0,jsx_runtime.jsx)(FilterIcon,{size:"16px"}),label:(0,jsx_runtime.jsx)(StyledLabel,{children:t("SurveyTask.CharacteristicsFilter.filter")}),onClick:handleFilterOpen}),selectedCharacteristicIds.map((function(characteristicId){var _characteristic$value,characteristic=(null==characteristics?void 0:characteristics.get(characteristicId))||{},selectedValueId=(null==filters?void 0:filters[characteristicId])||"",value=(null===(_characteristic$value=characteristic.values)||void 0===_characteristic$value?void 0:_characteristic$value.get(selectedValueId))||{},valueImageSrc=(null==images?void 0:images.get(value.image))||"",label=strings.get("characteristics.".concat(characteristicId,".values.").concat(selectedValueId,".label"));return(0,jsx_runtime.jsx)(Button.$,{a11yTitle:t("SurveyTask.CharacteristicsFilter.removeFilter",{valueLabel:label}),label:(0,jsx_runtime.jsx)(FilterLabel.A,{characteristicId,selected:!0,valueId:selectedValueId,valueImageSrc,valueLabel:label}),margin:{bottom:"xxsmall",left:"xxsmall"},onClick:function clearSelection(){handleFilter(characteristicId)},plain:!0},"".concat(characteristicId,"-").concat(selectedValueId))}))]}),selectedCharacteristicIds.length&&!filterOpen?(0,jsx_runtime.jsx)(ClearFilters,{onClick:function onClick(){return handleFilter()},showingChoices,totalChoices:choices.size}):null,(0,jsx_runtime.jsx)(Collapsible.N,{id:"characteristics-collapsible",open:filterOpen,children:(0,jsx_runtime.jsx)(Characteristics.A,{characteristics,characteristicsOrder,filters,handleFilterOpen,images,onFilter:handleFilter,strings})})]})}));FilterStatus.propTypes={disabled:prop_types_default().bool,filterOpen:prop_types_default().bool,filters:prop_types_default().objectOf(prop_types_default().string),handleFilter:prop_types_default().func,handleFilterOpen:prop_types_default().func,showingChoices:prop_types_default().number,task:prop_types_default().shape({help:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired},FilterStatus.displayName="FilterStatus";const FilterStatus_FilterStatus=FilterStatus;FilterStatus.__docgenInfo={description:"",methods:[],displayName:"FilterStatus",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},filterOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},filters:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"objectOf",value:{name:"string"}},required:!1},handleFilter:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},handleFilterOpen:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},showingChoices:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},task:{description:"",type:{name:"shape",value:{help:{name:"string",required:!1},required:{name:"union",value:[{name:"string"},{name:"bool"}],required:!1},taskKey:{name:"string",required:!1},type:{name:"string",required:!1}}},required:!0}}}},"./src/plugins/tasks/survey/components/components/Chooser/components/CharacteristicsFilter/components/FilterLabel.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>FilterLabel});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Image/Image.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormClose.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),styled_components__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_i18next__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledFilter=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.default)(grommet__WEBPACK_IMPORTED_MODULE_0__.a).withConfig({displayName:"FilterLabel__StyledFilter",componentId:"sc-1s3txqh-0"})(["box-shadow:",";"],(function(props){return props.focus||props.hover?"0 0 2px 2px ".concat(props.theme.global.colors.brand,";"):"1px 1px 4px 0px rgba(0, 0, 0, 0.10);"})),StyledImage=(0,styled_components__WEBPACK_IMPORTED_MODULE_4__.default)(grommet__WEBPACK_IMPORTED_MODULE_1__._).withConfig({displayName:"FilterLabel__StyledImage",componentId:"sc-1s3txqh-1"})(["flex:0 0 auto;height:25px;width:25px;"]);function FilterLabel(_ref){var _ref$characteristicId=_ref.characteristicId,characteristicId=void 0===_ref$characteristicId?"":_ref$characteristicId,_ref$checked=_ref.checked,checked=void 0!==_ref$checked&&_ref$checked,_ref$focus=_ref.focus,focus=void 0!==_ref$focus&&_ref$focus,_ref$hover=_ref.hover,hover=void 0!==_ref$hover&&_ref$hover,_ref$selected=_ref.selected,selected=void 0!==_ref$selected&&_ref$selected,_ref$valueId=_ref.valueId,valueId=void 0===_ref$valueId?"":_ref$valueId,_ref$valueImageSrc=_ref.valueImageSrc,valueImageSrc=void 0===_ref$valueImageSrc?"":_ref$valueImageSrc,_ref$valueLabel=_ref.valueLabel,valueLabel=void 0===_ref$valueLabel?"":_ref$valueLabel,backgroundColor=((0,react_i18next__WEBPACK_IMPORTED_MODULE_5__.Bd)("plugins").t,checked||selected?"accent-1":"neutral-6"),containerWidth=selected?"60px":"40px",dataTestId=selected?"remove filter-".concat(characteristicId,"-").concat(valueId):"filter-".concat(characteristicId,"-").concat(valueId);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(StyledFilter,{align:"center",background:{color:backgroundColor},"data-testid":dataTestId,direction:"row",focus,height:"40px",hover,justify:"center",pad:{horizontal:"10px",vertical:"5px"},round:"medium",width:containerWidth,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(StyledImage,{alt:valueLabel,fit:"contain",src:valueImageSrc}),selected&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_2__.b,{color:"neutral-7",size:"1.3rem"})]})}FilterLabel.displayName="FilterLabel",FilterLabel.propTypes={characteristicId:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,checked:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,focus:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,hover:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,selected:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,valueId:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,valueImageSrc:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,valueLabel:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string},FilterLabel.__docgenInfo={description:"",methods:[],displayName:"FilterLabel",props:{characteristicId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},checked:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},focus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},hover:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},selected:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},valueId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},valueImageSrc:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},valueLabel:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1}}}},"./src/plugins/tasks/survey/components/components/Chooser/components/Choices/Choices.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Choices_Choices});var ResponsiveContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ResponsiveContext/ResponsiveContext.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");function howManyColumns(_ref){var length=_ref.length;return length<=5?1:length<=20?2:3}var Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Image=__webpack_require__("../../node_modules/grommet/es6/components/Image/Image.js"),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),FormClose=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormClose.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"DeleteButton__StyledButton",componentId:"sc-yhhihi-0"})(["height:100%;&:disabled{cursor:not-allowed;}&:focus{border:2px solid ",";box-shadow:none;}&:focus,&:hover{svg{border:2px solid ",";border-radius:50%;}}"],(function(props){return props.theme.global.colors["accent-1"]}),(function(props){return props.theme.global.colors["neutral-6"]})),IconWrapper=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"DeleteButton__IconWrapper",componentId:"sc-yhhihi-1"})(["background:",";position:absolute;border-radius:50%;transform:translate(-50%,-50%);left:50%;top:50%;z-index:2;"],(function(props){return props.theme.global.colors.brand})),ChildrenWrapper=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"DeleteButton__ChildrenWrapper",componentId:"sc-yhhihi-2"})(["position:relative;& > img{filter:blur(0.5px);}&::before{content:'';background:rgba(0,93,105,0.6);border-radius:4px;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;}"]);function DeleteButton(_ref){var children=_ref.children,_ref$choiceLabel=_ref.choiceLabel,choiceLabel=void 0===_ref$choiceLabel?"":_ref$choiceLabel,deleteFn=_ref.deleteFn,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$tabIndex=_ref.tabIndex,tabIndex=void 0===_ref$tabIndex?-1:_ref$tabIndex,t=(0,i18n.Bd)("plugins").t;return(0,jsx_runtime.jsx)(StyledButton,{a11yTitle:t("SurveyTask.DeleteButton.delete",{choiceLabel}),disabled,onClick:deleteFn,tabIndex,children:(0,jsx_runtime.jsxs)(ChildrenWrapper,{children:[children,(0,jsx_runtime.jsx)(IconWrapper,{children:(0,jsx_runtime.jsx)(FormClose.b,{color:"neutral-6"})})]})})}DeleteButton.displayName="DeleteButton",DeleteButton.propTypes={choiceLabel:prop_types.string,deleteFn:prop_types.func.isRequired,disabled:prop_types.bool,tabIndex:prop_types.number};const components_DeleteButton=DeleteButton;DeleteButton.__docgenInfo={description:"",methods:[],displayName:"DeleteButton",props:{choiceLabel:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},tabIndex:{defaultValue:{value:"-1",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},deleteFn:{description:"",type:{name:"func"},required:!0}}};var StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"ChoiceButton__StyledBox",componentId:"sc-1pu1zl-0"})([""," color:",";&:focus{border:2px solid ",";outline:none;}&:hover{background:",";box-shadow:0 0 8px 2px ",";color:",";}"],(function(props){return props.selected?(0,styled_components_browser_esm.css)(["background:",";border:1px solid ",";box-shadow:0 0 8px 2px ",";"],props.theme.global.colors["neutral-1"],props.theme.global.colors["neutral-6"],props.theme.global.colors["accent-1"]):(0,styled_components_browser_esm.css)(["background:",";@media (max-width:430px){background:",";}"],props.shadedBackground?props.theme.global.colors[props.theme.dark?"dark-4":"light-1"]:props.theme.global.colors[props.theme.dark?"dark-5":"neutral-6"],props.index%2?props.theme.global.colors[props.theme.dark?"dark-5":"neutral-6"]:props.theme.global.colors[props.theme.dark?"dark-4":"light-1"])}),(function(props){return props.selected?props.theme.global.colors["neutral-6"]:props.theme.global.colors[props.theme.dark?"neutral-6":"neutral-7"]}),(function(props){return props.theme.global.colors["accent-1"]}),(function(props){return props.theme.global.colors["accent-1"]}),(function(props){return props.theme.global.colors["accent-1"]}),(function(props){return props.theme.global.colors["neutral-7"]})),ChoiceButton_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ChoiceButton__StyledButton",componentId:"sc-1pu1zl-1"})(["box-shadow:none;flex-grow:1;height:100%;&:focus{border:2px solid ",";box-shadow:none;outline:none;}"],(function(props){return props.theme.global.colors["accent-1"]})),StyledImage=(0,styled_components_browser_esm.default)(Image._).withConfig({displayName:"ChoiceButton__StyledImage",componentId:"sc-1pu1zl-2"})(["border-radius:4px;object-fit:cover;"]),StyledLabel=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"ChoiceButton__StyledLabel",componentId:"sc-1pu1zl-3"})(["display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;"]),DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function ChoiceButton(_ref){var _ref$choiceId=_ref.choiceId,choiceId=void 0===_ref$choiceId?"":_ref$choiceId,_ref$choiceLabel=_ref.choiceLabel,choiceLabel=void 0===_ref$choiceLabel?"":_ref$choiceLabel,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$hasFocus=_ref.hasFocus,hasFocus=void 0!==_ref$hasFocus&&_ref$hasFocus,_ref$index=_ref.index,index=void 0===_ref$index?0:_ref$index,_ref$onChoose=_ref.onChoose,onChoose=void 0===_ref$onChoose?DEFAULT_HANDLER:_ref$onChoose,_ref$onDelete=_ref.onDelete,onDelete=void 0===_ref$onDelete?DEFAULT_HANDLER:_ref$onDelete,_ref$onKeyDown=_ref.onKeyDown,onKeyDown=void 0===_ref$onKeyDown?DEFAULT_HANDLER:_ref$onKeyDown,_ref$selected=_ref.selected,selected=void 0!==_ref$selected&&_ref$selected,_ref$shadedBackground=_ref.shadedBackground,shadedBackground=void 0!==_ref$shadedBackground&&_ref$shadedBackground,_ref$src=_ref.src,src=void 0===_ref$src?"":_ref$src,_ref$tabIndex=_ref.tabIndex,tabIndex=void 0===_ref$tabIndex?-1:_ref$tabIndex,_ref$thumbnailSize=_ref.thumbnailSize,thumbnailSize=void 0===_ref$thumbnailSize?"none":_ref$thumbnailSize,t=(0,i18n.Bd)("plugins").t,choiceMenuItem=(0,react.useRef)(null),handleClick=(0,react.useCallback)((function(){onChoose(choiceId)}),[choiceId,onChoose]),handleDelete=(0,react.useCallback)((function(){onDelete(choiceId)}),[choiceId,onDelete]),handleKeyDown=(0,react.useCallback)((function(event){onKeyDown(choiceId,event)}),[choiceId,onKeyDown]);(0,react.useEffect)((function(){choiceMenuItem&&hasFocus&&choiceMenuItem.current.focus()}));var thumbnailWidth=Math.round(187.5),thumbnailSrc="https://thumbnails.zooniverse.org/".concat(thumbnailWidth,"x").concat(150,"/").concat(src.slice(8));return(0,jsx_runtime.jsxs)(StyledBox,{ref:choiceMenuItem,a11yTitle:"".concat(choiceLabel)+(selected?"; ".concat(t("SurveyTask.ChoiceButton.identified")):""),"aria-haspopup":"true",role:"menuitem",align:"center",direction:"row",fill:!0,index,onKeyDown:disabled?DEFAULT_HANDLER:handleKeyDown,pad:{right:"10px"},shadedBackground,selected,tabIndex,children:[selected?(0,jsx_runtime.jsx)(components_DeleteButton,{choiceLabel,deleteFn:handleDelete,disabled,tabIndex:selected&&0===tabIndex?0:-1,children:"none"===thumbnailSize?(0,jsx_runtime.jsx)(Box.a,{width:"40px"}):(0,jsx_runtime.jsx)(StyledImage,{alt:"",height:"50px",src:thumbnailSrc,width:"small"===thumbnailSize?"50px":"60px"})}):null,(0,jsx_runtime.jsx)(ChoiceButton_StyledButton,{a11yTitle:t("SurveyTask.ChoiceButton.openSubmenu",{choiceLabel}),disabled,label:(0,jsx_runtime.jsxs)(Box.a,{as:"span",align:"center",direction:"row",overflow:"hidden",children:[!selected&&"none"!==thumbnailSize&&src&&(0,jsx_runtime.jsx)(StyledImage,{alt:"",height:"50px",src:thumbnailSrc,width:"small"===thumbnailSize?"50px":"60px"}),(0,jsx_runtime.jsx)(StyledLabel,{margin:{left:"10px",vertical:"5px"},size:"small"===thumbnailSize?".875rem":"1rem",weight:selected?"bold":"normal",wordBreak:"break-word",children:choiceLabel})]}),margin:{left:selected&&"none"!==thumbnailSize?"2px":"0px"},onClick:handleClick,plain:!0,tabIndex:selected&&0===tabIndex?0:-1})]})}ChoiceButton.displayName="ChoiceButton",ChoiceButton.propTypes={ariaChecked:prop_types.string,choiceId:prop_types.string,choiceLabel:prop_types.string,columnsCount:prop_types.number,disabled:prop_types.bool,hasFocus:prop_types.bool,index:prop_types.number,onChoose:prop_types.func,onDelete:prop_types.func,onKeyDown:prop_types.func,role:prop_types.string,selected:prop_types.bool,shadedBackground:prop_types.bool,src:prop_types.string,tabIndex:prop_types.number,thumbnailSize:prop_types.string};const components_ChoiceButton=ChoiceButton;function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}ChoiceButton.__docgenInfo={description:"",methods:[],displayName:"ChoiceButton",props:{choiceId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},choiceLabel:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},hasFocus:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},index:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},onChoose:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onDelete:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onKeyDown:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},selected:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},shadedBackground:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},src:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},tabIndex:{defaultValue:{value:"-1",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},thumbnailSize:{defaultValue:{value:"'none'",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},ariaChecked:{description:"",type:{name:"custom",raw:"string"},required:!1},columnsCount:{description:"",type:{name:"custom",raw:"number"},required:!1},role:{description:"",type:{name:"custom",raw:"string"},required:!1}}};var StyledGrid=styled_components_browser_esm.default.ul.withConfig({displayName:"Choices__StyledGrid",componentId:"sc-1v9x76b-0"})(["background:",";display:grid;gap:",";grid-auto-flow:column;grid-template-columns:repeat(",",",");grid-template-rows:repeat(",",",");list-style:none;margin:0;padding:0;width:100%;@media (max-width:70rem){grid-template-columns:repeat(",",1fr);}@media (max-width:430px){display:block;li{display:block;height:",";width:100%;}}"],(function(props){return props.theme.global.colors[props.theme.dark?"dark-3":"light-3"]}),(function(props){return props.$hideThumbnails?"1px":"0"}),(function(props){return props.$columnsCount}),(function(props){return 3===props.$columnsCount?props.$hideThumbnails?"165.33px":"166px":2===props.$columnsCount?props.$hideThumbnails?"248.5px":"249px":"1fr"}),(function(props){return props.$rowsCount}),(function(props){return props.$hideThumbnails?"40px":"60px"}),(function(props){return props.$columnsCount}),(function(props){return props.$hideThumbnails?"40px":"60px"}));function Choices(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$filteredChoiceId=_ref.filteredChoiceIds,filteredChoiceIds=void 0===_ref$filteredChoiceId?[]:_ref$filteredChoiceId,_ref$filterOpen=_ref.filterOpen,filterOpen=void 0!==_ref$filterOpen&&_ref$filterOpen,_ref$previousChoiceId=_ref.previousChoiceId,previousChoiceId=void 0===_ref$previousChoiceId?"":_ref$previousChoiceId,_ref$handleDelete=_ref.handleDelete,handleDelete=void 0===_ref$handleDelete?function(){}:_ref$handleDelete,_ref$onChoose=_ref.onChoose,onChoose=void 0===_ref$onChoose?function(){return!0}:_ref$onChoose,_ref$selectedChoiceId=_ref.selectedChoiceIds,selectedChoiceIds=void 0===_ref$selectedChoiceId?[]:_ref$selectedChoiceId,task=_ref.task,_useState2=_slicedToArray((0,react.useState)(filteredChoiceIds.indexOf(previousChoiceId)),2),focusIndex=_useState2[0],setFocusIndex=_useState2[1];(0,react.useEffect)((function resetFocusIndex(){setFocusIndex(filteredChoiceIds.indexOf(previousChoiceId))}),[filteredChoiceIds.length]);var size=(0,react.useContext)(ResponsiveContext.u),columnsCount=howManyColumns(filteredChoiceIds);"small"===size&&3===columnsCount&&(columnsCount=2);var rowsCount=Math.ceil(filteredChoiceIds.length/columnsCount),thumbnailSetting=task.thumbnails||(task.alwaysShowThumbnails?"show":"default"),thumbnailSize=function whatSizeThumbnail(_ref){var length=_ref.length,_ref$thumbnailSetting=_ref.thumbnailSetting,thumbnailSetting=void 0===_ref$thumbnailSetting?"default":_ref$thumbnailSetting;if("hide"===thumbnailSetting)return"none";var columns=howManyColumns({length});return"show"===thumbnailSetting?3===columns?"small":"large":length>30?"none":3===columns?"small":"large"}({length:filteredChoiceIds.length,thumbnailSetting});function handleKeyDown(choiceId,event){var newIndex,index=filteredChoiceIds.indexOf(choiceId);switch(event.key){case"ArrowDown":return event.preventDefault(),event.stopPropagation(),newIndex=(index+1)%filteredChoiceIds.length,setFocusIndex(newIndex),!1;case"ArrowUp":return event.preventDefault(),event.stopPropagation(),-1===(newIndex=index-1)&&(newIndex=filteredChoiceIds.length-1),setFocusIndex(newIndex),!1;case"Backspace":case"Delete":return event.preventDefault(),event.stopPropagation(),handleDelete(choiceId),!1;case"End":return event.preventDefault(),event.stopPropagation(),setFocusIndex(filteredChoiceIds.length-1),!1;case"Enter":case"Space":return event.preventDefault(),event.stopPropagation(),selectedChoiceIds.indexOf(choiceId)>-1?!1:(onChoose(choiceId),!1);case"Home":return event.preventDefault(),event.stopPropagation(),setFocusIndex(0),!1;default:return!0}}return(0,jsx_runtime.jsx)(StyledGrid,{role:"menu",$columnsCount:columnsCount,$rowsCount:rowsCount,$hideThumbnails:"none"===thumbnailSize,children:filteredChoiceIds.map((function(choiceId,index){var _task$choices,_task$images,_choice$images,choice=(null===(_task$choices=task.choices)||void 0===_task$choices?void 0:_task$choices.get(choiceId))||{},selected=selectedChoiceIds.indexOf(choiceId)>-1,src=(null===(_task$images=task.images)||void 0===_task$images?void 0:_task$images.get(null===(_choice$images=choice.images)||void 0===_choice$images?void 0:_choice$images[0]))||"",hasFocus=!filterOpen&&index===focusIndex,tabIndex=-1;(-1===focusIndex&&0===index||focusIndex===index)&&(tabIndex=0);var shadedBackground=function shouldShadeBackground(_ref){var _ref$index=_ref.index,index=void 0===_ref$index?0:_ref$index,_ref$rowsCount=_ref.rowsCount;return index%(void 0===_ref$rowsCount?1:_ref$rowsCount)%2==0}({index,rowsCount});return(0,jsx_runtime.jsx)("li",{role:"presentation",children:(0,jsx_runtime.jsx)(components_ChoiceButton,{choiceId,choiceLabel:task.strings.get("choices.".concat(choiceId,".label")),disabled,hasFocus,index,onChoose,onDelete:handleDelete,onKeyDown:handleKeyDown,selected,shadedBackground,src,tabIndex,thumbnailSize})},choiceId)}))})}Choices.displayName="Choices",Choices.propTypes={disabled:prop_types.bool,filteredChoiceIds:(0,prop_types.arrayOf)(prop_types.string),filterOpen:prop_types.bool,previousChoiceId:prop_types.string,handleDelete:prop_types.func,onChoose:prop_types.func,selectedChoiceIds:(0,prop_types.arrayOf)(prop_types.string),task:(0,prop_types.shape)({help:prop_types.string,required:(0,prop_types.oneOfType)([prop_types.string,prop_types.bool]),taskKey:prop_types.string,thumbnails:prop_types.string,type:prop_types.string}).isRequired};const Choices_Choices=(0,mobxreact_esm.PA)(Choices);Choices.__docgenInfo={description:"",methods:[],displayName:"Choices",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},filteredChoiceIds:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},filterOpen:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},previousChoiceId:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},handleDelete:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onChoose:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},selectedChoiceIds:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},task:{description:"",type:{name:"shape",value:{help:{name:"string",required:!1},required:{name:"union",value:[{name:"string"},{name:"bool"}],required:!1},taskKey:{name:"string",required:!1},thumbnails:{name:"string",required:!1},type:{name:"string",required:!1}}},required:!0}}}},"./src/plugins/tasks/survey/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>survey});var SurveyTask=__webpack_require__("./src/plugins/tasks/survey/components/SurveyTask.jsx"),cuid=__webpack_require__("../../node_modules/cuid/index.js"),cuid_default=__webpack_require__.n(cuid),mobx_state_tree_module=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),Task=__webpack_require__("./src/plugins/tasks/models/Task.js"),Annotation=__webpack_require__("./src/plugins/tasks/models/Annotation.js"),SurveyChoice=mobx_state_tree_module.gK.model("SurveyChoice",{answers:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.frozen({}),{}),choice:mobx_state_tree_module.gK.string,filters:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.frozen({}),{})}),Survey=mobx_state_tree_module.gK.model("Survey",{taskType:mobx_state_tree_module.gK.literal("survey"),value:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.array(SurveyChoice),[])}).views((function(self){return{get isComplete(){return self.value.length>0&&!self._choiceInProgress}}})).volatile((function(self){return{_choiceInProgress:!1}})).actions((function(self){return{setChoiceInProgress:function setChoiceInProgress(boolean){self._choiceInProgress=boolean}}}));const models_SurveyAnnotation=mobx_state_tree_module.gK.compose("SurveyAnnotation",Annotation.A,Survey);function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var CharacteristicValue=mobx_state_tree_module.gK.model("CharacteristicValue",{label:mobx_state_tree_module.gK.string,image:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string)}),Characteristic=mobx_state_tree_module.gK.model("Characteristic",{label:mobx_state_tree_module.gK.string,values:mobx_state_tree_module.gK.map(CharacteristicValue),valuesOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string)}),Answer=mobx_state_tree_module.gK.model("Answer",{label:mobx_state_tree_module.gK.string}),Question=mobx_state_tree_module.gK.model("Question",{label:mobx_state_tree_module.gK.string,multiple:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),required:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),answersOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),answers:mobx_state_tree_module.gK.map(Answer)}),Choice=mobx_state_tree_module.gK.model("Choice",{label:mobx_state_tree_module.gK.string,description:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),noQuestions:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),images:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),characteristics:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string)),confusionsOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),confusions:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.string)}),SurveyTask_Survey=mobx_state_tree_module.gK.model("Survey",{alwaysShowThumbnails:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.boolean),annotation:mobx_state_tree_module.gK.safeReference(models_SurveyAnnotation),characteristics:mobx_state_tree_module.gK.map(Characteristic),characteristicsOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),choices:mobx_state_tree_module.gK.map(Choice),choicesOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),exclusions:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),images:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.string),inclusions:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),questions:mobx_state_tree_module.gK.map(Question),questionsMap:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string)),questionsOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),thumbnails:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.enumeration("thumbnails",["show","hide","default"])),type:mobx_state_tree_module.gK.literal("survey")}).preProcessSnapshot((function(snapshot){if(snapshot.hasOwnProperty("alwaysShowThumbnails")){var newSnapshot=function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},snapshot);return"false"===snapshot.alwaysShowThumbnails&&(newSnapshot.alwaysShowThumbnails=!1),"true"===snapshot.alwaysShowThumbnails&&(newSnapshot.alwaysShowThumbnails=!0),newSnapshot.alwaysShowThumbnails=!!newSnapshot.alwaysShowThumbnails,newSnapshot.hasOwnProperty("thumbnails")||(newSnapshot.thumbnails=newSnapshot.alwaysShowThumbnails?"show":"default"),newSnapshot}return snapshot})).views((function(self){return{defaultAnnotation:function defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_SurveyAnnotation.create({id,task:self.taskKey,taskType:self.type})},isComplete:function isComplete(annotation){return self.required?!(null==annotation||!annotation.isComplete):!annotation._choiceInProgress}}}));const models_SurveyTask=mobx_state_tree_module.gK.compose("SurveyTask",Task.A,SurveyTask_Survey),survey={TaskComponent:SurveyTask.A,TaskModel:models_SurveyTask,AnnotationModel:models_SurveyAnnotation}}}]);