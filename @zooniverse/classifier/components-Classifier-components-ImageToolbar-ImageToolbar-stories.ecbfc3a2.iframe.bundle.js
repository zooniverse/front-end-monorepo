(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[7262,8446],{"../../node_modules/grommet-icons/es6/icons/More.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{K:()=>More});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var More=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"More"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M3 13v-2h2v2H3zm8 0v-2h2v2h-2zm8 0v-2h2v2h-2z"}))});More.displayName="More"},"../../node_modules/valid-url/index.js"(module,__unused_webpack_exports,__webpack_require__){!function(module){"use strict";module.exports.is_uri=is_iri,module.exports.is_http_uri=is_http_iri,module.exports.is_https_uri=is_https_iri,module.exports.is_web_uri=is_web_iri,module.exports.isUri=is_iri,module.exports.isHttpUri=is_http_iri,module.exports.isHttpsUri=is_https_iri,module.exports.isWebUri=is_web_iri;var splitUri=function(uri){return uri.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)};function is_iri(value){if(value&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(value)&&!/%[^0-9a-f]/i.test(value)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)){var splitted,authority,path,query,fragment,scheme="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme&&scheme.length&&path.length>=0){if(authority&&authority.length){if(0!==path.length&&!/^\//.test(path))return}else if(/^\/\//.test(path))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(scheme.toLowerCase()))return out+=scheme+":",authority&&authority.length&&(out+="//"+authority),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_http_iri(value,allowHttps){if(is_iri(value)){var splitted,path,query,fragment,scheme="",authority="",port="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme){if(allowHttps){if("https"!=scheme.toLowerCase())return}else if("http"!=scheme.toLowerCase())return;if(authority)return/:(\d+)$/.test(authority)&&(port=authority.match(/:(\d+)$/)[0],authority=authority.replace(/:\d+$/,"")),out+=scheme+":",out+="//"+authority,port&&(out+=port),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_https_iri(value){return is_http_iri(value,!0)}function is_web_iri(value){return is_http_iri(value)||is_https_iri(value)}}(module=__webpack_require__.nmd(module))},"./src/components/Classifier/components/ImageToolbar/ImageToolbar.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),mobx_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/index.js"),_FieldGuide__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/FieldGuide/index.js"),_components_AnnotateButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/AnnotateButton/index.js"),_components_FullscreenButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/FullscreenButton/index.js"),_components_InvertButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/InvertButton/index.js"),_components_MoveButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/MoveButton/index.js"),_components_ResetButton__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ResetButton/index.js"),_components_RotateButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/RotateButton/index.js"),_components_ZoomInButton__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomInButton/index.js"),_components_ZoomOutButton__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomOutButton/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function storeMapper(classifierStore){return{hasAnnotateTask:classifierStore.subjectViewer.hasAnnotateTask,rotation:classifierStore.subjectViewer.rotation}}function ImageToolbar(props){var _useStores=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.gy)(storeMapper),hasAnnotateTask=_useStores.hasAnnotateTask,rotation=_useStores.rotation,onKeyZoom=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.KG)({rotation}).onKeyZoom;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,_objectSpread(_objectSpread({height:"min-content",onKeyDown:onKeyZoom},props),{},{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{background:{dark:"dark-3",light:"white"},border:{color:{dark:"dark-1",light:"light-3"},side:"all"},direction:"column",fill:!0,pad:"clamp(8px, 15%, 10px)",gap:"2px",children:[hasAnnotateTask&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_AnnotateButton__WEBPACK_IMPORTED_MODULE_4__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_MoveButton__WEBPACK_IMPORTED_MODULE_7__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_ZoomInButton__WEBPACK_IMPORTED_MODULE_10__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_ZoomOutButton__WEBPACK_IMPORTED_MODULE_11__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_RotateButton__WEBPACK_IMPORTED_MODULE_9__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_FullscreenButton__WEBPACK_IMPORTED_MODULE_5__.A,{show:!1}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_ResetButton__WEBPACK_IMPORTED_MODULE_8__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_InvertButton__WEBPACK_IMPORTED_MODULE_6__.A,{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_FieldGuide__WEBPACK_IMPORTED_MODULE_3__.A,{})]}))}const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_1__.PA)(ImageToolbar);ImageToolbar.__docgenInfo={description:"",methods:[],displayName:"ImageToolbar"}},"./src/components/Classifier/components/ImageToolbar/ImageToolbar.stories.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{StyledSmallerWidth:()=>StyledSmallerWidth,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__,withMultiFrameViewer:()=>withMultiFrameViewer,withSingleImageViewer:()=>withSingleImageViewer,withSingleTextViewer:()=>withSingleTextViewer});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),mobx_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2__),_test_factories__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./test/factories/index.js"),_test_mockStore__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./test/mockStore/index.js"),_Layout_components_shared_StyledContainers__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/Layout/components/shared/StyledContainers.jsx"),_SubjectViewer_components_MultiFrameViewer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/index.js"),_SubjectViewer_components_SingleImageViewer__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"),_SubjectViewer_components_SingleTextViewer__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/index.js"),_ImageToolbar__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/ImageToolbar.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Image Toolbar / Image Toolbar",component:_ImageToolbar__WEBPACK_IMPORTED_MODULE_9__.A},subjectSnapshot=_test_factories__WEBPACK_IMPORTED_MODULE_3__.vk.build({locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"}]}),multiFrameSubjectSnapshot=_test_factories__WEBPACK_IMPORTED_MODULE_3__.vk.build({locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/512649e3-33d7-4811-b0f2-64703e687160.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/3eecf251-7205-4ef3-b13f-e930c97d92de.jpeg"}],metadata:{default_frame:1}}),textSubjectSnapshot=_test_factories__WEBPACK_IMPORTED_MODULE_3__.vk.build({locations:[{"text/plain":"https://panoptes-uploads-staging.zooniverse.org/subject_location/82eef33c-11ef-4f96-a4b3-526fc2d4e82f.txt"}]}),workflowSnapshot=_test_factories__WEBPACK_IMPORTED_MODULE_3__.s4.build({configuration:{invert_subject:!0}}),store=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_4__.A)({subject:subjectSnapshot,workflow:workflowSnapshot}),multiFrameSubjectStore=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_4__.A)({subject:multiFrameSubjectSnapshot,workflow:workflowSnapshot}),textSubjectStore=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_4__.A)({subject:textSubjectSnapshot,workflow:workflowSnapshot});function withSingleImageViewer(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_1__.Kq,{classifierStore:store,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_Layout_components_shared_StyledContainers__WEBPACK_IMPORTED_MODULE_5__.nA,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{gridArea:"subject",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_SubjectViewer_components_SingleImageViewer__WEBPACK_IMPORTED_MODULE_7__.Ay,{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default().success,subject:store.subjects.active})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ImageToolbar__WEBPACK_IMPORTED_MODULE_9__.A,{})]})})}function withMultiFrameViewer(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_1__.Kq,{classifierStore:multiFrameSubjectStore,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_Layout_components_shared_StyledContainers__WEBPACK_IMPORTED_MODULE_5__.nA,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{gridArea:"subject",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_SubjectViewer_components_MultiFrameViewer__WEBPACK_IMPORTED_MODULE_6__.A,{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default().success,subject:multiFrameSubjectStore.subjects.active})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ImageToolbar__WEBPACK_IMPORTED_MODULE_9__.A,{})]})})}function withSingleTextViewer(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_1__.Kq,{classifierStore:textSubjectStore,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_Layout_components_shared_StyledContainers__WEBPACK_IMPORTED_MODULE_5__.nA,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{gridArea:"subject",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_SubjectViewer_components_SingleTextViewer__WEBPACK_IMPORTED_MODULE_8__.Ay,{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default().success,subject:textSubjectStore.subjects.active})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ImageToolbar__WEBPACK_IMPORTED_MODULE_9__.A,{})]})})}function StyledSmallerWidth(){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_1__.Kq,{classifierStore:store,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{width:"500px",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)(_Layout_components_shared_StyledContainers__WEBPACK_IMPORTED_MODULE_5__.nA,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{gridArea:"subject",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_SubjectViewer_components_SingleImageViewer__WEBPACK_IMPORTED_MODULE_7__.Ay,{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default().success,subject:store.subjects.active})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_ImageToolbar__WEBPACK_IMPORTED_MODULE_9__.A,{})]})})})}const __namedExportsOrder=["withSingleImageViewer","withMultiFrameViewer","withSingleTextViewer","StyledSmallerWidth"]},"./src/components/Classifier/components/ImageToolbar/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>_ImageToolbar__WEBPACK_IMPORTED_MODULE_0__.A});var _ImageToolbar__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/ImageToolbar.jsx")},"./src/components/Classifier/components/Layout/components/shared/StyledContainers.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ao:()=>StyledImageToolbar,By:()=>StyledImageToolbarContainer,Ry:()=>StyledSubjectContainer,cO:()=>StyledTaskArea,fN:()=>StyledTaskAreaContainer,nA:()=>ViewerGrid});var styled_components__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),grommet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),_ImageToolbar__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/index.js"),ViewerGrid=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.default)(grommet__WEBPACK_IMPORTED_MODULE_1__.x).withConfig({displayName:"StyledContainers__ViewerGrid",componentId:"sc-vstnx3-0"})(["grid-area:viewer;grid-template-columns:auto clamp(3rem,10%,4.5rem);grid-template-rows:auto;grid-template-areas:'subject toolbar';"]),StyledSubjectContainer=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.default)(grommet__WEBPACK_IMPORTED_MODULE_2__.a).withConfig({displayName:"StyledContainers__StyledSubjectContainer",componentId:"sc-vstnx3-1"})(["grid-area:subject;height:fit-content;",""],function(props){return props.hasSurveyTask?(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.css)(["@media screen and (min-width:70rem){position:sticky;top:10px;}"]):(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.css)(["@media screen and (min-width:769px){position:sticky;top:10px;}"])}),StyledImageToolbarContainer=styled_components__WEBPACK_IMPORTED_MODULE_0__.default.div.withConfig({displayName:"StyledContainers__StyledImageToolbarContainer",componentId:"sc-vstnx3-2"})(["grid-area:toolbar;"]),StyledImageToolbar=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.default)(_ImageToolbar__WEBPACK_IMPORTED_MODULE_3__.A).withConfig({displayName:"StyledContainers__StyledImageToolbar",componentId:"sc-vstnx3-3"})(["position:sticky;top:10px;"]),StyledTaskAreaContainer=styled_components__WEBPACK_IMPORTED_MODULE_0__.default.div.withConfig({displayName:"StyledContainers__StyledTaskAreaContainer",componentId:"sc-vstnx3-4"})(["grid-area:task;"]),StyledTaskArea=(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.default)(grommet__WEBPACK_IMPORTED_MODULE_2__.a).withConfig({displayName:"StyledContainers__StyledTaskArea",componentId:"sc-vstnx3-5"})(["",""],function(props){return props.hasSurveyTask?(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.css)(["@media screen and (min-width:70rem){position:sticky;top:10px;}"]):(0,styled_components__WEBPACK_IMPORTED_MODULE_0__.css)(["@media screen and (min-width:769px){position:sticky;top:10px;}"])})},"./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/MultiFrameViewerContainer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>MultiFrameViewer_MultiFrameViewerContainer});var async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),helpers=__webpack_require__("./src/helpers/index.js"),locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),SingleImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),FormUp=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormUp.js"),FormDown=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormDown.js"),More=__webpack_require__("../../node_modules/grommet-icons/es6/icons/More.js"),polished_esm=__webpack_require__("../../node_modules/polished/dist/polished.esm.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var o=r[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,_toPropertyKey(o.key),o)}}function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}function _callSuper(t,o,e){return o=_getPrototypeOf(o),function _possibleConstructorReturn(t,e){if(e&&("object"==_typeof(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,_isNativeReflectConstruct()?Reflect.construct(o,e||[],_getPrototypeOf(t).constructor):o.apply(t,e))}function _isNativeReflectConstruct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_isNativeReflectConstruct=function _isNativeReflectConstruct(){return!!t})()}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}var StyledControlButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FrameCarousel__StyledControlButton",componentId:"sc-eb3aut-0"})(["",""],function(props){return props.theme&&(0,styled_components_browser_esm.css)(["color:",";background:",";&:focus:not(:disabled),&:hover:not(:disabled){background:",";box-shadow:none;}"],props.theme.global.colors["neutral-6"],props.theme.global.colors.brand,(0,polished_esm.uq)(.5,props.theme.global.colors.brand))});function PreviousLabel(){var t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsxs)(Box.a,{as:"span",align:"center",direction:"column",children:[(0,jsx_runtime.jsx)(FormUp.I,{color:"neutral-6"}),t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel")]})}function NextLabel(){var t=(0,i18n.Bd)("components").t;return(0,jsx_runtime.jsxs)(Box.a,{as:"span",align:"center",direction:"column",children:[t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"),(0,jsx_runtime.jsx)(FormDown.t,{color:"neutral-6"})]})}var StyledMedia=(0,styled_components_browser_esm.default)(Media.A).withConfig({displayName:"FrameCarousel__StyledMedia",componentId:"sc-eb3aut-1"})(["height:40px;width:40px;img{aspect-ratio:1 / 1;}"]),StyledLabel=styled_components_browser_esm.default.label.withConfig({displayName:"FrameCarousel__StyledLabel",componentId:"sc-eb3aut-2"})([""," input{opacity:0.01;position:absolute;height:0;width:0;}:hover{cursor:pointer;}"],function(props){return props.theme&&(0,styled_components_browser_esm.css)(["input:checked + ","{border:solid ",";}input:focus + ","{outline:2px solid ",";}input:hover + ","{outline:2px solid ",";}"],StyledMedia,props.theme.global.colors["neutral-2"],StyledMedia,(0,polished_esm.uq)(.5,props.theme.global.colors.brand),StyledMedia,(0,polished_esm.uq)(.5,props.theme.global.colors.brand))}),StyledFrameList=styled_components_browser_esm.default.ul.withConfig({displayName:"FrameCarousel__StyledFrameList",componentId:"sc-eb3aut-3"})(["align-items:center;display:flex;flex-direction:column;flex:1 1 auto;list-style-type:none;margin:0;overflow:auto;padding:0;position:relative;scroll-behavior:smooth;li{height:40px;margin:5px 0;width:40px;&:first-child{margin-top:14px;}&:last-child{margin-bottom:14px;}}"]),FrameCarousel=function(_Component){function FrameCarousel(props){var _this;return function _classCallCheck(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}(this,FrameCarousel),(_this=_callSuper(this,FrameCarousel,[props])).theme=props.theme||{global:{colors:{}}},_this.handleScroll=_this.handleScroll.bind(_this),_this.handlePrevious=_this.handlePrevious.bind(_this),_this.handleNext=_this.handleNext.bind(_this),_this.activeLabel=(0,react.createRef)(),_this.frameList=(0,react.createRef)(),_this}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_setPrototypeOf(t,e)}(FrameCarousel,_Component),function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}(FrameCarousel,[{key:"componentDidMount",value:function componentDidMount(){this.handleScroll()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var frame=this.props.frame;prevProps.frame!==frame&&this.handleScroll()}},{key:"handleScroll",value:function handleScroll(){var _this$activeLabel$cur,_this$frameList$curre,_this$activeLabel$cur2,_this$frameList$curre2,_this$frameList$curre3,labelIsAboveContainerTop=(null===(_this$activeLabel$cur=this.activeLabel.current)||void 0===_this$activeLabel$cur?void 0:_this$activeLabel$cur.offsetTop)<=(null===(_this$frameList$curre=this.frameList.current)||void 0===_this$frameList$curre?void 0:_this$frameList$curre.scrollTop),labelIsBelowContainerBottom=(null===(_this$activeLabel$cur2=this.activeLabel.current)||void 0===_this$activeLabel$cur2?void 0:_this$activeLabel$cur2.offsetTop)>=(null===(_this$frameList$curre2=this.frameList.current)||void 0===_this$frameList$curre2?void 0:_this$frameList$curre2.scrollTop)+(null===(_this$frameList$curre3=this.frameList.current)||void 0===_this$frameList$curre3?void 0:_this$frameList$curre3.clientHeight);if(labelIsAboveContainerTop||labelIsBelowContainerBottom){var newContainerTopPosition=this.activeLabel.current.offsetTop-this.activeLabel.current.offsetHeight;this.frameList.current.scrollTop=newContainerTopPosition}}},{key:"handleFrameChange",value:function handleFrameChange(frameIndex){(0,this.props.onFrameChange)(frameIndex)}},{key:"handlePrevious",value:function handlePrevious(){var frame=this.props.frame;frame>0&&this.handleFrameChange(frame-1)}},{key:"handleNext",value:function handleNext(){var _this$props=this.props,frame=_this$props.frame;frame<_this$props.locations.length&&this.handleFrameChange(frame+1)}},{key:"render",value:function render(){var _this2=this,_this$props2=this.props,frame=_this$props2.frame,locations=_this$props2.locations,t=_this$props2.t,locationElements=locations.map(function(location,index){location.mimeType;var url=location.url,activeFrame=frame===index;return(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsxs)(StyledLabel,{ref:activeFrame?_this2.activeLabel:null,children:[(0,jsx_runtime.jsx)("input",{checked:activeFrame,name:"frame",onChange:function onChange(){return _this2.handleFrameChange(index)},type:"radio"}),(0,jsx_runtime.jsx)(StyledMedia,{alt:t("SubjectViewer.MultiFrameViewer.FrameCarousel.thumbnailAltText"),background:"accent-1",fit:"cover",height:40,placeholder:(0,jsx_runtime.jsx)(More.K,{color:"neutral-6",size:"medium"}),src:url,width:40})]})},"".concat(url,"-").concat(index))});return(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-3",light:"neutral-6"},direction:"column",height:{max:"450px"},width:"4em",children:[(0,jsx_runtime.jsx)(StyledControlButton,{disabled:0===frame,fill:"horizontal",label:(0,jsx_runtime.jsx)(PreviousLabel,{}),onClick:function onClick(){return _this2.handlePrevious()}}),(0,jsx_runtime.jsx)(StyledFrameList,{ref:this.frameList,children:locationElements}),(0,jsx_runtime.jsx)(StyledControlButton,{align:"center",disabled:frame===locations.length-1,fill:"horizontal",label:(0,jsx_runtime.jsx)(NextLabel,{}),onClick:function onClick(){return _this2.handleNext()}})]})}}])}(react.Component);FrameCarousel.propTypes={frame:prop_types_default().number.isRequired,locations:prop_types_default().arrayOf(locationValidator.A).isRequired,onFrameChange:prop_types_default().func.isRequired,theme:prop_types_default().object};var ThemedFrameCarousel=(0,styled_components_browser_esm.withTheme)(FrameCarousel);const MultiFrameViewer_FrameCarousel=(0,i18n.CI)("components")(ThemedFrameCarousel);function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}PreviousLabel.__docgenInfo={description:"",methods:[],displayName:"PreviousLabel"},NextLabel.__docgenInfo={description:"",methods:[],displayName:"NextLabel"},FrameCarousel.__docgenInfo={description:"",methods:[{name:"handleScroll",docblock:null,modifiers:[],params:[],returns:null},{name:"handleFrameChange",docblock:null,modifiers:[],params:[{name:"frameIndex",optional:!1,type:null}],returns:null},{name:"handlePrevious",docblock:null,modifiers:[],params:[],returns:null},{name:"handleNext",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FrameCarousel",props:{frame:{description:"",type:{name:"number"},required:!0},locations:{description:"",type:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"}},required:!0},onFrameChange:{description:"",type:{name:"func"},required:!0},theme:{description:"",type:{name:"object"},required:!1}}};var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},DEFAULT_TOOL={validate:function validate(){}};function MultiFrameViewerContainer(_ref2){var _ref2$activeTool=_ref2.activeTool,activeTool=void 0===_ref2$activeTool?DEFAULT_TOOL:_ref2$activeTool,_ref2$enableInteracti=_ref2.enableInteractionLayer,enableInteractionLayer=void 0!==_ref2$enableInteracti&&_ref2$enableInteracti,_ref2$frame=_ref2.frame,frame=void 0===_ref2$frame?0:_ref2$frame,_ref2$loadingState=_ref2.loadingState,loadingState=void 0===_ref2$loadingState?async_states_default().initialized:_ref2$loadingState,_ref2$onError=_ref2.onError,onError=void 0===_ref2$onError?DEFAULT_HANDLER:_ref2$onError,_ref2$onReady=_ref2.onReady,onReady=void 0===_ref2$onReady?DEFAULT_HANDLER:_ref2$onReady,_ref2$resetView=_ref2.resetView,resetView=void 0===_ref2$resetView?DEFAULT_HANDLER:_ref2$resetView,_ref2$setFrame=_ref2.setFrame,setFrame=void 0===_ref2$setFrame?DEFAULT_HANDLER:_ref2$setFrame,subject=_ref2.subject;return(0,react.useEffect)(function onFrameChange(){null==activeTool||activeTool.validate(),resetView()},[frame]),loadingState===async_states_default().error?(0,jsx_runtime.jsx)("div",{children:"Something went wrong."}):loadingState!==async_states_default().initialized?(0,jsx_runtime.jsxs)(Box.a,{direction:"row",fill:"horizontal",children:[(0,jsx_runtime.jsx)(MultiFrameViewer_FrameCarousel,{frame,onFrameChange:setFrame,locations:subject.locations}),(0,jsx_runtime.jsx)(SingleImageViewer.Ay,{enableInteractionLayer,loadingState,onError,onReady})]}):null}MultiFrameViewerContainer.propTypes={activeTool:prop_types_default().shape({validate:prop_types_default().func}),enableInteractionLayer:prop_types_default().bool,frame:prop_types_default().number,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,resetView:prop_types_default().func,setFrame:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator.A)}).isRequired};const MultiFrameViewer_MultiFrameViewerContainer=(0,helpers.Lg)(MultiFrameViewerContainer,function storeMapper(store){var _store$subjectViewer=store.subjectViewer,frame=_store$subjectViewer.frame,resetView=_store$subjectViewer.resetView,setFrame=_store$subjectViewer.setFrame;return{activeTool:(_slicedToArray(store.workflowSteps.activeStepTasks.filter(function(task){return"drawing"===task.type||"transcription"===task.type}),1)[0]||{}).activeTool,frame,resetView,setFrame}});MultiFrameViewerContainer.__docgenInfo={description:"",methods:[],displayName:"MultiFrameViewerContainer",props:{activeTool:{defaultValue:{value:"{\n  validate: () => {}\n}",computed:!1},description:"",type:{name:"shape",value:{validate:{name:"func",required:!1}}},required:!1},enableInteractionLayer:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},frame:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},resetView:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setFrame:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>_MultiFrameViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A});var _MultiFrameViewerContainer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/MultiFrameViewerContainer.jsx")},"./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>_SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A,tv:()=>_SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A});var _SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewerContainer.jsx");__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewer.jsx")},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledPre=styled_components__WEBPACK_IMPORTED_MODULE_2__.default.pre.withConfig({displayName:"SingleTextViewer__StyledPre",componentId:"sc-igtbcc-0"})(["white-space:pre-wrap;color:",";font-family:'Anonymous Pro',monospace;@font-face{font-family:'Anonymous Pro';font-style:normal;font-weight:400;src:local('Anonymous Pro'),local('Anonymous Pro-Regular'),url(https://fonts.gstatic.com/s/anonymouspro/v21/rP2Bp2a15UIB7Un-bOeISG3pHls29QP-4Ks.woff2)  format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}"],function(props){return props.theme.dark?"inherit":"black"});function SingleTextViewer(_ref){var _ref$content=_ref.content,content=void 0===_ref$content?[""]:_ref$content,_ref$height=_ref.height,height=void 0===_ref$height?"":_ref$height,_ref$subjectId=_ref.subjectId,subjectId=void 0===_ref$subjectId?"":_ref$subjectId,theme=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.useTheme)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{a11yTitle:"Subject ".concat(subjectId," text"),as:"section",flex:"grow",height:{min:height},pad:"xsmall",tabIndex:"0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(StyledPre,{theme,children:content})})}SingleTextViewer.propTypes={content:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prop_types__WEBPACK_IMPORTED_MODULE_1___default().node])),height:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,subjectId:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string};const __WEBPACK_DEFAULT_EXPORT__=SingleTextViewer;SingleTextViewer.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewer",props:{content:{defaultValue:{value:"['']",computed:!1},description:"Array defined by a subject's text mime type location, including labeled text nodes with highlighter task annotations",type:{name:"arrayOf",value:{name:"union",value:[{name:"string"},{name:"node"}]}},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"Minimum height of the text viewer in CSS units eg. '400px', '0.25vh', '20rem' etc.",type:{name:"string"},required:!1},subjectId:{defaultValue:{value:"''",computed:!1},description:"Subject ID",type:{name:"string"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerConnector.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/index.js"),_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx");const __WEBPACK_DEFAULT_EXPORT__=(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.Lg)(_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__.A,function storeMapper(store){var subject=store.subjects.active,loadingState=store.subjectViewer.loadingState;return{latest:null==subject?void 0:subject.stepHistory.latest,loadingState,subject}})},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>SingleTextViewer_SingleTextViewerContainer});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),hooks=__webpack_require__("./src/hooks/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledMark=styled_components_browser_esm.default.mark.withConfig({displayName:"Selection__StyledMark",componentId:"sc-19qu8jh-0"})(["background-color:",";border-radius:8px;color:black;margin-right:.2em;padding:.1em .3em;"],function(props){return props.color}),StyledDeleteButton=styled_components_browser_esm.default.button.withConfig({displayName:"Selection__StyledDeleteButton",componentId:"sc-19qu8jh-1"})(["border:none;background:transparent;font-size:1.2em;padding:0;&:hover{cursor:pointer;}"]);function DEFAULT_HANDLER(){return!0}function Selection(_ref){var color=_ref.color,_ref$handleDelete=_ref.handleDelete,handleDelete=void 0===_ref$handleDelete?DEFAULT_HANDLER:_ref$handleDelete,label=_ref.label,text=_ref.text,t=(0,i18n.Bd)("plugins").t;return(0,jsx_runtime.jsxs)(StyledMark,{"aria-label":"".concat(label,": ").concat(text),"data-selection":text,color,onKeyDown:function onKeyDown(event){"Delete"!==event.key&&"Backspace"!==event.key||handleDelete()},tabIndex:"0",children:[text," ",(0,jsx_runtime.jsx)(StyledDeleteButton,{"aria-label":t("HighlighterTask.delete"),onClick:handleDelete,title:t("HighlighterTask.delete"),children:"Ã—"})]})}Selection.propTypes={color:prop_types_default().string.isRequired,handleDelete:prop_types_default().func,label:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired};const components_Selection=Selection;Selection.__docgenInfo={description:"",methods:[],displayName:"Selection",props:{handleDelete:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},color:{description:"",type:{name:"string"},required:!0},label:{description:"",type:{name:"string"},required:!0},text:{description:"",type:{name:"string"},required:!0}}};var locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),SingleTextViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var defaultSubject={id:"",locations:[]};function SingleTextViewerContainer_DEFAULT_HANDLER(){return!0}function SingleTextViewerContainer(_ref){var highlighterAnnotation,content,_latest$annotations,_ref$frame=_ref.frame,frame=void 0===_ref$frame?0:_ref$frame,_ref$height=_ref.height,height=void 0===_ref$height?"":_ref$height,latest=_ref.latest,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?SingleTextViewerContainer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?SingleTextViewerContainer_DEFAULT_HANDLER:_ref$onReady,_ref$subject=_ref.subject,subject=void 0===_ref$subject?defaultSubject:_ref$subject,_useSubjectText=(0,hooks.XW)({frame,subject,onReady,onError}),data=_useSubjectText.data,error=_useSubjectText.error;_useSubjectText.loading;latest&&(highlighterAnnotation=_slicedToArray(null==latest||null===(_latest$annotations=latest.annotations)||void 0===_latest$annotations?void 0:_latest$annotations.filter(function(annotation){return"highlighter"===annotation.taskType}),1)[0]);return loadingState===async_states_default().error?(0,jsx_runtime.jsxs)("p",{children:["Something went wrong. ",null==error?void 0:error.message]}):loadingState!==async_states_default().initialized?(content=highlighterAnnotation&&highlighterAnnotation.value.length>0?function labeledContent(data,annotation){var newContent=[],lastFocusIndex=0,dataIndex=0,deleteHighlight=annotation.deleteHighlight,value=annotation.value;for(dataIndex=0;dataIndex<data.length;dataIndex++){var _step,_iterator=_createForOfIteratorHelper(value);try{var _loop=function _loop(){var highlight=_step.value;if(highlight.start===dataIndex){var preContent=data.slice(lastFocusIndex,dataIndex);newContent.push(preContent);var newLabel=(0,jsx_runtime.jsx)(components_Selection,{color:highlight.labelInformation.color,handleDelete:function handleDelete(){return deleteHighlight(value.indexOf(highlight))},label:highlight.labelInformation.label,text:highlight.text},"".concat(highlight.start,"-").concat(highlight.end));newContent.push(newLabel),lastFocusIndex=highlight.end+1}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}var endContent=data.slice(lastFocusIndex,dataIndex);return newContent.push(endContent),newContent}(data,highlighterAnnotation):[data],(0,jsx_runtime.jsx)(SingleTextViewer.A,{content,height,subjectId:subject.id})):null}SingleTextViewerContainer.propTypes={height:prop_types_default().string,latest:prop_types_default().shape({annotations:prop_types_default().array}),loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator.A)})};const SingleTextViewer_SingleTextViewerContainer=(0,mobxreact_esm.PA)(SingleTextViewerContainer);SingleTextViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewerContainer",props:{frame:{defaultValue:{value:"0",computed:!1},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"{\n  id: '',\n  locations: []\n}",computed:!1},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1},latest:{description:"",type:{name:"shape",value:{annotations:{name:"array",required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>_SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_0__.A});var _SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerConnector.jsx");__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx"),__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx")},"./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>locationValidator_locationValidator});var valid_url=__webpack_require__("../../node_modules/valid-url/index.js"),mimeTypeRe=/^[-\w+.]+\/[-\w+.]+$/;const locationValidator_locationValidator=function locationValidator(propValue,key,componentName,location,propFullName){var subjectLocation=propValue[key],mimeType=subjectLocation.mimeType,url=subjectLocation.url;if(!mimeTypeRe.test(mimeType)||!(0,valid_url.isUri)(url))return new Error("Invalid prop `"+propFullName+"` supplied to `"+componentName+"`. Validation failed.")}}}]);