"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[8883],{"./src/components/Classifier/components/SubjectViewer/components/InteractionLayer/components/TranscribedLines/TranscribedLines.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,TooltipIconStory:()=>TooltipIconStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>TranscribedLines_stories});var esm=__webpack_require__("../../node_modules/graphql-request/build/esm/index.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),sinon_esm=__webpack_require__("../../node_modules/sinon/pkg/sinon-esm.js"),mockStore=__webpack_require__("./test/mockStore/index.js"),factories=__webpack_require__("./test/factories/index.js");var mocks=__webpack_require__("./src/store/subjects/Subject/TranscriptionReductions/mocks/index.js"),MultiFrameViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/index.js"),TooltipIcon=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/InteractionLayer/components/TranscribedLines/components/TooltipIcon/index.js"),TranscribedLines=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/InteractionLayer/components/TranscribedLines/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),subjectSnapshot=factories.vk.build({id:"13967054",locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/bb2bf18b-4c1e-4a2a-8bc5-444347f44af1.jpeg"}]}),workflowSnapshot=factories.s4.build({id:"5339",display_name:"A test workflow",steps:[["S1",{stepKey:"S1",taskKeys:["T0"]}]],strings:{display_name:"a test workflow","tasks.T0.instruction":"Transcribe a line","tasks.T0.tools.0.details.0.instruction":"Transcribe the text"},tasks:{T0:{instruction:"Transcribe a line",type:"transcription",tools:[{details:[{instruction:"Transcribe the text",required:"true",taskKey:"T0.0",type:"text"}],type:"transcriptionLine"}]}},version:"0.0"}),client={panoptes:{get:function get(){return Promise.resolve({body:{subjects:[],workflows:[]}})}},caesar:new esm.l4("https://caesar.zooniverse.org/graphql"),tutorials:{get:function get(){return Promise.resolve({body:{tutorials:[]}})}}};sinon_esm.Ay.stub(client.caesar,"request").callsFake((function(){return Promise.resolve(mocks.Er)}));var rootStore=(0,mockStore.A)({client,subject:subjectSnapshot,workflow:workflowSnapshot});function TranscribedLinesStory(_ref){var loadingState=_ref.loadingState,stores=_ref.stores,subject=_ref.subject;return(0,jsx_runtime.jsx)(mobxreact_esm.Kq,{classifierStore:stores,children:(0,jsx_runtime.jsx)(Box.a,{width:"1000px",children:(0,jsx_runtime.jsx)(MultiFrameViewer.A,{enableInteractionLayer:!0,loadingState,subject})})})}TranscribedLinesStory.displayName="TranscribedLinesStory";const TranscribedLines_stories={title:"Drawing Tools / TranscribedLines",component:TranscribedLines.A,parameters:{docs:{description:{component:"# TranscribedLines\n"}}}};function Default(_ref2){var loadingState=_ref2.loadingState,_ref2$stores=_ref2.stores,stores=void 0===_ref2$stores?rootStore:_ref2$stores,subject=_ref2.subject;return(0,jsx_runtime.jsx)(TranscribedLinesStory,{loadingState,stores,subject})}function TooltipIconStory(_ref3){var _ref3$fill=_ref3.fill,fill=void 0===_ref3$fill?"drawing-pink":_ref3$fill;return(0,jsx_runtime.jsx)(TooltipIcon.A,{fill})}Default.displayName="Default",Default.args={loadingState:rootStore.subjects.loadingState,stores:rootStore,subject:rootStore.subjects.active},TooltipIconStory.displayName="TooltipIconStory",TooltipIconStory.args={fill:"drawing-pink"},TooltipIconStory.argTypes={fill:{control:{type:"select"},options:["drawing-pink","light-5"]}},Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"function Default({\n  loadingState,\n  stores = rootStore,\n  subject\n}) {\n  return <TranscribedLinesStory loadingState={loadingState} stores={stores} subject={subject} />;\n}",...Default.parameters?.docs?.source}}},TooltipIconStory.parameters={...TooltipIconStory.parameters,docs:{...TooltipIconStory.parameters?.docs,source:{originalSource:"function TooltipIconStory({\n  fill = 'drawing-pink'\n}) {\n  return <TooltipIcon fill={fill} />;\n}",...TooltipIconStory.parameters?.docs?.source}}};const __namedExportsOrder=["Default","TooltipIconStory"]},"./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_MultiFrameViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A});var _MultiFrameViewerContainer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/MultiFrameViewer/MultiFrameViewerContainer.jsx")},"./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewerContainer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__),mobx_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/prop-types/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.js"),_components_PlaceholderSVG__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/components/PlaceholderSVG.jsx"),_SingleImageViewer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewer.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function storeMapper(classifierStore){var subject=classifierStore.subjects.active,_classifierStore$subj=classifierStore.subjectViewer,enableRotation=_classifierStore$subj.enableRotation,frame=_classifierStore$subj.frame,invert=_classifierStore$subj.invert,move=_classifierStore$subj.move,rotation=_classifierStore$subj.rotation,setOnZoom=_classifierStore$subj.setOnZoom,setOnPan=_classifierStore$subj.setOnPan;return{enableRotation,frame,invert,limitSubjectHeight:classifierStore.workflows.active.configuration.limit_subject_height,move,rotation,setOnZoom,setOnPan,subject}}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function SingleImageViewerContainer(_ref){var _subject$locations$fr,_ref$enableInteractio=_ref.enableInteractionLayer,enableInteractionLayer=void 0===_ref$enableInteractio||_ref$enableInteractio,_ref$imageLocation=_ref.imageLocation,imageLocation=void 0===_ref$imageLocation?null:_ref$imageLocation,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,_ref$setOnPan=_ref.setOnPan,propSetOnPan=void 0===_ref$setOnPan?null:_ref$setOnPan,_ref$setOnZoom=_ref.setOnZoom,propSetOnZoom=void 0===_ref$setOnZoom?null:_ref$setOnZoom,_ref$title=_ref.title,title=void 0===_ref$title?void 0:_ref$title,_ref$zoomControlFn=_ref.zoomControlFn,zoomControlFn=void 0===_ref$zoomControlFn?null:_ref$zoomControlFn,_ref$zooming=_ref.zooming,zooming=void 0===_ref$zooming||_ref$zooming,_useStores=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.gy)(storeMapper),enableRotation=_useStores.enableRotation,frame=_useStores.frame,invert=_useStores.invert,limitSubjectHeight=_useStores.limitSubjectHeight,move=_useStores.move,rotation=_useStores.rotation,storeSetOnZoom=_useStores.setOnZoom,storeSetOnPan=_useStores.setOnPan,subject=_useStores.subject,onKeyZoom=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.KG)().onKeyZoom,effectiveSetOnPan=propSetOnPan||storeSetOnPan,effectiveSetOnZoom=propSetOnZoom||storeSetOnZoom,imageLocationUrl=null!=imageLocation&&imageLocation.url?imageLocation.url:null==subject||null===(_subject$locations$fr=subject.locations[frame])||void 0===_subject$locations$fr?void 0:_subject$locations$fr.url,_useSubjectImage=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.Ze)({frame,src:imageLocationUrl,onError,onReady}),img=_useSubjectImage.img,subjectImage=(_useSubjectImage.error,_useSubjectImage.loading,_useSubjectImage.subjectImage),_img$naturalHeight=img.naturalHeight,naturalHeight=void 0===_img$naturalHeight?600:_img$naturalHeight,_img$naturalWidth=img.naturalWidth,naturalWidth=void 0===_img$naturalWidth?800:_img$naturalWidth;return loadingState===_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_components_PlaceholderSVG__WEBPACK_IMPORTED_MODULE_4__.A,{ref:subjectImage,maxHeight:limitSubjectHeight?"min(".concat(naturalHeight,"px, 90vh)"):null,maxWidth:limitSubjectHeight?"".concat(naturalWidth,"px"):"100%",viewBox:"0 0 ".concat(naturalWidth," ").concat(naturalHeight)}):loadingState===_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:"Something went wrong."}):loadingState===_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().success?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_SingleImageViewer__WEBPACK_IMPORTED_MODULE_5__.A,{enableInteractionLayer,enableRotation,frame,imgRef:subjectImage,invert,limitSubjectHeight,move,naturalHeight,naturalWidth,onKeyDown:onKeyZoom,rotation,setOnPan:effectiveSetOnPan,setOnZoom:effectiveSetOnZoom,src:img.src,subject,title,zoomControlFn,zooming}):null}SingleImageViewerContainer.propTypes={enableInteractionLayer:prop_types__WEBPACK_IMPORTED_MODULE_2__.bool,imageLocation:(0,prop_types__WEBPACK_IMPORTED_MODULE_2__.shape)({url:prop_types__WEBPACK_IMPORTED_MODULE_2__.string}),loadingState:prop_types__WEBPACK_IMPORTED_MODULE_2__.string,onError:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,onReady:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,setOnPan:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,setOnZoom:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,title:(0,prop_types__WEBPACK_IMPORTED_MODULE_2__.shape)({id:prop_types__WEBPACK_IMPORTED_MODULE_2__.string,text:prop_types__WEBPACK_IMPORTED_MODULE_2__.string}),zoomControlFn:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,zooming:prop_types__WEBPACK_IMPORTED_MODULE_2__.bool};const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_1__.PA)(SingleImageViewerContainer);SingleImageViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SingleImageViewerContainer",props:{enableInteractionLayer:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},imageLocation:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"shape",value:{url:{name:"string",required:!1}}},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"custom",raw:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},setOnPan:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},setOnZoom:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},title:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},text:{name:"string",required:!1}}},required:!1},zoomControlFn:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},zooming:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/components/PlaceholderSVG.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/prop-types/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledPlaceholderSVG=styled_components__WEBPACK_IMPORTED_MODULE_2__.default.svg.withConfig({displayName:"PlaceholderSVG__StyledPlaceholderSVG",componentId:"sc-1h02og5-0"})(["background:no-repeat center / cover url('https://static.zooniverse.org/www.zooniverse.org/assets/fe-project-subject-placeholder-800x600.png');touch-action:pinch-zoom;max-width:",";",""],(function(props){return props.$maxWidth}),(function(props){return props.$maxHeight&&(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.css)(["max-height:",";"],props.$maxHeight)})),PlaceholderSVG=(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((function PlaceholderSVG(_ref,ref){var _ref$maxWidth=_ref.maxWidth,maxWidth=void 0===_ref$maxWidth?"100%":_ref$maxWidth,maxHeight=_ref.maxHeight,_ref$viewBox=_ref.viewBox,viewBox=void 0===_ref$viewBox?"0 0 800 600":_ref$viewBox;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(StyledPlaceholderSVG,{ref,"data-testid":"placeholder-svg",focusable:!0,$maxHeight:maxHeight,$maxWidth:maxWidth,tabIndex:0,viewBox})}));PlaceholderSVG.displayName="PlaceholderSVG",PlaceholderSVG.propTypes={maxWidth:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,maxHeight:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,viewBox:prop_types__WEBPACK_IMPORTED_MODULE_0__.string};const __WEBPACK_DEFAULT_EXPORT__=PlaceholderSVG;PlaceholderSVG.__docgenInfo={description:"",methods:[],displayName:"PlaceholderSVG",props:{maxWidth:{defaultValue:{value:"'100%'",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},viewBox:{defaultValue:{value:"'0 0 800 600'",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},maxHeight:{description:"",type:{name:"custom",raw:"string"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ay:()=>_SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A,tv:()=>_SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A});var _SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewerContainer.jsx");__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewer.jsx")},"./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>locationValidator_locationValidator});var valid_url=__webpack_require__("../../node_modules/valid-url/index.js"),mimeTypeRe=/^[-\w+.]+\/[-\w+.]+$/;const locationValidator_locationValidator=function locationValidator(propValue,key,componentName,location,propFullName){var subjectLocation=propValue[key],mimeType=subjectLocation.mimeType,url=subjectLocation.url;if(!mimeTypeRe.test(mimeType)||!(0,valid_url.isUri)(url))return new Error("Invalid prop `"+propFullName+"` supplied to `"+componentName+"`. Validation failed.")}}}]);