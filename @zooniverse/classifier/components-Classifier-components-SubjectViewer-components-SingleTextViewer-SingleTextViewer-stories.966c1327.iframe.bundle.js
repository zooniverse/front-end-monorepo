(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[494],{"../../node_modules/sinon/pkg sync recursive"(module){function webpackEmptyContext(req){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}webpackEmptyContext.keys=()=>[],webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id="../../node_modules/sinon/pkg sync recursive",module.exports=webpackEmptyContext},"../../node_modules/valid-url/index.js"(module,__unused_webpack_exports,__webpack_require__){!function(module){"use strict";module.exports.is_uri=is_iri,module.exports.is_http_uri=is_http_iri,module.exports.is_https_uri=is_https_iri,module.exports.is_web_uri=is_web_iri,module.exports.isUri=is_iri,module.exports.isHttpUri=is_http_iri,module.exports.isHttpsUri=is_https_iri,module.exports.isWebUri=is_web_iri;var splitUri=function(uri){return uri.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)};function is_iri(value){if(value&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(value)&&!/%[^0-9a-f]/i.test(value)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)){var splitted,authority,path,query,fragment,scheme="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme&&scheme.length&&path.length>=0){if(authority&&authority.length){if(0!==path.length&&!/^\//.test(path))return}else if(/^\/\//.test(path))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(scheme.toLowerCase()))return out+=scheme+":",authority&&authority.length&&(out+="//"+authority),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_http_iri(value,allowHttps){if(is_iri(value)){var splitted,path,query,fragment,scheme="",authority="",port="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme){if(allowHttps){if("https"!=scheme.toLowerCase())return}else if("http"!=scheme.toLowerCase())return;if(authority)return/:(\d+)$/.test(authority)&&(port=authority.match(/:(\d+)$/)[0],authority=authority.replace(/:\d+$/,"")),out+=scheme+":",out+="//"+authority,port&&(out+=port),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_https_iri(value){return is_http_iri(value,!0)}function is_web_iri(value){return is_http_iri(value)||is_https_iri(value)}}(module=__webpack_require__.nmd(module))},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledPre=styled_components__WEBPACK_IMPORTED_MODULE_2__.default.pre.withConfig({displayName:"SingleTextViewer__StyledPre",componentId:"sc-igtbcc-0"})(["white-space:pre-wrap;color:",";font-family:'Anonymous Pro',monospace;@font-face{font-family:'Anonymous Pro';font-style:normal;font-weight:400;src:local('Anonymous Pro'),local('Anonymous Pro-Regular'),url(https://fonts.gstatic.com/s/anonymouspro/v21/rP2Bp2a15UIB7Un-bOeISG3pHls29QP-4Ks.woff2)  format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}"],function(props){return props.theme.dark?"inherit":"black"});function SingleTextViewer(_ref){var _ref$content=_ref.content,content=void 0===_ref$content?[""]:_ref$content,_ref$height=_ref.height,height=void 0===_ref$height?"":_ref$height,_ref$subjectId=_ref.subjectId,subjectId=void 0===_ref$subjectId?"":_ref$subjectId,theme=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.useTheme)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{a11yTitle:"Subject ".concat(subjectId," text"),as:"section",flex:"grow",height:{min:height},pad:"xsmall",tabIndex:"0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(StyledPre,{theme,children:content})})}SingleTextViewer.propTypes={content:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prop_types__WEBPACK_IMPORTED_MODULE_1___default().node])),height:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,subjectId:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string};const __WEBPACK_DEFAULT_EXPORT__=SingleTextViewer;SingleTextViewer.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewer",props:{content:{defaultValue:{value:"['']",computed:!1},description:"Array defined by a subject's text mime type location, including labeled text nodes with highlighter task annotations",type:{name:"arrayOf",value:{name:"union",value:[{name:"string"},{name:"node"}]}},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"Minimum height of the text viewer in CSS units eg. '400px', '0.25vh', '20rem' etc.",type:{name:"string"},required:!1},subjectId:{defaultValue:{value:"''",computed:!1},description:"Subject ID",type:{name:"string"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.stories.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,WithLabeledText:()=>WithLabeledText,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),mobx_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2__),_test_factories__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./test/factories/index.js"),_test_mockStore__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./test/mockStore/index.js"),_SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerConnector.jsx"),_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Subject Viewers / SingleTextViewer",component:_SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_5__.A,args:{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default().success},argTypes:{loadingState:{options:Object.values(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default()),type:"select"}}},subjectSnapshot=_test_factories__WEBPACK_IMPORTED_MODULE_3__.vk.build({id:"1234",locations:[{"text/plain":"https://panoptes-uploads-staging.zooniverse.org/subject_location/82eef33c-11ef-4f96-a4b3-526fc2d4e82f.txt"}]}),store=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_4__.A)({subject:subjectSnapshot});function Default({loadingState}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_1__.Kq,{classifierStore:store,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{width:"large",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_5__.A,{loadingState})})})}const latest={annotations:[{taskType:"highlighter",value:[{labelInformation:{color:"#e65252",label:"Scientific Name"},start:77,end:101,text:"Vitis rotundifolia Michx"},{labelInformation:{color:"#f1ae45",label:"Date"},start:316,end:325,text:"9/15/2001"},{labelInformation:{color:"#fced54",label:"Country"},start:17,end:39,text:"UNIVERSTY OF TENNESSEE"},{labelInformation:{color:"#ee7bcf",label:"County"},start:60,end:76,text:"Van Baren County"},{labelInformation:{color:"#c7f55b",label:"State / Province"},start:50,end:59,text:"Tennessee"},{labelInformation:{color:"#65eeca",label:"Locality"},start:184,end:227,text:"edge of forest along trail near campsite #1"},{labelInformation:{color:"#52db72",label:"Scientific Name"},start:102,end:129,text:"Fall Creek Falls State Park"},{labelInformation:{color:"#7cdff2",label:"Country"},start:229,end:294,text:"ca. 2.7\nkm W of trailhead at North Entrance of patk Sampson Quad."},{labelInformation:{color:"#8aa0d3",label:"State / Province"},start:334,end:369,text:"Chris A. Fleming and Charles Winder"},{labelInformation:{color:"#c17ddf",label:"County"},start:303,end:315,text:"No: FCF-1589"},{labelInformation:{color:"#e7bbe3",label:"Date"},start:131,end:171,text:"Located along Lower Loop Overnight\nTrail"}]}]},WithLabeledText=({loadingState})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{width:"large",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_6__.A,{latest,loadingState,subject:store.subjects.active})}),__namedExportsOrder=["Default","WithLabeledText"]},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerConnector.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/index.js"),_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx");const __WEBPACK_DEFAULT_EXPORT__=(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.Lg)(_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__.A,function storeMapper(store){var subject=store.subjects.active,loadingState=store.subjectViewer.loadingState;return{latest:null==subject?void 0:subject.stepHistory.latest,loadingState,subject}})},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>SingleTextViewer_SingleTextViewerContainer});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),hooks=__webpack_require__("./src/hooks/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledMark=styled_components_browser_esm.default.mark.withConfig({displayName:"Selection__StyledMark",componentId:"sc-19qu8jh-0"})(["background-color:",";border-radius:8px;color:black;margin-right:.2em;padding:.1em .3em;"],function(props){return props.color}),StyledDeleteButton=styled_components_browser_esm.default.button.withConfig({displayName:"Selection__StyledDeleteButton",componentId:"sc-19qu8jh-1"})(["border:none;background:transparent;font-size:1.2em;padding:0;&:hover{cursor:pointer;}"]);function DEFAULT_HANDLER(){return!0}function Selection(_ref){var color=_ref.color,_ref$handleDelete=_ref.handleDelete,handleDelete=void 0===_ref$handleDelete?DEFAULT_HANDLER:_ref$handleDelete,label=_ref.label,text=_ref.text,t=(0,i18n.Bd)("plugins").t;return(0,jsx_runtime.jsxs)(StyledMark,{"aria-label":"".concat(label,": ").concat(text),"data-selection":text,color,onKeyDown:function onKeyDown(event){"Delete"!==event.key&&"Backspace"!==event.key||handleDelete()},tabIndex:"0",children:[text," ",(0,jsx_runtime.jsx)(StyledDeleteButton,{"aria-label":t("HighlighterTask.delete"),onClick:handleDelete,title:t("HighlighterTask.delete"),children:"Ã—"})]})}Selection.propTypes={color:prop_types_default().string.isRequired,handleDelete:prop_types_default().func,label:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired};const components_Selection=Selection;Selection.__docgenInfo={description:"",methods:[],displayName:"Selection",props:{handleDelete:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},color:{description:"",type:{name:"string"},required:!0},label:{description:"",type:{name:"string"},required:!0},text:{description:"",type:{name:"string"},required:!0}}};var locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),SingleTextViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var defaultSubject={id:"",locations:[]};function SingleTextViewerContainer_DEFAULT_HANDLER(){return!0}function SingleTextViewerContainer(_ref){var highlighterAnnotation,content,_latest$annotations,_ref$frame=_ref.frame,frame=void 0===_ref$frame?0:_ref$frame,_ref$height=_ref.height,height=void 0===_ref$height?"":_ref$height,latest=_ref.latest,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?SingleTextViewerContainer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?SingleTextViewerContainer_DEFAULT_HANDLER:_ref$onReady,_ref$subject=_ref.subject,subject=void 0===_ref$subject?defaultSubject:_ref$subject,_useSubjectText=(0,hooks.XW)({frame,subject,onReady,onError}),data=_useSubjectText.data,error=_useSubjectText.error;_useSubjectText.loading;latest&&(highlighterAnnotation=_slicedToArray(null==latest||null===(_latest$annotations=latest.annotations)||void 0===_latest$annotations?void 0:_latest$annotations.filter(function(annotation){return"highlighter"===annotation.taskType}),1)[0]);return loadingState===async_states_default().error?(0,jsx_runtime.jsxs)("p",{children:["Something went wrong. ",null==error?void 0:error.message]}):loadingState!==async_states_default().initialized?(content=highlighterAnnotation&&highlighterAnnotation.value.length>0?function labeledContent(data,annotation){var newContent=[],lastFocusIndex=0,dataIndex=0,deleteHighlight=annotation.deleteHighlight,value=annotation.value;for(dataIndex=0;dataIndex<data.length;dataIndex++){var _step,_iterator=_createForOfIteratorHelper(value);try{var _loop=function _loop(){var highlight=_step.value;if(highlight.start===dataIndex){var preContent=data.slice(lastFocusIndex,dataIndex);newContent.push(preContent);var newLabel=(0,jsx_runtime.jsx)(components_Selection,{color:highlight.labelInformation.color,handleDelete:function handleDelete(){return deleteHighlight(value.indexOf(highlight))},label:highlight.labelInformation.label,text:highlight.text},"".concat(highlight.start,"-").concat(highlight.end));newContent.push(newLabel),lastFocusIndex=highlight.end+1}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}var endContent=data.slice(lastFocusIndex,dataIndex);return newContent.push(endContent),newContent}(data,highlighterAnnotation):[data],(0,jsx_runtime.jsx)(SingleTextViewer.A,{content,height,subjectId:subject.id})):null}SingleTextViewerContainer.propTypes={height:prop_types_default().string,latest:prop_types_default().shape({annotations:prop_types_default().array}),loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator.A)})};const SingleTextViewer_SingleTextViewerContainer=(0,mobxreact_esm.PA)(SingleTextViewerContainer);SingleTextViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewerContainer",props:{frame:{defaultValue:{value:"0",computed:!1},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"{\n  id: '',\n  locations: []\n}",computed:!1},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1},latest:{description:"",type:{name:"shape",value:{annotations:{name:"array",required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>locationValidator_locationValidator});var valid_url=__webpack_require__("../../node_modules/valid-url/index.js"),mimeTypeRe=/^[-\w+.]+\/[-\w+.]+$/;const locationValidator_locationValidator=function locationValidator(propValue,key,componentName,location,propFullName){var subjectLocation=propValue[key],mimeType=subjectLocation.mimeType,url=subjectLocation.url;if(!mimeTypeRe.test(mimeType)||!(0,valid_url.isUri)(url))return new Error("Invalid prop `"+propFullName+"` supplied to `"+componentName+"`. Validation failed.")}},"./test/factories/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{wC:()=>DrawingTaskFactory,vR:()=>FieldGuideFactory,MJ:()=>FieldGuideMediumFactory,uQ:()=>ProjectFactory,vk:()=>SubjectFactory,$Z:()=>SubjectSetFactory,Ym:()=>TutorialMediumFactory,ez:()=>UPPFactory,s4:()=>WorkflowFactory});var rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),medium=(new rosie.$).sequence("id",function(id){return id.toString()}).attr("external_link",!1),TutorialMediumFactory=(new rosie.$).extend(medium).attr("content_type","image/gif").attr("href",["id"],function(id){return"/tutorials/20/attached_images/".concat(id)}).attr("links",{linked:{href:"/tutorials/20",id:"20",type:"tutorials"}}).attr("media_type","tutorial_attached_image").attr("metadata",{}).attr("src","https://panoptes-uploads.zooniverse.org/staging/tutorial_attached_image/1ab2bd93-b422-4d10-a700-fa34d4e7e716.gif"),FieldGuideMediumFactory=(new rosie.$).extend(medium).attr("content_type","image/png").attr("external_link",!1).attr("href",["id"],function(id){return"/field_guides/25/attached_images/".concat(id)}).attr("links",{linked:{href:"/field_guides/25",id:"20",type:"field_guides"}}).attr("media_type","field_guide_attached_image").attr("metadata",{}).attr("src","https://panoptes-uploads.zooniverse.org/staging/field_guide_attached_image/a04dc00f-ef28-4e52-9490-368ba9029aca.png");const ProjectFactory=(new rosie.$).sequence("id",function(id){return id.toString()}).option("activeWorkflowId","12345").option("workflowId","67890").attr("display_name",["id"],function(id){return"Project #".concat(id)}).attr("configuration",["activeWorkflowId"],function(activeWorkflowId){return{default_workflow:activeWorkflowId}}).attr("experimental_tools",[]).attr("links",["activeWorkflowId","workflowId"],function(activeWorkflowId,workflowId){return{active_workflows:[activeWorkflowId],workflows:[activeWorkflowId,workflowId]}}).attr("slug","zooniverse/example");const SubjectFactory=rosie.$.define("subject").sequence("id",function(id){return id.toString()}).attr("already_seen",!1).attr("favorite",!1).attr("finished_workflow",!1).attr("locations",function(){return[1,2,3,4,5,6,7,8,9,10,11].map(function(int){var randomString=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);return{"image/png":"https://foo.bar/".concat(randomString,".png")}})}).attr("metadata",{}).attr("retired",!1).attr("selected_at","2019-04-11T11:16:29.063Z").attr("selection_state","").attr("user_has_finished_workflow",!1),SubjectSetFactory=rosie.$.define("subject_set").sequence("id",function(id){return id.toString()}).attr("display_name","Hello there!").attr("metadata",{}).attr("set_member_subjects_count",56).attr("links",{});var subjectSets=rosie.$.buildList("subject_set",5);const WorkflowFactory=rosie.$.define("workflow").sequence("id",function(id){return id.toString()}).attr("display_name",["id"],function(id){return"Workflow #".concat(id)}).attr("active",!0).attr("configuration",{}).attr("first_task","").attr("grouped",!1).attr("links",{subject_sets:subjectSets.map(function(subjectSet){return subjectSet.id})}).attr("tasks",{}).attr("steps",[]).attr("subjectSets",{resources:{}}).attr("version","1.0"),UPPFactory=((new rosie.$).sequence("id",function(id){return id.toString()}).attr("display_name",["id"],function(id){return"Tutorial #".concat(id)}).attr("kind","tutorial").attr("language","en").attr("steps",[]),(new rosie.$).sequence("id",function(id){return id.toString()}).attr("activity_count",100).attr("activity_count_by_workflow",{}).attr("links",{}).attr("preferences",{minicourses:{},selected_workflow:"",tutorials_completed_at:{}}).attr("settings",{})),FieldGuideFactory=((new rosie.$).sequence("id",function(id){return id.toString()}).attr("admin",!1).attr("avatar_src","").attr("banned",!1).attr("beta_email_communication",!0).attr("credited_name","Jane Doe").attr("display_name","Jane").attr("email","jane@gmail.com").attr("global_email_communication",!0).attr("href",["id"],function(id){return"/users/".concat(id)}).attr("intervention_notifications",!0).attr("languages",[]).attr("login","janedoe01").attr("login_prompt",!1).attr("private_profile",!0).attr("project_email_communication",!0).attr("subject_limit",100).attr("type","users").attr("upload_whitelist",!1).attr("uploaded_subjects_count",0).attr("ux_test_email_communication",!1).attr("valid_email",!0).attr("zooniverse_id",""),(new rosie.$).sequence("id",function(id){return id.toString()}).attr("annotations",{}).attr("completed",!1).attr("links",{}).attr("metadata",{classifier_version:"2.0",source:"api",userLanguage:"",workflowVersion:""}),(new rosie.$).sequence("id",function(id){return id.toString()}).attr("items",[]).attr("language","en")),DrawingTaskFactory=((new rosie.$).attr("isActive",!1).attr("rules",{}).attr("show_model",!1),(new rosie.$).attr("instruction","Please draw something").attr("tools",[]).attr("type","drawing"));(new rosie.$).attr("answers",[{label:"red"},{label:"blue"},{label:"green"}]).attr("required",!1).attr("strings",{question:"Check all of the colors that apply"}).attr("type","multiple"),(new rosie.$).attr("answers",[{label:"Yes"},{label:"No"}]).attr("required",!0).attr("strings",{question:"Is there a galaxy?"}).attr("taskKey","").attr("type","single"),(new rosie.$).attr("modifiers",["insertion","deletion"]).attr("required",!1).attr("instruction","Enter some text").attr("taskKey","").attr("type","text"),(new rosie.$).attr("instruction","Please transcribe the text").attr("tools",[{details:[{instruction:"transcribe the text.",taskKey:"T0.0",type:"text"}],type:"transcriptionLine"}]).attr("type","transcription");var cuid=__webpack_require__("../../node_modules/cuid/index.js"),cuid_default=__webpack_require__.n(cuid);(new rosie.$).attr("id",cuid_default()()).attr("task","T0").attr("taskType","single").attr("value",0)},"./test/mockStore/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>mockStore});var async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),sinon_esm=__webpack_require__("../../node_modules/sinon/pkg/sinon-esm.js"),store=__webpack_require__("./src/store/index.js"),factories=__webpack_require__("./test/factories/index.js");function createResponse(url,factories){var endpoint=url.split("/")[1],response={},mockResponse=factories[url]||factories[endpoint];return response[endpoint]=mockResponse?[].concat(mockResponse):[],Promise.resolve({body:response})}const branchingWorkflow=factories.s4.build({display_name:"Branching workflow",first_task:"T0",tasks:{T0:{answers:[{label:"yes",next:"T1"},{label:"no",next:"T2"}],question:"Is there a cat?",required:!1,taskKey:"T0",type:"single"},T1:{answers:[{label:"napping"},{label:"standing"},{label:"playing"}],question:"What is/are the cat(s) doing?",required:!1,taskKey:"T1",type:"multiple"},T2:{answers:[{label:"oranges"},{label:"apples"},{label:"bananas"}],question:"Favourite fruit?",required:!1,taskKey:"T2",type:"multiple"}},version:"0.0"});function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var defaultClient={caesar:{request:sinon_esm.Ay.stub().callsFake(function(){return Promise.resolve({})})},tutorials:{get:sinon_esm.Ay.stub().callsFake(function(){return Promise.resolve({body:{tutorials:[]}})})}},defaultAuthClient={checkBearerToken:sinon_esm.Ay.stub().callsFake(function(){return Promise.resolve(null)}),checkCurrent:sinon_esm.Ay.stub().callsFake(function(){return Promise.resolve(null)}),listen:sinon_esm.Ay.stub(),stopListening:sinon_esm.Ay.stub()};function mockStore(){var _ref=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_ref$authClient=_ref.authClient,authClient=void 0===_ref$authClient?defaultAuthClient:_ref$authClient,_ref$client=_ref.client,client=void 0===_ref$client?defaultClient:_ref$client,project=_ref.project,subject=_ref.subject,subjectSet=_ref.subjectSet,_ref$workflow=_ref.workflow,workflow=void 0===_ref$workflow?branchingWorkflow:_ref$workflow,subjectSnapshot=subject||factories.vk.build({metadata:{}}),subjectSetSnapshot=subjectSet||factories.$Z.build(),workflowSnapshot=workflow||factories.s4.build(),projectSnapshot=project||factories.uQ.build({},{activeWorkflowId:workflowSnapshot.id}),subjectResources={};rosie.$.buildList("subject",9).forEach(function(subject){return subjectResources[subject.id]=subject}),subjectResources[subjectSnapshot.id]=subjectSnapshot;var _stubPanoptesJs=function stubPanoptesJs(factories){return{panoptes:{get:function get(url){return createResponse(url,factories)},post:function post(url){return createResponse(url,factories)},put:function put(url){return createResponse(url,factories)}}}}({field_guides:[],projects:[projectSnapshot],subjects:Object.values(subjectResources),tutorials:[],workflows:[workflowSnapshot]}),panoptes=_stubPanoptesJs.panoptes,rootStore=store.A.create({projects:{active:projectSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},projectSnapshot.id,projectSnapshot)},subjects:{active:subjectSnapshot.id,loadingState:async_states_default().success,queue:Object.keys(subjectResources),resources:subjectResources},subjectSets:{active:subjectSetSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},subjectSetSnapshot.id,subjectSetSnapshot)},workflows:{active:workflowSnapshot.id,loadingState:async_states_default().success,resources:_defineProperty({},workflowSnapshot.id,workflowSnapshot)}},{authClient:_objectSpread(_objectSpread({},defaultAuthClient),authClient),client:_objectSpread(_objectSpread({},defaultClient),{},{panoptes},client)});return rootStore.subjects.setActiveSubject(subjectSnapshot.id),rootStore}}}]);