(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[5854],{"../../node_modules/grommet-icons/es6/icons/Checkmark.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{M:()=>Checkmark});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet-icons/es6/utils.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Checkmark=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){var scaleProps=(0,_utils__WEBPACK_IMPORTED_MODULE_2__.Uf)(props);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"Checkmark"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",_extends({fill:"none",stroke:"#000",strokeWidth:"2",d:"m2 14 7 6L22 4"},scaleProps)))}));Checkmark.displayName="Checkmark"},"../../node_modules/grommet-icons/es6/icons/Close.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>Close});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js"),_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet-icons/es6/utils.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Close=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){var scaleProps=(0,_utils__WEBPACK_IMPORTED_MODULE_2__.Uf)(props);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"Close"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",_extends({fill:"none",stroke:"#000",strokeWidth:"2",d:"m3 3 18 18M3 21 21 3"},scaleProps)))}));Close.displayName="Close"},"../../node_modules/grommet-icons/es6/icons/DocumentText.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{T:()=>DocumentText});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var DocumentText=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"DocumentText"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M6 16h10H6zm0-4h12H6zm0-4h5-5zm8-7v7h7M3 23V1h12l6 6v16H3z"}))}));DocumentText.displayName="DocumentText"},"../../node_modules/grommet-icons/es6/icons/FormNext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>FormNext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var FormNext=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"FormNext"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"m9 6 6 6-6 6"}))}));FormNext.displayName="FormNext"},"../../node_modules/grommet-icons/es6/icons/FormPrevious.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>FormPrevious});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var FormPrevious=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"FormPrevious"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"m15 6-6 6 6 6"}))}));FormPrevious.displayName="FormPrevious"},"../../node_modules/grommet-icons/es6/icons/Pan.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{u:()=>Pan});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Pan=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"Pan"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M8.5 5.5 12 2l3.5 3.5M22 12H2m3.5-3.5L2 12l3.5 3.5m13 0L22 12l-3.5-3.5M12 22V2M8.5 18.5 12 22l3.5-3.5"}))}));Pan.displayName="Pan"},"../../node_modules/grommet-icons/es6/icons/Radial.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>Radial});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Radial=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"Radial"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("circle",{cx:"12",cy:"12",r:"11",fill:"none",stroke:"#000",strokeWidth:"2"}))}));Radial.displayName="Radial"},"../../node_modules/grommet-icons/es6/icons/Redo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>Redo});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Redo=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"Redo"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M16.82 4 15.4 5.44 17.94 8H8.23a6 6 0 0 0 0 12h2v-2h-2a4 4 0 0 1 0-8h9.71l-2.54 2.51 1.41 1.41L21.77 9z"}))}));Redo.displayName="Redo"},"../../node_modules/grommet-icons/es6/icons/Trash.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>Trash});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Trash=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"Trash"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M4 5h16v18H4V5zM1 5h22M9 1h6v4H9V1zm0 0h6v4H9V1zm6 8v10M9 9v10"}))}));Trash.displayName="Trash"},"../../node_modules/grommet-icons/es6/icons/Undo.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{V:()=>Undo});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var Undo=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"Undo"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{d:"M7.18 4 8.6 5.44 6.06 8h9.71a6 6 0 0 1 0 12h-2v-2h2a4 4 0 0 0 0-8H6.06l2.54 2.51-1.42 1.41L2.23 9z"}))}));Undo.displayName="Undo"},"../../node_modules/grommet-icons/es6/icons/ZoomIn.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{$:()=>ZoomIn});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),_StyledIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet-icons/es6/StyledIcon.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var ZoomIn=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)((function(props,ref){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_StyledIcon__WEBPACK_IMPORTED_MODULE_1__.v,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"ZoomIn"},props),react__WEBPACK_IMPORTED_MODULE_0__.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"m16 16 7 7-7-7zm-6 2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-3V5m-5 5h10"}))}));ZoomIn.displayName="ZoomIn"},"../../node_modules/valid-url/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{!function(module){"use strict";module.exports.is_uri=is_iri,module.exports.is_http_uri=is_http_iri,module.exports.is_https_uri=is_https_iri,module.exports.is_web_uri=is_web_iri,module.exports.isUri=is_iri,module.exports.isHttpUri=is_http_iri,module.exports.isHttpsUri=is_https_iri,module.exports.isWebUri=is_web_iri;var splitUri=function(uri){return uri.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)};function is_iri(value){if(value&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(value)&&!/%[^0-9a-f]/i.test(value)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(value)){var splitted,authority,path,query,fragment,scheme="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme&&scheme.length&&path.length>=0){if(authority&&authority.length){if(0!==path.length&&!/^\//.test(path))return}else if(/^\/\//.test(path))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(scheme.toLowerCase()))return out+=scheme+":",authority&&authority.length&&(out+="//"+authority),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_http_iri(value,allowHttps){if(is_iri(value)){var splitted,path,query,fragment,scheme="",authority="",port="",out="";if(scheme=(splitted=splitUri(value))[1],authority=splitted[2],path=splitted[3],query=splitted[4],fragment=splitted[5],scheme){if(allowHttps){if("https"!=scheme.toLowerCase())return}else if("http"!=scheme.toLowerCase())return;if(authority)return/:(\d+)$/.test(authority)&&(port=authority.match(/:(\d+)$/)[0],authority=authority.replace(/:\d+$/,"")),out+=scheme+":",out+="//"+authority,port&&(out+=port),out+=path,query&&query.length&&(out+="?"+query),fragment&&fragment.length&&(out+="#"+fragment),out}}}function is_https_iri(value){return is_http_iri(value,!0)}function is_web_iri(value){return is_http_iri(value)||is_https_iri(value)}}(module=__webpack_require__.nmd(module))},"./src/components/Classifier/components/SubjectViewer/components/ImageAndTextViewer/ImageAndTextViewer.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,TextLocationFirst:()=>TextLocationFirst,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),mobx_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2__),_test_factories__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./test/factories/index.js"),_test_mockStore__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./test/mockStore/index.js"),_ImageAndTextViewerConnector__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/ImageAndTextViewer/ImageAndTextViewerConnector.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/jsx-runtime.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Subject Viewers / ImageAndTextViewer",component:_ImageAndTextViewerConnector__WEBPACK_IMPORTED_MODULE_5__.A,args:{loadingState:_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default().success},argTypes:{loadingState:{options:Object.values(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_2___default()),type:"select"}}};var subjectSnapshot=_test_factories__WEBPACK_IMPORTED_MODULE_3__.vk.build({id:"1234",locations:[{"image/jpeg":"https://panoptes-uploads-staging.zooniverse.org/subject_location/72823751-8222-403c-a4cc-8e365f880dfb.jpeg"},{"text/plain":"https://panoptes-uploads-staging.zooniverse.org/subject_location/9d03230b-7ef0-42b5-aa99-996b0394cc9e.txt"}]}),textLocationFirstSubjectSnapshot=_test_factories__WEBPACK_IMPORTED_MODULE_3__.vk.build({id:"5678",locations:[{"text/plain":"https://panoptes-uploads-staging.zooniverse.org/subject_location/9d03230b-7ef0-42b5-aa99-996b0394cc9e.txt"},{"image/jpeg":"https://panoptes-uploads-staging.zooniverse.org/subject_location/72823751-8222-403c-a4cc-8e365f880dfb.jpeg"}]}),store=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_4__.A)({subject:subjectSnapshot}),storeWithSubjectTextLocationFirst=(0,_test_mockStore__WEBPACK_IMPORTED_MODULE_4__.A)({subject:textLocationFirstSubjectSnapshot});function Default(_ref){var loadingState=_ref.loadingState;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_1__.Kq,{classifierStore:store,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{width:"large",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ImageAndTextViewerConnector__WEBPACK_IMPORTED_MODULE_5__.A,{loadingState})})})}function TextLocationFirst(_ref2){var loadingState=_ref2.loadingState;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(mobx_react__WEBPACK_IMPORTED_MODULE_1__.Kq,{classifierStore:storeWithSubjectTextLocationFirst,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{width:"large",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_ImageAndTextViewerConnector__WEBPACK_IMPORTED_MODULE_5__.A,{loadingState})})})}Default.displayName="Default",TextLocationFirst.displayName="TextLocationFirst",Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"function Default({\n  loadingState\n}) {\n  return <Provider classifierStore={store}>\n      <Box width='large'>\n        <ImageAndTextViewerConnector loadingState={loadingState} />\n      </Box>\n    </Provider>;\n}",...Default.parameters?.docs?.source}}},TextLocationFirst.parameters={...TextLocationFirst.parameters,docs:{...TextLocationFirst.parameters?.docs,source:{originalSource:"function TextLocationFirst({\n  loadingState\n}) {\n  return <Provider classifierStore={storeWithSubjectTextLocationFirst}>\n      <Box width='large'>\n        <ImageAndTextViewerConnector loadingState={loadingState} />\n      </Box>\n    </Provider>;\n}",...TextLocationFirst.parameters?.docs?.source}}};const __namedExportsOrder=["Default","TextLocationFirst"]},"./src/components/Classifier/components/SubjectViewer/components/ImageAndTextViewer/ImageAndTextViewerConnector.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>ImageAndTextViewerConnector});var helpers=__webpack_require__("./src/helpers/index.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),ThemeContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),FormPrevious=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormPrevious.js"),DocumentText=__webpack_require__("../../node_modules/grommet-icons/es6/icons/DocumentText.js"),FormNext=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormNext.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx");const theme={global:{colors:{icon:{dark:"white",light:"black"},text:{dark:"white",light:"black"}},hover:{background:"accent-1"}},select:{icons:{margin:"0"},options:{text:{size:"small"}}}};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DirectionButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__DirectionButton",componentId:"sc-1vj916i-0"})(["border:none;padding:0;& > div{flex-direction:column;}"]),ThumbnailButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__ThumbnailButton",componentId:"sc-1vj916i-1"})(["display:flex;"," "," padding:0;border:none;background-size:cover;background-repeat:no-repeat;background-position:center;"," &[aria-selected=true]{border:solid 2px ",";}"],(function(props){return(0,styled_components_browser_esm.css)(["height:",";"],props.thumbnailDimension)}),(function(props){return(0,styled_components_browser_esm.css)(["width:",";"],props.thumbnailDimension)}),(function(props){return(0,styled_components_browser_esm.css)(["background-image:url(",");"],props.thumbnailerUrl)}),(function(props){return props.theme.global.colors["neutral-2"]})),TextButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__TextButton",componentId:"sc-1vj916i-2"})(["align-items:center;border:solid 1px ",";display:flex;justify-content:center;padding:0;"," "," &:hover{box-shadow:0px 0px 0px 2px ",";}&[aria-selected=true]{border:solid 2px ",";}"],(function(props){return props.theme.global.colors["light-3"]}),(function(props){return(0,styled_components_browser_esm.css)(["height:",";"],props.thumbnailDimension)}),(function(props){return(0,styled_components_browser_esm.css)(["width:",";"],props.thumbnailDimension)}),(function(props){return props.theme.global.colors.brand}),(function(props){return props.theme.global.colors["neutral-2"]})),backgrounds={dark:"dark-3",light:"neutral-6"},ImageAndTextControls=function ImageAndTextControls(_ref){var _ref$currentFrame=_ref.currentFrame,currentFrame=void 0===_ref$currentFrame?0:_ref$currentFrame,_ref$locations=_ref.locations,locations=void 0===_ref$locations?[]:_ref$locations,_ref$onFrameChange=_ref.onFrameChange,onFrameChange=void 0===_ref$onFrameChange?function(){return!0}:_ref$onFrameChange,t=(0,i18n.Bd)("components").t,_useState2=_slicedToArray((0,react.useState)(!1),2),smallScreenStyle=_useState2[0],setSmallScreenStyle=_useState2[1],controlsContainer=(0,react.useRef)(null),resizeObserver=(0,react.useRef)(null);(0,react.useEffect)((function(){return resizeObserver.current=new window.ResizeObserver((function(entries){entries[0].contentRect.width<500?setSmallScreenStyle(!0):setSmallScreenStyle(!1)})),controlsContainer.current&&resizeObserver.current.observe(controlsContainer.current),function(){controlsContainer.current&&resizeObserver.current.unobserve(controlsContainer.current)}}),[]);var handleKeyDown=function handleKeyDown(event){var index=currentFrame;switch(event.key){case"ArrowRight":event.preventDefault(),event.stopPropagation(),handleNext(),index<locations.length-1?document.getElementById("thumbnail-".concat(index+1)).focus():document.getElementById("thumbnail-".concat(0)).focus();break;case"ArrowLeft":event.preventDefault(),event.stopPropagation(),handlePrevious(),index>0?document.getElementById("thumbnail-".concat(index-1)).focus():document.getElementById("thumbnail-".concat(locations.length-1)).focus();break;default:return!0}},handlePrevious=function handlePrevious(){onFrameChange(currentFrame>0?currentFrame-1:locations.length-1)},handleNext=function handleNext(){currentFrame<locations.length-1?onFrameChange(currentFrame+1):onFrameChange(0)},handleThumbnailClick=function handleThumbnailClick(index){onFrameChange(index)};return(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:theme,children:(0,jsx_runtime.jsx)(Box.a,{background:backgrounds,ref:controlsContainer,children:(0,jsx_runtime.jsx)(Box.a,{fill:!0,pad:smallScreenStyle?{horizontal:"10px",vertical:"5px"}:{horizontal:"20px",vertical:"10px"},gap:smallScreenStyle?"xsmall":"small",children:(0,jsx_runtime.jsxs)(Box.a,{direction:"row",justify:"center",gap:smallScreenStyle?"xsmall":"small",children:[(0,jsx_runtime.jsx)(DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormPrevious.Q,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"),onClick:handlePrevious}),(0,jsx_runtime.jsx)(Box.a,{"aria-label":"Image thumbnail and text icon",direction:"row",gap:"5px",role:"tablist",align:"center",children:(null==locations?void 0:locations.length)&&locations.map((function(_ref2,index){var mimeType=_ref2.mimeType,url=_ref2.url,activeFrame=currentFrame===index,tabIndex=activeFrame?0:-1;if("text/plain"!==mimeType){var thumbnailerUrl="https://thumbnails.zooniverse.org/100x100".concat(url.slice(7,url.length));return(0,jsx_runtime.jsx)(ThumbnailButton,{id:"thumbnail-".concat(index),"aria-controls":"image-and-text-tab-panel","aria-label":t("SubjectViewer.MultiFrameViewer.FrameCarousel.thumbnailAltText"),"aria-selected":activeFrame?"true":"false",onClick:function onClick(){return handleThumbnailClick(index)},onKeyDown:handleKeyDown,role:"tab",tabIndex,thumbnailDimension:smallScreenStyle?"30px":"40px",thumbnailerUrl},"".concat(url,"-").concat(index))}return(0,jsx_runtime.jsx)(TextButton,{id:"thumbnail-".concat(index),"aria-controls":"image-and-text-tab-panel","aria-label":t("SubjectViewer.ImageAndTextViewer.textIconAltText"),"aria-selected":activeFrame?"true":"false",icon:(0,jsx_runtime.jsx)(DocumentText.T,{}),onClick:function onClick(){return handleThumbnailClick(index)},onKeyDown:handleKeyDown,role:"tab",tabIndex,thumbnailDimension:smallScreenStyle?"30px":"40px"},"".concat(url,"-").concat(index))}))}),(0,jsx_runtime.jsx)(DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormNext.O,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"),onClick:handleNext})]})})})})};ImageAndTextControls.displayName="ImageAndTextControls",ImageAndTextControls.propTypes={currentFrame:prop_types_default().number,locations:prop_types_default().arrayOf(locationValidator.A).isRequired,onFrameChange:prop_types_default().func};const components_ImageAndTextControls=(0,styled_components_browser_esm.withTheme)(ImageAndTextControls);ImageAndTextControls.__docgenInfo={description:"",methods:[],displayName:"ImageAndTextControls",props:{currentFrame:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},locations:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"}},required:!1},onFrameChange:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1}}};var SingleImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"),SingleTextViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/index.js"),DEFAULT_DIMENSIONS=[{clientHeight:400}],DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function ImageAndTextViewerContainer(_ref){var _ref$dimensions=_ref.dimensions,dimensions=void 0===_ref$dimensions?DEFAULT_DIMENSIONS:_ref$dimensions,_ref$frame=_ref.frame,frame=void 0===_ref$frame?0:_ref$frame,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,_ref$setFrame=_ref.setFrame,setFrame=void 0===_ref$setFrame?DEFAULT_HANDLER:_ref$setFrame,subject=_ref.subject;if(loadingState===async_states_default().error)return(0,jsx_runtime.jsx)("div",{children:"Something went wrong."});var _dimensions$,_dimensions$2,type=subject.locations[frame].type;return loadingState!==async_states_default().initialized?(0,jsx_runtime.jsxs)(Box.a,{fill:"horizontal",children:["text"===type?(0,jsx_runtime.jsx)(SingleTextViewer.Ay,{frame,height:null!==(_dimensions$=dimensions[0])&&void 0!==_dimensions$&&_dimensions$.clientHeight?"".concat(null===(_dimensions$2=dimensions[0])||void 0===_dimensions$2?void 0:_dimensions$2.clientHeight,"px"):"",onError,onReady}):(0,jsx_runtime.jsx)(SingleImageViewer.Ay,{enableInteractionLayer:!1,loadingState,onError,onReady}),(0,jsx_runtime.jsx)(components_ImageAndTextControls,{currentFrame:frame,locations:subject.locations,onFrameChange:function handleFrameChange(newFrame){setFrame(newFrame)}})]}):null}ImageAndTextViewerContainer.propTypes={dimensions:prop_types_default().arrayOf(prop_types_default().shape({clientHeight:prop_types_default().number})),frame:prop_types_default().number,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,setFrame:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator.A)})};const ImageAndTextViewer_ImageAndTextViewerContainer=ImageAndTextViewerContainer;ImageAndTextViewerContainer.__docgenInfo={description:"",methods:[],displayName:"ImageAndTextViewerContainer",props:{dimensions:{defaultValue:{value:"[{\n  clientHeight: 400\n}]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"shape",value:{clientHeight:{name:"number",required:!1}}}},required:!1},frame:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setFrame:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1}}};const ImageAndTextViewerConnector=(0,helpers.Lg)(ImageAndTextViewer_ImageAndTextViewerContainer,(function storeMapper(store){var subject=store.subjects.active,_store$subjectViewer=store.subjectViewer;return{dimensions:_store$subjectViewer.dimensions,frame:_store$subjectViewer.frame,loadingState:_store$subjectViewer.loadingState,setFrame:_store$subjectViewer.setFrame,subject}}));ImageAndTextViewer_ImageAndTextViewerContainer.__docgenInfo={description:"",methods:[],displayName:"ImageAndTextViewerContainer",props:{dimensions:{defaultValue:{value:"[{\n  clientHeight: 400\n}]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"shape",value:{clientHeight:{name:"number",required:!1}}}},required:!1},frame:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"number"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setFrame:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{description:"",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewerContainer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0__),mobx_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),prop_types__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/prop-types/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.js"),_components_PlaceholderSVG__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/components/PlaceholderSVG.jsx"),_SingleImageViewer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewer.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function storeMapper(classifierStore){var subject=classifierStore.subjects.active,_classifierStore$subj=classifierStore.subjectViewer,enableRotation=_classifierStore$subj.enableRotation,frame=_classifierStore$subj.frame,invert=_classifierStore$subj.invert,move=_classifierStore$subj.move,rotation=_classifierStore$subj.rotation,setOnZoom=_classifierStore$subj.setOnZoom,setOnPan=_classifierStore$subj.setOnPan;return{enableRotation,frame,invert,limitSubjectHeight:classifierStore.workflows.active.configuration.limit_subject_height,move,rotation,setOnZoom,setOnPan,subject}}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function SingleImageViewerContainer(_ref){var _subject$locations$fr,_ref$enableInteractio=_ref.enableInteractionLayer,enableInteractionLayer=void 0===_ref$enableInteractio||_ref$enableInteractio,_ref$imageLocation=_ref.imageLocation,imageLocation=void 0===_ref$imageLocation?null:_ref$imageLocation,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,_ref$setOnPan=_ref.setOnPan,propSetOnPan=void 0===_ref$setOnPan?null:_ref$setOnPan,_ref$setOnZoom=_ref.setOnZoom,propSetOnZoom=void 0===_ref$setOnZoom?null:_ref$setOnZoom,_ref$title=_ref.title,title=void 0===_ref$title?void 0:_ref$title,_ref$zoomControlFn=_ref.zoomControlFn,zoomControlFn=void 0===_ref$zoomControlFn?null:_ref$zoomControlFn,_ref$zooming=_ref.zooming,zooming=void 0===_ref$zooming||_ref$zooming,_useStores=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.gy)(storeMapper),enableRotation=_useStores.enableRotation,frame=_useStores.frame,invert=_useStores.invert,limitSubjectHeight=_useStores.limitSubjectHeight,move=_useStores.move,rotation=_useStores.rotation,storeSetOnZoom=_useStores.setOnZoom,storeSetOnPan=_useStores.setOnPan,subject=_useStores.subject,onKeyZoom=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.KG)().onKeyZoom,effectiveSetOnPan=propSetOnPan||storeSetOnPan,effectiveSetOnZoom=propSetOnZoom||storeSetOnZoom,imageLocationUrl=null!=imageLocation&&imageLocation.url?imageLocation.url:null==subject||null===(_subject$locations$fr=subject.locations[frame])||void 0===_subject$locations$fr?void 0:_subject$locations$fr.url,_useSubjectImage=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.Ze)({frame,src:imageLocationUrl,onError,onReady}),img=_useSubjectImage.img,subjectImage=(_useSubjectImage.error,_useSubjectImage.loading,_useSubjectImage.subjectImage),_img$naturalHeight=img.naturalHeight,naturalHeight=void 0===_img$naturalHeight?600:_img$naturalHeight,_img$naturalWidth=img.naturalWidth,naturalWidth=void 0===_img$naturalWidth?800:_img$naturalWidth;return loadingState===_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_components_PlaceholderSVG__WEBPACK_IMPORTED_MODULE_4__.A,{ref:subjectImage,maxHeight:limitSubjectHeight?"min(".concat(naturalHeight,"px, 90vh)"):null,maxWidth:limitSubjectHeight?"".concat(naturalWidth,"px"):"100%",viewBox:"0 0 ".concat(naturalWidth," ").concat(naturalHeight)}):loadingState===_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().error?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{children:"Something went wrong."}):loadingState===_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_0___default().success?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_SingleImageViewer__WEBPACK_IMPORTED_MODULE_5__.A,{enableInteractionLayer,enableRotation,frame,imgRef:subjectImage,invert,limitSubjectHeight,move,naturalHeight,naturalWidth,onKeyDown:onKeyZoom,rotation,setOnPan:effectiveSetOnPan,setOnZoom:effectiveSetOnZoom,src:img.src,subject,title,zoomControlFn,zooming}):null}SingleImageViewerContainer.propTypes={enableInteractionLayer:prop_types__WEBPACK_IMPORTED_MODULE_2__.bool,imageLocation:(0,prop_types__WEBPACK_IMPORTED_MODULE_2__.shape)({url:prop_types__WEBPACK_IMPORTED_MODULE_2__.string}),loadingState:prop_types__WEBPACK_IMPORTED_MODULE_2__.string,onError:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,onReady:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,setOnPan:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,setOnZoom:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,title:(0,prop_types__WEBPACK_IMPORTED_MODULE_2__.shape)({id:prop_types__WEBPACK_IMPORTED_MODULE_2__.string,text:prop_types__WEBPACK_IMPORTED_MODULE_2__.string}),zoomControlFn:prop_types__WEBPACK_IMPORTED_MODULE_2__.func,zooming:prop_types__WEBPACK_IMPORTED_MODULE_2__.bool};const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_1__.PA)(SingleImageViewerContainer);SingleImageViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SingleImageViewerContainer",props:{enableInteractionLayer:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},imageLocation:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"shape",value:{url:{name:"string",required:!1}}},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"custom",raw:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},setOnPan:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},setOnZoom:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},title:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},text:{name:"string",required:!1}}},required:!1},zoomControlFn:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},zooming:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/components/PlaceholderSVG.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/prop-types/index.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledPlaceholderSVG=styled_components__WEBPACK_IMPORTED_MODULE_2__.default.svg.withConfig({displayName:"PlaceholderSVG__StyledPlaceholderSVG",componentId:"sc-1h02og5-0"})(["background:no-repeat center / cover url('https://static.zooniverse.org/www.zooniverse.org/assets/fe-project-subject-placeholder-800x600.png');touch-action:pinch-zoom;max-width:",";",""],(function(props){return props.$maxWidth}),(function(props){return props.$maxHeight&&(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.css)(["max-height:",";"],props.$maxHeight)})),PlaceholderSVG=(0,react__WEBPACK_IMPORTED_MODULE_1__.forwardRef)((function PlaceholderSVG(_ref,ref){var _ref$maxWidth=_ref.maxWidth,maxWidth=void 0===_ref$maxWidth?"100%":_ref$maxWidth,maxHeight=_ref.maxHeight,_ref$viewBox=_ref.viewBox,viewBox=void 0===_ref$viewBox?"0 0 800 600":_ref$viewBox;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(StyledPlaceholderSVG,{ref,"data-testid":"placeholder-svg",focusable:!0,$maxHeight:maxHeight,$maxWidth:maxWidth,tabIndex:0,viewBox})}));PlaceholderSVG.displayName="PlaceholderSVG",PlaceholderSVG.propTypes={maxWidth:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,maxHeight:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,viewBox:prop_types__WEBPACK_IMPORTED_MODULE_0__.string};const __WEBPACK_DEFAULT_EXPORT__=PlaceholderSVG;PlaceholderSVG.__docgenInfo={description:"",methods:[],displayName:"PlaceholderSVG",props:{maxWidth:{defaultValue:{value:"'100%'",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},viewBox:{defaultValue:{value:"'0 0 800 600'",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},maxHeight:{description:"",type:{name:"custom",raw:"string"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>_SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A,tv:()=>_SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__.A});var _SingleImageViewerContainer__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewerContainer.jsx");__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewer.jsx")},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledPre=styled_components__WEBPACK_IMPORTED_MODULE_2__.default.pre.withConfig({displayName:"SingleTextViewer__StyledPre",componentId:"sc-igtbcc-0"})(["white-space:pre-wrap;color:",";font-family:'Anonymous Pro',monospace;@font-face{font-family:'Anonymous Pro';font-style:normal;font-weight:400;src:local('Anonymous Pro'),local('Anonymous Pro-Regular'),url(https://fonts.gstatic.com/s/anonymouspro/v21/rP2Bp2a15UIB7Un-bOeISG3pHls29QP-4Ks.woff2)  format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}"],(function(props){return props.theme.dark?"inherit":"black"}));function SingleTextViewer(_ref){var _ref$content=_ref.content,content=void 0===_ref$content?[""]:_ref$content,_ref$height=_ref.height,height=void 0===_ref$height?"":_ref$height,_ref$subjectId=_ref.subjectId,subjectId=void 0===_ref$subjectId?"":_ref$subjectId,theme=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.useTheme)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{a11yTitle:"Subject ".concat(subjectId," text"),as:"section",flex:"grow",height:{min:height},pad:"xsmall",tabIndex:"0",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(StyledPre,{theme,children:content})})}SingleTextViewer.displayName="SingleTextViewer",SingleTextViewer.propTypes={content:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().oneOfType([prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,prop_types__WEBPACK_IMPORTED_MODULE_1___default().node])),height:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,subjectId:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string};const __WEBPACK_DEFAULT_EXPORT__=SingleTextViewer;SingleTextViewer.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewer",props:{content:{defaultValue:{value:"['']",computed:!1},description:"Array defined by a subject's text mime type location, including labeled text nodes with highlighter task annotations",type:{name:"arrayOf",value:{name:"union",value:[{name:"string"},{name:"node"}]}},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"Minimum height of the text viewer in CSS units eg. '400px', '0.25vh', '20rem' etc.",type:{name:"string"},required:!1},subjectId:{defaultValue:{value:"''",computed:!1},description:"Subject ID",type:{name:"string"},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerConnector.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var _helpers__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/helpers/index.js"),_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx");const __WEBPACK_DEFAULT_EXPORT__=(0,_helpers__WEBPACK_IMPORTED_MODULE_0__.Lg)(_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__.A,(function storeMapper(store){var subject=store.subjects.active,loadingState=store.subjectViewer.loadingState;return{latest:null==subject?void 0:subject.stepHistory.latest,loadingState,subject}}));_SingleTextViewerContainer__WEBPACK_IMPORTED_MODULE_1__.A.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewerContainer",props:{frame:{defaultValue:{value:"0",computed:!1},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"{\n  id: '',\n  locations: []\n}",computed:!1},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1},latest:{description:"",type:{name:"shape",value:{annotations:{name:"array",required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>SingleTextViewer_SingleTextViewerContainer});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),hooks=__webpack_require__("./src/hooks/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledMark=styled_components_browser_esm.default.mark.withConfig({displayName:"Selection__StyledMark",componentId:"sc-19qu8jh-0"})(["background-color:",";border-radius:8px;color:black;margin-right:.2em;padding:.1em .3em;"],(function(props){return props.color})),StyledDeleteButton=styled_components_browser_esm.default.button.withConfig({displayName:"Selection__StyledDeleteButton",componentId:"sc-19qu8jh-1"})(["border:none;background:transparent;font-size:1.2em;padding:0;&:hover{cursor:pointer;}"]);function DEFAULT_HANDLER(){return!0}function Selection(_ref){var color=_ref.color,_ref$handleDelete=_ref.handleDelete,handleDelete=void 0===_ref$handleDelete?DEFAULT_HANDLER:_ref$handleDelete,label=_ref.label,text=_ref.text,t=(0,i18n.Bd)("plugins").t;return(0,jsx_runtime.jsxs)(StyledMark,{"aria-label":"".concat(label,": ").concat(text),"data-selection":text,color,onKeyDown:function onKeyDown(event){"Delete"!==event.key&&"Backspace"!==event.key||handleDelete()},tabIndex:"0",children:[text," ",(0,jsx_runtime.jsx)(StyledDeleteButton,{"aria-label":t("HighlighterTask.delete"),onClick:handleDelete,title:t("HighlighterTask.delete"),children:"×"})]})}Selection.displayName="Selection",Selection.propTypes={color:prop_types_default().string.isRequired,handleDelete:prop_types_default().func,label:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired};const components_Selection=Selection;Selection.__docgenInfo={description:"",methods:[],displayName:"Selection",props:{handleDelete:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},color:{description:"",type:{name:"string"},required:!0},label:{description:"",type:{name:"string"},required:!0},text:{description:"",type:{name:"string"},required:!0}}};var locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),SingleTextViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||_unsupportedIterableToArray(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _createForOfIteratorHelper(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var _n=0,F=function F(){};return{s:F,n:function n(){return _n>=r.length?{done:!0}:{done:!1,value:r[_n++]}},e:function e(r){throw r},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function s(){t=t.call(r)},n:function n(){var r=t.next();return a=r.done,r},e:function e(r){u=!0,o=r},f:function f(){try{a||null==t.return||t.return()}finally{if(u)throw o}}}}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var defaultSubject={id:"",locations:[]};function SingleTextViewerContainer_DEFAULT_HANDLER(){return!0}function SingleTextViewerContainer(_ref){var highlighterAnnotation,content,_latest$annotations,_ref$frame=_ref.frame,frame=void 0===_ref$frame?0:_ref$frame,_ref$height=_ref.height,height=void 0===_ref$height?"":_ref$height,latest=_ref.latest,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?SingleTextViewerContainer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?SingleTextViewerContainer_DEFAULT_HANDLER:_ref$onReady,_ref$subject=_ref.subject,subject=void 0===_ref$subject?defaultSubject:_ref$subject,_useSubjectText=(0,hooks.XW)({frame,subject,onReady,onError}),data=_useSubjectText.data,error=_useSubjectText.error;_useSubjectText.loading;latest&&(highlighterAnnotation=_slicedToArray(null==latest||null===(_latest$annotations=latest.annotations)||void 0===_latest$annotations?void 0:_latest$annotations.filter((function(annotation){return"highlighter"===annotation.taskType})),1)[0]);return loadingState===async_states_default().error?(0,jsx_runtime.jsxs)("p",{children:["Something went wrong. ",null==error?void 0:error.message]}):loadingState!==async_states_default().initialized?(content=highlighterAnnotation&&highlighterAnnotation.value.length>0?function labeledContent(data,annotation){var newContent=[],lastFocusIndex=0,dataIndex=0,deleteHighlight=annotation.deleteHighlight,value=annotation.value;for(dataIndex=0;dataIndex<data.length;dataIndex++){var _step,_iterator=_createForOfIteratorHelper(value);try{var _loop=function _loop(){var highlight=_step.value;if(highlight.start===dataIndex){var preContent=data.slice(lastFocusIndex,dataIndex);newContent.push(preContent);var newLabel=(0,jsx_runtime.jsx)(components_Selection,{color:highlight.labelInformation.color,handleDelete:function handleDelete(){return deleteHighlight(value.indexOf(highlight))},label:highlight.labelInformation.label,text:highlight.text},"".concat(highlight.start,"-").concat(highlight.end));newContent.push(newLabel),lastFocusIndex=highlight.end+1}};for(_iterator.s();!(_step=_iterator.n()).done;)_loop()}catch(err){_iterator.e(err)}finally{_iterator.f()}}var endContent=data.slice(lastFocusIndex,dataIndex);return newContent.push(endContent),newContent}(data,highlighterAnnotation):[data],(0,jsx_runtime.jsx)(SingleTextViewer.A,{content,height,subjectId:subject.id})):null}SingleTextViewerContainer.propTypes={height:prop_types_default().string,latest:prop_types_default().shape({annotations:prop_types_default().array}),loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator.A)})};const SingleTextViewer_SingleTextViewerContainer=(0,mobxreact_esm.PA)(SingleTextViewerContainer);SingleTextViewerContainer.__docgenInfo={description:"",methods:[],displayName:"SingleTextViewerContainer",props:{frame:{defaultValue:{value:"0",computed:!1},required:!1},height:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"function DEFAULT_HANDLER() {\n  return true\n}",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"{\n  id: '',\n  locations: []\n}",computed:!1},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1},latest:{description:"",type:{name:"shape",value:{annotations:{name:"array",required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>_SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_0__.A});var _SingleTextViewerConnector__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerConnector.jsx");__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewerContainer.jsx"),__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleTextViewer/SingleTextViewer.jsx")},"./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>locationValidator_locationValidator});var valid_url=__webpack_require__("../../node_modules/valid-url/index.js"),mimeTypeRe=/^[-\w+.]+\/[-\w+.]+$/;const locationValidator_locationValidator=function locationValidator(propValue,key,componentName,location,propFullName){var subjectLocation=propValue[key],mimeType=subjectLocation.mimeType,url=subjectLocation.url;if(!mimeTypeRe.test(mimeType)||!(0,valid_url.isUri)(url))return new Error("Invalid prop `"+propFullName+"` supplied to `"+componentName+"`. Validation failed.")}}}]);