"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[9938],{"./src/components/Classifier/components/ImageToolbar/ImageToolbar.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),mobx_react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),_hooks__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/hooks/index.js"),_FieldGuide__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/FieldGuide/index.js"),_components_AnnotateButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/AnnotateButton/index.js"),_components_FullscreenButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/FullscreenButton/index.js"),_components_InvertButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/InvertButton/index.js"),_components_MoveButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/MoveButton/index.js"),_components_ResetButton__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ResetButton/index.js"),_components_RotateButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/RotateButton/index.js"),_components_ZoomInButton__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomInButton/index.js"),_components_ZoomOutButton__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomOutButton/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function storeMapper(classifierStore){return{hasAnnotateTask:classifierStore.subjectViewer.hasAnnotateTask,rotation:classifierStore.subjectViewer.rotation}}function ImageToolbar(props){var _useStores=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.gy)(storeMapper),hasAnnotateTask=_useStores.hasAnnotateTask,rotation=_useStores.rotation,onKeyZoom=(0,_hooks__WEBPACK_IMPORTED_MODULE_2__.KG)({rotation}).onKeyZoom;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,_objectSpread(_objectSpread({height:"min-content",onKeyDown:onKeyZoom},props),{},{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{background:{dark:"dark-3",light:"white"},border:{color:{dark:"dark-1",light:"light-3"},side:"all"},direction:"column",fill:!0,pad:"clamp(8px, 15%, 10px)",gap:"2px",children:[hasAnnotateTask&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_AnnotateButton__WEBPACK_IMPORTED_MODULE_4__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_MoveButton__WEBPACK_IMPORTED_MODULE_7__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_ZoomInButton__WEBPACK_IMPORTED_MODULE_10__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_ZoomOutButton__WEBPACK_IMPORTED_MODULE_11__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_RotateButton__WEBPACK_IMPORTED_MODULE_9__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_FullscreenButton__WEBPACK_IMPORTED_MODULE_5__.A,{show:!1}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_ResetButton__WEBPACK_IMPORTED_MODULE_8__.A,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_components_InvertButton__WEBPACK_IMPORTED_MODULE_6__.A,{})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_12__.jsx)(_FieldGuide__WEBPACK_IMPORTED_MODULE_3__.A,{})]}))}const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_1__.PA)(ImageToolbar);ImageToolbar.__docgenInfo={description:"",methods:[],displayName:"ImageToolbar"}},"./src/components/Classifier/components/ImageToolbar/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>_ImageToolbar__WEBPACK_IMPORTED_MODULE_0__.A});var _ImageToolbar__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/ImageToolbar.jsx")},"./src/components/Classifier/components/SubjectViewer/components/DataImageViewer/DataImageViewer.stories.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,InvertYAxis:()=>InvertYAxis,NarrowView:()=>NarrowView,PanZoom:()=>PanZoom,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DataImageViewer_stories});var Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),rosie=__webpack_require__("../../node_modules/rosie/src/rosie.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),DataImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/DataImageViewer/index.js"),ImageToolbar=__webpack_require__("./src/components/Classifier/components/ImageToolbar/index.js"),mockStore=__webpack_require__("./test/mockStore/index.js");var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");const subject=rosie.$.build("subject",{locations:[{"application/json":"https://raw.githubusercontent.com/zooniverse/front-end-monorepo/main/packages/lib-classifier/src/components/Classifier/components/SubjectViewer/helpers/mockLightCurves/kepler.json"},{"image/png":"https://panoptes-uploads.zooniverse.org/production/subject_location/6379335f-d893-445d-a25e-c14b83eabf63.png"}]}),lasairSubject=rosie.$.build("subject",{locations:[{"application/json":"https://panoptes-uploads.zooniverse.org/subject_location/ede79cbf-5b44-453a-8e5b-49dea5cf510b.json"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/subject_location/67b54e54-8ca9-4cb7-a4fb-2417b5bfc82a.jpeg"}]});function ViewerContext({children,store=(0,mockStore.A)({subject})}){return(0,jsx_runtime.jsx)(mobxreact_esm.Kq,{classifierStore:store,children})}const DataImageViewer_stories={title:"Subject Viewers / DataImageViewer",component:DataImageViewer.A,parameters:{docs:{description:{component:'# DataImageViewer\n\nThe Data Image Viewer is a variant of the Subject Viewer that is a composite of the Scatter Plot Viewer and the Single Image Viewer rendered side-by-side with controls to enable or disable pan and zoom per viewer.\n\n## Features\n\nThe Data Image Viewer...\n- allows users to view coordinate data series in scatter plot\n- allows users to view an image\n\n## Props\n\n// TODO add information about component props\n\n## External Setup: Workflows and Subjects\n\n### Workflow\n\nThe Workflow of the project should have a configuration specified that the Variable Star Viewer should be used.\n\n`workflow.configuration = { subject_viewer: \'dataImage\' }`\n\n### Subject\n\nEach Subject has three files:\n- an image file (which works as a "thumbnail" to be seen on Talk, this must be first in the subject location\'s list)\n- a JSON file containing the data for the scatter plot\n- an image\n\n``` js\nsubject.locations = [\n  { "image/png": "talk-fallback.png" }, // Fallback image for Talk forums\n  { "application/json": "data.json" },\n  { "image/png": "transient-object.png" }\n]\n```\n\n### JSON file\n\nUse the `JSONData` model to validate a JSON-encoded string loaded from a URL:\n\n```js\nconst JSONData = await import(\'@store/JSONData\')\nconst response = await fetch(url)\nconst data = await response.json()\nconst chartData = JSONData.create(data)\n```\n\nThe JSON file defines the data series for the scatter plot:\n\nThe multiple data series JSON shape is an object consisting of an array for `data` and an object for `chartOptions`:\n\n``` json\n{\n  "data": [\n    {\n      "seriesData": [\n        { "x": 1.46,\n          "y": 6.37,\n          "x_error": 2,\n          "y_error": 0.5\n        }, {\n          "x": 7.58,\n          "y": 9.210\n        }\n      ],\n      "seriesOptions": {\n        "color": "drawing-red",\n        "label": "Filter 1",\n        "period": 0.4661477096\n      }\n    }, {\n      "seriesData": [\n        { "x": 700,\n          "y": 500,\n          "x_error": 2,\n          "y_error": 0.5\n        }, {\n          "x": 701,\n          "y": 900\n        }\n      ],\n      "seriesOptions": {\n        "color": "drawing-blue",\n        "label": "Filter 2",\n        "period": 1.025524961\n      }\n    }\n  ],\n  "chartOptions": {\n    "xAxisLabel": "Days",\n    "yAxisLabel": "Brightness"\n  }\n}\n```\n\n#### `data`\n\nFor the `data` array, this JSON takes the same shape as expected for the generic `ScatterPlotViewer` when multiple data series are defined. The `seriesData` property should be an array of objects where at minimum an x and y coordinate is required. An optional `x_error` and/or `y_error` number can be specified if error bars need to be displayed for that single data point. Each series supports a set of options under `seriesOptions` and at minimum a string `label` is required for each series. An optional string `color` for can defined using either a variable name from the colors available from the [zooniverse theme object](https://github.com/zooniverse/front-end-monorepo/tree/main/packages/lib-grommet-theme) or a hex value. If a color is not provided, a color from the Zooniverse theme will be chosen and applied for each series.\n\n#### `chartOptions`\n\nA set of chart options can also be supplied that define the x-axis and y-axis labels as well as the custom margins to use. Margin is defined as the space outside axes lines. The scatter plot have a default margin of `{ bottom: 60, left: 60, right: 10, top: 10}`.\n'}}}};function Default(){return(0,jsx_runtime.jsx)(ViewerContext,{children:(0,jsx_runtime.jsx)(Box.a,{width:"large",children:(0,jsx_runtime.jsx)(DataImageViewer.A,{loadingState:async_states_default().success})})})}function NarrowView(){return(0,jsx_runtime.jsx)(ViewerContext,{children:(0,jsx_runtime.jsx)(Box.a,{width:"large",children:(0,jsx_runtime.jsx)(DataImageViewer.A,{loadingState:async_states_default().success})})})}function PanZoom(){return(0,jsx_runtime.jsx)(ViewerContext,{children:(0,jsx_runtime.jsxs)(Box.a,{direction:"row",width:"large",children:[(0,jsx_runtime.jsx)(DataImageViewer.A,{loadingState:async_states_default().success}),(0,jsx_runtime.jsx)(ImageToolbar.A,{width:"4rem"})]})})}function InvertYAxis(){const lasairMock=(0,mockStore.A)({subject:lasairSubject});return(0,jsx_runtime.jsx)(ViewerContext,{store:lasairMock,children:(0,jsx_runtime.jsxs)(Box.a,{direction:"row",width:"large",children:[(0,jsx_runtime.jsx)(DataImageViewer.A,{loadingState:async_states_default().success}),(0,jsx_runtime.jsx)(ImageToolbar.A,{width:"4rem"})]})})}NarrowView.parameters={viewport:{defaultViewport:"iphone5"}};const __namedExportsOrder=["Default","NarrowView","PanZoom","InvertYAxis"]},"./src/components/Classifier/components/SubjectViewer/components/DataImageViewer/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>DataImageViewerConnector});var helpers=__webpack_require__("./src/helpers/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Grid=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),withParentSize=__webpack_require__("../../node_modules/@visx/responsive/esm/enhancers/withParentSize.js"),ScatterPlotViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/ScatterPlotViewer/index.js"),SingleImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/index.js"),getZoomBackgroundColor=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/getZoomBackgroundColor/getZoomBackgroundColor.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"DataImageViewer__StyledBox",componentId:"sc-j3kw6w-0"})(["position:relative;"]),CHART_MARGINS={bottom:50,left:70,right:10,top:40},JSON_DATA={data:[],chartOptions:{xAxisLabel:"",yAxisLabel:""}},DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},DEFAULT_THEME={dark:!1,global:{colors:{}}},DataImageViewer=(0,react.forwardRef)(function DataImageViewer(_ref,ref){var _ref$allowPanZoom=_ref.allowPanZoom,allowPanZoom=void 0===_ref$allowPanZoom?"":_ref$allowPanZoom,_ref$imageLocation=_ref.imageLocation,imageLocation=void 0===_ref$imageLocation?null:_ref$imageLocation,_ref$jsonData=_ref.jsonData,jsonData=void 0===_ref$jsonData?JSON_DATA:_ref$jsonData,loadingState=_ref.loadingState,parentWidth=_ref.parentWidth,_ref$resetView=_ref.resetView,resetView=void 0===_ref$resetView?DEFAULT_HANDLER:_ref$resetView,_ref$setAllowPanZoom=_ref.setAllowPanZoom,setAllowPanZoom=void 0===_ref$setAllowPanZoom?DEFAULT_HANDLER:_ref$setAllowPanZoom,_ref$setOnPan=_ref.setOnPan,setOnPan=void 0===_ref$setOnPan?DEFAULT_HANDLER:_ref$setOnPan,_ref$setOnZoom=_ref.setOnZoom,setOnZoom=void 0===_ref$setOnZoom?DEFAULT_HANDLER:_ref$setOnZoom,_ref$theme=_ref.theme,theme=void 0===_ref$theme?DEFAULT_THEME:_ref$theme,zoomConfiguration=_ref.zoomConfiguration,dark=theme.dark,_theme$global$colors=theme.global.colors,colors=void 0===_theme$global$colors?{}:_theme$global$colors,chartOptions=jsonData.chartOptions,zoomEnabled={image:"image"===allowPanZoom,scatterPlot:"scatterPlot"===allowPanZoom},imageViewerBackground=(0,getZoomBackgroundColor.A)(dark,zoomEnabled.image,colors),areas=parentWidth<=500?[{name:"scatterPlot",start:[0,0],end:[0,0]},{name:"image",start:[0,1],end:[0,1]}]:[{name:"scatterPlot",start:[0,0],end:[0,0]},{name:"image",start:[1,0],end:[1,0]}],columns=parentWidth<=500?["full"]:["1/2","1/2"],rows=parentWidth<=500?["auto","auto"]:["full"];var data=jsonData.data?jsonData.data:jsonData;return(0,jsx_runtime.jsxs)(Grid.x,{areas,columns,fill:!0,forwardedRef:ref,gap:"xsmall",pad:{horizontal:"xsmall"},rows,children:[(0,jsx_runtime.jsx)(StyledBox,{border:zoomEnabled.scatterPlot&&{color:"brand",size:"xsmall"},gridArea:"scatterPlot",height:"500px",children:(0,jsx_runtime.jsx)(ScatterPlotViewer.A,{data,invertAxes:null==chartOptions?void 0:chartOptions.invertAxes,margin:CHART_MARGINS,setOnPan:zoomEnabled.scatterPlot?setOnPan:DEFAULT_HANDLER,setOnZoom:zoomEnabled.scatterPlot?setOnZoom:DEFAULT_HANDLER,xAxisLabel:null==chartOptions?void 0:chartOptions.xAxisLabel,yAxisLabel:null==chartOptions?void 0:chartOptions.yAxisLabel,yAxisLabelOffset:50,zoomConfiguration,zoomControlFn:zoomEnabled.scatterPlot?function(){return setAllowPanZoom("")}:function(){return setAllowPanZoom("scatterPlot")},zooming:zoomEnabled.scatterPlot})}),(0,jsx_runtime.jsx)(Box.a,{background:imageViewerBackground,border:zoomEnabled.image&&{color:"brand",size:"xsmall"},gridArea:"image",children:imageLocation&&(0,jsx_runtime.jsx)(SingleImageViewer.Ay,{enableInteractionLayer:!1,imageLocation,loadingState,setOnPan:zoomEnabled.image?setOnPan:DEFAULT_HANDLER,setOnZoom:zoomEnabled.image?setOnZoom:DEFAULT_HANDLER,zoomControlFn:zoomEnabled.image?function(){return function disableImageZoom(){resetView(),setAllowPanZoom("")}()}:function(){return setAllowPanZoom("image")},zooming:zoomEnabled.image})})]})});DataImageViewer.propTypes={allowPanZoom:prop_types_default().string,enableRotation:prop_types_default().func,imageLocation:prop_types_default().object,jsonData:prop_types_default().shape({data:prop_types_default().oneOfType([prop_types_default().array,prop_types_default().object]),chartOptions:prop_types_default().object}),move:prop_types_default().bool,parentWidth:prop_types_default().number,resetView:prop_types_default().func,rotation:prop_types_default().number,setAllowPanZoom:prop_types_default().func,setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,theme:prop_types_default().object};const DataImageViewer_DataImageViewer=(0,styled_components_browser_esm.withTheme)((0,withParentSize.A)(DataImageViewer));DataImageViewer.__docgenInfo={description:"",methods:[],displayName:"DataImageViewer",props:{allowPanZoom:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},imageLocation:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"object"},required:!1},jsonData:{defaultValue:{value:"{\n  data: [],\n  chartOptions: {\n    xAxisLabel: '',\n    yAxisLabel: ''\n  }\n}",computed:!1},description:"",type:{name:"shape",value:{data:{name:"union",value:[{name:"array"},{name:"object"}],required:!1},chartOptions:{name:"object",required:!1}}},required:!1},resetView:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setAllowPanZoom:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnPan:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnZoom:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},theme:{defaultValue:{value:"{\n  dark: false,\n  global: {\n    colors: {}\n  }\n}",computed:!1},description:"",type:{name:"object"},required:!1},enableRotation:{description:"",type:{name:"func"},required:!1},move:{description:"",type:{name:"bool"},required:!1},parentWidth:{description:"",type:{name:"number"},required:!1},rotation:{description:"",type:{name:"number"},required:!1}}};var hooks=__webpack_require__("./src/hooks/index.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}var _excluded=["onError","onReady","subject","viewerConfiguration"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DataImageViewerContainer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},SUBJECT={id:"",locations:[]};function DataImageViewerContainer(_ref){var _jsonData$chartOption,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DataImageViewerContainer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DataImageViewerContainer_DEFAULT_HANDLER:_ref$onReady,_ref$subject=_ref.subject,subject=void 0===_ref$subject?SUBJECT:_ref$subject,viewerConfiguration=_ref.viewerConfiguration,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),_useState2=_slicedToArray((0,react.useState)(""),2),allowPanZoom=_useState2[0],setAllowPanZoom=_useState2[1],_useDataImageSubject=function useDataImageSubject(_ref){var onError=_ref.onError,onReady=_ref.onReady,subject=_ref.subject,_useSubjectJSON=(0,hooks.ej)({onError,onReady,subject}),loading=_useSubjectJSON.loading,data=(_useSubjectJSON.error,_useSubjectJSON.data),viewer=_useSubjectJSON.viewer,jsonData={data:[],chartOptions:{}},imageLocation=null;data&&!loading&&(jsonData=data);var locations=subject.locations.filter(function(location){return"image"===location.type});return(null==locations?void 0:locations.length)>0&&(imageLocation=locations.reverse()[0]),{imageLocation,jsonData,loading,viewer}}({onError,onReady,subject}),imageLocation=_useDataImageSubject.imageLocation,jsonData=_useDataImageSubject.jsonData,viewer=(_useDataImageSubject.loading,_useDataImageSubject.viewer);if(!subject.id)return null;var zoomConfiguration=(null===(_jsonData$chartOption=jsonData.chartOptions)||void 0===_jsonData$chartOption?void 0:_jsonData$chartOption.zoomConfiguration)||(null==viewerConfiguration?void 0:viewerConfiguration.zoomConfiguration);return(0,jsx_runtime.jsx)(DataImageViewer_DataImageViewer,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({allowPanZoom,imageLocation,ref:viewer,jsonData,setAllowPanZoom,zoomConfiguration},rest))}DataImageViewerContainer.propTypes={onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator.A)})},DataImageViewerContainer.__docgenInfo={description:"",methods:[],displayName:"DataImageViewerContainer",props:{onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"{\n  id: '',\n  locations: []\n}",computed:!1},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1}}};const DataImageViewerConnector=(0,helpers.Lg)(DataImageViewerContainer,function storeMapper(classifierStore){var subject=classifierStore.subjects.active,_classifierStore$subj=classifierStore.subjectViewer;return{resetView:_classifierStore$subj.resetView,setOnPan:_classifierStore$subj.setOnPan,setOnZoom:_classifierStore$subj.setOnZoom,subject}})}}]);