"use strict";(self.webpackChunk_zooniverse_classifier=self.webpackChunk_zooniverse_classifier||[]).push([[7272],{"./src/components/Classifier/components/ImageToolbar/components/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MA:()=>_ZoomOutButton__WEBPACK_IMPORTED_MODULE_7__.A,U9:()=>_ResetButton__WEBPACK_IMPORTED_MODULE_4__.A,Z8:()=>_ZoomInButton__WEBPACK_IMPORTED_MODULE_6__.A,g3:()=>_MoveButton__WEBPACK_IMPORTED_MODULE_3__.A,vB:()=>_AnnotateButton__WEBPACK_IMPORTED_MODULE_0__.A,wi:()=>_RotateButton__WEBPACK_IMPORTED_MODULE_5__.A,zj:()=>_InvertButton__WEBPACK_IMPORTED_MODULE_2__.A});var _AnnotateButton__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/AnnotateButton/index.js"),_InvertButton__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/FullscreenButton/index.js"),__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/InvertButton/index.js")),_MoveButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/MoveButton/index.js"),_ResetButton__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ResetButton/index.js"),_RotateButton__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/RotateButton/index.js"),_ZoomInButton__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomInButton/index.js"),_ZoomOutButton__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/ZoomOutButton/index.js")},"./src/components/Classifier/components/SubjectViewer/components/FlipbookViewer/FlipbookViewerContainer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>FlipbookViewer_FlipbookViewerContainer});var react=__webpack_require__("../../node_modules/react/index.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),hooks=__webpack_require__("./src/hooks/index.js"),locationValidator=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),SingleImageViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewer.jsx"),Select=__webpack_require__("../../node_modules/grommet/es6/components/Select/Select.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),ThemeContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),Grid=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),Pause=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Pause.js"),CirclePlay=__webpack_require__("../../node_modules/grommet-icons/es6/icons/CirclePlay.js"),FormDown=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormDown.js"),FormPrevious=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormPrevious.js"),FormNext=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormNext.js"),debounce=__webpack_require__("../../node_modules/lodash/debounce.js"),debounce_default=__webpack_require__.n(debounce),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("./src/translations/i18n.jsx");const theme={global:{colors:{icon:{dark:"white",light:"black"},text:{dark:"white",light:"black"}},hover:{background:"accent-1"}},select:{icons:{margin:"0"},options:{text:{size:"small"}}}};var ViewModeButton=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/ViewModeButton/ViewModeButton.jsx"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var SpeedSelect=(0,styled_components_browser_esm.default)(Select.l).withConfig({displayName:"FlipbookControls__SpeedSelect",componentId:"sc-cjnv8p-0"})(["display:block;padding:0 5px;text-align:right;"]),DirectionButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FlipbookControls__DirectionButton",componentId:"sc-cjnv8p-1"})(["border:none;padding:0;& > div{flex-direction:column;}"]),ThumbnailButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FlipbookControls__ThumbnailButton",componentId:"sc-cjnv8p-2"})(["display:flex;"," "," padding:0;border:none;background-size:cover;background-repeat:no-repeat;background-position:center;"," &[aria-selected=true]{border:solid 2px ",";}"],(function(props){return(0,styled_components_browser_esm.css)(["height:",";"],props.thumbnailDimension)}),(function(props){return(0,styled_components_browser_esm.css)(["width:",";"],props.thumbnailDimension)}),(function(props){return(0,styled_components_browser_esm.css)(["background-image:url(",");"],props.thumbnailerUrl)}),(function(props){return props.theme.global.colors["neutral-2"]})),backgrounds={dark:"dark-3",light:"neutral-6"},DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},FlipbookControls=function FlipbookControls(_ref){var _ref$currentFrame=_ref.currentFrame,currentFrame=void 0===_ref$currentFrame?0:_ref$currentFrame,_ref$enableSwitchView=_ref.enableSwitchView,enableSwitchView=void 0!==_ref$enableSwitchView&&_ref$enableSwitchView,_ref$flipbookSpeed=_ref.flipbookSpeed,flipbookSpeed=void 0===_ref$flipbookSpeed?1:_ref$flipbookSpeed,_ref$locations=_ref.locations,locations=void 0===_ref$locations?[]:_ref$locations,_ref$onFrameChange=_ref.onFrameChange,onFrameChange=void 0===_ref$onFrameChange?DEFAULT_HANDLER:_ref$onFrameChange,_ref$onPlayPause=_ref.onPlayPause,onPlayPause=void 0===_ref$onPlayPause?DEFAULT_HANDLER:_ref$onPlayPause,_ref$playing=_ref.playing,playing=void 0!==_ref$playing&&_ref$playing,playIterations=_ref.playIterations,_ref$setFlipbookSpeed=_ref.setFlipbookSpeed,setFlipbookSpeed=void 0===_ref$setFlipbookSpeed?DEFAULT_HANDLER:_ref$setFlipbookSpeed,t=(0,i18n.Bd)("components").t,timeoutRef=(0,react.useRef)(null),_useState2=_slicedToArray((0,react.useState)(0),2),iterationCounter=_useState2[0],setIterationCounter=_useState2[1],_useState4=_slicedToArray((0,react.useState)(!1),2),smallScreenStyle=_useState4[0],setSmallScreenStyle=_useState4[1],controlsContainer=(0,react.useRef)(null);(0,react.useEffect)((function(){var debouncedObserver=debounce_default()((function(entries){entries[0].contentRect.width<500?setSmallScreenStyle(!0):setSmallScreenStyle(!1)}),100),containerElement=controlsContainer.current,resizeObserver=new window.ResizeObserver(debouncedObserver);return resizeObserver.observe(containerElement),function(){resizeObserver.disconnect()}}),[controlsContainer.current]);var handleKeyDown=function handleKeyDown(event){var index=currentFrame;switch(event.key){case"ArrowRight":event.preventDefault(),event.stopPropagation(),playing&&onPlayPause(),handleNext(),index<locations.length-1?document.getElementById("thumbnail-".concat(index+1)).focus():document.getElementById("thumbnail-".concat(0)).focus();break;case"ArrowLeft":event.preventDefault(),event.stopPropagation(),playing&&onPlayPause(),handlePrevious(),index>0?document.getElementById("thumbnail-".concat(index-1)).focus():document.getElementById("thumbnail-".concat(locations.length-1)).focus();break;default:return!0}},handlePrevious=function handlePrevious(){onFrameChange(currentFrame>0?currentFrame-1:locations.length-1)},handleNext=function handleNext(){currentFrame<locations.length-1?onFrameChange(currentFrame+1):onFrameChange(0)};(0,react.useEffect)((function(){return playing&&(iterationCounter<playIterations*locations.length?timeoutRef.current=setTimeout((function(){!function handleIterationCounter(){playIterations!==1/0&&setIterationCounter(iterationCounter+1)}(),handleNext()}),500/flipbookSpeed):iterationCounter===playIterations*locations.length&&onPlayPause()),function(){!function resetTimeout(){setIterationCounter(0),timeoutRef.current&&clearInterval(timeoutRef.current)}()}}),[playing,currentFrame]);var playPauseLabel=playing?"SubjectViewer.VideoController.pause":"SubjectViewer.VideoController.play";return(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:theme,children:(0,jsx_runtime.jsx)(Box.a,{background:backgrounds,ref:controlsContainer,children:(0,jsx_runtime.jsxs)(Grid.x,{columns:smallScreenStyle?["75px","flex","75px"]:["90px","flex","90px"],pad:smallScreenStyle?{horizontal:"10px",vertical:"5px"}:{horizontal:"20px",vertical:"10px"},gap:smallScreenStyle?"xsmall":"small",children:[(0,jsx_runtime.jsxs)(Box.a,{direction:"row",children:[(0,jsx_runtime.jsx)(Button.$,{a11yTitle:t(playPauseLabel),onClick:onPlayPause,icon:playing?(0,jsx_runtime.jsx)(Pause.v,{size:smallScreenStyle?"20px":"medium"}):(0,jsx_runtime.jsx)(CirclePlay.H,{size:smallScreenStyle?"20px":"medium"}),plain:!0}),(0,jsx_runtime.jsx)(SpeedSelect,{a11yTitle:t("SubjectViewer.VideoController.playbackSpeed"),options:["0.25x","0.5x","1x","2x","4x"],value:"".concat(flipbookSpeed,"x"),onChange:function handlePlaybackSpeed(e){setFlipbookSpeed(Number(e.value.slice(0,e.value.length-1)))},plain:!0,size:smallScreenStyle?"small":"16px",icon:(0,jsx_runtime.jsx)(FormDown.t,{size:smallScreenStyle?"small":"16px"}),focusIndicator:!0})]}),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",justify:"center",gap:smallScreenStyle?"xsmall":"small",children:[(0,jsx_runtime.jsx)(DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormPrevious.Q,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"),onClick:handlePrevious}),(0,jsx_runtime.jsx)(Box.a,{"aria-label":"Image thumbnails",direction:"row",gap:"5px",role:"tablist",align:"center",children:(null==locations?void 0:locations.length)&&locations.map((function(location,index){var thumbnailerUrl="https://thumbnails.zooniverse.org/100x100".concat(location.url.slice(7,location.url.length)),activeFrame=currentFrame===index,tabIndex=activeFrame?0:-1;return(0,jsx_runtime.jsx)(ThumbnailButton,{id:"thumbnail-".concat(index),"aria-controls":"flipbook-tab-panel","aria-label":"".concat(t("SubjectViewer.MultiFrameViewer.FrameCarousel.thumbnailAltText")," ").concat(index+1),"aria-selected":activeFrame?"true":"false",onClick:function onClick(){return function handleThumbnailClick(index){playing&&onPlayPause(),onFrameChange(index)}(index)},onKeyDown:handleKeyDown,role:"tab",tabIndex,thumbnailDimension:smallScreenStyle?"30px":"40px",thumbnailerUrl},"".concat(location.url,"-").concat(index))}))}),(0,jsx_runtime.jsx)(DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormNext.O,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"),onClick:handleNext})]}),(0,jsx_runtime.jsx)(Box.a,{justify:"center",align:"center",children:enableSwitchView&&(0,jsx_runtime.jsx)(ViewModeButton.A,{smallScreenStyle})})]})})})};FlipbookControls.displayName="FlipbookControls",FlipbookControls.propTypes={currentFrame:prop_types.number,enableSwitchView:prop_types.bool,flipbookSpeed:prop_types.number,onFrameChange:prop_types.func,onPlayPause:prop_types.func,playing:prop_types.bool,setFlipbookSpeed:prop_types.func};const FlipbookControls_FlipbookControls=FlipbookControls;function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function storeMapper(store){var _store$workflows,_store$subjectViewer=store.subjectViewer,flipbookSpeed=_store$subjectViewer.flipbookSpeed,setFlipbookSpeed=_store$subjectViewer.setFlipbookSpeed;return{enableSwitchView:(null===(_store$workflows=store.workflows)||void 0===_store$workflows||null===(_store$workflows=_store$workflows.active)||void 0===_store$workflows?void 0:_store$workflows.configuration).enable_switching_flipbook_and_separate,flipbookSpeed,setFlipbookSpeed}}function FlipbookControlsConnector(props){var _useStores=(0,hooks.gy)(storeMapper),enableSwitchView=_useStores.enableSwitchView,flipbookSpeed=_useStores.flipbookSpeed,setFlipbookSpeed=_useStores.setFlipbookSpeed;return(0,jsx_runtime.jsx)(FlipbookControls_FlipbookControls,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({enableSwitchView,flipbookSpeed,setFlipbookSpeed},props))}FlipbookControls.__docgenInfo={description:"",methods:[],displayName:"FlipbookControls",props:{currentFrame:{defaultValue:{value:"0",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},enableSwitchView:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},flipbookSpeed:{defaultValue:{value:"1",computed:!1},description:"",type:{name:"custom",raw:"number"},required:!1},locations:{defaultValue:{value:"[]",computed:!1},required:!1},onFrameChange:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},onPlayPause:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1},playing:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},setFlipbookSpeed:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"custom",raw:"func"},required:!1}}},FlipbookControlsConnector.displayName="FlipbookControlsConnector";const FlipbookControls_FlipbookControlsConnector=(0,mobxreact_esm.PA)(FlipbookControlsConnector);function FlipbookViewer_slicedToArray(r,e){return function FlipbookViewer_arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function FlipbookViewer_iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function FlipbookViewer_unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return FlipbookViewer_arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?FlipbookViewer_arrayLikeToArray(r,a):void 0}}(r,e)||function FlipbookViewer_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FlipbookViewer_arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}FlipbookControlsConnector.__docgenInfo={description:"",methods:[],displayName:"FlipbookControlsConnector"};var FlipbookViewer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},FlipbookViewer=function FlipbookViewer(_ref){var _subject$locations$de,_subject$locations$cu,_ref$defaultFrame=_ref.defaultFrame,defaultFrame=void 0===_ref$defaultFrame?0:_ref$defaultFrame,_ref$enableInteractio=_ref.enableInteractionLayer,enableInteractionLayer=void 0!==_ref$enableInteractio&&_ref$enableInteractio,_ref$enableRotation=_ref.enableRotation,enableRotation=void 0===_ref$enableRotation?FlipbookViewer_DEFAULT_HANDLER:_ref$enableRotation,_ref$flipbookAutoplay=_ref.flipbookAutoplay,flipbookAutoplay=void 0!==_ref$flipbookAutoplay&&_ref$flipbookAutoplay,_ref$invert=_ref.invert,invert=void 0!==_ref$invert&&_ref$invert,_ref$limitSubjectHeig=_ref.limitSubjectHeight,limitSubjectHeight=void 0!==_ref$limitSubjectHeig&&_ref$limitSubjectHeig,_ref$move=_ref.move,move=void 0!==_ref$move&&_ref$move,_ref$onError=_ref.onError,onError=void 0===_ref$onError?FlipbookViewer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?FlipbookViewer_DEFAULT_HANDLER:_ref$onReady,playIterations=_ref.playIterations,_ref$rotation=_ref.rotation,rotation=void 0===_ref$rotation?0:_ref$rotation,_ref$setOnPan=_ref.setOnPan,setOnPan=void 0===_ref$setOnPan?FlipbookViewer_DEFAULT_HANDLER:_ref$setOnPan,_ref$setOnZoom=_ref.setOnZoom,setOnZoom=void 0===_ref$setOnZoom?FlipbookViewer_DEFAULT_HANDLER:_ref$setOnZoom,subject=_ref.subject,_useState2=FlipbookViewer_slicedToArray((0,react.useState)(defaultFrame),2),currentFrame=_useState2[0],setCurrentFrame=_useState2[1],_useState4=FlipbookViewer_slicedToArray((0,react.useState)(!1),2),playing=_useState4[0],setPlaying=_useState4[1];(0,react.useEffect)((function(){!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&flipbookAutoplay&&setPlaying(!0)}),[]);var defaultLocationUrl=null==subject||null===(_subject$locations$de=subject.locations[defaultFrame])||void 0===_subject$locations$de?void 0:_subject$locations$de.url,_useSubjectImage=(0,hooks.Ze)({src:defaultLocationUrl,onError,onReady}),img=_useSubjectImage.img,subjectImage=(_useSubjectImage.error,_useSubjectImage.loading,_useSubjectImage.subjectImage),_img$naturalHeight=img.naturalHeight,naturalHeight=void 0===_img$naturalHeight?600:_img$naturalHeight,_img$naturalWidth=img.naturalWidth,naturalWidth=void 0===_img$naturalWidth?800:_img$naturalWidth,onPlayPause=function onPlayPause(){setPlaying(!playing)},onKeyZoom=(0,hooks.KG)({customKeyMappings:{" ":onPlayPause}}).onKeyZoom,imageLocationUrl=null==subject||null===(_subject$locations$cu=subject.locations[currentFrame])||void 0===_subject$locations$cu?void 0:_subject$locations$cu.url;return(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(SingleImageViewer.A,{enableInteractionLayer,enableRotation,frame:currentFrame,imgRef:subjectImage,invert,limitSubjectHeight,move,naturalHeight,naturalWidth,onKeyDown:onKeyZoom,rotation,setOnPan,setOnZoom,src:imageLocationUrl,subject}),(0,jsx_runtime.jsx)(FlipbookControls_FlipbookControlsConnector,{currentFrame,locations:subject.locations,onFrameChange:setCurrentFrame,onPlayPause,playing,playIterations})]})};FlipbookViewer.displayName="FlipbookViewer",FlipbookViewer.propTypes={defaultFrame:prop_types_default().number,enableInteractionLayer:prop_types_default().bool,enableRotation:prop_types_default().func,flipbookAutoplay:prop_types_default().bool,invert:prop_types_default().bool,limitSubjectHeight:prop_types_default().bool,move:prop_types_default().bool,onError:prop_types_default().func,onReady:prop_types_default().func,playIterations:prop_types_default().number,rotation:prop_types_default().number,setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator.A)}).isRequired};const FlipbookViewer_FlipbookViewer=FlipbookViewer;FlipbookViewer.__docgenInfo={description:"",methods:[],displayName:"FlipbookViewer",props:{defaultFrame:{defaultValue:{value:"0",computed:!1},description:"Fetched from metadata.default_frame or initialized to zero",type:{name:"number"},required:!1},enableInteractionLayer:{defaultValue:{value:"false",computed:!1},description:"Determined per mobx store WorkflowStepStore via SubjectViewer.",type:{name:"bool"},required:!1},enableRotation:{defaultValue:{value:"() => true",computed:!1},description:"Function passed from Subject Viewer Store",type:{name:"func"},required:!1},flipbookAutoplay:{defaultValue:{value:"false",computed:!1},description:"Fetched from workflow configuration. Determines whether to autoplay the loop on viewer load",type:{name:"bool"},required:!1},invert:{defaultValue:{value:"false",computed:!1},description:"Passed from Subject Viewer Store",type:{name:"bool"},required:!1},limitSubjectHeight:{defaultValue:{value:"false",computed:!1},description:"Passed from Workflow Store per workflow configuration",type:{name:"bool"},required:!1},move:{defaultValue:{value:"false",computed:!1},description:"Passed from Subject Viewer Store",type:{name:"bool"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and called if `useSubjectImage()` hook fails.",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and dimensions are added to classification metadata. Called after svg layers successfully load with `defaultFrameSrc`.",type:{name:"func"},required:!1},rotation:{defaultValue:{value:"0",computed:!1},description:"Passed from the subject viewer store. Needed in SingleImageViewer to handle transforming (rotating) the image",type:{name:"number"},required:!1},setOnPan:{defaultValue:{value:"() => true",computed:!1},description:"Passed from the Subject Viewer Store",type:{name:"func"},required:!1},setOnZoom:{defaultValue:{value:"() => true",computed:!1},description:"Passed from the Subject Viewer Store",type:{name:"func"},required:!1},playIterations:{description:"Fetched from workflow configuration. Number preference for how many loops to play",type:{name:"number"},required:!1},subject:{description:"Required. Passed from SubjectViewer component",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!0}}};var SeparateFramesViewer=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/SeparateFramesViewer.jsx");function FlipbookViewerContainer_storeMapper(store){var _store$workflows,_store$subjectViewer=store.subjectViewer,enableRotation=_store$subjectViewer.enableRotation,defaultFrame=_store$subjectViewer.frame,invert=_store$subjectViewer.invert,move=_store$subjectViewer.move,rotation=_store$subjectViewer.rotation,separateFramesView=_store$subjectViewer.separateFramesView,setOnPan=_store$subjectViewer.setOnPan,setOnZoom=_store$subjectViewer.setOnZoom,_store$workflows$acti=null===(_store$workflows=store.workflows)||void 0===_store$workflows||null===(_store$workflows=_store$workflows.active)||void 0===_store$workflows?void 0:_store$workflows.configuration;return{defaultFrame,enableRotation,flipbookAutoplay:_store$workflows$acti.flipbook_autoplay,invert,limitSubjectHeight:_store$workflows$acti.limit_subject_height,move,playIterations:_store$workflows$acti.playIterations,rotation,separateFramesView,setOnPan,setOnZoom}}var FlipbookViewerContainer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function FlipbookViewerContainer(_ref){var _ref$enableInteractio=_ref.enableInteractionLayer,enableInteractionLayer=void 0!==_ref$enableInteractio&&_ref$enableInteractio,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?async_states_default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?FlipbookViewerContainer_DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?FlipbookViewerContainer_DEFAULT_HANDLER:_ref$onReady,subject=_ref.subject,_useStores=(0,hooks.gy)(FlipbookViewerContainer_storeMapper),defaultFrame=_useStores.defaultFrame,enableRotation=_useStores.enableRotation,flipbookAutoplay=_useStores.flipbookAutoplay,invert=_useStores.invert,limitSubjectHeight=_useStores.limitSubjectHeight,move=_useStores.move,playIterations=_useStores.playIterations,rotation=_useStores.rotation,separateFramesView=_useStores.separateFramesView,setOnPan=_useStores.setOnPan,setOnZoom=_useStores.setOnZoom;return(0,react.useEffect)((function preloadImages(){var _subject$locations;null==subject||null===(_subject$locations=subject.locations)||void 0===_subject$locations||_subject$locations.forEach((function(_ref2){var url=_ref2.url;url&&((new(0,window.Image)).src=url)}))}),[null==subject?void 0:subject.locations]),loadingState!==async_states_default().error&&null!=subject&&subject.locations?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:separateFramesView?(0,jsx_runtime.jsx)(SeparateFramesViewer.A,{enableInteractionLayer,enableRotation,onError,onReady,subject}):(0,jsx_runtime.jsx)(FlipbookViewer_FlipbookViewer,{defaultFrame,enableInteractionLayer,enableRotation,flipbookAutoplay,invert,limitSubjectHeight,move,onError,onReady,playIterations,rotation,setOnPan,setOnZoom,subject})}):(0,jsx_runtime.jsx)("div",{children:"Something went wrong."})}FlipbookViewerContainer.propTypes={enableInteractionLayer:prop_types_default().bool,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator.A)}).isRequired};const FlipbookViewer_FlipbookViewerContainer=(0,mobxreact_esm.PA)(FlipbookViewerContainer);FlipbookViewerContainer.__docgenInfo={description:"",methods:[],displayName:"FlipbookViewerContainer",props:{enableInteractionLayer:{defaultValue:{value:"false",computed:!1},description:"Determined per mobx store WorkflowStepStore via SubjectViewer.",type:{name:"bool"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"@zooniverse/async-states",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and called if `useSubjectImage()` hook fails.",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and dimensions are added to classification metadata. Called after svg layers successfully load with `defaultFrameSrc`.",type:{name:"func"},required:!1},subject:{description:"Required. Passed from mobx store via SubjectViewer.",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/SeparateFramesViewer.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var mobx_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),grommet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_3__),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../lib-async-states/src/async-states.js"),_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/hooks/index.js"),_helpers_locationValidator__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/helpers/locationValidator/index.js"),_components_SeparateFrame_SeparateFrame__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/SeparateFrame/SeparateFrame.jsx"),_components_ViewModeButton_ViewModeButton__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/ViewModeButton/ViewModeButton.jsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function storeMapper(store){var _store$workflows,_store$workflows$acti=null===(_store$workflows=store.workflows)||void 0===_store$workflows||null===(_store$workflows=_store$workflows.active)||void 0===_store$workflows?void 0:_store$workflows.configuration;return{limitSubjectHeight:_store$workflows$acti.limit_subject_height,multiImageLayout:_store$workflows$acti.multi_image_layout}}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function SeparateFramesViewer(_ref){var _subject$locations2,_ref$enableInteractio=_ref.enableInteractionLayer,enableInteractionLayer=void 0!==_ref$enableInteractio&&_ref$enableInteractio,_ref$enableRotation=_ref.enableRotation,enableRotation=void 0===_ref$enableRotation?DEFAULT_HANDLER:_ref$enableRotation,_ref$loadingState=_ref.loadingState,loadingState=void 0===_ref$loadingState?_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4___default().initialized:_ref$loadingState,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,subject=_ref.subject,_useStores=(0,_hooks__WEBPACK_IMPORTED_MODULE_6__.gy)(storeMapper),limitSubjectHeight=_useStores.limitSubjectHeight,multiImageLayout=_useStores.multiImageLayout,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(!1),2),forceColLayout=_useState2[0],setForceColLayout=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(1),2),numFramesHorizontally=_useState4[0],setNumFramesHorizontally=_useState4[1];(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){var _subject$locations;"row"===multiImageLayout?setNumFramesHorizontally(null==subject||null===(_subject$locations=subject.locations)||void 0===_subject$locations?void 0:_subject$locations.length):"grid2"===multiImageLayout?setNumFramesHorizontally(2):"grid3"===multiImageLayout&&setNumFramesHorizontally(3)}),[multiImageLayout]);var framesContainer=(0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null),resizeObserver=(0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null);return(0,react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){var tooSmallContainerWidth=300*numFramesHorizontally;return resizeObserver.current=new window.ResizeObserver((function(entries){entries[0].contentRect.width<tooSmallContainerWidth?setForceColLayout(!0):setForceColLayout(!1)})),framesContainer.current&&resizeObserver.current.observe(framesContainer.current),function(){framesContainer.current&&resizeObserver.current.unobserve(framesContainer.current)}}),[numFramesHorizontally]),loadingState!==_zooniverse_async_states__WEBPACK_IMPORTED_MODULE_4___default().error&&null!=subject&&subject.locations?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsxs)("div",{ref:framesContainer,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_1__.x,{gap:"xsmall",columns:forceColLayout?"auto":["repeat(".concat(numFramesHorizontally,", 1fr)")],rows:"auto",children:null===(_subject$locations2=subject.locations)||void 0===_subject$locations2?void 0:_subject$locations2.map((function(location,index){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_components_SeparateFrame_SeparateFrame__WEBPACK_IMPORTED_MODULE_8__.A,{enableInteractionLayer,enableRotation,frame:index,frameUrl:location.url,limitSubjectHeight,onError,onReady,subject},location.url)}))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_2__.a,{justify:"center",pad:"xsmall",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)(_components_ViewModeButton_ViewModeButton__WEBPACK_IMPORTED_MODULE_9__.A,{})})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_10__.jsx)("div",{children:"Something went wrong."})}SeparateFramesViewer.displayName="SeparateFramesViewer";const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_0__.PA)(SeparateFramesViewer);SeparateFramesViewer.propTypes={enableInteractionLayer:prop_types__WEBPACK_IMPORTED_MODULE_3___default().bool,enableRotation:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,loadingState:prop_types__WEBPACK_IMPORTED_MODULE_3___default().string,onError:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,onReady:prop_types__WEBPACK_IMPORTED_MODULE_3___default().func,subject:prop_types__WEBPACK_IMPORTED_MODULE_3___default().shape({locations:prop_types__WEBPACK_IMPORTED_MODULE_3___default().arrayOf(_helpers_locationValidator__WEBPACK_IMPORTED_MODULE_7__.A)}).isRequired},SeparateFramesViewer.__docgenInfo={description:"",methods:[],displayName:"SeparateFramesViewer",props:{enableInteractionLayer:{defaultValue:{value:"false",computed:!1},description:"Determined per mobx store WorkflowStepStore via SubjectViewer.",type:{name:"bool"},required:!1},enableRotation:{defaultValue:{value:"() => true",computed:!1},description:"Passed from Subject Viewer Store",type:{name:"func"},required:!1},loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"@zooniverse/async-states",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and called if `useSubjectImage()` hook fails.",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and dimensions are added to classification metadata. Called after svg layers successfully load with `defaultFrameSrc`.",type:{name:"func"},required:!1},subject:{description:"Required. Passed from mobx store via SubjectViewer.",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!0}}}},"./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/SeparateFrame/SeparateFrame.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/react/index.js"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.js"),_hooks_useKeyZoom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/hooks/useKeyZoom.js"),_SingleImageViewer_SingleImageViewer__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/Classifier/components/SubjectViewer/components/SingleImageViewer/SingleImageViewer.jsx"),_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/Classifier/components/ImageToolbar/components/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _slicedToArray(r,e){return function _arrayWithHoles(r){if(Array.isArray(r))return r}(r)||function _iterableToArrayLimit(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(r,e)||function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}(r,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}var DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function storeMapper(classifierStore){return{hasAnnotateTask:classifierStore.subjectViewer.hasAnnotateTask}}var SeparateFrame=function SeparateFrame(_ref){var _ref$enableInteractio=_ref.enableInteractionLayer,enableInteractionLayer=void 0!==_ref$enableInteractio&&_ref$enableInteractio,_ref$enableRotation=_ref.enableRotation,enableRotation=void 0===_ref$enableRotation?DEFAULT_HANDLER:_ref$enableRotation,_ref$frame=_ref.frame,frame=void 0===_ref$frame?0:_ref$frame,_ref$frameUrl=_ref.frameUrl,frameUrl=void 0===_ref$frameUrl?"":_ref$frameUrl,_ref$limitSubjectHeig=_ref.limitSubjectHeight,limitSubjectHeight=void 0!==_ref$limitSubjectHeig&&_ref$limitSubjectHeig,_ref$onError=_ref.onError,onError=void 0===_ref$onError?DEFAULT_HANDLER:_ref$onError,_ref$onReady=_ref.onReady,onReady=void 0===_ref$onReady?DEFAULT_HANDLER:_ref$onReady,subject=_ref.subject,_useSubjectImage=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.Ze)({frame,src:frameUrl,onError,onReady}),img=_useSubjectImage.img,subjectImage=(_useSubjectImage.error,_useSubjectImage.loading,_useSubjectImage.subjectImage),_img$naturalHeight=img.naturalHeight,naturalHeight=void 0===_img$naturalHeight?600:_img$naturalHeight,_img$naturalWidth=img.naturalWidth,naturalWidth=void 0===_img$naturalWidth?800:_img$naturalWidth,_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),2),invert=_useState2[0],setInvert=_useState2[1],_useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),2),rotation=_useState4[0],setRotation=_useState4[1],_useState6=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(DEFAULT_HANDLER),2),onPan=_useState6[0],setOnPanState=_useState6[1],_useState8=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(DEFAULT_HANDLER),2),onZoom=_useState8[0],setOnZoomState=_useState8[1],_useState0=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),2),separateFrameAnnotate=_useState0[0],setSeparateFrameAnnotate=_useState0[1],_useState10=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),2),separateFrameMove=_useState10[0],setSeparateFrameMove=_useState10[1],handleSetOnPan=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(fn){setOnPanState((function(){return fn}))}),[]),handleSetOnZoom=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)((function(fn){setOnZoomState((function(){return fn}))}),[]);var onKeyZoom=(0,_hooks_useKeyZoom__WEBPACK_IMPORTED_MODULE_4__.o)({panLeft:function panLeft(){onPan(-1,0)},panRight:function panRight(){onPan(1,0)},panUp:function panUp(){onPan(0,-1)},panDown:function panDown(){onPan(0,1)},rotate:rotation,zoomIn:function zoomIn(){onZoom("zoomin",1)},zoomOut:function zoomOut(){onZoom("zoomout",-1)}}).onKeyZoom,separateFrameEnableMove=function separateFrameEnableMove(){setSeparateFrameMove(!0),setSeparateFrameAnnotate(!1)},hasAnnotateTask=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.gy)(storeMapper).hasAnnotateTask;return!hasAnnotateTask&&separateFrameAnnotate&&separateFrameEnableMove(),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{direction:"row",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_SingleImageViewer_SingleImageViewer__WEBPACK_IMPORTED_MODULE_5__.A,{enableInteractionLayer,enableRotation,frame,imgRef:subjectImage,invert,limitSubjectHeight,move:separateFrameMove,naturalHeight,naturalWidth,onKeyDown:onKeyZoom,rotation,setOnPan:handleSetOnPan,setOnZoom:handleSetOnZoom,src:img.src,subject}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_0__.a,{background:{dark:"dark-3",light:"white"},border:{color:{dark:"dark-1",light:"light-3"},side:"all"},direction:"column",height:"fit-content",pad:"8px",style:{width:"3rem"},children:[hasAnnotateTask&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.vB,{separateFrameAnnotate,separateFrameEnableAnnotate:function separateFrameEnableAnnotate(){setSeparateFrameAnnotate(!0),setSeparateFrameMove(!1)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.g3,{separateFrameMove,separateFrameEnableMove}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.Z8,{separateFrameZoomIn:function separateFrameZoomIn(){onZoom("zoomin",1)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.MA,{separateFrameZoomOut:function separateFrameZoomOut(){onZoom("zoomout",-1)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.wi,{separateFrameRotate:function separateFrameRotate(){setRotation((function(prevRotation){return prevRotation-90}))}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.U9,{separateFrameResetView:function separateFrameResetView(){setRotation(0),setInvert(!1),onZoom("zoomto",1)}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_7__.jsx)(_ImageToolbar_components__WEBPACK_IMPORTED_MODULE_6__.zj,{separateFrameInvert:function separateFrameInvert(){setInvert((function(prev){return!prev}))}})]})]})};SeparateFrame.displayName="SeparateFrame",SeparateFrame.propTypes={enableInteractionLayer:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,enableRotation:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,frame:prop_types__WEBPACK_IMPORTED_MODULE_1___default().number,frameUrl:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,limitSubjectHeight:prop_types__WEBPACK_IMPORTED_MODULE_1___default().bool,onError:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,onReady:prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,subject:prop_types__WEBPACK_IMPORTED_MODULE_1___default().shape({locations:prop_types__WEBPACK_IMPORTED_MODULE_1___default().arrayOf(prop_types__WEBPACK_IMPORTED_MODULE_1___default().shape({url:prop_types__WEBPACK_IMPORTED_MODULE_1___default().string}))})};const __WEBPACK_DEFAULT_EXPORT__=SeparateFrame;SeparateFrame.__docgenInfo={description:"",methods:[],displayName:"SeparateFrame",props:{enableInteractionLayer:{defaultValue:{value:"false",computed:!1},description:"Determined per mobx store WorkflowStepStore via SubjectViewer.",type:{name:"bool"},required:!1},enableRotation:{defaultValue:{value:"() => true",computed:!1},description:"Function passed from Subject Viewer Store",type:{name:"func"},required:!1},frame:{defaultValue:{value:"0",computed:!1},description:"Index of the Frame",type:{name:"number"},required:!1},frameUrl:{defaultValue:{value:"''",computed:!1},description:"String of Object.values(subject.locations[this frame index][0])",type:{name:"string"},required:!1},limitSubjectHeight:{defaultValue:{value:"false",computed:!1},description:"Passed from Workflow Store per workflow configuration",type:{name:"bool"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and called if `useSubjectImage()` hook fails.",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"Passed from SubjectViewer and dimensions are added to classification metadata. Called after svg layers successfully load with `defaultFrameSrc`.",type:{name:"func"},required:!1},subject:{description:"Subject Object",type:{name:"shape",value:{locations:{name:"arrayOf",value:{name:"shape",value:{url:{name:"string",required:!1}}},required:!1}}},required:!1}}}},"./src/components/Classifier/components/SubjectViewer/components/SeparateFramesViewer/components/ViewModeButton/ViewModeButton.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var mobx_react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/translations/i18n.jsx"),_hooks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/index.js"),grommet_icons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function _typeof(o){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},_typeof(o)}function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=_typeof(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==_typeof(i)?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var SwitchToFlipbook=function SwitchToFlipbook(props){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(grommet_icons__WEBPACK_IMPORTED_MODULE_4__.h,_objectSpread(_objectSpread({viewBox:"0 0 640 512",color:{light:"black",dark:"white"}},props),{},{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("path",{d:"M596.7-0.2H230.3c-22.6,0-41.5,16.9-41.5,37.7v276.6c0,20.8,18.9,37.7,41.5,37.7h366.4c23.3,0,42.3-16.9,42.3-37.7V37.5 C639,16.7,620.9-0.2,596.7-0.2z M286.7,295.3c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3v-37.7c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3L286.7,295.3z M286.7,194.7c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3V157c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H286.7z M286.7,94.1c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3V56.4c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3L286.7,94.1z M498.1,289c0,6.9-6.3,12.6-14.1,12.6H343.1c-7.8,0-14.1-5.6-14.1-12.6v-75.4c0-6.9,6.3-12.6,14.1-12.6H484c7.8,0,14.1,5.6,14.1,12.6V289z M498.1,138.1c0,6.9-6.3,12.6-14.1,12.6H343.1c-7.8,0-14.1-5.6-14.1-12.6V62.7c0-6.9,6.3-12.6,14.1-12.6H484c7.8,0,14.1,5.6,14.1,12.6V138.1z M596.7,295.3c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-6.3-2.8-6.3-6.3v-37.7c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H596.7z M596.7,194.7c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-7-2.8-7-6.3V157c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3V194.7z M596.7,94.1c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-7-2.8-7-6.3V56.4c0-3.5,3.2-6.3,6.3-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H596.7z"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("path",{d:"M158.4,307.7V128H54.9C25.6,128,0,151.4,0,180.4v279.3C0,488.6,24.6,512,54.9,512h402.3c30.3,0,54.9-23.4,54.9-52.4v-75.2h-97.6l21.4,30.6c3.8,5.3,4.1,12.2,0.9,18c-3.2,5.7-9.4,9.2-16.1,9.2H90.4c-6.9,0-12.1-3.7-15.3-9.5c-3.1-5.9-2.5-13,1.6-18.2M107,197.8c20.2,0,36.6,15.6,36.6,34.9s-16.4,34.9-36.6,34.9c-19.2,0-36.6-15.6-36.6-34.9S87.8,197.8,107,197.8z"})]}))};SwitchToFlipbook.displayName="SwitchToFlipbook";var SwitchToSeparateFrames=function SwitchToSeparateFrames(props){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(grommet_icons__WEBPACK_IMPORTED_MODULE_4__.h,_objectSpread(_objectSpread({viewBox:"0 0 640 512",color:{light:"black",dark:"white"}},props),{},{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("path",{d:"M352 432c0 8.836-7.164 16-16 16H176c-8.838 0-16-7.164-16-16L160 128H48C21.49 128 .0003 149.5 .0003 176v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48L512 384h-160L352 432zM104 439c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9V439zM104 335c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9V335zM104 231c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30C56 196 60.03 192 65 192h30c4.969 0 9 4.031 9 9V231zM408 409c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9v30c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9V409zM591.1 0H239.1C213.5 0 191.1 21.49 191.1 48v256c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48v-256C640 21.49 618.5 0 591.1 0zM303.1 64c17.68 0 32 14.33 32 32s-14.32 32-32 32C286.3 128 271.1 113.7 271.1 96S286.3 64 303.1 64zM574.1 279.6C571.3 284.8 565.9 288 560 288H271.1C265.1 288 260.5 284.6 257.7 279.3C255 273.9 255.5 267.4 259.1 262.6l70-96C332.1 162.4 336.9 160 341.1 160c5.11 0 9.914 2.441 12.93 6.574l22.35 30.66l62.74-94.11C442.1 98.67 447.1 96 453.3 96c5.348 0 10.34 2.672 13.31 7.125l106.7 160C576.6 268 576.9 274.3 574.1 279.6z"})}))};function storeMapper(classifierStore){var _classifierStore$subj=classifierStore.subjectViewer;return{separateFramesView:_classifierStore$subj.separateFramesView,setSeparateFramesView:_classifierStore$subj.setSeparateFramesView}}SwitchToSeparateFrames.displayName="SwitchToSeparateFrames";var ViewModeButton=function ViewModeButton(_ref){var smallScreenStyle=_ref.smallScreenStyle,_useStores=(0,_hooks__WEBPACK_IMPORTED_MODULE_3__.gy)(storeMapper),separateFramesView=_useStores.separateFramesView,setSeparateFramesView=_useStores.setSeparateFramesView,t=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_2__.Bd)("components").t,a11yTitle=t(separateFramesView?"SubjectViewer.SeparateFramesViewer.ViewModeButton.switchToFlipbook":"SubjectViewer.SeparateFramesViewer.ViewModeButton.switchToSeparateFrames");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_1__.$,{a11yTitle,plain:!0,icon:separateFramesView?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SwitchToFlipbook,{onClick:function onClick(){return setSeparateFramesView(!1)},size:smallScreenStyle?"20px":"medium"}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(SwitchToSeparateFrames,{onClick:function onClick(){return setSeparateFramesView(!0)},size:smallScreenStyle?"20px":"medium"}),style:{width:"fit-content"}})};ViewModeButton.displayName="ViewModeButton";const __WEBPACK_DEFAULT_EXPORT__=(0,mobx_react__WEBPACK_IMPORTED_MODULE_0__.PA)(ViewModeButton);ViewModeButton.__docgenInfo={description:"",methods:[],displayName:"ViewModeButton"}}}]);