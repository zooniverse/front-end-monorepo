"use strict";(self.webpackChunk_zooniverse_fe_project=self.webpackChunk_zooniverse_fe_project||[]).push([[2963],{"../lib-react-components/dist/esm/IconActionButton/IconActionButton.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),grommet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),grommet__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/grommet/es6/components/Tip/Tip.js"),prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_excluded=["active","a11yTitle","disabled","dropProps","icon","href","onBlur","onClick","onFocus","onPointerDown","onPointerOut","onPointerOver","onPointerUp","role"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_5__.default)(grommet__WEBPACK_IMPORTED_MODULE_0__.$).withConfig({displayName:"IconActionButton__StyledButton",componentId:"sc-j72o44-0"})(["align-items:center;aspect-ratio:1;background-color:",";border:1.5px solid transparent;border-radius:50%;display:flex;height:",";justify-content:center;width:",";> svg{fill:",";stroke:",";width:min(50%,1.2rem);}&:disabled{cursor:not-allowed;background-color:",";> svg{fill:",";}}&:hover:not(:disabled){background-color:",";> svg{fill:",";stroke:",";}.invert-icon{circle{fill:",";}path{fill:",";}}}&:focus-visible:not(:disabled){border:1.5px solid ",";box-shadow:0px 0px 8px ",";outline:none;}&:active:not(:disabled),&[aria-pressed='true'],&[aria-checked='true']{background-color:",";> svg{fill:",";stroke:",";}}"],(function(props){return props.theme.dark?props.theme.global.colors["dark-3"]:props.theme.global.colors["neutral-6"]}),(function(props){return props.height||"40px"}),(function(props){return props.width||"40px"}),(function(props){return props.theme.dark?props.theme.global.colors["neutral-6"]:props.theme.global.colors["dark-5"]}),(function(props){return props.theme.dark?props.theme.global.colors["neutral-6"]:props.theme.global.colors["dark-5"]}),(function(props){return props.theme.global.colors["light-4"]}),(function(props){return props.theme.global.colors["light-5"]}),(function(props){return props.theme.global.colors["accent-1"]}),(function(props){return props.theme.global.colors["neutral-6"]}),(function(props){return props.theme.global.colors["neutral-6"]}),(function(props){return props.theme.dark?props.theme.global.colors["accent-1"]:props.theme.global.colors["neutral-6"]}),(function(props){return props.theme.dark?props.theme.global.colors["neutral-6"]:props.theme.global.colors["accent-1"]}),(function(props){return props.theme.global.colors["accent-1"]}),(function(props){return props.theme.global.colors["accent-1"]}),(function(props){return props.theme.global.colors["neutral-1"]}),(function(props){return props.theme.global.colors["neutral-6"]}),(function(props){return props.theme.global.colors["neutral-6"]})),HoverContent=(0,styled_components__WEBPACK_IMPORTED_MODULE_5__.default)(grommet__WEBPACK_IMPORTED_MODULE_1__.a).withConfig({displayName:"IconActionButton__HoverContent",componentId:"sc-j72o44-1"})(["display:none;@media (hover:hover){display:flex;}"]),TipContent=function TipContent(_ref){var _ref$message=_ref.message,message=void 0===_ref$message?"":_ref$message;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(HoverContent,{direction:"row",align:"center",width:"100%",animation:{delay:250,duration:200,type:"fadeIn"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_1__.a,{background:"dark-4",round:"5px",pad:"5px",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_2__.E,{children:message})})})},DEFAULT_DROP_PROPS={align:{top:"bottom"}},DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function IconActionButton(_ref2){var _ref2$active=_ref2.active,active=void 0!==_ref2$active&&_ref2$active,a11yTitle=_ref2.a11yTitle,_ref2$disabled=_ref2.disabled,disabled=void 0!==_ref2$disabled&&_ref2$disabled,_ref2$dropProps=_ref2.dropProps,dropProps=void 0===_ref2$dropProps?DEFAULT_DROP_PROPS:_ref2$dropProps,icon=_ref2.icon,href=_ref2.href,_ref2$onBlur=_ref2.onBlur,onBlur=void 0===_ref2$onBlur?DEFAULT_HANDLER:_ref2$onBlur,_ref2$onClick=_ref2.onClick,onClick=void 0===_ref2$onClick?DEFAULT_HANDLER:_ref2$onClick,_ref2$onFocus=_ref2.onFocus,onFocus=void 0===_ref2$onFocus?DEFAULT_HANDLER:_ref2$onFocus,_ref2$onPointerDown=_ref2.onPointerDown,onPointerDown=void 0===_ref2$onPointerDown?DEFAULT_HANDLER:_ref2$onPointerDown,_ref2$onPointerOut=_ref2.onPointerOut,onPointerOut=void 0===_ref2$onPointerOut?DEFAULT_HANDLER:_ref2$onPointerOut,_ref2$onPointerOver=_ref2.onPointerOver,onPointerOver=void 0===_ref2$onPointerOver?DEFAULT_HANDLER:_ref2$onPointerOver,_ref2$onPointerUp=_ref2.onPointerUp,onPointerUp=void 0===_ref2$onPointerUp?DEFAULT_HANDLER:_ref2$onPointerUp,role=_ref2.role,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref2,_excluded),eventHandlers=disabled?{}:{onBlur,onClick,onFocus,onPointerDown,onPointerOut,onPointerOver,onPointerUp},ariaPressed="checkbox"===role||href?void 0:active.toString();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_3__.Y,{content:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(TipContent,{message:a11yTitle}),plain:!0,dropProps,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(StyledButton,_objectSpread(_objectSpread({a11yTitle,active,"aria-pressed":ariaPressed,disabled,href,icon,plain:!0,role},eventHandlers),props))})}IconActionButton.propTypes={active:prop_types__WEBPACK_IMPORTED_MODULE_4__.bool,a11yTitle:prop_types__WEBPACK_IMPORTED_MODULE_4__.string,disabled:prop_types__WEBPACK_IMPORTED_MODULE_4__.bool,dropProps:(0,prop_types__WEBPACK_IMPORTED_MODULE_4__.shape)({align:(0,prop_types__WEBPACK_IMPORTED_MODULE_4__.shape)({top:prop_types__WEBPACK_IMPORTED_MODULE_4__.string,bottom:prop_types__WEBPACK_IMPORTED_MODULE_4__.string,left:prop_types__WEBPACK_IMPORTED_MODULE_4__.string,right:prop_types__WEBPACK_IMPORTED_MODULE_4__.string})}),href:prop_types__WEBPACK_IMPORTED_MODULE_4__.string,icon:(0,prop_types__WEBPACK_IMPORTED_MODULE_4__.oneOfType)([prop_types__WEBPACK_IMPORTED_MODULE_4__.node,prop_types__WEBPACK_IMPORTED_MODULE_4__.object]),onBlur:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,onClick:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,onFocus:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,onPointerDown:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,onPointerOut:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,onPointerOver:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,onPointerUp:prop_types__WEBPACK_IMPORTED_MODULE_4__.func,role:prop_types__WEBPACK_IMPORTED_MODULE_4__.string,theme:(0,prop_types__WEBPACK_IMPORTED_MODULE_4__.shape)({dark:prop_types__WEBPACK_IMPORTED_MODULE_4__.bool})};const __WEBPACK_DEFAULT_EXPORT__=IconActionButton},"./src/screens/SubjectTalkPage/components/SubjectTalkViewer/SubjectTalkViewer.stories.jsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LoggedOut:()=>LoggedOut,MultiImageSubject:()=>MultiImageSubject,SingleImageSubject:()=>SingleImageSubject,VideoSubject:()=>VideoSubject,__namedExportsOrder:()=>__namedExportsOrder,default:()=>SubjectTalkViewer_stories});var slicedToArray=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),taggedTemplateLiteral=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),react=__webpack_require__("../../node_modules/react/index.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),toConsumableArray=__webpack_require__("../../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),regenerator=__webpack_require__("../../node_modules/@babel/runtime/regenerator/index.js"),regenerator_default=__webpack_require__.n(regenerator),src=__webpack_require__("../lib-panoptes-js/src/index.js"),index=__webpack_require__("../../node_modules/swr/dist/index/index.mjs"),auth=__webpack_require__("../../node_modules/panoptes-client/lib/auth.js"),auth_default=__webpack_require__.n(auth);function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}var defaultToken,_getDefaultToken,isBrowser="undefined"!=typeof window;function useUserCollections_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}(_getDefaultToken=_asyncToGenerator(regenerator_default().mark((function _callee(){return regenerator_default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:if(defaultToken=null,!isBrowser){_context.next=3;break}return _context.next=1,auth_default().checkCurrent();case 1:return _context.next=2,auth_default().checkBearerToken();case 2:defaultToken=_context.sent;case 3:case"end":return _context.stop()}}),_callee)}))),function getDefaultToken(){return _getDefaultToken.apply(this,arguments)})();var SWRoptions={revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:0};function fetchUserCollections(_x){return _fetchUserCollections.apply(this,arguments)}function _fetchUserCollections(){return _fetchUserCollections=function useUserCollections_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){useUserCollections_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useUserCollections_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(regenerator_default().mark((function _callee(_ref){var _response$body,query,token,authorization,response;return regenerator_default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return query=_ref.query,token=_ref.token,authorization="Bearer ".concat(token),_context.next=1,src.collections.get({authorization,query});case 1:return response=_context.sent,_context.abrupt("return",null==response||null===(_response$body=response.body)||void 0===_response$body?void 0:_response$body.collections);case 2:case"end":return _context.stop()}}),_callee)}))),_fetchUserCollections.apply(this,arguments)}function useUserCollections(_ref2){var query=_ref2.query,token=function usePanoptesAuthToken(){var _useState=(0,react.useState)(defaultToken),token=_useState[0],setToken=_useState[1];function _fetchPanoptesAuthToken(){return(_fetchPanoptesAuthToken=_asyncToGenerator(regenerator_default().mark((function _callee2(){var newToken;return regenerator_default().wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=1,auth_default().checkCurrent();case 1:return _context2.next=2,auth_default().checkBearerToken();case 2:(newToken=_context2.sent)!==token&&setToken(newToken);case 3:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}return function fetchPanoptesAuthToken(){_fetchPanoptesAuthToken.apply(this,arguments)}(),token}(),key=token&&query?{query,token}:null;return(0,index.Ay)(key,fetchUserCollections,SWRoptions)}function addSubjectsToCollection_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function addSubjectsToCollection(_x){return _addSubjectsToCollection.apply(this,arguments)}function _addSubjectsToCollection(){return _addSubjectsToCollection=function addSubjectsToCollection_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){addSubjectsToCollection_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){addSubjectsToCollection_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(regenerator_default().mark((function _callee(_ref){var _response$body,collectionId,subjectIds,token,authorization,params,response,_ref2,_ref3,collection;return regenerator_default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return collectionId=_ref.collectionId,subjectIds=_ref.subjectIds,_context.next=1,auth_default().checkBearerToken();case 1:return token=_context.sent,authorization="Bearer ".concat(token),params={authorization,id:collectionId,subjects:subjectIds},_context.next=2,src.collections.addSubjects(params);case 2:return response=_context.sent,_ref2=null==response||null===(_response$body=response.body)||void 0===_response$body?void 0:_response$body.collections,_ref3=(0,slicedToArray.A)(_ref2,1),collection=_ref3[0],_context.abrupt("return",collection);case 3:case"end":return _context.stop()}}),_callee)}))),_addSubjectsToCollection.apply(this,arguments)}function createCollection_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function createCollection(_x){return _createCollection.apply(this,arguments)}function _createCollection(){return _createCollection=function createCollection_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){createCollection_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){createCollection_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(regenerator_default().mark((function _callee(_ref){var options,projectId,subjectIds,token,authorization,response,_response$body$collec,newCollection;return regenerator_default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return options=_ref.options,projectId=_ref.projectId,subjectIds=_ref.subjectIds,_context.next=1,auth_default().checkBearerToken();case 1:return token=_context.sent,authorization="Bearer ".concat(token),_context.next=2,src.collections.create({authorization,data:options,project:projectId,subjects:subjectIds});case 2:return response=_context.sent,_response$body$collec=(0,slicedToArray.A)(response.body.collections,1),newCollection=_response$body$collec[0],_context.abrupt("return",newCollection);case 3:case"end":return _context.stop()}}),_callee)}))),_createCollection.apply(this,arguments)}function removeSubjectsFromCollection_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _removeSubjectsFromCollection(){return _removeSubjectsFromCollection=function removeSubjectsFromCollection_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){removeSubjectsFromCollection_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){removeSubjectsFromCollection_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(regenerator_default().mark((function _callee(_ref){var collectionId,subjectIds,token,authorization,params,response;return regenerator_default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return collectionId=_ref.collectionId,subjectIds=_ref.subjectIds,_context.next=1,auth_default().checkBearerToken();case 1:return token=_context.sent,authorization="Bearer ".concat(token),params={authorization,id:collectionId,subjects:subjectIds},_context.next=2,src.collections.removeSubjects(params);case 2:if(204!==(null==(response=_context.sent)?void 0:response.status)){_context.next=3;break}return _context.abrupt("return",{id:collectionId});case 3:throw new Error("Unexpected response from removeSubjects");case 4:case"end":return _context.stop()}}),_callee)}))),_removeSubjectsFromCollection.apply(this,arguments)}var Favorite=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Favorite.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),i18n=__webpack_require__("../lib-react-components/dist/esm/translations/i18n.js"),IconActionButton=__webpack_require__("../lib-react-components/dist/esm/IconActionButton/IconActionButton.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledFavorite=(0,styled_components_browser_esm.default)(Favorite.N).withConfig({displayName:"FavoritesIconButton__StyledFavorite",componentId:"sc-170r1qe-0"})(['path[fill="none"]{fill:',";}"],(function(props){return props.$isFavorite?props.theme.global.colors.statusColors.error:"none"})),DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function FavoritesIconButton(_ref){var _ref$checked=_ref.checked,checked=void 0!==_ref$checked&&_ref$checked,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$onClick=_ref.onClick,onClick=void 0===_ref$onClick?DEFAULT_HANDLER:_ref$onClick,t=(0,i18n.B)().t,label=checked?"FavouritesButton.remove":"FavouritesButton.add";return(0,jsx_runtime.jsx)(IconActionButton.A,{a11yTitle:t(label),"aria-checked":checked,disabled,icon:(0,jsx_runtime.jsx)(StyledFavorite,{$isFavorite:checked}),role:"checkbox",onClick:function toggleFavorite(){onClick()}})}FavoritesIconButton.propTypes={checked:prop_types.bool,disabled:prop_types.bool,onClick:prop_types.func};const FavoritesIconButton_FavoritesIconButton=FavoritesIconButton;var console=__webpack_require__("../../node_modules/console-browserify/index.js"),_excluded=["login","projectId","projectSlug","subjectId"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FavoritesIconButtonContainer(_ref){var _favorites$0$links$su,_favorites$,login=_ref.login,projectId=_ref.projectId,projectSlug=_ref.projectSlug,subjectId=_ref.subjectId,props=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),_useUserCollections=useUserCollections({query:login&&{favorite:!0,project_ids:[projectId],owner:login}}),favorites=_useUserCollections.data,error=_useUserCollections.error,isLoading=_useUserCollections.isLoading,mutate=_useUserCollections.mutate,isFavorite=null!==(_favorites$0$links$su=null==favorites||null===(_favorites$=favorites[0])||void 0===_favorites$||null===(_favorites$=_favorites$.links)||void 0===_favorites$||null===(_favorites$=_favorites$.subjects)||void 0===_favorites$?void 0:_favorites$.includes(subjectId))&&void 0!==_favorites$0$links$su&&_favorites$0$links$su;function handleRemoveFromFavorites(){mutate((function(prevData){var indexToRemove=prevData[0].links.subjects.indexOf(subjectId),newSubjects=prevData[0].links.subjects.slice();return indexToRemove>-1&&newSubjects.splice(indexToRemove,1),[_objectSpread(_objectSpread({},prevData[0]),{},{links:_objectSpread(_objectSpread({},prevData[0].links),{},{subjects:newSubjects})})]}),{revalidate:!1});try{!function removeSubjectsFromCollection(_x){return _removeSubjectsFromCollection.apply(this,arguments)}({collectionId:favorites[0].id,subjectIds:[subjectId]})}catch(error){console.error(error)}}return(0,jsx_runtime.jsx)(FavoritesIconButton_FavoritesIconButton,_objectSpread({checked:isFavorite,disabled:isLoading||!!error,onClick:function handleClick(){isFavorite?handleRemoveFromFavorites():function handleAddToFavorites(){mutate((function(prevData){return prevData&&0!==prevData.length?[_objectSpread(_objectSpread({},prevData[0]),{},{links:_objectSpread(_objectSpread({},prevData[0].links),{},{subjects:[].concat((0,toConsumableArray.A)(prevData[0].links.subjects),[subjectId])})})]:[{links:{subjects:[subjectId]}}]}),{revalidate:!1});try{var _favorites$2;null!=favorites&&null!==(_favorites$2=favorites[0])&&void 0!==_favorites$2&&_favorites$2.id?addSubjectsToCollection({collectionId:favorites[0].id,subjectIds:[subjectId]}):createCollection({options:{display_name:"Favorites ".concat(projectSlug),favorite:!0,private:!0},projectId,subjectIds:[subjectId]})}catch(error){console.error(error)}}()}},props))}FavoritesIconButtonContainer.propTypes={login:prop_types.string,projectId:prop_types.string,projectSlug:prop_types.string,subjectId:prop_types.string.isRequired};const FavoritesIconButton_FavoritesIconButtonContainer=FavoritesIconButtonContainer;var Bookmark=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Bookmark.js"),Modal=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js");function CollectionsModal(_ref){var _ref$active=_ref.active,active=void 0!==_ref$active&&_ref$active,children=_ref.children,closeFn=_ref.closeFn,t=(0,i18n.B)().t;return(0,jsx_runtime.jsx)(Modal.A,{active,closeFn,title:t("CollectionsModal.title"),children})}CollectionsModal.propTypes={active:prop_types.bool,closeFn:prop_types.func.isRequired};const CollectionsModal_CollectionsModal=CollectionsModal;var Grid=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),FormField=__webpack_require__("../../node_modules/grommet/es6/components/FormField/FormField.js"),Select=__webpack_require__("../../node_modules/grommet/es6/components/Select/Select.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js");function SelectCollection_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function SelectCollection(_ref){var _ref$collections=_ref.collections,collections=void 0===_ref$collections?[]:_ref$collections,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,onSearch=_ref.onSearch,onSelect=_ref.onSelect,onSubmit=_ref.onSubmit,_ref$selected=_ref.selected,selected=void 0===_ref$selected?{}:_ref$selected,_ref$userId=_ref.userId,userId=void 0===_ref$userId?"":_ref$userId,_useState=(0,react.useState)(""),searchText=_useState[0],setSearchText=_useState[1],t=(0,i18n.B)().t;function _onTextChange(){return _onTextChange=function SelectCollection_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){SelectCollection_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){SelectCollection_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}(regenerator_default().mark((function _callee(text){var search;return regenerator_default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return search=text.trim(),_context.next=1,onSearch({favorite:!1,current_user_roles:"owner,collaborator,contributor",search:search.length>3?search:void 0});case 1:setSearchText(search);case 2:case"end":return _context.stop()}}),_callee)}))),_onTextChange.apply(this,arguments)}var options=searchText.length>3?collections:collections.filter((function collectionNameFilter(collection){var _collection$display_n,displayNameLowerCase=null==collection||null===(_collection$display_n=collection.display_name)||void 0===_collection$display_n?void 0:_collection$display_n.toLowerCase();return!!displayNameLowerCase&&displayNameLowerCase.includes(searchText.toLowerCase())}));return(0,jsx_runtime.jsxs)(Grid.x,{as:"form",columns:["2fr","1fr"],gap:"small",rows:["1fr"],method:"post",action:"",onSubmit,children:[(0,jsx_runtime.jsx)(FormField.z,{htmlFor:"collectionsSearch",label:t("CollectionsModal.SelectCollection.label"),children:(0,jsx_runtime.jsx)(Select.l,{dropHeight:"medium",dropProps:{trapFocus:!1},id:"collectionsSearch",labelKey:function collectionLabel(collection){var _collection$links,_collection$links2;return(null==collection||null===(_collection$links=collection.links)||void 0===_collection$links||null===(_collection$links=_collection$links.owner)||void 0===_collection$links?void 0:_collection$links.id)===userId?null==collection?void 0:collection.display_name:"".concat(null==collection?void 0:collection.display_name," (").concat(null==collection||null===(_collection$links2=collection.links)||void 0===_collection$links2||null===(_collection$links2=_collection$links2.owner)||void 0===_collection$links2?void 0:_collection$links2.display_name,")")},name:"display_name",onChange:onSelect,onSearch:function onTextChange(_x){return _onTextChange.apply(this,arguments)},options,valueKey:"id",value:selected})}),(0,jsx_runtime.jsx)(Box.a,{align:"center",margin:{top:"medium"},pad:{top:"small"},children:(0,jsx_runtime.jsx)(Button.$,{disabled,label:t("CollectionsModal.SelectCollection.addButton"),type:"submit"})})]})}SelectCollection.propTypes={disabled:prop_types.bool,selected:(0,prop_types.shape)({id:prop_types.string})};const SelectCollection_SelectCollection=(0,mobxreact_esm.PA)(SelectCollection);var TextInput=__webpack_require__("../../node_modules/grommet/es6/components/TextInput/TextInput.js"),CheckBox=__webpack_require__("../../node_modules/grommet/es6/components/CheckBox/CheckBox.js"),defaultCollection={display_name:"",private:!1},CreateCollection_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function CreateCollection(_ref){var _ref$collection=_ref.collection,collection=void 0===_ref$collection?defaultCollection:_ref$collection,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$onChange=_ref.onChange,onChange=void 0===_ref$onChange?CreateCollection_DEFAULT_HANDLER:_ref$onChange,_ref$onSubmit=_ref.onSubmit,onSubmit=void 0===_ref$onSubmit?CreateCollection_DEFAULT_HANDLER:_ref$onSubmit,t=(0,i18n.B)().t,checkboxRef=(0,react.useRef)(),textInputRef=(0,react.useRef)(),display_name=collection.display_name,isPrivate=collection.private;function updateCollection(){var display_name=textInputRef.current.value,isPrivate=checkboxRef.current.checked;onChange({display_name,private:isPrivate})}return(0,jsx_runtime.jsxs)(Grid.x,{as:"form",columns:["2fr","1fr"],gap:"small",rows:["1fr"],method:"post",action:"",onSubmit,children:[(0,jsx_runtime.jsx)(FormField.z,{htmlFor:"collectionName",label:t("CollectionsModal.CreateCollection.label"),children:(0,jsx_runtime.jsx)(TextInput.k,{id:"collectionName",onChange:updateCollection,ref:textInputRef,value:display_name})}),(0,jsx_runtime.jsx)(Box.a,{align:"center",margin:{top:"medium"},pad:{top:"small"},children:(0,jsx_runtime.jsx)(Button.$,{disabled,label:t("CollectionsModal.CreateCollection.createButton"),type:"submit"})}),(0,jsx_runtime.jsx)(CheckBox.o,{checked:isPrivate,label:t("CollectionsModal.CreateCollection.private"),onChange:updateCollection,ref:checkboxRef})]})}CreateCollection.propTypes={collection:(0,prop_types.shape)({display_name:prop_types.string,private:prop_types.bool}),disabled:prop_types.bool,onChange:prop_types.func,onSubmit:prop_types.func};const CreateCollection_CreateCollection=CreateCollection;function CollectionsModalContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function CollectionsModalContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?CollectionsModalContainer_ownKeys(Object(t),!0).forEach((function(r){CollectionsModalContainer_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CollectionsModalContainer_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function CollectionsModalContainer_defineProperty(e,r,t){return(r=function CollectionsModalContainer_toPropertyKey(t){var i=function CollectionsModalContainer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var CollectionsModalContainer_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0},DEFAULT_COLLECTION_QUERY={favorite:!1,current_user_roles:"owner,collaborator,contributor"},defaultNewCollection={display_name:"",private:!1},CollectionsModalContainer=function CollectionsModalContainer(_ref){var _ref$collectionsModal=_ref.collectionsModalActive,collectionsModalActive=void 0!==_ref$collectionsModal&&_ref$collectionsModal,_ref$projectId=_ref.projectId,projectId=void 0===_ref$projectId?"":_ref$projectId,_ref$setCollectionsMo=_ref.setCollectionsModalActive,setCollectionsModalActive=void 0===_ref$setCollectionsMo?CollectionsModalContainer_DEFAULT_HANDLER:_ref$setCollectionsMo,_ref$subjectId=_ref.subjectId,subjectId=void 0===_ref$subjectId?"":_ref$subjectId,_ref$userId=_ref.userId,userId=void 0===_ref$userId?"":_ref$userId,_useState=(0,react.useState)(DEFAULT_COLLECTION_QUERY),collectionsQuery=_useState[0],setCollectionsQuery=_useState[1],_useState2=(0,react.useState)(defaultNewCollection),newCollection=_useState2[0],setNewCollection=_useState2[1],_useState3=(0,react.useState)(void 0),selectedCollection=_useState3[0],setSelectedCollection=_useState3[1],_useUserCollections=useUserCollections({query:collectionsModalActive&&collectionsQuery}),collections=_useUserCollections.data;_useUserCollections.error,_useUserCollections.isLoading;function searchCollections(query){setCollectionsQuery(query)}function close(){setCollectionsModalActive(!1)}return(0,jsx_runtime.jsxs)(CollectionsModal_CollectionsModal,{active:collectionsModalActive,closeFn:close,children:[(0,jsx_runtime.jsx)(SelectCollection_SelectCollection,{collections,disabled:!selectedCollection,onSearch:searchCollections,onSelect:function onSelect(event){var collection=event.value;setSelectedCollection(collection)},onSubmit:function addToCollection(event){event.preventDefault(),addSubjectsToCollection({collectionId:selectedCollection.id,subjectIds:[subjectId]}),close()},selected:selectedCollection,userId}),(0,jsx_runtime.jsx)(CreateCollection_CreateCollection,{disabled:!newCollection.display_name,collection:newCollection,onChange:function updateCollection(collectionDetails){var updatedCollection=CollectionsModalContainer_objectSpread(CollectionsModalContainer_objectSpread({},newCollection),collectionDetails);setNewCollection(updatedCollection)},onSearch:searchCollections,onSubmit:function createNewCollection(event){event.preventDefault(),createCollection({options:newCollection,projectId,subjectIds:[subjectId]}),close()}})]})};const CollectionsModal_CollectionsModalContainer=CollectionsModalContainer;CollectionsModalContainer.propTypes={collectionsModalActive:prop_types.bool,projectId:prop_types.string,setCollectionsModalActive:prop_types.func,subjectId:prop_types.string,userId:prop_types.string};var CollectIconButton_excluded=["projectId","subjectId","userId"];function CollectIconButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function CollectIconButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?CollectIconButton_ownKeys(Object(t),!0).forEach((function(r){CollectIconButton_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CollectIconButton_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function CollectIconButton_defineProperty(e,r,t){return(r=function CollectIconButton_toPropertyKey(t){var i=function CollectIconButton_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function CollectIconButton(_ref){var projectId=_ref.projectId,subjectId=_ref.subjectId,userId=_ref.userId,props=function CollectIconButton_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function CollectIconButton_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,CollectIconButton_excluded),_useState=(0,react.useState)(!1),collectionsModalActive=_useState[0],setCollectionsModalActive=_useState[1],t=(0,i18n.B)().t;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(CollectionsModal_CollectionsModalContainer,{collectionsModalActive,projectId,setCollectionsModalActive,subjectId,userId}),(0,jsx_runtime.jsx)(IconActionButton.A,CollectIconButton_objectSpread({a11yTitle:t("CollectIconButton.collect"),icon:(0,jsx_runtime.jsx)(Bookmark.X,{}),onClick:function handleCollectionsModal(){setCollectionsModalActive(!collectionsModalActive)}},props))]})}CollectIconButton.propTypes={projectId:prop_types.string,subjectId:prop_types.string.isRequired,userId:prop_types.string};const CollectIconButton_CollectIconButton=CollectIconButton;var Notification=__webpack_require__("../../node_modules/grommet/es6/components/Notification/Notification.js"),ShareOption=__webpack_require__("../../node_modules/grommet-icons/es6/icons/ShareOption.js"),ShareIconButton_console=__webpack_require__("../../node_modules/console-browserify/index.js");function ShareIconButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ShareIconButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ShareIconButton_ownKeys(Object(t),!0).forEach((function(r){ShareIconButton_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ShareIconButton_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ShareIconButton_defineProperty(e,r,t){return(r=function ShareIconButton_toPropertyKey(t){var i=function ShareIconButton_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ShareIconButton_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function ShareIconButton_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var a=n.apply(t,e);function _next(n){ShareIconButton_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){ShareIconButton_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)}))}}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}const ShareIconButton_ShareIconButton=function ShareIconButton(_ref){var props=_extends({},(function _objectDestructuringEmpty(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(_ref),_ref)),_useState=(0,react.useState)(!1),visible=_useState[0],setVisible=_useState[1],t=(0,i18n.B)().t;function writeClipboardText(){return _writeClipboardText.apply(this,arguments)}function _writeClipboardText(){return(_writeClipboardText=ShareIconButton_asyncToGenerator(regenerator_default().mark((function _callee(){var url,_t;return regenerator_default().wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return url=window.location.href,_context.prev=1,_context.next=2,navigator.clipboard.writeText(url);case 2:_context.next=4;break;case 3:_context.prev=3,_t=_context.catch(1),ShareIconButton_console.error(_t.message);case 4:case"end":return _context.stop()}}),_callee,null,[[1,3]])})))).apply(this,arguments)}function _onOpen(){return(_onOpen=ShareIconButton_asyncToGenerator(regenerator_default().mark((function _callee2(){return regenerator_default().wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.next=1,writeClipboardText();case 1:setVisible(!0);case 2:case"end":return _context2.stop()}}),_callee2)})))).apply(this,arguments)}return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(IconActionButton.A,ShareIconButton_objectSpread({a11yTitle:t("ShareIconButton.share"),icon:(0,jsx_runtime.jsx)(ShareOption.D,{}),onClick:function onOpen(){return _onOpen.apply(this,arguments)}},props)),visible&&(0,jsx_runtime.jsx)(Notification.E,{message:t("ShareIconButton.copied"),onClose:function onClose(){setVisible(!1)},time:4e3,toast:!0})]})};var Blank=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js");function InvertIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function InvertIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?InvertIcon_ownKeys(Object(t),!0).forEach((function(r){InvertIcon_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):InvertIcon_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function InvertIcon_defineProperty(e,r,t){return(r=function InvertIcon_toPropertyKey(t){var i=function InvertIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledBlank=(0,styled_components_browser_esm.default)(Blank.h).withConfig({displayName:"InvertIcon__StyledBlank",componentId:"sc-17okt0g-0"})(["circle{fill:",";}path{fill:",";}"],(function(props){return props.theme.dark?props.theme.global.colors["neutral-6"]:props.theme.global.colors["dark-5"]}),(function(props){return props.theme.dark?props.theme.global.colors["dark-5"]:props.theme.global.colors["neutral-6"]}));function InvertIcon(props){return(0,jsx_runtime.jsxs)(StyledBlank,InvertIcon_objectSpread(InvertIcon_objectSpread({className:"invert-icon",viewBox:"0 0 32 32"},props),{},{children:[(0,jsx_runtime.jsx)("circle",{cx:"16",cy:"16",r:"15",strokeWidth:1.5}),(0,jsx_runtime.jsx)("path",{d:"M16,1.5c6.6,0,14.5,5.4,14.5,14.5s-5.4,14.5-14.5,14.5"})]}))}var InvertIconButton_excluded=["checked"];function InvertIconButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function InvertIconButton_defineProperty(e,r,t){return(r=function InvertIconButton_toPropertyKey(t){var i=function InvertIconButton_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function InvertIconButton(_ref){var _ref$checked=_ref.checked,checked=void 0!==_ref$checked&&_ref$checked,props=function InvertIconButton_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function InvertIconButton_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,InvertIconButton_excluded),t=(0,i18n.B)().t,label=checked?"InvertIconButton.reset":"InvertIconButton.invert";return(0,jsx_runtime.jsx)(IconActionButton.A,function InvertIconButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?InvertIconButton_ownKeys(Object(t),!0).forEach((function(r){InvertIconButton_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):InvertIconButton_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({a11yTitle:t(label),active:checked,"aria-checked":checked,icon:(0,jsx_runtime.jsx)(InvertIcon,{}),role:"checkbox"},props))}InvertIconButton.propTypes={checked:prop_types.bool};const InvertIconButton_InvertIconButton=InvertIconButton;var Image=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Image.js"),ImageIconButton_excluded=["disabled","href"];function ImageIconButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function ImageIconButton_defineProperty(e,r,t){return(r=function ImageIconButton_toPropertyKey(t){var i=function ImageIconButton_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ImageIconButton(_ref){var _ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,_ref$href=_ref.href,href=void 0===_ref$href?"":_ref$href,props=function ImageIconButton_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function ImageIconButton_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,ImageIconButton_excluded),t=(0,i18n.B)().t;return(0,jsx_runtime.jsx)(IconActionButton.A,function ImageIconButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ImageIconButton_ownKeys(Object(t),!0).forEach((function(r){ImageIconButton_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ImageIconButton_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({a11yTitle:t("ImageIconButton.viewImage"),disabled,href:disabled?void 0:href,icon:(0,jsx_runtime.jsx)(Image._,{}),target:disabled?void 0:"_blank"},props))}ImageIconButton.propTypes={disabled:prop_types.bool,href:prop_types.string};const ImageIconButton_ImageIconButton=ImageIconButton;var MetaTools_excluded=["invert","location","login","onInvert","projectId","projectSlug","subjectId","userId"];function MetaTools_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function MetaTools_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?MetaTools_ownKeys(Object(t),!0).forEach((function(r){MetaTools_defineProperty(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):MetaTools_ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function MetaTools_defineProperty(e,r,t){return(r=function MetaTools_toPropertyKey(t){var i=function MetaTools_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var DEFAULT_LOCATION={};function MetaTools(_ref){var _ref$invert=_ref.invert,invert=void 0!==_ref$invert&&_ref$invert,_ref$location=_ref.location,location=void 0===_ref$location?DEFAULT_LOCATION:_ref$location,login=_ref.login,_ref$onInvert=_ref.onInvert,onInvert=void 0===_ref$onInvert?null:_ref$onInvert,projectId=_ref.projectId,projectSlug=_ref.projectSlug,subjectId=_ref.subjectId,userId=_ref.userId,rest=function MetaTools_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function MetaTools_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,MetaTools_excluded),_Object$entries$=(0,slicedToArray.A)(Object.entries(location)[0],2),mimeType=_Object$entries$[0],subjectURL=_Object$entries$[1],isImage=null==mimeType?void 0:mimeType.includes("image");return(0,jsx_runtime.jsxs)(Box.a,MetaTools_objectSpread(MetaTools_objectSpread({align:"center",direction:"row",flex:!1,gap:"xsmall",justify:"center",pad:"xsmall"},rest),{},{children:[(0,jsx_runtime.jsx)(FavoritesIconButton_FavoritesIconButtonContainer,{disabled:!login,login,projectId,projectSlug,subjectId}),(0,jsx_runtime.jsx)(CollectIconButton_CollectIconButton,{disabled:!login,projectId,subjectId,userId}),(0,jsx_runtime.jsx)(ShareIconButton_ShareIconButton,{}),onInvert?(0,jsx_runtime.jsx)(InvertIconButton_InvertIconButton,{checked:invert,onClick:onInvert}):null,isImage?(0,jsx_runtime.jsx)(ImageIconButton_ImageIconButton,{href:subjectURL}):null]}))}MetaTools.propTypes={invert:prop_types.bool,location:(0,prop_types.objectOf)(prop_types.string),login:prop_types.string,onInvert:prop_types.func,projectId:prop_types.string,projectSlug:prop_types.string,subjectId:prop_types.string,userId:prop_types.string};const MetaTools_MetaTools=MetaTools;var _templateObject,dynamic=__webpack_require__("../../node_modules/next/dynamic.js"),dynamic_default=__webpack_require__.n(dynamic),es=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"),__jsx=react.createElement,FlipbookControls=dynamic_default()((function(){return Promise.all([__webpack_require__.e(1048),__webpack_require__.e(9061),__webpack_require__.e(656),__webpack_require__.e(4769),__webpack_require__.e(3917),__webpack_require__.e(4815),__webpack_require__.e(1418),__webpack_require__.e(7175),__webpack_require__.e(5960)]).then(__webpack_require__.bind(__webpack_require__,"../lib-classifier/dist/esm/components/Classifier/index.js")).then((function(mod){return mod.FlipbookControls}))}),{ssr:!1,loadableGenerated:{webpack:function webpack(){return["../lib-classifier/dist/esm/components/Classifier/index.js"]}}}),StyledMedia=(0,styled_components_browser_esm.default)(Media.A)(_templateObject||(_templateObject=(0,taggedTemplateLiteral.A)(["\n  filter: ",";\n"])),(function(props){return props.$invert?"invert(1)":"none"}));function SubjectTalkViewer(_ref){var _processedLocations$f,_subject$locations,_subject$locations2,login=_ref.login,projectId=_ref.projectId,projectSlug=_ref.projectSlug,subject=_ref.subject,userId=_ref.userId,_useState=(0,react.useState)(0),frame=_useState[0],setFrame=_useState[1],_useState2=(0,react.useState)(1),flipbookSpeed=_useState2[0],setFlipbookSpeed=_useState2[1],_useState3=(0,react.useState)(!1),invert=_useState3[0],setInvert=_useState3[1],_useState4=(0,react.useState)(!1),playing=_useState4[0],setPlaying=_useState4[1],t=(0,es.Bd)("screens").t,subjectId=null==subject?void 0:subject.id,processedLocations=function processSubjectLocations(rawLocations){return rawLocations.map((function(location){var _Object$entries$=(0,slicedToArray.A)(Object.entries(location)[0],2),mimeType=_Object$entries$[0],url=_Object$entries$[1],_mimeType$split=mimeType.split("/");return{mimeType,type:(0,slicedToArray.A)(_mimeType$split,1)[0],url}}))}(null==subject?void 0:subject.locations);return __jsx(Box.a,{background:{dark:"dark-3",light:"neutral-6"},border:{color:"light-5",side:"all",size:"0.5px"},round:{size:"8px",corner:"bottom"}},__jsx(StyledMedia,{alt:t("Home.ZooniverseTalk.RecentSubjects.subjectLabel",{id:subjectId}),fit:"contain",flex:"shrink",$invert:invert,subject,src:null==processedLocations||null===(_processedLocations$f=processedLocations[frame])||void 0===_processedLocations$f?void 0:_processedLocations$f.url}),__jsx(Box.a,{flex:!1},(null==subject||null===(_subject$locations=subject.locations)||void 0===_subject$locations?void 0:_subject$locations.length)>1?__jsx(FlipbookControls,{currentFrame:frame,flipbookSpeed,locations:processedLocations,onFrameChange:setFrame,onPlayPause:function onPlayPause(){setPlaying(!playing)},playing,playIterations:1,setFlipbookSpeed}):null,__jsx(MetaTools_MetaTools,{invert,location:null==subject||null===(_subject$locations2=subject.locations)||void 0===_subject$locations2?void 0:_subject$locations2[frame],login,onInvert:function onInvert(){setInvert(!invert)},projectId,projectSlug,subjectId,userId})))}SubjectTalkViewer.displayName="SubjectTalkViewer",SubjectTalkViewer.propTypes={login:prop_types.string,projectId:prop_types.string,projectSlug:prop_types.string,subject:(0,prop_types.shape)({id:prop_types.string}),userId:prop_types.string};const SubjectTalkViewer_SubjectTalkViewer=SubjectTalkViewer;SubjectTalkViewer.__docgenInfo={description:"",methods:[],displayName:"SubjectTalkViewer",props:{login:{description:"",type:{name:"custom",raw:"string"},required:!1},projectId:{description:"",type:{name:"custom",raw:"string"},required:!1},projectSlug:{description:"",type:{name:"custom",raw:"string"},required:!1},subject:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1}}},required:!1},userId:{description:"",type:{name:"custom",raw:"string"},required:!1}}};var SingleImageSubjectMock={id:"1234",locations:[{"image/jpeg":"https://panoptes-uploads-staging.zooniverse.org/subject_location/89cdf135-3349-4149-8255-57bc7875323f.png"}]};const SubjectTalkViewer_stories={title:"Project App / Screens / Subject Talk / SubjectTalkViewer",component:SubjectTalkViewer_SubjectTalkViewer};var SingleImageSubject={args:{login:"zootester1",subject:SingleImageSubjectMock}},MultiImageSubject={args:{login:"zootester1",subject:{id:"5678",locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/3eecf251-7205-4ef3-b13f-e930c97d92de.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/11f98201-1c3f-44d5-965b-e00373daeb18.jpeg"},{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/512649e3-33d7-4811-b0f2-64703e687160.jpeg"}]}}},VideoSubject={args:{login:"zootester1",subject:{id:"91011",locations:[{"video/mp4":"https://panoptes-uploads.zooniverse.org/subject_location/5338cc13-764a-4b04-88b4-cab728cb7898.mp4"}]}}},LoggedOut={args:{subject:SingleImageSubjectMock}};SingleImageSubject.parameters={...SingleImageSubject.parameters,docs:{...SingleImageSubject.parameters?.docs,source:{originalSource:"{\n  args: {\n    login: 'zootester1',\n    subject: SingleImageSubjectMock\n  }\n}",...SingleImageSubject.parameters?.docs?.source}}},MultiImageSubject.parameters={...MultiImageSubject.parameters,docs:{...MultiImageSubject.parameters?.docs,source:{originalSource:"{\n  args: {\n    login: 'zootester1',\n    subject: MultiImageSubjectMock\n  }\n}",...MultiImageSubject.parameters?.docs?.source}}},VideoSubject.parameters={...VideoSubject.parameters,docs:{...VideoSubject.parameters?.docs,source:{originalSource:"{\n  args: {\n    login: 'zootester1',\n    subject: VideoSubjectMock\n  }\n}",...VideoSubject.parameters?.docs?.source}}},LoggedOut.parameters={...LoggedOut.parameters,docs:{...LoggedOut.parameters?.docs,source:{originalSource:"{\n  args: {\n    subject: SingleImageSubjectMock\n  }\n}",...LoggedOut.parameters?.docs?.source}}};const __namedExportsOrder=["SingleImageSubject","MultiImageSubject","VideoSubject","LoggedOut"]}}]);