/*! For license information please see 8609.8d46600b.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_zooniverse_fe_project=self.webpackChunk_zooniverse_fe_project||[]).push([[8609],{"../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js"(__unused_webpack_module,exports,__webpack_require__){var React=__webpack_require__("../../node_modules/react/index.js");var objectIs="function"==typeof Object.is?Object.is:function is(x,y){return x===y&&(0!==x||1/x==1/y)||x!=x&&y!=y},useState=React.useState,useEffect=React.useEffect,useLayoutEffect=React.useLayoutEffect,useDebugValue=React.useDebugValue;function checkIfSnapshotChanged(inst){var latestGetSnapshot=inst.getSnapshot;inst=inst.value;try{var nextValue=latestGetSnapshot();return!objectIs(inst,nextValue)}catch(error){return!0}}var shim="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function useSyncExternalStore$1(subscribe,getSnapshot){return getSnapshot()}:function useSyncExternalStore$2(subscribe,getSnapshot){var value=getSnapshot(),_useState=useState({inst:{value,getSnapshot}}),inst=_useState[0].inst,forceUpdate=_useState[1];return useLayoutEffect(function(){inst.value=value,inst.getSnapshot=getSnapshot,checkIfSnapshotChanged(inst)&&forceUpdate({inst})},[subscribe,value,getSnapshot]),useEffect(function(){return checkIfSnapshotChanged(inst)&&forceUpdate({inst}),subscribe(function(){checkIfSnapshotChanged(inst)&&forceUpdate({inst})})},[subscribe]),useDebugValue(value),value};exports.useSyncExternalStore=void 0!==React.useSyncExternalStore?React.useSyncExternalStore:shim},"../../node_modules/use-sync-external-store/shim/index.js"(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__("../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js")},"./src/helpers/fetchDiscussions/index.js"(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){__webpack_require__("../lib-panoptes-js/src/index.js"),__webpack_require__("../../node_modules/panoptes-client/lib/auth.js"),__webpack_require__("../../node_modules/console-browserify/index.js")},"./src/helpers/fetchUsers/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{A:()=>fetchUsers});var src=__webpack_require__("../lib-panoptes-js/src/index.js"),console=__webpack_require__("../../node_modules/console-browserify/index.js");async function fetchUsers(query){let usersAccumulator=[];return await async function getUsers(page=1){try{var _meta_users;const response=await src.bB.get("/users",{page,...query}),{meta,users}=(null==response?void 0:response.body)||{};return users&&users.length&&(usersAccumulator=usersAccumulator.concat(users)),(null==meta||null===(_meta_users=meta.users)||void 0===_meta_users?void 0:_meta_users.next_page)?getUsers(meta.users.next_page):usersAccumulator}catch(error){throw console.error(error),error}}(1),usersAccumulator}},"./src/hooks/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{_9:()=>useComments,cR:()=>usePanoptesUsers,UR:()=>useSubjectMetadataPreference,lf:()=>useTalkRoles});var react=__webpack_require__("../../node_modules/react/index.js");window.localStorage;var src=__webpack_require__("../lib-panoptes-js/src/index.js"),lib_auth=__webpack_require__("../../node_modules/panoptes-client/lib/auth.js"),auth_default=__webpack_require__.n(lib_auth);let defaultToken;!async function getDefaultToken(){defaultToken=null,await auth_default().checkCurrent(),defaultToken=await auth_default().checkBearerToken()}();__webpack_require__("../../node_modules/console-browserify/index.js");var index=__webpack_require__("../../node_modules/swr/dist/index/index.mjs"),useComments_console=__webpack_require__("../../node_modules/console-browserify/index.js");const useComments_SWROptions={revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:0};async function fetchComments({query,token}){const authorization=token?`Bearer ${token}`:void 0;return src.Hv.get("/comments",query,{authorization}).then(response=>{var _response_body;return null==response||null===(_response_body=response.body)||void 0===_response_body?void 0:_response_body.comments}).catch(error=>{throw useComments_console.error(error),error})}function useComments(query){const token=function usePanoptesAuthToken_usePanoptesAuthToken(){const[token,setToken]=(0,react.useState)(defaultToken);return async function fetchPanoptesAuthToken(){await auth_default().checkCurrent();const newToken=await auth_default().checkBearerToken();newToken!==token&&setToken(newToken)}(),token}();let key=null;return query&&query.discussion_id&&(key={query,token}),(0,index.Ay)(key,fetchComments,useComments_SWROptions)}__webpack_require__("./src/helpers/fetchDiscussions/index.js");__webpack_require__("../../node_modules/console-browserify/index.js");__webpack_require__("../../node_modules/console-browserify/index.js");__webpack_require__("../../node_modules/console-browserify/index.js");var fetchUsers=__webpack_require__("./src/helpers/fetchUsers/index.js");const usePanoptesUsers_SWROptions={revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:0};function usePanoptesUsers(query){let key=null;return query&&query.id&&(key=query),(0,index.Ay)(key,fetchUsers.A,usePanoptesUsers_SWROptions)}const usePreferredTheme_localStorage=window.localStorage;let initialTheme="light";{const preferredTheme=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";initialTheme=(null==usePreferredTheme_localStorage?void 0:usePreferredTheme_localStorage.getItem("theme"))||preferredTheme}var useTalkRoles_console=__webpack_require__("../../node_modules/console-browserify/index.js");const useTalkRoles_SWROptions={revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!1,revalidateOnReconnect:!0,refreshInterval:0};async function fetchTalkRoles(query){return src.Hv.get("/roles",query).then(response=>{var _response_body;return null==response||null===(_response_body=response.body)||void 0===_response_body?void 0:_response_body.roles}).catch(error=>{throw useTalkRoles_console.error(error),error})}function useTalkRoles(query){let key=null;return query&&query.user_id&&(key=query),(0,index.Ay)(key,fetchTalkRoles,useTalkRoles_SWROptions)}function useSubjectMetadataPreference(){const[isExpanded,setIsExpanded]=(0,react.useState)(()=>{try{return"true"===window.localStorage.getItem("subjectMetadataExpanded")}catch(error){return!1}});return[isExpanded,function handleToggle(newExpandedState){try{window.localStorage.setItem("subjectMetadataExpanded",String(newExpandedState))}catch(error){}setIsExpanded(newExpandedState)}]}let sugarClient;!async function initSugarClient(){{const sugarModule=await Promise.all([__webpack_require__.e(7588),__webpack_require__.e(6857)]).then(__webpack_require__.t.bind(__webpack_require__,"../../node_modules/panoptes-client/lib/sugar.js",23));sugarClient=sugarModule.sugarClient}}();__webpack_require__("../../node_modules/console-browserify/index.js");__webpack_require__("../../node_modules/console-browserify/index.js");__webpack_require__("../../node_modules/console-browserify/index.js")}}]);