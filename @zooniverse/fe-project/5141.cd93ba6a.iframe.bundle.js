"use strict";(self.webpackChunk_zooniverse_fe_project=self.webpackChunk_zooniverse_fe_project||[]).push([[5141],{"../../node_modules/grommet-icons/icons/Copy.js":(__unused_webpack_module,exports,__webpack_require__)=>{exports.Q=void 0;var _react=function _interopRequireWildcard(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_getRequireWildcardCache(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var i=a?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(n,u,i):n[u]=e[u]}return n.default=e,t&&t.set(e,n),n}(__webpack_require__("../../node_modules/react/index.js")),_StyledIcon=__webpack_require__("../../node_modules/grommet-icons/StyledIcon.js");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(e){return e?t:r})(e)}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}(exports.Q=(0,_react.forwardRef)((function(props,ref){return _react.default.createElement(_StyledIcon.StyledIcon,_extends({ref,viewBox:"0 0 24 24",a11yTitle:"Copy"},props),_react.default.createElement("path",{fill:"none",stroke:"#000",strokeWidth:"2",d:"M9 15h8-8zm0-4h10H9zm0-4h4-4zm7-6v6h6M6 5H2v18h16v-4m4 0H6V1h11l5 5v13z"}))}))).displayName="Copy"},"../../node_modules/grommet/es6/components/Form/FormContext.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>FormContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/react/index.js"),FormContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({useFormField:function useFormField(_ref2){return{error:_ref2.error,info:_ref2.info,disabled:_ref2.disabled}},useFormInput:function useFormInput(_ref){var valueProp=_ref.value,initialValue=_ref.initialValue,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0!==valueProp?valueProp:initialValue),value=_useState[0],setValue=_useState[1];return[void 0!==valueProp?valueProp:value,function(nextValue){void 0!==initialValue&&setValue(nextValue)}]}})},"../../node_modules/grommet/es6/components/InfiniteScroll/InfiniteScroll.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>InfiniteScroll});var react=__webpack_require__("../../node_modules/react/index.js"),use_isomorphic_layout_effect=__webpack_require__("../../node_modules/grommet/es6/utils/use-isomorphic-layout-effect.js"),DOM=__webpack_require__("../../node_modules/grommet/es6/utils/DOM.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js");var InfiniteScrollPropTypes={};var calculateLastPageBound=function calculateLastPageBound(show,step){return show?Math.floor((show+step)/step)-1:0},InfiniteScroll=function InfiniteScroll(_ref){var children=_ref.children,_ref$items=_ref.items,items=void 0===_ref$items?[]:_ref$items,onMore=_ref.onMore,renderMarker=_ref.renderMarker,replace=_ref.replace,show=_ref.show,_ref$step=_ref.step,step=void 0===_ref$step?50:_ref$step,_useState=(0,react.useState)(),scrollShow=_useState[0],setScrollShow=_useState[1],lastPage=(0,react.useMemo)((function(){return Math.max(0,Math.ceil(items.length/step)-1)}),[items.length,step]),_useState2=(0,react.useState)([0,calculateLastPageBound(show,step)]),renderPageBounds=_useState2[0],setRenderPageBounds=_useState2[1],_useState3=(0,react.useState)([]),pageHeights=_useState3[0],setPageHeights=_useState3[1],_useState4=(0,react.useState)(0),pendingLength=_useState4[0],setPendingLength=_useState4[1],aboveMarkerRef=(0,react.useRef)(),belowMarkerRef=(0,react.useRef)();(0,react.useEffect)((function(){var scrollParents,timer,evaluate=function evaluate(){if(scrollParents){var top,height,scrollParent=scrollParents[0];if(scrollParent===document)top=document.documentElement.scrollTop||document.body.scrollTop,height=window.innerHeight;else top=scrollParent.scrollTop,height=scrollParent.getBoundingClientRect().height;for(var offset=height/4,nextBeginPage=0,index=0,pagesHeight=pageHeights[index]||0;pageHeights[index+1]&&pagesHeight<top-offset;)nextBeginPage+=1,pagesHeight+=pageHeights[index+=1];for(var nextEndPage=nextBeginPage;void 0!==pageHeights[index]&&pagesHeight<top+height+offset;)nextEndPage+=1,pagesHeight+=pageHeights[index+=1]||0;if(replace||(nextBeginPage=0,nextEndPage=Math.max(renderPageBounds[1],nextEndPage)),show){var showPage=calculateLastPageBound(show,step);nextBeginPage=Math.min(showPage,nextBeginPage),nextEndPage=Math.max(showPage,nextEndPage)}nextBeginPage===renderPageBounds[0]&&nextEndPage===renderPageBounds[1]||setRenderPageBounds([nextBeginPage,nextEndPage])}},debounce=function debounce(){clearTimeout(timer),timer=setTimeout(evaluate,10)};return belowMarkerRef.current&&(scrollParents=(0,DOM.EF)(belowMarkerRef.current)).forEach((function(sp){return sp.addEventListener("scroll",debounce)})),window.addEventListener("resize",debounce),evaluate(),function(){scrollParents&&scrollParents.forEach((function(sp){return sp.removeEventListener("scroll",debounce)})),window.removeEventListener("resize",debounce),clearTimeout(timer)}}),[pageHeights,renderPageBounds,replace,show,step]),(0,react.useEffect)((function(){onMore&&renderPageBounds[1]===lastPage&&items.length>=pendingLength&&items.length>0&&(setPendingLength(items.length+1),onMore())}),[items.length,lastPage,onMore,pendingLength,renderPageBounds,step]),(0,react.useEffect)((function(){0===items.length&&0===lastPage&&0!==pendingLength&&(setPageHeights([]),setPendingLength(0),setRenderPageBounds([0,calculateLastPageBound(show,step)]))}),[lastPage,pendingLength,show,step,items.length]),(0,use_isomorphic_layout_effect.N)((function(){var timer=setTimeout((function(){if(show&&belowMarkerRef.current&&show!==scrollShow){var showIndex=show-renderPageBounds[0]*step+(renderPageBounds[0]?1:0),showNode=belowMarkerRef.current.parentNode.children.item(showIndex);if(showNode){var scrollParent=(0,DOM.zC)(showNode);(0,DOM.Z7)(showNode,scrollParent)?showNode.scrollIntoView(!0):(0,DOM.oZ)(showNode,scrollParent)&&showNode.scrollIntoView(!1),setScrollShow(show)}}}),100);return function(){return clearTimeout(timer)}}),[renderPageBounds,show,step]),(0,use_isomorphic_layout_effect.N)((function(){if(belowMarkerRef.current){var rendered=belowMarkerRef.current.parentNode.children;if((aboveMarkerRef.current?1:0)+(renderPageBounds[1]-renderPageBounds[0]+1)*step+1===rendered.length){for(var nextPageHeights,lastBottom,i=renderPageBounds[0];i<=renderPageBounds[1];){var topIndex=(aboveMarkerRef.current?1:0)+(i-renderPageBounds[0])*step,bottomIndex=Math.min(topIndex+step-1,rendered.length-1),top=void 0!==lastBottom?lastBottom:rendered.item(topIndex).getBoundingClientRect().top,bottom=rendered.item(bottomIndex).getBoundingClientRect().bottom,height=bottom-top;!bottom||pageHeights&&pageHeights[i]===height||(nextPageHeights||(nextPageHeights=[].concat(pageHeights||[])),nextPageHeights[i]=height),lastBottom=bottom,i+=1}for(;replace&&i<=lastPage;){if(!pageHeights[i]&&pageHeights[i]!==pageHeights[0]){nextPageHeights||(nextPageHeights=[].concat(pageHeights||[]));var _nextPageHeights=nextPageHeights;nextPageHeights[i]=_nextPageHeights[0]}i+=1}nextPageHeights&&setPageHeights(nextPageHeights)}}}),[lastPage,pageHeights,renderPageBounds,replace,step]);var aboveHeight=(0,react.useMemo)((function(){if(!replace)return 0;for(var height=0,i=0;i<renderPageBounds[0];)height+=pageHeights[i]||0,i+=1;return height}),[pageHeights,renderPageBounds,replace]),belowHeight=(0,react.useMemo)((function(){if(!replace)return 0;for(var height=0,i=renderPageBounds[1]+1;i<=lastPage;)height+=pageHeights[i]||0,i+=1;return height}),[lastPage,pageHeights,renderPageBounds,replace]),firstIndex=renderPageBounds[0]*step,lastIndex=Math.min((renderPageBounds[1]+1)*step,items.length)-1,result=[];if(aboveHeight){var marker=react.createElement(Box.a,{key:"above",ref:aboveMarkerRef,flex:!1,height:aboveHeight+"px"});renderMarker&&(marker=react.cloneElement(renderMarker(marker),{key:"above"})),result.push(marker)}if(items.slice(firstIndex,lastIndex+1).forEach((function(item,index){var child=children(item,firstIndex+index);result.push(child)})),replace||renderPageBounds[1]<lastPage||onMore){var _marker=react.createElement(Box.a,{key:"below",ref:!renderMarker&&belowMarkerRef||void 0,flex:!1,height:(belowHeight||0)+"px"});if(renderMarker){var renderedMarker=renderMarker(_marker);_marker=react.cloneElement(renderedMarker,{key:"below",ref:function ref(node){belowMarkerRef.current=node;var ref=renderedMarker.ref;"function"==typeof ref?ref(node):null!==ref&&(ref.current=node)}})}result.push(_marker)}return result};InfiniteScroll.propTypes=InfiniteScrollPropTypes},"../../node_modules/grommet/es6/components/TextInput/TextInput.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>TextInput});var react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Drop=__webpack_require__("../../node_modules/grommet/es6/components/Drop/Drop.js"),InfiniteScroll=__webpack_require__("../../node_modules/grommet/es6/components/InfiniteScroll/InfiniteScroll.js"),Keyboard=__webpack_require__("../../node_modules/grommet/es6/components/Keyboard/Keyboard.js"),FormContext=__webpack_require__("../../node_modules/grommet/es6/components/Form/FormContext.js"),AnnounceContext=__webpack_require__("../../node_modules/grommet/es6/contexts/AnnounceContext/AnnounceContext.js"),styles=__webpack_require__("../../node_modules/grommet/es6/utils/styles.js"),refs=__webpack_require__("../../node_modules/grommet/es6/utils/refs.js"),DOM=__webpack_require__("../../node_modules/grommet/es6/utils/DOM.js"),utils_icon=__webpack_require__("../../node_modules/grommet/es6/utils/icon.js"),mixins=__webpack_require__("../../node_modules/grommet/es6/utils/mixins.js"),background=__webpack_require__("../../node_modules/grommet/es6/utils/background.js"),colors=__webpack_require__("../../node_modules/grommet/es6/utils/colors.js"),StyledTextInput=styled_components_browser_esm.default.input.withConfig(styles.OY).withConfig({displayName:"StyledTextInput",componentId:"sc-1x30a0s-0"})([""," "," "," "," "," "," "," "," ",";"],styles.C8,(function(props){return props.readOnlyCopy?"padding-"+(props.reverse?"left":"right")+": 0px;":""}),(function(props){return props.readOnly&&"border: none;"}),(function(props){return function getPlainStyle(plain){return"full"===plain?(0,styled_components_browser_esm.css)([""," padding:0;"],styles.w6):plain&&styles.w6}(props.plain)}),(function(props){return props.icon&&styles.a5}),(function(props){return props.disabled&&(0,styles.o2)(props.theme.textInput.disabled&&props.theme.textInput.disabled.opacity)}),(function(props){return props.textAlign&&styles.O8}),(function(props){return props.widthProp&&(0,styles.kj)(props.widthProp,props.theme)}),(function(props){return props.theme.textInput&&props.theme.textInput.extend})),StyledTextInputContainer=styled_components_browser_esm.default.div.withConfig(styles.OY).withConfig({displayName:"StyledTextInput__StyledTextInputContainer",componentId:"sc-1x30a0s-1"})(["position:relative;width:100%;",";",";"," ",";"],(function(props){return props.readOnlyProp&&!props.plain&&styles.F2}),(function(props){return props.readOnlyCopy&&"\n    box-sizing: border-box;\n    flex-direction: row;\n    display: flex;\n  "}),(function(props){return props.readOnlyProp&&!props.plain&&function readOnlyStyle(theme){var _theme$global$input$r,_theme$global$input$r2,_theme$global$input$r3,styles=[];return null!=theme&&null!=(_theme$global$input$r=theme.global.input.readOnly)&&null!=(_theme$global$input$r=_theme$global$input$r.border)&&_theme$global$input$r.color&&styles.push((0,styled_components_browser_esm.css)(["border-color:",";"],(0,colors.$2)(theme.global.input.readOnly.border.color,theme))),null!=theme&&null!=(_theme$global$input$r2=theme.global.input.readOnly)&&_theme$global$input$r2.background&&styles.push((0,background.mT)(null==(_theme$global$input$r3=theme.global.input.readOnly)?void 0:_theme$global$input$r3.background,theme)),styles}(props.theme)}),(function(props){return props.theme.textInput&&props.theme.textInput.container&&props.theme.textInput.container.extend})),StyledPlaceholder=styled_components_browser_esm.default.div.withConfig(styles.OY).withConfig({displayName:"StyledTextInput__StyledPlaceholder",componentId:"sc-1x30a0s-2"})(["position:absolute;left:","px;top:50%;transform:translateY(-50%);display:flex;justify-content:center;pointer-events:none;",";"],(function(props){return(0,mixins.HY)((0,styles.kf)(props,"left"))-(0,mixins.HY)(props.theme.global.control.border.width)}),(function(props){return props.theme.textInput&&props.theme.textInput.placeholder&&props.theme.textInput.placeholder.extend})),StyledIcon=styled_components_browser_esm.default.div.withConfig(styles.OY).withConfig({displayName:"StyledTextInput__StyledIcon",componentId:"sc-1x30a0s-3"})(["position:absolute;display:flex;justify:center;top:50%;transform:translateY(-50%);pointer-events:none;",""],(function(props){return props.reverse?"right: "+(0,styles.kf)(props,"right")+";":"left: "+(0,styles.kf)(props,"left")+";"})),StyledSuggestions=styled_components_browser_esm.default.ol.withConfig(styles.OY).withConfig({displayName:"StyledTextInput__StyledSuggestions",componentId:"sc-1x30a0s-4"})(["border-top-left-radius:0;border-top-right-radius:0;margin:0;padding:0;list-style-type:none;",";"],(function(props){return props.theme.textInput&&props.theme.textInput.suggestions&&props.theme.textInput.suggestions.extend})),MessageContext=__webpack_require__("../../node_modules/grommet/es6/contexts/MessageContext/MessageContext.js");var TextInputPropTypes={},Copy=__webpack_require__("../../node_modules/grommet-icons/icons/Copy.js"),Tip=__webpack_require__("../../node_modules/grommet/es6/components/Tip/Tip.js"),useThemeValue=__webpack_require__("../../node_modules/grommet/es6/utils/useThemeValue.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}var StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"CopyButton__StyledButton",componentId:"sc-1bp1m18-0"})(["border-radius:",";",""],(function(props){return props.theme.global.control.border.radius}),(function(props){return props.theme.button.default?"":(0,styles.hY)("padding",props.pad,!1,void 0,props.theme)})),CopyButton=function CopyButton(_ref){var _theme$global$input$p,_theme$global$input$p2,_theme$global$input$p3,onClickCopy=_ref.onClickCopy,onBlurCopy=_ref.onBlurCopy,readOnlyCopyPrompt=_ref.readOnlyCopyPrompt,tip=_ref.tip,value=_ref.value,_useThemeValue=(0,useThemeValue.i)(),theme=_useThemeValue.theme,passThemeFlag=_useThemeValue.passThemeFlag;return react.createElement(Tip.Y,{dropProps:{align:{bottom:"top"}},content:tip},react.createElement(StyledButton,_extends({onClick:onClickCopy,icon:react.createElement(Copy.Q,null),pad:{horizontal:null==(_theme$global$input$p=theme.global.input.padding)?void 0:_theme$global$input$p.horizontal,left:null==(_theme$global$input$p2=theme.global.input.padding)?void 0:_theme$global$input$p2.left,right:null==(_theme$global$input$p3=theme.global.input.padding)?void 0:_theme$global$input$p3.right,top:"0",bottom:"0"},onBlur:onBlurCopy,onMouseOut:onBlurCopy,"aria-label":readOnlyCopyPrompt+" "+value},passThemeFlag)))},_excluded=["a11yTitle","defaultSuggestion","defaultValue","dropAlign","dropHeight","dropTarget","dropProps","focusIndicator","icon","id","messages","name","onBlur","onChange","onFocus","onKeyDown","onSelect","onSuggestionSelect","onSuggestionsClose","onSuggestionsOpen","placeholder","plain","readOnly","readOnlyCopy","reverse","suggestions","textAlign","value","width"];function TextInput_extends(){return TextInput_extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},TextInput_extends.apply(null,arguments)}var renderLabel=function renderLabel(suggestion){return suggestion&&"object"==typeof suggestion?suggestion.label||suggestion.value:suggestion},stringLabel=function stringLabel(suggestion){return suggestion&&"object"==typeof suggestion?suggestion.label&&"string"==typeof suggestion.label?suggestion.label:suggestion.value:suggestion},ContainerBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"TextInput__ContainerBox",componentId:"sc-1ai0c08-0"})(["",";@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){width:100%;}"],(function(props){return props.dropHeight?(0,styles.b7)("max-height",props.dropHeight,props.theme):"max-height: inherit;"})),defaultDropAlign={top:"bottom",left:"left"},TextInput=(0,react.forwardRef)((function(_ref,ref){var _inputRef$current,_inputRef$current2,a11yTitle=_ref.a11yTitle,defaultSuggestion=_ref.defaultSuggestion,defaultValue=_ref.defaultValue,_ref$dropAlign=_ref.dropAlign,dropAlign=void 0===_ref$dropAlign?defaultDropAlign:_ref$dropAlign,dropHeight=_ref.dropHeight,dropTarget=_ref.dropTarget,dropProps=_ref.dropProps,_ref$focusIndicator=_ref.focusIndicator,focusIndicator=void 0===_ref$focusIndicator||_ref$focusIndicator,icon=_ref.icon,id=_ref.id,messages=_ref.messages,name=_ref.name,_onBlur=_ref.onBlur,onChange=_ref.onChange,_onFocus=_ref.onFocus,onKeyDown=_ref.onKeyDown,onSelect=_ref.onSelect,onSuggestionSelect=_ref.onSuggestionSelect,onSuggestionsClose=_ref.onSuggestionsClose,onSuggestionsOpen=_ref.onSuggestionsOpen,placeholder=_ref.placeholder,plain=_ref.plain,readOnlyProp=_ref.readOnly,readOnlyCopy=_ref.readOnlyCopy,reverse=_ref.reverse,suggestions=_ref.suggestions,textAlign=_ref.textAlign,valueProp=_ref.value,widthProp=_ref.width,rest=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(_ref,_excluded),_useThemeValue=(0,useThemeValue.i)(),theme=_useThemeValue.theme,passThemeFlag=_useThemeValue.passThemeFlag,format=(0,react.useContext)(MessageContext.N).format,announce=(0,react.useContext)(AnnounceContext.n),formContext=(0,react.useContext)(FormContext.c),inputRef=(0,refs.N)(ref),dropRef=(0,react.useRef)(),suggestionsRef=(0,react.useRef)(),readOnly=readOnlyProp||readOnlyCopy,_formContext$useFormI=formContext.useFormInput({name:readOnly?void 0:name,value:valueProp}),value=_formContext$useFormI[0],setValue=_formContext$useFormI[1],_useState=(0,react.useState)(),focus=_useState[0],setFocus=_useState[1],_useState2=(0,react.useState)(!1),showDrop=_useState2[0],setShowDrop=_useState2[1],handleSuggestionSelect=(0,react.useMemo)((function(){return onSelect&&!onSuggestionSelect?onSelect:onSuggestionSelect}),[onSelect,onSuggestionSelect]),handleTextSelect=(0,react.useMemo)((function(){return onSelect&&onSuggestionSelect?onSelect:void 0}),[onSelect,onSuggestionSelect]),_useState3=(0,react.useState)(),suggestionsAtClose=_useState3[0],setSuggestionsAtClose=_useState3[1],readOnlyCopyValidation=format({id:"input.readOnlyCopy.validation",messages}),readOnlyCopyPrompt=format({id:"input.readOnlyCopy.prompt",messages}),_useState4=(0,react.useState)(readOnlyCopyPrompt),tip=_useState4[0],setTip=_useState4[1],openDrop=(0,react.useCallback)((function(){setShowDrop(!0),announce(format({id:"textInput.suggestionIsOpen",messages})),announce(suggestions.length+" "+format({id:"textInput.suggestionsCount",messages})),onSuggestionsOpen&&onSuggestionsOpen()}),[announce,messages,format,onSuggestionsOpen,suggestions]),closeDrop=(0,react.useCallback)((function(){setSuggestionsAtClose(suggestions),setShowDrop(!1),onSuggestionsClose&&onSuggestionsClose()}),[onSuggestionsClose,suggestions]),clickOutside=(0,react.useCallback)((function(event){event.target!==inputRef.current&&closeDrop()}),[inputRef,closeDrop]);(0,react.useEffect)((function(){!focus||showDrop||!suggestions||!suggestions.length||suggestionsAtClose&&suggestionsAtClose.length===suggestions.length||openDrop()}),[focus,openDrop,showDrop,suggestions,suggestionsAtClose]),(0,react.useEffect)((function(){!showDrop||suggestions&&suggestions.length||closeDrop()}),[closeDrop,showDrop,suggestions]);var valueSuggestionIndex=(0,react.useMemo)((function(){return suggestions?suggestions.map((function(suggestion){return"object"==typeof suggestion?suggestion.value:suggestion})).indexOf(value):-1}),[suggestions,value]),resetSuggestionIndex=(0,react.useMemo)((function(){return-1===valueSuggestionIndex&&"number"==typeof defaultSuggestion?defaultSuggestion:valueSuggestionIndex}),[defaultSuggestion,valueSuggestionIndex]),_useState5=(0,react.useState)(resetSuggestionIndex),activeSuggestionIndex=_useState5[0],setActiveSuggestionIndex=_useState5[1],_useState6=(0,react.useState)(),mouseMovedSinceLastKey=_useState6[0],setMouseMovedSinceLastKey=_useState6[1];(0,react.useEffect)((function(){return setActiveSuggestionIndex(valueSuggestionIndex)}),[valueSuggestionIndex]),(0,react.useEffect)((function(){showDrop||setActiveSuggestionIndex(resetSuggestionIndex)}),[resetSuggestionIndex,showDrop]),(0,react.useEffect)((function(){if(activeSuggestionIndex>=0){var label=stringLabel(suggestions[activeSuggestionIndex]);announce(label+" "+format({id:"textInput.enterSelect",messages}))}}),[activeSuggestionIndex,announce,messages,format,suggestions]),(0,react.useEffect)((function(){var timer=setTimeout((function(){var list=suggestionsRef.current;if(showDrop&&-1!==activeSuggestionIndex&&list){var container=list.parentNode,item=list.children[activeSuggestionIndex];container.scrollTo&&((0,DOM.oZ)(item,container)?container.scrollTo(0,item.offsetTop-(container.getBoundingClientRect().height-item.getBoundingClientRect().height)):(0,DOM.Z7)(item,container)&&container.scrollTo(0,item.offsetTop))}}),50);return function(){return clearTimeout(timer)}}),[activeSuggestionIndex,showDrop]),(0,react.useEffect)((function(){readOnly&&null!=inputRef&&inputRef.current&&inputRef.current.scrollLeft>0&&(inputRef.current.scrollLeft=0)}),[readOnly,inputRef,null==inputRef||null==(_inputRef$current=inputRef.current)?void 0:_inputRef$current.scrollLeft]);var drop,setValueFromSuggestion=function setValueFromSuggestion(event,suggestion){if(inputRef.current.focus(),inputRef.current.value=suggestion,closeDrop(),handleSuggestionSelect){event.persist&&event.persist();var adjustedEvent=event;adjustedEvent.suggestion=suggestion,handleSuggestionSelect(adjustedEvent)}setValue(suggestion)},onNextSuggestion=(0,react.useCallback)((function(event){event.preventDefault();var nextActiveIndex=Math.min(activeSuggestionIndex+1,suggestions.length-1);setActiveSuggestionIndex(nextActiveIndex),setMouseMovedSinceLastKey(!1)}),[activeSuggestionIndex,suggestions]),onPreviousSuggestion=(0,react.useCallback)((function(event){event.preventDefault();var nextActiveIndex=Math.max(activeSuggestionIndex-1,0);setActiveSuggestionIndex(nextActiveIndex),setMouseMovedSinceLastKey(!1)}),[activeSuggestionIndex]),hasValue=value||(null==(_inputRef$current2=inputRef.current)?void 0:_inputRef$current2.value),showStyledPlaceholder=(0,react.useMemo)((function(){return placeholder&&"string"!=typeof placeholder&&!hasValue}),[hasValue,placeholder]),extraProps={onSelect:handleTextSelect};showDrop&&(drop=react.createElement(Drop.e,TextInput_extends({ref:dropRef,id:id?"text-input-drop__"+id:void 0,align:dropAlign,responsive:!1,target:dropTarget||inputRef.current,onClickOutside:clickOutside,onEsc:closeDrop,trapFocus:!1},dropProps),react.createElement(ContainerBox,TextInput_extends({id:id?"listbox__"+id:void 0,role:"listbox",overflow:"auto",dropHeight,onMouseMove:function onMouseMove(){return setMouseMovedSinceLastKey(!0)}},passThemeFlag),react.createElement(StyledSuggestions,TextInput_extends({ref:suggestionsRef},passThemeFlag),react.createElement(InfiniteScroll.u,{items:suggestions,step:theme.select.step,show:-1!==activeSuggestionIndex?activeSuggestionIndex:void 0},(function(suggestion,index,itemRef){var child,active=activeSuggestionIndex===index,selected=suggestion===value,renderedLabel=renderLabel(suggestion);return"string"!=typeof renderedLabel?child=renderedLabel:theme.button.option||(child=react.createElement(Box.a,{align:"start",pad:"small"},renderedLabel)),react.createElement("li",{key:stringLabel(suggestion)+"-"+index,ref:itemRef},react.createElement(Button.$,{id:id?"listbox-option-"+index+"__"+id:void 0,role:"option","aria-selected":selected?"true":"false",active,fill:"horizontal",plain:!!child||void 0,align:"start",kind:child?void 0:"option",label:child?void 0:renderedLabel,onClick:function onClick(event){return setValueFromSuggestion(event,suggestion)},onMouseMove:mouseMovedSinceLastKey&&activeSuggestionIndex!==index?function(){return setActiveSuggestionIndex(index)}:void 0,keyboard:!mouseMovedSinceLastKey},child))}))))));var keyboardProps={onKeyDown};showDrop?(keyboardProps.onEnter=function(event){event.preventDefault(),activeSuggestionIndex>=0?setValueFromSuggestion(event,suggestions[activeSuggestionIndex]):closeDrop()},activeSuggestionIndex>0&&(keyboardProps.onUp=onPreviousSuggestion),activeSuggestionIndex<suggestions.length-1&&(keyboardProps.onDown=onNextSuggestion),keyboardProps.onTab=closeDrop):suggestions&&suggestions.length>0&&(keyboardProps.onDown=openDrop);var activeOptionID,comboboxProps={};id&&(null==suggestions?void 0:suggestions.length)>-1&&(showDrop&&activeSuggestionIndex>-1&&(activeOptionID="listbox-option-"+activeSuggestionIndex+"__"+id),comboboxProps={"aria-activedescendant":activeOptionID,"aria-autocomplete":"list","aria-expanded":showDrop?"true":"false","aria-controls":showDrop?"listbox__"+id:void 0,role:"combobox"});var textInputIcon=(0,utils_icon.Q)(icon,rest.size,theme),ReadOnlyCopyButton=react.createElement(CopyButton,{onBlurCopy:function onBlurCopy(){tip===readOnlyCopyValidation&&setTip(readOnlyCopyPrompt)},onClickCopy:function onClickCopy(){__webpack_require__.g.navigator.clipboard.writeText(value),announce(readOnlyCopyValidation,"assertive"),setTip(readOnlyCopyValidation)},readOnlyCopyPrompt,tip,value});return react.createElement(StyledTextInputContainer,TextInput_extends({readOnlyProp:readOnly,readOnlyCopy,plain,border:!plain,onMouseMove:function onMouseMove(){return setMouseMovedSinceLastKey(!0)}},passThemeFlag),reverse&&readOnlyCopy&&ReadOnlyCopyButton,showStyledPlaceholder&&react.createElement(StyledPlaceholder,passThemeFlag,placeholder),textInputIcon&&!readOnly&&react.createElement(StyledIcon,{reverse,theme},textInputIcon),react.createElement(Keyboard.s,TextInput_extends({target:focus?"document":void 0},keyboardProps),react.createElement(StyledTextInput,TextInput_extends({"aria-label":a11yTitle,ref:inputRef,id,name,autoComplete:"off",plain,placeholder:"string"==typeof placeholder?placeholder:void 0,icon:!readOnly&&icon,reverse,focus,focusIndicator,textAlign,widthProp},passThemeFlag,rest,extraProps,comboboxProps,{defaultValue:renderLabel(defaultValue),value:renderLabel(value),readOnly,readOnlyCopy,onFocus:function onFocus(event){focus||(setFocus(!0),suggestions&&suggestions.length>0&&(announce(format({id:"textInput.suggestionsExist",messages})),openDrop()),_onFocus&&_onFocus(event))},onBlur:function onBlur(event){event.relatedTarget&&event.relatedTarget===dropRef.current||(setFocus(!1),_onBlur&&_onBlur(event))},onChange:readOnly?void 0:function(event){suggestions&&focus&&!showDrop&&openDrop(),setValue(event.target.value),setActiveSuggestionIndex(resetSuggestionIndex),onChange&&onChange(event)}}))),!reverse&&readOnlyCopy&&ReadOnlyCopyButton,!readOnly&&drop)}));TextInput.displayName="TextInput",TextInput.propTypes=TextInputPropTypes}}]);