{"version":3,"file":"screens-SubjectTalkPage-components-SubjectTalkData-components-Tags-components-AddTagModal-AddTagModal-stories.8e7294e7.iframe.bundle.js","mappings":";;AAWA;AAIA;;;AAMA;;;;;;;AAWA;;;;;AAOA;ACjCA;;;;AASA;;;;;;;;;;;AAgBA;;;AAMA;;;AAKA;;;;AAMA;AACA;;;;AAIA;;;;;AAOA;AACA;;;AAGA;;;;;;;;AAYA;;;;AChEA","sources":["webpack://@zooniverse/fe-project/./src/screens/SubjectTalkPage/components/SubjectTalkData/components/Tags/components/AddTagModal/AddTagModal.jsx","webpack://@zooniverse/fe-project/./src/screens/SubjectTalkPage/components/SubjectTalkData/components/Tags/components/Tag/Tag.jsx","webpack://@zooniverse/fe-project/./src/screens/SubjectTalkPage/components/SubjectTalkData/components/Tags/components/TagList/TagList.jsx"],"sourcesContent":["import { Loader, Modal, SpacedText } from '@zooniverse/react-components'\nimport { Box, Button, Form, FormField, TextInput } from 'grommet'\nimport { useTranslation } from 'next-i18next'\nimport { arrayOf, bool, func, shape, string } from 'prop-types'\nimport { useState } from 'react'\nimport styled from 'styled-components'\n\nimport TagList from '../TagList'\n\nconst StyledButton = styled(Button)`\n  border-radius: 4px;\n  border: ${props => props.theme.dark ?\n    `0.5px solid #E0D4F6` \n    : `0.5px solid #4D2A8E`\n  };\n  color: ${props => props.theme.dark ?\n    '#E0D4F6'\n    : '#4D2A8E'\n  };\n  height: 40px;\n  min-width: 110px;\n`\n\nconst StyledFormField = styled(FormField)`\n  flex: 1;\n  margin: 0;\n\n  label {\n    margin-left: 0;\n  }\n`\n\nconst StyledTextInput = styled(TextInput)`\n  border-radius: 4px;\n  border: 1px solid #A6A7A9;\n  box-shadow: 1px 1px 4px 0 rgba(0, 0, 0, 0.25) inset;\n  height: 40px;\n`\n\nconst DEFAULT_HANDLER = () => true\n\nfunction AddTagModal({\n  active = false,\n  disabled = false,\n  error = null,\n  loading = false,\n  onClose,\n  onTagClick = DEFAULT_HANDLER,\n  projectDisplayName = '',\n  tags = []\n}) {\n  const [newTagName, setNewTagName] = useState('')\n\n  const { t } = useTranslation('screens')\n\n  function handleChange(event) {\n    const { value } = event.target\n    setNewTagName(value)\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n    onTagClick({ name: newTagName })\n    setNewTagName('')\n  }\n\n  return (\n    <Modal\n      active={active}\n      bodyBackground='transparent'\n      closeFn={onClose}\n      headingBackground='transparent'\n      pad={{ horizontal: 'small', top: 'xsmall', bottom: 'medium' }}\n      role='dialog'\n      title={t('Talk.Tags.addATag')}\n      titleColor='black'\n    >\n      <Box\n        gap='xsmall'\n        width='600px'\n      >\n        {error ? (\n          <Box align='center' justify='center' fill pad='medium'>\n            <SpacedText uppercase={false}>\n              {t('Talk.somethingWentWrong')}\n            </SpacedText>\n          </Box>\n        ) : loading ? (\n          <Box align='center' justify='center' fill pad='medium'>\n            <Loader />\n          </Box>\n        ) : tags.length > 0 ? (\n          <Box gap='xsmall'>\n            <SpacedText size='small'>\n              {t('Talk.Tags.popularTagsFrom', { projectDisplayName })}\n            </SpacedText>\n            <TagList\n              disabled={disabled}\n              onTagClick={onTagClick}\n              tags={tags}\n            />\n          </Box>\n        ) : null}\n        <Form\n          onSubmit={handleSubmit}\n        >\n          <Box\n            align='end'\n            direction='row'\n            gap='small'\n          >\n            <StyledFormField\n              htmlFor='tag-name'\n              label={<SpacedText>{t('Talk.Tags.createTag')}</SpacedText>}\n              name='tag-name'\n              validate={[\n                (name) => {\n                  if (!name || name && !/^[\\w-]{3,40}$/.test(name)) {\n                    return t('Talk.Tags.tagValidationMessage')\n                  }\n                  return undefined\n                }\n              ]}\n              validateOn='submit'\n            >\n              <StyledTextInput\n                id='tag-name'\n                name='tag-name'\n                onChange={handleChange}\n                value={newTagName}\n              />\n            </StyledFormField>\n            <StyledButton\n              label={t('Talk.Tags.add')}\n              type='submit'\n            />\n          </Box>\n        </Form>\n      </Box>\n    </Modal>\n  )\n}\n\nAddTagModal.propTypes = {\n  active: bool,\n  disabled: bool,\n  onClose: func.isRequired,\n  onTagClick: func,\n  projectDisplayName: string,\n  tags: arrayOf(\n    shape({\n      id: string,\n      name: string\n    })\n  )\n}\n\nexport default AddTagModal\n","import { Box, Button, Text, Tip } from 'grommet'\nimport { useTranslation } from 'next-i18next'\nimport { bool, func, shape, string } from 'prop-types'\nimport styled from 'styled-components'\n\nconst StyledButton = styled(Button)`\n  background: ${props => props.$userVoted ?\n    'linear-gradient(180deg, #4D2A8E 0%, #3C2F53 100%);'\n    : props.theme.dark ? \n      props.theme.global.colors['dark-4'] \n      : props.theme.global.colors['neutral-6']\n    };\n  border: none;\n  border-radius: 32px;\n  box-shadow: 1px 1px 4px 0 rgba(0, 0, 0, 0.25);\n  color: ${props => props.$userVoted ?\n    props.theme.global.colors['neutral-6']\n    : props.theme.dark ?\n      props.theme.global.colors['neutral-6']\n      : props.theme.global.colors['dark-3']\n    };\n  width: fit-content;\n\n\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 1;\n  }\n\n  &:hover:not(:disabled),\n  &:focus:not(:disabled) {\n    background: ${props => props.$userVoted ?\n      'linear-gradient(180deg, #4D2A8E 0%, #3C2F53 100%);'\n      : '#E0D4F6'\n      };\n    border: none;\n    box-shadow: 1px 1px 4px 0 rgba(0, 0, 0, 0.25);\n    color: ${props => props.$userVoted ?\n      props.theme.global.colors['neutral-6']\n      : props.theme.global.colors['dark-3']};\n    padding: 14px 15px;\n  }\n`\n\nconst StyledText = styled(Text)`\n  display: none;\n  min-width: 10px;\n\n  ${StyledButton}:hover:not(:disabled) &,\n  ${StyledButton}:focus:not(:disabled) & {\n    display: inline-block;\n    margin-left: 10px;\n  }\n`\n\nconst StyledVoteCount = styled(Text)`\n  display: inline-block;\n  margin-left: 10px;\n  min-width: 10px;\n\n  ${StyledButton}:hover:not(:disabled) &,\n  ${StyledButton}:focus:not(:disabled) & {\n    display: none;\n  }\n`\n\nconst HoverContent = styled(Box)`\n  // When hover is not supported, such as a touchscreen\n  display: none;\n\n  @media (hover: hover) {\n    /* when hover is supported */\n    display: flex;\n  }\n`\n\nconst TipContent = ({ message = '' }) => (\n  <HoverContent\n    direction='row'\n    align='center'\n    width='100%'\n    animation={{ type: 'fadeIn' }}\n  >\n    <Box background='dark-4' round='5px' pad='5px'>\n      <Text>{message}</Text>\n    </Box>\n  </HoverContent>\n)\n\nconst DEFAULT_HANDLER = () => true\n\nfunction Tag({\n  disabled = false,\n  onClick = DEFAULT_HANDLER,\n  tag\n}) {\n  const { t } = useTranslation('screens')\n\n  const message = tag.userVoted ? t('Talk.Tags.removeVote') : t('Talk.Tags.addVote')\n\n  const padHorizontal = tag.vote_count > 0 ? '15px' : '25px'\n\n  function handleClick() {\n    onClick(tag)\n  }\n\n  return (\n    <Tip\n      content={<TipContent message={message} />}\n      plain\n      dropProps={{ align: { bottom: 'top' } }}\n    >\n      <StyledButton\n        align='center'\n        disabled={disabled}\n        gap='xsmall'\n        justify='center'\n        label={(\n          <>\n            <Text\n              size='1rem'\n              weight={500}\n              >\n              {tag.name}\n            </Text>\n            <StyledText\n              size='1rem'\n              weight='bold'\n              >\n              {tag.userVoted ? 'x' : '+'}\n            </StyledText>\n            {tag.vote_count ? (\n              <StyledVoteCount\n                size='1rem'\n                weight='bold'\n              >\n                {tag.vote_count}\n              </StyledVoteCount>\n            ) : null}\n          </>\n        )}\n        onClick={handleClick}\n        pad={{ horizontal: padHorizontal, vertical: '14px' }}\n        $userVoted={tag.userVoted}\n      />\n    </Tip>\n  )\n}\n\nTag.propTypes = {\n  disabled: bool,\n  onClick: func,\n  tag: shape({\n    id: string,\n    name: string\n  }).isRequired\n}\n\nexport default Tag\n","import { Box } from 'grommet'\nimport { arrayOf, bool, func, shape, string } from 'prop-types'\nimport styled from 'styled-components'\n\nimport Tag from '../Tag'\n\nconst StyledOrderedList = styled(Box)`\n  list-style: none;\n  row-gap: 10px;\n  column-gap: 10px;\n`\n\nconst DEFAULT_HANDLER = () => true\n\nfunction TagList({\n  disabled = false,\n  onTagClick = DEFAULT_HANDLER,\n  tags = []\n}) {\n  return (\n    <StyledOrderedList\n      forwardedAs='ol'\n      direction='row'\n      margin='none'\n      pad='2px'\n      wrap\n    >\n      {tags.map(tag => (\n        <li key={`${tag.id}-${tag.name}`}>\n          <Tag\n            disabled={disabled}\n            onClick={onTagClick}\n            tag={tag}\n          />\n        </li>\n      ))}\n    </StyledOrderedList>\n  )\n}\n\nTagList.propTypes = {\n  disabled: bool,\n  onTagClick: func,\n  tags: arrayOf(\n    shape({\n      id: string,\n      name: string\n    })\n  )\n}\n\nexport default TagList  \n"],"names":[],"ignoreList":[],"sourceRoot":""}