{"version":3,"file":"screens-SubjectTalkPage-components-SubjectMetadata-SubjectMetadata-stories.bfa9203d.iframe.bundle.js","mappings":";;;;;;;AA2CA","sources":["webpack://@zooniverse/fe-project/./src/screens/SubjectTalkPage/components/SubjectMetadata/SubjectMetadata.jsx"],"sourcesContent":["import { Markdownz, SpacedText } from '@zooniverse/react-components'\nimport { Accordion, AccordionPanel, Anchor, Box, Grid, Heading, ThemeContext, Text } from 'grommet'\nimport { CircleInformation } from 'grommet-icons'\nimport { useTranslation } from 'next-i18next'\nimport styled from 'styled-components'\n\nimport { useSubjectMetadataPreference } from '@hooks'\n\nimport filterByLabel, { filters as defaultFilters } from './filterByLabel'\n\nconst StyledGrid = styled(Grid)`\n  grid-gap: 20px 60px;\n  grid-template-columns: repeat(4, 1fr);\n\n  @media screen and (max-width: 1280px) {\n    grid-template-columns: repeat(2, 1fr);\n  }\n`\n\nfunction formatValue(value) {\n  const stringValue = value?.toString()\n  const trimmedStringValue = stringValue?.trim()\n  if (trimmedStringValue?.startsWith('http')) {\n    return (\n      <Anchor\n        href={value}\n        target='_blank'\n      >\n        {value}\n      </Anchor>\n    )\n  }\n  if (trimmedStringValue) {\n    return <Markdownz inline>{trimmedStringValue}</Markdownz>\n  }\n\n  if (value === null) {\n    return 'null'\n  }\n\n  return ''\n}\n\nconst DEFAULT_METADATA = {}\n\nfunction SubjectMetadata({\n  filters = defaultFilters,\n  metadata = DEFAULT_METADATA,\n  prefixes = defaultFilters\n}) {\n  const [isExpanded, handleToggle] = useSubjectMetadataPreference()\n\n  const { t } = useTranslation('screens')\n  \n  const filteredMetadata = Object.keys(metadata)\n    .filter((label) => filterByLabel(label, filters))\n  const entries = filteredMetadata.map(label => {\n    const value = formatValue(metadata[label])\n    return {\n      label: label.replace(RegExp(`^(${prefixes.join('|')})`), ''),\n      value\n    }\n  })\n\n  const headerLabel = (\n    <Box\n      align='center'\n      direction='row'\n      justify='between'\n      fill='horizontal'\n      pad={{ vertical: '12px' }}\n    >\n      <Box\n        align='center'\n        direction='row'\n        gap='xsmall'\n      >\n        <CircleInformation\n          aria-hidden='true'\n          color={{ dark: 'light-1', light: 'dark-4' }}\n          size='16px'\n        />\n        <Heading\n          level={2}\n          margin='none'\n          size='1rem'\n        >\n          <SpacedText\n            color={{\n              dark: 'light-1',\n              light: 'dark-4'\n            }}\n            size='1rem'\n            weight='bold'\n          >\n            {t('Talk.Metadata.subjectMetadata')}\n          </SpacedText>\n        </Heading>\n      </Box>\n      <Box\n        align='center'\n        direction='row'\n        gap='xsmall'\n      >\n        <Text\n          color={{ dark: 'light-1', light: 'dark-4' }}\n          size='.75rem'\n        >\n          {isExpanded ? t('Talk.Metadata.collapse') : t('Talk.Metadata.expand')}\n        </Text>\n      </Box>\n    </Box>\n  )\n\n  function handleActive() {\n    handleToggle(!isExpanded)\n  }\n\n  return (\n    <Box\n      background={{\n        dark: 'dark-3',\n        light: 'neutral-6'\n      }}\n      border={{\n        color: 'light-5',\n        side: 'all',\n        size: 'thin'\n      }}\n      pad={{ left: 'small' }}\n      round='8px'\n      width='full'\n    >\n      <ThemeContext.Extend\n        value={{\n          accordion: {\n            border: { color: 'none' },\n            icons: { color: { dark: 'light-1', light: 'dark-5' }}\n          }\n        }}\n      >\n        <Accordion\n          activeIndex={isExpanded ? [0] : []}\n          onActive={handleActive}\n        >\n          <AccordionPanel label={headerLabel}>\n            <Box pad={{ right: 'small', vertical: 'small' }}>\n              {entries.length === 0 ? (\n                <Text\n                  color={{ dark: 'light-1', light: 'dark-4' }}\n                  size='1rem'\n                >\n                  {t('Talk.Metadata.noMetadata')}\n                </Text>\n              ) : (\n                <StyledGrid>\n                  {entries.map(({ label, value }) => (\n                    <Box\n                      key={label}\n                      gap='xsmall'\n                    >\n                      <Text\n                        color={{ dark: 'light-1', light: 'dark-4' }}\n                        size='1rem'\n                        weight='bold'\n                        wordBreak='break-word'\n                      >\n                        {label}\n                      </Text>\n                      <Text\n                        color={{ dark: 'light-1', light: 'dark-4' }}\n                        size='1rem'\n                        wordBreak='break-word'\n                      >\n                        {value}\n                      </Text>\n                    </Box>\n                  ))}\n                </StyledGrid>\n              )}\n            </Box>\n          </AccordionPanel>\n        </Accordion>\n      </ThemeContext.Extend>\n    </Box>\n  )\n}\n\nexport default SubjectMetadata\n"],"names":[],"ignoreList":[],"sourceRoot":""}