(self.webpackChunk_zooniverse_fe_project=self.webpackChunk_zooniverse_fe_project||[]).push([[1396,8397],{"../../node_modules/markdown-it-imsize/lib/imsize/types sync recursive ^\\.\\/.*$"(module,__unused_webpack_exports,__webpack_require__){var map={"./bmp":"../../node_modules/markdown-it-imsize/lib/imsize/types/bmp.js","./bmp.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/bmp.js","./gif":"../../node_modules/markdown-it-imsize/lib/imsize/types/gif.js","./gif.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/gif.js","./jpg":"../../node_modules/markdown-it-imsize/lib/imsize/types/jpg.js","./jpg.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/jpg.js","./png":"../../node_modules/markdown-it-imsize/lib/imsize/types/png.js","./png.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/png.js","./psd":"../../node_modules/markdown-it-imsize/lib/imsize/types/psd.js","./psd.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/psd.js","./svg":"../../node_modules/markdown-it-imsize/lib/imsize/types/svg.js","./svg.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/svg.js","./tiff":"../../node_modules/markdown-it-imsize/lib/imsize/types/tiff.js","./tiff.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/tiff.js","./webp":"../../node_modules/markdown-it-imsize/lib/imsize/types/webp.js","./webp.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/webp.js"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="../../node_modules/markdown-it-imsize/lib/imsize/types sync recursive ^\\.\\/.*$"},"../lib-react-components/dist/esm/Loader/Loader.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/prop-types/index.js"),grommet__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),_translations_i18n__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../lib-react-components/dist/esm/translations/i18n.js"),styled_components__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),StyledBar=(0,styled_components__WEBPACK_IMPORTED_MODULE_3__.default)(grommet__WEBPACK_IMPORTED_MODULE_1__.a).withConfig({displayName:"Loader__StyledBar",componentId:"sc-3l0y3y-0"})(["@keyframes bounce-height{0%{height:20%;}10%{height:100%;}100%{height 20%;}}animation:bounce-height 1s linear 0s infinite;height:20%;width:10%;border-radius:4px;background:",";&.delayed-one{animation:bounce-height 1s linear 200ms infinite;}&.delayed-two{animation:bounce-height 1s linear 500ms infinite;}"],props=>props.theme.global.colors.brand);function Loader(_ref){var{height="xxsmall",loadingMessage="",width="xxsmall"}=_ref,{t}=(0,_translations_i18n__WEBPACK_IMPORTED_MODULE_2__.B)();return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsxs)(grommet__WEBPACK_IMPORTED_MODULE_1__.a,{a11yTitle:loadingMessage||t("Loader.loading"),role:"status",direction:"row",justify:"between",align:"center",height,width,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledBar,{className:"delayed-two"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledBar,{className:"delayed-one"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledBar,{}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledBar,{className:"delayed-one"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledBar,{className:"delayed-two"})]})}Loader.propTypes={height:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,loadingMessage:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,width:prop_types__WEBPACK_IMPORTED_MODULE_0__.string};const __WEBPACK_DEFAULT_EXPORT__=Loader},"../lib-react-components/dist/esm/Markdownz/Markdownz.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>Markdownz_Markdownz});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Table=__webpack_require__("../../node_modules/grommet/es6/components/Table/Table.js"),TableCell=__webpack_require__("../../node_modules/grommet/es6/components/TableCell/TableCell.js"),Anchor=__webpack_require__("../../node_modules/grommet/es6/components/Anchor/Anchor.js"),Heading=__webpack_require__("../../node_modules/grommet/es6/components/Heading/Heading.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),TableFooter=__webpack_require__("../../node_modules/grommet/es6/components/TableFooter/TableFooter.js"),TableHeader=__webpack_require__("../../node_modules/grommet/es6/components/TableHeader/TableHeader.js"),TableBody=__webpack_require__("../../node_modules/grommet/es6/components/TableBody/TableBody.js"),TableRow=__webpack_require__("../../node_modules/grommet/es6/components/TableRow/TableRow.js"),esm=__webpack_require__("../../node_modules/markdownz/lib/esm/index.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),withThemeContext=__webpack_require__("../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js");const theme={anchor:{fontWeight:400,textDecoration:"underline"},heading:{color:{dark:"accent-1",light:"neutral-1"},level:{1:{small:{size:"26px",height:"31px",maxWidth:"816px"},medium:{size:"26px",height:"31px",maxWidth:"1200px"},large:{size:"46px",height:"51px",maxWidth:"1968px"},xlarge:{size:"66px",height:"71px",maxWidth:"2736px"}},2:{small:{size:"22px",height:"27px",maxWidth:"816px"},medium:{size:"22px",height:"27px",maxWidth:"816px"},large:{size:"42px",height:"47px",maxWidth:"1968px"},xlarge:{size:"62px",height:"67px",maxWidth:"2736px"}},3:{small:{size:"18px",height:"23px",maxWidth:"528px"},medium:{size:"18px",height:"23px",maxWidth:"528px"},large:{size:"38px",height:"43px",maxWidth:"816px"},xlarge:{size:"58px",height:"63px",maxWidth:"1008px"}},4:{font:{weight:"bold"},small:{size:"16px",height:"21px",maxWidth:"432px"},medium:{size:"16px",height:"21px",maxWidth:"432px"},large:{size:"36px",height:"41px",maxWidth:"432px"},xlarge:{size:"56px",height:"61px",maxWidth:"432px"}},5:{small:{size:"14px",height:"19px",maxWidth:"384px"},medium:{size:"14px",height:"19px",maxWidth:"384px"},large:{size:"34px",height:"39px",maxWidth:"384px"},xlarge:{size:"54px",height:"59px",maxWidth:"384px"}},6:{small:{size:"12px",height:"17px",maxWidth:"336px"},medium:{size:"12px",height:"17px",maxWidth:"336px"},large:{size:"32px",height:"37px",maxWidth:"384px"},xlarge:{size:"52px",height:"57px",maxWidth:"384px"}}},responsiveBreakpoint:"small",weight:600,extend:props=>(0,styled_components_browser_esm.css)(["letter-spacing:-0.5px;margin:",";"],props.margin||"10px 0 10px 0")}};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),console=__webpack_require__("../../node_modules/console-browserify/index.js"),_excluded=["style"],_excluded2=["style"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var StyledHorizontalRule=styled_components_browser_esm.default.hr.withConfig({displayName:"Markdownz__StyledHorizontalRule",componentId:"sc-13w1mlf-0"})(["width:100%;"]),StyledOrderedList=styled_components_browser_esm.default.ol.withConfig({displayName:"Markdownz__StyledOrderedList",componentId:"sc-13w1mlf-1"})(["font-size:1rem;margin-top:0;"]),StyledUnorderedList=styled_components_browser_esm.default.ul.withConfig({displayName:"Markdownz__StyledUnorderedList",componentId:"sc-13w1mlf-2"})(["font-size:1rem;margin-top:0;"]),StyledTable=(0,styled_components_browser_esm.default)(Table.X).withConfig({displayName:"Markdownz__StyledTable",componentId:"sc-13w1mlf-3"})(["font-size:1rem;font-weight:normal;th{font-weight:bold;}"]),StyledTableCell=(0,styled_components_browser_esm.default)(TableCell.n).withConfig({displayName:"Markdownz__StyledTableCell",componentId:"sc-13w1mlf-4"})(["",""],_ref=>{var{styleString}=_ref;return styleString||""}),StyledVideo=styled_components_browser_esm.default.video.withConfig({displayName:"Markdownz__StyledVideo",componentId:"sc-13w1mlf-5"})(["max-width:100%;"]),componentMappings={a:Anchor.M,h1:_ref2=>{var{id,children}=_ref2;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"1",children})},h2:_ref3=>{var{id,children}=_ref3;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"2",children})},h3:_ref4=>{var{id,children}=_ref4;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"3",children})},h4:_ref5=>{var{id,children}=_ref5;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"4",children})},h5:_ref6=>{var{id,children}=_ref6;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"5",children})},h6:_ref7=>{var{id,children}=_ref7;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"6",children})},hr:StyledHorizontalRule,img:function renderMedia(nodeProps){var width=nodeProps.width,height=nodeProps.height,alt=nodeProps.alt,src=nodeProps.src;if(src.startsWith("https://cdn.jsdelivr.net/gh/jdecked/twemoji"))return alt;var match=alt.match(/=(\d+(%|px|em|rem|vw)?)x(\d+(%|px|em|rem|vh)?)?/);return match&&match.length>0&&(width=parseInt(match[1]),match[3]&&(height=parseInt(match[3])),alt=alt.split(match[0])[0].trim()),src?(0,jsx_runtime.jsx)(Media.A,{alt,defaultMimeType:"image",height,src,width}):null},p:Paragraph.f,span:Text.E,table:StyledTable,tfoot:TableFooter.G,thead:TableHeader.A,th:_ref8=>{var{style}=_ref8,props=_objectWithoutProperties(_ref8,_excluded);return(0,jsx_runtime.jsx)(StyledTableCell,_objectSpread({scope:"col",styleString:style},props))},tbody:TableBody.B,td:_ref9=>{var{style}=_ref9,props=_objectWithoutProperties(_ref9,_excluded2);return(0,jsx_runtime.jsx)(StyledTableCell,_objectSpread({styleString:style},props))},tr:TableRow.H,ol:StyledOrderedList,ul:StyledUnorderedList,video:StyledVideo};function Markdownz(_ref0){var{baseURI="",children,components={},inline=!1,projectSlug="",settings={}}=_ref0;if(!children)return null;Object.keys(components).includes("img")&&console.warn("Overriding the rendering function for the img tag may break the syntax support for image resizing and using image markup for video and audio. Are you sure you want to do this?");var rehypeReactComponents=_objectSpread(_objectSpread({},componentMappings),components),markdownChildren=(_objectSpread({fragment:!0},settings),(0,esm.Vq)({baseURI,components:rehypeReactComponents,content:children,inline,project:{slug:projectSlug},settings}));return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:markdownChildren})}Markdownz.propTypes={baseURI:prop_types.string,children:prop_types.string.isRequired,components:prop_types.object,inline:prop_types.bool,projectSlug:prop_types.string,settings:prop_types.object};const Markdownz_Markdownz=(0,withThemeContext.A)(Markdownz,theme)},"../lib-react-components/dist/esm/PlainButton/PlainButton.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_SpacedText__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_excluded=["as","className","disabled","href","onClick","labelSize","text","color"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledPlainButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.default)(grommet__WEBPACK_IMPORTED_MODULE_0__.$).withConfig({displayName:"PlainButton__StyledPlainButton",componentId:"sc-4x2flx-0"})(["&:focus,&:hover{text-decoration:underline;}&:disabled{cursor:not-allowed;text-decoration:none;}"]),defaultColor={dark:"accent-1",light:"neutral-1"};function PlainButton(_ref){var{as="",className="",disabled=!1,href=null,onClick=()=>{},labelSize="medium",text="",color=defaultColor}=_ref,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledPlainButton,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({as,className,disabled,href:disabled?null:href,gap:"xxsmall",label:text?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_SpacedText__WEBPACK_IMPORTED_MODULE_3__.A,{color,size:labelSize,children:text}):null,onClick,plain:!0},rest))}PlainButton.propTypes={as:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,className:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,color:(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.oneOfType)([(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.shape)({dark:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,light:prop_types__WEBPACK_IMPORTED_MODULE_1__.string}),prop_types__WEBPACK_IMPORTED_MODULE_1__.string]),disabled:prop_types__WEBPACK_IMPORTED_MODULE_1__.bool,href:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,labelSize:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1__.func,text:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,theme:(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.shape)({dark:prop_types__WEBPACK_IMPORTED_MODULE_1__.bool})};const __WEBPACK_DEFAULT_EXPORT__=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.withTheme)(PlainButton)},"../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const __WEBPACK_DEFAULT_EXPORT__=function withThemeContext(WrappedComponent,theme){return props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.D.Extend,{value:theme,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(WrappedComponent,_objectSpread({},props))})}},"./src/helpers/addQueryParams/addQueryParams.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__=function addQueryParams(url){const query=new URLSearchParams(window.location.search).toString();return query.length?`${url}?${query}`:url}},"./src/screens/ClassifyPage/components/WorkflowMenuModal/WorkflowMenuModal.stories.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ChooseASubject:()=>ChooseASubject,ChooseASubjectSet:()=>ChooseASubjectSet,ChooseAWorkflow:()=>ChooseAWorkflow,__namedExportsOrder:()=>__namedExportsOrder,default:()=>WorkflowMenuModal_stories});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),src=__webpack_require__("../lib-grommet-theme/src/index.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),mobx_state_tree_module=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),router_context_shared_runtime=__webpack_require__("../../node_modules/next/dist/shared/lib/router-context.shared-runtime.js"),SubjectSetPicker_mock=__webpack_require__("./src/shared/components/SubjectSetPicker/SubjectSetPicker.mock.js"),stores=__webpack_require__("./stores/index.js"),next_router=__webpack_require__("../../node_modules/next/router.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),Modal=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js"),WorkflowSelector=__webpack_require__("./src/shared/components/WorkflowSelector/index.js"),SubjectSetPicker=__webpack_require__("./src/shared/components/SubjectSetPicker/SubjectSetPicker.jsx"),SubjectPicker=__webpack_require__("./src/shared/components/SubjectPicker/SubjectPicker.jsx");function WorkflowMenuModal({headingBackground="brand",subjectSetFromUrl,titleColor="neutral-6",workflowFromUrl,workflows}){const router=(0,next_router.useRouter)(),{owner,project}=(null==router?void 0:router.query)||{};let modalContent=(0,jsx_runtime.jsx)(WorkflowSelector.A,{workflows}),baseUrl=`/${owner}/${project}/classify`;return workflowFromUrl&&(modalContent=(0,jsx_runtime.jsx)(SubjectSetPicker.h,{baseUrl,workflow:workflowFromUrl})),subjectSetFromUrl&&(baseUrl=`${baseUrl}/workflow/${workflowFromUrl.id}`,modalContent=(0,jsx_runtime.jsx)(SubjectPicker.Ay,{baseUrl,subjectSet:subjectSetFromUrl,workflow:workflowFromUrl})),(0,jsx_runtime.jsx)(Modal.A,{active:!0,headingBackground,title:workflowFromUrl?workflowFromUrl.displayName||"Choose a subject set":"Choose a workflow",titleColor,children:modalContent})}const subjectSetType=(0,prop_types.shape)({displayName:prop_types.string,id:prop_types.string}),workflowType=(0,prop_types.shape)({displayName:prop_types.string,id:prop_types.string});WorkflowMenuModal.propTypes={headingBackground:prop_types.string,subjectSetFromUrl:subjectSetType,titleColor:prop_types.string,workflowFromUrl:workflowType,workflows:(0,prop_types.arrayOf)(workflowType)},WorkflowMenuModal.__docgenInfo={description:"A popup menu which allows you to choose a workflow and optional subject set from the classify page.",methods:[],displayName:"WorkflowMenuModal",props:{headingBackground:{defaultValue:{value:"'brand'",computed:!1},description:"Background colour of the title bar.",type:{name:"custom",raw:"string"},required:!1},titleColor:{defaultValue:{value:"'neutral-6'",computed:!1},description:"text colour of the title bar.",type:{name:"custom",raw:"string"},required:!1},subjectSetFromUrl:{description:"An optional selected subject set. If present, we can jump straight to subject selection.",type:{name:"shape",value:{displayName:{name:"string",required:!1},id:{name:"string",required:!1}}},required:!1},workflowFromUrl:{description:"An optional selected workflow. If present, we jump straight to subject set selecton.",type:{name:"shape",value:{displayName:{name:"string",required:!1},id:{name:"string",required:!1}}},required:!1},workflows:{description:"A list of workflows to use for the menu.",type:{name:"arrayOf",value:{name:"custom",raw:"workflowType"}},required:!1}}};const router={locale:"en",query:{owner:"test-owner",project:"test-project"},prefetch:()=>Promise.resolve()},snapshot={project:{background:{src:"https://panoptes-uploads.zooniverse.org/production/project_background/260e68fd-d3ec-4a94-bb32-43ff91d5579a.jpeg"},description:"Learn about and help document the wonders of nesting Western Bluebirds.",display_name:"Nest Quest Go: Western Bluebirds",slug:"brbcornell/nest-quest-go-western-bluebirds",workflow_description:'Choose your own adventure! There are many ways to engage with this project:  \n      1) "Nest Site": Smartphone-friendly, helps us understand where Western Bluebirds build their nests.  \n      2) "Location": Smartphone-friendly, series of questions on the geographic location of the nest.  \n      3) "Nest Attempt: Smartphone-friendly, for data-entry lovers to record nest attempt data on cards.  \n      4) "Comments": For transcription lovers, we ask you to transcribe all the written comments on the cards.'},user:{loadingState:async_states_default().success,personalization:{projectPreferences:{loadingState:async_states_default().success}}}},store=(0,stores.Ay)(!0,snapshot);(0,mobx_state_tree_module.Nh)(store.user,snapshot.user);const WORKFLOWS=[{completeness:.65,default:!1,displayName:"The Family and the Fishing Net",id:"12345"},{completeness:0,default:!1,displayName:"Games Without Frontiers",id:"7890"},{completeness:.99,default:!1,displayName:"Shock The Monkey",id:"5678"}];const WorkflowMenuModal_stories={title:"Project App / Screens / Classify / Workflow Menu Modal",component:WorkflowMenuModal,decorators:[function StoryContext(Story){return(0,jsx_runtime.jsx)(router_context_shared_runtime.RouterContext.Provider,{value:router,children:(0,jsx_runtime.jsx)(mobxreact_esm.Kq,{store,children:(0,jsx_runtime.jsx)(Story,{})})})}],argTypes:{headingBackground:{control:"color"},titleColor:{control:"color"}},parameters:{docs:{inlineStories:!1}}};function ChooseAWorkflow({headingBackground,titleColor,workflows}){return(0,jsx_runtime.jsx)(WorkflowMenuModal,{headingBackground,titleColor,workflows})}function ChooseASubjectSet({headingBackground,titleColor,workflowFromUrl,workflows}){return(0,jsx_runtime.jsx)(WorkflowMenuModal,{headingBackground,titleColor,workflowFromUrl,workflows})}function ChooseASubject({headingBackground,subjectSetFromUrl,titleColor,workflowFromUrl,workflows}){return(0,jsx_runtime.jsx)(WorkflowMenuModal,{headingBackground,titleColor,subjectSetFromUrl,workflowFromUrl,workflows})}ChooseAWorkflow.args={dark:!1,headingBackground:src.A.global.colors.brand,titleColor:src.A.global.colors["neutral-6"],workflows:[...WORKFLOWS,SubjectSetPicker_mock.K]},ChooseASubjectSet.args={headingBackground:src.A.global.colors.brand,titleColor:src.A.global.colors["neutral-6"],workflowFromUrl:SubjectSetPicker_mock.K,workflows:[...WORKFLOWS,SubjectSetPicker_mock.K]};const indexedSubjectSet=SubjectSetPicker_mock.K.subjectSets[1];indexedSubjectSet.metadata.indexFields="date,name",ChooseASubject.args={headingBackground:src.A.global.colors.brand,subjectSetFromUrl:indexedSubjectSet,titleColor:src.A.global.colors["neutral-6"],workflowFromUrl:SubjectSetPicker_mock.K,workflows:[...WORKFLOWS,SubjectSetPicker_mock.K]};const __namedExportsOrder=["ChooseAWorkflow","ChooseASubjectSet","ChooseASubject"]},"./src/shared/components/SubjectPicker/SubjectPicker.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>SubjectPicker});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),PlainButton=__webpack_require__("../lib-react-components/dist/esm/PlainButton/PlainButton.js"),SpacedText=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),debounce=__webpack_require__("../../node_modules/lodash/debounce.js"),debounce_default=__webpack_require__.n(debounce),next_link=__webpack_require__("../../node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Heading=__webpack_require__("../../node_modules/grommet/es6/components/Heading/Heading.js"),DataTable=__webpack_require__("../../node_modules/grommet/es6/components/DataTable/DataTable.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),es=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"),addQueryParams=__webpack_require__("./src/helpers/addQueryParams/addQueryParams.js"),src=__webpack_require__("../lib-panoptes-js/src/index.js"),auth=__webpack_require__("../../node_modules/panoptes-client/lib/auth.js"),auth_default=__webpack_require__.n(auth),logToSentry=__webpack_require__("./src/helpers/logger/logToSentry.js"),console=__webpack_require__("../../node_modules/console-browserify/index.js");async function checkRetiredStatus(ids,workflow){const authorization=`Bearer ${await auth_default().checkBearerToken()}`,workflow_id=workflow.id,retirementStatuses={};try{const response=await src.bB.get("/subjects/selection",{env:src._K,ids,workflow_id},{authorization}),{subjects}=response.body;subjects.forEach(subject=>{const alreadySeen=subject.already_seen?"SubjectPicker.alreadySeen":"SubjectPicker.unclassified";retirementStatuses[subject.id]=subject.retired?"SubjectPicker.retired":alreadySeen})}catch(error){console.error(error),(0,logToSentry.A)(error)}return retirementStatuses}var Anchor=__webpack_require__("../../node_modules/grommet/es6/components/Anchor/Anchor.js");function slugify(string){return string.toLowerCase().trim().replace(/[^\w\s_]/g,"").replace(/[\s_-]+/g,"_").replace(/^_+|_+$/g,"")}function NoPrefetchLink(props){return(0,jsx_runtime.jsx)(link_default(),{prefetch:!1,...props})}function columns(customHeaders,baseUrl){return["subject_id",...customHeaders,"status"].map(header=>{let render;return"subject_id"===header&&(render=datum=>function subjectLink({subject_id},baseUrl){const href=(0,addQueryParams.A)(`${baseUrl}/subject/${subject_id}`);return(0,jsx_runtime.jsx)(Anchor.M,{as:NoPrefetchLink,href,children:(0,jsx_runtime.jsx)(SpacedText.A,{children:subject_id})})}(datum,baseUrl)),{align:"start",header,primary:"subject_id"===header,property:slugify(header),render,search:customHeaders.includes(header),size:"status"===header?"xsmall":"small",sortable:!0}})}let t,t1,t2,_=t=>t;const StyledBox=(0,styled_components_browser_esm.default)(Box.a)(t||(t=_`
  min-height: 30px;
`)),StyledHeading=(0,styled_components_browser_esm.default)(Heading.D)(t1||(t1=_`
  line-height: 100%;
`)),SubjectDataTable=(0,styled_components_browser_esm.default)(DataTable.b)(t2||(t2=_`
  button {
    padding: 0;
  }
  thead th {
    background: ${0};
    padding: ${0}
  }
  th button {
    color: ${0};
    font-weight: bold;
    text-transform: uppercase;
  }
  th svg {
    stroke: ${0};
  }
`),props=>props.theme.global.colors[props.background.header],props=>props.theme.global.edgeSize[props.pad.header],props=>props.theme.global.colors["dark-1"],props=>props.theme.global.colors["dark-1"]);function SubjectPicker({baseUrl,subjectSet,workflow}){const{t}=(0,es.Bd)("components"),[rows,setRows]=(0,react.useState)([]),[query,setQuery]=(0,react.useState)(""),[isFetching,setIsFetching]=(0,react.useState)(!1),[sortField,setSortField]=(0,react.useState)("priority"),[sortOrder,setSortOrder]=(0,react.useState)("asc"),{indexFields}=subjectSet.metadata,customHeaders=indexFields.split(",");rows.forEach(row=>{row.status=t(row.status)}),(0,react.useEffect)(function onChange(){!async function fetchSubjectData(){setIsFetching(!0);const subjects=await async function fetchSubjects(subjectSetID,query="",sortField="priority",sortOrder="asc"){const url=`https://subject-set-search-api.zooniverse.org/subjects/${subjectSetID}.json?${query}&${"asc".localeCompare(sortOrder)?"_sort_desc":"_sort"}=${sortField}`,response=await fetch(url,{mode:"cors"}),{columns,rows}=await response.json();return rows.map(row=>{const subject={};return columns.forEach((column,index)=>{subject[slugify(column)]=row[index]}),subject.status="loading",subject})}(subjectSet.id,query,sortField,sortOrder),newRows=await async function fetchStatuses(subjects=[],workflow,page_size=10){const newRows=[],pages=Math.ceil(subjects.length/page_size);for(let page=0;page<pages;page++){const start=page*page_size,end=(page+1)*page_size,subject_ids=subjects.slice(start,end).map(row=>row.subject_id).join(","),statuses=await checkRetiredStatus(subject_ids,workflow);Object.entries(statuses).forEach(([subjectID,subjectStatus])=>{const subject=subjects.find(subject=>subject.subject_id===parseInt(subjectID));subject&&(subject.status=subjectStatus,newRows.push(subject))})}return newRows}(subjects,workflow,10);setRows(newRows),setIsFetching(!1)}()},[query,sortField,sortOrder,subjectSet.id,workflow]);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PlainButton.Ay,{forwardedAs:link_default(),href:(0,addQueryParams.A)(baseUrl),text:t("SubjectPicker.back")}),(0,jsx_runtime.jsx)(StyledHeading,{level:3,margin:{top:"xsmall",bottom:"none"},children:t("SubjectPicker.heading")}),(0,jsx_runtime.jsx)(Paragraph.f,{margin:{top:"15px",bottom:"medium"},children:t("SubjectPicker.byline")}),(0,jsx_runtime.jsx)(StyledBox,{background:"brand",fill:!0,pad:{top:"5px",bottom:"none",horizontal:"none"},children:(0,jsx_runtime.jsx)(Paragraph.f,{color:"white",margin:"none",textAlign:"center",children:(0,jsx_runtime.jsx)(SpacedText.A,{margin:"medium",weight:"bold",children:subjectSet.display_name})})}),(0,jsx_runtime.jsx)(SubjectDataTable,{background:{header:"accent-2",body:["white","light-1"]},columns:columns(customHeaders,`${baseUrl}/subject-set/${subjectSet.id}`),data:rows,fill:!0,onSearch:debounce_default()(function search(data){const query=function searchParams(data){let query=[];return Object.entries(data).forEach(([key,value])=>{""!==value&&query.push(`${key}__contains=${encodeURIComponent(value)}`)}),query.join("&")}(data);setQuery(query)},500),onSort:function sort(data){const{property:sortField,direction:sortOrder}=data;return"status"===sortField||(setRows([]),setSortField(sortField),setSortOrder(sortOrder)),!0},pad:{header:"xsmall",body:"xsmall"},pin:!0,replace:!0,sortable:!0,step:10}),isFetching&&(0,jsx_runtime.jsx)(Paragraph.f,{textAlign:"center",children:t("SubjectPicker.fetching")})]})}SubjectPicker.propTypes={baseUrl:prop_types.string.isRequired,subjectSet:(0,prop_types.shape)({completeness:prop_types.number,display_name:prop_types.string,id:prop_types.string,subjects:prop_types.array}),workflow:(0,prop_types.shape)({completeness:prop_types.number,default:prop_types.bool,display_name:prop_types.string,id:prop_types.string,subjectSets:prop_types.array}).isRequired},SubjectPicker.__docgenInfo={description:"",methods:[],displayName:"SubjectPicker",props:{baseUrl:{description:"Base URL for links eg. `/${owner}/${project}/classify/workflow/${workflow.id}`",type:{name:"string"},required:!0},subjectSet:{description:"The selected subject set.",type:{name:"shape",value:{completeness:{name:"number",required:!1},display_name:{name:"string",required:!1},id:{name:"string",required:!1},subjects:{name:"array",required:!1}}},required:!1},workflow:{description:"The selected workflow.",type:{name:"shape",value:{completeness:{name:"number",required:!1},default:{name:"bool",required:!1},display_name:{name:"string",required:!1},id:{name:"string",required:!1},subjectSets:{name:"array",required:!1}}},required:!0}}}},"./src/shared/components/SubjectSetPicker/SubjectSetPicker.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>SubjectSetPicker_SubjectSetPicker});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),PlainButton=__webpack_require__("../lib-react-components/dist/esm/PlainButton/PlainButton.js"),Heading=__webpack_require__("../../node_modules/grommet/es6/components/Heading/Heading.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Grid=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),Anchor=__webpack_require__("../../node_modules/grommet/es6/components/Anchor/Anchor.js"),next_link=__webpack_require__("../../node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),es=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"),addQueryParams=__webpack_require__("./src/helpers/addQueryParams/addQueryParams.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),SpacedText=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),Image=__webpack_require__("../../node_modules/grommet/es6/components/Image/Image.js"),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js");let t,t1,_=t=>t;const PossiblyTransparentBox=(0,styled_components_browser_esm.default)(Box.a)(t1||(t1=_`
  ${0}
`),props=>(0,styled_components_browser_esm.css)(t||(t=_`opacity: ${0};`),props.isComplete?"0.5":"1.0"));function SubjectSetCard({completeness=0,display_name,id,set_member_subjects_count,subjects=[]}){const{t}=(0,es.Bd)("components"),[subject]=subjects,subjectURLs=subject?subject.locations.map(location=>Object.values(location)[0]):[],alt=subject?`Subject ${subject.id}`:"Loading",percentComplete=parseInt(100*completeness),isComplete=completeness>=1,placeholder=(0,jsx_runtime.jsx)(Image._,{alt:"",height:358,role:"presentation",src:"https://static.zooniverse.org/fem-assets/subject-placeholder.jpg",width:500});return(0,jsx_runtime.jsxs)(Box.a,{className:"subject-set-card","data-testid":`subject-set-card-${id}`,background:"neutral-6",border:"all",children:[(0,jsx_runtime.jsx)(PossiblyTransparentBox,{align:"center",height:"100px",isComplete,overflow:"hidden",width:"100%",children:(0,jsx_runtime.jsx)(Media.A,{alt,height:700,placeholder,src:subjectURLs[0],width:700})}),(0,jsx_runtime.jsxs)(PossiblyTransparentBox,{isComplete,pad:"small",children:[isComplete&&(0,jsx_runtime.jsx)(SpacedText.A,{weight:"normal",children:t("SubjectSetPicker.SubjectSetCard.isComplete")}),(0,jsx_runtime.jsx)(SpacedText.A,{truncate:!0,weight:"bold",children:display_name}),(0,jsx_runtime.jsxs)(Paragraph.f,{margin:{top:"small",bottom:"none",horizontal:"none"},children:[(0,jsx_runtime.jsx)(Text.E,{weight:"normal",children:`${set_member_subjects_count} subjects`}),(0,jsx_runtime.jsx)("br",{}),!isComplete&&(0,jsx_runtime.jsxs)(Text.E,{weight:"normal",children:[percentComplete,"% complete"]})]})]})]})}SubjectSetCard.propTypes={availableSubjects:prop_types.number.isRequired,display_name:prop_types.string.isRequired,id:prop_types.string.isRequired,set_member_subjects_count:prop_types.number.isRequired,subjects:prop_types.array};const SubjectSetCard_SubjectSetCard=SubjectSetCard;SubjectSetCard.__docgenInfo={description:"Summary card for a subject set, showing a preview subject, the set name, total subject count and completeness percentage.",methods:[],displayName:"SubjectSetCard",props:{completeness:{defaultValue:{value:"0",computed:!1},required:!1},subjects:{defaultValue:{value:"[]",computed:!1},description:"Preview subjects. Used to show a preview image.",type:{name:"custom",raw:"array"},required:!1},availableSubjects:{description:"The number of subjects available to be classified.",type:{name:"number"},required:!0},display_name:{description:"Subject set title.",type:{name:"string"},required:!0},id:{description:"Subject set ID.",type:{name:"string"},required:!0},set_member_subjects_count:{description:"Total subject count",type:{name:"number"},required:!0}}};let SubjectSetPicker_t;function NoPrefetchLink(props){return(0,jsx_runtime.jsx)(link_default(),{prefetch:!1,...props})}const StyledHeading=(0,styled_components_browser_esm.default)(Heading.D)(SubjectSetPicker_t||(SubjectSetPicker_t=(t=>t)`
  line-height: 100%;
`));function SubjectSetPicker({baseUrl,workflow}){const{t}=(0,es.Bd)("components"),columns=Math.floor(window.innerWidth/240),sortedSubjectSets=(null==workflow?void 0:workflow.subjectSets)?[...null==workflow?void 0:workflow.subjectSets]:[];return sortedSubjectSets.sort((a,b)=>{const aCompleteness=a.completeness[workflow.id]||0,bCompleteness=b.completeness[workflow.id]||0;return aCompleteness>=1===bCompleteness>=1?0:aCompleteness-bCompleteness}),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(PlainButton.Ay,{forwardedAs:link_default(),href:(0,addQueryParams.A)(baseUrl),text:t("SubjectSetPicker.back")}),(0,jsx_runtime.jsx)(StyledHeading,{level:3,margin:{top:"xsmall",bottom:"none"},children:t("SubjectSetPicker.heading")}),(0,jsx_runtime.jsx)(Paragraph.f,{margin:{top:"15px",bottom:"medium"},children:t("SubjectSetPicker.byline")}),(0,jsx_runtime.jsx)(Box.a,{background:"light-1",border:{color:"light-5",size:"xsmall"},overflow:"scroll",children:(0,jsx_runtime.jsx)(Grid.x,{alignContent:"stretch",columns:[`repeat(${columns}, minmax(200px, 1fr))`],gap:"small",pad:"medium",children:sortedSubjectSets.map(subjectSet=>{const href=`${baseUrl}/workflow/${workflow.id}/subject-set/${subjectSet.id}`,panoptesCompleteness=subjectSet.completeness[workflow.id];return(0,jsx_runtime.jsx)(Anchor.M,{as:NoPrefetchLink,href:(0,addQueryParams.A)(href),className:"test-subject-set-card","data-testid":`test-subject-set-card-${subjectSet.id}`,children:(0,jsx_runtime.jsx)(SubjectSetCard_SubjectSetCard,{...subjectSet,completeness:panoptesCompleteness})},subjectSet.id)})})})]})}SubjectSetPicker.propTypes={baseUrl:prop_types.string.isRequired,workflow:(0,prop_types.shape)({completeness:prop_types.number,default:prop_types.bool,display_name:prop_types.string,id:prop_types.string,subjectSets:prop_types.array}).isRequired};const SubjectSetPicker_SubjectSetPicker=SubjectSetPicker;SubjectSetPicker.__docgenInfo={description:"Display a list of subject set cards for a workflow. Each card links to the corresponding subject set ID.",methods:[],displayName:"SubjectSetPicker",props:{baseUrl:{description:"Base URL for links eg. `/${owner}/${project}/classify`",type:{name:"string"},required:!0},workflow:{description:"The selected workflow.",type:{name:"shape",value:{completeness:{name:"number",required:!1},default:{name:"bool",required:!1},display_name:{name:"string",required:!1},id:{name:"string",required:!1},subjectSets:{name:"array",required:!1}}},required:!0}}}},"./src/shared/components/SubjectSetPicker/SubjectSetPicker.mock.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{J:()=>SubjectSetPickerBaseURL,K:()=>mockWorkflow});const mockWorkflow={completeness:.37,displayName:"Question Workflow (grouped)",grouped:!0,id:"15652",subjectSets:[{id:"85771",completeness:{15652:1},display_name:"Ultraman Series",set_member_subjects_count:6,metadata:{},created_at:"2020-07-09T20:46:19.450Z",updated_at:"2020-07-09T20:49:20.519Z",href:"/subject_sets/85771",links:{project:"12754",workflows:["16106","16099","16025","15764","15652","15651"]},subjects:[{id:"47696316",metadata:{Filename:"ultraman-x.png"},locations:[{"image/png":"https://panoptes-uploads.zooniverse.org/production/subject_location/78964ce7-72db-4607-b493-63626738cf4e.png"}],zooniverse_id:null,external_id:null,created_at:"2020-07-09T20:47:07.128Z",updated_at:"2020-07-09T20:47:07.128Z",href:"/subjects/47696316",links:{project:"12754",collections:[],subject_sets:["85771"],set_member_subjects:["80512512"]}}]},{id:"85772",completeness:{15652:0},display_name:"Transformers Series",set_member_subjects_count:4,metadata:{},created_at:"2020-07-09T20:52:23.204Z",updated_at:"2020-07-09T20:55:34.488Z",href:"/subject_sets/85772",links:{project:"12754",workflows:["16106","16099","16025","15764","15651","15652"]},subjects:[{id:"47696724",metadata:{Filename:"transformers-starscream.jpg"},locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/420f4744-8290-46db-b452-e8823acaaed6.jpeg"}],zooniverse_id:null,external_id:null,created_at:"2020-07-09T20:52:47.347Z",updated_at:"2020-07-09T20:52:47.347Z",href:"/subjects/47696724",links:{project:"12754",collections:[],subject_sets:["85772"],set_member_subjects:["80512523"]}}]},{id:"85773",completeness:{15652:.67},display_name:"Overwatch Series",set_member_subjects_count:9,metadata:{},created_at:"2020-07-09T22:04:28.884Z",updated_at:"2020-07-09T22:16:02.497Z",href:"/subject_sets/85773",links:{project:"12754",workflows:["16106","16099","16025","15764","15651","15652"]},subjects:[{id:"47698131",metadata:{Filename:"overwatch-wrecking-ball.jpg"},locations:[{"image/jpeg":"https://panoptes-uploads.zooniverse.org/production/subject_location/9f9e4225-12f0-4b1b-8c8e-1acb6ed84067.jpeg"}],zooniverse_id:null,external_id:null,created_at:"2020-07-09T22:16:01.601Z",updated_at:"2020-07-09T22:16:01.601Z",href:"/subjects/47698131",links:{project:"12754",collections:[],subject_sets:["85773"],set_member_subjects:["80516400"]}}]}]},SubjectSetPickerBaseURL="/projects/test-owner/test-project/classify"},"./src/shared/components/WorkflowSelector/WorkflowSelector.jsx"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>WorkflowSelector_WorkflowSelector});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),SpacedText=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),Markdownz=__webpack_require__("../lib-react-components/dist/esm/Markdownz/Markdownz.js"),Loader=__webpack_require__("../lib-react-components/dist/esm/Loader/Loader.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),es=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"),withThemeContext=__webpack_require__("../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Next=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Next.js"),next_link=__webpack_require__("../../node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),next_router=__webpack_require__("../../node_modules/next/router.js"),addQueryParams=__webpack_require__("./src/helpers/addQueryParams/addQueryParams.js"),utils=__webpack_require__("../../node_modules/grommet/utils/index.js"),polished_esm=__webpack_require__("../../node_modules/polished/dist/polished.esm.js");function overlay(source){var overlay=arguments.length>1&&void 0!==arguments[1]?arguments[1]:76,value=source<128?2*overlay*source/255:255-2*(255-overlay)*(255-source)/255;return Math.round(value)}const getGradientShade_getGradientShade=function getGradientShade(hex){var color=(0,polished_esm.kN)(hex);return color.red=overlay(color.red),color.green=overlay(color.green),color.blue=overlay(color.blue),(0,polished_esm.Qh)(color)};var styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js");let t,_=t=>t;const WorkflowSelectButton_theme={button:{border:{color:"accent-2",width:"1px"},color:"black",primary:{color:{dark:"dark-3",light:"neutral-2"}},extend:props=>{const{theme:{global:{colors}},completeness}=props,color=(0,utils.normalizeColor)(colors["neutral-2"],props.theme),secondaryColor=getGradientShade_getGradientShade(color),percentComplete=`${completeness}%`,progressGradient=[`${colors["accent-2"]} ${percentComplete}`,`transparent ${percentComplete}`].join(",");return(0,styled_components_browser_esm.css)(t||(t=_`
        background: ${0};
        box-shadow: 0px 2px 6px rgba(0, 0, 0, .3);
        position: relative;
        text-align: left;
        transition-property: color, border-color, box-shadow;
        width: 100%;
        max-width: 350px;

        > div {
          justify-content: space-between;
        }
        &:disabled {
          cursor: not-allowed;
        }
        &:focus:not(:disabled),
        &:hover:not(:disabled) {
          background: linear-gradient(${0}, ${0});
          box-shadow: 0px 2px 14px rgba(0, 0, 0, .3);
        }
        &:active:not(:disabled) {
          background: linear-gradient(${0}, ${0});
        }
        &:before {
          content: "";
          width: 100%;
          position: absolute;
          height: 5px;
          background: linear-gradient(to right, ${0});
          top: 0;
          left: 0;
        }
    `),color,color,secondaryColor,secondaryColor,color,progressGradient)}}},ThemedButton=(0,withThemeContext.A)(Button.$,WorkflowSelectButton_theme);function WorkflowSelectButton({disabled=!1,router,workflow,...rest}){var _router_query,_router_query1;const{t}=(0,es.Bd)("components"),nextRouter=(0,next_router.useRouter)(),url=`/${null==(router=router||nextRouter)||null===(_router_query=router.query)||void 0===_router_query?void 0:_router_query.owner}/${null==router||null===(_router_query1=router.query)||void 0===_router_query1?void 0:_router_query1.project}/classify/workflow/${workflow.id}`,href=(0,addQueryParams.A)(url),completeness=parseInt(100*workflow.completeness,10);let workflowStatus=workflow.grouped?t("WorkflowSelector.WorkflowSelectButton.setSelection"):"";workflowStatus=workflow.hasIndexedSubjects?t("WorkflowSelector.WorkflowSelectButton.subjectSelection"):workflowStatus;const label=(0,jsx_runtime.jsxs)("span",{children:[(0,jsx_runtime.jsxs)(SpacedText.A,{size:"10px",children:[t("WorkflowSelector.WorkflowSelectButton.complete",{completeness}),workflowStatus&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["Â·",workflowStatus]})]}),(0,jsx_runtime.jsx)("br",{}),workflow.displayName]});return href&&disabled?(0,jsx_runtime.jsx)(ThemedButton,{completeness,disabled,icon:(0,jsx_runtime.jsx)(Next.k,{size:"15px"}),reverse:!0,label,primary:!0,...rest}):(0,jsx_runtime.jsx)(ThemedButton,{as:link_default(),href,completeness,icon:(0,jsx_runtime.jsx)(Next.k,{size:"15px"}),reverse:!0,label,primary:!0,...rest})}WorkflowSelectButton.propTypes={disabled:prop_types.bool,router:(0,prop_types.shape)({query:(0,prop_types.shape)({owner:prop_types.string,project:prop_types.string})}),theme:prop_types.object,workflow:(0,prop_types.shape)({completeness:prop_types.number,default:prop_types.bool,displayName:prop_types.string.isRequired,grouped:prop_types.bool,id:prop_types.string}).isRequired};const WorkflowSelectButton_WorkflowSelectButton=WorkflowSelectButton;WorkflowSelectButton.__docgenInfo={description:"",methods:[],displayName:"WorkflowSelectButton",props:{disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},router:{description:"Optional custom router. Overrides the default NextJS.\n    Useful for mocking the router in stories and shallow tests.",type:{name:"shape",value:{query:{name:"shape",value:{owner:{name:"string",required:!1},project:{name:"string",required:!1}},required:!1}}},required:!1},theme:{description:"",type:{name:"custom",raw:"object"},required:!1},workflow:{description:"",type:{name:"shape",value:{completeness:{name:"number",required:!1},default:{name:"bool",required:!1},displayName:{name:"string",required:!0},grouped:{name:"bool",required:!1},id:{name:"string",required:!1}}},required:!0}}};var src=__webpack_require__("../lib-panoptes-js/src/index.js"),index=__webpack_require__("../../node_modules/swr/dist/index/index.mjs");const SWRoptions={revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:0};async function fetchAssignedWorkflow({fields="configuration",assignedWorkflowID}){var _response_body_workflows;const query={fields,id:assignedWorkflowID},response=await src.bB.get("/workflows",query);if(response.ok&&(null===(_response_body_workflows=response.body.workflows)||void 0===_response_body_workflows?void 0:_response_body_workflows.length)){var _fetchedWorkflow_configuration;const fetchedWorkflow=response.body.workflows[0];return parseInt(null==fetchedWorkflow||null===(_fetchedWorkflow_configuration=fetchedWorkflow.configuration)||void 0===_fetchedWorkflow_configuration?void 0:_fetchedWorkflow_configuration.level,10)}return 1}const hooks_useAssignedLevel=function useAssignedLevel(assignedWorkflowID,workflows=[]){var _existingWorkflow_configuration;const existingWorkflow=workflows.find(workflow=>workflow.id===assignedWorkflowID),defaultWorkflowLevel=(null==existingWorkflow||null===(_existingWorkflow_configuration=existingWorkflow.configuration)||void 0===_existingWorkflow_configuration?void 0:_existingWorkflow_configuration.level)?parseInt(existingWorkflow.configuration.level,10):1,key=!existingWorkflow&&assignedWorkflowID?{assignedWorkflowID}:null,{data:fetchedWorkflowLevel}=(0,index.Ay)(key,fetchAssignedWorkflow,SWRoptions);return fetchedWorkflowLevel||defaultWorkflowLevel};function LevelingUpButtons({assignedWorkflowID="",workflows=[]}){const{t}=(0,es.Bd)("components"),assignedWorkflowLevel=hooks_useAssignedLevel(assignedWorkflowID,workflows),filteredWorkflowsByLevel={allowed:[],disallowed:[]};return assignedWorkflowLevel?workflows.forEach(workflow=>{const workflowLevel=workflow.configuration.level;workflowLevel&&(workflowLevel<=assignedWorkflowLevel?filteredWorkflowsByLevel.allowed.push(workflow):filteredWorkflowsByLevel.disallowed.push(workflow))}):workflows.forEach(workflow=>{const workflowLevel=workflow.configuration.level;"1"===workflowLevel?filteredWorkflowsByLevel.allowed.push(workflow):workflowLevel&&filteredWorkflowsByLevel.disallowed.push(workflow)}),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)(Box.a,{alignSelf:"start",fill:"horizontal",margin:{top:"small"},width:{max:"medium"},children:[(0,jsx_runtime.jsx)(SpacedText.A,{children:t("WorkflowSelector.WorkflowSelectButtons.unlocked")}),(0,jsx_runtime.jsx)(Box.a,{as:"ul",pad:"0",gap:"10px",style:{listStyle:"none"},children:filteredWorkflowsByLevel.allowed.map(workflow=>(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)(WorkflowSelectButton_WorkflowSelectButton,{workflow})},workflow.id))})]}),(0,jsx_runtime.jsxs)(Box.a,{alignSelf:"start",fill:"horizontal",gap:"xsmall",margin:{top:"small"},width:{max:"medium"},children:[(0,jsx_runtime.jsx)(SpacedText.A,{children:t("WorkflowSelector.WorkflowSelectButtons.locked")}),(0,jsx_runtime.jsx)(Box.a,{as:"ul",pad:"0",gap:"10px",style:{listStyle:"none"},children:filteredWorkflowsByLevel.disallowed.map(workflow=>(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)(WorkflowSelectButton_WorkflowSelectButton,{disabled:!0,workflow})},workflow.id))})]})]})}const WorkflowSelectButtons_LevelingUpButtons=LevelingUpButtons;function WorkflowSelectButtons({assignedWorkflowID="",workflowAssignmentEnabled=!1,workflows=[]}){return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:workflowAssignmentEnabled?(0,jsx_runtime.jsx)(WorkflowSelectButtons_LevelingUpButtons,{assignedWorkflowID,workflows}):(0,jsx_runtime.jsx)(Box.a,{alignSelf:"start",as:"ul",gap:"10px",fill:"horizontal",margin:{top:"small"},pad:"0",style:{listStyle:"none"},width:{max:"medium"},children:workflows.map(workflow=>(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsx)(WorkflowSelectButton_WorkflowSelectButton,{workflow})},workflow.id))})})}LevelingUpButtons.__docgenInfo={description:"",methods:[],displayName:"LevelingUpButtons",props:{assignedWorkflowID:{defaultValue:{value:"''",computed:!1},required:!1},workflows:{defaultValue:{value:"[]",computed:!1},required:!1}}},WorkflowSelectButtons.propTypes={assignedWorkflowID:prop_types.string,workflowAssignmentEnabled:prop_types.bool,workflows:(0,prop_types.arrayOf)(prop_types.object)};const WorkflowSelectButtons_WorkflowSelectButtons=WorkflowSelectButtons;WorkflowSelectButtons.__docgenInfo={description:"",methods:[],displayName:"WorkflowSelectButtons",props:{assignedWorkflowID:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"custom",raw:"string"},required:!1},workflowAssignmentEnabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"custom",raw:"bool"},required:!1},workflows:{defaultValue:{value:"[]",computed:!1},description:"",type:{name:"arrayOf",value:{name:"object"}},required:!1}}};const markdownzComponents={p:nodeProps=>(0,jsx_runtime.jsx)(Paragraph.f,{...nodeProps,margin:"none"})};function WorkflowSelector({assignedWorkflowID="",uppLoaded=!1,userReadyState,workflowAssignmentEnabled=!1,workflowDescription="",workflows}){const{t}=(0,es.Bd)("components"),workflowDescriptionToRender=workflowDescription||t("WorkflowSelector.message");return(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(SpacedText.A,{weight:"bold",margin:{bottom:"xsmall"},children:t("WorkflowSelector.getStarted")}),(0,jsx_runtime.jsx)(Markdownz.Ay,{components:markdownzComponents,children:workflowDescriptionToRender}),userReadyState===async_states_default().error&&(0,jsx_runtime.jsx)(Box.a,{align:"center",justify:"center",margin:{top:"small"},children:t("WorkflowSelector.error")}),userReadyState===async_states_default().success&&uppLoaded&&(0,jsx_runtime.jsxs)(Box.a,{alignSelf:"start",fill:"horizontal",gap:"xsmall",margin:{top:"small"},width:{max:"medium"},flex:"grow",children:[(0,jsx_runtime.jsx)(WorkflowSelectButtons_WorkflowSelectButtons,{assignedWorkflowID,workflowAssignmentEnabled,workflows}),0===workflows.length&&(0,jsx_runtime.jsx)(Box.a,{background:"accent-2",pad:"xsmall",width:{max:"medium"},children:(0,jsx_runtime.jsx)(Text.E,{size:"small",textAlign:"center",children:t("WorkflowSelector.noWorkflows")})})]}),[async_states_default().initialized,async_states_default().loading].includes(userReadyState)&&(0,jsx_runtime.jsx)(Box.a,{pad:{top:"small"},width:"100%",align:"center",children:(0,jsx_runtime.jsx)(Loader.A,{width:"38px",height:"40px"})})]})}WorkflowSelector.propTypes={assignedWorkflowID:prop_types.string,uppLoaded:prop_types.bool,userReadyState:prop_types.string,workflowAssignmentEnabled:prop_types.bool,workflowDescription:prop_types.string,workflows:(0,prop_types.arrayOf)((0,prop_types.shape)({id:prop_types.string.isRequired}).isRequired).isRequired};const WorkflowSelector_WorkflowSelector=WorkflowSelector;WorkflowSelector.__docgenInfo={description:"",methods:[],displayName:"WorkflowSelector",props:{assignedWorkflowID:{defaultValue:{value:"''",computed:!1},description:"assigned workflow for projects that use workflow assignment.",type:{name:"custom",raw:"string"},required:!1},uppLoaded:{defaultValue:{value:"false",computed:!1},description:"Have the user project preferences loaded?",type:{name:"custom",raw:"bool"},required:!1},workflowAssignmentEnabled:{defaultValue:{value:"false",computed:!1},description:"True if this project assigns workflows to volunteers.",type:{name:"custom",raw:"bool"},required:!1},workflowDescription:{defaultValue:{value:"''",computed:!1},description:"Localised workflow description for the project.",type:{name:"custom",raw:"string"},required:!1},userReadyState:{description:"User loading state",type:{name:"custom",raw:"string"},required:!1},workflows:{description:"Summaries of active workflows with workflow name, completeness etc.",type:{name:"arrayOf",value:{name:"shape",value:{id:{name:"string",required:!0}}}},required:!0}}}},"./src/shared/components/WorkflowSelector/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>WorkflowSelector_WorkflowSelectorConnector});var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),react=__webpack_require__("../../node_modules/react/index.js"),WorkflowSelector=__webpack_require__("./src/shared/components/WorkflowSelector/WorkflowSelector.jsx");function WorkflowSelectorConnector({mockStore,...props}){const{uppLoaded,uppSettings,userReadyState,workflowAssignmentEnabled=!1,workflowDescription}=function useStores(mockStore){const stores=(0,react.useContext)(mobxreact_esm.Db),store=mockStore||stores.store;return{uppLoaded:store.user.personalization.projectPreferences.isLoaded,uppSettings:store.user.personalization.projectPreferences.settings,userReadyState:store.user.loadingState,workflowAssignmentEnabled:store.project.experimental_tools.includes("workflow assignment"),workflowDescription:store.project.workflow_description}}(mockStore),assignedWorkflowID=(null==uppSettings?void 0:uppSettings.workflow_id)||"";return(0,jsx_runtime.jsx)(WorkflowSelector.A,{assignedWorkflowID,uppLoaded,userReadyState,workflowAssignmentEnabled,workflowDescription,...props})}const WorkflowSelector_WorkflowSelectorConnector=(0,mobxreact_esm.PA)(WorkflowSelectorConnector);WorkflowSelectorConnector.__docgenInfo={description:"",methods:[],displayName:"WorkflowSelectorConnector"}},"./stores/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>stores_initStore});var mobx_state_tree_module=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),src=__webpack_require__("../lib-panoptes-js/src/index.js"),Store=__webpack_require__("./stores/Store.js"),console=__webpack_require__("../../node_modules/console-browserify/index.js");let store=null;const defaultClient={collections:src._f,panoptes:src.bB,projects:src.dt};const stores_initStore=function initStore(isServer,snapshot=null,client=defaultClient){if(isServer){const initialState=snapshot||{};return store=Store.A.create(initialState,{client}),store}if(null===store){const userKey="panoptes-user",initialState=snapshot||{};return window.sessionStorage&&(initialState.user=function loadSnapshot(storageKey,storage){try{const stringData=storage.getItem(storageKey);return JSON.parse(stringData)||{}}catch(error){console.info(`Unable to load ${storageKey}`),console.error(error)}}(userKey,window.sessionStorage)),store=Store.A.create(initialState,{client}),window.sessionStorage&&function persistSnapshots(storageKey,store,storage){const snapshotDisposer=(0,mobx_state_tree_module.aQ)(store,function _saveSnapshot(snapshot){const data=JSON.stringify(snapshot);storage.setItem(storageKey,data)});return(0,mobx_state_tree_module.LF)(store,snapshotDisposer)}(userKey,store.user,window.sessionStorage),store}if(snapshot){const{organization,project}=snapshot;(0,mobx_state_tree_module.Nh)(store.project,project),(null==organization?void 0:organization.id)&&(0,mobx_state_tree_module.Nh)(store.organization,organization)}return store}},"?3310"(){},"?4e1e"(){}}]);
//# sourceMappingURL=screens-ClassifyPage-components-WorkflowMenuModal-WorkflowMenuModal-stories.428b1d43.iframe.bundle.js.map