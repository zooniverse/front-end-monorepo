{"version":3,"file":"components-ProjectHeader-ProjectHeader-stories.7d7c57c5.iframe.bundle.js","mappings":";;;AAkBA;;;;;ACPA;AACA;;ACHA;;;AAGA;;;;;;;AAOA;;ACPA;;AAOA;;;;;;;;AAWA;;ACjBA;;;;;;;;;;;;AAcA;;ACJA;;;;;ACNA;;;AAGA;;;;;AAQA;;;;AAMA;;AAKA;AAVA;AACA;AAKA;AACA;AACA;;AClBA;;;;;;;;AASA;AASA;;AAPA;;;;AAIA;;AAEA;;AAOA","sources":["webpack://@zooniverse/fe-project/./src/components/ProjectHeader/components/ApprovedIcon/ApprovedIcon.jsx","webpack://@zooniverse/fe-project/./src/components/ProjectHeader/components/Avatar/Avatar.jsx","webpack://@zooniverse/fe-project/./src/components/ProjectHeader/components/Background/Background.jsx","webpack://@zooniverse/fe-project/./src/components/ProjectHeader/components/OrganizationLink/OrganizationLink.jsx","webpack://@zooniverse/fe-project/./src/components/ProjectHeader/components/ProjectTitle/ProjectTitle.jsx","webpack://@zooniverse/fe-project/./src/components/ProjectHeader/ProjectHeader.jsx","webpack://@zooniverse/fe-project/./src/components/ProjectHeader/components/DropdownNav/DropdownNav.jsx","webpack://@zooniverse/fe-project/./src/components/ProjectHeader/components/Nav/Nav.jsx"],"sourcesContent":["import { Box } from 'grommet'\nimport { FormCheckmark } from 'grommet-icons'\nimport { observer, MobXProviderContext} from 'mobx-react'\nimport { useContext } from 'react'\nimport { string } from 'prop-types'\nimport styled from 'styled-components'\nimport { useTranslation } from 'next-i18next'\n\nconst StyledBox = styled(Box)`\n  border-radius: 100%;\n  flex-shrink: 0;\n`\n\nfunction useProjectLaunchApproved() {\n  const { store } = useContext(MobXProviderContext)\n  return store.project.launch_approved\n}\n\nfunction ApprovedIcon ({\n  size = 'medium'\n}) {\n  const approved = useProjectLaunchApproved()\n  const { t } = useTranslation('components')\n  if (approved) {\n    return (\n      <StyledBox background='white'>\n        <FormCheckmark\n          aria-label={t('ProjectHeader.ApprovedIcon.title')}\n          color='brand'\n          size={size}\n        />\n      </StyledBox>\n    )\n  }\n\n  return null\n}\n\nApprovedIcon.propTypes = {\n  /** Icon size. Either a Grommet theme t-shirt size or a valid CSS length. */\n  size: string\n}\n\nexport default observer(ApprovedIcon)\n","import { string } from 'prop-types'\nimport { observer, MobXProviderContext} from 'mobx-react'\nimport { useContext } from 'react'\nimport styled, { css } from 'styled-components'\nimport { useTranslation } from 'next-i18next'\n\nconst StyledAvatar = styled.img`\n  border-radius: 100%;\n  box-shadow: 5px 10px 20px rgba(0, 0, 0, 0.22);\n  object-fit: cover;\n  overflow: hidden;\n  ${props => css`width: ${props.width};`}\n`\n\nfunction useProjectAvatar() {\n  const { store } = useContext(MobXProviderContext)\n  return {\n    src: store.project.avatar.src,\n    projectTitle: store.project.display_name\n  }\n}\n\nfunction Avatar({\n  width='80px',\n  ...rest\n}) {\n  const { t } = useTranslation('components')\n  const { src, projectTitle } = useProjectAvatar()\n\n  if (!src) {\n    return null\n  }\n\n  const alt = t('ProjectHeader.Avatar.alt', { project: projectTitle })\n  return (\n    <StyledAvatar alt={alt} src={src} width={width} {...rest} />\n  )\n}\n\nAvatar.propTypes = {\n  /** Avatar size in CSS units. */\n  width: string\n}\n\nexport default observer(Avatar)\n","import { Box } from 'grommet'\nimport { observer, MobXProviderContext } from 'mobx-react'\nimport { useContext } from 'react'\nimport styled, { css } from 'styled-components'\n\nconst BackgroundBox = styled(Box)`\n  position: absolute;\n`\n\nconst BackgroundImage = styled.div`\n  background-blend-mode: multiply;\n  background-color: rgba(0,93,105,0.3);\n  ${props => css`background-image: url(\"${props['data-src']}\");`}\n  background-position: center;\n  background-repeat: no-repeat;\n  background-size: cover;\n  filter: blur(5px) brightness(50%);\n  height: 100%;\n  transform: scale(1.15);\n`\n\nfunction useProjectBackground() {\n  const { store } = useContext(MobXProviderContext)\n  return store.project.background.src\n}\n\nfunction Background() {\n  const backgroundSrc = useProjectBackground()\n  return (\n    <BackgroundBox\n      aria-hidden='true'\n      background='brand'\n      height='100%'\n      overflow='hidden'\n      width='100%'\n    >\n      {backgroundSrc && <BackgroundImage data-src={backgroundSrc} />}\n    </BackgroundBox>\n  )\n}\n\nexport default observer(Background)\n","import { Anchor, Box } from 'grommet'\nimport { string } from 'prop-types'\nimport styled from 'styled-components'\nimport { useTranslation } from 'next-i18next'\nimport { SpacedText } from '@zooniverse/react-components'\n\nconst StyledBox = styled(Box)`\n  position: relative;\n`\n\n/**\n  Link text styles\n*/\nconst StyledSpacedText = styled(SpacedText)`\n  text-shadow: 0 2px 2px rgba(0, 0, 0, 0.22);\n`\n\n/**\n  Link styles\n*/\nconst StyledAnchor = styled(Anchor)`\n  border-bottom: 3px solid transparent;\n  white-space: nowrap;\n\n  &:hover {\n    text-decoration: none;\n    border-bottom: 3px solid white;\n  }\n`\n\nfunction OrganizationLink({\n  slug = '',\n  title = ''\n}) {\n  const { t } = useTranslation('components')\n\n  return (\n    <StyledBox\n      align='baseline'\n      alignSelf='end'\n      direction='row'\n      gap='xsmall'\n      pad={{\n        horizontal: 'medium',\n        top: 'medium'\n      }}\n    >\n      <StyledSpacedText\n        color='light-3'\n      >\n        {t('ProjectHeader.organization')}\n      </StyledSpacedText>\n      <StyledAnchor\n        href={`/organizations/${slug}`}\n      >\n        <StyledSpacedText\n          color='white'\n          weight='bold'\n        >\n          {title}\n        </StyledSpacedText>\n      </StyledAnchor>\n    </StyledBox>\n  )\n}\n\nOrganizationLink.propTypes = {\n  /** The organization slug */\n  slug: string,\n  /** The organization name */\n  title: string\n}\nexport default OrganizationLink\n","import { Anchor, Heading } from 'grommet'\nimport Link from 'next/link'\nimport { useRouter } from 'next/router'\nimport { string } from 'prop-types'\nimport styled from 'styled-components'\nimport { useStores } from '../../hooks'\n\nimport addQueryParams from '@helpers/addQueryParams'\n\nconst StyledHeading = styled(Heading)`\n  text-shadow: 0 2px 2px rgba(0, 0, 0, 0.22);\n`\n\nconst StyledAnchor = styled(Anchor)`\n  border-bottom: 3px solid transparent;\n\n  &:hover {\n    text-decoration: none;\n  }\n  &[href]:hover {\n    border-bottom-color: white;\n  }\n  &:not([href]) {\n    cursor: default;\n  }\n`\n\nfunction ProjectTitle({ textAlign = 'start', title = '' }) {\n  const router = useRouter()\n  const { slug } = useStores()\n  const linkProps = {\n    href: addQueryParams(`/${slug}`)\n  }\n\n  const isCurrentPage = router?.isReady && router?.asPath === linkProps.href\n\n  if (isCurrentPage) {\n    return (\n      <StyledHeading level={1} color='white' margin='0' textAlign={textAlign}>\n        {title}\n      </StyledHeading>\n    )\n  } else {\n    return (\n      <StyledAnchor forwardedAs={Link} {...linkProps}>\n        <StyledHeading level={1} color='white' margin='0' textAlign={textAlign}>\n          {title}\n        </StyledHeading>\n      </StyledAnchor>\n    )\n  }\n}\n\nProjectTitle.propTypes = {\n  /** [Grommet textAlign](https://v2.grommet.io/heading#textAlign) for the heading. */\n  textAlign: string,\n  /** The project name */\n  title: string\n}\nexport default ProjectTitle\n","import { Box } from 'grommet'\nimport { observer } from 'mobx-react'\nimport { bool, string } from 'prop-types'\nimport styled from 'styled-components'\nimport { useResizeDetector } from 'react-resize-detector'\n\nimport {\n  ApprovedIcon,\n  Avatar,\n  Background,\n  DropdownNav,\n  LocaleSwitcher,\n  OrganizationLink,\n  Nav,\n  ProjectTitle,\n  UnderReviewLabel\n} from './components'\nimport { useStores } from './hooks'\n\nconst StyledBox = styled(Box)`\n  position: relative;\n`\n\nfunction ProjectHeader({\n  adminMode = false,\n  className = ''\n}) {\n  const { width, height, ref } = useResizeDetector({\n    refreshMode: 'debounce',\n    refreshRate: 100\n  })\n  const {\n    availableLocales,\n    inBeta,\n    organizationTitle,\n    organizationSlug,\n    title\n  } = useStores()\n  const hasTranslations = availableLocales?.length > 1\n  const maxColumnWidth = hasTranslations ? 1000 : 900\n  const isNarrow = width < maxColumnWidth\n  const direction = width < maxColumnWidth ? 'column' : 'row'\n  const gap = width < maxColumnWidth ? 'small' : 'medium'\n  const useDropdownNav = width < maxColumnWidth + 200\n\n  /** Widths were determined visually and can be updated as needed if ProjectHeader components are refactored */\n  const maxTitleWidth = (hasTranslations && width >= 1200) ? '560px' : '600px'\n\n  return (\n    <StyledBox ref={ref} className={className}>\n      <Background />\n      {(organizationTitle && !useDropdownNav) ? (\n        <OrganizationLink\n          slug={organizationSlug}\n          title={organizationTitle}\n        />\n      ) : null}\n      <StyledBox\n        align='center'\n        direction={direction}\n        justify='between'\n        pad={{\n          bottom: 'medium',\n          horizontal: 'medium',\n          top: (organizationTitle && !useDropdownNav) ? 'none' : 'medium'\n        }}\n      >\n        <Box direction={direction} gap='small'>\n          <Box\n            align='center'\n            direction='row'\n            gap={gap}\n          >\n            <Box\n              align='center'\n              direction={direction}\n              gap='medium'\n            >\n              <Avatar width={isNarrow ? '40px' : '80px'} />\n              <Box align={ isNarrow ? 'center' : 'start' }>\n                <Box\n                  direction='row'\n                  gap='small'\n                  align='center'\n                  width={{ max: maxTitleWidth }}\n                >\n                  <ProjectTitle textAlign={ isNarrow ? 'center' : 'start' } title={title} />\n                  <ApprovedIcon size={isNarrow ? '20px' : 'medium'} />\n                </Box>\n                {inBeta && <UnderReviewLabel />}\n              </Box>\n            </Box>\n          </Box>\n          {hasTranslations && <LocaleSwitcher />}\n        </Box>\n        {useDropdownNav ? (\n          <DropdownNav\n            adminMode={adminMode}\n            margin={ isNarrow ? { top: 'xsmall' } : { top : '0' }}\n            organizationSlug={organizationSlug}\n            organizationTitle={organizationTitle}\n          />\n        ) : (\n          <Nav adminMode={adminMode} />\n        )}\n      </StyledBox>\n    </StyledBox>\n  )\n}\n\nProjectHeader.propTypes = {\n  /** Zooniverse admin mode */\n  adminMode: bool,\n  /** Optional CSS classes */\n  className: string\n}\n\nexport default observer(ProjectHeader)\n","import { SpacedText } from '@zooniverse/react-components'\nimport { Anchor, Box, DropButton } from 'grommet'\nimport { FormDown } from 'grommet-icons'\nimport NavLink from '@shared/components/NavLink'\nimport { bool, object, oneOfType, string } from 'prop-types'\nimport { useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport { useTranslation } from 'next-i18next'\nimport { useRouter } from 'next/router'\n\nimport { useProjectNavigation } from '../../hooks'\n\nconst StyledAnchor = styled(Anchor)`\n  padding: 10px 20px;\n  text-shadow: 0 2px 2px rgba(0, 0, 0, 0.22);\n  &:focus,\n  &:hover {\n    ${props => css`background: ${props.theme.global.colors['neutral-1']};`}\n    text-decoration: none;\n  }\n`\n\n// `tabindex=\"-1\"` is for the button's open state.\nconst StyledDropButton = styled(DropButton)`\n  padding: 10px 10px 10px 15px;\n  border-radius: 2em;\n  color: white;\n\n  ${props => props.isOpen && css`\n    background: ${props.theme.global.colors['accent-1']};\n  `}\n\n  &:focus,\n  &:hover {\n    ${props => css`\n      background: ${props.theme.global.colors['accent-1']};\n      color: ${props.theme.global.colors.brand};\n    `}\n  }\n`\n\nconst defaultMargin = {\n  top: 0\n}\n\nfunction DropdownNav({\n  adminMode = false,\n  className,\n  margin = defaultMargin,\n  organizationSlug = '',\n  organizationTitle = ''\n}) {\n  const { t } = useTranslation('components')\n  const navLinks = useProjectNavigation(adminMode)\n  const [ isOpen, setIsOpen ] = useState(false)\n\n  function onClose() {\n    setIsOpen(false)\n  }\n\n  function onOpen() {\n    setIsOpen(true)\n  }\n\n  function NavItem({ navLink }) {\n    const router = useRouter()\n    let isCurrentPage\n    if (router?.asPath) {\n      const routerPath = router.asPath.split('/')\n      const hrefPath = navLink.href.split('/')\n      /*\n        The path arrays will be ['', owner, project, section, ...rest].\n        The section is always the fourth item.\n      */\n      isCurrentPage = routerPath[3] === hrefPath[3]\n    }\n\n    return (\n      <Box as='li' key={navLink.href}>\n        <NavLink\n          aria-current={isCurrentPage ? 'page' : undefined}\n          color='white'\n          link={navLink}\n          StyledAnchor={StyledAnchor}\n          weight='bold'\n        />\n      </Box>\n    )\n  }\n\n  /* /about and /classify are internal routes in this Next.js app. The rest are not. */\n  const dropContent = (\n    <Box\n      aria-label={t('ProjectHeader.ProjectNav.ariaLabel')}\n      as='nav'\n      background='brand'\n      elevation='medium'\n    >\n      <Box as='ul' pad='0'>\n      {navLinks?.map(navLink => (\n          <NavItem key={navLink.href} navLink={navLink} />\n        ))}\n        {organizationTitle ? (\n          <Box as='li' key={organizationSlug}>\n            <StyledAnchor\n              href={`/organizations/${organizationSlug}`}\n              label={\n                <Box pad='none'>\n                  <SpacedText color='white' size='xsmall'>\n                    {t('ProjectHeader.organization')}\n                  </SpacedText>\n                  <SpacedText color='white' weight='bold'>\n                    {organizationTitle}\n                  </SpacedText>\n                </Box>\n              }\n            />\n          </Box>\n        ) : null}\n      </Box>\n    </Box>\n  )\n\n  return (\n    <StyledDropButton\n      a11yTitle={t('ProjectHeader.exploreProject')}\n      alignSelf='center'\n      className={className}\n      dropContent={dropContent}\n      dropAlign={{ top: 'bottom' }}\n      isOpen={isOpen}\n      margin={margin}\n      onClose={onClose}\n      onOpen={onOpen}\n    >\n      <Box\n        align='center'\n        as='span'\n        direction='row'\n        gap='xsmall'\n        justify='center'\n      >\n        <SpacedText weight='bold' style={{ width: 'max-content' }}>\n          {t('ProjectHeader.exploreProject')}\n        </SpacedText>\n        <FormDown />\n      </Box>\n    </StyledDropButton>\n  )\n}\n\nDropdownNav.propTypes = {\n  /** Zooniverse admin mode */\n  adminMode: bool,\n  /** CSS class */\n  className: string,\n  /** Margin for the dropdown button (Grommet t-shirt size, CSS length or Grommet margin object.) */\n  margin: oneOfType([string, object]),\n  /** Organization slug */\n  organizationSlug: string,\n  /** Organization title */\n  organizationTitle: string\n}\n\nexport default DropdownNav\n// export { DropdownNav, StyledDropButton }\n","import { SpacedText } from '@zooniverse/react-components'\nimport { Anchor, Box } from 'grommet'\nimport { useRouter } from 'next/router'\nimport { bool } from 'prop-types'\nimport styled, { css } from 'styled-components'\nimport { useTranslation } from 'next-i18next'\n\nimport NavLink from '@shared/components/NavLink'\nimport { useProjectNavigation } from '../../hooks'\n\n/**\n  Link text styles\n*/\nconst StyledSpacedText = styled(SpacedText)`\n  text-shadow: 0 2px 2px rgba(0, 0, 0, 0.22);\n`\n\n/**\n  Link styles\n*/\nconst StyledAnchor = styled(Anchor)`\n  border-bottom: 3px solid transparent;\n  border-top: 3px solid transparent; // to help align-items center in nav\n  white-space: nowrap;\n\n  &:hover {\n    text-decoration: none;\n  }\n  ${props => css`\n    &[href]:hover {\n      border-bottom-color: ${props.color};\n    }\n    &[aria-current='page'] {\n      cursor: default;\n      border-bottom-color: ${props.color};\n    }\n  `}\n`\n\nconst StyledList = styled(Box)`\n  padding-inline-start: 0;\n`\n\nfunction NavItem({ navLink }) {\n  const router = useRouter()\n\n  let isCurrentPage\n  if (router?.isReady) {\n    const routerPath = router.asPath.split('/')\n    const hrefPath = navLink.href.split('/')\n    /*\n      Client-side routerPath will be ['', owner, project, section, ...rest].\n      The link hrefPath will be ['', owner, project, section, ...rest].\n      The section is always the fourth item in the array.\n    */\n    isCurrentPage = routerPath[3] === hrefPath[3]\n  }\n\n  return (\n    <Box as='li' key={navLink.href} flex='grow' pad={{ left: 'small' }}>\n      <NavLink\n        aria-current={isCurrentPage ? 'page' : undefined}\n        color='white'\n        link={navLink}\n        StyledAnchor={StyledAnchor}\n        StyledSpacedText={StyledSpacedText}\n        weight='bold'\n      />\n    </Box>\n  )\n}\n\n/* /about and /classify are internal routes in this Next.js app. The rest are not. */\nfunction Nav({ adminMode = false }) {\n  const navLinks = useProjectNavigation(adminMode)\n  const { t } = useTranslation('components')\n  return (\n    <Box aria-label={t('ProjectHeader.ProjectNav.ariaLabel')} as='nav'>\n      <StyledList forwardedAs='ul' direction='row'>\n        {navLinks?.map(navLink => (\n          <NavItem key={navLink.href} navLink={navLink} />\n        ))}\n      </StyledList>\n    </Box>\n  )\n}\n\nNav.propTypes = {\n  /** Zooniverse admin mode */\n  adminMode: bool\n}\n\nexport default Nav\n"],"names":[],"ignoreList":[],"sourceRoot":""}