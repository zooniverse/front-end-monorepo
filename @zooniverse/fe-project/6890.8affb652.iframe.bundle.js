(self.webpackChunk_zooniverse_fe_project=self.webpackChunk_zooniverse_fe_project||[]).push([[6890],{"../../node_modules/markdown-it-imsize/lib/imsize/types sync recursive ^\\.\\/.*$"(module,__unused_webpack_exports,__webpack_require__){var map={"./bmp":"../../node_modules/markdown-it-imsize/lib/imsize/types/bmp.js","./bmp.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/bmp.js","./gif":"../../node_modules/markdown-it-imsize/lib/imsize/types/gif.js","./gif.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/gif.js","./jpg":"../../node_modules/markdown-it-imsize/lib/imsize/types/jpg.js","./jpg.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/jpg.js","./png":"../../node_modules/markdown-it-imsize/lib/imsize/types/png.js","./png.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/png.js","./psd":"../../node_modules/markdown-it-imsize/lib/imsize/types/psd.js","./psd.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/psd.js","./svg":"../../node_modules/markdown-it-imsize/lib/imsize/types/svg.js","./svg.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/svg.js","./tiff":"../../node_modules/markdown-it-imsize/lib/imsize/types/tiff.js","./tiff.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/tiff.js","./webp":"../../node_modules/markdown-it-imsize/lib/imsize/types/webp.js","./webp.js":"../../node_modules/markdown-it-imsize/lib/imsize/types/webp.js"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="../../node_modules/markdown-it-imsize/lib/imsize/types sync recursive ^\\.\\/.*$"},"../lib-async-states/src/async-states.js"(module){"use strict";const asyncStates={};Object.defineProperty(asyncStates,"initialized",{value:"initialized",enumerable:!0}),Object.defineProperty(asyncStates,"loading",{value:"loading",enumerable:!0}),Object.defineProperty(asyncStates,"putting",{value:"putting",enumerable:!0}),Object.defineProperty(asyncStates,"posting",{value:"posting",enumerable:!0}),Object.defineProperty(asyncStates,"success",{value:"success",enumerable:!0}),Object.defineProperty(asyncStates,"error",{value:"error",enumerable:!0}),Object.defineProperty(asyncStates,"values",{value:Object.values(asyncStates)}),module.exports=asyncStates},"../lib-classifier/dist/esm/components/Classifier/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{FlipbookControls:()=>FlipbookControls_FlipbookControls});var marks_namespaceObject={};__webpack_require__.r(marks_namespaceObject),__webpack_require__.d(marks_namespaceObject,{Circle:()=>marks_Circle_Circle,Ellipse:()=>marks_Ellipse_Ellipse,FreehandLine:()=>marks_FreehandLine_FreehandLine,Line:()=>marks_Line_Line,Mark:()=>marks_Mark_Mark,Point:()=>marks_Point_Point,Polygon:()=>marks_Polygon_Polygon,Rectangle:()=>marks_Rectangle_Rectangle,RotateRectangle:()=>marks_RotateRectangle_RotateRectangle,TemporalPoint:()=>TemporalPoint_TemporalPoint,TemporalRotateRectangle:()=>TemporalRotateRectangle_TemporalRotateRectangle,TranscriptionLine:()=>marks_TranscriptionLine_TranscriptionLine});var tools_namespaceObject={};__webpack_require__.r(tools_namespaceObject),__webpack_require__.d(tools_namespaceObject,{CircleTool:()=>CircleTool_CircleTool,EllipseTool:()=>EllipseTool_EllipseTool,FreehandLineTool:()=>FreehandLineTool_FreehandLineTool,LineTool:()=>LineTool_LineTool,PointTool:()=>PointTool_PointTool,PolygonTool:()=>PolygonTool_PolygonTool,RectangleTool:()=>RectangleTool_RectangleTool,RotateRectangleTool:()=>RotateRectangleTool_RotateRectangleTool,TemporalPointTool:()=>TemporalPointTool_TemporalPointTool,TemporalRotateRectangleTool:()=>TemporalRotateRectangleTool_TemporalRotateRectangleTool,Tool:()=>Tool_Tool,TranscriptionLineTool:()=>TranscriptionLineTool_TranscriptionLineTool});var models_namespaceObject={};__webpack_require__.r(models_namespaceObject),__webpack_require__.d(models_namespaceObject,{PointTool:()=>models_PointTool_PointTool});var tasks_namespaceObject={};__webpack_require__.r(tasks_namespaceObject),__webpack_require__.d(tasks_namespaceObject,{dataVisAnnotation:()=>dataVisAnnotation,drawing:()=>drawing,dropdownSimple:()=>dropdown_simple,geoDrawing:()=>task,highlighter:()=>highlighter,multiple:()=>multiple,single:()=>single,subjectGroupComparison:()=>subjectGroupComparison,survey:()=>survey,text:()=>tasks_text,textFromSubject:()=>textFromSubject,transcription:()=>transcription,volumetric:()=>volumetric});var subjects_namespaceObject={};__webpack_require__.r(subjects_namespaceObject),__webpack_require__.d(subjects_namespaceObject,{ImageAndTextSubject:()=>ImageAndTextSubject_ImageAndTextSubject,ImageSubject:()=>ImageSubject_ImageSubject,SingleImageSubject:()=>SingleImageSubject_SingleImageSubject,SingleJSONSubject:()=>SingleJSONSubject_SingleJSONSubject,SingleTextSubject:()=>SingleTextSubject_SingleTextSubject,SingleVideoSubject:()=>SingleVideoSubject_SingleVideoSubject,SubjectGroup:()=>SubjectGroup_SubjectGroup,TextSubject:()=>TextSubject_TextSubject});var features_models_namespaceObject={};__webpack_require__.r(features_models_namespaceObject),__webpack_require__.d(features_models_namespaceObject,{Point:()=>models_Point_Point});var Layout_components_namespaceObject={};__webpack_require__.r(Layout_components_namespaceObject),__webpack_require__.d(Layout_components_namespaceObject,{centered:()=>CenteredLayout,default:()=>Layout_components,geoMap:()=>GeoMapLayout,maxWidth:()=>MaxWidth,noMaxWidth:()=>NoMaxWidth,volumetric:()=>VolumetricLayout});var async_states=__webpack_require__("../lib-async-states/src/async-states.js"),async_states_default=__webpack_require__.n(async_states),esm=__webpack_require__("../../node_modules/graphql-request/build/esm/index.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),mobxreact_esm=__webpack_require__("../../node_modules/mobx-react/dist/mobxreact.esm.js"),mobx_state_tree_module=__webpack_require__("../../node_modules/mobx-state-tree/dist/mobx-state-tree.module.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),react=__webpack_require__("../../node_modules/react/index.js"),i18next=__webpack_require__("../../node_modules/i18next/dist/esm/i18next.js"),es=__webpack_require__("../../node_modules/react-i18next/dist/es/index.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var namespaces=["components","plugins"],classifierI18n=i18next.Ay.createInstance();function useTranslation(ns){return(0,es.Bd)(ns,{i18n:classifierI18n})}function withTranslation(ns){return Component=>function TranslatedComponent(props){var{t}=useTranslation(ns);return(0,jsx_runtime.jsx)(Component,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({i18n:classifierI18n,t},props))}}classifierI18n.use(es.r9).init({fallbackLng:"en",interpolation:{escapeValue:!1},react:{useSuspense:!1}}),["ar","bn","cs","da","de","el","en","es","fi","fr","ha","he","hi","hr","hu","hy","id","it","ja","kn","ko","mr","nl","pl","pt","ru","sw","sv","te","test","tr","uk","ur","ve","vi","zh-CN","zh-TW"].forEach(lang=>{namespaces.forEach(n=>{classifierI18n.addResourceBundle(lang,n,__webpack_require__("../lib-classifier/dist/esm/translations sync recursive ^\\.\\/.*\\.json$")("./".concat(lang,"/").concat(n,".json")))})});var src=__webpack_require__("../lib-panoptes-js/src/index.js"),esm_exports=__webpack_require__("../lib-classifier/node_modules/@sentry/core/build/esm/exports.js"),console=__webpack_require__("../../node_modules/console-browserify/index.js");function asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function _fetchReductions(){return _fetchReductions=_asyncToGenerator(function*(caesarClient,reducerKey,subjectID,workflowID){if(reducerKey)try{var _response$workflow,query="{\n        workflow(id: ".concat(workflowID,") {\n          subject_reductions(subjectId: ").concat(subjectID,', reducerKey:"').concat(reducerKey,'")\n          {\n            data\n          }\n        }\n      }'),response=yield caesarClient.request(query.replace(/\s+/g," "));return null==response||null===(_response$workflow=response.workflow)||void 0===_response$workflow?void 0:_response$workflow.subject_reductions}catch(error){return(0,esm_exports.Cp)(error),console.error(error),[]}return[]}),_fetchReductions.apply(this,arguments)}function useCaesarReductions(reducerKey){var[loaded,setLoaded]=(0,react.useState)(!1),{client:{caesar},subjects:{active:subject},workflows:{active:workflow}}=useStores();return(0,react.useEffect)(function onSubjectChange(){function _updateReductions(){return _updateReductions=_asyncToGenerator(function*(caesarClient,reducerKey,subject,workflowID){var reductions=yield function fetchReductions(_x,_x2,_x3,_x4){return _fetchReductions.apply(this,arguments)}(caesarClient,reducerKey,subject.id,workflowID);ignore||(subject.setCaesarReductions({reducer:reducerKey,subjectId:subject.id,workflowId:workflowID,reductions}),setLoaded(!0))}),_updateReductions.apply(this,arguments)}var ignore=!1;return null!=subject&&subject.id&&reducerKey&&(setLoaded(!1),function updateReductions(_x5,_x6,_x7,_x8){return _updateReductions.apply(this,arguments)}(caesar,reducerKey,subject,workflow.id)),()=>{ignore=!0}},[caesar,reducerKey,subject,workflow.id]),{loaded,caesarReductions:subject.caesarReductions}}function useClientRect(){var[rect,setRect]=(0,react.useState)({});return[rect,(0,react.useCallback)(node=>{null!==node&&setRect(node.getBoundingClientRect())},[])]}var mobx_esm=__webpack_require__("../../node_modules/mobx/dist/mobx.esm.js"),cuid=__webpack_require__("../../node_modules/cuid/index.js"),cuid_default=__webpack_require__.n(cuid),snakeCase=__webpack_require__("../../node_modules/lodash/snakeCase.js"),snakeCase_default=__webpack_require__.n(snakeCase),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),Box=__webpack_require__("../../node_modules/grommet/es6/components/Box/Box.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Markdownz=__webpack_require__("../lib-react-components/dist/esm/Markdownz/Markdownz.js"),polished_esm=__webpack_require__("../../node_modules/polished/dist/polished.esm.js");var StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"TaskInputLabel__StyledText",componentId:"sc-101o3f3-0"})(["display:flex;align-content:center;align-items:center;padding:5px 0 5px 15px;gap:15px;"]);function TaskInputLabel(_ref){var{label="",labelIcon=null,labelStatus=null}=_ref,howShouldTheLabelBeAligned=label&&function doesTheLabelHaveAnImage(label){return label&&/(?:!\[(.*?)\]\((.*?)\))/g.test(label)}(label)||label&&labelIcon?"start":"center";return(0,jsx_runtime.jsxs)(Box.a,{as:"span",direction:"row",fill:"horizontal",justify:howShouldTheLabelBeAligned,pad:{right:"15px"},children:[labelIcon&&labelIcon,(0,jsx_runtime.jsx)(StyledText,{children:(0,jsx_runtime.jsx)(Markdownz.Ay,{inline:!0,children:label})}),labelStatus&&labelStatus]})}function getHoverStyles(props){var active=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{theme:{dark,global:{colors}}}=props;if(dark){var borderColor=active?colors["accent-1"]:colors["light-1"],darkerBackgroundColor=(0,polished_esm.e$)(.04,colors["neutral-1"]);return(0,styled_components_browser_esm.css)(["background:",";border:2px solid ",";color:",";"],darkerBackgroundColor,borderColor,colors.text.dark)}var gradientTop=(0,polished_esm.a)(.05,colors["accent-1"]),gradientBottom=(0,polished_esm.e$)(.11,colors["accent-1"]),borderTopColor=active?colors.brand:gradientTop,borderBottomColor=active?colors.brand:gradientBottom,borderRightColor=active?colors.brand:"transparent",borderLeftColor=active?colors.brand:"transparent";return(0,styled_components_browser_esm.css)(["background:linear-gradient(",",",");border-width:2px;border-style:solid;border-left-color:",";border-right-color:",";border-top-color:",";border-bottom-color:",";color:'black';"],gradientTop,gradientBottom,borderLeftColor,borderRightColor,borderTopColor,borderBottomColor)}TaskInputLabel.propTypes={label:prop_types_default().string,labelIcon:prop_types_default().oneOfType([prop_types_default().node,prop_types_default().object]),labelStatus:prop_types_default().oneOfType([prop_types_default().node,prop_types_default().object])};var TaskInput_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"TaskInput__StyledText",componentId:"sc-1e05gc2-0"})([""," "," box-shadow:1px 1px 2px 0 rgba(0,0,0,0.5);cursor:pointer;display:flex;align-items:center;min-height:45px;margin:8px 0;"],props=>props.theme.dark?(0,styled_components_browser_esm.css)(["background:transparent;"]):(0,styled_components_browser_esm.css)(["background:",";"],props.theme.global.colors["light-1"]),props=>props.theme.dark?(0,styled_components_browser_esm.css)(["border:2px solid ",";"],props.theme.global.colors["light-1"]):(0,styled_components_browser_esm.css)(["border:2px solid transparent;"])),StyledLabel=styled_components_browser_esm.default.label.withConfig({displayName:"TaskInput__StyledLabel",componentId:"sc-1e05gc2-1"})(["position:relative;input{opacity:0.01;position:absolute;}input:enabled + ",":hover{","}input:focus + ","{","}input:enabled:active + ","{","}input:checked + ","{"," "," ","}input:focus:checked + ",",input:checked + ",":hover{"," > img:only-child,svg:only-child{background-color:inherit !important;}}input:checked + ",":hover{> div > span > p{","}}"],TaskInput_StyledText,props=>getHoverStyles(props),TaskInput_StyledText,props=>getHoverStyles(props),TaskInput_StyledText,props=>getHoverStyles(props,!0),TaskInput_StyledText,props=>(0,styled_components_browser_esm.css)(["background:",";"],props.theme.global.colors.brand),props=>props.theme.dark?(0,styled_components_browser_esm.css)(["border:2px solid ",";"],props.theme.global.colors["light-1"]):(0,styled_components_browser_esm.css)(["border:2px solid transparent;"]),props=>props.theme.dark?(0,styled_components_browser_esm.css)(["color:",";"],props.theme.global.colors.text.dark):(0,styled_components_browser_esm.css)(["color:white;"]),TaskInput_StyledText,TaskInput_StyledText,props=>props.theme.dark?(0,styled_components_browser_esm.css)(["border:2px solid ",";"],props.theme.global.colors["light-1"]):(0,styled_components_browser_esm.css)(["border:2px solid ",";"],props.theme.global.colors["neutral-1"]),TaskInput_StyledText,props=>props.theme.dark?(0,styled_components_browser_esm.css)(["color:",";"],props.theme.global.colors.text.dark):(0,styled_components_browser_esm.css)(["color:black;"])),DEFAULT_HANDLER=()=>!0;function TaskInput(_ref){var{autoFocus=!1,checked=!1,className="",disabled=!1,index,label="",labelIcon=null,labelStatus=null,name,onChange=DEFAULT_HANDLER,type}=_ref,id="".concat(type,"-").concat(name,"-").concat(index);return(0,jsx_runtime.jsxs)(StyledLabel,{className,htmlFor:id,children:[(0,jsx_runtime.jsx)("input",{autoFocus,checked,disabled,id,name,onChange,type,value:index}),(0,jsx_runtime.jsx)(TaskInput_StyledText,{children:(0,jsx_runtime.jsx)(TaskInputLabel,{label,labelIcon,labelStatus})})]})}TaskInput.propTypes={autoFocus:prop_types_default().bool,checked:prop_types_default().bool,className:prop_types_default().string,disabled:prop_types_default().bool,index:prop_types_default().number.isRequired,label:prop_types_default().string,labelIcon:prop_types_default().oneOfType([prop_types_default().node,prop_types_default().object]),labelStatus:prop_types_default().oneOfType([prop_types_default().node,prop_types_default().object]),name:prop_types_default().string.isRequired,onChange:prop_types_default().func,type:prop_types_default().string.isRequired};const TaskInput_TaskInput=TaskInput;var StyledInputIcon=styled_components_browser_esm.default.span.withConfig({displayName:"InputIcon__StyledInputIcon",componentId:"sc-yki6kh-0"})([""," display:flex;align-items:center;padding:15px;"," > svg{fill-opacity:0.1;height:1.5em;stroke:currentColor;stroke-width:5;width:1.5em;}"],props=>props.color&&(0,styled_components_browser_esm.css)(["color:",";"],props.color),props=>"rgb(0, 0, 0)"===props.color||"#000000"===props.color?(0,styled_components_browser_esm.css)(["background:radial-gradient(#cbcccb 0%,#2D2D2D 80%);"]):(0,styled_components_browser_esm.css)(["background:#2D2D2D;"]));function InputIcon(_ref){var{color="white",icon}=_ref;return(0,jsx_runtime.jsx)(StyledInputIcon,{color,children:icon})}InputIcon.propTypes={color:prop_types.string,icon:prop_types.node.isRequired};var Blank=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js");function Graph2dRangeXIcon(){return(0,jsx_runtime.jsx)(Blank.h,{viewBox:"0 0 100 100",children:(0,jsx_runtime.jsx)("rect",{className:"shape",x:"25",y:"0",width:"25",height:"100%"})})}var DataVisAnnotationTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"DataVisAnnotationTask__StyledText",componentId:"sc-kmfh15-0"})(["margin:0;padding:0;width:100%;> *:first-child{margin-top:0;}"]);function DataVisAnnotationTask(props){var{task={}}=props,{setActiveTool}=task;return(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(DataVisAnnotationTask_StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{children:task.instruction})}),task.tools.map((tool,index)=>{var checked=task.activeToolIndex===index;return(0,jsx_runtime.jsx)(TaskInput_TaskInput,{checked,index,label:task.strings.get("tools.".concat(index,".label")),labelIcon:(0,jsx_runtime.jsx)(InputIcon,{icon:(0,jsx_runtime.jsx)(Graph2dRangeXIcon,{}),color:"white"}),name:task.taskKey,onChange:event=>function _onChange(index,event){event.target.checked&&setActiveTool(index)}(index,event),required:task.required,type:"radio"},"".concat(task.taskKey,"_").concat(index))})]})}DataVisAnnotationTask.propTypes={task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().bool})};const components_DataVisAnnotationTask=(0,mobxreact_esm.PA)(DataVisAnnotationTask);const models_Annotation=mobx_state_tree_module.gK.model("Annotation",{id:mobx_state_tree_module.gK.identifier,task:mobx_state_tree_module.gK.string,taskType:mobx_state_tree_module.gK.literal("default")}).preProcessSnapshot(snapshot=>{var newSnapshot=Object.assign({},snapshot);return newSnapshot.id=snapshot.id||cuid_default()(),newSnapshot}).postProcessSnapshot(snapshot=>{var newSnapshot=Object.assign({},snapshot);return delete newSnapshot.id,newSnapshot}).volatile(self=>({_inProgress:!1})).views(self=>({get isComplete(){return!0},toSnapshot:()=>(0,mobx_state_tree_module.dV)(self)})).actions(self=>({update(value){self.value=value,self._inProgress=!0}}));function Task_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Task_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Task_ownKeys(Object(t),!0).forEach(function(r){Task_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Task_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Task_defineProperty(e,r,t){return(r=function Task_toPropertyKey(t){var i=function Task_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Task=mobx_state_tree_module.gK.model("Task",{annotation:mobx_state_tree_module.gK.safeReference(models_Annotation),details:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen())),taskKey:mobx_state_tree_module.gK.identifier,required:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),strings:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.string),type:mobx_state_tree_module.gK.literal("default")}).preProcessSnapshot(snapshot=>{if("boolean"!=typeof snapshot.required){var required="false"!==snapshot.required&&Boolean(snapshot.required);return Task_objectSpread(Task_objectSpread({},snapshot),{},{required})}return snapshot}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_Annotation.create({id,task:self.taskKey,taskType:self.type})},get help(){return self.strings.get("help")},get instruction(){return self.strings.get("instruction")},get subtasks(){return self.details&&Array.isArray(self.details)?self.details.map((detail,index)=>{var stringOverrides={};return self.strings.forEach((value,key)=>{var detailsMatch=key.match(new RegExp("^details\\.".concat(index,"\\.(.+)$")));detailsMatch&&(stringOverrides[detailsMatch[1]]=value)}),Task_objectSpread(Task_objectSpread(Task_objectSpread({},detail),stringOverrides),{},{taskKey:"".concat(self.taskKey,".details.").concat(index),index})}):[]},hasSubtasks:()=>self.subtasks.length>0,get question(){return self.strings.get("question")},isComplete:annotation=>!self.required||!(null==annotation||!annotation.isComplete),get isValid(){return!0}})).actions(self=>({complete(){},createAnnotation:()=>self.defaultAnnotation(),reset(){},start(){},validate(){}}));const models_Task=Task;const dataVisTools_Graph2dRangeXTool=mobx_state_tree_module.gK.model("Graph2dRangeXTool",{help:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),label:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),max:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),type:mobx_state_tree_module.gK.literal("graph2dRangeX")});const DataVisToolAnnotations_Graph2dRangeXAnnotation=mobx_state_tree_module.gK.model("Graph2dRangeXAnnotation",{tool:mobx_state_tree_module.gK.number,toolType:mobx_state_tree_module.gK.string,x:mobx_state_tree_module.gK.number,width:mobx_state_tree_module.gK.number,zoomLevelOnCreation:mobx_state_tree_module.gK.number});var DataVis=mobx_state_tree_module.gK.model("DataVis",{taskType:mobx_state_tree_module.gK.literal("dataVisAnnotation"),value:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.union({dispatcher:snapshot=>{if("graph2dRangeX"===snapshot.toolType)return DataVisToolAnnotations_Graph2dRangeXAnnotation}},DataVisToolAnnotations_Graph2dRangeXAnnotation))});const models_DataVisAnnotation=mobx_state_tree_module.gK.compose("DataVisAnnotation",models_Annotation,DataVis);var DataVisTaskModel=mobx_state_tree_module.gK.model("DataVisTaskModel",{activeToolIndex:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),annotation:mobx_state_tree_module.gK.safeReference(models_DataVisAnnotation),tools:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.union({dispatcher:snapshot=>{if("graph2dRangeX"===snapshot.type)return dataVisTools_Graph2dRangeXTool}},dataVisTools_Graph2dRangeXTool)),type:mobx_state_tree_module.gK.literal("dataVisAnnotation")}).views(self=>({get activeTool(){return self.tools[self.activeToolIndex]},defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_DataVisAnnotation.create({id,task:self.taskKey,taskType:self.type})}})).actions(self=>({reset:function reset(){self.activeToolIndex=0},setActiveTool:function setActiveTool(toolIndex){self.activeToolIndex=toolIndex}}));const dataVisAnnotation={TaskComponent:components_DataVisAnnotationTask,TaskModel:mobx_state_tree_module.gK.compose("DataVisAnnotationTask",models_Task,DataVisTaskModel),AnnotationModel:models_DataVisAnnotation};const icons_Point=()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("circle",{r:"30",cx:"50",cy:"50"}),(0,jsx_runtime.jsx)("line",{x1:"50",y1:"5",x2:"50",y2:"40"}),(0,jsx_runtime.jsx)("line",{x1:"95",y1:"50",x2:"60",y2:"50"}),(0,jsx_runtime.jsx)("line",{x1:"50",y1:"95",x2:"50",y2:"60"}),(0,jsx_runtime.jsx)("line",{x1:"5",y1:"50",x2:"40",y2:"50"})]});const icons_RotateRectangle=()=>(0,jsx_runtime.jsx)("rect",{x:"10",y:"30",width:"80",height:"40"});var icons={anchoredEllipse:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("ellipse",{rx:"45",ry:"25",cx:"50",cy:"50",transform:"rotate(-30, 50, 50)"}),(0,jsx_runtime.jsx)("circle",{r:"5",cy:"50",cx:"50"})]}),bezier:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("path",{d:"M90 90 Q 10 50 90 10",fill:"none"}),(0,jsx_runtime.jsx)("path",{d:"M90 90 L 10 50 L 90 10",strokeDasharray:[10,10],fill:"none"})]}),circle:()=>(0,jsx_runtime.jsx)("ellipse",{rx:"33",ry:"33",cx:"50",cy:"50"}),column:()=>(0,jsx_runtime.jsx)("rect",{x:"10",y:"0",width:"25",height:"100%"}),ellipse:()=>(0,jsx_runtime.jsx)("ellipse",{rx:"45",ry:"25",cx:"50",cy:"50",transform:"rotate(-30, 50, 50)"}),fan:()=>(0,jsx_runtime.jsx)("path",{d:"M 50 95 L 80 33 A 20 20 0 1 0 20 33 Z"}),freehandLine:()=>(0,jsx_runtime.jsx)("path",{d:"M10,50 Q25,10,50,50,75,90,90,50"}),freehandSegmentLine:()=>(0,jsx_runtime.jsx)("path",{d:"M10,50 Q25,10,50,50,75,90,90,50",fill:"none"}),freehandSegmentShape:()=>(0,jsx_runtime.jsx)("path",{d:"M20,60 C10,10,80,10,50,50 C20,90 90,90 80,40 z"}),freehandShape:()=>(0,jsx_runtime.jsx)("path",{d:"M20,60 C10,10,80,10,50,50 C20,90 90,90 80,40 z"}),fullHeightLine:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",strokeDasharray:[10,10]}),(0,jsx_runtime.jsx)("line",{x1:"50",y1:"0",x2:"50",y2:"100"})]}),fullWidthLine:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",strokeDasharray:[10,10]}),(0,jsx_runtime.jsx)("line",{x1:"0",y1:"50",x2:"100",y2:"50"})]}),grid:()=>(0,jsx_runtime.jsx)("polyline",{points:"0, 25 50, 25 50, 75 0, 75 0, 25 50, 25 100, 25 100, 75 50, 75 50, 25"}),line:()=>(0,jsx_runtime.jsx)("line",{x1:"25",y1:"90",x2:"75",y2:"10"}),point:icons_Point,pointGrid:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("line",{x1:"20",y1:"0",x2:"20",y2:"80"}),(0,jsx_runtime.jsx)("line",{x1:"40",y1:"0",x2:"40",y2:"80"}),(0,jsx_runtime.jsx)("line",{x1:"60",y1:"0",x2:"60",y2:"80"}),(0,jsx_runtime.jsx)("line",{x1:"0",y1:"20",x2:"80",y2:"20"}),(0,jsx_runtime.jsx)("line",{x1:"0",y1:"40",x2:"80",y2:"40"}),(0,jsx_runtime.jsx)("line",{x1:"0",y1:"60",x2:"80",y2:"60"})]}),polygon:()=>(0,jsx_runtime.jsx)("polyline",{points:"50, 5 90, 90 50, 70 5, 90 50, 5"}),rectangle:()=>(0,jsx_runtime.jsx)("rect",{x:"10",y:"30",width:"80",height:"40"}),rotateRectangle:icons_RotateRectangle,temporalPoint:icons_Point,temporalRotateRectangle:icons_RotateRectangle,transcriptionLine:()=>(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("line",{x1:"50",y1:"80.8",x2:"50",y2:"19"}),(0,jsx_runtime.jsx)("polyline",{points:"76.4,31 76.4,19 23.6,19 23.6,31 "}),(0,jsx_runtime.jsx)("line",{x1:"40.4",y1:"80.8",x2:"59.6",y2:"80.8"})]}),triangle:()=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("polygon",{points:"50, 12 95, 90 5,90 "}),(0,jsx_runtime.jsx)("ellipse",{cx:"50",cy:"64",rx:"17",ry:"9"})]})};const helpers_getIcon=function getIcon(icon){return icons[icon]||(()=>null)};var StyledInputStatus=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"InputStatus__StyledInputStatus",componentId:"sc-1xvksjw-0"})(["display:flex;justify-content:end;align-items:center;flex-grow:1;"]);function InputStatus(_ref){var{count=0,tool={}}=_ref,{t}=useTranslation("plugins"),status=t("InputStatus.drawn",{count}),hasMin=tool.min&&tool.min>0,hasMax=tool.max&&tool.max<1/0;return hasMin&&hasMax?status=t("InputStatus.maxAndMin",{count,max:tool.max,min:tool.min}):hasMax?status=t("InputStatus.max",{count,max:tool.max}):hasMin&&(status=t("InputStatus.min",{count,min:tool.min})),(0,jsx_runtime.jsx)(StyledInputStatus,{children:status})}InputStatus.propTypes={count:prop_types.number,tool:(0,prop_types.shape)({min:(0,prop_types.oneOfType)([prop_types.number,prop_types.string]),max:(0,prop_types.oneOfType)([prop_types.number,prop_types.string])})};var ToolIcon=_ref=>{var{type}=_ref,Icon=helpers_getIcon(type);return(0,jsx_runtime.jsx)(Blank.h,{viewBox:"0 0 100 100",children:(0,jsx_runtime.jsx)(Icon,{})})},DrawingTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"DrawingTask__StyledText",componentId:"sc-oij4rx-0"})(["margin:0;padding:0;width:100%;> *:first-child{margin-top:0;}"]);function DrawingTask(_ref2){var{disabled=!1,task}=_ref2,{setActiveTool}=task;return(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(DrawingTask_StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{children:task.instruction})}),task.tools.map((tool,index)=>{var checked=task.activeToolIndex===index;return(0,jsx_runtime.jsx)(TaskInput_TaskInput,{checked,disabled,index,label:task.strings.get("tools.".concat(index,".label")),labelIcon:(0,jsx_runtime.jsx)(InputIcon,{icon:(0,jsx_runtime.jsx)(ToolIcon,{type:tool.type}),color:tool.color}),labelStatus:(0,jsx_runtime.jsx)(InputStatus,{count:tool.marks.size,tool}),name:"drawing-tool",onChange:event=>function _onChange(index,event){event.target.checked&&setActiveTool(index)}(index,event),required:task.required,type:"radio"},"".concat(task.taskKey,"_").concat(index))})]})}DrawingTask.propTypes={disabled:prop_types_default().bool,task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().bool,setActiveTool:prop_types_default().func}).isRequired};const components_DrawingTask=(0,mobxreact_esm.PA)(DrawingTask);const helpers_shownMarks={ALL:"ALL",USER:"USER",NONE:"NONE"};const shared_SVGContext=(0,react.createContext)({canvas:null,rotate:0,transformMatrix:{scaleX:1,scaleY:1,skewX:0,skewY:0,translateX:0,translateY:0}});var _excluded=["children","coords","dragStart","dragMove","dragEnd","onPointerDown","onPointerMove","onPointerUp"];function draggable_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function draggable_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?draggable_ownKeys(Object(t),!0).forEach(function(r){draggable_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):draggable_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function draggable_defineProperty(e,r,t){return(r=function draggable_toPropertyKey(t){var i=function draggable_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function getEventOffset(event,canvas){var svgPoint=function createPoint(event){var{clientX,clientY}=event;return window.DOMPointReadOnly?new DOMPointReadOnly(clientX,clientY):{x:clientX,y:clientY}}(event),ctm=null==canvas?void 0:canvas.getScreenCTM();return ctm&&svgPoint.matrixTransform?svgPoint.matrixTransform(ctm.inverse()):svgPoint}function convertEvent(event,canvas){var svgEventOffset=getEventOffset(event,canvas);return{type:event.type,x:svgEventOffset.x,y:svgEventOffset.y}}var DEFAULT_COORDS={x:0,y:0},draggable_DEFAULT_HANDLER=event=>!0;const draggable_draggable=function draggable(WrappedComponent){function DraggableWithRef(_ref,ref){var{children,coords:initialCoords=DEFAULT_COORDS,dragStart=draggable_DEFAULT_HANDLER,dragMove=draggable_DEFAULT_HANDLER,dragEnd=draggable_DEFAULT_HANDLER,onPointerDown,onPointerMove,onPointerUp}=_ref,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),{canvas}=(0,react.useContext)(shared_SVGContext),wrappedComponent=ref||(0,react.useRef)(),[dragging,setDragging]=(0,react.useState)(!1),coords=(0,react.useRef)(initialCoords),pointerId=(0,react.useRef)(-1);return(0,jsx_runtime.jsx)("g",{onPointerDown:function onDragStart(event){var _wrappedComponent$cur;event.stopPropagation(),event.preventDefault();var{x,y}=convertEvent(event,canvas);coords.current={x,y},setDragging(!0),pointerId.current=event.pointerId,dragStart({x,y,pointerId:event.pointerId}),null==onPointerDown||onPointerDown(event),null===(_wrappedComponent$cur=wrappedComponent.current)||void 0===_wrappedComponent$cur||_wrappedComponent$cur.setPointerCapture(event.pointerId)},onPointerMove:function onDragMove(event){if(dragging&&event.pointerId===pointerId.current){var{x,y}=convertEvent(event,canvas),{currentTarget}=event,difference={x:x-coords.current.x,y:y-coords.current.y};dragMove({currentTarget,x,y,pointerId:event.pointerId},difference),coords.current={x,y}}null==onPointerMove||onPointerMove(event)},onPointerUp:function onDragEnd(event){var{x,y}=convertEvent(event,canvas),{currentTarget}=event;event.pointerId===pointerId.current&&dragEnd({currentTarget,x,y,pointerId:event.pointerId}),coords.current={x:null,y:null},setDragging(!1),pointerId.current=-1,null==onPointerUp||onPointerUp(event)},children:(0,jsx_runtime.jsx)(WrappedComponent,draggable_objectSpread(draggable_objectSpread({ref:wrappedComponent},rest),{},{dragging,children}))})}var Draggable=(0,react.forwardRef)(DraggableWithRef),name=WrappedComponent.displayName||WrappedComponent.name||WrappedComponent.render&&WrappedComponent.render.name||WrappedComponent.toString();return Draggable.displayName="draggable(".concat(name,")"),Draggable.wrappedComponent=WrappedComponent,Draggable};function Mark_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Mark_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Mark_ownKeys(Object(t),!0).forEach(function(r){Mark_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mark_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Mark_defineProperty(e,r,t){return(r=function Mark_toPropertyKey(t){var i=function Mark_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledGroup=styled_components_browser_esm.default.g.withConfig({displayName:"Mark__StyledGroup",componentId:"sc-196x620-0"})(["stroke-width:","px;&.active{stroke-width:","px;}&:focus{outline:none;}&:focus-visible{",'}&[aria-disabled="false"]:hover{',"}"],2,4,props=>(0,styled_components_browser_esm.css)(["outline:solid medium ",";"],props.focusColor),props=>props.dragging?(0,styled_components_browser_esm.css)(["cursor:grabbing;"]):(0,styled_components_browser_esm.css)(["cursor:grab;"]));function focusMark(markNode){if(!(markNode===document.activeElement)){var x=scrollX,y=scrollY;null==markNode||markNode.focus(),window.scrollTo(x,y)}}function defaultHandler(){return!0}var Mark=(0,react.forwardRef)(function Mark(_ref,ref){var{children,disabled=!1,dragging=!1,isActive=!1,label,mark,onDelete=defaultHandler,onFinish=defaultHandler,onSelect=defaultHandler,pointerEvents="painted"}=_ref,theme=(0,styled_components_browser_esm.useTheme)(),markRoot=null!=ref?ref:(0,react.useRef)(),{tool}=mark,mainStyle={color:tool&&tool.color?tool.color:"green",fill:"transparent",stroke:tool&&tool.color?tool.color:"green"},focusColor=null==theme?void 0:theme.global.colors[null==theme?void 0:theme.global.colors.focus],usesSubTasks=mark.isValid&&mark.tasks.length>0;function openSubTaskPopup(){if(!mark.subTaskVisibility){var _markRoot$current,markBounds=null===(_markRoot$current=markRoot.current)||void 0===_markRoot$current?void 0:_markRoot$current.getBoundingClientRect();mark.setSubTaskVisibility(!0,markBounds)}}(0,react.useEffect)(function onSelectMark(){isActive&&mark.finished&&focusMark(markRoot.current)},[isActive,mark.finished]),(0,react.useEffect)(function onFinishMarkWithSubTasks(){usesSubTasks&&mark.finished&&openSubTaskPopup()},[usesSubTasks,mark.finished]),(0,react.useEffect)(function onCloseSubTasks(){isActive&&mark.finished&&!mark.subTaskVisibility&&focusMark(markRoot.current)},[isActive,mark.finished,mark.subTaskVisibility]);var transform="";if(transform=mark.x&&mark.y?"".concat(transform," translate(").concat(mark.x,", ").concat(mark.y,")"):transform,mark.angle){var rotateTransform=mark.x_rotate&&mark.y_rotate?"rotate(".concat(mark.angle,", ").concat(mark.x_rotate,", ").concat(mark.y_rotate,")"):"rotate(".concat(mark.angle,")");transform="".concat(transform," ").concat(rotateTransform)}return(0,jsx_runtime.jsx)(StyledGroup,Mark_objectSpread(Mark_objectSpread({},mainStyle),{},{id:"mark-".concat(mark.id),"data-testid":"mark-mark","aria-disabled":disabled?"true":"false","aria-label":label,className:"drawingMark ".concat(isActive?"active":""),dragging,focusable:!0,focusColor,onFocus:function onFocus(){var _markRoot$current2,_markRoot$current2$sc;onSelect(mark),null===(_markRoot$current2=markRoot.current)||void 0===_markRoot$current2||null===(_markRoot$current2$sc=_markRoot$current2.scrollIntoView)||void 0===_markRoot$current2$sc||_markRoot$current2$sc.call(_markRoot$current2)},onKeyDown:function onKeyDown(event){switch(event.key){case"Backspace":return event.preventDefault(),event.stopPropagation(),onDelete(mark),!1;case" ":case"Enter":return event.preventDefault(),event.stopPropagation(),openSubTaskPopup(),onFinish(event),!1;default:return!0}},onPointerUp:function onPointerUp(){usesSubTasks&&openSubTaskPopup()},pointerEvents,ref:markRoot,role:"button",tabIndex:disabled?-1:0,transform,children}))});Mark.propTypes={dragging:prop_types_default().bool,children:prop_types_default().node.isRequired,isActive:prop_types_default().bool,label:prop_types_default().string.isRequired,onDelete:prop_types_default().func,onDeselect:prop_types_default().func,onSelect:prop_types_default().func,tool:prop_types_default().shape({color:prop_types_default().string})};const Mark_Mark=draggable_draggable((0,mobxreact_esm.PA)(Mark));function getScale(svgContext){var{canvas,rotate=0}=svgContext;if(null!=canvas&&canvas.getBBox){var{width:clientWidth,height:clientHeight}=canvas.getBoundingClientRect(),actualWidth=canvas.getBBox().width,scale=rotate%180==0?clientWidth/actualWidth:clientHeight/actualWidth;return Number.isNaN(scale)?1:scale}return 1}function useScale(){var{canvas,rotate=0}=(0,react.useContext)(shared_SVGContext),initialScale=getScale({canvas,rotate}),[scale,setScale]=(0,react.useState)(initialScale);return setTimeout(()=>{if(canvas){var newScale=getScale({canvas,rotate});newScale!==scale&&setScale(newScale)}}),scale}Mark.__docgenInfo={description:"",methods:[],displayName:"Mark",props:{dragging:{description:"",type:{name:"bool"},required:!1},children:{description:"",type:{name:"node"},required:!0},isActive:{description:"",type:{name:"bool"},required:!1},label:{description:"",type:{name:"string"},required:!0},onDelete:{description:"",type:{name:"func"},required:!1},onDeselect:{description:"",type:{name:"func"},required:!1},onSelect:{description:"",type:{name:"func"},required:!1},tool:{description:"",type:{name:"shape",value:{color:{name:"string",required:!1}}},required:!1}}};var DragHandle_excluded=["fill","radius","x","y","dragging","invisibleWhenDragging","onPointerDown","onPointerMove","onPointerUp"];function DragHandle_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function DragHandle_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DragHandle_ownKeys(Object(t),!0).forEach(function(r){DragHandle_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DragHandle_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function DragHandle_defineProperty(e,r,t){return(r=function DragHandle_toPropertyKey(t){var i=function DragHandle_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledCircle=(0,styled_components_browser_esm.default)("circle").withConfig({displayName:"DragHandle__StyledCircle",componentId:"sc-1loe7uv-0"})(["stroke-width:2;&:hover{cursor:move;}"]),RADIUS=screen.width>900?6:10,DragHandle_DEFAULT_HANDLER=()=>!1;function DragHandleWithRef(_ref,ref){var{fill="currentColor",radius=RADIUS,x,y,dragging=!1,invisibleWhenDragging=!1,onPointerDown=DragHandle_DEFAULT_HANDLER,onPointerMove=DragHandle_DEFAULT_HANDLER,onPointerUp=DragHandle_DEFAULT_HANDLER}=_ref,props=function DragHandle_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function DragHandle_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,DragHandle_excluded),scale=useScale(),transform="translate(".concat(x,", ").concat(y,") scale(").concat(1/scale,")"),styleProps={fill:dragging&&invisibleWhenDragging?"transparent":fill,stroke:dragging&&invisibleWhenDragging?"transparent":"currentColor",strokeWidth:1};return(0,jsx_runtime.jsxs)("g",DragHandle_objectSpread(DragHandle_objectSpread({ref,transform,onPointerDown,onPointerMove,onPointerUp},props),{},{children:[(0,jsx_runtime.jsx)(StyledCircle,DragHandle_objectSpread(DragHandle_objectSpread({r:radius},styleProps),{},{vectorEffect:"non-scaling-stroke"})),(0,jsx_runtime.jsx)(StyledCircle,{r:2*radius,fill:"transparent",stroke:"transparent",vectorEffect:"non-scaling-stroke"})]}))}var DragHandle=(0,react.forwardRef)(DragHandleWithRef);DragHandle.propTypes={fill:prop_types_default().string,invisibleWhenDragging:prop_types_default().bool,onPointerDown:prop_types_default().func,onPointerMove:prop_types_default().func,onPointerUp:prop_types_default().func,radius:prop_types_default().number,x:prop_types_default().number.isRequired,y:prop_types_default().number.isRequired};const DragHandle_DragHandle=draggable_draggable(DragHandle);DragHandle.__docgenInfo={description:"",methods:[],displayName:"DragHandle",props:{fill:{description:"",type:{name:"string"},required:!1},invisibleWhenDragging:{description:"",type:{name:"bool"},required:!1},onPointerDown:{description:"",type:{name:"func"},required:!1},onPointerMove:{description:"",type:{name:"func"},required:!1},onPointerUp:{description:"",type:{name:"func"},required:!1},radius:{description:"",type:{name:"number"},required:!1},x:{description:"",type:{name:"number"},required:!0},y:{description:"",type:{name:"number"},required:!0}}};var Circle_DEFAULT_HANDLER=()=>!1,GUIDE_DASH=[4,4];function Circle_Circle(_ref){var{active=!1,mark,onFinish=Circle_DEFAULT_HANDLER}=_ref,{x_center,y_center,r}=mark,handleX=r;return(0,jsx_runtime.jsxs)("g",{onPointerUp:active?onFinish:void 0,children:[(0,jsx_runtime.jsx)("circle",{r,"data-testid":"circle-element",vectorEffect:"non-scaling-stroke"}),active&&(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("line",{x1:0,y1:0,x2:handleX,y2:0,strokeWidth:1,strokeDasharray:GUIDE_DASH,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:handleX,y:0,dragMove:function onHandleDrag(e){var r=mark.getDistance(x_center,y_center,e.x,e.y);mark.setCoordinates({x:x_center,y:y_center,r})},"data-testid":"circle-dragHandle"})]})]})}Circle_Circle.propTypes={active:prop_types_default().bool,mark:prop_types_default().shape({r:prop_types_default().number,x_center:prop_types_default().number,y_center:prop_types_default().number}).isRequired,onFinish:prop_types_default().func};const components_Circle_Circle=(0,mobxreact_esm.PA)(Circle_Circle);var DeleteButton_StyledGroup=(0,styled_components_browser_esm.default)("g").withConfig({displayName:"DeleteButton__StyledGroup",componentId:"sc-1e3q3b4-0"})(["&:focus{","}&:hover{cursor:pointer;}"],props=>(0,styled_components_browser_esm.css)(["outline:solid 4px ",";"],props.focusColor)),DeleteButton_DEFAULT_HANDLER=()=>!1,DEFAULT_THEME={global:{colors:{}}};function DeleteButton(_ref){var _window,{label,mark,onDelete=DeleteButton_DEFAULT_HANDLER,onDeselect=DeleteButton_DEFAULT_HANDLER,rotate=0,theme=DEFAULT_THEME}=_ref,scale=useScale(),focusColor=theme.global.colors[theme.global.colors.focus],RADIUS=(null===(_window=window)||void 0===_window?void 0:_window.innerWidth)<900?5:8,CROSS_PATH="\n    M ".concat(-1*RADIUS*.7," 0\n    L ").concat(.7*RADIUS," 0\n    M 0 ").concat(-1*RADIUS*.7,"\n    L 0 ").concat(.7*RADIUS,"\n  "),{x,y}=mark.deleteButtonPosition(scale),transform="\n    translate(".concat(x,", ").concat(y,")\n    rotate(").concat(rotate,")\n    scale(").concat(1/scale,")\n  ");function onPointerDown(event){return event.preventDefault(),event.stopPropagation(),onDelete(),!1}return(0,jsx_runtime.jsxs)(DeleteButton_StyledGroup,{"aria-label":label,focusable:!0,focusColor,onBlur:onDeselect,onKeyDown:function onKeyDown(event){switch(event.key){case"Enter":case" ":return onPointerDown(event);default:return!0}},onPointerDown,role:"button",stroke:"white",strokeWidth:1.5,tabIndex:"-1",transform,children:[(0,jsx_runtime.jsx)("circle",{fill:"black",r:RADIUS}),(0,jsx_runtime.jsx)("path",{d:CROSS_PATH,transform:"rotate(45)"})]})}DeleteButton.propTypes={label:prop_types_default().string.isRequired,mark:prop_types_default().object.isRequired,onDelete:prop_types_default().func,onDeselect:prop_types_default().func,rotate:prop_types_default().number,theme:prop_types_default().object};const DeleteButton_DeleteButton=(0,styled_components_browser_esm.withTheme)((0,mobxreact_esm.PA)(DeleteButton));var Ellipse_GUIDE_DASH=[4,4],Ellipse_DEFAULT_HANDLER=()=>!1;function Ellipse_Ellipse(_ref){var{active=!1,mark,onFinish=Ellipse_DEFAULT_HANDLER}=_ref,{x_center,y_center,rx,ry}=mark;return(0,jsx_runtime.jsxs)("g",{onPointerUp:active?onFinish:void 0,children:[(0,jsx_runtime.jsx)("ellipse",{rx,ry,vectorEffect:"non-scaling-stroke"}),active&&(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("line",{x1:"0",y1:"0",x2:rx,y2:"0",strokeWidth:1,strokeDasharray:Ellipse_GUIDE_DASH,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:-1*ry,strokeWidth:1,strokeDasharray:Ellipse_GUIDE_DASH,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)(DragHandle_DragHandle,{dragMove:function onXHandleDrag(e){var r=mark.getDistance(x_center,y_center,e.x,e.y),angle=mark.getAngle(x_center,y_center,e.x,e.y);mark.setCoordinates({x:x_center,y:y_center,rx:r,ry,angle})},x:rx,y:0}),(0,jsx_runtime.jsx)(DragHandle_DragHandle,{dragMove:function onYHandleDrag(e){var r=mark.getDistance(x_center,y_center,e.x,e.y),angle=mark.getAngle(x_center,y_center,e.x,e.y)+90;mark.setCoordinates({x:x_center,y:y_center,rx,ry:r,angle})},dragEnd:mark.finish,x:0,y:-1*ry})]})]})}Ellipse_Ellipse.propTypes={active:prop_types_default().bool,mark:prop_types_default().object.isRequired,onFinish:prop_types_default().func};const components_Ellipse_Ellipse=(0,mobxreact_esm.PA)(Ellipse_Ellipse);function Line_Line(_ref){var{active=!1,mark,onFinish}=_ref,{x1,y1,x2,y2}=mark;function onHandleDrag(coords){mark.setCoordinates(coords)}return(0,jsx_runtime.jsxs)("g",{onPointerUp:active?onFinish:void 0,children:[(0,jsx_runtime.jsx)("line",{x1,y1,x2,y2,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("line",{x1,y1,x2,y2,strokeWidth:6,strokeOpacity:"0",vectorEffect:"non-scaling-stroke"}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x1,y:y1,dragMove:(e,d)=>onHandleDrag({x1:x1+d.x,y1:y1+d.y,x2,y2})}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x2,y:y2,dragMove:(e,d)=>onHandleDrag({x1,y1,x2:x2+d.x,y2:y2+d.y})})]})}Line_Line.propTypes={active:prop_types_default().bool,mark:prop_types_default().object.isRequired};const components_Line_Line=(0,mobxreact_esm.PA)(Line_Line);var Point_RADIUS={large:10,small:2},SELECTED_RADIUS={large:20,small:10},DEFAULT_MARK={tool:{size:"large"}};function Point_Point(_ref){var{active=!1,mark={DEFAULT_MARK},onFinish}=_ref,scale=useScale(),{size}=mark.tool,selectedRadius=SELECTED_RADIUS[size],radius=Point_RADIUS[size];return(0,jsx_runtime.jsxs)("g",{transform:"scale(".concat(1/scale,")"),onPointerUp:active?onFinish:void 0,children:[(0,jsx_runtime.jsx)("line",{x1:"0",y1:-.2*selectedRadius,x2:"0",y2:-1*selectedRadius,strokeWidth:1,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("line",{x1:-.2*selectedRadius,y1:"0",x2:-1*selectedRadius,y2:"0",strokeWidth:1,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("line",{x1:"0",y1:.2*selectedRadius,x2:"0",y2:selectedRadius,strokeWidth:1,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("line",{x1:.2*selectedRadius,y1:"0",x2:selectedRadius,y2:"0",strokeWidth:1,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("circle",{r:active?selectedRadius:radius,vectorEffect:"non-scaling-stroke"})]})}Point_Point.propTypes={active:prop_types_default().bool,mark:prop_types_default().object};const components_Point_Point=(0,mobxreact_esm.PA)(Point_Point);var tippy_react_headless_esm=__webpack_require__("../../node_modules/@tippyjs/react/headless/dist/tippy-react-headless.esm.js"),SpacedText=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),SVG=styled_components_browser_esm.default.svg.withConfig({displayName:"Triangle__SVG",componentId:"sc-d5wcbh-0"})(["display:block;"," z-index:1;"],props=>(0,styled_components_browser_esm.css)(["fill:",";height:","px;transform:rotate(",");width:","px;"],props.fill,props.height,props.rotation,props.height)),defaultPad={horizontal:"small"};function Triangle_Triangle(_ref){var fill,{color="",justify="center",pad=defaultPad,pointDirection="up",theme,width=20}=_ref,{colors}=theme.global;fill=color||(theme.dark?colors["neutral-6"]:colors["dark-2"]);return(0,jsx_runtime.jsx)(Box.a,{"aria-hidden":"true",direction:"row",justify,pad,children:(0,jsx_runtime.jsx)(SVG,{fill,rotation:{up:"0deg",down:"180deg",left:"-90deg",right:"90deg"}[pointDirection],viewBox:"0 0 10 10",width,children:(0,jsx_runtime.jsx)("polygon",{points:"5,0 10,10 0,10"})})})}Triangle_Triangle.propTypes={color:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),justify:(0,prop_types.oneOf)(["start","center","end"]),pad:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),pointDirection:(0,prop_types.oneOf)(["down","left","right","up"]),theme:(0,prop_types.shape)({global:(0,prop_types.shape)({colors:(0,prop_types.shape)({"dark-2":prop_types.string,"neutral-6":prop_types.string})}),dark:prop_types.bool}),width:prop_types.number};const components_Triangle_Triangle=(0,styled_components_browser_esm.withTheme)(Triangle_Triangle);var Label_excluded=["animation","arrow","className","label","theme"];function Label(_ref){var _theme$global,{animation="fadeIn",arrow=!0,className="",label,theme}=_ref,rest=function Label_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function Label_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,Label_excluded),family=(null==theme||null===(_theme$global=theme.global)||void 0===_theme$global||null===(_theme$global=_theme$global.font)||void 0===_theme$global?void 0:_theme$global.family)||"",placement=rest["data-placement"]||"top";return(0,jsx_runtime.jsxs)(Box.a,{animation,children:[arrow&&"bottom"===placement&&(0,jsx_runtime.jsx)(components_Triangle_Triangle,{color:"black",pointDirection:"up",width:10,height:10}),(0,jsx_runtime.jsx)(Box.a,{background:{color:"black",dark:!0},className,elevation:"medium",pad:{horizontal:"medium",vertical:"xsmall"},responsive:!1,children:(0,jsx_runtime.jsx)(_StyledSpacedText,{weight:"bold",$_css:family,children:label})}),arrow&&"top"===placement&&(0,jsx_runtime.jsx)(components_Triangle_Triangle,{color:"black",pointDirection:"down",width:10,height:10})]})}Label.propTypes={arrow:prop_types.bool,animation:(0,prop_types.oneOfType)([prop_types.string,prop_types.array,prop_types.object]),className:prop_types.string,"data-placement":(0,prop_types.oneOf)(["bottom","top"]),label:(0,prop_types.oneOfType)([prop_types.string,prop_types.node]).isRequired,theme:(0,prop_types.shape)({global:(0,prop_types.shape)({font:(0,prop_types.shape)({family:prop_types.string})})})};const Label_Label=(0,styled_components_browser_esm.withTheme)(Label);var _StyledSpacedText=(0,styled_components_browser_esm.default)(SpacedText.A).withConfig({displayName:"Label___StyledSpacedText",componentId:"sc-1szazzi-0"})(["font-family:",";"],p=>p.$_css),Tooltip_excluded=["arrow","animation","children","label","placement","trigger"];function Tooltip_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Tooltip_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Tooltip_ownKeys(Object(t),!0).forEach(function(r){Tooltip_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tooltip_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Tooltip_defineProperty(e,r,t){return(r=function Tooltip_toPropertyKey(t){var i=function Tooltip_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Tooltip(props){var{arrow=!0,animation={type:"fadeIn",duration:500},children,label,placement="top",trigger="mouseenter focus"}=props,rest=function Tooltip_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function Tooltip_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(props,Tooltip_excluded);return(0,jsx_runtime.jsx)(tippy_react_headless_esm.Ay,Tooltip_objectSpread(Tooltip_objectSpread({placement,render:attrs=>(0,jsx_runtime.jsx)(Label_Label,Tooltip_objectSpread({arrow,animation,label},attrs)),trigger},rest),{},{children}))}Tooltip.propTypes={arrow:prop_types.bool,animation:(0,prop_types.oneOfType)([prop_types.array,prop_types.object,prop_types.string]),children:prop_types.node.isRequired,label:(0,prop_types.oneOfType)([prop_types.string,prop_types.node]).isRequired,placement:prop_types.string,trigger:prop_types.string};const Tooltip_Tooltip=Tooltip;var UndoButton_StyledGroup=(0,styled_components_browser_esm.default)("g").withConfig({displayName:"UndoButton__StyledGroup",componentId:"sc-1axx3jx-0"})(["&:hover{cursor:pointer;}"]);function UndoButton(_ref){var{x,y,undoDrawing}=_ref,scale=useScale(),undoTransform="translate(".concat(x+15,", ").concat(y-35,") scale(").concat(1/scale,")"),cx=x+20,cy=y-30;function onPointerDown(event){return event.preventDefault(),event.stopPropagation(),undoDrawing(),!1}return(0,jsx_runtime.jsx)(UndoButton_StyledGroup,{x:cx,y:cy,role:"button",onKeyDown:function onKeyDown(event){switch(event.key){case"Enter":case" ":return onPointerDown(event);default:return!0}},onPointerDown,"aria-label":"Undo",focusable:"true",stroke:"black",strokeWidth:1.5,children:(0,jsx_runtime.jsx)(Tooltip_Tooltip,{label:"Undo",children:(0,jsx_runtime.jsx)("path",{d:"M24 12c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 6.628 5.372 12 12 12s12-5.372 12-12zM6 12l6-6v4.5h6v3h-6v4.5l-6-6z",transform:undoTransform,fill:"black",stroke:"white",strokeWidth:.5})})})}UndoButton.propTypes={x:prop_types.number,y:prop_types.number,undoDrawing:prop_types.func};const UndoButton_UndoButton=UndoButton;var GuideLine=styled_components_browser_esm.default.line.withConfig({displayName:"Polygon__GuideLine",componentId:"sc-1tth94i-0"})(["pointer-events:none;"]);function Polygon_Polygon(_ref){var{active=!1,mark,onFinish}=_ref,{path,points,initialPoint,lastPoint,finished,guideLineX,guideLineY}=mark;function handleClosePolygon(event){mark.finish(),onFinish(event)}var fill=finished?"transparent":"none",strokeDasharray=finished?void 0:"2 2";return(0,jsx_runtime.jsxs)("g",{children:[active&&!finished&&points.length>1&&(0,jsx_runtime.jsx)(UndoButton_UndoButton,{x:initialPoint.x,y:initialPoint.y,undoDrawing:function onUndoDrawing(){mark.shortenPath()}}),"/* Visible lines */",(0,jsx_runtime.jsx)("polyline",{points:path,fill:"none",vectorEffect:"non-scaling-stroke"}),"/* So users can easily select the polygon */",(0,jsx_runtime.jsx)("polyline",{points:path,strokeWidth:6,strokeOpacity:"0",fill,vectorEffect:"non-scaling-stroke"}),"/* To visibly show a closed polygon */",(0,jsx_runtime.jsx)("line",{x1:lastPoint.x,y1:lastPoint.y,x2:initialPoint.x,y2:initialPoint.y,strokeDasharray,vectorEffect:"non-scaling-stroke"}),active&&points.map((point,i)=>(0,jsx_runtime.jsx)(DragHandle_DragHandle,{r:3,x:point.x,y:point.y,fill:"currentColor",dragMove:point.moveTo,onPointerUp:handleClosePolygon},"".concat(mark.id,"-").concat(i))),!finished&&active&&"number"==typeof guideLineX&&"number"==typeof guideLineY&&(0,jsx_runtime.jsx)(GuideLine,{x1:lastPoint.x,y1:lastPoint.y,x2:guideLineX,y2:guideLineY,strokeWidth:1,strokeDasharray:"2 2",vectorEffect:"non-scaling-stroke"})]})}Polygon_Polygon.propTypes={active:prop_types_default().bool,mark:prop_types_default().shape({path:prop_types_default().string,initialPoint:prop_types_default().shape({x:prop_types_default().number,y:prop_types_default().number}),lastPoint:prop_types_default().shape({x:prop_types_default().number,y:prop_types_default().number}),finished:prop_types_default().bool}).isRequired};const components_Polygon_Polygon=(0,mobxreact_esm.PA)(Polygon_Polygon);function Rectangle_Rectangle(_ref){var{active=!1,mark,onFinish}=_ref,{x_center,y_center,width,height}=mark;function onHandleDrag(coords){mark.setCoordinates(coords)}var x_left=x_center-width/2,x_right=x_center+width/2,y_top=y_center-height/2,y_bottom=y_center+height/2,_onFinish=onFinish||function(){return!0};return(0,jsx_runtime.jsxs)("g",{onPointerUp:active?_onFinish:void 0,children:[(0,jsx_runtime.jsx)("rect",{x:x_left,y:y_top,width,height,"data-testid":"rectangle-element",vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("rect",{x:x_left,y:y_top,width,height,strokeWidth:6,strokeOpacity:"0",vectorEffect:"non-scaling-stroke"}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x_left,y:y_top,"data-testid":"rect-dragHandle1",dragMove:(e,d)=>onHandleDrag({x_left:x_left+d.x,x_right,y_top:y_top+d.y,y_bottom})}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x_right,y:y_bottom,"data-testid":"rect-dragHandle2",dragMove:(e,d)=>onHandleDrag({x_left,x_right:x_right+d.x,y_top,y_bottom:y_bottom+d.y})}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x_left,y:y_bottom,"data-testid":"rect-dragHandle3",dragMove:(e,d)=>onHandleDrag({x_left:x_left+d.x,x_right,y_top,y_bottom:y_bottom+d.y})}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x_right,y:y_top,"data-testid":"rect-dragHandle4",dragMove:(e,d)=>onHandleDrag({x_left,x_right:x_right+d.x,y_top:y_top+d.y,y_bottom})})]})}Rectangle_Rectangle.propTypes={active:prop_types_default().bool};const components_Rectangle_Rectangle=(0,mobxreact_esm.PA)(Rectangle_Rectangle);var RotateHandle=(0,react.forwardRef)(function RotateHandle(_ref,ref){var{fill="currentColor",x,y}=_ref,scale=useScale(),{t}=useTranslation("components"),transform="translate(".concat(x,", ").concat(y,") scale(").concat(1/scale,")");return(0,jsx_runtime.jsx)("g",{ref,transform,children:(0,jsx_runtime.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"-12",height:"24px",width:"24px",viewBox:"0 0 24 24",fill,strokeWidth:"0.5",role:"img","aria-label":t("DrawingTools.RotateHandle"),children:[(0,jsx_runtime.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"transparent",stroke:"transparent"}),(0,jsx_runtime.jsx)("path",{d:"M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"})]})})});RotateHandle.propTypes={fill:prop_types.string,x:prop_types.number.isRequired,y:prop_types.number.isRequired};const RotateHandle_RotateHandle=draggable_draggable(RotateHandle);RotateHandle.__docgenInfo={description:"",methods:[],displayName:"RotateHandle",props:{fill:{description:"The RotateHandle color",type:{name:"custom",raw:"string"},required:!1},x:{description:"x position of the vertex closets to the origin before rotation",type:{name:"number"},required:!0},y:{description:"y position of the vertex closets to the origin before rotation",type:{name:"number"},required:!0}}};var RotateRectangle_GUIDE_DASH=[4,4];function RotateRectangle_RotateRectangle(_ref){var{active=!1,mark,onFinish=()=>!0}=_ref,{angle,height,width,x_center,y_center}=mark,x_left=x_center-width/2,x_right=x_center+width/2,y_top=y_center-height/2,y_bottom=y_center+height/2,xRotationHandle=x_center+width/2+32;function onHandleDrag(coords){mark.resizeByCorner(coords)}return(0,jsx_runtime.jsxs)("g",{onPointerUp:active?onFinish:void 0,children:[(0,jsx_runtime.jsx)("rect",{x:x_left,y:y_top,width,height,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("rect",{x:x_left,y:y_top,width,height,strokeWidth:6,strokeOpacity:"0",vectorEffect:"non-scaling-stroke"}),active&&(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("line",{x1:x_center,y1:y_center,x2:xRotationHandle,y2:y_center,strokeWidth:1,strokeDasharray:RotateRectangle_GUIDE_DASH,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)(RotateHandle_RotateHandle,{dragMove:function onRotateDrag(e){var angle=mark.getAngle(x_center,y_center,e.x,e.y);mark.setCoordinates({x_left,x_right,y_top,y_bottom,angle})},x:xRotationHandle,y:y_center})]}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x_left,y:y_top,dragMove:(e,d)=>onHandleDrag({dx:d.x,dy:d.y,corner:"top left"})}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x_right,y:y_top,dragMove:(e,d)=>onHandleDrag({dx:d.x,dy:d.y,corner:"top right"})}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x_right,y:y_bottom,dragMove:(e,d)=>onHandleDrag({dx:d.x,dy:d.y,corner:"bottom right"})}),active&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{x:x_left,y:y_bottom,dragMove:(e,d)=>onHandleDrag({dx:d.x,dy:d.y,corner:"bottom left"})})]})}RotateRectangle_RotateRectangle.propTypes={active:prop_types_default().bool,mark:prop_types_default().shape({angle:prop_types_default().number,height:prop_types_default().number,width:prop_types_default().number,x_center:prop_types_default().number,y_center:prop_types_default().number}).isRequired,onFinish:prop_types_default().func};const components_RotateRectangle_RotateRectangle=(0,mobxreact_esm.PA)(RotateRectangle_RotateRectangle);var FreehandLine_StyledGroup=styled_components_browser_esm.default.g.withConfig({displayName:"FreehandLine__StyledGroup",componentId:"sc-1qk822w-0"})(["stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;&:hover{cursor:pointer;}&.editing{cursor:crosshair;g.extend{&:hover{cursor:crosshair !important;}circle:hover{cursor:grab !important;}}}"]);function FreehandLine_createPoint(event){var{clientX,clientY}=event;if(window.DOMPointReadOnly){var _event$target,svgPoint=new DOMPointReadOnly(clientX,clientY),{x,y}=svgPoint.matrixTransform?svgPoint.matrixTransform(null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.getScreenCTM().inverse()):svgPoint;return{x,y}}return{x:clientX,y:clientY}}function cancelEvent(event){return event.preventDefault(),event.stopPropagation(),!1}function pointsToPath(points){if(0===points.length)return"";var[firstPoint,...restPoints]=points,path=["M ".concat(firstPoint.x,",").concat(firstPoint.y)];return restPoints.forEach(point=>{path.push("L ".concat(point.x,",").concat(point.y))}),path.join(" ")}var FreehandLine_DEFAULT_HANDLER=()=>!0;function FreehandLine_FreehandLine(_ref){var{active=!1,mark,onFinish=FreehandLine_DEFAULT_HANDLER}=_ref,scale=useScale();function onDoubleClick(event){return active&&mark.splicePathDragPoint(FreehandLine_createPoint(event)),cancelEvent(event)}function onPointerDown(event){if(active)return mark.splicePathClosePoint(FreehandLine_createPoint(event)),cancelEvent(event)}!1===active&&mark.inactive(),mark.setScale(scale);var{t}=useTranslation("plugins");return(0,jsx_runtime.jsxs)(FreehandLine_StyledGroup,{"data-testid":"mark-focusable",className:active?"editing":void 0,onPointerUp:active?onFinish:void 0,children:[mark.visiblePathsRender.map((pts,i)=>(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)("path",{d:pointsToPath(pts),fill:"none",strokeOpacity:1,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("title",{children:active?mark.spliceDragPointIndex&&mark.spliceClosePointIndex?t("FreehandLine.spliceDrag"):mark.spliceDragPointIndex&&!mark.spliceClosePointIndex?t("FreehandLine.closePoint"):mark.pathIsClosed&&!mark.spliceDragPointIndex?t("FreehandLine.splicePoint"):t("FreehandLine.active"):t("FreehandLine.inactive")}),(0,jsx_runtime.jsx)("path",{d:pointsToPath(pts),onDoubleClick,onPointerDown,fill:"none",strokeWidth:10,strokeOpacity:0,vectorEffect:"non-scaling-stroke"})]},i)),(0,jsx_runtime.jsx)("path",{d:pointsToPath(mark.splicePathRender),strokeDasharray:"2 2",opacity:".4",vectorEffect:"non-scaling-stroke"}),active&&mark.closePoint&&(0,jsx_runtime.jsx)("circle",{fill:"currentColor",r:4/scale,cx:mark.closePoint.x,cy:mark.closePoint.y,vectorEffect:"non-scaling-stroke"}),active&&mark.dragPoint&&(0,jsx_runtime.jsx)(DragHandle_DragHandle,{"data-testid":"freehandline-drag-handle",x:mark.dragPoint.x,y:mark.dragPoint.y,fill:"none",invisibleWhenDragging:!0,dragStart:mark.appendPathStart,dragMove:mark.appendPath,dragEnd:mark.appendPathEnd,className:"extend"})]})}FreehandLine_FreehandLine.propTypes={active:prop_types_default().bool,mark:prop_types_default().shape({path:prop_types_default().string,initialPoint:prop_types_default().shape({x:prop_types_default().number,y:prop_types_default().number}),lastPoint:prop_types_default().shape({x:prop_types_default().number,y:prop_types_default().number}),finished:prop_types_default().bool,isCloseToStart:prop_types_default().bool}).isRequired,onFinish:prop_types_default().func};const components_FreehandLine_FreehandLine=(0,mobxreact_esm.PA)(FreehandLine_FreehandLine);function TooltipIcon(_ref){var{fill}=_ref;return(0,jsx_runtime.jsx)(Blank.h,{color:fill,children:(0,jsx_runtime.jsx)("circle",{cx:"12",cy:"12",r:"6"})})}TooltipIcon.propTypes={fill:prop_types.string};var TranscriptionLineMark_excluded=["fill","r","transform"];function TranscriptionLineMark_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function TranscriptionLineMark_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?TranscriptionLineMark_ownKeys(Object(t),!0).forEach(function(r){TranscriptionLineMark_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TranscriptionLineMark_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function TranscriptionLineMark_defineProperty(e,r,t){return(r=function TranscriptionLineMark_toPropertyKey(t){var i=function TranscriptionLineMark_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var TranscriptionLineMark_Circle=_ref=>{var{fill,r,transform}=_ref,props=function TranscriptionLineMark_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function TranscriptionLineMark_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,TranscriptionLineMark_excluded);return(0,jsx_runtime.jsx)("g",{transform,children:(0,jsx_runtime.jsx)("circle",TranscriptionLineMark_objectSpread({fill,r,stroke:"currentColor",vectorEffect:"non-scaling-stroke"},props))})},TranscriptionLineMark=(0,react.forwardRef)((_ref2,ref)=>{var _window,{active,color,handleFinishClick,handlePointerDown,mark,onHandleDrag}=_ref2,HANDLE_RADIUS=(null===(_window=window)||void 0===_window?void 0:_window.innerWidth)<900?3:5,scale=useScale(),{finished,x1,x2,y1,y2}=mark,offsetX=0,offsetY=0;if(mark.length){var deltaY=y2-y1;offsetX=(x2-x1)*(HANDLE_RADIUS/mark.length)/scale,offsetY=deltaY*(HANDLE_RADIUS/mark.length)/scale}return(0,jsx_runtime.jsxs)("g",{color,fill:color,ref,stroke:color,children:[(0,jsx_runtime.jsx)("line",{x1:x1+offsetX,y1:y1+offsetY,x2,y2,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),(0,jsx_runtime.jsx)("line",{x1,y1,x2,y2,strokeWidth:12,strokeOpacity:"0",vectorEffect:"non-scaling-stroke"}),active?(0,jsx_runtime.jsx)(DragHandle_DragHandle,{fill:"transparent",radius:HANDLE_RADIUS,x:x1,y:y1,dragMove:function onDragStartPoint(e,d){onHandleDrag({x1:x1+d.x,y1:y1+d.y,x2,y2})}}):(0,jsx_runtime.jsx)(TranscriptionLineMark_Circle,{fill:"transparent",r:HANDLE_RADIUS,transform:"translate(".concat(x1,", ").concat(y1,") scale(").concat(1/scale,")")}),active?(0,jsx_runtime.jsx)(DragHandle_DragHandle,{radius:HANDLE_RADIUS,x:x2,y:y2,dragMove:function onDragEndPoint(e,d){onHandleDrag({x1,y1,x2:x2+d.x,y2:y2+d.y})}}):(0,jsx_runtime.jsx)(TranscriptionLineMark_Circle,{fill:"currentColor",r:HANDLE_RADIUS,transform:"translate(".concat(x2,", ").concat(y2,") scale(").concat(1/scale,")")}),active&&!finished&&(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)(TranscriptionLineMark_Circle,{className:"startPoint",r:HANDLE_RADIUS,transform:"translate(".concat(x1,", ").concat(y1,") scale(").concat(1/scale,")"),onPointerDown:handlePointerDown,onPointerUp:handleFinishClick}),(0,jsx_runtime.jsx)(TranscriptionLineMark_Circle,{className:"endPoint",r:HANDLE_RADIUS,transform:"translate(".concat(x2,", ").concat(y2,") scale(").concat(1/scale,")"),onPointerDown:handlePointerDown,onPointerUp:handleFinishClick})]})]})});TranscriptionLineMark.propTypes={active:prop_types_default().bool,color:prop_types_default().string,handleFinishClick:prop_types_default().func,handlePointerDown:prop_types_default().func,mark:prop_types_default().object.isRequired,onHandleDrag:prop_types_default().func,scale:prop_types_default().number};const TranscriptionLineMark_TranscriptionLineMark=(0,mobxreact_esm.PA)(TranscriptionLineMark);TranscriptionLineMark.__docgenInfo={description:"",methods:[],displayName:"TranscriptionLineMark",props:{active:{description:"",type:{name:"bool"},required:!1},color:{description:"",type:{name:"string"},required:!1},handleFinishClick:{description:"",type:{name:"func"},required:!1},handlePointerDown:{description:"",type:{name:"func"},required:!1},mark:{description:"",type:{name:"object"},required:!0},onHandleDrag:{description:"",type:{name:"func"},required:!1},scale:{description:"",type:{name:"number"},required:!1}}};var TranscriptionLine_DEFAULT_HANDLER=()=>!0;function TranscriptionLine_TranscriptionLine(_ref){var{active=!1,color="",mark,onFinish=TranscriptionLine_DEFAULT_HANDLER,state=""}=_ref,transcriptionTaskColors={},stores=(0,react.useContext)(mobxreact_esm.Db),theme=(0,react.useContext)(styled_components_browser_esm.ThemeContext),[allowFinish,setAllowFinish]=(0,react.useState)(!1),usesTranscriptionTask=function storeMapper(stores){var _stores$classifierSto;return(null===(_stores$classifierSto=stores.classifierStore.workflows.active)||void 0===_stores$classifierSto?void 0:_stores$classifierSto.usesTranscriptionTask)||!1}(stores),{t}=useTranslation("plugins");theme&&(transcriptionTaskColors={active:theme.global.colors.drawingTools.green,default:theme.global.colors.drawingTools.blue,transcribed:theme.global.colors.drawingTools.pink,complete:theme.global.colors["light-5"]});var lineState=state||"default";active&&(lineState="active");var colorToRender=usesTranscriptionTask?transcriptionTaskColors[lineState]:color;function onHandleDrag(coords){mark.setCoordinates(coords)}function handlePointerDown(event){event.stopPropagation(),event.preventDefault(),setAllowFinish(!0)}function handleFinishClick(event){allowFinish&&(mark.finish(),onFinish(event))}if(usesTranscriptionTask&&"active"===lineState||"default"===lineState){var tooltipLabel=t("active"===lineState?"TranscriptionLine.editing":"TranscriptionLine.created");return(0,jsx_runtime.jsx)(Tooltip_Tooltip,{icon:(0,jsx_runtime.jsx)(TooltipIcon,{fill:colorToRender}),label:tooltipLabel,children:(0,jsx_runtime.jsx)(TranscriptionLineMark_TranscriptionLineMark,{active,color:colorToRender,handlePointerDown,handleFinishClick,mark,onHandleDrag})})}return(0,jsx_runtime.jsx)(TranscriptionLineMark_TranscriptionLineMark,{active,color:colorToRender,handlePointerDown,handleFinishClick,mark,onHandleDrag})}TranscriptionLine_TranscriptionLine.propTypes={active:prop_types_default().bool,color:prop_types_default().string,mark:prop_types_default().object.isRequired,onFinish:prop_types_default().func,state:prop_types_default().string};const components_TranscriptionLine_TranscriptionLine=TranscriptionLine_TranscriptionLine;var StyledFieldset=styled_components_browser_esm.default.fieldset.withConfig({displayName:"SingleChoiceTask__StyledFieldset",componentId:"sc-dgswm5-0"})(["border:none;padding:0;&:focus-visible{outline:none;","}img:only-child,svg:only-child{"," max-width:2.5rem;}"],props=>props.focusColor&&(0,styled_components_browser_esm.css)(["box-shadow:0 0 2px 2px ",";"],props.focusColor),props=>props.theme&&(0,styled_components_browser_esm.css)(["background:",";"],props.theme.global.colors.brand)),SingleChoiceTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"SingleChoiceTask__StyledText",componentId:"sc-dgswm5-1"})(["margin:0;padding:0;width:100%;> *:first-child{margin-top:0;}"]),inlineComponents={p:SingleChoiceTask_StyledText};function SingleChoiceTask(_ref){var{annotation,autoFocus=!1,className="",disabled=!1,task}=_ref,fieldset=(0,react.useRef)(),theme=(0,styled_components_browser_esm.useTheme)(),focusColor=null==theme?void 0:theme.global.colors[null==theme?void 0:theme.global.colors.focus],{value}=annotation,questionHasFocus=autoFocus&&null===value;function onChange(index,event){event.target.checked&&annotation.update(index)}return(0,react.useEffect)(function autofocusFieldset(){var _fieldset$current;questionHasFocus&&document.activeElement!==fieldset.current&&(null===(_fieldset$current=fieldset.current)||void 0===_fieldset$current||_fieldset$current.focus())},[questionHasFocus]),(0,jsx_runtime.jsxs)(Box.a,{as:StyledFieldset,ref:fieldset,className,disabled,focusColor,tabIndex:-1,theme,children:[(0,jsx_runtime.jsx)(SingleChoiceTask_StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{components:inlineComponents,children:task.question})}),task.answers.map((answer,index)=>{var checked=!!(value+1)&&index===value;return(0,jsx_runtime.jsx)(TaskInput_TaskInput,{autoFocus:checked,checked,disabled,index,label:task.strings.get("answers.".concat(index,".label")),name:task.taskKey,onChange:onChange.bind(this,index),required:task.required,type:"radio"},"".concat(task.taskKey,"_").concat(index))})]})}SingleChoiceTask.propTypes={annotation:prop_types_default().shape({update:prop_types_default().func,value:prop_types_default().number}).isRequired,autoFocus:prop_types_default().bool,className:prop_types_default().string,disabled:prop_types_default().bool,task:prop_types_default().shape({answers:prop_types_default().arrayOf(prop_types_default().shape({label:prop_types_default().string})),help:prop_types_default().string,question:prop_types_default().string,required:prop_types_default().bool,taskKey:prop_types_default().string}).isRequired};const components_SingleChoiceTask=(0,mobxreact_esm.PA)(SingleChoiceTask);var SingleChoice=mobx_state_tree_module.gK.model("SingleChoice",{taskType:mobx_state_tree_module.gK.literal("single"),value:mobx_state_tree_module.gK.maybeNull(mobx_state_tree_module.gK.number)}).views(self=>({get isComplete(){return null!==self.value}}));const models_SingleChoiceAnnotation=mobx_state_tree_module.gK.compose("SingleChoiceAnnotation",models_Annotation,SingleChoice);var SingleChoiceTask_SingleChoice=mobx_state_tree_module.gK.model("SingleChoice",{annotation:mobx_state_tree_module.gK.safeReference(models_SingleChoiceAnnotation),answers:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen({label:mobx_state_tree_module.gK.string,next:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string)})),type:mobx_state_tree_module.gK.literal("single")}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_SingleChoiceAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const single={TaskComponent:components_SingleChoiceTask,TaskModel:mobx_state_tree_module.gK.compose("SingleChoiceTask",models_Task,SingleChoiceTask_SingleChoice),AnnotationModel:models_SingleChoiceAnnotation};var MultipleChoiceTask_StyledFieldset=styled_components_browser_esm.default.fieldset.withConfig({displayName:"MultipleChoiceTask__StyledFieldset",componentId:"sc-1cx8ahu-0"})(["border:none;padding:0;&:focus-visible{outline:none;","}img:only-child,svg:only-child{"," max-width:2.5rem;}"],props=>props.focusColor&&(0,styled_components_browser_esm.css)(["box-shadow:0 0 2px 2px ",";"],props.focusColor),props=>props.theme&&(0,styled_components_browser_esm.css)(["background:",";"],props.theme.global.colors.brand)),MultipleChoiceTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"MultipleChoiceTask__StyledText",componentId:"sc-1cx8ahu-1"})(["margin:0;padding:0;width:100%;> *:first-child{margin-top:0;}"]),MultipleChoiceTask_inlineComponents={p:MultipleChoiceTask_StyledText};function MultipleChoiceTask(_ref){var{annotation,autoFocus=!1,className="",disabled=!1,task}=_ref,fieldset=(0,react.useRef)(),theme=(0,styled_components_browser_esm.useTheme)(),focusColor=null==theme?void 0:theme.global.colors[null==theme?void 0:theme.global.colors.focus],{value}=annotation,questionHasFocus=autoFocus&&0===value.length;function onChange(index,event){var newValue=value?value.slice(0):[];if(event.target.checked&&!newValue.includes(index))newValue.push(index);else if(!event.target.checked&&newValue.includes(index)){var indexInValue=newValue.indexOf(index);newValue.splice(indexInValue,1)}annotation.update(newValue)}return(0,react.useEffect)(function autofocusFieldset(){var _fieldset$current;questionHasFocus&&document.activeElement!==fieldset.current&&(null===(_fieldset$current=fieldset.current)||void 0===_fieldset$current||_fieldset$current.focus())},[questionHasFocus]),(0,jsx_runtime.jsxs)(Box.a,{as:MultipleChoiceTask_StyledFieldset,ref:fieldset,className,disabled,focusColor,tabIndex:-1,theme,children:[(0,jsx_runtime.jsx)(MultipleChoiceTask_StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{components:MultipleChoiceTask_inlineComponents,children:task.question})}),task.answers.map((answer,index)=>{var checked=!!(value&&value.length>0)&&value.includes(index);return(0,jsx_runtime.jsx)(TaskInput_TaskInput,{autoFocus:checked,checked,disabled,index,label:task.strings.get("answers.".concat(index,".label")),name:task.taskKey,onChange:onChange.bind(this,index),required:task.required,type:"checkbox"},"".concat(task.taskKey,"_").concat(index))})]})}MultipleChoiceTask.propTypes={annotation:prop_types_default().shape({update:prop_types_default().func,value:prop_types_default().array}).isRequired,autoFocus:prop_types_default().bool,className:prop_types_default().string,disabled:prop_types_default().bool,task:prop_types_default().shape({answers:prop_types_default().arrayOf(prop_types_default().shape({label:prop_types_default().string})),help:prop_types_default().string,question:prop_types_default().string,required:prop_types_default().bool}).isRequired};const components_MultipleChoiceTask=(0,mobxreact_esm.PA)(MultipleChoiceTask);var MultipleChoice=mobx_state_tree_module.gK.model("MultipleChoice",{taskType:mobx_state_tree_module.gK.literal("multiple"),value:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.number),[])}).views(self=>({get isComplete(){return self.value.length>0}}));const models_MultipleChoiceAnnotation=mobx_state_tree_module.gK.compose("MultipleChoiceAnnotation",models_Annotation,MultipleChoice);var MultipleChoiceTask_MultipleChoice=mobx_state_tree_module.gK.model("MultipleChoice",{annotation:mobx_state_tree_module.gK.safeReference(models_MultipleChoiceAnnotation),answers:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen({label:mobx_state_tree_module.gK.string})),type:mobx_state_tree_module.gK.literal("multiple")}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_MultipleChoiceAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const multiple={TaskComponent:components_MultipleChoiceTask,TaskModel:mobx_state_tree_module.gK.compose("MultipleChoiceTask",models_Task,MultipleChoiceTask_MultipleChoice),AnnotationModel:models_MultipleChoiceAnnotation};var TextArea=__webpack_require__("../../node_modules/grommet/es6/components/TextArea/TextArea.js"),PlainButton=__webpack_require__("../lib-react-components/dist/esm/PlainButton/PlainButton.js"),Fieldset=(0,styled_components_browser_esm.default)("fieldset").withConfig({displayName:"TextTagButtons__Fieldset",componentId:"sc-u5i77n-0"})(["border:none;margin:0;padding:0;outline:none;"]),TextTagButtons_DEFAULT_HANDLER=()=>!1,DEFAULT_TAGS=[];function TextTagButtons(_ref){var{disabled=!1,tags=DEFAULT_TAGS,taskKey,onClick:_onClick=TextTagButtons_DEFAULT_HANDLER}=_ref,{t}=useTranslation("plugins");return tags.length>0?(0,jsx_runtime.jsxs)(Fieldset,{children:[(0,jsx_runtime.jsx)("legend",{children:(0,jsx_runtime.jsx)(Text.E,{id:"textModifiers-".concat(taskKey),weight:"bold",children:t("TextTask.TextTagButtons.modifiers")})}),(0,jsx_runtime.jsx)(Box.a,{gap:"small",justify:"start",direction:"row",children:tags.map(tag=>(0,jsx_runtime.jsx)(PlainButton.Ay,{"aria-labelledby":"textModifiers-".concat(taskKey," ").concat(taskKey,"-").concat(tag),id:"".concat(taskKey,"-").concat(tag),disabled,justify:"start",onClick:event=>_onClick(event),text:tag,value:tag},tag))})]}):null}TextTagButtons.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func,taskKey:prop_types_default().string.isRequired,tags:prop_types_default().arrayOf(prop_types_default().string)};var DefaultTextTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"DefaultTextTask__StyledText",componentId:"sc-13dl653-0"})(["display:block;margin:10px 0;"]);function DefaultTextTask(_ref){var{autoFocus=!1,disabled=!1,setTagSelection=()=>!0,task,value,updateAnnotation=()=>!0}=_ref,textArea=(0,react.useRef)();var components={a:DefaultTextTask_StyledText,h1:DefaultTextTask_StyledText,h2:DefaultTextTask_StyledText,h3:DefaultTextTask_StyledText,h4:DefaultTextTask_StyledText,h5:DefaultTextTask_StyledText,h6:DefaultTextTask_StyledText,p:DefaultTextTask_StyledText,span:Text.E};return(0,jsx_runtime.jsxs)(Box.a,{direction:"column",children:[(0,jsx_runtime.jsxs)("label",{htmlFor:"".concat(task.taskKey,"-").concat(task.type),children:[(0,jsx_runtime.jsx)(Markdownz.Ay,{components,children:task.instruction}),(0,jsx_runtime.jsx)(TextArea.f,{ref:textArea,autoFocus,disabled,id:"".concat(task.taskKey,"-").concat(task.type),value,onChange:function onChange(){updateAnnotation(textArea)}})]}),(0,jsx_runtime.jsx)(TextTagButtons,{disabled,onClick:event=>setTagSelection(event,textArea),taskKey:task.taskKey,tags:task.text_tags})]})}DefaultTextTask.propTypes={autoFocus:prop_types_default().bool,disabled:prop_types_default().bool,onSelectSuggestion:prop_types_default().func,setTagSelection:prop_types_default().func,task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,text_tags:prop_types_default().arrayOf(prop_types_default().string),type:prop_types_default().string}).isRequired,value:prop_types_default().string.isRequired,updateAnnotation:prop_types_default().func};const DefaultTextTask_DefaultTextTask=(0,mobxreact_esm.PA)(DefaultTextTask);var TextInput=__webpack_require__("../../node_modules/grommet/es6/components/TextInput/TextInput.js"),TextTaskWithSuggestions_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"TextTaskWithSuggestions__StyledText",componentId:"sc-q4ks1e-0"})(["display:block;margin:10px 0;"]);function TextTaskWithSuggestions(_ref){var{autoFocus=!1,disabled=!1,onSelectSuggestion=()=>!0,setTagSelection=()=>!0,suggestions=[],task,value,updateAnnotation=()=>!0}=_ref,textInput=(0,react.useRef)(),displayedSuggestions=value?[]:suggestions;var components={a:TextTaskWithSuggestions_StyledText,h1:TextTaskWithSuggestions_StyledText,h2:TextTaskWithSuggestions_StyledText,h3:TextTaskWithSuggestions_StyledText,h4:TextTaskWithSuggestions_StyledText,h5:TextTaskWithSuggestions_StyledText,h6:TextTaskWithSuggestions_StyledText,p:TextTaskWithSuggestions_StyledText,span:Text.E};return(0,jsx_runtime.jsxs)(Box.a,{direction:"column",children:[(0,jsx_runtime.jsx)(TextTagButtons,{disabled,onClick:event=>setTagSelection(event,textInput),taskKey:task.taskKey,tags:task.text_tags}),(0,jsx_runtime.jsxs)("label",{htmlFor:"".concat(task.taskKey,"-").concat(task.type),children:[(0,jsx_runtime.jsx)(Markdownz.Ay,{components,children:task.instruction}),(0,jsx_runtime.jsx)(TextInput.k,{autoFocus,disabled,dropProps:{trapFocus:!1},id:"".concat(task.taskKey,"-").concat(task.type),onChange:function onChange(){updateAnnotation(textInput)},onSelect:event=>onSelectSuggestion(event,textInput),suggestions:displayedSuggestions,ref:textInput,value})]})]})}TextTaskWithSuggestions.propTypes={autoFocus:prop_types_default().bool,disabled:prop_types_default().bool,onSelectSuggestion:prop_types_default().func,setTagSelection:prop_types_default().func,suggestions:prop_types_default().arrayOf(prop_types_default().string),task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,text_tags:prop_types_default().arrayOf(prop_types_default().string),type:prop_types_default().string}).isRequired,value:prop_types_default().string.isRequired,updateAnnotation:prop_types_default().func};const TextTaskWithSuggestions_TextTaskWithSuggestions=(0,mobxreact_esm.PA)(TextTaskWithSuggestions);var literalInsertionTags=["&"];function TextTask(_ref){var{annotation,autoFocus=!1,disabled=!1,suggestions=[],task}=_ref,{value}=annotation;function updateAnnotation(ref){var currentRef=ref.current;if(currentRef&&annotation){var text=currentRef.value;annotation.update(text)}}function setTagSelection(e,ref){var currentRef=ref.current,text=currentRef.value,textTag=e.currentTarget.value;if(literalInsertionTags.indexOf(textTag)>=0)return function setTagSelection_literalInsertion(e,ref){var currentRef=ref.current,text=currentRef.value,textTag=e.currentTarget.value,selectionStart=currentRef.selectionStart,selectionEnd=currentRef.selectionEnd,textBefore=text.substring(0,selectionStart),textAfter=text.substring(selectionEnd,text.length),newValue=textBefore+textTag+textAfter;currentRef.value=newValue,updateAnnotation(ref),currentRef.focus&&(currentRef.setSelectionRange(newValue.length-textAfter.length,newValue.length-textAfter.length),currentRef.focus())}(e,ref);var textAfter,newValue,startTag="[".concat(textTag,"]"),endTag="[/".concat(textTag,"]"),selectionStart=currentRef.selectionStart,selectionEnd=currentRef.selectionEnd,textBefore=text.substring(0,selectionStart);selectionStart===selectionEnd?newValue=textBefore+startTag+endTag+(textAfter=text.substring(selectionStart,text.length)):newValue=textBefore+startTag+text.substring(selectionStart,selectionEnd)+endTag+(textAfter=text.substring(selectionEnd,text.length));currentRef.value=newValue,updateAnnotation(ref),currentRef.focus&&(currentRef.setSelectionRange(newValue.length-textAfter.length,newValue.length-textAfter.length),currentRef.focus())}return(null==suggestions?void 0:suggestions.length)>0?(0,jsx_runtime.jsx)(TextTaskWithSuggestions_TextTaskWithSuggestions,{autoFocus,disabled,onSelectSuggestion:function onSelectSuggestion(event,ref){ref.current.value=event.suggestion,updateAnnotation(ref)},setTagSelection,suggestions,task,value,updateAnnotation}):(0,jsx_runtime.jsx)(DefaultTextTask_DefaultTextTask,{autoFocus,disabled,setTagSelection,task,value,updateAnnotation})}TextTask.propTypes={autoFocus:prop_types_default().bool,disabled:prop_types_default().bool,suggestions:prop_types_default().array,task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,text_tags:prop_types_default().arrayOf(prop_types_default().string),type:prop_types_default().string}).isRequired};const TextTask_TextTask=(0,mobxreact_esm.PA)(TextTask);var TextAnnotation_Text=mobx_state_tree_module.gK.model("Text",{taskType:mobx_state_tree_module.gK.literal("text"),value:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"")}).views(self=>({get isComplete(){return""!==self.value}}));const models_TextAnnotation=mobx_state_tree_module.gK.compose("TextAnnotation",models_Annotation,TextAnnotation_Text);var TextTask_Text=mobx_state_tree_module.gK.model("Text",{annotation:mobx_state_tree_module.gK.safeReference(models_TextAnnotation),required:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.union(mobx_state_tree_module.gK.string,mobx_state_tree_module.gK.boolean)),text_tags:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),type:mobx_state_tree_module.gK.literal("text")}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_TextAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const models_TextTask=mobx_state_tree_module.gK.compose("TextTask",models_Task,TextTask_Text);var TextPreviousAnnotationValues=mobx_state_tree_module.gK.model("TextPreviousAnnotationValues",{taskKey:mobx_state_tree_module.gK.identifier,taskType:mobx_state_tree_module.gK.literal("text"),values:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string)});const tasks_text={TaskComponent:TextTask_TextTask,TaskModel:models_TextTask,AnnotationModel:models_TextAnnotation,PreviousAnnotationValuesModel:TextPreviousAnnotationValues};var Select=__webpack_require__("../../node_modules/grommet/es6/components/Select/Select.js"),Down=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Down.js"),SimpleDropdownTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"SimpleDropdownTask__StyledText",componentId:"sc-1m8uzqv-0"})(["margin:0;padding:0;width:100%;> *:first-child{margin-top:0;}"]);function SimpleDropdownTask(_ref){var{annotation,className="",disabled=!1,task}=_ref,{t}=useTranslation("plugins"),{value}=annotation,stringsSnapshot=(0,mobx_state_tree_module.dV)(task.strings),[selectedOption,setSelectedOption]=(0,react.useState)(""),optionsToDisplay=Object.entries(stringsSnapshot).filter(_ref2=>{var[key,value]=_ref2;return key.startsWith("selects.0.options.*.")}).map(_ref3=>{var[key,value]=_ref3;return value}),[filteredOptions,setFilteredOptions]=(0,react.useState)(optionsToDisplay);function onSearch(text){var escapedText=text.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),exp=new RegExp(escapedText,"i");setFilteredOptions(optionsToDisplay.filter(o=>exp.test(o)))}return!0===(null==value?void 0:value.option)&&selectedOption!==optionsToDisplay[null==value?void 0:value.selection]&&setSelectedOption(optionsToDisplay[null==value?void 0:value.selection]),(0,jsx_runtime.jsxs)(Box.a,{className,children:[(0,jsx_runtime.jsx)(SimpleDropdownTask_StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{children:task.instruction})}),(0,jsx_runtime.jsx)(Box.a,{gap:"xsmall",children:(0,jsx_runtime.jsx)(Select.l,{disabled,icon:(0,jsx_runtime.jsx)(Down.R,{size:"small"}),labelKey:"text",onChange:function onChange(ev){var matchIndex=optionsToDisplay.indexOf(ev.value);setSelectedOption(ev.value),annotation.update({selection:matchIndex,option:!0})},onSearch,onBlur:function onBlur(){onSearch("")},options:filteredOptions,placeholder:t("SimpleDropdownTask.selectPlaceholder"),size:"small",value:selectedOption})})]})}SimpleDropdownTask.propTypes={annotation:prop_types_default().shape({update:prop_types_default().func,value:prop_types_default().object}).isRequired,className:prop_types_default().string,disabled:prop_types_default().bool,task:prop_types_default().shape({allowCreate:prop_types_default().bool,help:prop_types_default().string,instruction:prop_types_default().string,options:prop_types_default().arrayOf(prop_types_default().string),required:prop_types_default().bool}).isRequired};const components_SimpleDropdownTask=(0,mobxreact_esm.PA)(SimpleDropdownTask);var presetOption=mobx_state_tree_module.gK.model("SimpleDropdownPresetOption",{selection:mobx_state_tree_module.gK.number,option:mobx_state_tree_module.gK.literal(!0)}),otherOption=mobx_state_tree_module.gK.model("SimpleDropdownOtherOption",{selection:mobx_state_tree_module.gK.string,option:mobx_state_tree_module.gK.literal(!1)}),SimpleDropdown=mobx_state_tree_module.gK.model("SimpleDropdown",{taskType:mobx_state_tree_module.gK.literal("dropdown-simple"),value:mobx_state_tree_module.gK.maybeNull(mobx_state_tree_module.gK.union(presetOption,otherOption),null)}).views(self=>({get isComplete(){var _self$value,_self$value2,_self$value3;return null!==(_self$value=self.value)&&void 0!==_self$value&&_self$value.option?(null===(_self$value2=self.value)||void 0===_self$value2?void 0:_self$value2.selection)>=0:(null===(_self$value3=self.value)||void 0===_self$value3||null===(_self$value3=_self$value3.selection)||void 0===_self$value3?void 0:_self$value3.length)>0}}));const models_SimpleDropdownAnnotation=mobx_state_tree_module.gK.compose("SimpleDropdownAnnotation",models_Annotation,SimpleDropdown);var MenuOptions=mobx_state_tree_module.gK.refinement("MenuOptions",mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),value=>value.length>=4&&value.length<=200),SimpleDropdownTask_SimpleDropdown=mobx_state_tree_module.gK.model("SimpleDropdown",{allowCreate:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),annotation:mobx_state_tree_module.gK.safeReference(models_SimpleDropdownAnnotation),options:MenuOptions,type:mobx_state_tree_module.gK.literal("dropdown-simple")}).preProcessSnapshot(snapshot=>function legacyDropdownAdapter(snapshot){var newSnapshot={},{selects}=snapshot;if(1===(null==selects?void 0:selects.length)){var menu=selects[0];newSnapshot.allowCreate=menu.allowCreate,newSnapshot.help=snapshot.help,newSnapshot.instruction=snapshot.instruction,newSnapshot.required=menu.required,newSnapshot.taskKey=snapshot.taskKey,newSnapshot.type="dropdown-simple";var options=menu.options["*"];return newSnapshot.options=options.map(option=>option.label),newSnapshot}return snapshot}(snapshot)).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_SimpleDropdownAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const dropdown_simple={TaskComponent:components_SimpleDropdownTask,TaskModel:mobx_state_tree_module.gK.compose("SimpleDropdownTask",models_Task,SimpleDropdownTask_SimpleDropdown),AnnotationModel:models_SimpleDropdownAnnotation};var AnnotationsStore=mobx_state_tree_module.gK.model("AnnotationsStore",{annotations:mobx_state_tree_module.gK.map(models_Annotation)}).views(self=>({annotation(task){var taskAnnotation;return self.annotations.forEach(annotation=>{annotation.task===task.taskKey&&(taskAnnotation=annotation)}),taskAnnotation}})).actions(self=>{function createAnnotation(task){var taskAnnotation=task.createAnnotation();return self.annotations.put(taskAnnotation),taskAnnotation}return{addAnnotation:function addAnnotation(task,value){var annotation=self.annotation(task);return annotation||(annotation=createAnnotation(task)),void 0!==value&&annotation.update(value),annotation},createAnnotation,beforeDestroy:function beforeDestroy(){self.reset()},removeAnnotation:function removeAnnotation(annotation){null!=annotation&&annotation.id&&self.annotations.delete(annotation.id)},reset:function reset(){self.annotations.clear()}}});const store_AnnotationsStore=AnnotationsStore;var BaseMark=mobx_state_tree_module.gK.model("BaseMark",{id:mobx_state_tree_module.gK.identifier,annotations:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.union(single.AnnotationModel,multiple.AnnotationModel,tasks_text.AnnotationModel,dropdown_simple.AnnotationModel)),frame:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),subTaskPreviousAnnotationValues:mobx_state_tree_module.gK.map(tasks_text.PreviousAnnotationValuesModel),toolIndex:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),toolType:mobx_state_tree_module.gK.string}).preProcessSnapshot(snapshot=>{var newSnapshot=Object.assign({},snapshot);if(newSnapshot.id=snapshot.id||cuid_default()(),snapshot.annotations&&Array.isArray(snapshot.annotations)){var annotations={};snapshot.annotations.forEach(annotation=>{annotation.id=annotation.id||cuid_default()(),annotations[annotation.id]=annotation}),newSnapshot.annotations=annotations}return newSnapshot}).postProcessSnapshot(snapshot=>{var newSnapshot=Object.assign({},snapshot);return delete newSnapshot.id,delete newSnapshot.subTaskPreviousAnnotationValues,newSnapshot.annotations=Object.values(snapshot.annotations),newSnapshot}).volatile(self=>({finished:!1,subTaskMarkBounds:void 0,subTaskVisibility:!1})).views(self=>({getAngle(x1,y1,x2,y2){var deltaX=x2-x1,deltaY=y2-y1;return Math.atan2(deltaY,deltaX)*(180/Math.PI)},getDistance(x1,y1,x2,y2){var aSquared=Math.pow(x2-x1,2),bSquared=Math.pow(y2-y1,2);return Math.sqrt(aSquared+bSquared)},get element(){return document.getElementById("mark-".concat(self.id))},get isComplete(){var incomplete=self.tasks.some(task=>{var taskAnnotation=self.annotation(task);return task.required&&!(null!=taskAnnotation&&taskAnnotation.isComplete)});return!incomplete},get isValid(){return!0},get tool(){return(0,mobx_state_tree_module.PA)(self,2)},get tasks(){return self.tool.tasks},get videoTime(){}})).actions(self=>({finish(){self.finished=!0,self.isValid||self.tool.deleteMark(self)},setPreviousAnnotations(previousAnnotationValues){(null==previousAnnotationValues?void 0:previousAnnotationValues.length)>0?previousAnnotationValues.forEach(previousAnnotationValue=>{self.subTaskPreviousAnnotationValues.put(previousAnnotationValue)}):self.subTaskPreviousAnnotationValues.clear()},setSubTaskVisibility(visibility,markBounds){self.tasks.length>0&&(self.subTaskVisibility=visibility,self.subTaskMarkBounds=markBounds)},setVideoTime(displayTime){}}));const marks_Mark_Mark=mobx_state_tree_module.gK.compose("Mark",store_AnnotationsStore,BaseMark);var CircleModel=mobx_state_tree_module.gK.model("CircleModel",{x_center:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),y_center:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),r:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0)}).views(self=>({get coords(){return{x:self.x_center,y:self.y_center}},deleteButtonPosition(scale){var theta=Math.PI/180*-45;return{x:(self.r+12)*Math.cos(theta),y:(self.r+12)*Math.sin(theta)}},get isValid(){return self.r>=5},get tool(){return(0,mobx_state_tree_module.k2)(self,CircleTool_CircleTool)},get toolComponent(){return components_Circle_Circle},get x(){return self.x_center},get y(){return self.y_center}})).actions(self=>({initialDrag(_ref){var{x,y}=_ref;self.r=self.getDistance(self.x_center,self.y_center,x,y)},initialPosition(_ref2){var{x,y}=_ref2;self.x_center=x,self.y_center=y},move(_ref3){var{x,y}=_ref3;self.x_center+=x,self.y_center+=y},setCoordinates(_ref4){var{x,y,r}=_ref4;self.x_center=x,self.y_center=y,self.r=r}}));const marks_Circle_Circle=mobx_state_tree_module.gK.compose("Circle",marks_Mark_Mark,CircleModel);var EllipseModel=mobx_state_tree_module.gK.model("EllipseModel",{x_center:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),y_center:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),rx:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),ry:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),angle:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0)}).volatile(self=>({dragging:!1})).views(self=>({get coords(){return{x:self.x_center,y:self.y_center}},deleteButtonPosition(scale){var theta=Math.PI/180*-45;return{x:(self.rx+24)*Math.cos(theta),y:(self.ry+24)*Math.sin(theta)}},get isValid(){return self.rx-5>0},get tool(){return(0,mobx_state_tree_module.k2)(self,EllipseTool_EllipseTool)},get toolComponent(){return components_Ellipse_Ellipse},get x(){return self.x_center},get y(){return self.y_center}})).actions(self=>({initialDrag(_ref){var{x,y}=_ref;if(self.dragging){var rx=self.getDistance(self.x_center,self.y_center,x,y),angle=self.getAngle(self.x_center,self.y_center,x,y);self.rx=rx,self.ry=1e-4*rx,self.angle=angle}},initialPosition(_ref2){var{x,y}=_ref2;self.x_center=x,self.y_center=y,self.dragging=!0},move(_ref3){var{x,y}=_ref3;self.x_center+=x,self.y_center+=y},setCoordinates(_ref4){var{x,y,rx,ry,angle}=_ref4;self.x_center=x,self.y_center=y,self.rx=rx,self.ry=ry,self.angle=angle},setDragging(dragging){self.dragging=dragging}}));const marks_Ellipse_Ellipse=mobx_state_tree_module.gK.compose("Ellipse",marks_Mark_Mark,EllipseModel);var LineModel=mobx_state_tree_module.gK.model("LineModel",{x1:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),y1:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),x2:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),y2:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number)}).views(self=>({get coords(){return{x:self.x1,y:self.y1}},deleteButtonPosition:scale=>({x:self.x1>self.x2?self.x1+16/scale:self.x1-16/scale,y:self.y1}),get length(){var{x1,y1,x2,y2}=self;return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2))},get isValid(){return self.length-5>0},get tool(){return(0,mobx_state_tree_module.k2)(self,LineTool_LineTool)},get toolComponent(){return components_Line_Line}})).actions(self=>({initialDrag(_ref){var{x,y}=_ref;self.x2=x,self.y2=y},initialPosition(_ref2){var{x,y}=_ref2;self.x1=x,self.y1=y,self.x2=x,self.y2=y},move(_ref3){var{x,y}=_ref3;self.x1+=x,self.x2+=x,self.y1+=y,self.y2+=y},setCoordinates(_ref4){var{x1,y1,x2,y2}=_ref4;self.x1=x1,self.y1=y1,self.x2=x2,self.y2=y2}}));const marks_Line_Line=mobx_state_tree_module.gK.compose("Line",marks_Mark_Mark,LineModel);var PointModel=mobx_state_tree_module.gK.model("PointModel",{x:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),y:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0)}).views(self=>({get coords(){return{x:self.x,y:self.y}},deleteButtonPosition(scale){var theta=Math.PI/180*45;return{x:20/scale*Math.cos(theta),y:20/scale*-1*Math.sin(theta)}},get tool(){return(0,mobx_state_tree_module.k2)(self,PointTool_PointTool)},get toolComponent(){return components_Point_Point}})).actions(self=>({initialDrag(_ref){var{x,y}=_ref;self.x=x,self.y=y},initialPosition(_ref2){var{x,y}=_ref2;self.x=x,self.y=y},move(_ref3){var{x,y}=_ref3;self.x+=x,self.y+=y},setCoordinates(_ref4){var{x,y}=_ref4;self.x=x,self.y=y}}));const marks_Point_Point=mobx_state_tree_module.gK.compose("Point",marks_Mark_Mark,PointModel),FixedNumber=mobx_state_tree_module.gK.custom({name:"FixedNumber",fromSnapshot(snapshot){var roundedString=parseFloat(snapshot).toFixed(2);return parseFloat(roundedString)},toSnapshot(value){var roundedString=parseFloat(value).toFixed(2);return parseFloat(roundedString)},isTargetType(value){var roundedValue=parseFloat(value).toFixed(2);return value===parseFloat(roundedValue)},getValidationMessage(snapshot){var value=parseFloat(snapshot);return isNaN(value)?"".concat(snapshot," is not a number"):""}});var SingleCoord=mobx_state_tree_module.gK.model({x:FixedNumber,y:FixedNumber}).actions(self=>({moveTo(_ref){var{x,y}=_ref;self.x=x,self.y=y}})),PolygonModel=mobx_state_tree_module.gK.model("PolygonModel",{points:mobx_state_tree_module.gK.array(SingleCoord)}).volatile(()=>({guideLineX:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),guideLineY:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number)})).views(self=>({get coords(){var _self$initialPoint,_self$initialPoint2;return{x:null===(_self$initialPoint=self.initialPoint)||void 0===_self$initialPoint?void 0:_self$initialPoint.x,y:null===(_self$initialPoint2=self.initialPoint)||void 0===_self$initialPoint2?void 0:_self$initialPoint2.y}},deleteButtonPosition:scale=>({x:self.points[0].x-16/scale,y:self.points[0].y-16/scale}),get isValid(){return self.points.length>=3},get tool(){return(0,mobx_state_tree_module.k2)(self,PolygonTool_PolygonTool)},get initialPoint(){var[firstCoord]=self.points;return firstCoord||null},get lastPoint(){var lastCoord=self.points[self.points.length-1];return lastCoord||null},get path(){var[firstCoord1,...otherCoords]=self.points;return firstCoord1?self.points.map(_ref2=>{var{x,y}=_ref2;return"".concat(x,",").concat(y)}).join(" "):""},get toolComponent(){return components_Polygon_Polygon}})).actions(self=>({initialDrag(_ref3){var{x,y}=_ref3,newPoint=SingleCoord.create({x,y}),{initialPoint}=self;newPoint.x!==initialPoint.x&&newPoint.y!==initialPoint.y&&(self.points[1]=newPoint)},initialPosition(_ref4){var{x,y}=_ref4;self.points[0]={x,y}},move(_ref5){var{x,y}=_ref5;return self.points.map(coord=>{coord.x+=x,coord.y+=y})},setCoordinates(points){self.points=points},appendPath(_ref6){var{x,y}=_ref6;self.points.push({x,y})},shortenPath(){for(var lengthToRemove=1;lengthToRemove--;)self.points.pop()},setGuideLine(event){self.guideLineX=event.x,self.guideLineY=event.y}}));const marks_Polygon_Polygon=mobx_state_tree_module.gK.compose("Polygon",marks_Mark_Mark,PolygonModel);var RectangleModel=mobx_state_tree_module.gK.model("RectangleModel",{x_center:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),y_center:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),width:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),height:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number)}).views(self=>({get coords(){return{x:self.x_center,y:self.y_center}},deleteButtonPosition:scale=>({x:self.x_center+self.width/2+16/scale,y:self.y_center-self.height/2}),get isValid(){return self.width-5>0&&self.height-5>0},get tool(){return(0,mobx_state_tree_module.k2)(self,RectangleTool_RectangleTool)},get toolComponent(){return components_Rectangle_Rectangle}})).actions(self=>({initialDrag(_ref){var{x,y}=_ref,x_left=x<self.x_center?x:self.x_center-self.width/2,x_right=x>self.x_center?x:self.x_center+self.width/2,y_top=y<self.y_center?y:self.y_center-self.height/2,y_bottom=y>self.y_center?y:self.y_center+self.height/2;self.width=x_right-x_left,self.height=y_bottom-y_top,self.x_center=(x_left+x_right)/2,self.y_center=(y_top+y_bottom)/2},initialPosition(_ref2){var{x,y}=_ref2;self.x_center=x,self.y_center=y,self.width=0,self.height=0},move(_ref3){var{x,y}=_ref3;self.x_center+=x,self.y_center+=y},setCoordinates(_ref4){var{x_left,x_right,y_top,y_bottom}=_ref4;self.x_center=(x_left+x_right)/2,self.y_center=(y_top+y_bottom)/2,self.width=Math.abs(x_right-x_left),self.height=Math.abs(y_bottom-y_top)}}));const marks_Rectangle_Rectangle=mobx_state_tree_module.gK.compose("Rectangle",marks_Mark_Mark,RectangleModel);var RotateRectangleModel=mobx_state_tree_module.gK.model("RotateRectangleModel",{angle:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0)}).views(self=>({get tool(){return(0,mobx_state_tree_module.k2)(self,RotateRectangleTool_RotateRectangleTool)},get toolComponent(){return components_RotateRectangle_RotateRectangle},get x_rotate(){return self.x_center},get y_rotate(){return self.y_center}})).actions(self=>({setCoordinates(_ref){var{x_left,x_right,y_top,y_bottom,angle}=_ref;self.x_center=(x_left+x_right)/2,self.y_center=(y_top+y_bottom)/2,self.width=Math.abs(x_right-x_left),self.height=Math.abs(y_bottom-y_top),self.angle=angle},resizeByCorner(_ref2){var{dx=0,dy=0,corner=""}=_ref2;if((0!==dx||0!==dy)&&["top left","top right","bottom right","bottom left"].includes(corner)){var deltaAngle=Math.atan2(dy,dx),deltaDistance=Math.sqrt(dx*dx+dy*dy),transformedAngle=deltaAngle-self.angle*Math.PI/180,transformedDx=Math.cos(transformedAngle)*deltaDistance,transformedDy=Math.sin(transformedAngle)*deltaDistance;switch(corner){case"top left":self.width=Math.max(self.width-transformedDx,1),self.height=Math.max(self.height-transformedDy,1);break;case"top right":self.width=Math.max(self.width+transformedDx,1),self.height=Math.max(self.height-transformedDy,1);break;case"bottom right":self.width=Math.max(self.width+transformedDx,1),self.height=Math.max(self.height+transformedDy,1);break;case"bottom left":self.width=Math.max(self.width-transformedDx,1),self.height=Math.max(self.height+transformedDy,1)}self.x_center+=.5*dx,self.y_center+=.5*dy}}}));const marks_RotateRectangle_RotateRectangle=mobx_state_tree_module.gK.compose("RotateRectangle",marks_Rectangle_Rectangle,RotateRectangleModel);const formatTimeStamp_formatTimeStamp=function formatTimeStamp(played,duration){var timeStamp=duration?played*duration:played;if("number"!=typeof timeStamp||isNaN(timeStamp))return"NaN";if(timeStamp<1)return"0:00";var date=new Date(1e3*timeStamp),mm=date.getUTCMinutes(),ss=function padSeconds(string){return("0"+string).slice(-2)}(date.getUTCSeconds());return"".concat(mm,":").concat(ss)};var TemporalPointModel=mobx_state_tree_module.gK.model("TemporalPointModel",{displayTime:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),displayTimeStamp:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"")}).views(self=>({get tool(){return(0,mobx_state_tree_module.k2)(self,TemporalPointTool_TemporalPointTool)},get toolComponent(){return components_Point_Point},get videoTime(){return self.displayTime}})).actions(self=>({setVideoTime(displayTime,duration){self.displayTime=displayTime,self.displayTimeStamp=formatTimeStamp_formatTimeStamp(displayTime,duration)}}));const TemporalPoint_TemporalPoint=mobx_state_tree_module.gK.compose("TemporalPoint",marks_Point_Point,TemporalPointModel);var TemporalRotateRectangleModel=mobx_state_tree_module.gK.model("TemporalRotateRectangleModel",{displayTime:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),displayTimeStamp:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"")}).views(self=>({get tool(){return(0,mobx_state_tree_module.k2)(self,TemporalRotateRectangleTool_TemporalRotateRectangleTool)},get toolComponent(){return components_RotateRectangle_RotateRectangle},get videoTime(){return self.displayTime}})).actions(self=>({setVideoTime(displayTime,duration){self.displayTime=displayTime,self.displayTimeStamp=formatTimeStamp_formatTimeStamp(displayTime,duration)}}));const TemporalRotateRectangle_TemporalRotateRectangle=mobx_state_tree_module.gK.compose("TemporalRotateRectangle",marks_RotateRectangle_RotateRectangle,TemporalRotateRectangleModel);var FreehandLine_SingleCoord=mobx_state_tree_module.gK.model("SingleCoord",{x:FixedNumber,y:FixedNumber}),ActionType=mobx_state_tree_module.gK.model("ActionType",{type:mobx_state_tree_module.gK.enumeration(["append","end","start","splice-append","splice-close-point","splice-drag-point","splice-end"]),pointIndexDrag:mobx_state_tree_module.gK.number,pointIndexClose:mobx_state_tree_module.gK.number,pointsFromDrag:mobx_state_tree_module.gK.array(FreehandLine_SingleCoord),pointsFromClose:mobx_state_tree_module.gK.array(FreehandLine_SingleCoord),pointsSpliceCount:mobx_state_tree_module.gK.number,isReversed:mobx_state_tree_module.gK.boolean,throughBeginning:mobx_state_tree_module.gK.boolean}),FreehandLineModel=mobx_state_tree_module.gK.model("FreehandLineModel",{pathX:mobx_state_tree_module.gK.array(FixedNumber),pathY:mobx_state_tree_module.gK.array(FixedNumber)}).views(self=>({get isValid(){return!0},get tool(){return(0,mobx_state_tree_module.k2)(self,FreehandLineTool_FreehandLineTool)},get toolComponent(){return components_FreehandLine_FreehandLine},get closeDistance(){return Math.ceil(10/self.scale)},get isCloseToStart(){return!(!self.dragPoint||!self.closePoint)&&self.pointDistance(self.dragPoint,self.closePoint)<self.closeDistance},pointDistance:(p1,p2)=>self.getDistance(p1.x,p1.y,p2.x,p2.y),findClosestPathPointIndex(_ref){var{x,y}=_ref,distances=self.points.map(point=>self.pointDistance({x,y},point)),minDistance=Math.min(...distances);return distances.indexOf(minDistance)},get visiblePathsRender(){var paths=[];if(self.spliceActive)if(self.spliceThroughBeginning){var startIndex=self.spliceReverse?self.spliceDragPointIndex:self.spliceClosePointIndex,endIndex=self.spliceReverse?self.spliceClosePointIndex:self.spliceDragPointIndex;paths.push(self.points.slice(startIndex,endIndex+1))}else{var _endIndex=self.spliceReverse?self.spliceClosePointIndex:self.spliceDragPointIndex;paths.push(self.points.slice(0,_endIndex+1));var _startIndex=self.spliceReverse?self.spliceDragPointIndex:self.spliceClosePointIndex;paths.push(self.points.slice(_startIndex,self.points.length))}else paths.push(self.points);return paths.push(self.splicePoints),paths},get splicePathRender(){if(!self.spliceActive)return[];var pnts=[],startIndex1=self.spliceReverse?self.spliceClosePointIndex:self.spliceDragPointIndex,endIndex1=self.spliceReverse?self.spliceDragPointIndex:self.spliceClosePointIndex;return pnts=self.spliceThroughBeginning?(pnts=pnts.concat(self.points.slice(endIndex1,self.points.length))).concat(self.points.slice(0,startIndex1+1)):pnts.concat(self.points.slice(startIndex1,endIndex1+1))},get toData(){return{scale:self.scale,points:self.points,dragPoint:self.dragPoint,closePoint:self.closePoint,pathIsClosed:self.pathIsClosed,isDragging:self.isDragging,spliceActive:self.spliceActive,spliceReverse:self.spliceReverse,spliceThroughBeginning:self.spliceThroughBeginning,spliceDragPointIndex:self.spliceDragPointIndex,spliceClosePointIndex:self.spliceClosePointIndex,splicePoints:self.splicePoints,drawActions:self.drawActions,redoActions:self.redoActions}}})).volatile(self=>({scale:mobx_state_tree_module.gK.number,lineResolution:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,.5),minimumPoints:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,20),undoActionPointThreshold:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,20),points:mobx_state_tree_module.gK.array(FreehandLine_SingleCoord),dragPoint:mobx_state_tree_module.gK.maybeNull(FreehandLine_SingleCoord),closePoint:mobx_state_tree_module.gK.maybeNull(FreehandLine_SingleCoord),pathIsClosed:mobx_state_tree_module.gK.boolean,isDragging:!1,spliceActive:mobx_state_tree_module.gK.boolean,spliceReverse:mobx_state_tree_module.gK.boolean,spliceThroughBeginning:mobx_state_tree_module.gK.boolean,spliceDragPointIndex:mobx_state_tree_module.gK.maybeNull(mobx_state_tree_module.gK.number),spliceClosePointIndex:mobx_state_tree_module.gK.maybeNull(mobx_state_tree_module.gK.number),splicePoints:mobx_state_tree_module.gK.array(FreehandLine_SingleCoord),drawActions:mobx_state_tree_module.gK.array(ActionType),redoActions:mobx_state_tree_module.gK.array(ActionType)})).actions(self=>({afterCreate:()=>{var points=self.points||[];self.pathX&&self.pathY&&(points=self.pathX.map((x,i)=>({x:self.pathX[i],y:self.pathY[i]}))),self.initialize(points)},initialize(){var points=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];self.scale=1,self.lineResolution=isNaN(self.lineResolution)?.5:self.lineResolution,self.minimumPoints=isNaN(self.minimumPoints)?20:self.minimumPoints,self.undoActionPointThreshold=isNaN(self.undoActionPointThreshold)?20:self.undoActionPointThreshold,self.pathIsClosed=!1,self.points=[...points],self.setClosePoint(self.points.at(0)),self.setDragPoint(self.points.at(-1)),self.isCloseToStart&&self.points.length>self.minimumPoints&&(self.setClosePoint(null),self.setDragPoint(null),self.pathIsClosed=!0),self.splicePoints=[],self.spliceDragPointIndex=null,self.spliceClosePointIndex=null,self.spliceActive=!1,self.spliceReverse=!1,self.spliceThroughBeginning=!1,self.drawActions=[],self.redoActions=[]},setDragPoint(point){self.dragPoint=point},setClosePoint(point){self.closePoint=point},setScale(scale){self.scale=scale},setLineResolution(lineResolution){self.lineResolution=lineResolution},setMinimumPoints(minimumPoints){self.minimumPoints=minimumPoints},setUndoActionPointThreshold(undoActionPointThreshold){self.undoActionPointThreshold=undoActionPointThreshold},initialPosition(event){self.initialize([{x:event.x,y:event.y}]),self.appendPathStart()},initialDrag(point){self.appendPath(point)},close(){self.closePath()},appendPathStart(){self.isDragging=!0,self.drawActions.push({type:self.spliceActive?"splice-append":"append",pointIndexDrag:self.spliceDragPointIndex,pointIndexClose:self.spliceClosePointIndex,pointsFromDrag:[],pointsFromClose:[],pointsSpliceCount:0,isReversed:self.spliceReverse,throughBeginning:self.spliceThroughBeginning}),self.spliceActive&&0==self.splicePoints.length&&(self.splicePoints=[self.points[self.spliceDragPointIndex]]),self.redoActionsClear()},appendPath(_ref2){var{x,y}=_ref2;if(self.isDragging){var pathPoints=self.spliceActive?self.splicePoints:self.points,newPoint={x,y};self.pointDistance(newPoint,pathPoints.at(-1))<self.lineResolution||(pathPoints.push(newPoint),self.drawActions.at(-1).pointsFromDrag.length>self.undoActionPointThreshold&&self.appendPathStart(),self.drawActions.at(-1).pointsFromDrag.push(newPoint),self.setDragPoint(newPoint),self.isCloseToStart&&(self.spliceActive||!self.spliceActive&&self.points.length>self.minimumPoints)&&(self.isDragging=!1,self.closePath()))}},appendPathEnd(){self.isDragging=!1,0==self.drawActions.at(-1).pointsFromDrag.length&&self.drawActions.pop()},closePath(){if(self.spliceActive){var spliceEndAction=self.closeSplice();self.drawActions.push(spliceEndAction)}else self.drawActions.push({type:"end",pointIndexDrag:-1,pointIndexClose:-1,pointsFromDrag:[{x:self.points.at(0).x,y:self.points.at(0).y}],pointsFromClose:[],pointsSpliceCount:0,isReversed:!1,throughBeginning:!1}),self.points.push(self.points.at(0)),self.setDragPoint(null),self.setClosePoint(null),self.pathIsClosed=!0},closeSplice(){self.splicePoints.shift();var closeSpliceAction={type:"splice-end",pointIndexDrag:self.spliceDragPointIndex,pointIndexClose:self.spliceClosePointIndex,pointsFromDrag:[],pointsFromClose:[],pointsSpliceCount:self.splicePoints.length,isReversed:self.spliceReverse,throughBeginning:self.spliceThroughBeginning},startIndex=self.spliceReverse?self.spliceClosePointIndex:self.spliceDragPointIndex,endIndex=self.spliceReverse?self.spliceDragPointIndex:self.spliceClosePointIndex;return startIndex++,self.spliceThroughBeginning?(self.spliceReverse&&(self.splicePoints=self.splicePoints.reverse()),self.splicePoints.push(self.points.at(endIndex)),closeSpliceAction.pointsFromClose=closeSpliceAction.pointsFromClose.concat(self.points.slice(startIndex,self.points.length)),closeSpliceAction.pointsFromDrag=closeSpliceAction.pointsFromDrag.concat(self.points.slice(0,endIndex)),self.points.splice(startIndex,self.points.length-startIndex),self.points.splice(0,endIndex),self.points.splice(self.points.length,0,...self.splicePoints)):(closeSpliceAction.pointsFromDrag=closeSpliceAction.pointsFromDrag.concat(self.points.slice(startIndex,endIndex)),self.spliceReverse&&(self.splicePoints=self.splicePoints.reverse()),self.points.splice(startIndex,endIndex-startIndex,...self.splicePoints)),self.spliceReset(),self.setDragPoint(self.pathIsClosed?null:self.points.at(-1)),self.setClosePoint(self.pathIsClosed?null:self.points.at(0)),closeSpliceAction},undo(){if(0!=self.drawActions.length){var action=self.drawActions.at(-1);if("start"==action.type)self.drawActions.pop(),self.tool.deleteMark(self);else if("end"==action.type)self.points.pop(),self.setDragPoint(self.points.at(-1)),self.setClosePoint(self.points.at(0)),self.drawActions.pop();else if("append"==action.type){var indexStart=self.points.length-action.pointsFromDrag.length;self.points.splice(indexStart,action.pointsFromDrag.length),self.setDragPoint(self.points.at(-1)),self.drawActions.pop()}else if("splice-drag-point"==action.type)self.spliceDragPointIndex=null,self.setDragPoint(self.pathIsClosed?null:self.points.at(-1)),self.setClosePoint(self.pathIsClosed?null:self.points.at(0)),self.drawActions.pop();else if("splice-close-point"==action.type)self.splicePoints.length=0,self.setClosePoint(null),self.spliceReverse=!1,self.spliceThroughBeginning=!1,self.spliceActive=!1,self.spliceClosePointIndex=null,self.drawActions.pop();else if("splice-append"==action.type){var _indexStart=self.splicePoints.length-action.pointsFromDrag.length;self.splicePoints.splice(_indexStart,action.pointsFromDrag.length),self.setDragPoint(self.splicePoints.at(-1)),self.drawActions.pop()}else if("splice-end"==action.type){if(action.throughBeginning){var spliceIndex=Math.abs(action.pointIndexDrag-action.pointIndexClose);self.splicePoints=self.splicePoints.concat(self.points.slice(spliceIndex,self.points.length-1)),action.isReversed&&(self.splicePoints=self.splicePoints.reverse()),self.points.splice(spliceIndex+1,self.points.length-spliceIndex,...action.pointsFromClose),self.points.splice(0,0,...action.pointsFromDrag)}else{var _spliceIndex=action.isReversed?action.pointIndexClose:action.pointIndexDrag;self.splicePoints=self.splicePoints.concat(self.points.slice(_spliceIndex,_spliceIndex+action.pointsSpliceCount+1)),action.isReversed&&(self.splicePoints=self.splicePoints.reverse()),self.points.splice(_spliceIndex+1,action.pointsSpliceCount,...action.pointsFromDrag)}self.spliceActive=!0,self.spliceReverse=action.isReversed,self.spliceThroughBeginning=action.throughBeginning,self.spliceDragPointIndex=action.pointIndexDrag,self.spliceClosePointIndex=action.pointIndexClose,self.setDragPoint(self.splicePoints.at(-1)),self.setClosePoint(self.points[self.spliceClosePointIndex]),self.drawActions.pop()}self.redoActions.push(action)}else 1==self.points.length&&self.finish()},redo(){if(0!=self.redoActions.length){var action=self.redoActions.at(-1);"end"==action.type?self.closePath():"append"==action.type?(self.points.splice(self.points.length,0,...action.pointsFromDrag),self.setDragPoint(self.points.at(-1)),self.drawActions.push(action)):"splice-drag-point"==action.type?(self.spliceDragPointIndex=action.pointIndexDrag,self.setDragPoint(self.points[action.pointIndexDrag]),self.setClosePoint(null),self.drawActions.push(action)):"splice-close-point"==action.type?(self.setClosePoint(self.points[action.pointIndexDrag]),self.drawActions.push(action),self.splicePathSetup()):"splice-append"==action.type?(0==self.splicePoints.length&&self.splicePoints.push(self.dragPoint),self.splicePoints.splice(self.splicePoints.length,0,...action.pointsFromDrag),self.setDragPoint(self.splicePoints.at(-1)),self.drawActions.push(action)):"splice-end"==action.type&&(self.closeSplice(),self.drawActions.push(action)),self.redoActions.pop()}},redoActionsClear(){self.redoActions.length=0},splicePathDragPoint(point){if(!self.spliceDragPointIndex){var closestPointIndex=self.findClosestPathPointIndex(point);self.drawActions.push({type:"splice-drag-point",pointIndexDrag:closestPointIndex,pointIndexClose:-1,pointsFromDrag:[],pointsFromClose:[],pointsSpliceCount:0,isReversed:!1,throughBeginning:!1}),self.spliceDragPointIndex=closestPointIndex,self.setDragPoint(self.points.at(closestPointIndex)),self.setClosePoint(null),self.redoActionsClear()}},splicePathClosePoint(point){if(self.spliceDragPointIndex&&!self.spliceClosePointIndex){var dragPointIndex=self.spliceDragPointIndex,closePointIndex=self.findClosestPathPointIndex(point),spliceSpan=Math.abs(closePointIndex-dragPointIndex),spliceReverse=closePointIndex<dragPointIndex,spliceThroughBeginning=!1;self.pathIsClosed&&(spliceSpan>self.points.length/2&&(spliceSpan=Math.abs(dragPointIndex-closePointIndex),spliceReverse=dragPointIndex<closePointIndex),(spliceReverse&&dragPointIndex<spliceSpan||!spliceReverse&&dragPointIndex+spliceSpan>self.points.length)&&(spliceThroughBeginning=!0)),self.drawActions.push({type:"splice-close-point",pointIndexDrag:dragPointIndex,pointIndexClose:closePointIndex,pointsFromDrag:[],pointsFromClose:[],pointsSpliceCount:0,isReversed:spliceReverse,throughBeginning:spliceThroughBeginning}),self.splicePathSetup(),self.redoActionsClear()}},splicePathSetup(){var action=self.drawActions.at(-1);self.spliceClosePointIndex=action.pointIndexClose,self.spliceReverse=action.isReversed,self.spliceThroughBeginning=action.throughBeginning,self.spliceActive=!0,self.setClosePoint(self.points[action.pointIndexClose])},spliceReset(){self.splicePoints.length=0,self.spliceActive=!1,self.spliceReverse=!1,self.spliceThroughBeginning=!1,self.spliceDragPointIndex=null,self.spliceClosePointIndex=null},move(){},inactive(){if(0!==self.drawActions.length)for(;["splice-drag-point","splice-close-point","splice-append"].indexOf(self.drawActions.at(-1).type)>-1;)self.undo(),self.redoActionsClear()},finalizePoints(){self.pathX=[],self.pathY=[],self.points.forEach(point=>{self.pathX.push(point.x),self.pathY.push(point.y)})},finish(){if(self.points.length<self.minimumPoints)return self.tool.deleteMark(self);self.isDragging?(self.appendPathEnd(),self.finished=!0):self.pathIsClosed?(self.finished=!0,self.finalizePoints()):self.finalizePoints()}}));const marks_FreehandLine_FreehandLine=mobx_state_tree_module.gK.compose("FreehandLine",marks_Mark_Mark,FreehandLineModel);var TranscriptionLineModel=mobx_state_tree_module.gK.model("TranscriptionLineModel",{x1:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),y1:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),x2:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),y2:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number)}).views(self=>({get coords(){return{x:self.x1,y:self.y1}},deleteButtonPosition(scale){var dx=self.x2-self.x1,dy=self.y2-self.y1,xBuffer=dx?dx/self.length*20:20,yBuffer=dy?dy/self.length*20:0;return{x:self.x2+xBuffer/scale,y:self.y2+yBuffer/scale}},get isValid(){return self.x1!==self.x2||self.y1!==self.y2},get length(){var{x1,y1,x2,y2}=self;return Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2))},get tool(){return(0,mobx_state_tree_module.k2)(self,TranscriptionLineTool_TranscriptionLineTool)},get toolComponent(){return components_TranscriptionLine_TranscriptionLine}})).actions(self=>({initialDrag(_ref){var{x,y}=_ref;self.x2=x,self.y2=y},initialPosition(_ref2){var{x,y}=_ref2;self.x1=x,self.y1=y,self.x2=x,self.y2=y},move(_ref3){var{x,y}=_ref3;self.x1+=x,self.x2+=x,self.y1+=y,self.y2+=y},setCoordinates(_ref4){var{x1,y1,x2,y2}=_ref4;self.x1=x1,self.y1=y1,self.x2=x2,self.y2=y2}}));const marks_TranscriptionLine_TranscriptionLine=mobx_state_tree_module.gK.compose("TranscriptionLine",marks_Mark_Mark,TranscriptionLineModel);var Tool_console=__webpack_require__("../../node_modules/console-browserify/index.js");const Tool_Tool=mobx_state_tree_module.gK.model("Tool",{color:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),details:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen()),label:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),marks:mobx_state_tree_module.gK.map(marks_Mark_Mark),max:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.union(mobx_state_tree_module.gK.string,mobx_state_tree_module.gK.number),1/0),min:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.union(mobx_state_tree_module.gK.string,mobx_state_tree_module.gK.number),0),tasks:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.union(single.TaskModel,multiple.TaskModel,tasks_text.TaskModel,dropdown_simple.TaskModel)),type:mobx_state_tree_module.gK.literal("default")}).preProcessSnapshot(snapshot=>{var newSnapshot=Object.assign({},snapshot);return snapshot.max||(newSnapshot.max=1/0),snapshot.min||(newSnapshot.min=0),snapshot.details&&!snapshot.tasks&&(newSnapshot.tasks=[],snapshot.details.forEach((detail,detailIndex)=>{var toolKey=snapshot.key||"subtask",taskKey="".concat(toolKey,".").concat(detailIndex),taskSnapshot=Object.assign({},detail,{taskKey});newSnapshot.tasks.push(taskSnapshot)})),newSnapshot}).views(self=>({get disabled(){return self.marks.size>=self.max},get isComplete(){return Array.from(self.marks.values()).reduce((allComplete,mark)=>allComplete&&mark.isComplete,!0)&&self.marks.size>=self.min},get isValid(){return Array.from(self.marks.values()).reduce((allValid,mark)=>allValid&&mark.isValid,!0)}})).actions(self=>({createMark(mark){var newMark=marks_Mark_Mark.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},createTask(snapshot){try{return self.tasks.push(snapshot),self.tasks[self.tasks.length-1]}catch(e){Tool_console.error("".concat(snapshot.taskKey," is not a valid drawing subtask"))}},deleteMark(mark){self.marks.delete(mark.id)},reset(){self.marks.clear()},validate(){self.marks.forEach(mark=>{mark.finish()})}}));var CircleTool=mobx_state_tree_module.gK.model("Circle",{marks:mobx_state_tree_module.gK.map(marks_Circle_Circle),type:mobx_state_tree_module.gK.literal("circle")}).actions(self=>({createMark(mark){var newMark=marks_Circle_Circle.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag(event)},handlePointerUp(event,mark){mark.finish()}}));const CircleTool_CircleTool=mobx_state_tree_module.gK.compose("CircleTool",Tool_Tool,CircleTool);var EllipseTool=mobx_state_tree_module.gK.model("Ellipse",{marks:mobx_state_tree_module.gK.map(marks_Ellipse_Ellipse),type:mobx_state_tree_module.gK.literal("ellipse")}).actions(self=>({createMark(mark){var newMark=marks_Ellipse_Ellipse.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag(event)},handlePointerUp(event,mark){mark.setDragging(!1)}}));const EllipseTool_EllipseTool=mobx_state_tree_module.gK.compose("EllipseTool",Tool_Tool,EllipseTool);var LineTool=mobx_state_tree_module.gK.model("Line",{marks:mobx_state_tree_module.gK.map(marks_Line_Line),type:mobx_state_tree_module.gK.literal("line")}).actions(self=>({createMark(mark){var newMark=marks_Line_Line.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag(event)},handlePointerUp(event,mark){mark.finish()}}));const LineTool_LineTool=mobx_state_tree_module.gK.compose("LineTool",Tool_Tool,LineTool);var PointTool=mobx_state_tree_module.gK.model("Point",{marks:mobx_state_tree_module.gK.map(marks_Point_Point),size:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration(["large","small"]),"large"),type:mobx_state_tree_module.gK.literal("point")}).actions(self=>({createMark(mark){var newMark=marks_Point_Point.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag(event)},handlePointerUp(event,mark){mark.finish()}}));const PointTool_PointTool=mobx_state_tree_module.gK.compose("PointTool",Tool_Tool,PointTool);var PolygonTool=mobx_state_tree_module.gK.model("Polygon",{marks:mobx_state_tree_module.gK.map(marks_Polygon_Polygon),type:mobx_state_tree_module.gK.literal("polygon")}).actions(self=>({createMark(mark){var newMark=marks_Polygon_Polygon.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerDown(event,mark){mark.appendPath(event)},handlePointerMove(event,mark){null==mark||mark.setGuideLine(event)},handlePointerUp(event,mark){1===(null==mark?void 0:mark.points.length)&&mark.initialDrag(event)}}));const PolygonTool_PolygonTool=mobx_state_tree_module.gK.compose("PolygonTool",Tool_Tool,PolygonTool);var RectangleTool=mobx_state_tree_module.gK.model("Rectangle",{marks:mobx_state_tree_module.gK.map(marks_Rectangle_Rectangle),type:mobx_state_tree_module.gK.literal("rectangle")}).actions(self=>({createMark(mark){var newMark=marks_Rectangle_Rectangle.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag(event)},handlePointerUp(event,mark){mark.finish()}}));const RectangleTool_RectangleTool=mobx_state_tree_module.gK.compose("RectangleTool",Tool_Tool,RectangleTool);var RotateRectangleTool=mobx_state_tree_module.gK.model("RotateRectangle",{marks:mobx_state_tree_module.gK.map(marks_RotateRectangle_RotateRectangle),type:mobx_state_tree_module.gK.literal("rotateRectangle")}).actions(self=>({createMark(mark){var newMark=marks_RotateRectangle_RotateRectangle.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag(event)},handlePointerUp(event,mark){mark.finish()}}));const RotateRectangleTool_RotateRectangleTool=mobx_state_tree_module.gK.compose("RotateRectangleTool",RectangleTool_RectangleTool,RotateRectangleTool);var TemporalPointTool=mobx_state_tree_module.gK.model("TemporalPoint",{marks:mobx_state_tree_module.gK.map(TemporalPoint_TemporalPoint),type:mobx_state_tree_module.gK.literal("temporalPoint")}).actions(self=>({createMark(mark){var newMark=TemporalPoint_TemporalPoint.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag(event)},handlePointerUp(event,mark){mark.finish()}}));const TemporalPointTool_TemporalPointTool=mobx_state_tree_module.gK.compose("TemporalPointTool",PointTool_PointTool,TemporalPointTool);var TemporalRotateRectangleTool=mobx_state_tree_module.gK.model("TemporalRotateRectangle",{marks:mobx_state_tree_module.gK.map(TemporalRotateRectangle_TemporalRotateRectangle),type:mobx_state_tree_module.gK.literal("temporalRotateRectangle")}).actions(self=>({createMark(mark){var newMark=TemporalRotateRectangle_TemporalRotateRectangle.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag(event)},handlePointerUp(event,mark){mark.finish()}}));const TemporalRotateRectangleTool_TemporalRotateRectangleTool=mobx_state_tree_module.gK.compose("TemporalRotateRectangleTool",RotateRectangleTool_RotateRectangleTool,TemporalRotateRectangleTool);function FreehandLineTool_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function FreehandLineTool_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FreehandLineTool_ownKeys(Object(t),!0).forEach(function(r){FreehandLineTool_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FreehandLineTool_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function FreehandLineTool_defineProperty(e,r,t){return(r=function FreehandLineTool_toPropertyKey(t){var i=function FreehandLineTool_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var FreehandLineTool=mobx_state_tree_module.gK.model("FreehandLine",{marks:mobx_state_tree_module.gK.map(marks_FreehandLine_FreehandLine),type:mobx_state_tree_module.gK.literal("freehandLine")}).actions(self=>({createMark(mark){var newMark=marks_FreehandLine_FreehandLine.create(FreehandLineTool_objectSpread(FreehandLineTool_objectSpread({},mark),{},{toolType:self.type}));return self.marks.put(newMark),newMark},handlePointerMove(event,mark){mark.initialDrag({x:event.x,y:event.y})},handlePointerUp(event,mark){mark.finish()}}));const FreehandLineTool_FreehandLineTool=mobx_state_tree_module.gK.compose("FreehandLineTool",Tool_Tool,FreehandLineTool);var TranscriptionLineTool=mobx_state_tree_module.gK.model("TranscriptionLine",{marks:mobx_state_tree_module.gK.map(marks_TranscriptionLine_TranscriptionLine),type:mobx_state_tree_module.gK.literal("transcriptionLine")}).actions(self=>({handlePointerDown(event,mark){mark.initialDrag(event),mark.finish()},createMark(mark){var newMark=marks_TranscriptionLine_TranscriptionLine.create(Object.assign({},mark,{toolType:self.type}));return self.marks.put(newMark),newMark}}));const TranscriptionLineTool_TranscriptionLineTool=mobx_state_tree_module.gK.compose("TranscriptionLineTool",Tool_Tool,TranscriptionLineTool);var DrawingAnnotation_excluded=["id"],_excluded2=["annotations"];function DrawingAnnotation_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function DrawingAnnotation_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var allDrawingMarks=Object.values(marks_namespaceObject),GenericMark=mobx_state_tree_module.gK.union(...allDrawingMarks),Drawing=mobx_state_tree_module.gK.model("Drawing",{taskType:mobx_state_tree_module.gK.literal("drawing"),value:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.safeReference(GenericMark))}).views(self=>({toSnapshot(){var snapshot=(0,mobx_state_tree_module.dV)(self),value=(0,mobx_state_tree_module.KE)(models_DrawingTask,(0,mobx_state_tree_module.Zn)(self),self.task).marks.map(mark=>(0,mobx_state_tree_module.dV)(mark)),drawingSnapshot=Object.assign({},snapshot,{value}),drawingAnnotations=[drawingSnapshot];return drawingSnapshot.value.forEach((markSnapshot,markIndex)=>{var mark=Object.assign({},markSnapshot);mark.details=mark.annotations.map(annotation=>({task:annotation.task})),mark.annotations.forEach(markAnnotation=>{var finalAnnotation=Object.assign({},markAnnotation,{markIndex}),{id}=finalAnnotation,rest=DrawingAnnotation_objectWithoutProperties(finalAnnotation,DrawingAnnotation_excluded);drawingAnnotations.push(rest)});var{annotations}=mark,rest=DrawingAnnotation_objectWithoutProperties(mark,_excluded2);drawingSnapshot.value[markIndex]=rest}),drawingAnnotations}}));const models_DrawingAnnotation=mobx_state_tree_module.gK.compose("DrawingAnnotation",models_Annotation,Drawing);var DrawingTask_console=__webpack_require__("../../node_modules/console-browserify/index.js");function DrawingTask_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function DrawingTask_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DrawingTask_ownKeys(Object(t),!0).forEach(function(r){DrawingTask_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DrawingTask_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function DrawingTask_defineProperty(e,r,t){return(r=function DrawingTask_toPropertyKey(t){var i=function DrawingTask_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var markModels=Object.values(marks_namespaceObject),DrawingTask_GenericMark=mobx_state_tree_module.gK.union(...markModels),toolModels=Object.values(tools_namespaceObject),GenericTool=mobx_state_tree_module.gK.union(...toolModels),DrawingTask_Drawing=mobx_state_tree_module.gK.model("Drawing",{activeMark:mobx_state_tree_module.gK.safeReference(DrawingTask_GenericMark),activeToolIndex:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),annotation:mobx_state_tree_module.gK.safeReference(models_DrawingAnnotation),shownMarks:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration(Object.keys(helpers_shownMarks)),helpers_shownMarks.ALL),hiddenMarkIds:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),[]),tools:mobx_state_tree_module.gK.array(GenericTool),type:mobx_state_tree_module.gK.literal("drawing")}).preProcessSnapshot(snapshot=>{var _snapshot$tools,newSnapshot=DrawingTask_objectSpread({},snapshot);return newSnapshot.tools=[],null===(_snapshot$tools=snapshot.tools)||void 0===_snapshot$tools||_snapshot$tools.forEach((tool,toolIndex)=>{var toolKey="".concat(snapshot.taskKey,".").concat(toolIndex),toolSnapshot=DrawingTask_objectSpread(DrawingTask_objectSpread({},tool),{},{key:toolKey});newSnapshot.tools.push(toolSnapshot)}),newSnapshot}).views(self=>({get activeTool(){return self.tools[self.activeToolIndex]},defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_DrawingAnnotation.create({id,task:self.taskKey,taskType:self.type})},isComplete:()=>self.tools.reduce((isTaskComplete,tool)=>isTaskComplete&&tool.isComplete,!0),get isValid(){return self.tools.reduce((isTaskValid,tool)=>isTaskValid&&tool.isValid,!0)},get marks(){return self.tools.reduce(function flattenMarks(allMarks,tool){var toolMarks=Array.from(tool.marks.values());return allMarks.concat(toolMarks)},[])}})).actions(self=>{function _onLocaleChange(){var stringsSnapshot=(0,mobx_state_tree_module.dV)(self.strings);self.setToolTaskStrings(stringsSnapshot)}function _onToolChange(){self.activeToolIndex>-1&&(self.validate(),self.setActiveMark(void 0))}return{afterCreate(){(0,mobx_state_tree_module.LF)(self,(0,mobx_esm.fm)(_onLocaleChange)),(0,mobx_state_tree_module.LF)(self,(0,mobx_esm.fm)(_onToolChange))},setActiveMark(mark){self.activeMark=null==mark?void 0:mark.id},setActiveTool(toolIndex){self.activeToolIndex=toolIndex},complete(annotation){self.subTaskVisibility=!1},reset(){self.tools.forEach(tool=>tool.reset()),self.activeToolIndex=0,self.subTaskVisibility=!1,self.shownMarks===helpers_shownMarks.NONE&&(self.hiddenMarkIds.clear(),self.shownMarks=helpers_shownMarks.ALL)},setToolTaskStrings(stringsSnapshot){var stringEntries=Object.entries(stringsSnapshot);self.tools.forEach((tool,toolIndex)=>{var toolPrefix="tools.".concat(toolIndex);tool.tasks.forEach((task,taskIndex)=>{var prefix="".concat(toolPrefix,".details.").concat(taskIndex,"."),taskStrings=stringEntries.filter(_ref=>{var[key,value]=_ref;return key.startsWith(prefix)}),taskStringsSnapshot={};taskStrings.forEach(_ref2=>{var[key,value]=_ref2,newKey=key.slice(prefix.length);taskStringsSnapshot[newKey]=value});try{(0,mobx_state_tree_module.Nh)(task.strings,taskStringsSnapshot)}catch(error){DrawingTask_console.error("".concat(task.taskKey," ").concat(task.type,": could not apply language strings")),DrawingTask_console.error(error)}})})},togglePreviousMarks(){self.shownMarks=self.shownMarks===helpers_shownMarks.ALL?helpers_shownMarks.NONE:helpers_shownMarks.ALL,self.shownMarks===helpers_shownMarks.NONE?self.hiddenMarkIds.replace(self.marks.map(mark=>mark.id)):self.hiddenMarkIds.clear()},validate(){self.tools.forEach(tool=>tool.validate())}}});const models_DrawingTask=mobx_state_tree_module.gK.compose("DrawingTask",models_Task,DrawingTask_Drawing),drawing={TaskComponent:components_DrawingTask,TaskModel:models_DrawingTask,AnnotationModel:models_DrawingAnnotation};var StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"SubjectGroupComparisonTask__StyledBox",componentId:"sc-atr3sa-0"})(["img:only-child,svg:only-child{"," max-width:3.75rem;}"],props=>props.theme&&(0,styled_components_browser_esm.css)(["background:",";"],props.theme.global.colors.brand)),SubjectGroupComparisonTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"SubjectGroupComparisonTask__StyledText",componentId:"sc-atr3sa-1"})(["margin:0;padding:0;width:100%;> *:first-child{margin-top:0;}"]);function SubjectGroupComparisonTask(props){var{annotation,className="",disabled=!1,task,theme={global:{colors:{}}}}=props,{value}=annotation;return(0,jsx_runtime.jsx)(StyledBox,{className,disabled,theme,children:(0,jsx_runtime.jsx)(SubjectGroupComparisonTask_StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{children:task.question})})})}SubjectGroupComparisonTask.propTypes={annotation:(0,prop_types.shape)({value:prop_types.array}).isRequired,className:prop_types.string,disabled:prop_types.bool,task:(0,prop_types.shape)({answers:(0,prop_types.arrayOf)((0,prop_types.shape)({label:prop_types.string})),help:prop_types.string,question:prop_types.string,required:prop_types.bool}).isRequired,theme:prop_types.object};const components_SubjectGroupComparisonTask=SubjectGroupComparisonTask;var CellAnnotationsStore_excluded=["id","annotations"];function CellAnnotationsStore_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function CellAnnotationsStore_defineProperty(e,r,t){return(r=function CellAnnotationsStore_toPropertyKey(t){var i=function CellAnnotationsStore_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var CellAnnotationsStore=mobx_state_tree_module.gK.model("CellAnnotationsStore",{id:mobx_state_tree_module.gK.identifier,index:mobx_state_tree_module.gK.number,subject:mobx_state_tree_module.gK.string,annotations:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.union(single.AnnotationModel,multiple.AnnotationModel,tasks_text.AnnotationModel,dropdown_simple.AnnotationModel))}).preProcessSnapshot(snapshot=>{var newSnapshot=function CellAnnotationsStore_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?CellAnnotationsStore_ownKeys(Object(t),!0).forEach(function(r){CellAnnotationsStore_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CellAnnotationsStore_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},snapshot);if(newSnapshot.id=snapshot.id||cuid_default()(),snapshot.annotations&&Array.isArray(snapshot.annotations)){var annotations={};snapshot.annotations.forEach(annotation=>{annotation.id=annotation.id||cuid_default()(),annotations[annotation.id]=annotation}),newSnapshot.annotations=annotations}return newSnapshot}).postProcessSnapshot(snapshot=>{var{id,annotations}=snapshot,newSnapshot=function CellAnnotationsStore_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function CellAnnotationsStore_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(snapshot,CellAnnotationsStore_excluded);if(annotations){var annotationsArray=Object.values(annotations);annotationsArray.length>0&&(newSnapshot.annotations=annotationsArray)}return newSnapshot});const models_CellAnnotationsStore=mobx_state_tree_module.gK.compose("CellWithAnnotations",store_AnnotationsStore,CellAnnotationsStore);var SubjectGroupComparisonAnnotation_excluded=["annotations"],SubjectGroupComparisonAnnotation_excluded2=["id"];function SubjectGroupComparisonAnnotation_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function SubjectGroupComparisonAnnotation_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}function SubjectGroupComparisonAnnotation_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function SubjectGroupComparisonAnnotation_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SubjectGroupComparisonAnnotation_ownKeys(Object(t),!0).forEach(function(r){SubjectGroupComparisonAnnotation_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SubjectGroupComparisonAnnotation_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function SubjectGroupComparisonAnnotation_defineProperty(e,r,t){return(r=function SubjectGroupComparisonAnnotation_toPropertyKey(t){var i=function SubjectGroupComparisonAnnotation_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var SubjectGroupComparison=mobx_state_tree_module.gK.model("SubjectGroupComparison",{taskType:mobx_state_tree_module.gK.literal("subjectGroupComparison"),value:mobx_state_tree_module.gK.array(models_CellAnnotationsStore)}).views(self=>({get isComplete(){return self.value.length>0},getCellByIndex:index=>self.value.find(cell=>cell.index===index),toSnapshot(){var snapshot=(0,mobx_state_tree_module.dV)(self),value=self.value.map(cell=>(0,mobx_state_tree_module.dV)(cell)),comparisonSnapshot=SubjectGroupComparisonAnnotation_objectSpread(SubjectGroupComparisonAnnotation_objectSpread({},snapshot),{},{value}),allAnnotations=[comparisonSnapshot];return comparisonSnapshot.value.forEach((cellSnapshot,cellIndex)=>{var{annotations}=cellSnapshot,cellWithoutAnnotations=SubjectGroupComparisonAnnotation_objectWithoutProperties(cellSnapshot,SubjectGroupComparisonAnnotation_excluded);annotations&&annotations.length>0&&(cellWithoutAnnotations.details=annotations.map(annotation=>({task:annotation.task})),annotations.forEach(cellAnnotation=>{var{id}=cellAnnotation,annotationWithoutId=SubjectGroupComparisonAnnotation_objectWithoutProperties(cellAnnotation,SubjectGroupComparisonAnnotation_excluded2);allAnnotations.push(SubjectGroupComparisonAnnotation_objectSpread(SubjectGroupComparisonAnnotation_objectSpread({},annotationWithoutId),{},{cellIndex}))})),comparisonSnapshot.value[cellIndex]=cellWithoutAnnotations}),allAnnotations}})).actions(self=>({addCell(index,subjectId){var cell=models_CellAnnotationsStore.create({id:cuid_default()(),index,subject:subjectId,annotations:{}});return self.value.push(cell),self._inProgress=!0,cell},removeCell(index){var cellIndex=self.value.findIndex(cell=>cell.index===index);cellIndex>-1&&(self.value.splice(cellIndex,1),self._inProgress=!0)}}));const models_SubjectGroupComparisonAnnotation=mobx_state_tree_module.gK.compose("SubjectGroupComparisonAnnotation",models_Annotation,SubjectGroupComparison);var SubjectGroupComparisonTask_SubjectGroupComparison=mobx_state_tree_module.gK.model("SubjectGroupComparison",{annotation:mobx_state_tree_module.gK.safeReference(models_SubjectGroupComparisonAnnotation),type:mobx_state_tree_module.gK.literal("subjectGroupComparison")}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_SubjectGroupComparisonAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const subjectGroupComparison={TaskComponent:components_SubjectGroupComparisonTask,TaskModel:mobx_state_tree_module.gK.compose("SubjectGroupComparisonTask",models_Task,SubjectGroupComparisonTask_SubjectGroupComparison),AnnotationModel:models_SubjectGroupComparisonAnnotation};var PrimaryButton=__webpack_require__("../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),withThemeContext=__webpack_require__("../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),Carousel=__webpack_require__("../../node_modules/grommet/es6/components/Carousel/Carousel.js"),Heading=__webpack_require__("../../node_modules/grommet/es6/components/Heading/Heading.js"),Collapsible=__webpack_require__("../../node_modules/grommet/es6/components/Collapsible/Collapsible.js"),DropButton=__webpack_require__("../../node_modules/grommet/es6/components/DropButton/DropButton.js"),SpacedHeading=__webpack_require__("../lib-react-components/dist/esm/SpacedHeading/SpacedHeading.js");function Confusion(_ref){var _confusion$images,{confusion={},confusionId="",confusionText="",handleChoice=()=>{},images={},label,onClose=()=>!0}=_ref,{t}=useTranslation("plugins");return(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-3",light:"neutral-6"},elevation:"xlarge",flex:!1,pad:{bottom:"small",horizontal:"small",top:"none"},width:"medium",children:[(0,jsx_runtime.jsx)(SpacedHeading.A,{children:label}),(null===(_confusion$images=confusion.images)||void 0===_confusion$images?void 0:_confusion$images.length)>0&&(0,jsx_runtime.jsx)(Carousel.F,{"data-testid":"confusion-images",controls:"arrows",children:confusion.images.map((filename,index)=>(0,jsx_runtime.jsx)(Media.A,{alt:"".concat(confusion.label,"-image").concat(index),src:images.get(filename),width:400},filename))}),(0,jsx_runtime.jsx)(Paragraph.f,{children:confusionText}),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",fill:"horizontal",gap:"xsmall",justify:"center",margin:{top:"small"},pad:{top:"small"},children:[(0,jsx_runtime.jsx)(Button.$,{fill:"horizontal",label:t("SurveyTask.ConfusedWith.cancel"),onClick:()=>onClose(),style:{overflow:"hidden"}}),(0,jsx_runtime.jsx)(PrimaryButton.A,{fill:"horizontal",label:t("SurveyTask.ConfusedWith.itsThis"),onClick:()=>handleChoice(confusionId),style:{overflow:"hidden"}})]})]})}Confusion.propTypes={confusion:prop_types_default().shape({confusions:mobxreact_esm.By.observableMap,confusionsOrder:prop_types_default().arrayOf(prop_types_default().string),images:prop_types_default().arrayOf(prop_types_default().string),label:prop_types_default().string}),confusionId:prop_types_default().string,confusionText:prop_types_default().string,handleChoice:prop_types_default().func,images:mobxreact_esm.By.observableMap,onClose:prop_types_default().func};var StyledDropButton=(0,styled_components_browser_esm.default)(DropButton.E).withConfig({displayName:"ConfusedWith__StyledDropButton",componentId:"sc-1yp3rc-0"})(["background-color:",";border:none;border-radius:4px;color:",";font-size:1rem;height:40px;min-width:110px;margin-right:5px;padding:5px;&:hover:not(:focus-within){box-shadow:0 0 2px 2px ",";}"],props=>props.theme.global.colors[props.backgroundColor],props=>props.theme.dark?props.theme.global.colors["neutral-6"]:props.theme.global.colors["neutral-7"],props=>props.theme.global.colors.brand);function ConfusedWith(_ref){var{choices={},choiceId,confusions={},confusionsOrder=[],handleChoice=()=>{},hasFocus=!1,images={},strings,theme}=_ref,{t}=useTranslation("plugins"),[open,setOpen]=(0,react.useState)(!1);function _onClose(){setOpen(!1)}return(0,jsx_runtime.jsxs)(Box.a,{margin:{top:"20px"},children:[(0,jsx_runtime.jsx)(SpacedHeading.A,{color:{dark:"neutral-6",light:"dark-5"},margin:{bottom:"20px",top:"none"},size:"1rem",children:t("SurveyTask.ConfusedWith.confused")}),(0,jsx_runtime.jsx)(Box.a,{direction:"row",wrap:!0,children:confusionsOrder.map((confusionId,index)=>{var backgroundColor="light-1";return theme.dark&&(backgroundColor="dark-4"),open===confusionId&&(backgroundColor="accent-1"),(0,jsx_runtime.jsx)(StyledDropButton,{a11yTitle:strings.get("choices.".concat(confusionId,".label")),autoFocus:hasFocus&&0===index,backgroundColor,dropAlign:{top:"bottom"},dropContent:(0,jsx_runtime.jsx)(Confusion,{confusion:choices.get(confusionId),confusionId,confusionText:strings.get("choices.".concat(choiceId,".confusions.").concat(confusionId)),handleChoice,images,label:strings.get("choices.".concat(confusionId,".label")),onClose:_onClose}),dropProps:{elevation:"none",overflow:"visible",responsive:!1},label:strings.get("choices.".concat(confusionId,".label")),margin:{bottom:"10px",right:"10px"},open:open===confusionId,onClose:()=>_onClose(),onOpen:()=>function _onOpen(confusionId){setOpen(confusionId)}(confusionId)},confusionId)})})]})}ConfusedWith.propTypes={choices:mobxreact_esm.By.observableMap,confusions:mobxreact_esm.By.observableMap,confusionsOrder:prop_types_default().arrayOf(prop_types_default().string),handleChoice:prop_types_default().func,hasFocus:prop_types_default().bool,images:mobxreact_esm.By.observableMap};const ConfusedWith_ConfusedWith=(0,styled_components_browser_esm.withTheme)(ConfusedWith);var FormUp=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormUp.js"),FormDown=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormDown.js"),InfoLabel_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"InfoLabel__StyledText",componentId:"sc-1v5jeq0-0"})(["font-size:0.75rem;width:max-content;"]);function InfoLabel(_ref){var{showInfo=!1}=_ref,{t}=useTranslation("plugins");return(0,jsx_runtime.jsx)(Box.a,{align:"center",direction:"row",gap:"xsmall",children:showInfo?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(InfoLabel_StyledText,{children:t("SurveyTask.Choice.lessInfo")}),(0,jsx_runtime.jsx)(FormUp.I,{"aria-hidden":"true"})]}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(InfoLabel_StyledText,{children:t("SurveyTask.Choice.moreInfo")}),(0,jsx_runtime.jsx)(FormDown.t,{"aria-hidden":"true"})]})})}InfoLabel.propTypes={showInfo:prop_types.bool};const InfoLabel_InfoLabel=InfoLabel;var QuestionInput_StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuestionInput__StyledBox",componentId:"sc-zvyl7m-0"})(["cursor:pointer;> span{cursor:pointer;}> input{cursor:pointer;opacity:0.01;position:absolute;}&:focus-within{box-shadow:0 0 2px 2px ",";}&:hover:not(:focus-within){box-shadow:0 0 2px 2px ",";}"],props=>props.theme.global.colors[props.theme.global.colors.focus],props=>props.theme.global.colors.brand),QuestionInput_DEFAULT_HANDLER=()=>!1,DEFAULT_OPTION={label:"",value:""},QuestionInput_DEFAULT_THEME={dark:!1};function QuestionInput(_ref){var{handleCheckBoxChange=QuestionInput_DEFAULT_HANDLER,handleRadioChange=QuestionInput_DEFAULT_HANDLER,handleRadioKeyDown=QuestionInput_DEFAULT_HANDLER,hasFocus=!1,isChecked=!1,option=DEFAULT_OPTION,questionId="",theme=QuestionInput_DEFAULT_THEME,type}=_ref,backgroundColor="light-1";theme.dark&&(backgroundColor="dark-4"),isChecked&&(backgroundColor="accent-1");var handleChange="checkbox"===type?handleCheckBoxChange:handleRadioChange;return(0,jsx_runtime.jsx)("label",{children:(0,jsx_runtime.jsxs)(QuestionInput_StyledBox,{align:"center",background:{color:backgroundColor},height:"40px",justify:"center",margin:{bottom:"10px",right:"10px"},pad:{horizontal:"10px"},round:"radio"===type?"20px / 50%":"4px",width:"radio"===type?{min:"40px"}:{min:"110px"},children:[(0,jsx_runtime.jsx)("input",{autoFocus:hasFocus,name:questionId,value:option.value,type,checked:isChecked,onChange:_ref2=>{var{target}=_ref2;return handleChange(target.value,target.checked)},onClick:"radio"===type?_ref3=>{var{target}=_ref3;return handleRadioChange(target.value)}:null,onKeyDown:"radio"===type?event=>handleRadioKeyDown(event):null}),(0,jsx_runtime.jsx)(Text.E,{color:theme.dark&&!isChecked?"neutral-6":"neutral-7",size:"1rem",weight:isChecked?"bold":"normal",children:option.label})]})})}QuestionInput.propTypes={handleCheckBoxChange:prop_types_default().func,handleRadioChange:prop_types_default().func,handleRadioKeyDown:prop_types_default().func,hasFocus:prop_types_default().bool,isChecked:prop_types_default().bool,option:prop_types_default().shape({label:prop_types_default().string,value:prop_types_default().string}),questionId:prop_types_default().string,theme:prop_types_default().shape({dark:prop_types_default().bool}),type:prop_types_default().string.isRequired};const components_QuestionInput=(0,styled_components_browser_esm.withTheme)(QuestionInput);var InputGroup_DEFAULT_HANDLER=()=>!1;function InputGroup(props){var{labelledBy,handleAnswer=InputGroup_DEFAULT_HANDLER,hasFocus=!1,options=[],questionAnswer="",questionId="",type}=props;function handleCheckBoxChange(value,checked){var newQuestionAnswer=Array.from(questionAnswer);checked?newQuestionAnswer.push(value):newQuestionAnswer.splice(newQuestionAnswer.indexOf(value),1),handleAnswer(newQuestionAnswer,questionId)}function handleRadioChange(value){handleAnswer(questionAnswer===value?"":value,questionId)}function handleRadioKeyDown(event){var{value}=event.target;if(questionAnswer!==value)return!0;switch(event.key){case" ":case"Backspace":case"Delete":return event.preventDefault(),event.stopPropagation(),handleAnswer("",questionId),!1;default:return!0}}return(0,jsx_runtime.jsx)(Box.a,{"aria-labelledby":labelledBy,direction:"row",wrap:!0,children:options.map((option,index)=>{var isChecked;isChecked="checkbox"===type?!!questionAnswer&&questionAnswer.indexOf(option.value)>-1:questionAnswer===option.value;var inputHasFocus=!1;return inputHasFocus=questionAnswer?hasFocus&&isChecked:hasFocus&&0===index,(0,jsx_runtime.jsx)(components_QuestionInput,{handleCheckBoxChange,handleRadioChange,handleRadioKeyDown,hasFocus:inputHasFocus,isChecked,option,questionId,type},option.value)})})}function Questions_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Questions_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Questions_ownKeys(Object(t),!0).forEach(function(r){Questions_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Questions_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Questions_defineProperty(e,r,t){return(r=function Questions_toPropertyKey(t){var i=function Questions_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Questions(_ref){var{answers={},hasFocus=!1,questionIds=[],questions={},setAnswers=()=>{},strings}=_ref;function handleAnswer(questionAnswer,questionId){var newAnswers=Questions_objectSpread(Questions_objectSpread({},answers),{},{[questionId]:questionAnswer});0===questionAnswer.length&&delete newAnswers[questionId],setAnswers(newAnswers)}return(0,jsx_runtime.jsx)(Box.a,{flex:"grow",gap:"20px",children:questionIds.map((questionId,index)=>{var question=questions.get(questionId)||{answers:{},answersOrder:[]},inputType=question.multiple?"checkbox":"radio",options=question.answersOrder.map(answerId=>({label:strings.get("questions.".concat(questionId,".answers.").concat(answerId,".label")),value:answerId}));return(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(SpacedHeading.A,{id:"".concat(questionId,"-label"),color:{dark:"neutral-6",light:"dark-5"},margin:{top:"none",bottom:"20px"},size:"1rem",children:strings.get("questions.".concat(questionId,".label"))}),(0,jsx_runtime.jsx)(InputGroup,{labelledBy:"".concat(questionId,"-label"),handleAnswer,hasFocus:hasFocus&&0===index,options,questionId,questionAnswer:answers[questionId],type:inputType})]},questionId)})})}function getQuestionIds(){var _task$choices$get,_task$questionsMap,choiceId=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",task=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return task.choices&&null!==(_task$choices$get=task.choices.get(choiceId))&&void 0!==_task$choices$get&&_task$choices$get.noQuestions?[]:null!==(_task$questionsMap=task.questionsMap)&&void 0!==_task$questionsMap&&_task$questionsMap.has(choiceId)?task.questionsMap.get(choiceId):task.questionsOrder}InputGroup.propTypes={handleAnswer:prop_types_default().func,hasFocus:prop_types_default().bool,options:prop_types_default().arrayOf(prop_types_default().shape({label:prop_types_default().string,value:prop_types_default().string})),questionAnswer:prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().string),prop_types_default().string]),questionId:prop_types_default().string,type:prop_types_default().string.isRequired},Questions.propTypes={answers:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().string),prop_types_default().string])),hasFocus:prop_types_default().bool,questionIds:prop_types_default().arrayOf(prop_types_default().string),questions:prop_types_default().shape({answers:prop_types_default().objectOf(prop_types_default().shape({label:prop_types_default().string})),answersOrder:prop_types_default().arrayOf(prop_types_default().string),label:prop_types_default().string,multiple:prop_types_default().bool,required:prop_types_default().bool}),setAnswers:prop_types_default().func};var Next=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Next.js"),Previous=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Previous.js");const Choice_carouselTheme={carousel:{icons:{next:function StyledNext(){return(0,jsx_runtime.jsx)(Next.k,{color:"neutral-2",size:"large"})},previous:function StyledPrevious(){return(0,jsx_runtime.jsx)(Previous.s,{color:"neutral-2",size:"large"})}}}};var Choice_StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"Choice__StyledBox",componentId:"sc-1igs6yn-0"})(["&:focus{outline:2px solid ",";}"],props=>props.theme.global.colors[props.theme.global.colors.focus]),StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"Choice__StyledButton",componentId:"sc-1igs6yn-1"})(["border:1px solid ",";border-radius:4px;flex:1 0;margin-right:1ch;max-width:350px;"],props=>props.theme.global.colors.brand),StyledMediaContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"Choice__StyledMediaContainer",componentId:"sc-1igs6yn-2"})(["width:100%;max-width:405px;aspect-ratio:1.5 / 1;"]),StyledPrimaryButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"Choice__StyledPrimaryButton",componentId:"sc-1igs6yn-3"})(["border-radius:4px;flex:1 0;"]),Choice_DEFAULT_HANDLER=()=>!0;function Choice(_ref){var _choice$images,_choice$confusionsOrd,{answers={},choiceId="",handleAnswers=Choice_DEFAULT_HANDLER,handleCancel=Choice_DEFAULT_HANDLER,handleChoice=Choice_DEFAULT_HANDLER,onIdentify=Choice_DEFAULT_HANDLER,task}=_ref,[showInfo,setShowInfo]=(0,react.useState)(!1),{choices,images,questions,strings}=task,choiceRef=(0,react.useRef)(null);(0,react.useEffect)(()=>{choiceRef.current&&choiceRef.current.focus()},[choiceId]);var{t}=useTranslation("plugins"),choice=(null==choices?void 0:choices.get(choiceId))||{},questionIds=getQuestionIds(choiceId,task),allowIdentify=function allowIdentification(){var answers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},choiceId=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",task=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0===getQuestionIds(choiceId,task).length)return!0;var answerProvided=[];return getQuestionIds(choiceId,task).map(questionId=>{if(task.questions.get(questionId).required){var answer=answers[questionId];answer&&answer.length>0?answerProvided.push(!0):answerProvided.push(!1)}else answerProvided.push(!0)}),answerProvided.every(answer=>!0===answer)}(answers,choiceId,task);return(0,jsx_runtime.jsxs)(Choice_StyledBox,{ref:choiceRef,"aria-labelledby":"choice-label",background:{dark:"dark-3",light:"neutral-6"},flex:"grow",forwardedAs:"section",onKeyDown:function handleKeyDown(event){"Escape"===event.key&&handleCancel(choiceId)},tabIndex:0,children:[(null===(_choice$images=choice.images)||void 0===_choice$images?void 0:_choice$images.length)>0&&(0,jsx_runtime.jsx)(Carousel.F,{controls:"arrows","data-testid":"choice-images",width:"100%",children:choice.images.map((filename,index)=>(0,jsx_runtime.jsx)(StyledMediaContainer,{margin:{horizontal:"auto"},children:(0,jsx_runtime.jsx)(Media.A,{alt:"".concat(choice.label,"-image").concat(index),fit:"contain",height:"100%",src:images.get(filename)})},filename))}),(0,jsx_runtime.jsxs)(Box.a,{pad:{bottom:"10px",top:"20px"},children:[(0,jsx_runtime.jsxs)(Box.a,{direction:"row",fill:"horizontal",height:"auto",justify:"between",margin:{bottom:"20px"},children:[(0,jsx_runtime.jsx)(Heading.D,{id:"choice-label",color:{dark:"accent-1",light:"neutral-7"},level:2,margin:"none",size:"1.5rem",weight:"bold",children:strings.get("choices.".concat(choiceId,".label"))}),(0,jsx_runtime.jsx)(Button.$,{label:(0,jsx_runtime.jsx)(InfoLabel_InfoLabel,{showInfo}),onClick:()=>setShowInfo(!showInfo),plain:!0})]}),(0,jsx_runtime.jsx)(Collapsible.N,{open:showInfo,children:(0,jsx_runtime.jsxs)(Box.a,{margin:{bottom:"20px"},children:[(0,jsx_runtime.jsx)(Paragraph.f,{margin:"none",children:strings.get("choices.".concat(choiceId,".description"))}),(null===(_choice$confusionsOrd=choice.confusionsOrder)||void 0===_choice$confusionsOrd?void 0:_choice$confusionsOrd.length)>0&&(0,jsx_runtime.jsx)(ConfusedWith_ConfusedWith,{choices,choiceId,confusions:choice.confusions,confusionsOrder:choice.confusionsOrder,handleChoice,images,strings})]})}),questionIds.length>0&&(0,jsx_runtime.jsx)(Questions,{answers,questionIds,questions,setAnswers:handleAnswers,strings}),(0,jsx_runtime.jsxs)(Box.a,{border:{color:"light-5",side:"bottom",size:"small"},direction:"row",fill:"horizontal",justify:"center",pad:{vertical:"20px"},children:[(0,jsx_runtime.jsx)(StyledButton,{fill:"horizontal",label:t("SurveyTask.Choice.cancel"),onClick:()=>handleCancel(choiceId)}),(0,jsx_runtime.jsx)(StyledPrimaryButton,{"data-testid":"choice-identify-button",disabled:!allowIdentify,fill:"horizontal",label:t("SurveyTask.Choice.identify"),onClick:()=>onIdentify()})]})]})]})}Choice.propTypes={answers:prop_types_default().objectOf(prop_types_default().oneOfType([prop_types_default().arrayOf(prop_types_default().string),prop_types_default().string])),choiceId:prop_types_default().string,handleAnswers:prop_types_default().func,handleCancel:prop_types_default().func,handleChoice:prop_types_default().func,onIdentify:prop_types_default().func,task:prop_types_default().shape({help:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired};const Choice_Choice=(0,withThemeContext.A)(Choice,Choice_carouselTheme);var AnnounceContext=__webpack_require__("../../node_modules/grommet/es6/contexts/AnnounceContext/AnnounceContext.js");function FilterIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function FilterIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FilterIcon_ownKeys(Object(t),!0).forEach(function(r){FilterIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FilterIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function FilterIcon_defineProperty(e,r,t){return(r=function FilterIcon_toPropertyKey(t){var i=function FilterIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FilterIcon(props){return(0,jsx_runtime.jsxs)(Blank.h,FilterIcon_objectSpread(FilterIcon_objectSpread({transform:"rotate(-90)",viewBox:"0 0 512 512"},props),{},{children:[(0,jsx_runtime.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 128h80M64 128h240M368 384h80M64 384h240M208 256h240M64 256h80"}),(0,jsx_runtime.jsx)("circle",{cx:"336",cy:"128",r:"32",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),(0,jsx_runtime.jsx)("circle",{cx:"176",cy:"256",r:"32",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"}),(0,jsx_runtime.jsx)("circle",{cx:"336",cy:"384",r:"32",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32"})]}))}var Image=__webpack_require__("../../node_modules/grommet/es6/components/Image/Image.js"),FormClose=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormClose.js"),StyledFilter=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"FilterLabel__StyledFilter",componentId:"sc-1s3txqh-0"})(["box-shadow:",";"],props=>props.focus||props.hover?"0 0 2px 2px ".concat(props.theme.global.colors.brand,";"):"1px 1px 4px 0px rgba(0, 0, 0, 0.10);"),StyledImage=(0,styled_components_browser_esm.default)(Image._).withConfig({displayName:"FilterLabel__StyledImage",componentId:"sc-1s3txqh-1"})(["flex:0 0 auto;height:25px;width:25px;"]);function FilterLabel(_ref){var{characteristicId="",checked=!1,focus=!1,hover=!1,selected=!1,valueId="",valueImageSrc="",valueLabel=""}=_ref,{t}=(0,es.Bd)("plugins"),backgroundColor=checked||selected?"accent-1":"neutral-6",containerWidth=selected?"60px":"40px",dataTestId=selected?"remove filter-".concat(characteristicId,"-").concat(valueId):"filter-".concat(characteristicId,"-").concat(valueId);return(0,jsx_runtime.jsxs)(StyledFilter,{align:"center",background:{color:backgroundColor},"data-testid":dataTestId,direction:"row",focus,height:"40px",hover,justify:"center",pad:{horizontal:"10px",vertical:"5px"},round:"medium",width:containerWidth,children:[(0,jsx_runtime.jsx)(StyledImage,{alt:valueLabel,fit:"contain",src:valueImageSrc}),selected&&(0,jsx_runtime.jsx)(FormClose.b,{color:"neutral-7",size:"1.3rem"})]})}FilterLabel.propTypes={characteristicId:prop_types_default().string,checked:prop_types_default().bool,focus:prop_types_default().bool,hover:prop_types_default().bool,selected:prop_types_default().bool,valueId:prop_types_default().string,valueImageSrc:prop_types_default().string,valueLabel:prop_types_default().string};var RadioButtonGroup=__webpack_require__("../../node_modules/grommet/es6/components/RadioButtonGroup/RadioButtonGroup.js"),DEFAULT_CHARACTERISTIC={values:{},valuesOrder:[]},CharacteristicSection_DEFAULT_HANDLER=()=>!0;function CharacteristicSection(_ref){var{characteristic=DEFAULT_CHARACTERISTIC,characteristicId="",images={},label="",onFilter=CharacteristicSection_DEFAULT_HANDLER,selectedValueId="",strings}=_ref,onChange=(0,react.useCallback)(_ref2=>{var{target}=_ref2;return onFilter(characteristicId,null==target?void 0:target.value)},[characteristicId,onFilter]),radioButtonLabel=(0,react.useCallback)((option,_ref3)=>{var{checked,focus,hover}=_ref3;return(0,jsx_runtime.jsx)(FilterLabel,{characteristicId,characteristicLabel:label,checked,focus,hover,valueId:option.value,valueImageSrc:option.imageSrc,valueLabel:option.label})},[characteristicId,label,onFilter]),characteristicOption=(0,react.useCallback)(valueId=>{var _characteristic$value,value=(null==characteristic||null===(_characteristic$value=characteristic.values)||void 0===_characteristic$value?void 0:_characteristic$value.get(valueId))||{},valueImageSrc=(null==images?void 0:images.get(value.image))||"",label=strings.get("characteristics.".concat(characteristicId,".values.").concat(valueId,".label"));return{disabled:!1,id:"".concat(characteristicId,"-").concat(valueId),imageSrc:valueImageSrc,label,value:valueId}},[characteristic,characteristicId,images,strings]),characteristicOptions=characteristic.valuesOrder.map(characteristicOption);return(0,jsx_runtime.jsxs)(Box.a,{margin:{bottom:"xsmall"},children:[(0,jsx_runtime.jsx)(SpacedHeading.A,{id:"".concat(label,"-heading"),color:{dark:"neutral-6",light:"neutral-7"},margin:{bottom:"xsmall",top:"xsmall"},pad:"none",size:"1rem",children:label}),(0,jsx_runtime.jsx)(RadioButtonGroup.z,{"aria-labelledby":"".concat(label,"-heading"),cssGap:!0,direction:"row",gap:{column:"small",row:"xsmall"},name:"".concat(characteristic.label,"-filter"),onChange,options:characteristicOptions,value:selectedValueId,wrap:!0,children:radioButtonLabel})]})}CharacteristicSection.propTypes={characteristic:prop_types_default().shape({label:prop_types_default().string,values:mobxreact_esm.By.observableMap,valuesOrder:prop_types_default().arrayOf(prop_types_default().string)}),characteristicId:prop_types_default().string,images:mobxreact_esm.By.observableMap,label:prop_types_default().string,onFilter:prop_types_default().func,selectedValueId:prop_types_default().string};var Characteristics_StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"Characteristics__StyledBox",componentId:"sc-43snfw-0"})(["background:",";border-radius:0px 0px 16px 16px;box-shadow:0px 4px 4px 0px rgba(0,0,0,0.20);"],props=>props.theme.dark?"linear-gradient(180deg, rgba(51, 51, 51, 0.80) 0%, rgba(51, 51, 51, 0.80) 100%), #333333;":"linear-gradient(180deg, rgba(255, 255, 255, 0.80) 0%, rgba(239, 242, 245, 0.80) 100%), #FFF;"),Characteristics_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"Characteristics__StyledButton",componentId:"sc-43snfw-1"})(["margin-top:5px;&:hover,&:focus{span{text-decoration:underline;}}"]),Characteristics_DEFAULT_HANDLER=()=>!0;function Characteristics(_ref){var{characteristics={},characteristicsOrder=[],filters={},handleFilterOpen=Characteristics_DEFAULT_HANDLER,images={},onFilter=Characteristics_DEFAULT_HANDLER,strings}=_ref,{t}=useTranslation("plugins");return(0,jsx_runtime.jsxs)(Characteristics_StyledBox,{align:"center",pad:{bottom:"small",horizontal:"small"},children:[(0,jsx_runtime.jsx)(Box.a,{"data-testid":"characteristics",fill:"horizontal",flex:"grow",children:characteristicsOrder.map(characteristicId=>{var characteristic=characteristics.get(characteristicId)||{},selectedValueId=filters[characteristicId]||"";return(0,jsx_runtime.jsx)(CharacteristicSection,{characteristic,characteristicId,images,label:strings.get("characteristics.".concat(characteristicId,".label")),onFilter,selectedValueId,strings},characteristicId)})}),(0,jsx_runtime.jsx)(Characteristics_StyledButton,{label:(0,jsx_runtime.jsxs)(Box.a,{align:"center",direction:"row",children:[(0,jsx_runtime.jsx)(SpacedText.A,{size:"1rem",children:t("SurveyTask.CharacteristicsFilter.closeFilters")}),(0,jsx_runtime.jsx)(FormUp.I,{})]}),onClick:handleFilterOpen,plain:!0})]})}Characteristics.propTypes={characteristics:mobxreact_esm.By.observableMap,characteristicsOrder:prop_types_default().arrayOf(prop_types_default().string),filters:prop_types_default().objectOf(prop_types_default().string),handleFilterOpen:prop_types_default().func,images:mobxreact_esm.By.observableMap,onFilter:prop_types_default().func};const Characteristics_Characteristics=(0,mobxreact_esm.PA)(Characteristics);var ClearFilters_DEFAULT_HANDLER=()=>!0;function ClearFilters(_ref){var{onClick=ClearFilters_DEFAULT_HANDLER,showingChoices=0,totalChoices=0}=_ref,{t}=useTranslation("plugins");return(0,jsx_runtime.jsxs)(Box.a,{align:"center",direction:"row",fill:"horizontal",gap:"xxsmall",justify:"between",children:[(0,jsx_runtime.jsx)(SpacedText.A,{size:"0.75rem",children:t("SurveyTask.CharacteristicsFilter.showing",{showing:showingChoices,total:totalChoices})}),(0,jsx_runtime.jsx)(PlainButton.Ay,{color:{dark:"neutral-6",light:"dark-5"},disabled:showingChoices===totalChoices,labelSize:"0.75rem",onClick,text:t("SurveyTask.CharacteristicsFilter.clearFilters")})]})}ClearFilters.propTypes={onClick:prop_types_default().func,showingChoices:prop_types_default().number,totalChoices:prop_types_default().number};var FilterStatus_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FilterStatus__StyledButton",componentId:"sc-1iuffqs-0"})(["border:none;border-radius:32px;height:40px;padding:8px 10px;&:focus{text-decoration:underline;}&:enabled:hover{color:",";text-decoration:underline;}",""],props=>props.theme.dark?props.theme.global.colors.brand:props.theme.global.colors["neutral-1"],props=>props.$filterOpen&&(0,styled_components_browser_esm.css)(["background-color:",";color:",";text-decoration:none;&:enabled:hover{color:",";text-decoration:underline;}"],props=>props.theme.global.colors["neutral-1"],props=>props.theme.global.colors["neutral-6"],props=>props.theme.global.colors["neutral-6"])),FilterStatus_StyledLabel=(0,styled_components_browser_esm.default)(SpacedText.A).withConfig({displayName:"FilterStatus__StyledLabel",componentId:"sc-1iuffqs-1"})(["font-size:1rem;font-weight:500;text-transform:uppercase;"]),FilterStatus_DEFAULT_HANDLER=()=>!0,FilterStatus=(0,react.forwardRef)((_ref,ref)=>{var{disabled=!1,filterOpen=!1,filters={},handleFilter=FilterStatus_DEFAULT_HANDLER,handleFilterOpen=FilterStatus_DEFAULT_HANDLER,showingChoices=0,task}=_ref,{characteristics,characteristicsOrder,choices,images,strings}=task,{t}=useTranslation("plugins"),selectedCharacteristicIds=Object.keys(filters);return(0,jsx_runtime.jsxs)(Box.a,{margin:{bottom:"xxsmall"},children:[(0,jsx_runtime.jsxs)(Box.a,{align:"start","data-testid":"filter-status",direction:"row",gap:"xxsmall",wrap:!0,children:[(0,jsx_runtime.jsx)(FilterStatus_StyledButton,{ref,a11yTitle:t("SurveyTask.CharacteristicsFilter.filter"),"aria-controls":"characteristics-collapsible","aria-expanded":filterOpen,disabled,$filterOpen:filterOpen,gap:"xsmall",icon:(0,jsx_runtime.jsx)(FilterIcon,{size:"16px"}),label:(0,jsx_runtime.jsx)(FilterStatus_StyledLabel,{children:t("SurveyTask.CharacteristicsFilter.filter")}),onClick:handleFilterOpen}),selectedCharacteristicIds.map(characteristicId=>{var _characteristic$value,characteristic=(null==characteristics?void 0:characteristics.get(characteristicId))||{},selectedValueId=(null==filters?void 0:filters[characteristicId])||"",value=(null===(_characteristic$value=characteristic.values)||void 0===_characteristic$value?void 0:_characteristic$value.get(selectedValueId))||{},valueImageSrc=(null==images?void 0:images.get(value.image))||"",label=strings.get("characteristics.".concat(characteristicId,".values.").concat(selectedValueId,".label"));return(0,jsx_runtime.jsx)(Button.$,{a11yTitle:t("SurveyTask.CharacteristicsFilter.removeFilter",{valueLabel:label}),label:(0,jsx_runtime.jsx)(FilterLabel,{characteristicId,selected:!0,valueId:selectedValueId,valueImageSrc,valueLabel:label}),margin:{bottom:"xxsmall",left:"xxsmall"},onClick:function clearSelection(){handleFilter(characteristicId)},plain:!0},"".concat(characteristicId,"-").concat(selectedValueId))})]}),selectedCharacteristicIds.length&&!filterOpen?(0,jsx_runtime.jsx)(ClearFilters,{onClick:()=>handleFilter(),showingChoices,totalChoices:choices.size}):null,(0,jsx_runtime.jsx)(Collapsible.N,{id:"characteristics-collapsible",open:filterOpen,children:(0,jsx_runtime.jsx)(Characteristics_Characteristics,{characteristics,characteristicsOrder,filters,handleFilterOpen,images,onFilter:handleFilter,strings})})]})});FilterStatus.propTypes={disabled:prop_types_default().bool,filterOpen:prop_types_default().bool,filters:prop_types_default().objectOf(prop_types_default().string),handleFilter:prop_types_default().func,handleFilterOpen:prop_types_default().func,showingChoices:prop_types_default().number,task:prop_types_default().shape({help:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired},FilterStatus.displayName="FilterStatus";const FilterStatus_FilterStatus=FilterStatus;FilterStatus.__docgenInfo={description:"",methods:[],displayName:"FilterStatus",props:{disabled:{description:"",type:{name:"bool"},required:!1},filterOpen:{description:"",type:{name:"bool"},required:!1},filters:{description:"",type:{name:"objectOf",value:{name:"string"}},required:!1},handleFilter:{description:"",type:{name:"func"},required:!1},handleFilterOpen:{description:"",type:{name:"func"},required:!1},showingChoices:{description:"",type:{name:"number"},required:!1},task:{description:"",type:{name:"shape",value:{help:{name:"string",required:!1},required:{name:"union",value:[{name:"string"},{name:"bool"}],required:!1},taskKey:{name:"string",required:!1},type:{name:"string",required:!1}}},required:!0}}};var ResponsiveContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ResponsiveContext/ResponsiveContext.js");function howManyColumns(_ref){var{length}=_ref;return length<=5?1:length<=20?2:3}var DeleteButton_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"DeleteButton__StyledButton",componentId:"sc-yhhihi-0"})(["height:100%;&:disabled{cursor:not-allowed;}&:focus{border:2px solid ",";box-shadow:none;}&:focus,&:hover{svg{border:2px solid ",";border-radius:50%;}}"],props=>props.theme.global.colors["accent-1"],props=>props.theme.global.colors["neutral-6"]),IconWrapper=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"DeleteButton__IconWrapper",componentId:"sc-yhhihi-1"})(["background:",";position:absolute;border-radius:50%;transform:translate(-50%,-50%);left:50%;top:50%;z-index:2;"],props=>props.theme.global.colors.brand),ChildrenWrapper=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"DeleteButton__ChildrenWrapper",componentId:"sc-yhhihi-2"})(["position:relative;& > img{filter:blur(0.5px);}&::before{content:'';background:rgba(0,93,105,0.6);border-radius:4px;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1;}"]);function components_DeleteButton_DeleteButton(_ref){var{children,choiceLabel="",deleteFn,disabled=!1,tabIndex=-1}=_ref,{t}=useTranslation("plugins");return(0,jsx_runtime.jsx)(DeleteButton_StyledButton,{a11yTitle:t("SurveyTask.DeleteButton.delete",{choiceLabel}),disabled,onClick:deleteFn,tabIndex,children:(0,jsx_runtime.jsxs)(ChildrenWrapper,{children:[children,(0,jsx_runtime.jsx)(IconWrapper,{children:(0,jsx_runtime.jsx)(FormClose.b,{color:"neutral-6"})})]})})}components_DeleteButton_DeleteButton.propTypes={choiceLabel:prop_types.string,deleteFn:prop_types.func.isRequired,disabled:prop_types.bool,tabIndex:prop_types.number};const components_DeleteButton=components_DeleteButton_DeleteButton;var ChoiceButton_StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"ChoiceButton__StyledBox",componentId:"sc-1pu1zl-0"})([""," color:",";&:focus{border:2px solid ",";outline:none;}&:hover{background:",";box-shadow:0 0 8px 2px ",";color:",";}"],props=>props.selected?(0,styled_components_browser_esm.css)(["background:",";border:1px solid ",";box-shadow:0 0 8px 2px ",";"],props.theme.global.colors["neutral-1"],props.theme.global.colors["neutral-6"],props.theme.global.colors["accent-1"]):(0,styled_components_browser_esm.css)(["background:",";@media (max-width:430px){background:",";}"],props.shadedBackground?props.theme.global.colors[props.theme.dark?"dark-4":"light-1"]:props.theme.global.colors[props.theme.dark?"dark-5":"neutral-6"],props.index%2?props.theme.global.colors[props.theme.dark?"dark-5":"neutral-6"]:props.theme.global.colors[props.theme.dark?"dark-4":"light-1"]),props=>props.selected?props.theme.global.colors["neutral-6"]:props.theme.global.colors[props.theme.dark?"neutral-6":"neutral-7"],props=>props.theme.global.colors["accent-1"],props=>props.theme.global.colors["accent-1"],props=>props.theme.global.colors["accent-1"],props=>props.theme.global.colors["neutral-7"]),ChoiceButton_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ChoiceButton__StyledButton",componentId:"sc-1pu1zl-1"})(["box-shadow:none;flex-grow:1;height:100%;&:focus{border:2px solid ",";box-shadow:none;outline:none;}"],props=>props.theme.global.colors["accent-1"]),ChoiceButton_StyledImage=(0,styled_components_browser_esm.default)(Image._).withConfig({displayName:"ChoiceButton__StyledImage",componentId:"sc-1pu1zl-2"})(["border-radius:4px;object-fit:cover;"]),ChoiceButton_StyledLabel=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"ChoiceButton__StyledLabel",componentId:"sc-1pu1zl-3"})(["display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;"]),ChoiceButton_DEFAULT_HANDLER=()=>!0;function ChoiceButton(_ref){var{choiceId="",choiceLabel="",disabled=!1,hasFocus=!1,index=0,onChoose=ChoiceButton_DEFAULT_HANDLER,onDelete=ChoiceButton_DEFAULT_HANDLER,onKeyDown=ChoiceButton_DEFAULT_HANDLER,selected=!1,shadedBackground=!1,src="",tabIndex=-1,thumbnailSize="none"}=_ref,{t}=useTranslation("plugins"),choiceMenuItem=(0,react.useRef)(null),handleClick=(0,react.useCallback)(()=>{onChoose(choiceId)},[choiceId,onChoose]),handleDelete=(0,react.useCallback)(()=>{onDelete(choiceId)},[choiceId,onDelete]),handleKeyDown=(0,react.useCallback)(event=>{onKeyDown(choiceId,event)},[choiceId,onKeyDown]);(0,react.useEffect)(()=>{choiceMenuItem&&hasFocus&&choiceMenuItem.current.focus()});var thumbnailWidth=Math.round(187.5),thumbnailSrc="https://thumbnails.zooniverse.org/".concat(thumbnailWidth,"x").concat(150,"/").concat(src.slice(8));return(0,jsx_runtime.jsxs)(ChoiceButton_StyledBox,{ref:choiceMenuItem,a11yTitle:"".concat(choiceLabel)+(selected?"; ".concat(t("SurveyTask.ChoiceButton.identified")):""),"aria-haspopup":"true",role:"menuitem",align:"center",direction:"row",fill:!0,index,onKeyDown:disabled?ChoiceButton_DEFAULT_HANDLER:handleKeyDown,pad:{right:"10px"},shadedBackground,selected,tabIndex,children:[selected?(0,jsx_runtime.jsx)(components_DeleteButton,{choiceLabel,deleteFn:handleDelete,disabled,tabIndex:selected&&0===tabIndex?0:-1,children:"none"===thumbnailSize?(0,jsx_runtime.jsx)(Box.a,{width:"40px"}):(0,jsx_runtime.jsx)(ChoiceButton_StyledImage,{alt:"",height:"50px",src:thumbnailSrc,width:"small"===thumbnailSize?"50px":"60px"})}):null,(0,jsx_runtime.jsx)(ChoiceButton_StyledButton,{a11yTitle:t("SurveyTask.ChoiceButton.openSubmenu",{choiceLabel}),disabled,label:(0,jsx_runtime.jsxs)(Box.a,{as:"span",align:"center",direction:"row",overflow:"hidden",children:[!selected&&"none"!==thumbnailSize&&src&&(0,jsx_runtime.jsx)(ChoiceButton_StyledImage,{alt:"",height:"50px",src:thumbnailSrc,width:"small"===thumbnailSize?"50px":"60px"}),(0,jsx_runtime.jsx)(ChoiceButton_StyledLabel,{margin:{left:"10px",vertical:"5px"},size:"small"===thumbnailSize?".875rem":"1rem",weight:selected?"bold":"normal",wordBreak:"break-word",children:choiceLabel})]}),margin:{left:selected&&"none"!==thumbnailSize?"2px":"0px"},onClick:handleClick,plain:!0,tabIndex:selected&&0===tabIndex?0:-1})]})}ChoiceButton.propTypes={ariaChecked:prop_types.string,choiceId:prop_types.string,choiceLabel:prop_types.string,columnsCount:prop_types.number,disabled:prop_types.bool,hasFocus:prop_types.bool,index:prop_types.number,onChoose:prop_types.func,onDelete:prop_types.func,onKeyDown:prop_types.func,role:prop_types.string,selected:prop_types.bool,shadedBackground:prop_types.bool,src:prop_types.string,tabIndex:prop_types.number,thumbnailSize:prop_types.string};const components_ChoiceButton=ChoiceButton;var StyledGrid=styled_components_browser_esm.default.ul.withConfig({displayName:"Choices__StyledGrid",componentId:"sc-1v9x76b-0"})(["background:",";display:grid;gap:",";grid-auto-flow:column;grid-template-columns:repeat(",",",");grid-template-rows:repeat(",",",");list-style:none;margin:0;padding:0;width:100%;@media (max-width:70rem){grid-template-columns:repeat(",",1fr);}@media (max-width:430px){display:block;li{display:block;height:",";width:100%;}}"],props=>props.theme.global.colors[props.theme.dark?"dark-3":"light-3"],props=>props.$hideThumbnails?"1px":"0",props=>props.$columnsCount,props=>3===props.$columnsCount?props.$hideThumbnails?"165.33px":"166px":2===props.$columnsCount?props.$hideThumbnails?"248.5px":"249px":"1fr",props=>props.$rowsCount,props=>props.$hideThumbnails?"40px":"60px",props=>props.$columnsCount,props=>props.$hideThumbnails?"40px":"60px");function Choices(_ref){var{disabled=!1,filteredChoiceIds=[],filterOpen=!1,previousChoiceId="",handleDelete=()=>{},onChoose=()=>!0,selectedChoiceIds=[],task}=_ref,[focusIndex,setFocusIndex]=(0,react.useState)(filteredChoiceIds.indexOf(previousChoiceId));(0,react.useEffect)(function resetFocusIndex(){setFocusIndex(filteredChoiceIds.indexOf(previousChoiceId))},[filteredChoiceIds.length]);var size=(0,react.useContext)(ResponsiveContext.u),columnsCount=howManyColumns(filteredChoiceIds);"small"===size&&3===columnsCount&&(columnsCount=2);var rowsCount=Math.ceil(filteredChoiceIds.length/columnsCount),thumbnailSetting=task.thumbnails||(task.alwaysShowThumbnails?"show":"default"),thumbnailSize=function whatSizeThumbnail(_ref){var{length,thumbnailSetting="default"}=_ref;if("hide"===thumbnailSetting)return"none";var columns=howManyColumns({length});return"show"===thumbnailSetting?3===columns?"small":"large":length>30?"none":3===columns?"small":"large"}({length:filteredChoiceIds.length,thumbnailSetting});function handleKeyDown(choiceId,event){var newIndex,index=filteredChoiceIds.indexOf(choiceId);switch(event.key){case"ArrowDown":return event.preventDefault(),event.stopPropagation(),newIndex=(index+1)%filteredChoiceIds.length,setFocusIndex(newIndex),!1;case"ArrowUp":return event.preventDefault(),event.stopPropagation(),-1===(newIndex=index-1)&&(newIndex=filteredChoiceIds.length-1),setFocusIndex(newIndex),!1;case"Backspace":case"Delete":return event.preventDefault(),event.stopPropagation(),handleDelete(choiceId),!1;case"End":return event.preventDefault(),event.stopPropagation(),setFocusIndex(filteredChoiceIds.length-1),!1;case"Enter":case"Space":return event.preventDefault(),event.stopPropagation(),selectedChoiceIds.indexOf(choiceId)>-1?!1:(onChoose(choiceId),!1);case"Home":return event.preventDefault(),event.stopPropagation(),setFocusIndex(0),!1;default:return!0}}return(0,jsx_runtime.jsx)(StyledGrid,{role:"menu",$columnsCount:columnsCount,$rowsCount:rowsCount,$hideThumbnails:"none"===thumbnailSize,children:filteredChoiceIds.map((choiceId,index)=>{var _task$choices,_task$images,_choice$images,choice=(null===(_task$choices=task.choices)||void 0===_task$choices?void 0:_task$choices.get(choiceId))||{},selected=selectedChoiceIds.indexOf(choiceId)>-1,src=(null===(_task$images=task.images)||void 0===_task$images?void 0:_task$images.get(null===(_choice$images=choice.images)||void 0===_choice$images?void 0:_choice$images[0]))||"",hasFocus=!filterOpen&&index===focusIndex,tabIndex=-1;(-1===focusIndex&&0===index||focusIndex===index)&&(tabIndex=0);var shadedBackground=function shouldShadeBackground(_ref){var{index=0,rowsCount=1}=_ref;return index%rowsCount%2==0}({index,rowsCount});return(0,jsx_runtime.jsx)("li",{role:"presentation",children:(0,jsx_runtime.jsx)(components_ChoiceButton,{choiceId,choiceLabel:task.strings.get("choices.".concat(choiceId,".label")),disabled,hasFocus,index,onChoose,onDelete:handleDelete,onKeyDown:handleKeyDown,selected,shadedBackground,src,tabIndex,thumbnailSize})},choiceId)})})}Choices.propTypes={disabled:prop_types.bool,filteredChoiceIds:(0,prop_types.arrayOf)(prop_types.string),filterOpen:prop_types.bool,previousChoiceId:prop_types.string,handleDelete:prop_types.func,onChoose:prop_types.func,selectedChoiceIds:(0,prop_types.arrayOf)(prop_types.string),task:(0,prop_types.shape)({help:prop_types.string,required:(0,prop_types.oneOfType)([prop_types.string,prop_types.bool]),taskKey:prop_types.string,thumbnails:prop_types.string,type:prop_types.string}).isRequired};const Choices_Choices=(0,mobxreact_esm.PA)(Choices);var Chooser_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"Chooser__StyledText",componentId:"sc-17onn59-0"})(["margin:0 0 20px;padding:0;width:100%;> *:first-child{margin-top:0;}"]),components={a:Text.E,h1:Text.E,h2:Text.E,h3:Text.E,h4:Text.E,h5:Text.E,h6:Text.E,p:Text.E,span:Text.E};function Chooser(_ref){var _task$choices,{disabled=!1,filters={},previousChoiceId="",handleDelete=()=>{},handleFilter=()=>{},onChoose=()=>!0,selectedChoiceIds=[],task}=_ref,[filterOpen,setFilterOpen]=(0,react.useState)(!1),filterStatusRef=(0,react.useRef)(null),announce=(0,react.useContext)(AnnounceContext.n),showFilters=task.characteristics.size>0,filteredChoiceIds=function getFilteredChoiceIds(filters,task){return task.choicesOrder.map(choiceId=>{var choice=task.choices.get(choiceId),rejected=!1;return Object.keys(filters).map(characteristicId=>{var valueId=filters[characteristicId];-1===(choice.characteristics.get(characteristicId)||[]).indexOf(valueId)&&(rejected=!0)}),rejected?null:choiceId}).filter(Boolean)}(filters,task);(0,react.useEffect)(function announceFilteredChoiceCount(){announce("Showing ".concat(filteredChoiceIds.length," of ").concat(task.choices.size," choices"),"polite",1e3)},[null==filteredChoiceIds?void 0:filteredChoiceIds.length,null===(_task$choices=task.choices)||void 0===_task$choices?void 0:_task$choices.size,announce]);var filterButtonHasFocus=filterStatusRef.current&&filterStatusRef.current.contains(document.activeElement);return(0,jsx_runtime.jsxs)(Box.a,{as:task.instruction?"fieldset":"div",alignSelf:"center",margin:"0",pad:"0",style:{border:"none"},width:"100%",children:[task.instruction?(0,jsx_runtime.jsx)(Chooser_StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{components,children:task.instruction})}):null,showFilters?(0,jsx_runtime.jsx)(FilterStatus_FilterStatus,{ref:filterStatusRef,disabled,filterOpen,filters,handleFilter,handleFilterOpen:function handleFilterOpen(){setFilterOpen(!filterOpen),filterOpen&&filterStatusRef.current.scrollIntoView({behavior:"smooth"})},showingChoices:filteredChoiceIds.length,task}):null,(0,jsx_runtime.jsx)(Choices_Choices,{disabled,filteredChoiceIds,filterOpen:filterOpen||filterButtonHasFocus,previousChoiceId,handleDelete,onChoose,selectedChoiceIds,task})]})}Chooser.propTypes={disabled:prop_types_default().bool,filters:prop_types_default().objectOf(prop_types_default().string),previousChoiceId:prop_types_default().string,handleDelete:prop_types_default().func,handleFilter:prop_types_default().func,onChoose:prop_types_default().func,selectedChoiceIds:prop_types_default().arrayOf(prop_types_default().string),task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired};const Chooser_Chooser=(0,mobxreact_esm.PA)(Chooser);function SurveyTask(_ref){var _annotation$value6,{annotation,task,disabled=!1}=_ref,[answers,setAnswers]=(0,react.useState)({}),[filters,setFilters]=(0,react.useState)({}),[previousChoice,setPreviousChoice]=(0,react.useState)(""),[selectedChoice,setSelectedChoice]=(0,react.useState)("");function handleChoice(selectedChoice){var _annotation$value;if(""===selectedChoice?annotation.setChoiceInProgress(!1):annotation.setChoiceInProgress(!0),null!=annotation&&null!==(_annotation$value=annotation.value)&&void 0!==_annotation$value&&_annotation$value.map(item=>item.choice).includes(selectedChoice)){var _annotation$value2,existingAnnotationValue=null==annotation||null===(_annotation$value2=annotation.value)||void 0===_annotation$value2?void 0:_annotation$value2.find(value=>value.choice===selectedChoice);setAnswers(existingAnnotationValue.answers),setSelectedChoice(selectedChoice)}else setAnswers({}),setSelectedChoice(selectedChoice)}(0,react.useEffect)(()=>()=>{annotation._choiceInProgress&&annotation.setChoiceInProgress(!1)},[task]);var selectedChoiceIds=null==annotation||null===(_annotation$value6=annotation.value)||void 0===_annotation$value6?void 0:_annotation$value6.map(item=>item.choice);return(0,jsx_runtime.jsx)(Box.a,{fill:!0,children:selectedChoice?(0,jsx_runtime.jsx)(Choice_Choice,{answers,choiceId:selectedChoice,handleAnswers:function handleAnswers(answers){setAnswers(answers)},handleCancel:function handleCancel(selectedChoice){setAnswers({}),setPreviousChoice(selectedChoice),setSelectedChoice(""),annotation.setChoiceInProgress(!1)},handleChoice,onIdentify:function handleIdentify(){var _annotation$value5,value=(null==annotation||null===(_annotation$value5=annotation.value)||void 0===_annotation$value5?void 0:_annotation$value5.filter(item=>item.choice!==selectedChoice))||[];value.push({choice:selectedChoice,answers,filters}),setAnswers({}),setSelectedChoice(""),setPreviousChoice(selectedChoice),annotation.update(value),annotation.setChoiceInProgress(!1)},task}):(0,jsx_runtime.jsx)(Chooser_Chooser,{disabled,filters,previousChoiceId:previousChoice,handleDelete:function handleDelete(deletedChoice){var _annotation$value3;if(null!=annotation&&null!==(_annotation$value3=annotation.value)&&void 0!==_annotation$value3&&_annotation$value3.map(item=>item.choice).includes(deletedChoice)){var _annotation$value4,value=(null==annotation||null===(_annotation$value4=annotation.value)||void 0===_annotation$value4?void 0:_annotation$value4.filter(item=>item.choice!==deletedChoice))||[];annotation.update(value)}setAnswers({}),setPreviousChoice(deletedChoice),setSelectedChoice(""),annotation.setChoiceInProgress(!1)},handleFilter:function handleFilter(characteristicId,valueId){var newFilters=Object.assign({},filters);valueId?newFilters[characteristicId]=valueId:characteristicId?delete newFilters[characteristicId]:newFilters={},setFilters(newFilters)},onChoose:handleChoice,selectedChoiceIds,task})})}SurveyTask.propTypes={annotation:prop_types_default().shape({setChoiceInProgress:prop_types_default().func,update:prop_types_default().func,value:prop_types_default().array,_choiceInProgress:prop_types_default().bool}).isRequired,disabled:prop_types_default().bool,task:prop_types_default().shape({help:prop_types_default().string,required:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().bool]),taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired};const components_SurveyTask=(0,mobxreact_esm.PA)(SurveyTask);var SurveyChoice=mobx_state_tree_module.gK.model("SurveyChoice",{answers:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.frozen({}),{}),choice:mobx_state_tree_module.gK.string,filters:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.frozen({}),{})}),Survey=mobx_state_tree_module.gK.model("Survey",{taskType:mobx_state_tree_module.gK.literal("survey"),value:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.array(SurveyChoice),[])}).views(self=>({get isComplete(){return self.value.length>0&&!self._choiceInProgress}})).volatile(self=>({_choiceInProgress:!1})).actions(self=>({setChoiceInProgress(boolean){self._choiceInProgress=boolean}}));const models_SurveyAnnotation=mobx_state_tree_module.gK.compose("SurveyAnnotation",models_Annotation,Survey);function SurveyTask_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function SurveyTask_defineProperty(e,r,t){return(r=function SurveyTask_toPropertyKey(t){var i=function SurveyTask_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var CharacteristicValue=mobx_state_tree_module.gK.model("CharacteristicValue",{label:mobx_state_tree_module.gK.string,image:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string)}),Characteristic=mobx_state_tree_module.gK.model("Characteristic",{label:mobx_state_tree_module.gK.string,values:mobx_state_tree_module.gK.map(CharacteristicValue),valuesOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string)}),Answer=mobx_state_tree_module.gK.model("Answer",{label:mobx_state_tree_module.gK.string}),Question=mobx_state_tree_module.gK.model("Question",{label:mobx_state_tree_module.gK.string,multiple:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),required:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),answersOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),answers:mobx_state_tree_module.gK.map(Answer)}),SurveyTask_Choice=mobx_state_tree_module.gK.model("Choice",{label:mobx_state_tree_module.gK.string,description:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),noQuestions:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),images:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),characteristics:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string)),confusionsOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),confusions:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.string)}),SurveyTask_Survey=mobx_state_tree_module.gK.model("Survey",{alwaysShowThumbnails:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.boolean),annotation:mobx_state_tree_module.gK.safeReference(models_SurveyAnnotation),characteristics:mobx_state_tree_module.gK.map(Characteristic),characteristicsOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),choices:mobx_state_tree_module.gK.map(SurveyTask_Choice),choicesOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),exclusions:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),images:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.string),inclusions:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),questions:mobx_state_tree_module.gK.map(Question),questionsMap:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string)),questionsOrder:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),thumbnails:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.enumeration("thumbnails",["show","hide","default"])),type:mobx_state_tree_module.gK.literal("survey")}).preProcessSnapshot(snapshot=>{if(snapshot.hasOwnProperty("alwaysShowThumbnails")){var newSnapshot=function SurveyTask_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SurveyTask_ownKeys(Object(t),!0).forEach(function(r){SurveyTask_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SurveyTask_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},snapshot);return"false"===snapshot.alwaysShowThumbnails&&(newSnapshot.alwaysShowThumbnails=!1),"true"===snapshot.alwaysShowThumbnails&&(newSnapshot.alwaysShowThumbnails=!0),newSnapshot.alwaysShowThumbnails=!!newSnapshot.alwaysShowThumbnails,newSnapshot.hasOwnProperty("thumbnails")||(newSnapshot.thumbnails=newSnapshot.alwaysShowThumbnails?"show":"default"),newSnapshot}return snapshot}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_SurveyAnnotation.create({id,task:self.taskKey,taskType:self.type})},isComplete:annotation=>self.required?!(null==annotation||!annotation.isComplete):!annotation._choiceInProgress}));const survey={TaskComponent:components_SurveyTask,TaskModel:mobx_state_tree_module.gK.compose("SurveyTask",models_Task,SurveyTask_Survey),AnnotationModel:models_SurveyAnnotation};var HighlighterTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"HighlighterTask__StyledText",componentId:"sc-hafdol-0"})(["margin:0;padding:0;width:100%;> *:first-child{margin-top:0;}"]),StyledLabelColor=styled_components_browser_esm.default.span.withConfig({displayName:"HighlighterTask__StyledLabelColor",componentId:"sc-hafdol-1"})(["align-self:center;background-color:",";border-radius:3px;height:1.8em;margin:0 .8em;width:40px;"],props=>props.color),HighlighterTask_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"HighlighterTask__StyledButton",componentId:"sc-hafdol-2"})([""," border-radius:4px;margin-bottom:.8em;margin-top:.8em;box-shadow:1px 1px 4px rgba(0,0,0,0.25);&:hover{","  box-shadow:1px 1px 4px rgba(0,0,0,0.25);}&:active{background:",";"," box-shadow:1px 1px 4px rgba(0,0,0,0.25);color:white;}&:focus:not(:focus-visible){box-shadow:1px 1px 4px rgba(0,0,0,0.25);}"],props=>props.theme.dark?(0,styled_components_browser_esm.css)(["background:",";border:2px solid ",";color:white;"],props.theme.global.colors["dark-4"],props.theme.global.colors["light-1"]):(0,styled_components_browser_esm.css)(["background:",";border:none;"],props.theme.global.colors["light-1"]),props=>props.theme.dark?(0,styled_components_browser_esm.css)(["background:",";border:2px solid ",";"],props.theme.global.colors["neutral-1"],props.theme.global.colors["light-1"]):(0,styled_components_browser_esm.css)(["background:linear-gradient(180deg,"," 0%,"," 100%);border:none;"],props.theme.global.colors["light-2"],props.theme.global.colors["accent-1"]),props=>props.theme.global.colors.brand,props=>props.theme.dark?(0,styled_components_browser_esm.css)(["border:2px solid ",";"],props.theme.global.colors["light-1"]):(0,styled_components_browser_esm.css)(["border:1px solid ",";"],props.theme.global.colors["light-5"]));function StyledButtonLabel(_ref){var{color,count=0,label}=_ref,{t}=useTranslation("plugins"),status=t("HighlighterTask.status",{count});return(0,jsx_runtime.jsxs)(Box.a,{align:"center",as:"span",direction:"row",children:[(0,jsx_runtime.jsx)(StyledLabelColor,{color}),(0,jsx_runtime.jsxs)(Box.a,{fill:"horizontal",direction:"row",justify:"between",margin:{left:"small"},children:[(0,jsx_runtime.jsx)(Text.E,{size:"16px",textAlign:"start",children:label}),(0,jsx_runtime.jsx)(Text.E,{color:{dark:count?"inherit":"dark-5",light:count?"inherit":"light-4"},children:status})]})]})}function HighlighterTask(_ref2){var{annotation,disabled=!1,task}=_ref2,{t}=useTranslation("plugins");function handleClick(event,index){var selection=document.getSelection();return selection.rangeCount&&selection.getRangeAt(0).toString().length&&function createLabelAnnotation(selection,labelIndex){var range=selection.getRangeAt(0),offset=function getOffset(selection){var{anchorNode}=selection,{parentNode}=anchorNode,start=0,nodeArray=parentNode.childNodes;for(var node of nodeArray){if(8!==node.nodeType&&node!==anchorNode){var text=node.getAttribute?node.getAttribute("data-selection"):node.textContent;start+=(null==text?void 0:text.length)||0}if(node===anchorNode)break}return start}(selection),start=offset+range.startOffset,end=offset+range.endOffset-1,labelInformation=(0,mobx_state_tree_module.dV)(task.highlighterLabels[labelIndex]),selectable=function selectableArea(selection,range,offset,start,end){var _selection$anchorNode,spansNodes=range.startContainer!==range.endContainer,noAreaSelected=start===end,subjectSelection=null===(_selection$anchorNode=selection.anchorNode.parentNode.parentNode)||void 0===_selection$anchorNode||null===(_selection$anchorNode=_selection$anchorNode.getAttribute("aria-label"))||void 0===_selection$anchorNode?void 0:_selection$anchorNode.startsWith("Subject");return!spansNodes&&!noAreaSelected&&subjectSelection}(selection,range,0,start,end);if(selectable){var newValue=Array.from(annotation.value);newValue.push({labelInformation,start,end,text:range.toString()}),annotation.update(newValue)}selection.collapseToEnd()}(selection,index),null}return(0,jsx_runtime.jsxs)(Box.a,{direction:"column",children:[(0,jsx_runtime.jsx)(HighlighterTask_StyledText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{children:task.instruction})}),task.highlighterLabels?task.highlighterLabels.map((label,index)=>{var count=annotation.value.filter(value=>value.labelInformation.label===label.label).length;return(0,jsx_runtime.jsx)(HighlighterTask_StyledButton,{disabled,label:(0,jsx_runtime.jsx)(StyledButtonLabel,{color:label.color,count,label:task.strings.get("highlighterLabels.".concat(index,".label"))}),name:"highlighter-label",onClick:event=>handleClick(0,index),onTouchEnd:event=>{event.preventDefault(),handleClick(0,index)}},"".concat(task.taskKey,"_").concat(index))}):(0,jsx_runtime.jsx)("span",{children:t("HighlighterTask.noLabels")})]})}HighlighterTask.propTypes={annotation:prop_types_default().shape({update:prop_types_default().func,value:prop_types_default().array}).isRequired,disabled:prop_types_default().bool,task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().bool,taskKey:prop_types_default().string,type:prop_types_default().string}).isRequired};const components_HighlighterTask=(0,mobxreact_esm.PA)(HighlighterTask);const models_HighlighterLabel=mobx_state_tree_module.gK.model("HighlighterLabel",{color:mobx_state_tree_module.gK.string,label:mobx_state_tree_module.gK.string});var Highlight=mobx_state_tree_module.gK.model("Highlight",{start:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),end:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),text:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),labelInformation:mobx_state_tree_module.gK.optional(models_HighlighterLabel,{color:"",label:""})}),Highlighter=mobx_state_tree_module.gK.model("Highlighter",{taskType:mobx_state_tree_module.gK.literal("highlighter"),value:mobx_state_tree_module.gK.array(Highlight)}).views(self=>({get isComplete(){return self.value.length>0}})).actions(self=>({deleteHighlight(index){self.value.splice(index,1)}}));const models_HighlighterAnnotation=mobx_state_tree_module.gK.compose("HighlighterAnnotation",models_Annotation,Highlighter);var HighlighterTask_Highlighter=mobx_state_tree_module.gK.model("Highlighter",{annotation:mobx_state_tree_module.gK.safeReference(models_HighlighterAnnotation),highlighterLabels:mobx_state_tree_module.gK.array(models_HighlighterLabel),type:mobx_state_tree_module.gK.literal("highlighter")}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_HighlighterAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const highlighter={TaskComponent:components_HighlighterTask,TaskModel:mobx_state_tree_module.gK.compose("HighlighterTask",models_Task,HighlighterTask_Highlighter),AnnotationModel:models_HighlighterAnnotation};function GeoDrawingTask(_ref){var _task$tools,{task}=_ref,instruction=(null==task?void 0:task.instruction)||"",toolLabel=(null==task||null===(_task$tools=task.tools)||void 0===_task$tools||null===(_task$tools=_task$tools[0])||void 0===_task$tools?void 0:_task$tools.label)||"";return(0,jsx_runtime.jsxs)("div",{children:[instruction?(0,jsx_runtime.jsx)("p",{children:instruction}):null,(0,jsx_runtime.jsxs)("p",{children:[toolLabel,": tool placeholder"]})]})}GeoDrawingTask.propTypes={task:(0,prop_types.shape)({instruction:prop_types.string,tools:(0,prop_types.arrayOf)((0,prop_types.shape)({label:prop_types.string,max:(0,prop_types.oneOfType)([prop_types.string,prop_types.number]),min:(0,prop_types.oneOfType)([prop_types.string,prop_types.number]),type:prop_types.string}))})};const components_GeoDrawingTask=(0,mobxreact_esm.PA)(GeoDrawingTask);var GeoDrawing=mobx_state_tree_module.gK.model("GeoDrawing",{taskType:mobx_state_tree_module.gK.literal("geoDrawing"),value:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen()),[])}).views(self=>({get isComplete(){return self.value.length>0}}));const models_GeoDrawingAnnotation=mobx_state_tree_module.gK.compose("GeoDrawingAnnotation",models_Annotation,GeoDrawing);const models_PointTool_PointTool=mobx_state_tree_module.gK.model("PointTool",{color:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),label:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),type:mobx_state_tree_module.gK.literal("Point"),uncertainty_circle:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1)});var GeoDrawingTask_toolModels=Object.values(models_namespaceObject),GeoDrawingTask_GenericTool=mobx_state_tree_module.gK.union(...GeoDrawingTask_toolModels),GeoDrawingTask_GeoDrawing=mobx_state_tree_module.gK.model("GeoDrawing",{annotation:mobx_state_tree_module.gK.safeReference(models_GeoDrawingAnnotation),required:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.union(mobx_state_tree_module.gK.string,mobx_state_tree_module.gK.boolean)),tools:mobx_state_tree_module.gK.array(GeoDrawingTask_GenericTool),type:mobx_state_tree_module.gK.literal("geoDrawing")}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_GeoDrawingAnnotation.create({id,task:self.taskKey,taskType:self.type,value:[]})}}));const task={TaskComponent:components_GeoDrawingTask,TaskModel:mobx_state_tree_module.gK.compose("GeoDrawingTask",models_Task,GeoDrawingTask_GeoDrawing),AnnotationModel:models_GeoDrawingAnnotation};var TextFromSubjectTask_StyledText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"TextFromSubjectTask__StyledText",componentId:"sc-rujl32-0"})(["display:block;margin:10px 0;"]),StyledTextArea=(0,styled_components_browser_esm.default)(TextArea.f).withConfig({displayName:"TextFromSubjectTask__StyledTextArea",componentId:"sc-rujl32-1"})(["font-family:'Anonymous Pro',monospace;@font-face{font-family:'Anonymous Pro';font-style:normal;font-weight:400;src:local('Anonymous Pro'),local('Anonymous Pro-Regular'),url(https://fonts.gstatic.com/s/anonymouspro/v21/rP2Bp2a15UIB7Un-bOeISG3pHls29QP-4Ks.woff2)  format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}"]);function TextFromSubjectTask(_ref){var{autoFocus=!1,disabled=!1,isChanged=!1,resetToSubject=()=>!0,task,updateAnnotation=()=>!0,value}=_ref,textArea=(0,react.useRef)(),{t}=useTranslation("plugins");var components={a:TextFromSubjectTask_StyledText,h1:TextFromSubjectTask_StyledText,h2:TextFromSubjectTask_StyledText,h3:TextFromSubjectTask_StyledText,h4:TextFromSubjectTask_StyledText,h5:TextFromSubjectTask_StyledText,h6:TextFromSubjectTask_StyledText,p:TextFromSubjectTask_StyledText,span:Text.E};return(0,jsx_runtime.jsxs)(Box.a,{direction:"column",children:[(0,jsx_runtime.jsxs)("label",{htmlFor:"".concat(task.taskKey,"-").concat(task.type),children:[(0,jsx_runtime.jsx)(Markdownz.Ay,{components,children:task.instruction}),(0,jsx_runtime.jsx)(StyledTextArea,{ref:textArea,autoFocus,disabled,id:"".concat(task.taskKey,"-").concat(task.type),rows:(null==value?void 0:value.split(/\r\n|\r|\n/).length)+3,value,onChange:function onChange(){updateAnnotation(textArea)}})]}),(0,jsx_runtime.jsx)(PrimaryButton.A,{color:"teal",disabled:disabled||!isChanged,label:t("TextFromSubjectTask.reset"),onClick:()=>resetToSubject()})]})}TextFromSubjectTask.propTypes={autoFocus:prop_types_default().bool,disabled:prop_types_default().bool,isChanged:prop_types_default().bool,resetToSubject:prop_types_default().func,task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,required:prop_types_default().bool,taskKey:prop_types_default().string,text_tags:prop_types_default().arrayOf(prop_types_default().string),type:prop_types_default().string}).isRequired,updateAnnotation:prop_types_default().func,value:prop_types_default().string.isRequired};var TextFromSubjectContainer_console=__webpack_require__("../../node_modules/console-browserify/index.js");function TextFromSubjectContainer(_ref){var{annotation,autoFocus=!1,disabled=!0,subject,task}=_ref,{initializedFromSubject,value}=annotation,textDataLoadingState=async_states_default().initialized,{data:textData,loading,error}=useSubjectText({subject});!loading&&textData&&(textDataLoadingState=async_states_default().success),!loading&&error&&(textDataLoadingState=async_states_default().error,TextFromSubjectContainer_console.error(error)),initializedFromSubject||textDataLoadingState!==async_states_default().success||annotation.updateFromSubject(textData);var isChanged=initializedFromSubject&&value!==textData;return(0,jsx_runtime.jsx)(TextFromSubjectTask,{autoFocus,disabled:disabled||!initializedFromSubject,isChanged,resetToSubject:function resetToSubject(){annotation.update(textData)},task,updateAnnotation:function updateAnnotation(ref){var currentRef=ref.current;if(currentRef&&annotation){var text=currentRef.value;annotation.update(text)}},value})}TextFromSubjectContainer.propTypes={annotation:prop_types_default().shape({update:prop_types_default().func,value:prop_types_default().string}).isRequired,autoFocus:prop_types_default().bool,disabled:prop_types_default().bool,subject:prop_types_default().shape({id:prop_types_default().string}).isRequired,task:prop_types_default().shape({help:prop_types_default().string,instruction:prop_types_default().string,type:prop_types_default().string}).isRequired};const components_TextFromSubjectContainer=(0,mobxreact_esm.PA)(TextFromSubjectContainer);var TextFromSubject=mobx_state_tree_module.gK.model("TextFromSubject",{taskType:mobx_state_tree_module.gK.literal("textFromSubject"),value:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"")}).volatile(self=>({initializedFromSubject:!1})).views(self=>({get isComplete(){return self.initializedFromSubject&&""!==self.value}})).actions(self=>({updateFromSubject(value){self.initializedFromSubject=!0,self.value=value}}));const models_TextFromSubjectAnnotation=mobx_state_tree_module.gK.compose("TextFromSubjectAnnotation",models_Annotation,TextFromSubject);var TextFromSubjectTask_TextFromSubject=mobx_state_tree_module.gK.model("TextFromSubject",{annotation:mobx_state_tree_module.gK.safeReference(models_TextFromSubjectAnnotation),type:mobx_state_tree_module.gK.literal("textFromSubject")}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_TextFromSubjectAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const textFromSubject={TaskComponent:components_TextFromSubjectContainer,TaskModel:mobx_state_tree_module.gK.compose("TextFromSubjectTask",models_Task,TextFromSubjectTask_TextFromSubject),AnnotationModel:models_TextFromSubjectAnnotation};var TranscriptionAnnotation_excluded=["id"],TranscriptionAnnotation_excluded2=["annotations"];function TranscriptionAnnotation_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function TranscriptionAnnotation_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var Transcription=mobx_state_tree_module.gK.model("Transcription",{taskType:mobx_state_tree_module.gK.literal("transcription"),value:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.safeReference(marks_TranscriptionLine_TranscriptionLine))}).views(self=>({toSnapshot(){var snapshot=(0,mobx_state_tree_module.dV)(self),value=(0,mobx_state_tree_module.KE)(models_TranscriptionTask,(0,mobx_state_tree_module.Zn)(self),self.task).marks.map(mark=>(0,mobx_state_tree_module.dV)(mark)),drawingSnapshot=Object.assign({},snapshot,{value}),drawingAnnotations=[drawingSnapshot];return drawingSnapshot.value.forEach((markSnapshot,markIndex)=>{var mark=Object.assign({},markSnapshot);mark.details=mark.annotations.map(annotation=>({task:annotation.task})),mark.annotations.forEach(markAnnotation=>{var finalAnnotation=Object.assign({},markAnnotation,{markIndex}),{id}=finalAnnotation,rest=TranscriptionAnnotation_objectWithoutProperties(finalAnnotation,TranscriptionAnnotation_excluded);drawingAnnotations.push(rest)});var{annotations}=mark,rest=TranscriptionAnnotation_objectWithoutProperties(mark,TranscriptionAnnotation_excluded2);drawingSnapshot.value[markIndex]=rest}),drawingAnnotations}}));const models_TranscriptionAnnotation=mobx_state_tree_module.gK.compose("TranscriptionAnnotation",models_Annotation,Transcription);var TranscriptionTask_Transcription=mobx_state_tree_module.gK.model("Transcription",{activeMark:mobx_state_tree_module.gK.safeReference(marks_TranscriptionLine_TranscriptionLine),annotation:mobx_state_tree_module.gK.safeReference(models_TranscriptionAnnotation),caesarKey:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.literal("alice"),"alice"),tools:mobx_state_tree_module.gK.array(TranscriptionLineTool_TranscriptionLineTool),type:mobx_state_tree_module.gK.literal("transcription")}).actions(self=>({togglePreviousMarks:function togglePreviousMarks(option){self.shownMarks=option,self.shownMarks===helpers_shownMarks.NONE?self.hiddenMarkIds.replace(self.marks.map(mark=>mark.id)):self.hiddenMarkIds.clear()}})).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_TranscriptionAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const models_TranscriptionTask=mobx_state_tree_module.gK.compose("TranscriptionTask",drawing.TaskModel,TranscriptionTask_Transcription),transcription={TaskComponent:drawing.TaskComponent,TaskModel:models_TranscriptionTask,AnnotationModel:models_TranscriptionAnnotation};var SVG_ARROW="48 50, 48 15, 40 15, 50 0, 60 15, 52 15, 52 50",StyledInstructionText=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"VolumetricTask__StyledInstructionText",componentId:"sc-uuki5g-0"})(["margin:0;padding:0;width:100%;> *:first-child{margin-top:0;}"]),StyledToolIcon=styled_components_browser_esm.default.div.withConfig({displayName:"VolumetricTask__StyledToolIcon",componentId:"sc-uuki5g-1"})(["background-color:#2d2d2d;display:flex;align-items:center;padding:15px;> svg{height:1.5em;width:1.5em;}"]);function VolumetricTask(_ref){var{annotation,disabled=!1,task}=_ref;return(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(StyledInstructionText,{as:"legend",size:"small",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{children:task.instruction})}),(0,jsx_runtime.jsx)(TaskInput_TaskInput,{checked:!0,disabled,index:0,label:"3D Viewer",labelIcon:(0,jsx_runtime.jsx)(StyledToolIcon,{children:(0,jsx_runtime.jsxs)(Blank.h,{viewBox:"0 0 100 100",children:[(0,jsx_runtime.jsx)("polygon",{points:SVG_ARROW,fill:"blue",transform:"rotate(0 50 50)"}),(0,jsx_runtime.jsx)("polygon",{points:SVG_ARROW,fill:"green",transform:"rotate(135 50 50)"}),(0,jsx_runtime.jsx)("polygon",{points:SVG_ARROW,fill:"red",transform:"rotate(225 50 50)"})]})}),labelStatus:(0,jsx_runtime.jsx)(InputStatus,{count:annotation.value.length}),name:"volumetric-tool",type:"radio"})]})}VolumetricTask.propTypes={annotation:prop_types.object,disabled:prop_types.bool,task:(0,prop_types.shape)({instruction:prop_types.string})};const components_VolumetricTask=(0,mobxreact_esm.PA)(VolumetricTask);var CoordinateModel=mobx_state_tree_module.gK.model("CoordinateModel",{x:mobx_state_tree_module.gK.number,y:mobx_state_tree_module.gK.number,z:mobx_state_tree_module.gK.number}),PointsModel=mobx_state_tree_module.gK.model("PointsModel",{active:mobx_state_tree_module.gK.array(CoordinateModel),connected:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.array(CoordinateModel),[])}),AnnotationModel=mobx_state_tree_module.gK.model("AnnotationModel",{label:mobx_state_tree_module.gK.string,threshold:mobx_state_tree_module.gK.number,points:PointsModel}),Volumetric=mobx_state_tree_module.gK.model("Volumetric",{taskType:mobx_state_tree_module.gK.literal("volumetric"),value:mobx_state_tree_module.gK.array(AnnotationModel)});const models_VolumetricAnnotation=mobx_state_tree_module.gK.compose("VolumetricAnnotation",models_Annotation,Volumetric);var VolumetricTask_Volumetric=mobx_state_tree_module.gK.model("Volumetric",{annotation:mobx_state_tree_module.gK.safeReference(models_VolumetricAnnotation),type:mobx_state_tree_module.gK.literal("volumetric")}).views(self=>({defaultAnnotation(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cuid_default()();return models_VolumetricAnnotation.create({id,task:self.taskKey,taskType:self.type})}}));const volumetric={TaskComponent:components_VolumetricTask,TaskModel:mobx_state_tree_module.gK.compose("VolumetricTask",models_Task,VolumetricTask_Volumetric),AnnotationModel:models_VolumetricAnnotation};const store_Resource=mobx_state_tree_module.gK.model("Resource",{id:mobx_state_tree_module.gK.identifier});var process=__webpack_require__("../../node_modules/process/browser.js");const Classification_ClassificationMetadata=mobx_state_tree_module.gK.model("ClassificationMetadata",{classifier_version:mobx_state_tree_module.gK.literal("2.0"),feedback:mobx_state_tree_module.gK.frozen({}),finishedAt:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),revision:mobx_state_tree_module.gK.frozen(process.env.COMMIT_ID),session:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),source:mobx_state_tree_module.gK.enumeration(["api","sugar"]),startedAt:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),subjectDimensions:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen({clientHeight:mobx_state_tree_module.gK.integer,clientWidth:mobx_state_tree_module.gK.integer,naturalHeight:mobx_state_tree_module.gK.integer,naturalWidth:mobx_state_tree_module.gK.integer})),subjectSelectionState:mobx_state_tree_module.gK.frozen({already_seen:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),finished_workflow:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),retired:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),selected_at:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),selection_state:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),user_has_finished_workflow:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1)}),subject_flagged:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),userAgent:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,navigator.userAgent),userLanguage:mobx_state_tree_module.gK.string,utcOffset:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,(60*(new Date).getTimezoneOffset()).toString()),viewport:mobx_state_tree_module.gK.frozen({height:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.integer,window.innerHeight),width:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.integer,window.innerWidth)}),workflowVersion:mobx_state_tree_module.gK.string}).actions(self=>({afterAttach(){(0,mobx_state_tree_module.LF)(self,(0,mobx_esm.fm)(function _onLocaleChange(){var _getRoot;self.update({userLanguage:null===(_getRoot=(0,mobx_state_tree_module.Zn)(self))||void 0===_getRoot?void 0:_getRoot.locale})}))},afterCreate(){var now=new Date;self.startedAt=now.toISOString()},update(newMetadata){Object.entries(newMetadata).forEach(_ref=>{var[key,value]=_ref;self[key]=value})}}));var annotationModels=Object.values(tasks_namespaceObject).map(task=>task.AnnotationModel),Classification=mobx_state_tree_module.gK.model("Classification",{annotations:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.union(...annotationModels)),completed:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),links:mobx_state_tree_module.gK.frozen({project:mobx_state_tree_module.gK.string,subjects:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),workflow:mobx_state_tree_module.gK.string}),metadata:mobx_state_tree_module.gK.maybe(Classification_ClassificationMetadata)}).views(self=>({toSnapshot(){var snapshot=(0,mobx_state_tree_module.dV)(self),annotations=[];return self.annotations.forEach(annotation=>{annotations=annotations.concat(annotation.toSnapshot())}),snapshot=Object.assign({},snapshot,{annotations})},previousInteractionTaskAnnotations:activeTaskKey=>(Array.from(self.annotations.values())||[]).filter(annotation=>"DrawingAnnotation"===(0,mobx_state_tree_module.Pw)(annotation).name||"TranscriptionAnnotation"===(0,mobx_state_tree_module.Pw)(annotation).name).filter(annotation=>annotation.task!==activeTaskKey)})).preProcessSnapshot(snapshot=>{var newSnapshot=Object.assign({},snapshot);if(newSnapshot.id=snapshot.id||cuid_default()(),snapshot.annotations&&Array.isArray(snapshot.annotations)){var annotations={};snapshot.annotations.forEach(annotation=>{annotation.id=annotation.id||cuid_default()(),annotations[annotation.id]=annotation}),newSnapshot.annotations=annotations}return newSnapshot}).postProcessSnapshot(snapshot=>{var newSnapshot=Object.assign({},snapshot);return newSnapshot.annotations=Object.values(snapshot.annotations),newSnapshot});const Classification_Classification=mobx_state_tree_module.gK.compose("ClassificationResource",store_Resource,store_AnnotationsStore,Classification);var ResourceStore_console=__webpack_require__("../../node_modules/console-browserify/index.js"),ResourceStore_process=__webpack_require__("../../node_modules/process/browser.js"),ResourceStore=mobx_state_tree_module.gK.model("ResourceStore",{active:mobx_state_tree_module.gK.safeReference(store_Resource),headers:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.model({etag:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string)}),{}),resources:mobx_state_tree_module.gK.map(store_Resource),loadingState:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration("loadingState",async_states_default().values),async_states_default().initialized),type:mobx_state_tree_module.gK.string}).views(self=>({get loaded(){return self.loadingState!==async_states_default().initialized}})).actions(self=>({fetchResource:(0,mobx_state_tree_module.L3)(function*fetchResource(id){var client=(0,mobx_state_tree_module.Zn)(self).client.panoptes,{type}=self;self.loadingState=async_states_default().loading;try{var response=yield client.get("/".concat(type,"/").concat(id));if(self.headers=response.headers,response.body[type]&&response.body[type].length>0){var resource=response.body[type][0];return self.loadingState=async_states_default().success,resource}return void(self.loadingState=async_states_default().success)}catch(error){return ResourceStore_console.error(error),void(self.loadingState=async_states_default().error)}}),onError(error){ResourceStore_process.browser&&ResourceStore_console.error(error),self.loadingState=async_states_default().error},onLoading(){self.loadingState=async_states_default().loading},onReady(){self.loadingState=async_states_default().success},reset(){self.headers=void 0,self.active=void 0,self.loadingState=async_states_default().initialized,self.resources.clear()},getResource:(0,mobx_state_tree_module.L3)(function*getResource(id){if(!self.resources.get(id)){var panoptesResource=yield self.fetchResource(id);self.setResources([panoptesResource])}return self.resources.get(id)}),setResources(){var resources=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(resources&&resources.length>0)try{resources.forEach(resource=>{resource&&self.resources.put(resource)}),self.loadingState=async_states_default().success}catch(error){ResourceStore_console.error(error)}},setActive:(0,mobx_state_tree_module.L3)(function setActive(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function*(){if(!self.resources.get(id)){var resource=yield self.fetchResource(id);self.setResources([resource])}self.active=id}()})}));const ResourceStore_ResourceStore=ResourceStore;var currentScopes=__webpack_require__("../lib-classifier/node_modules/@sentry/core/build/esm/currentScopes.js"),ClassificationQueue_console=__webpack_require__("../../node_modules/console-browserify/index.js"),ClassificationQueue_excluded=["id"];function ClassificationQueue_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function ClassificationQueue_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){ClassificationQueue_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){ClassificationQueue_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}var ClassificationQueue_DEFAULT_HANDLER=()=>!0;const utils_ClassificationQueue=class ClassificationQueue{add(classification){return this.store(classification),this.flushToBackend()}store(classification){var queue=this._loadQueue();queue.push(classification);try{this._saveQueue(queue),ClassificationQueue_console.info("Queued classifications:",queue.length)}catch(error){ClassificationQueue_console.error("Failed to queue classification:",error.message),currentScopes.v4(scope=>{scope.setTag("classificationQueue","storeFailed"),scope.setExtra("classification",JSON.stringify(classification)),esm_exports.Cp(error)})}}remove(classification){var queue=this._loadQueue();try{var newQueue=queue.filter(c=>c.id!==classification.id);this._saveQueue(newQueue)}catch(error){ClassificationQueue_console.error(error.message),currentScopes.v4(scope=>{scope.setTag("classificationQueue","removeFailed"),scope.setExtra("classification",JSON.stringify(classification)),esm_exports.Cp(error)})}}length(){return this._loadQueue().length}addRecent(classification){this.recents.length>10&&this.recents.pop().destroy();this.recents.unshift(classification)}flushToBackend(){var _this=this;return ClassificationQueue_asyncToGenerator(function*(){var pendingClassifications=_this._loadQueue();_this.flushTimeout&&(clearTimeout(_this.flushTimeout),_this.flushTimeout=null),ClassificationQueue_console.log("Saving queued classifications:",pendingClassifications.length);var authorization=yield getBearerToken(_this.authClient),awaitSaveClassifications=pendingClassifications.filter(c=>!_this.sending.includes(c.id)).map(classificationData=>_this._saveClassification(classificationData,authorization));return Promise.all(awaitSaveClassifications)})()}_saveClassification(classificationData,authorization){var _this2=this;return ClassificationQueue_asyncToGenerator(function*(){try{var tokenError,{id}=classificationData,classificationToSave=function ClassificationQueue_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function ClassificationQueue_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(classificationData,ClassificationQueue_excluded);if(_this2.sending.push(id),authorization){var token=authorization.replace("Bearer ",""),{data,error}=yield src.j2.verify(token);tokenError=error}var response=yield _this2.apiClient.post(_this2.endpoint,{classifications:classificationToSave},{authorization});if(response.ok){_this2.remove(classificationData);var[savedClassification]=response.body.classifications;ClassificationQueue_console.log("Saved classification",savedClassification.id),_this2.onClassificationSaved(savedClassification),_this2.addRecent(savedClassification),tokenError&&(ClassificationQueue_console.error(tokenError),currentScopes.v4(scope=>{scope.setTag("classificationError","tokenError"),scope.setExtra("classification",JSON.stringify(savedClassification)),esm_exports.Cp(tokenError)}))}return _this2.sending=_this2.sending.filter(id=>id!==classificationData.id),response}catch(error){if(ClassificationQueue_console.error("Failed to save a queued classification:",error.message),_this2.sending=_this2.sending.filter(id=>id!==classificationData.id),422!==error.status)try{_this2.flushTimeout||(_this2.flushTimeout=setTimeout(_this2.flushToBackend,3e5))}catch(saveQueueError){ClassificationQueue_console.error("Failed to update classification queue:",saveQueueError)}else ClassificationQueue_console.error("Dropping malformed classification permanently",classificationData),_this2.remove(classificationData);return currentScopes.v4(scope=>{var errorTag=error.status||"saveFailed";scope.setTag("classificationError",errorTag),scope.setExtra("classification",JSON.stringify(classificationData)),esm_exports.Cp(error)}),error}})()}_loadQueue(){var queue=JSON.parse(this.storage.getItem("failed-classifications"));return null==queue&&(queue=[]),queue}_saveQueue(queue){this.storage.setItem("failed-classifications",JSON.stringify(queue))}constructor(){var api=arguments.length>0&&void 0!==arguments[0]?arguments[0]:src.bB,onClassificationSaved=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ClassificationQueue_DEFAULT_HANDLER,authClient=arguments.length>2?arguments[2]:void 0;this.storage=window.localStorage,this.apiClient=api,this.authClient=authClient,this.onClassificationSaved=onClassificationSaved,this.recents=[],this.sending=[],this.flushTimeout=null,this.endpoint="/classifications",this.flushToBackend=this.flushToBackend.bind(this),this.flushToBackend()}};var _window,hash=__webpack_require__("../../node_modules/hash.js/lib/hash.js"),hash_default=__webpack_require__.n(hash),session_console=__webpack_require__("../../node_modules/console-browserify/index.js"),storage=null===(_window=window)||void 0===_window?void 0:_window.sessionStorage;const session={generateSessionID(){var stored={id:hash_default().sha256().update("".concat(1e4*Math.random()).concat(Date.now()).concat(1e3*Math.random())).digest("hex")};try{null==storage||storage.setItem("session_id",JSON.stringify(stored))}catch(e){session_console.error(e)}return stored},getSessionID(){var stored=null!=storage&&storage.getItem("session_id")?JSON.parse(null==storage?void 0:storage.getItem("session_id")):this.generateSessionID(),{id}=stored;return id}};var getBearerToken_console=__webpack_require__("../../node_modules/console-browserify/index.js");function getBearerToken_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getBearerToken(_x){return _getBearerToken.apply(this,arguments)}function _getBearerToken(){return _getBearerToken=function getBearerToken_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getBearerToken_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getBearerToken_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(authClient){var token="";if(authClient)try{var authToken=yield authClient.checkBearerToken();return"string"==typeof authToken&&authToken&&(token=authToken),authToken&&authToken.access_token&&(token=authToken.access_token),token?"Bearer ".concat(token):token}catch(error){getBearerToken_console.error("Cannot check bearer token:",error)}return token}),_getBearerToken.apply(this,arguments)}var mimeTypesRegexes={application:/^json/,audio:/^[mp3|m4a|mpeg]+$/,image:/^[jpeg|png|gif]+$/,text:/^plain/,video:/^[mp4|mpeg|x\-m4v]+$/},validateMimeType_console=__webpack_require__("../../node_modules/console-browserify/index.js");function validateMimeType(mimeType){var[type,format]=mimeType.split("/"),isMimeTypeValid=mimeTypesRegexes[type].test(format);return isMimeTypeValid||validateMimeType_console.error("".concat(mimeType," is not valid for use in the classifier.")),isMimeTypeValid}var createLocationCounts_console=__webpack_require__("../../node_modules/console-browserify/index.js");const createLocationCounts_createLocationCounts=function createLocationCounts(_ref){var{locations}=_ref,mimeTypes=locations.map(location=>Object.keys(location)[0]);try{var images=mimeTypes.filter(mimeType=>mimeType.startsWith("image")&&validateMimeType(mimeType)).length,json=mimeTypes.filter(mimeType=>mimeType.startsWith("application")&&validateMimeType(mimeType)).length,text=mimeTypes.filter(mimeType=>mimeType.startsWith("text")&&validateMimeType(mimeType)).length;return{images,json,videos:mimeTypes.filter(mimeType=>mimeType.startsWith("video")&&validateMimeType(mimeType)).length,text,total:locations.length}}catch(error){return createLocationCounts_console.log(error),{}}};var subjectsSeenThisSession={add:function add(workflowID){var subjectIDs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],storage=window?window.sessionStorage:null,seenThisSession=[];if(storage&&storage.getItem("subjectsSeenThisSession")){var alreadySeen=storage.getItem("subjectsSeenThisSession");seenThisSession=JSON.parse(alreadySeen)}subjectIDs.length>0&&workflowID&&storage&&(subjectIDs.forEach(subjectID=>{var stringID="".concat(workflowID,"/").concat(subjectID);seenThisSession.includes(stringID)||seenThisSession.push(stringID)}),storage.setItem("subjectsSeenThisSession",JSON.stringify(seenThisSession)))},check:(workflowID,subjectID)=>{var storage=window?window.sessionStorage:null,alreadySeen=storage?storage.getItem("subjectsSeenThisSession"):"";return(alreadySeen?JSON.parse(alreadySeen):[]).includes("".concat(workflowID,"/").concat(subjectID))}};const subjectsSeenThisSession_subjectsSeenThisSession=subjectsSeenThisSession;var subjectViewers={};Object.defineProperty(subjectViewers,"dataImage",{value:"dataImage",enumerable:!0}),Object.defineProperty(subjectViewers,"flipbook",{value:"flipbook",enumerable:!0}),Object.defineProperty(subjectViewers,"geoMap",{value:"geoMap",enumerable:!0}),Object.defineProperty(subjectViewers,"jsonData",{value:"jsonData",enumerable:!0}),Object.defineProperty(subjectViewers,"imageAndText",{value:"imageAndText",enumerable:!0}),Object.defineProperty(subjectViewers,"lightCurve",{value:"lightCurve",enumerable:!0}),Object.defineProperty(subjectViewers,"multiFrame",{value:"multiFrame",enumerable:!0}),Object.defineProperty(subjectViewers,"scatterPlot",{value:"scatterPlot",enumerable:!0}),Object.defineProperty(subjectViewers,"singleImage",{value:"singleImage",enumerable:!0}),Object.defineProperty(subjectViewers,"singleText",{value:"singleText",enumerable:!0}),Object.defineProperty(subjectViewers,"singleVideo",{value:"singleVideo",enumerable:!0}),Object.defineProperty(subjectViewers,"subjectGroup",{value:"subjectGroup",enumerable:!0}),Object.defineProperty(subjectViewers,"variableStar",{value:"variableStar",enumerable:!0}),Object.defineProperty(subjectViewers,"volumetric",{value:"volumetric",enumerable:!0}),Object.defineProperty(subjectViewers,"values",{value:Object.values(subjectViewers)});const subjectViewers_subjectViewers=subjectViewers;function withFeatureFlag_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function withFeatureFlag_defineProperty(e,r,t){return(r=function withFeatureFlag_toPropertyKey(t){var i=function withFeatureFlag_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function withFeatureFlag_storeMapper(classifierStore){return{project:null==classifierStore?void 0:classifierStore.projects.active}}var withStores_excluded=["store"];function withStores_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function withStores_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?withStores_ownKeys(Object(t),!0).forEach(function(r){withStores_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):withStores_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function withStores_defineProperty(e,r,t){return(r=function withStores_toPropertyKey(t){var i=function withStores_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function withStores(Component){var storeMapper=arguments.length>1&&void 0!==arguments[1]?arguments[1]:store=>store;function WithStores(_ref,ref){var{store}=_ref,props=function withStores_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function withStores_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,withStores_excluded),storeProps=store?storeMapper(store):useStores(storeMapper);return(0,jsx_runtime.jsx)(Component,withStores_objectSpread(withStores_objectSpread({ref},storeProps),props))}return(0,mobxreact_esm.PA)((0,react.forwardRef)(WithStores))}var ClassificationStore_process=__webpack_require__("../../node_modules/process/browser.js"),ClassificationStore_console=__webpack_require__("../../node_modules/console-browserify/index.js");function ClassificationStore_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ClassificationStore_defineProperty(e,r,t){return(r=function ClassificationStore_toPropertyKey(t){var i=function ClassificationStore_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ClassificationStore=mobx_state_tree_module.gK.model("ClassificationStore",{active:mobx_state_tree_module.gK.safeReference(Classification_Classification),demoMode:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.boolean),resources:mobx_state_tree_module.gK.map(Classification_Classification),type:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"classifications")}).views(self=>({annotation:task=>(0,mobx_state_tree_module.aF)(()=>self.active)?self.active.annotation(task):null,get currentAnnotations(){return(0,mobx_state_tree_module.aF)(()=>self.active)?self.active.annotations:[]},get classificationQueue(){var client=(0,mobx_state_tree_module.Zn)(self).client.panoptes,{authClient}=(0,mobx_state_tree_module.Zn)(self);return new utils_ClassificationQueue(client,self.onClassificationSaved,authClient)}})).volatile(self=>({onComplete:()=>null})).actions(self=>({addAnnotation:function addAnnotation(task,annotationValue){if((0,mobx_state_tree_module.aF)(()=>self.active)){var classification=self.active;if(classification)return classification.addAnnotation(task,annotationValue)}else if(ClassificationStore_process.browser)return ClassificationStore_console.error("No active classification. Cannot add annotation."),null},completeClassification:function completeClassification(_ref){var{doneAndTalk=!1}=_ref,classification=(0,mobx_state_tree_module.$Q)(()=>self.active),subject=(0,mobx_state_tree_module.$Q)(()=>(0,mobx_state_tree_module.Zn)(self).subjects.active);if(classification&&subject){var subjectDimensions=(0,mobx_state_tree_module.dV)((0,mobx_state_tree_module.Zn)(self).subjectViewer).dimensions,metadata={finishedAt:(new Date).toISOString(),session:session.getSessionID(),subjectDimensions,viewport:{width:window.innerWidth,height:window.innerHeight}},feedback=(0,mobx_state_tree_module.Zn)(self).feedback;feedback.isValid&&(metadata.feedback=(0,mobx_state_tree_module.dV)(feedback.rules)),classification.metadata.update(metadata),classification.completed=!0;var classificationToSubmit=classification.toSnapshot(),convertedMetadata={};if(Object.entries(classificationToSubmit.metadata).forEach(_ref2=>{var[key,value]=_ref2;convertedMetadata[snakeCase_default()(key)]=value}),classificationToSubmit.metadata=convertedMetadata,"SubjectGroup"===(0,mobx_state_tree_module.Pw)(subject).name){var links=function ClassificationStore_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ClassificationStore_ownKeys(Object(t),!0).forEach(function(r){ClassificationStore_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ClassificationStore_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},classificationToSubmit.links);links.subjects=[...subject.subjectIds.toJSON()],classificationToSubmit.links=links}var already_seen=subject.alreadySeen,subjectData=Object.assign({},(0,mobx_state_tree_module.dV)(subject),{already_seen});return self.onComplete(classificationToSubmit,subjectData),self.trackAlreadySeenSubjects(classificationToSubmit.links.workflow,classificationToSubmit.links.subjects),ClassificationStore_process.browser&&ClassificationStore_console.log("Completed classification",classificationToSubmit),self.demoMode?(self.loadingState=async_states_default().posting,ClassificationStore_process.browser&&ClassificationStore_console.log("Demo mode enabled. No classification submitted."),Promise.resolve(!0)):self.submitClassification(classificationToSubmit,{doneAndTalk})}ClassificationStore_process.browser&&ClassificationStore_console.error("No active classification or active subject. Cannot complete classification")},createClassification:function createClassification(subject,workflow,project){if(!subject||!workflow||!project)throw new Error("Cannot create a classification without a subject, workflow, project");var{locale}=(0,mobx_state_tree_module.Zn)(self),tempID=cuid_default()(),newClassification=Classification_Classification.create({id:tempID,links:{project:project.id,subjects:[subject.id],workflow:workflow.id},metadata:Classification_ClassificationMetadata.create({classifier_version:"2.0",source:subject.metadata.intervention?"sugar":"api",subjectSelectionState:{already_seen:subject.already_seen,finished_workflow:subject.finished_workflow,retired:subject.retired,selected_at:subject.selected_at,selection_state:subject.selection_state,user_has_finished_workflow:subject.user_has_finished_workflow},userLanguage:locale,workflowVersion:workflow.version})});self.resources.put(newClassification),self.setActive(tempID),self.loadingState=async_states_default().success},onClassificationSaved:function onClassificationSaved(savedClassification){},setDemoMode:function setDemoMode(boolean){self.demoMode=boolean},setOnComplete:function setOnComplete(onComplete){self.onComplete=onComplete},submitClassification:(0,mobx_state_tree_module.L3)(function submitClassification(classification,_ref3){var{doneAndTalk=!1}=_ref3;return function*(){try{doneAndTalk?(yield self.classificationQueue.add(classification),self.loadingState=async_states_default().posting):(self.loadingState=async_states_default().posting,yield self.classificationQueue.add(classification))}catch(error){ClassificationStore_console.error(error),self.loadingState=async_states_default().error}}()}),trackAlreadySeenSubjects:function trackAlreadySeenSubjects(workflowID,subjectIDs){subjectsSeenThisSession_subjectsSeenThisSession.add(workflowID,subjectIDs)}}));const store_ClassificationStore=mobx_state_tree_module.gK.compose("ClassificationResourceStore",ResourceStore_ResourceStore,ClassificationStore);var flatten=__webpack_require__("../../node_modules/lodash/flatten.js"),flatten_default=__webpack_require__.n(flatten),forEach=__webpack_require__("../../node_modules/lodash/forEach.js"),forEach_default=__webpack_require__.n(forEach),reduce=__webpack_require__("../../node_modules/lodash/reduce.js"),reduce_default=__webpack_require__.n(reduce),find=__webpack_require__("../../node_modules/lodash/find.js"),find_default=__webpack_require__.n(find),isBoolean=__webpack_require__("../../node_modules/lodash/isBoolean.js"),isBoolean_default=__webpack_require__.n(isBoolean),isEmpty=__webpack_require__("../../node_modules/lodash/isEmpty.js"),isEmpty_default=__webpack_require__.n(isEmpty),lodash_isFinite=__webpack_require__("../../node_modules/lodash/isFinite.js"),isFinite_default=__webpack_require__.n(lodash_isFinite),isUndefined=__webpack_require__("../../node_modules/lodash/isUndefined.js"),isUndefined_default=__webpack_require__.n(isUndefined),rule_checker_console=__webpack_require__("../../node_modules/console-browserify/index.js");const rule_checker=function ruleChecker(rule){var ruleErrors=function validateRuleProperties(rule){return reduce_default()(rule,(errors,value,key)=>isFinite_default()(value)||isBoolean_default()(value)?errors:isUndefined_default()(value)||isEmpty_default()(value)?errors.concat([key]):errors,[])}(rule);if(0===ruleErrors.length)return rule;var errors=ruleErrors.join(", ");return rule_checker_console.error("Undefined property %s in rule %s, skipping...",errors,rule.id),{}};const reducer=function graph2dRangeReducer(rule){var result=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(annotation=>function isAnnotationWithinTolerance(rule,annotation){var annotationX=annotation.x,annotationWidth=annotation.width,feedbackX=parseFloat(rule.x),feedbackWidth=parseFloat(rule.width),tolerance=parseFloat(rule.tolerance);return annotationX-annotationWidth/2>feedbackX-feedbackWidth/2-tolerance&&annotationX+annotationWidth/2<feedbackX+feedbackWidth/2+tolerance}(rule,annotation));return Object.assign(rule,{success:result.length>0,successfulClassifications:result})},graph2drange={createRule:function createRule(subjectRule,workflowRule){var rule={failureEnabled:workflowRule.failureEnabled||!1,hideSubjectViewer:workflowRule.hideSubjectViewer||!1,id:subjectRule.id,strategy:workflowRule.strategy,successEnabled:workflowRule.successEnabled||!1,tolerance:subjectRule.tolerance||workflowRule.defaultTolerance,x:subjectRule.x,width:subjectRule.width};return rule.failureEnabled&&(rule.failureMessage=subjectRule.failureMessage||workflowRule.defaultFailureMessage),rule.successEnabled&&(rule.successMessage=subjectRule.successMessage||workflowRule.defaultSuccessMessage),rule_checker(rule)},id:"graph2drange",reducer,title:"Graph2dRange"};const column_create_rule=function create_rule_createRule(subjectRule,workflowRule){var rule={failureEnabled:workflowRule.failureEnabled||!1,hideSubjectViewer:workflowRule.hideSubjectViewer||!1,id:subjectRule.id,strategy:workflowRule.strategy,successEnabled:workflowRule.successEnabled||!1,tolerance:subjectRule.tolerance||workflowRule.defaultTolerance,x:subjectRule.x,width:subjectRule.width};return rule.failureEnabled&&(rule.failureMessage=subjectRule.failureMessage||workflowRule.defaultFailureMessage),rule.successEnabled&&(rule.successMessage=subjectRule.successMessage||workflowRule.defaultSuccessMessage),rule_checker(rule)};function FeedbackMark(_ref){var{rule}=_ref,color=rule.success?"green":"red",tolerance=parseInt(rule.tolerance,10);return(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsx)("rect",{x:parseInt(rule.x,10)-tolerance,y:0,width:parseInt(rule.width,10)+2*tolerance,height:"100%",stroke:"blue",fill:"blue",fillOpacity:"0.2",strokeOpacity:"0.6"}),(0,jsx_runtime.jsx)("rect",{x:rule.x,y:0,width:rule.width,height:"100%",stroke:color,fill:color,fillOpacity:"0.5",strokeOpacity:"0.8"})]})}FeedbackMark.propTypes={rule:prop_types_default().shape({x:prop_types_default().string.isRequired,width:prop_types_default().string.isRequired,tolerance:prop_types_default().string.isRequired}).isRequired};const column_reducer=function columnReducer(rule){var result=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(annotation=>function reducer_isAnnotationWithinTolerance(rule,annotation){var annotationX=annotation.x,annotationWidth=annotation.width,feedbackX=parseInt(rule.x,10),feedbackWidth=parseInt(rule.width,10),tolerance=parseInt(rule.tolerance,10);return annotationX>feedbackX-tolerance&&annotationX+annotationWidth<feedbackX+feedbackWidth+tolerance}(rule,annotation));return Object.assign(rule,{success:result.length>0,successfulClassifications:result})},column={createRule:column_create_rule,FeedbackMark,id:"column",reducer:column_reducer,title:"Column"};const radial_create_rule=function radial_create_rule_createRule(subjectRule,workflowRule){var rule={failureEnabled:workflowRule.failureEnabled||!1,hideSubjectViewer:workflowRule.hideSubjectViewer||!1,id:subjectRule.id,strategy:workflowRule.strategy,successEnabled:workflowRule.successEnabled||!1,tolerance:subjectRule.tolerance||workflowRule.defaultTolerance,x:subjectRule.x,y:subjectRule.y};return rule.failureEnabled&&(rule.failureMessage=subjectRule.failureMessage||workflowRule.defaultFailureMessage),rule.successEnabled&&(rule.successMessage=subjectRule.successMessage||workflowRule.defaultSuccessMessage),rule_checker(rule)};function feedback_mark_FeedbackMark(_ref){var{rule}=_ref,color=rule.success?"green":"red";return(0,jsx_runtime.jsx)("circle",{cx:rule.x,cy:rule.y,r:rule.tolerance,stroke:color,fill:color,fillOpacity:"0.5",strokeOpacity:"0.8"})}feedback_mark_FeedbackMark.propTypes={rule:prop_types_default().shape({x:prop_types_default().string,y:prop_types_default().string,tolerance:prop_types_default().string}).isRequired};const radial_reducer=function radialReducer(rule){var result=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter(annotation=>function radial_reducer_isAnnotationWithinTolerance(rule,annotation){var annotationX=annotation.x,annotationY=annotation.y,feedbackX=rule.x,feedbackY=rule.y,tolerance=rule.tolerance;return Math.sqrt(Math.pow(annotationY-feedbackY,2)+Math.pow(annotationX-feedbackX,2))<tolerance}(rule,annotation));return Object.assign(rule,{success:result.length>0,successfulClassifications:result})},radial={createRule:radial_create_rule,FeedbackMark:feedback_mark_FeedbackMark,id:"radial",reducer:radial_reducer,title:"Radial"};var lodash_assign=__webpack_require__("../../node_modules/lodash/assign.js"),assign_default=__webpack_require__.n(lodash_assign);const simple_reducer=function surveyReducer(rule){var result,choices=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],ruleIds=rule.choiceIds.split(",").map(idString=>idString.replace(/\W/g,"").toUpperCase()),chosenIds=choices.map(choiceObject=>choiceObject.choice);return result=""===rule.choiceIds&&0===choices.length||chosenIds.every(choiceId=>ruleIds.indexOf(choiceId)>-1)&&ruleIds.every(ruleId=>chosenIds.indexOf(ruleId)>-1),Object.assign({},rule,{success:result})};const strategies={column,dud:{createRule:function dud_create_rule_createRule(subjectRule,workflowRule){var rule={failureEnabled:workflowRule.failureEnabled||!1,id:subjectRule.id,strategy:workflowRule.strategy,successEnabled:workflowRule.successEnabled||!1};return rule.failureEnabled&&(rule.failureMessage=subjectRule.failureMessage||workflowRule.defaultFailureMessage),rule.successEnabled&&(rule.successMessage=subjectRule.successMessage||workflowRule.defaultSuccessMessage),rule_checker(rule)},id:"dud",title:"Dud",labComponent:null,validations:null,reducer:function dudReducer(rule,annotations){var result=0===annotations.length;return assign_default()(rule,{success:result})}},graph2drange,radial,singleAnswerQuestion:{createRule:function single_answer_question_create_rule_createRule(subjectRule,workflowRule){var rule={answer:subjectRule.answer,failureEnabled:workflowRule.failureEnabled||!1,id:subjectRule.id,strategy:workflowRule.strategy,successEnabled:workflowRule.successEnabled||!1};return rule.failureEnabled&&(rule.failureMessage=subjectRule.failureMessage||workflowRule.defaultFailureMessage),rule.successEnabled&&(rule.successMessage=subjectRule.successMessage||workflowRule.defaultSuccessMessage),rule_checker(rule)},id:"singleAnswerQuestion",title:"Single Answer Question",labComponent:null,validations:null,reducer:function singleAnswerQuestionReducer(rule,answer){var answerId=answer>-1&&null!==answer?answer:-1,result=rule.answer===answerId.toString();return Object.assign({},rule,{success:result})}},surveySimple:{createRule:function simple_create_rule_createRule(subjectRule,workflowRule){var rule={choiceIds:subjectRule.choiceIds||"",failureEnabled:workflowRule.failureEnabled||!1,id:subjectRule.id,strategy:workflowRule.strategy,successEnabled:workflowRule.successEnabled||!1};return rule.failureEnabled&&(rule.failureMessage=subjectRule.failureMessage||workflowRule.defaultFailureMessage),rule.successEnabled&&(rule.successMessage=subjectRule.successMessage||workflowRule.defaultSuccessMessage),rule_checker(rule)},id:"surveySimple",title:"Survey: Simple",labComponent:null,validations:null,reducer:simple_reducer}};var metadata_to_rules_console=__webpack_require__("../../node_modules/console-browserify/index.js");const metadata_to_rules=function metadataToRules(){var metadata=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(metadata).reduce(function(result,key){var[prefix,ruleIndex,propKey]=key.split("_"),value=metadata[key],stringValue=null!=value?value.toString():"";if("#feedback"===prefix&&stringValue){isNaN(ruleIndex)&&metadata_to_rules_console.error("Subject metadata feedback rule index ".concat(ruleIndex," is improperly formatted. The feedback rule index should be an integer."));var rule=result[ruleIndex]||{};rule[propKey]=value,result[ruleIndex]=rule}return result},[]).filter(Boolean)};const get_feedback_from_tasks=function getFeedbackFromTasks(){var tasks=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},result={};return Object.entries(tasks).forEach(function getTaskRules(_ref){var[taskKey,task]=_ref,{feedback}=task,{enabled,rules}=feedback||{enabled:!1,rules:[]};enabled&&rules&&rules.length>0&&(result[taskKey]=task.feedback.rules)}),result};var generate_rules_process=__webpack_require__("../../node_modules/process/browser.js"),generate_rules_console=__webpack_require__("../../node_modules/console-browserify/index.js");const is_feedback_active=function isFeedbackActive(project,subject,workflow){return Boolean(function getProjectFeedback(project){return project&&project.experimental_tools&&project.experimental_tools.includes("general feedback")}(project)&&function getSubjectFeedback(subject){return subject&&metadata_to_rules(subject.metadata).length>0}(subject)&&function getWorkflowFeedback(workflow){var taskFeedback=workflow?get_feedback_from_tasks(workflow.tasks):{};return Object.keys(taskFeedback).length>0}(workflow))},helpers={generateRules:function generateRules(subject,workflow){var subjectRules=subject?metadata_to_rules(subject.metadata):{},workflowRules=workflow?get_feedback_from_tasks(workflow.tasks):{},canonicalRules={};return forEach_default()(workflowRules,(rules,taskId)=>{var taskRules=reduce_default()(rules,(result,workflowRule)=>{var matchingSubjectRule=find_default()(subjectRules,subjectRule=>null!==subjectRule.id&&void 0!==subjectRule.id&&null!==workflowRule.id&&void 0!==workflowRule.id?subjectRule.id.toString()===workflowRule.id.toString():(generate_rules_process.browser&&generate_rules_console.warn("Feedback: Subject rule id or workflow rule id is null or undefined"),!1));if(matchingSubjectRule){var ruleStrategy=workflowRule.strategy,ruleGenerator=strategies[ruleStrategy].createRule;return result.concat([ruleGenerator(matchingSubjectRule,workflowRule)])}return result},[]);taskRules.length&&(canonicalRules[taskId]=taskRules)}),canonicalRules},getFeedbackFromTasks:get_feedback_from_tasks,isFeedbackActive:is_feedback_active,metadataToRules:metadata_to_rules};var FeedbackStore_process=__webpack_require__("../../node_modules/process/browser.js"),FeedbackStore_console=__webpack_require__("../../node_modules/console-browserify/index.js"),FeedbackStore=mobx_state_tree_module.gK.model("FeedbackStore",{rules:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.frozen({})),showModal:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1)}).volatile(self=>({onHide:()=>!0})).views(self=>({get applicableRules(){return flatten_default()(Array.from(self.rules.values())).filter(rule=>rule.success&&rule.successEnabled||!rule.success&&rule.failureEnabled)},get hideSubjectViewer(){return flatten_default()(Array.from(self.rules.values())).some(rule=>rule.hideSubjectViewer)},get isActive(){var{projects={},subjects={},workflows={}}=(0,mobx_state_tree_module.Zn)(self),validProject=(0,mobx_state_tree_module.aF)(()=>projects.active)&&projects.active,validWorkflow=(0,mobx_state_tree_module.aF)(()=>workflows.active)&&workflows.active,validSubject=(0,mobx_state_tree_module.aF)(()=>subjects.active)&&subjects.active;return helpers.isFeedbackActive(validProject,validSubject,validWorkflow)},get isValid(){return self.isActive&&self.rules&&self.rules.size>0},get messages(){return self.applicableRules.map(rule=>rule.success?rule.successMessage:rule.failureMessage)},get shouldShowFeedback(){return self.isActive&&self.messages.length&&!self.showModal}})).actions(self=>{function _subjectsMiddleware(call,next,abort){"advance"===call.name?_onSubjectAdvance(call,next,abort):next(call)}function _onSubjectAdvance(call,next,abort){self.shouldShowFeedback?(FeedbackStore_process.browser&&FeedbackStore_console.log("Aborting subject advance and showing feedback"),abort(),self.showFeedback()):next(call)}function _createSubjectMiddleware(){var _getRoot,subjects=null===(_getRoot=(0,mobx_state_tree_module.Zn)(self))||void 0===_getRoot?void 0:_getRoot.subjects;(0,mobx_state_tree_module.I7)(subjects,_subjectsMiddleware)}return{_onSubjectAdvance,afterAttach:function afterAttach(){var subjectMiddlewareDisposer=(0,mobx_esm.fm)(_createSubjectMiddleware);(0,mobx_state_tree_module.LF)(self,subjectMiddlewareDisposer)},createRules:function createRules(subject){if((0,mobx_state_tree_module.aF)(()=>(0,mobx_state_tree_module.Zn)(self).workflows.active)&&subject){var workflow=(0,mobx_state_tree_module.Zn)(self).workflows.active;self.isActive&&(self.rules=helpers.generateRules(subject,workflow))}else FeedbackStore_process.browser&&FeedbackStore_console.error("Cannot create feedback rules without project, workflow, and/or subject")},setOnHide:function setOnHide(onHide){self.onHide=onHide},showFeedback:function showFeedback(){self.showModal=!0},hideFeedback:function hideFeedback(){self.onHide(),self.showModal=!1},onNewSubject:function onNewSubject(){var subject=(0,mobx_state_tree_module.$Q)(()=>(0,mobx_state_tree_module.Zn)(self).subjects.active);subject&&(self.reset(),self.createRules(subject))},update:function update(annotation){if(self.isValid){var{task,value}=annotation,updatedTaskRules=(self.rules.get(task)||[]).map(rule=>(0,strategies[rule.strategy].reducer)(rule,value));self.rules.set(task,updatedTaskRules)}},reset:function reset(){self.rules.clear(),self.showModal=!1;var onHide=(0,mobx_state_tree_module.Zn)(self).subjects.advance;self.setOnHide(onHide)}}});const store_FeedbackStore=FeedbackStore;var FieldGuide=mobx_state_tree_module.gK.model("FieldGuide",{items:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen({content:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),icon:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),title:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"")}))),language:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"en")});const FieldGuide_FieldGuide=mobx_state_tree_module.gK.compose("FieldGuideResource",store_Resource,FieldGuide);var Medium=mobx_state_tree_module.gK.model("Medium",{content_type:mobx_state_tree_module.gK.string,external_link:mobx_state_tree_module.gK.boolean,href:mobx_state_tree_module.gK.string,links:mobx_state_tree_module.gK.frozen({linked:mobx_state_tree_module.gK.frozen({href:mobx_state_tree_module.gK.string,id:mobx_state_tree_module.gK.string,type:mobx_state_tree_module.gK.string})}),media_type:mobx_state_tree_module.gK.string,metadata:mobx_state_tree_module.gK.frozen({}),src:mobx_state_tree_module.gK.string});const Medium_Medium=mobx_state_tree_module.gK.compose("MediumResource",store_Resource,Medium);var FieldGuideStore_process=__webpack_require__("../../node_modules/process/browser.js"),FieldGuideStore_console=__webpack_require__("../../node_modules/console-browserify/index.js"),FieldGuideStore=mobx_state_tree_module.gK.model("FieldGuideStore",{active:mobx_state_tree_module.gK.safeReference(FieldGuide_FieldGuide),attachedMedia:mobx_state_tree_module.gK.map(Medium_Medium),resources:mobx_state_tree_module.gK.map(FieldGuide_FieldGuide),type:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"field_guides")}).actions(self=>{function _onProjectChange(){var project=(0,mobx_state_tree_module.$Q)(()=>(0,mobx_state_tree_module.Zn)(self).projects.active);!self.loaded&&project&&(self.reset(),self.fetchFieldGuide(project.id))}var fetchMedia=(0,mobx_state_tree_module.L3)(function*fetchMedia(fieldGuide){var{type}=self,client=(0,mobx_state_tree_module.Zn)(self).client.panoptes;if(fieldGuide){self.loadingState=async_states_default().loading;try{var url="/".concat(type,"/").concat(fieldGuide.id,"/attached_images"),response=yield client.get(url,{page_size:100}),{media}=response.body;media&&media.length>0&&self.setMediaResources(media)}catch(error){FieldGuideStore_process.browser&&FieldGuideStore_console.error(error)}}});return{afterAttach:function afterAttach(){!function createProjectObserver(){var projectDisposer=(0,mobx_esm.fm)(_onProjectChange);(0,mobx_state_tree_module.LF)(self,projectDisposer)}()},fetchFieldGuide:(0,mobx_state_tree_module.L3)(function*fetchFieldGuide(projectID){var{type}=self,client=(0,mobx_state_tree_module.Zn)(self).client.panoptes;self.loadingState=async_states_default().loading;try{var fieldGuide=(yield client.get("/".concat(type),{project_id:projectID})).body[type][0];fieldGuide?(yield fetchMedia(fieldGuide),self.setResources([fieldGuide]),self.setActive(fieldGuide.id),self.loadingState=async_states_default().success):self.loadingState=async_states_default().success}catch(error){FieldGuideStore_process.browser&&FieldGuideStore_console.error(error),self.loadingState=async_states_default().error}}),reset:function reset(){self.resources.clear(),self.attachedMedia.clear()},setMediaResources:function setMediaResources(media){media.forEach(medium=>self.attachedMedia.put(medium))}}});const FieldGuideStore_FieldGuideStore=mobx_state_tree_module.gK.compose("FieldGuideResourceStore",ResourceStore_ResourceStore,FieldGuideStore);var TranslationStrings=mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.maybeNull(mobx_state_tree_module.gK.string)),Project=mobx_state_tree_module.gK.model("Project",{configuration:mobx_state_tree_module.gK.frozen({}),experimental_tools:mobx_state_tree_module.gK.frozen([]),links:mobx_state_tree_module.gK.frozen({}),strings:TranslationStrings,slug:mobx_state_tree_module.gK.string}).views(self=>({get defaultWorkflow(){var singleActiveWorkflow;return 1===self.links.active_workflows.length&&([singleActiveWorkflow]=self.links.active_workflows),singleActiveWorkflow},get display_name(){return self.strings.get("display_name")},get isVolumetricViewer(){return self.experimental_tools.includes("volumetricProject")}}));const Project_Project=mobx_state_tree_module.gK.compose("ProjectResource",store_Resource,Project);var ProjectStore=mobx_state_tree_module.gK.model("ProjectStore",{active:mobx_state_tree_module.gK.safeReference(Project_Project),resources:mobx_state_tree_module.gK.map(Project_Project),type:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"projects")});const store_ProjectStore=mobx_state_tree_module.gK.compose("ProjectResourceStore",ResourceStore_ResourceStore,ProjectStore);function getIndexedSubjects_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getIndexedSubjects(_x){return _getIndexedSubjects.apply(this,arguments)}function _getIndexedSubjects(){return _getIndexedSubjects=function getIndexedSubjects_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getIndexedSubjects_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getIndexedSubjects_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(subjectSetId){var priority=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,operator=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"gt",sort=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc",subjectSetURL="https://subject-set-search-api.zooniverse.org/subjects/".concat(subjectSetId,".json"),_sort="asc"===sort?"_sort":"_sort_desc",query="priority__".concat(operator,"=").concat(priority,"&").concat(_sort,"=priority"),response=yield fetch("".concat(subjectSetURL,"?").concat(query),{mode:"cors"}),{columns,rows}=yield response.json(),subjectIDColumn=columns.indexOf("subject_id");return rows.map(row=>row[subjectIDColumn]).slice(0,10)}),_getIndexedSubjects.apply(this,arguments)}function subjectSelectionStrategy_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _subjectSelectionStrategy(){return _subjectSelectionStrategy=function subjectSelectionStrategy_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){subjectSelectionStrategy_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){subjectSelectionStrategy_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(workflow,subjectIDs){var priority=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,workflow_id=workflow.id;if(subjectIDs){return{apiUrl:"/subjects/selection",params:{ids:subjectIDs.join(","),workflow_id}}}if("subjectGroup"===workflow.configuration.subject_viewer){var _workflow$configurati,_workflow$configurati2,num_rows=(null===(_workflow$configurati=workflow.configuration.subject_viewer_config)||void 0===_workflow$configurati?void 0:_workflow$configurati.grid_rows)||1;return{apiUrl:"/subjects/grouped",params:{num_columns:(null===(_workflow$configurati2=workflow.configuration.subject_viewer_config)||void 0===_workflow$configurati2?void 0:_workflow$configurati2.grid_columns)||1,num_rows,workflow_id}}}if(workflow.hasIndexedSubjects){var subjectIds=yield getIndexedSubjects(workflow.subjectSetId,priority);return subjectIds.length>0?{apiUrl:"/subjects/selection",params:{ids:subjectIds.join(","),workflow_id}}:null}if(workflow.grouped){return{apiUrl:"/subjects/queued",params:{subject_set_id:workflow.subjectSetId,workflow_id}}}return{apiUrl:"/subjects/queued",params:{workflow_id}}}),_subjectSelectionStrategy.apply(this,arguments)}function filterByLabel(label){var filters=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(label){var firstCharacter=label.trim().charAt(0);return filters.includes(firstCharacter)||"//"===label.slice(0,2)?"":label}return""}var filterByLabel_filters=["#","!"],Modal=__webpack_require__("../lib-react-components/dist/esm/Modal/Modal.js"),DataTable=__webpack_require__("../../node_modules/grommet/es6/components/DataTable/DataTable.js"),Anchor=__webpack_require__("../../node_modules/grommet/es6/components/Anchor/Anchor.js"),StyledDataTable=(0,styled_components_browser_esm.default)(DataTable.b).withConfig({displayName:"MetadataModal__StyledDataTable",componentId:"sc-1kv58t8-0"})(["height:auto;th > div{padding:0 20px;}td >  div{padding:0 20px;}"]),DatumWrapper=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"MetadataModal__DatumWrapper",componentId:"sc-1kv58t8-1"})(["overflow-wrap:break-word;word-break:break-word;& > p{margin:0;}"]);function MetadataModal(_ref){var{active=!1,closeFn=()=>!0,filters=filterByLabel_filters,metadata,prefixes=filterByLabel_filters}=_ref,{t}=useTranslation("components"),columns=[{header:(0,jsx_runtime.jsx)(SpacedText.A,{children:t("MetaTools.MetadataModal.table.label")}),primary:!0,property:"label"},{header:(0,jsx_runtime.jsx)(SpacedText.A,{children:t("MetaTools.MetadataModal.table.value")}),property:"value",render:datum=>(0,jsx_runtime.jsx)(DatumWrapper,{children:datum.value})}],data=Object.keys(metadata).filter(label=>filterByLabel(label,filters)).map(label=>{var value=function formatValue(value){var stringValue=null==value?void 0:value.toString();return null==stringValue||stringValue.trim(),null!=stringValue&&stringValue.startsWith("http")?(0,jsx_runtime.jsx)(Anchor.M,{target:"_blank",rel:"nofollow noopener noreferrer",href:value,children:value}):stringValue?(0,jsx_runtime.jsx)(Markdownz.Ay,{inline:!0,children:stringValue}):null===value?"null":""}(metadata[label]);return{label:label.replace(RegExp("^(".concat(prefixes.join("|"),")")),""),value}});return(0,jsx_runtime.jsx)(Modal.A,{active,closeFn,title:t("MetaTools.MetadataModal.title"),children:(0,jsx_runtime.jsx)(Box.a,{height:"medium",overflow:"auto",children:(0,jsx_runtime.jsx)(StyledDataTable,{pad:"15px",columns,data,sortable:!0})})})}MetadataModal.propTypes={active:prop_types_default().bool,closeFn:prop_types_default().func,filters:prop_types_default().arrayOf(prop_types_default().string),metadata:prop_types_default().object.isRequired,prefixes:prop_types_default().arrayOf(prop_types_default().string)};var mst_middlewares_module=__webpack_require__("../../node_modules/mst-middlewares/dist/mst-middlewares.module.js"),taskModels=Object.values(tasks_namespaceObject).map(task=>task.TaskModel);var GenericTask=mobx_state_tree_module.gK.union({dispatcher:function taskDispatcher(snapshot){switch(snapshot.type){case"dropdown":case"dropdown-simple":return dropdown_simple.TaskModel;default:return tasks_namespaceObject[snapshot.type].TaskModel}}},...taskModels),baseStep=mobx_state_tree_module.gK.model("Step",{next:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),stepKey:mobx_state_tree_module.gK.identifier,taskKeys:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string),tasks:mobx_state_tree_module.gK.array(GenericTask)}).views(self=>({isComplete(){var annotations=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],isIncomplete=!1;return self.tasks.forEach(task=>{var[annotation]=annotations.filter(annotation=>annotation.task===task.taskKey);isIncomplete=isIncomplete||!task.isComplete(annotation)}),!isIncomplete},get isValid(){var isValid=self.tasks.every(task=>task.isValid);return isValid},get isThereBranching(){var[singleChoiceTask]=self.tasks.filter(task=>"single"===task.type);return null==singleChoiceTask?void 0:singleChoiceTask.answers.some((answer,index)=>singleChoiceTask.answers.length>index+1&&answer.next!==singleChoiceTask.answers[index+1].next)},nextStepKey(){var annotations=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[singleChoiceAnnotation]=annotations.filter(annotation=>"single"===annotation.taskType);if(singleChoiceAnnotation){var[singleChoiceTask]=self.tasks.filter(task=>task.taskKey===singleChoiceAnnotation.task),selectedAnswer=null==singleChoiceTask?void 0:singleChoiceTask.answers[singleChoiceAnnotation.value];return null==selectedAnswer?void 0:selectedAnswer.next}return self.next}})).actions(self=>({completeAndValidate(annotations){self.tasks.forEach(task=>{var[annotation]=annotations.filter(annotation=>annotation.task===task.taskKey);task.complete(annotation),task.validate(annotation)})},reset(){self.tasks.forEach(task=>task.reset())}}));const Step_Step=mobx_state_tree_module.gK.refinement(baseStep,function validateStep(snapshot){return snapshot.stepKey!==snapshot.next});var AnnotatedStep_annotationModels=Object.values(tasks_namespaceObject).map(task=>task.AnnotationModel),TaskAnnotation=mobx_state_tree_module.gK.union(...AnnotatedStep_annotationModels);const AnnotatedStep_AnnotatedStep=mobx_state_tree_module.gK.model("AnnotatedStep",{id:mobx_state_tree_module.gK.identifier,step:mobx_state_tree_module.gK.safeReference(Step_Step),annotations:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.safeReference(TaskAnnotation))}).views(self=>({get isComplete(){return self.step.isComplete(self.annotations)},get nextStepKey(){return self.step.nextStepKey(self.annotations)}}));function beforeUnloadListener(event){return event.preventDefault(),event.returnValue="You have unsaved work. Are you sure you want to leave?"}var StepHistory=mobx_state_tree_module.gK.model("StepHistory",{steps:mobx_state_tree_module.gK.map(AnnotatedStep_AnnotatedStep)}).views(self=>({get annotations(){var annotations=[];return self.steps.forEach(step=>{annotations=annotations.concat(step.annotations)}),annotations},get classification(){var{classifications}=(0,mobx_state_tree_module.Zn)(self);return(0,mobx_state_tree_module.$Q)(()=>classifications.active)},get canUndo(){return self.undoManager.canUndo},get checkForProgress(){var progressFlag=!1;return self.annotations.forEach(annotation=>{progressFlag||(progressFlag=annotation._inProgress)}),progressFlag},get hasNextStep(){if(self.latest){var{nextStepKey}=self.latest;return!!nextStepKey&&"summary"!==nextStepKey}return!1},get latest(){var stepsArray=Array.from(self.steps.values()),{length}=stepsArray;return stepsArray[length-1]}})).actions(self=>{function _beginStep(stepKey){var{workflowSteps}=(0,mobx_state_tree_module.Zn)(self);workflowSteps.selectStep(stepKey);var step=(0,mobx_state_tree_module.$Q)(()=>workflowSteps.active);if(self.classification&&step){var annotations;self.undoManager.withoutUndo(()=>{annotations=step.tasks.map(task=>self.classification.createAnnotation(task))});var historyStep={id:cuid_default()(),step,annotations};self.steps.put(historyStep)}}function _clearRedo(){self.undoManager.withoutUndo(()=>{!function _clearPendingAnnotations(){self.classification.annotations.forEach(annotation=>{self.annotations.includes(annotation)||self.classification.removeAnnotation(annotation)})}(),self.undoManager.clearRedo()})}function _observeWorkInProgress(){var{addEventListener,removeEventListener}=window;self.checkForProgress?addEventListener&&addEventListener("beforeunload",beforeUnloadListener,{capture:!0}):removeEventListener&&removeEventListener("beforeunload",beforeUnloadListener,{capture:!0})}function _redo(stepKey){self.undoManager.redo(),stepKey!==self.latest.step.stepKey&&function _replace(stepKey){self.undoManager.undo(),_clearRedo(),_beginStep(stepKey)}(stepKey)}return self.undoManager={},function setUndoManager(targetStore){targetStore.undoManager=mst_middlewares_module.ad.create({},{targetStore})}(self),{afterAttach:function afterAttach(){var workInProgressDisposer=(0,mobx_esm.fm)(_observeWorkInProgress);(0,mobx_state_tree_module.LF)(self,workInProgressDisposer)},back:function back(){self.undoManager.canUndo&&self.undoManager.undo()},finish:function finish(){var{removeEventListener}=window;removeEventListener&&removeEventListener("beforeunload",beforeUnloadListener,{capture:!0}),self.undoManager.withoutUndo(()=>{_clearRedo()})},next:function next(){var{nextStepKey}=self.latest;self.undoManager.canRedo?_redo(nextStepKey):_beginStep(nextStepKey)},start:function start(){self.undoManager.withoutUndo(()=>{_beginStep()})}}});const StepHistory_StepHistory=StepHistory;var fileExtensions={"application/json":[".json"],"audio/mp3":[".mp3"],"audio/m4a":[".m4a"],"audio/mpeg":[".mp3"],"image/png":[".png"],"image/jpeg":[".jpg",".jpeg"],"image/gif":[".gif"],"text/plain":[".txt"],"video/mp4":[".mp4"],"video/mpeg":[".mpeg"],"video/x-m4v":[".m4v"]},ALLOWED_SUBJECT_TYPES=Object.keys(fileExtensions);var SubjectLocation=mobx_state_tree_module.gK.model("SubjectLocation",{type:mobx_state_tree_module.gK.enumeration(["application","audio","image","text","video"]),mimeType:mobx_state_tree_module.gK.enumeration(ALLOWED_SUBJECT_TYPES),url:mobx_state_tree_module.gK.string}).preProcessSnapshot(snapshot=>{var entries=Object.entries(snapshot),[mimeType,url]=entries[0],[type]=mimeType.split("/");return{type,mimeType,url}}).postProcessSnapshot(snapshot=>({[snapshot.mimeType]:snapshot.url}));const SubjectLocation_SubjectLocation=mobx_state_tree_module.gK.refinement("SubjectLocation",SubjectLocation,function validateSubjectLocation(location){var[mimeType,url]=Object.entries(location)[0];return fileExtensions[mimeType].some(extension=>url.toLowerCase().endsWith(extension))});const MachineLearntReductions_MachineLearntReductions=mobx_state_tree_module.gK.model("MachineLearntReductions",{reducer:mobx_state_tree_module.gK.literal("machineLearnt"),error:mobx_state_tree_module.gK.maybeNull(mobx_state_tree_module.gK.frozen({})),loadingState:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration("state",async_states_default().values),async_states_default().initialized),reductions:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen({})),subjectId:mobx_state_tree_module.gK.string,workflowId:mobx_state_tree_module.gK.string}).views(self=>({findCurrentTaskMarks(_ref){var{stepKey}=_ref;if(void 0!==stepKey){var caesarMarks=[];return self.reductions.forEach(reduction=>{var{data}=reduction.data;data.forEach(datum=>{datum.stepKey===stepKey&&caesarMarks.push(datum)})}),caesarMarks}}}));const TranscriptionReductions_TranscriptionReductions=mobx_state_tree_module.gK.model("TranscriptionReductions",{reducer:mobx_state_tree_module.gK.literal("alice"),error:mobx_state_tree_module.gK.maybeNull(mobx_state_tree_module.gK.frozen({})),loadingState:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration("state",async_states_default().values),async_states_default().initialized),reductions:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen({})),subjectId:mobx_state_tree_module.gK.string,workflowId:mobx_state_tree_module.gK.string}).views(self=>{function reductionConsensus(reduction,frame){var{parameters}=reduction.data,currentFrameReductions=reduction.data["frame".concat(frame)]||[],options={frame,minimumViews:(null==parameters?void 0:parameters.minimum_views)||5,threshold:(null==parameters?void 0:parameters.low_consensus_threshold)||3};return currentFrameReductions.map(line=>function frameConsensus(line,options){return line.id||(line.id=cuid_default()()),function constructLine(reduction,options){var{frame,minimumViews,threshold}=options,consensusText=reduction.consensus_text,points=function constructCoordinates(line){return line&&line.clusters_x&&line.clusters_y?line.clusters_x.map((point,i)=>({x:line.clusters_x[i],y:line.clusters_y[i]})):[]}(reduction),textOptions=function constructText(line){var sentences=[];return line&&line.clusters_text&&line.clusters_text.forEach(value=>{value.forEach((word,i)=>{sentences[i]||(sentences[i]=[]),word&&word.length&&sentences[i].push(word)})}),sentences.map(value=>value.join(" "))}(reduction);return{consensusReached:reduction.consensus_score>=threshold||reduction.number_views>=minimumViews,consensusText,frame,id:reduction.id,points,textOptions}}(line,options)}(line,options))}function reductionUsers(reduction){var users=function reductionFrames(reduction){return Object.entries(reduction.data).filter(_ref=>{var[key,value]=_ref;return key.startsWith("frame")})}(reduction).map(_ref2=>{var[key,frame]=_ref2;return function frameUsers(frame){var users=frame.map(line=>line.user_ids);return[...new Set(users.flat())]}(frame)});return[...new Set(users.flat())]}return{consensusLines(frame){var{reductions}=self;return reductions.map(reduction=>reductionConsensus(reduction,frame)).flat()},get userIDs(){var users=self.reductions.map(reductionUsers);return[...new Set(users.flat())]}}}).actions(self=>({}));var CaesarReductions=mobx_state_tree_module.gK.union(MachineLearntReductions_MachineLearntReductions,TranscriptionReductions_TranscriptionReductions),Subject=mobx_state_tree_module.gK.model("Subject",{already_seen:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),favorite:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),finished_workflow:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),locations:mobx_state_tree_module.gK.array(SubjectLocation_SubjectLocation),metadata:mobx_state_tree_module.gK.frozen({}),retired:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),selected_at:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),selection_state:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),shouldDiscuss:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen()),stepHistory:mobx_state_tree_module.gK.maybe(StepHistory_StepHistory),user_has_finished_workflow:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),caesarReductions:mobx_state_tree_module.gK.maybeNull(CaesarReductions)}).volatile(self=>({caesarReductionsLoadedForStep:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.boolean)})).postProcessSnapshot(snapshot=>{var newSnapshot=Object.assign({},snapshot);return delete newSnapshot.stepHistory,newSnapshot}).views(self=>({get talkURL(){if(self.project){var projectSlug=self.project.slug,{origin}=window.location;return"".concat(origin,"/projects/").concat(projectSlug,"/talk/subjects/").concat(self.id)}return""},get viewer(){var viewer=null,counts=createLocationCounts_createLocationCounts((0,mobx_state_tree_module.dV)(self));if(self.workflow){var _self$project,{configuration}=self.workflow;!(viewer=configuration.viewerType)&&null!==(_self$project=self.project)&&void 0!==_self$project&&_self$project.isVolumetricViewer&&(viewer=subjectViewers_subjectViewers.volumetric),viewer||1!==counts.total||(counts.images&&(viewer=subjectViewers_subjectViewers.singleImage),counts.videos&&(viewer=subjectViewers_subjectViewers.singleVideo),counts.json&&(viewer=subjectViewers_subjectViewers.jsonData),counts.text&&(viewer=subjectViewers_subjectViewers.singleText)),!viewer&&counts.total>1&&(counts.total===counts.images&&(viewer=subjectViewers_subjectViewers.flipbook),2===counts.total&&1===counts.images&&1===counts.text&&(viewer=subjectViewers_subjectViewers.imageAndText))}return viewer},get viewerConfiguration(){if(self.workflow)return self.workflow.configuration.subject_viewer_configuration},get project(){return(0,mobx_state_tree_module.$Q)(()=>{var _getRoot$projects;return null===(_getRoot$projects=(0,mobx_state_tree_module.Zn)(self).projects)||void 0===_getRoot$projects?void 0:_getRoot$projects.active})},get workflow(){return(0,mobx_state_tree_module.$Q)(()=>{var _getRoot$workflows;return null===(_getRoot$workflows=(0,mobx_state_tree_module.Zn)(self).workflows)||void 0===_getRoot$workflows?void 0:_getRoot$workflows.active})},get priority(){var _self$metadata$Prior,priority=null!==(_self$metadata$Prior=self.metadata["#priority"])&&void 0!==_self$metadata$Prior?_self$metadata$Prior:self.metadata.priority;if(void 0!==priority)return parseFloat(priority)},get alreadySeen(){var _self$workflow;return self.already_seen||subjectsSeenThisSession_subjectsSeenThisSession.check(null===(_self$workflow=self.workflow)||void 0===_self$workflow?void 0:_self$workflow.id,self.id)}})).actions(self=>({addToCollection:function addToCollection(){(0,mobx_state_tree_module.Zn)(self).onAddToCollection(self.id)},markAsSeen:function markAsSeen(){self.already_seen=!0},setCaesarReductions:function setCaesarReductions(_ref){var{reducer,reductions,subjectId,workflowId}=_ref;reducer&&(self.caesarReductions=CaesarReductions.create({loadingState:async_states_default().success,reducer,reductions,subjectId,workflowId}))},startClassification:function startClassification(){self.stepHistory=StepHistory_StepHistory.create({}),self.stepHistory.start()},toggleFavorite:function toggleFavorite(){var rootStore=(0,mobx_state_tree_module.Zn)(self);self.favorite=!self.favorite,rootStore.onToggleFavourite(self.id,self.favorite)},setCaesarReductionsLoadedForStep:function setCaesarReductionsLoadedForStep(stepIndex){self.caesarReductionsLoadedForStep[stepIndex]=!0}}));const Subject_Subject=mobx_state_tree_module.gK.compose("SubjectResource",store_Resource,Subject);const ImageSubject_ImageSubject=mobx_state_tree_module.gK.refinement(Subject_Subject.named("ImageSubject"),subject=>{var counts=createLocationCounts_createLocationCounts(subject);return subject.locations.length>1&&counts.images===subject.locations.length});const ImageAndTextSubject_ImageAndTextSubject=mobx_state_tree_module.gK.refinement(Subject_Subject.named("ImageAndTextSubject"),subject=>{var counts=createLocationCounts_createLocationCounts(subject);return 2===counts.total&&1===counts.images&&1===counts.text});const SingleImageSubject_SingleImageSubject=mobx_state_tree_module.gK.refinement(Subject_Subject.named("SingleImageSubject"),subject=>{var counts=createLocationCounts_createLocationCounts(subject);return 1===subject.locations.length&&1===counts.images});const SingleJSONSubject_SingleJSONSubject=mobx_state_tree_module.gK.refinement(Subject_Subject.named("SingleJSONSubject"),subject=>1===createLocationCounts_createLocationCounts(subject).json);const SingleTextSubject_SingleTextSubject=mobx_state_tree_module.gK.refinement(Subject_Subject.named("SingleTextSubject"),subject=>{var counts=createLocationCounts_createLocationCounts(subject);return 1===counts.total&&1===counts.text});const SingleVideoSubject_SingleVideoSubject=mobx_state_tree_module.gK.refinement(Subject_Subject.named("SingleVideoSubject"),subject=>{var counts=createLocationCounts_createLocationCounts(subject);return 1===subject.locations.length&&1===counts.videos});var SubjectGroup=mobx_state_tree_module.gK.model("SubjectGroup",{subjectIds:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.string)}).preProcessSnapshot(snapshot=>{var _snapshot$metadata,newSnapshot=Object.assign({},snapshot);return newSnapshot.subjectIds=(null==snapshot||null===(_snapshot$metadata=snapshot.metadata)||void 0===_snapshot$metadata||null===(_snapshot$metadata=_snapshot$metadata["#group_subject_ids"])||void 0===_snapshot$metadata?void 0:_snapshot$metadata.split("-"))||[],newSnapshot});const SubjectGroup_SubjectGroup=mobx_state_tree_module.gK.compose("SubjectGroup",Subject_Subject,SubjectGroup);const TextSubject_TextSubject=mobx_state_tree_module.gK.refinement(Subject_Subject.named("TextSubject"),subject=>createLocationCounts_createLocationCounts(subject).text>0);var{SubjectGroup:SubjectType_SubjectGroup}=subjects_namespaceObject,singleSubjects=function SubjectType_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function SubjectType_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(subjects_namespaceObject,["SubjectGroup"]),SingleSubject=mobx_state_tree_module.gK.union(...Object.values(singleSubjects));const SubjectType_SubjectType=mobx_state_tree_module.gK.union({dispatcher:function subjectDispatcher(snapshot){var _snapshot$metadata;return null!=snapshot&&null!==(_snapshot$metadata=snapshot.metadata)&&void 0!==_snapshot$metadata&&_snapshot$metadata["#subject_group_id"]?SubjectType_SubjectGroup:SingleSubject}},SingleSubject,SubjectType_SubjectGroup);var AvailableSubjects_console=__webpack_require__("../../node_modules/console-browserify/index.js");function AvailableSubjects_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function AvailableSubjects_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){AvailableSubjects_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){AvailableSubjects_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}const AvailableSubjects=mobx_state_tree_module.gK.model("AvailableSubjects",{subjects:mobx_state_tree_module.gK.array(SubjectType_SubjectType)}).actions(self=>{function _fetchAvailableSubjects2(){return _fetchAvailableSubjects2=AvailableSubjects_asyncToGenerator(function*(workflow){var params={page_size:10,workflow_id:workflow.id};return workflow.grouped&&(params.subject_set_id=workflow.subjectSetId),yield function _fetchSubjects(_x2){return _fetchSubjects2.apply(this,arguments)}({apiUrl:"/subjects/queued",params})}),_fetchAvailableSubjects2.apply(this,arguments)}function _fetchSubjects2(){return(_fetchSubjects2=AvailableSubjects_asyncToGenerator(function*(_ref){var _response$body$subjec,{apiUrl,params}=_ref,{authClient,client:{panoptes}}=(0,mobx_state_tree_module.Zn)(self),authorization=yield getBearerToken(authClient),response=yield panoptes.get(apiUrl,params,{authorization});return(null===(_response$body$subjec=response.body.subjects)||void 0===_response$body$subjec?void 0:_response$body$subjec.length)>0?response.body.subjects:[]})).apply(this,arguments)}return{clear:function clear(){self.subjects.clear()},next:(0,mobx_state_tree_module.L3)(function*next(workflow){if(workflow)try{if(0===self.subjects.length){var availableSubjects=yield function _fetchAvailableSubjects(_x){return _fetchAvailableSubjects2.apply(this,arguments)}(workflow);self.subjects.replace(availableSubjects)}if(self.subjects.length>0){var newSubject=(0,mobx_state_tree_module.dV)(self.subjects[0]);return self.subjects.shift(),newSubject}}catch(error){AvailableSubjects_console.error(error)}})}});var SubjectStore_console=__webpack_require__("../../node_modules/console-browserify/index.js");function SubjectStore_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function SubjectStore_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){SubjectStore_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){SubjectStore_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}var SubjectStore=mobx_state_tree_module.gK.model("SubjectStore",{active:mobx_state_tree_module.gK.safeReference(SubjectType_SubjectType),available:mobx_state_tree_module.gK.optional(AvailableSubjects,()=>AvailableSubjects.create({})),queue:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.safeReference(SubjectType_SubjectType)),resources:mobx_state_tree_module.gK.map(SubjectType_SubjectType),type:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"subjects")}).views(self=>({get classification(){var{classifications}=(0,mobx_state_tree_module.Zn)(self);return(0,mobx_state_tree_module.$Q)(()=>classifications.active)},get isThereMetadata(){return!!(0,mobx_state_tree_module.aF)(()=>self.active)&&Object.keys(self.active.metadata).filter(label=>filterByLabel(label,filterByLabel_filters)).length>0},get first(){var[first]=self.queue;return first},get last(){var lastSubject;return self.queue.length>0&&(lastSubject=self.queue[self.queue.length-1]),lastSubject},get prioritized(){var{workflows}=(0,mobx_state_tree_module.Zn)(self),workflow=(0,mobx_state_tree_module.$Q)(()=>null==workflows?void 0:workflows.active);return null==workflow?void 0:workflow.prioritized}})).volatile(self=>({onReset:()=>null})).actions(self=>{function _addMiddleware(call,next,abort){"advance"===call.name?function _onSubjectAdvance(call,next,abort){next(call)}(call,next):next(call)}function _onClassificationChange(){var subject1=(0,mobx_state_tree_module.$Q)(()=>self.active);self.classification&&subject1&&subject1.startClassification()}function _fetchPreviousSubjects2(){return(_fetchPreviousSubjects2=SubjectStore_asyncToGenerator(function*(workflow,priority){var ids=yield getIndexedSubjects(workflow.subjectSetId,priority,"lt","desc");if(ids.length>0){var params={ids:ids.join(","),workflow_id:workflow.id};return yield _fetchSubjects({apiUrl:"/subjects/selection",params})}return[]})).apply(this,arguments)}function _fetchSubjects(_x3){return _fetchSubjects2.apply(this,arguments)}function _fetchSubjects2(){return(_fetchSubjects2=SubjectStore_asyncToGenerator(function*(_ref){var{apiUrl,params}=_ref,{authClient,client:{panoptes}}=(0,mobx_state_tree_module.Zn)(self);try{var _response$body$subjec,tokenError,authorization=yield getBearerToken(authClient);if(authorization){var token=authorization.replace("Bearer ",""),{data,error}=yield src.j2.verify(token);tokenError=error}var response=yield panoptes.get(apiUrl,params,{authorization});if(tokenError&&(SubjectStore_console.error(tokenError),currentScopes.v4(scope=>{scope.setTag("subjectQueueError","tokenError"),esm_exports.Cp(tokenError)})),(null===(_response$body$subjec=response.body.subjects)||void 0===_response$body$subjec?void 0:_response$body$subjec.length)>0)return response.body.subjects}catch(error){SubjectStore_console.error(error)}return[]})).apply(this,arguments)}return{advance:function advance(){var workflow=(0,mobx_state_tree_module.$Q)(()=>(0,mobx_state_tree_module.Zn)(self).workflows.active),activeSubject=(0,mobx_state_tree_module.$Q)(()=>self.active);null!=workflow&&workflow.hasIndexedSubjects?(null==activeSubject||activeSubject.markAsSeen(),self.nextIndexed()):self.shift()},afterAttach:function afterAttach(){(0,mobx_state_tree_module.LF)(self,(0,mobx_esm.fm)(_onClassificationChange)),(0,mobx_state_tree_module.I7)(self,_addMiddleware)},append:function append(newSubjects){newSubjects.forEach(subject1=>{try{var alreadyStored=self.resources.get(subject1.id),notSeen=!0,{user_has_finished_workflow}=subject1;if(!user_has_finished_workflow&&self.prioritized){var _subject$metadata$Pr,_self$last,metadataPriority=null!==(_subject$metadata$Pr=subject1.metadata["#priority"])&&void 0!==_subject$metadata$Pr?_subject$metadata$Pr:subject1.metadata.priority,priority=metadataPriority?parseFloat(metadataPriority):-1,lastPriority=(null===(_self$last=self.last)||void 0===_self$last?void 0:_self$last.priority)||-1;if(-1===priority)throw new Error("Subject ".concat(subject1.id,": missing priority field for prioritised workflow."));notSeen=priority>lastPriority}notSeen&&!alreadyStored&&(self.resources.put(subject1),self.queue.push(subject1.id))}catch(error){esm_exports.Cp(error),SubjectStore_console.error("Subject ".concat(subject1.id," is not a valid subject.")),SubjectStore_console.error(error)}}),!(0,mobx_state_tree_module.$Q)(()=>self.active)&&self.resources.size>0&&self.advance()},buildPreviousQueue:(0,mobx_state_tree_module.L3)(function*buildPreviousQueue(currentPriority){var workflow=(0,mobx_state_tree_module.$Q)(()=>(0,mobx_state_tree_module.Zn)(self).workflows.active);try{if(null!=workflow&&workflow.hasIndexedSubjects){self.loadingState=async_states_default().loading;var newSubjects=yield function _fetchPreviousSubjects(_x,_x2){return _fetchPreviousSubjects2.apply(this,arguments)}(workflow,self.first.priority);self.loadingState=async_states_default().success,self.prepend(newSubjects);var activeIndex=self.queue.findIndex(subject1=>subject1.priority===currentPriority);if(activeIndex>0){var previousSubject=self.queue[activeIndex-1];self.setActiveSubject(previousSubject.id)}}}catch(error){SubjectStore_console.error(error),self.loadingState=async_states_default().error}}),clearQueue:function clearQueue(){self.onReset(),self.reset()},nextIndexed:function nextIndexed(){var activeSubject=(0,mobx_state_tree_module.$Q)(()=>self.active),workflow=(0,mobx_state_tree_module.$Q)(()=>(0,mobx_state_tree_module.Zn)(self).workflows.active);if(null!=workflow&&workflow.hasIndexedSubjects){self.available.clear();var nextSubjects=self.queue;if(activeSubject){var activeIndex=self.queue.indexOf(activeSubject);nextSubjects=self.queue.slice(activeIndex+1)}var nextSubject=nextSubjects[0];nextSubject&&self.setActiveSubject(nextSubject.id),nextSubjects.length<=3&&(SubjectStore_console.log("Fetching more subjects"),self.populateQueue())}},nextAvailable:(0,mobx_state_tree_module.L3)(function*nextAvailable(){var root=(0,mobx_state_tree_module.Zn)(self),workflow=(0,mobx_state_tree_module.$Q)(()=>root.workflows.active);if(workflow)try{self.resources.clear(),self.loadingState=async_states_default().loading;var newSubject=yield self.available.next(workflow);self.loadingState=async_states_default().success,newSubject&&self.append([newSubject])}catch(error){SubjectStore_console.error(error),self.loadingState=async_states_default().error}}),prepend:function prepend(){var newSubjects=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];newSubjects.length>0&&newSubjects.forEach(subjectSnapshot=>{try{self.resources.put(subjectSnapshot),self.queue.unshift(subjectSnapshot.id)}catch(error){SubjectStore_console.error("Subject ".concat(subject.id," is not a valid subject.")),SubjectStore_console.error(error)}})},populateQueue:(0,mobx_state_tree_module.L3)(function*populateQueue(subjectIDs){var root=(0,mobx_state_tree_module.Zn)(self),workflow=(0,mobx_state_tree_module.$Q)(()=>root.workflows.active);if(workflow)try{var _self$last2,strategy=yield function subjectSelectionStrategy(_x,_x2){return _subjectSelectionStrategy.apply(this,arguments)}(workflow,subjectIDs,null===(_self$last2=self.last)||void 0===_self$last2?void 0:_self$last2.priority);if(strategy){var{apiUrl,params}=strategy;self.loadingState=async_states_default().loading;var subjects=yield _fetchSubjects({apiUrl,params});self.loadingState=async_states_default().success,(null==subjects?void 0:subjects.length)>0&&self.append(subjects)}}catch(error){SubjectStore_console.error(error),self.loadingState=async_states_default().error}}),previousIndexed:function previousIndexed(){var root=(0,mobx_state_tree_module.Zn)(self),workflow=(0,mobx_state_tree_module.$Q)(()=>root.workflows.active),activeSubject=(0,mobx_state_tree_module.$Q)(()=>self.active),currentPriority=null==activeSubject?void 0:activeSubject.priority;if(null!=workflow&&workflow.hasIndexedSubjects){self.available.clear();var previousSubjects=[];if(activeSubject){var activeIndex=self.queue.indexOf(activeSubject);previousSubjects=self.queue.slice(0,activeIndex)}if(previousSubjects.length>0){var previousSubject=previousSubjects[previousSubjects.length-1];self.setActiveSubject(previousSubject.id)}previousSubjects.length<=3&&self.buildPreviousQueue(currentPriority)}},reset:function reset(){self.active=void 0,self.resources.clear(),self.available.clear()},setActiveSubject:function setActiveSubject(subjectID){self.active=subjectID,SubjectStore_console.log("Loading subject",subjectID)},setOnReset:function setOnReset(callback){self.onReset=callback},setResources:function setResources(){var subjects=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(subjects.length>0)try{subjects.forEach(subject1=>{subject1&&(self.resources.put(subject1),self.queue.push(subject1.id))}),self.loadingState=async_states_default().success}catch(error){SubjectStore_console.error(error)}},shift:function shift(){var subject1=(0,mobx_state_tree_module.$Q)(()=>self.active);subject1&&self.resources.delete(subject1.id),self.resources.size<3&&(SubjectStore_console.log("Fetching more subjects"),self.populateQueue()),self.first&&self.setActiveSubject(self.first.id)}}});const SubjectStore_SubjectStore=mobx_state_tree_module.gK.compose("SubjectResourceStore",ResourceStore_ResourceStore,SubjectStore);var SubjectSet=mobx_state_tree_module.gK.model("SubjectSet",{display_name:mobx_state_tree_module.gK.string,links:mobx_state_tree_module.gK.frozen({}),metadata:mobx_state_tree_module.gK.frozen({}),set_member_subjects_count:mobx_state_tree_module.gK.number}).views(self=>({get isIndexed(){var _self$metadata$indexF;return(null===(_self$metadata$indexF=self.metadata.indexFields)||void 0===_self$metadata$indexF?void 0:_self$metadata$indexF.length)>0}}));const SubjectSet_SubjectSet=mobx_state_tree_module.gK.compose("SubjectSetResource",store_Resource,SubjectSet);var SubjectSetStore=mobx_state_tree_module.gK.model("SubjectSetStore",{active:mobx_state_tree_module.gK.safeReference(SubjectSet_SubjectSet),resources:mobx_state_tree_module.gK.map(SubjectSet_SubjectSet),type:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"subject_sets")});const SubjectSetStore_SubjectSetStore=mobx_state_tree_module.gK.compose("SubjectSetResourceStore",ResourceStore_ResourceStore,SubjectSetStore);var SubjectViewerStore_process=__webpack_require__("../../node_modules/process/browser.js"),SubjectViewerStore_console=__webpack_require__("../../node_modules/console-browserify/index.js"),SubjectViewer=mobx_state_tree_module.gK.model("SubjectViewer",{annotate:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!0),dimensions:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen({clientHeight:mobx_state_tree_module.gK.integer,clientWidth:mobx_state_tree_module.gK.integer,naturalHeight:mobx_state_tree_module.gK.integer,naturalWidth:mobx_state_tree_module.gK.integer})),flipbookSpeed:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,1),frame:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.integer,0),fullscreen:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),invert:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),loadingState:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration("loadingState",async_states_default().values),async_states_default().initialized),move:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),rotationEnabled:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),rotation:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),separateFramesView:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),videoSpeed:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"1x"),volume:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,1)}).volatile(self=>({onZoom:function onZoom(type,zoomValue){},onPan:function onPan(xDirection,yDirection){}})).views(self=>({get disableImageToolbar(){var subject=(0,mobx_state_tree_module.$Q)(()=>{var _getRoot$subjects;return null===(_getRoot$subjects=(0,mobx_state_tree_module.Zn)(self).subjects)||void 0===_getRoot$subjects?void 0:_getRoot$subjects.active}),frameType=null==subject?void 0:subject.locations[self.frame].type;return"text"===frameType||"video"===frameType},get disableInvertButton(){var subject1=(0,mobx_state_tree_module.$Q)(()=>{var _getRoot$subjects2;return null===(_getRoot$subjects2=(0,mobx_state_tree_module.Zn)(self).subjects)||void 0===_getRoot$subjects2?void 0:_getRoot$subjects2.active});return"text"===(null==subject1?void 0:subject1.locations[self.frame].type)},get hasActiveAnnotateTask(){var _getRoot;return null===(_getRoot=(0,mobx_state_tree_module.Zn)(self))||void 0===_getRoot?void 0:_getRoot.workflowSteps.hasActiveAnnotateTask},get hasAnnotateTask(){var _getRoot2;return null===(_getRoot2=(0,mobx_state_tree_module.Zn)(self))||void 0===_getRoot2?void 0:_getRoot2.workflowSteps.hasAnnotateTask},get interactionMode(){return!self.annotate&&self.move?"move":"annotate"}})).actions(self=>({afterAttach(){(0,mobx_state_tree_module.LF)(self,(0,mobx_esm.fm)(function _syncAnnotateVisibility(){self.setAnnotateVisibility(self.hasActiveAnnotateTask),self.hasActiveAnnotateTask?self.enableAnnotate():self.enableMove()})),function createSubjectObserver(){var subjectDisposer=(0,mobx_esm.fm)(()=>{if((0,mobx_state_tree_module.aF)(()=>(0,mobx_state_tree_module.Zn)(self).subjects.active)){var subject=(0,mobx_state_tree_module.Zn)(self).subjects.active;self.resetSubject(subject)}},{name:"SubjectViewerStore Subject Observer autorun"});(0,mobx_state_tree_module.LF)(self,subjectDisposer)}(),function createWorkflowConfigObserver(){var workflowConfigDisposer=(0,mobx_esm.fm)(()=>{if((0,mobx_state_tree_module.aF)(()=>(0,mobx_state_tree_module.Zn)(self).workflows.active)){var _getRoot$workflows$ac,defaultMode=null===(_getRoot$workflows$ac=(0,mobx_state_tree_module.Zn)(self).workflows.active)||void 0===_getRoot$workflows$ac||null===(_getRoot$workflows$ac=_getRoot$workflows$ac.configuration)||void 0===_getRoot$workflows$ac?void 0:_getRoot$workflows$ac.multi_image_mode;self.setSeparateFramesView("separate"===defaultMode)}},{name:"SubjectViewerStore Workflow Config Observer autorun"});(0,mobx_state_tree_module.LF)(self,workflowConfigDisposer)}()},enableAnnotate(){self.annotate=!0,self.move=!1},enableFullscreen(){self.fullscreen=!0},enableMove(){self.annotate=!1,self.move=!0},enableRotation(){self.rotationEnabled=!0},disableFullscreen(){self.fullscreen=!1},invertView(){self.invert=!self.invert},onError(error){SubjectViewerStore_process.browser&&SubjectViewerStore_console.error(error),self.loadingState=async_states_default().error},onSubjectReady(event){var frameIndex=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{target={}}=event||{},{clientHeight=0,clientWidth=0,naturalHeight=0,naturalWidth=0}=target||{};self.dimensions[frameIndex]={clientHeight,clientWidth,naturalHeight,naturalWidth},self.rotation=0,self.loadingState=async_states_default().success},panLeft(){self.onPan&&self.onPan(-1,0)},panRight(){self.onPan&&self.onPan(1,0)},panUp(){self.onPan&&self.onPan(0,-1)},panDown(){self.onPan&&self.onPan(0,1)},resetSubject(subject){var _subject$metadata,frame=0;(null==subject||null===(_subject$metadata=subject.metadata)||void 0===_subject$metadata?void 0:_subject$metadata.default_frame)>0&&(frame=parseInt(subject.metadata.default_frame-1)),self.dimensions=[],self.frame=frame,self.invert=!1,self.loadingState=async_states_default().loading,self.rotation=0},resetView(){SubjectViewerStore_console.log("resetting view"),self.invert=!1,self.onZoom&&self.onZoom("zoomto",1),self.rotation=0},rotate(){SubjectViewerStore_console.log("rotating subject"),self.rotation-=90},setAnnotateVisibility(canAnnotate){canAnnotate?self.enableAnnotate():self.enableMove()},setFlipbookSpeed(speed){self.flipbookSpeed=speed},setFrame(index){self.frame=index},setOnZoom(callback){self.onZoom=callback},setOnPan(callback){self.onPan=callback},setSeparateFramesView(mode){self.separateFramesView=mode},setVideoSpeed(value){self.videoSpeed=value},setVolume(value){self.volume=value},zoomIn(){SubjectViewerStore_console.log("zooming in"),self.onZoom&&self.onZoom("zoomin",1)},zoomOut(){SubjectViewerStore_console.log("zooming out"),self.onZoom&&self.onZoom("zoomout",-1)}}));const SubjectViewerStore=SubjectViewer;var Tutorial=mobx_state_tree_module.gK.model("Tutorial",{display_name:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),kind:mobx_state_tree_module.gK.maybeNull(mobx_state_tree_module.gK.enumeration(["mini-course","tutorial"])),language:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),steps:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.frozen({content:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),media:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string)}))}).views(self=>({get hasNotBeenSeen(){var _upp$preferences$tuto,uppStore=(0,mobx_state_tree_module.Zn)(self).userProjectPreferences,upp=(0,mobx_state_tree_module.$Q)(()=>(0,mobx_state_tree_module.Zn)(self).userProjectPreferences.active);return upp?!(null===(_upp$preferences$tuto=upp.preferences.tutorials_completed_at)||void 0===_upp$preferences$tuto?void 0:_upp$preferences$tuto[self.id]):(null==uppStore?void 0:uppStore.loadingState)===async_states_default().success}})).actions(self=>({setSeenTime(){var uppStore=(0,mobx_state_tree_module.Zn)(self).userProjectPreferences,upp=(0,mobx_state_tree_module.$Q)(()=>uppStore.active),seen=(new Date).toISOString();if(("tutorial"===self.kind||null===self.kind)&&upp){var changes={preferences:{tutorials_completed_at:{[self.id]:seen}}};uppStore.updateUPP(changes)}}}));const Tutorial_Tutorial=mobx_state_tree_module.gK.compose("TutorialResource",store_Resource,Tutorial);var TutorialStore_console=__webpack_require__("../../node_modules/console-browserify/index.js"),TutorialStore=mobx_state_tree_module.gK.model("TutorialStore",{active:mobx_state_tree_module.gK.safeReference(Tutorial_Tutorial),activeMedium:mobx_state_tree_module.gK.safeReference(Medium_Medium),activeStep:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.integer,0),attachedMedia:mobx_state_tree_module.gK.map(Medium_Medium),resources:mobx_state_tree_module.gK.map(Tutorial_Tutorial),type:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"tutorials")}).views(self=>({get isActiveReferenceValid(){return(0,mobx_state_tree_module.aF)(()=>self.active)},get isActiveStepValid(){return self.isActiveReferenceValid&&self.activeStep>-1},get disableTutorialTab(){return self.loadingState!==async_states_default().success||self.loadingState===async_states_default().success&&!self.tutorial},stepWithMedium(index){var tutorial=(0,mobx_state_tree_module.$Q)(()=>self.active),step=null==tutorial?void 0:tutorial.steps[index];return step?{step,medium:self.attachedMedia.get(step.media)}:{}},get tutorial(){var tutorials=Array.from(self.resources.values());return tutorials?tutorials.find(tutorial=>"tutorial"===tutorial.kind||null===tutorial.kind):null},get miniCourse(){var tutorials1=Array.from(self.resources.values());return tutorials1?tutorials1.find(tutorial=>"mini-course"===tutorial.kind):null},isMiniCourseCompleted(lastStepSeen){var{miniCourse}=self;return!!miniCourse&&lastStepSeen===miniCourse.steps.length-1}})).actions(self=>{function _onWorkflowChange(){(0,mobx_state_tree_module.$Q)(()=>(0,mobx_state_tree_module.Zn)(self).workflows.active)&&(self.reset(),self.fetchTutorials())}var fetchMedia=(0,mobx_state_tree_module.L3)(function*fetchMedia(tutorial){var{tutorials}=(0,mobx_state_tree_module.Zn)(self).client;if(tutorial){self.loadingState=async_states_default().loading;try{var response=yield tutorials.getAttachedImages({id:tutorial.id}),{media}=response.body;media&&media.length>0&&self.setMediaResources(media)}catch(error){TutorialStore_console.error(error)}}});return{afterAttach:function afterAttach(){(0,mobx_state_tree_module.LF)(self,(0,mobx_esm.fm)(_onWorkflowChange))},fetchTutorials:(0,mobx_state_tree_module.L3)(function*fetchTutorials(){var workflow=(0,mobx_state_tree_module.Zn)(self).workflows.active,tutorialsClient=(0,mobx_state_tree_module.Zn)(self).client.tutorials;(0,mobx_state_tree_module.Zn)(self).userProjectPreferences,self.loadingState=async_states_default().loading;try{var response=yield tutorialsClient.get({workflowId:workflow.id}),{tutorials}=response.body;if(tutorials&&tutorials.length>0){var mediaRequests=tutorials.map(fetchMedia);yield Promise.all(mediaRequests),self.setTutorials(tutorials),self.loadingState=async_states_default().success}else self.loadingState=async_states_default().success}catch(error){TutorialStore_console.error(error),self.loadingState=async_states_default().error}}),resetActiveTutorial:function resetActiveTutorial(){self.active=void 0,self.activeStep=0,self.activeMedium=void 0},setActiveTutorial:function setActiveTutorial(tutorialID){var tutorial=(0,mobx_state_tree_module.$Q)(()=>self.active);tutorialID?tutorialID===(null==tutorial?void 0:tutorial.id)||(self.active=tutorialID):self.resetActiveTutorial()},setMediaResources:function setMediaResources(media){media.forEach(medium=>self.attachedMedia.put(medium))},setTutorials:function setTutorials(tutorials){tutorials.forEach(tutorial=>self.resources.put(tutorial));var{tutorial}=self;self.active=null==tutorial?void 0:tutorial.id}}});const TutorialStore_TutorialStore=mobx_state_tree_module.gK.compose("TutorialResourceStore",ResourceStore_ResourceStore,TutorialStore);const WorkflowConfiguration_WorkflowConfiguration=mobx_state_tree_module.gK.snapshotProcessor(mobx_state_tree_module.gK.model({enable_caesar_data_fetching:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),enable_switching_flipbook_and_separate:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),flipbook_autoplay:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),invert_subject:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),limit_subject_height:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),multi_image_clone_markers:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),multi_image_mode:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration("multiImageMode",["flipbook","separate"]),"flipbook"),multi_image_layout:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration("multiImageLayout",["col","grid2","grid3","row"]),"col"),playIterations:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,3),subject_viewer:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.enumeration("subjectViewer",["dataImage","flipbook","geoMap","jsonData","lightcurve","multiFrame","scatterPlot","singleImage","subjectGroup","variableStar"])),subject_viewer_config:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen({zoomConfiguration:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen({direction:mobx_state_tree_module.gK.enumeration(["both","x","y"]),minZoom:mobx_state_tree_module.gK.number,maxZoom:mobx_state_tree_module.gK.number,zoomInValue:mobx_state_tree_module.gK.number,zoomOutValue:mobx_state_tree_module.gK.number}))}))}).views(self=>({get viewerType(){switch(self.subject_viewer){case"dataImage":return subjectViewers_subjectViewers.dataImage;case"flipbook":return subjectViewers_subjectViewers.flipbook;case"geoMap":return subjectViewers_subjectViewers.geoMap;case"jsonData":return subjectViewers_subjectViewers.jsonData;case"lightcurve":return subjectViewers_subjectViewers.lightCurve;case"multiFrame":return subjectViewers_subjectViewers.multiFrame;case"scatterPlot":return subjectViewers_subjectViewers.scatterPlot;case"singleImage":return subjectViewers_subjectViewers.singleImage;case"subjectGroup":return subjectViewers_subjectViewers.subjectGroup;case"variableStar":return subjectViewers_subjectViewers.variableStar;default:return null}}})),{preProcessor(snapshot){var newSnapshot=Object.assign({},snapshot);if("string"==typeof(null==snapshot?void 0:snapshot.playIterations))if(null!=snapshot&&snapshot.playIterations.length){var newIterations=Number(snapshot.playIterations);newSnapshot.playIterations=newIterations}else newSnapshot.playIterations=1/0;return newSnapshot}});var difference=__webpack_require__("../../node_modules/lodash/difference.js"),difference_default=__webpack_require__.n(difference),isEqual=__webpack_require__("../../node_modules/lodash/isEqual.js"),isEqual_default=__webpack_require__.n(isEqual);function getNextStepFromTaskKey(taskKey,steps,tasks){var nextStepKey=function getStepKeyFromTaskKey(steps,taskKey){var taskStepKey;return steps.forEach(_ref2=>{var[stepKey,step]=_ref2;step.taskKeys.includes(taskKey)&&(taskStepKey=stepKey)}),taskStepKey}(steps,taskKey);if(!nextStepKey){var comboTask=tasks[taskKey];steps.forEach(_ref=>{var[stepkey,step]=_ref;isEqual_default()(step.taskKeys,comboTask.tasks)&&(nextStepKey=step.stepKey)})}return nextStepKey}function isThereBranching(task){var _task$answers;return null==task||null===(_task$answers=task.answers)||void 0===_task$answers?void 0:_task$answers.some((answer,index)=>task.answers.length>index+1&&answer.next!==task.answers[index+1].next)}function taskExists(taskKey,tasks){return Object.keys(tasks).includes(taskKey)}function createStepsFromTasks(first_task,tasks){var steps=[],taskKeys=Object.keys(tasks),taskKeysIncludedInComboTasks=function getTaskKeysIncludedInComboTasks(tasks){var comboTasks=Object.values(tasks).filter(task=>"combo"===(null==task?void 0:task.type));return comboTasks.map(combo=>combo.tasks).flat()}(tasks),taskKeysToConvertToSteps=difference_default()(taskKeys,taskKeysIncludedInComboTasks),firstTask=tasks[first_task];if(first_task){var _firstTask$answers$,firstStep={next:firstTask.next,stepKey:"S0",taskKeys:[first_task]};if("combo"===firstTask.type&&(firstStep.taskKeys=firstTask.tasks),"single"===firstTask.type&&!isThereBranching(firstTask))firstStep.next=null===(_firstTask$answers$=firstTask.answers[0])||void 0===_firstTask$answers$?void 0:_firstTask$answers$.next;taskKeysToConvertToSteps.splice(taskKeysToConvertToSteps.indexOf(first_task),1),steps.push([firstStep.stepKey,firstStep])}return taskKeysToConvertToSteps.forEach((taskKey,index)=>{var task=tasks[taskKey];if("shortcut"!==task.type){var stepKey="S".concat(index+1),stepTasks=[taskKey];"combo"===task.type&&(stepTasks=task.tasks);var _task$answers$,stepSnapshot={next:task.next,stepKey,taskKeys:stepTasks};if("single"===task.type&&!isThereBranching(task))stepSnapshot.next=task.answers&&(null===(_task$answers$=task.answers[0])||void 0===_task$answers$?void 0:_task$answers$.next);steps.push([stepKey,stepSnapshot])}}),steps}function Workflow_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Workflow_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Workflow_ownKeys(Object(t),!0).forEach(function(r){Workflow_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Workflow_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Workflow_defineProperty(e,r,t){return(r=function Workflow_toPropertyKey(t){var i=function Workflow_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var WorkflowStep=mobx_state_tree_module.gK.refinement("WorkflowStep",mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.union(mobx_state_tree_module.gK.string,mobx_state_tree_module.gK.frozen())),function validateStep(_ref){var[stepKey,step]=_ref;return"string"==typeof stepKey&&"object"==typeof step}),Workflow=mobx_state_tree_module.gK.model("Workflow",{active:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),configuration:WorkflowConfiguration_WorkflowConfiguration,display_name:mobx_state_tree_module.gK.string,first_task:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,""),grouped:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),links:mobx_state_tree_module.gK.frozen({}),prioritized:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),steps:mobx_state_tree_module.gK.array(WorkflowStep),strings:mobx_state_tree_module.gK.map(mobx_state_tree_module.gK.string),subjectSet:mobx_state_tree_module.gK.safeReference(SubjectSet_SubjectSet),tasks:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen()),version:mobx_state_tree_module.gK.string}).preProcessSnapshot(function convertPanoptesWorkflows(snapshot){(null===(_snapshot$steps=snapshot.steps)||void 0===_snapshot$steps?void 0:_snapshot$steps.length)>0&&Object.keys(snapshot.tasks).length;var _snapshot$steps,newSnapshot=Object.assign({},snapshot),{steps,tasks}=function convertWorkflowToUseSteps(_ref3){var{first_task,steps=[],tasks}=_ref3;return(steps=steps.length>0?steps:createStepsFromTasks(first_task,tasks)).forEach(_ref4=>{var[stepKey,step]=_ref4;if(!step.next){var[taskKey]=step.taskKeys,task=tasks[taskKey];null!=task&&task.next&&(step.next=task.next)}if(taskExists(step.next,tasks)){var nextStep=getNextStepFromTaskKey(step.next,steps,tasks);step.next=nextStep!==stepKey?nextStep:void 0}}),Object.values(tasks).forEach(task=>{var _task$answers2;"single"===task.type&&(null===(_task$answers2=task.answers)||void 0===_task$answers2||_task$answers2.forEach(answer=>{taskExists(answer.next,tasks)&&(answer.next=getNextStepFromTaskKey(answer.next,steps,tasks))}))}),{steps,tasks}}(newSnapshot);return Workflow_objectSpread(Workflow_objectSpread({},newSnapshot),{},{steps,tasks})}).volatile(self=>({SGVModalState:(0,mobx_esm.sH)({showModal:!1,lastSubject:null})})).views(self=>({get caesarReducer(){return self.usesTranscriptionTask?"alice":self.configuration.enable_caesar_data_fetching&&self.usesMachineLearnt?"machineLearnt":""},get hasIndexedSubjects(){var activeSet=(0,mobx_state_tree_module.$Q)(()=>self.subjectSet);return self.grouped&&!(null==activeSet||!activeSet.isIndexed)},get layout(){return self.usesTranscriptionTask?"noMaxWidth":self.configuration.limit_subject_height?"centered":"geoMap"===self.configuration.subject_viewer?"geoMap":"default"},get subjectSetId(){var activeSet1=(0,mobx_state_tree_module.$Q)(()=>self.subjectSet);return null==activeSet1?void 0:activeSet1.id},get hasSurveyTask(){var anySurveyTasks=self.tasks&&Object.values(self.tasks).some(task=>"survey"===task.type);return anySurveyTasks},get usesTranscriptionTask(){var anyTranscriptionTasks=self.tasks&&Object.values(self.tasks).some(task=>"transcription"===task.type);return anyTranscriptionTasks},get usesMachineLearnt(){var toolTypes=["circle","ellipse","freehandLine","line","point","polygon","rectangle","rotateRectangle"],hasAnyMatchingToolType=self.tasks&&Object.values(self.tasks).filter(task=>!!task.tools).some(task=>task.tools.some(tool=>toolTypes.includes(tool.type)));return hasAnyMatchingToolType}})).actions(self=>({selectSubjectSet:(0,mobx_state_tree_module.L3)(function*selectSubjectSet(id){if((self.links.subject_sets||[]).indexOf(id)>-1){var{subjectSets}=(0,mobx_state_tree_module.Zn)(self),subjectSet=yield subjectSets.getResource(id);return self.subjectSet=subjectSet.id,subjectSet}throw new Error("No subject set ".concat(id," for workflow ").concat(self.id))}),setSGVModalState:function setSGVModalState(showModal){var subjectData=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;self.SGVModalState={showModal,lastSubject:subjectData}}}));const Workflow_Workflow=mobx_state_tree_module.gK.compose("WorkflowResource",store_Resource,Workflow);var WorkflowStore_console=__webpack_require__("../../node_modules/console-browserify/index.js"),WorkflowStore=mobx_state_tree_module.gK.model("WorkflowStore",{active:mobx_state_tree_module.gK.safeReference(Workflow_Workflow),resources:mobx_state_tree_module.gK.map(Workflow_Workflow),type:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"workflows")}).views(self=>({get defaultWorkflowID(){var{project}=self;return(null==project?void 0:project.defaultWorkflow)||""},get project(){var activeProject=(0,mobx_state_tree_module.Zn)(self).projects.active;return(0,mobx_state_tree_module.$Q)(()=>activeProject)}})).actions(self=>({selectWorkflow:(0,mobx_state_tree_module.L3)(function selectWorkflow(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:self.defaultWorkflowID,subjectSetID=arguments.length>1?arguments[1]:void 0,subjectID=arguments.length>2?arguments[2]:void 0;return function*(_self$project){if(!id)throw new ReferenceError("No workflow ID available");var availableWorkflows=null===(_self$project=self.project)||void 0===_self$project||null===(_self$project=_self$project.links)||void 0===_self$project?void 0:_self$project.workflows,{subjects}=(0,mobx_state_tree_module.Zn)(self),activeWorkflow=(0,mobx_state_tree_module.$Q)(()=>self.active),activeSubjectSet=null==activeWorkflow?void 0:activeWorkflow.subjectSet,activeSubject=(0,mobx_state_tree_module.$Q)(()=>subjects.active),workflowChanged=id!==(null==activeWorkflow?void 0:activeWorkflow.id),subjectSetChanged=!!subjectSetID&&subjectSetID!==(null==activeSubjectSet?void 0:activeSubjectSet.id),subjectChanged=!!subjectID&&subjectID!==(null==activeSubject?void 0:activeSubject.id);if(0===subjects.resources.size||workflowChanged||subjectSetChanged||subjectChanged){var _self$project2,selectedSubjects,projectID=null===(_self$project2=self.project)||void 0===_self$project2?void 0:_self$project2.id;if(!((null==availableWorkflows?void 0:availableWorkflows.indexOf(id))>-1))throw new ReferenceError("unable to load workflow ".concat(id," for project ").concat(projectID));var workflow=yield self.getResource(id);self.resources.put(workflow);var selectedWorkflow=self.resources.get(id);if(subjectSetID)yield selectedWorkflow.selectSubjectSet(subjectSetID);subjectID&&subjectChanged&&(selectedSubjects=[subjectID]),self.setActive(id);try{subjects.reset(),subjects.populateQueue(selectedSubjects)}catch(error){WorkflowStore_console.log("Unable to reset subject store on URL change."),WorkflowStore_console.error(error)}}}()})}));const WorkflowStore_WorkflowStore=mobx_state_tree_module.gK.compose("WorkflowResourceStore",ResourceStore_ResourceStore,WorkflowStore);var WorkflowStepStore_console=__webpack_require__("../../node_modules/console-browserify/index.js");function WorkflowStepStore_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function WorkflowStepStore_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?WorkflowStepStore_ownKeys(Object(t),!0).forEach(function(r){WorkflowStepStore_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):WorkflowStepStore_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function WorkflowStepStore_defineProperty(e,r,t){return(r=function WorkflowStepStore_toPropertyKey(t){var i=function WorkflowStepStore_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var WorkflowStepStore=mobx_state_tree_module.gK.model("WorkflowStepStore",{active:mobx_state_tree_module.gK.safeReference(Step_Step),steps:mobx_state_tree_module.gK.map(Step_Step)}).views(self=>({get activeStepTasks(){return(0,mobx_state_tree_module.aF)(()=>self.active)?self.active.tasks:[]},get isThereTaskHelp(){return self.activeStepTasks.some(task=>task.help)},get shouldWeShowDoneAndTalkButton(){var workflow=(0,mobx_state_tree_module.$Q)(()=>{var _getRoot$workflows;return null===(_getRoot$workflows=(0,mobx_state_tree_module.Zn)(self).workflows)||void 0===_getRoot$workflows?void 0:_getRoot$workflows.active}),classification=(0,mobx_state_tree_module.$Q)(()=>{var _getRoot$classificati;return null===(_getRoot$classificati=(0,mobx_state_tree_module.Zn)(self).classifications)||void 0===_getRoot$classificati?void 0:_getRoot$classificati.active}),step=(0,mobx_state_tree_module.$Q)(()=>self.active);if(workflow&&step&&classification){var disableTalk=classification.metadata.subject_flagged;return!step.next&&!disableTalk}return!1},findTasksByType(type){var tasksByType=Array.from(self.steps).map(_ref=>{var[stepKey,step]=_ref;return null!=step&&step.tasks&&step.tasks.length>0?step.tasks.filter(task=>task.type===type):[]});return tasksByType.flat()},get interactionTask(){var[activeDrawingTask]=self.activeStepTasks.filter(task=>"drawing"===task.type),[transcriptionTask]=self.findTasksByType("transcription");return activeDrawingTask||transcriptionTask||{}},get activeInteractionTask(){var[activeInteractionTask]=self.activeStepTasks.filter(task=>"drawing"===task.type||"transcription"===task.type);return activeInteractionTask||{}},get hasActiveAnnotateTask(){for(var task of self.activeStepTasks)if("drawing"===task.type||"transcription"===task.type||"dataVisAnnotation"===task.type||"subjectGroupComparison"===task.type)return!0;return!1},get hasAnnotateTask(){for(var key in null===(_self$workflow=self.workflow)||void 0===_self$workflow?void 0:_self$workflow.tasks){var _self$workflow,task1=self.workflow.tasks[key];if("drawing"===task1.type||"transcription"===task1.type||"dataVisAnnotation"===task1.type||"subjectGroupComparison"===task1.type)return!0}return!1},get locale(){return(0,mobx_state_tree_module.Zn)(self).locale},get workflow(){return(0,mobx_state_tree_module.$Q)(()=>{var _getRoot$workflows2;return null===(_getRoot$workflows2=(0,mobx_state_tree_module.Zn)(self).workflows)||void 0===_getRoot$workflows2?void 0:_getRoot$workflows2.active})}})).actions(self=>{function _onWorkflowChange(){var _self$workflow2,_self$workflow3;null!==(_self$workflow2=self.workflow)&&void 0!==_self$workflow2&&_self$workflow2.id&&null!==(_self$workflow3=self.workflow)&&void 0!==_self$workflow3&&_self$workflow3.version&&(self.reset(),self.setStepsAndTasks())}function _onWorkflowStringsChange(){var _self$workflow4;null!==(_self$workflow4=self.workflow)&&void 0!==_self$workflow4&&_self$workflow4.strings&&self.setTaskStrings((0,mobx_state_tree_module.dV)(self.workflow.strings))}function getNextStepKey(){var validStepReference=(0,mobx_state_tree_module.aF)(()=>self.active),stepKeys=self.steps.keys(),stepKeysArray=Array.from(stepKeys),[firstStep]=stepKeysArray;if(validStepReference){if(self.active.next)return self.active.next;var currentStepIndex=stepKeysArray.indexOf(self.active.stepKey);return stepKeysArray[currentStepIndex+1]}return firstStep}return{afterAttach:function afterAttach(){(0,mobx_state_tree_module.LF)(self,(0,mobx_esm.fm)(_onWorkflowChange)),(0,mobx_state_tree_module.LF)(self,(0,mobx_esm.fm)(_onWorkflowStringsChange))},getNextStepKey,reset:function reset(){self.steps.clear()},resetSteps:function resetSteps(){self.active=void 0,self.steps.forEach(step=>step.reset())},selectStep:function selectStep(){var stepKey=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getNextStepKey();self.steps.get(stepKey)&&(self.active=stepKey,self.activeStepTasks.forEach(task=>task.start()))},setStepsAndTasks:function setStepsAndTasks(){var{steps,strings,tasks}=self.workflow;self.setSteps(steps),self.setTasks(tasks),self.setTaskStrings((0,mobx_state_tree_module.dV)(strings))},setSteps:function setSteps(steps){steps.forEach(workflowStep=>{var[stepKey,step]=workflowStep;self.steps.put(Object.assign({},step,{stepKey}))})},setTasks:function setTasks(tasks){self.steps.forEach(function(step){step.taskKeys.forEach(taskKey=>{var taskToStore=WorkflowStepStore_objectSpread(WorkflowStepStore_objectSpread({},tasks[taskKey]),{},{taskKey});try{step.tasks.push(taskToStore)}catch(error){WorkflowStepStore_console.error("".concat(taskKey," ").concat(taskToStore.type," is not a supported task type")),WorkflowStepStore_console.error(error)}})})},setTaskStrings:function setTaskStrings(stringsSnapshot){var workflowStrings=Object.entries(stringsSnapshot);self.steps.forEach(function(step){step.tasks.forEach(task=>{var prefix="tasks.".concat(task.taskKey,"."),taskStrings=workflowStrings.filter(_ref2=>{var[key,value]=_ref2;return key.startsWith(prefix)}),taskStringsSnapshot={};taskStrings.forEach(_ref3=>{var[key,value]=_ref3,newKey=key.slice(prefix.length);taskStringsSnapshot[newKey]=value});try{(0,mobx_state_tree_module.Nh)(task.strings,taskStringsSnapshot)}catch(error){WorkflowStepStore_console.error("".concat(task.taskKey," ").concat(task.type,": could not apply language strings")),WorkflowStepStore_console.error(error)}})})}}});const WorkflowStepStore_WorkflowStepStore=WorkflowStepStore;var merge=__webpack_require__("../../node_modules/lodash/merge.js"),merge_default=__webpack_require__.n(merge),Preferences=mobx_state_tree_module.gK.model("Preferences",{minicourses:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen()),selected_workflow:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),tutorials_completed_at:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen())}),UserProjectPreferences=mobx_state_tree_module.gK.model("UserProjectPreferences",{activity_count:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),activity_count_by_workflow:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen()),links:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen({project:mobx_state_tree_module.gK.string,user:mobx_state_tree_module.gK.string})),preferences:mobx_state_tree_module.gK.maybe(Preferences),settings:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen())});const UserProjectPreferences_UserProjectPreferences=mobx_state_tree_module.gK.compose("UserProjectPreferencesResource",store_Resource,UserProjectPreferences);var UserProjectPreferencesStore_console=__webpack_require__("../../node_modules/console-browserify/index.js"),UserProjectPreferencesStore=mobx_state_tree_module.gK.model("UserProjectPreferencesStore",{active:mobx_state_tree_module.gK.safeReference(UserProjectPreferences_UserProjectPreferences),resources:mobx_state_tree_module.gK.map(UserProjectPreferences_UserProjectPreferences),type:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"project_preferences")}).actions(self=>({clear:function clear(){self.resources.clear(),self.loadingState=async_states_default().success},fetchUPPById:(0,mobx_state_tree_module.L3)(function fetchUPPById(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function*(){var{type}=self,uppId=id||self.active.id,client=(0,mobx_state_tree_module.Zn)(self).client.panoptes,{authClient}=(0,mobx_state_tree_module.Zn)(self),headers={authorization:yield getBearerToken(authClient)};try{var response=yield client.get("/".concat(type,"/").concat(uppId),null,headers),resource=response.body[type][0];if(resource)return self.setHeaders(response.headers),self.setUPP(resource),resource}catch(error){return UserProjectPreferencesStore_console.error(error),self.loadingState=async_states_default().error,null}return null}()}),putUPP:(0,mobx_state_tree_module.L3)(function*putUPP(upp){var{type}=self,client=(0,mobx_state_tree_module.Zn)(self).client.panoptes,{authClient}=(0,mobx_state_tree_module.Zn)(self),authorization=yield getBearerToken(authClient);if(upp&&self.headers.etag){var headers={authorization,etag:self.headers.etag},{id,preferences}=upp;try{self.loadingState=async_states_default().putting;var response=yield client.put("/".concat(type,"/").concat(id),{[type]:{preferences}},headers);if(response.body[type][0]){self.headers=response.headers;var updatedUPP=response.body[type][0];self.setUPP(updatedUPP)}self.loadingState=async_states_default().success}catch(error){UserProjectPreferencesStore_console.error(error),self.loadingState=async_states_default().error}}}),setHeaders:function setHeaders(headers){self.headers=headers},setUPP:function setUPP(userProjectPreferences){self.setResources([userProjectPreferences]),self.setActive(userProjectPreferences.id),self.loadingState=async_states_default().success},updateUPP:(0,mobx_state_tree_module.L3)(function*updateUPP(changes){var upp=(0,mobx_state_tree_module.$Q)(()=>self.active);if(upp){var uppSnapshot=(0,mobx_state_tree_module.dV)(upp);try{if(self.headers.etag){var mergedUPP=merge_default()({},uppSnapshot,changes);self.setUPP(mergedUPP),yield self.putUPP(mergedUPP)}else{var currentUPP=yield self.fetchUPPById(upp.id),_mergedUPP=merge_default()({},currentUPP,changes);self.setUPP(_mergedUPP),yield self.putUPP(_mergedUPP)}}catch(error){UserProjectPreferencesStore_console.error(error),self.loadingState=async_states_default().error}}})}));const UserProjectPreferencesStore_UserProjectPreferencesStore=mobx_state_tree_module.gK.compose("UserProjectPreferencesResourceStore",ResourceStore_ResourceStore,UserProjectPreferencesStore);function RootStore_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}(0,mobx_esm.jK)({isolateGlobalState:!0});mobx_state_tree_module.gK.model("RootStore",{classifications:mobx_state_tree_module.gK.optional(store_ClassificationStore,()=>store_ClassificationStore.create({})),feedback:mobx_state_tree_module.gK.optional(store_FeedbackStore,()=>store_FeedbackStore.create({})),fieldGuide:mobx_state_tree_module.gK.optional(FieldGuideStore_FieldGuideStore,()=>FieldGuideStore_FieldGuideStore.create({})),locale:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.string,"en"),projects:mobx_state_tree_module.gK.optional(store_ProjectStore,()=>store_ProjectStore.create({})),subjects:mobx_state_tree_module.gK.optional(SubjectStore_SubjectStore,()=>SubjectStore_SubjectStore.create({})),subjectSets:mobx_state_tree_module.gK.optional(SubjectSetStore_SubjectSetStore,()=>SubjectSetStore_SubjectSetStore.create({})),subjectViewer:mobx_state_tree_module.gK.optional(SubjectViewerStore,()=>SubjectViewerStore.create({})),tutorials:mobx_state_tree_module.gK.optional(TutorialStore_TutorialStore,()=>TutorialStore_TutorialStore.create({})),workflows:mobx_state_tree_module.gK.optional(WorkflowStore_WorkflowStore,()=>WorkflowStore_WorkflowStore.create({})),workflowSteps:mobx_state_tree_module.gK.optional(WorkflowStepStore_WorkflowStepStore,()=>WorkflowStepStore_WorkflowStepStore.create({})),userProjectPreferences:mobx_state_tree_module.gK.optional(UserProjectPreferencesStore_UserProjectPreferencesStore,()=>UserProjectPreferencesStore_UserProjectPreferencesStore.create({}))}).volatile(self=>({onAddToCollection:()=>!0,onSubjectChange:()=>!0,onToggleFavourite:()=>!0})).actions(self=>{function _addMiddleware(call,next,abort){if("setActiveSubject"===call.name){var res=next(call);return self.startClassification(),res}return next(call)}function _onAction(call){"completeClassification"===call.name&&self.classifications.currentAnnotations.forEach(annotation=>self.feedback.update(annotation))}function _onPatch(patch){var{path,value}=patch;"/classifications/loadingState"===path&&"posting"===value&&self.subjects.advance()}function _onUserChange(){return _onUserChange2.apply(this,arguments)}function _onUserChange2(){return _onUserChange2=function RootStore_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){RootStore_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){RootStore_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(){var _self$authClient2;yield null===(_self$authClient2=self.authClient)||void 0===_self$authClient2?void 0:_self$authClient2.checkCurrent(),window.sessionStorage.removeItem("subjectsSeenThisSession"),self.subjects.reset()}),_onUserChange2.apply(this,arguments)}return{afterCreate:function afterCreate(){var _self$authClient;(0,mobx_state_tree_module.I7)(self,_addMiddleware),(0,mobx_state_tree_module.i5)(self,_onAction),(0,mobx_state_tree_module.k4)(self,_onPatch),null===(_self$authClient=self.authClient)||void 0===_self$authClient||_self$authClient.listen("change",_onUserChange)},setLocale:function setLocale(newLocale){self.locale=newLocale},setOnAddToCollection:function setOnAddToCollection(callback){self.onAddToCollection=callback},setOnSubjectChange:function setOnSubjectChange(callback){self.onSubjectChange=callback},setOnToggleFavourite:function setOnToggleFavourite(callback){self.onToggleFavourite=callback},startClassification:function startClassification(){var{classifications,feedback,projects,subjects,workflows,workflowSteps}=self,subject=(0,mobx_state_tree_module.$Q)(()=>null==subjects?void 0:subjects.active),workflow=(0,mobx_state_tree_module.$Q)(()=>null==workflows?void 0:workflows.active),project=(0,mobx_state_tree_module.$Q)(()=>null==projects?void 0:projects.active);subject&&workflow&&project&&(workflowSteps.resetSteps(),classifications.reset(),classifications.createClassification(subject,workflow,project),feedback.onNewSubject(),self.onSubjectChange((0,mobx_state_tree_module.dV)(subject)))}}}).views(self=>({get authClient(){return(0,mobx_state_tree_module._$)(self).authClient},get client(){return(0,mobx_state_tree_module._$)(self).client}}));__webpack_require__("../../node_modules/console-browserify/index.js"),window.sessionStorage;function useKeyZoom_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function useKeyZoom_defineProperty(e,r,t){return(r=function useKeyZoom_toPropertyKey(t){var i=function useKeyZoom_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ALLOWED_TAGS=["svg","button","g","rect","image"];function useKeyZoom_storeMapper(classifierStore){var{subjectViewer:{panLeft,panRight,panUp,panDown,zoomIn,zoomOut}}=classifierStore;return{panLeft,panRight,panUp,panDown,zoomIn,zoomOut}}function defaultKeyMappings(_ref){var{panLeft,panRight,panUp,panDown,rotate,zoomIn,zoomOut,customKeyMappings={}}=_ref,rotation=Math.abs(rotate)%360,keyMappings=function useKeyZoom_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?useKeyZoom_ownKeys(Object(t),!0).forEach(function(r){useKeyZoom_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):useKeyZoom_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({"+":zoomIn,"=":zoomIn,"-":zoomOut,_:zoomOut},customKeyMappings);return 0===rotation&&(keyMappings.ArrowRight=panRight,keyMappings.ArrowLeft=panLeft,keyMappings.ArrowUp=panUp,keyMappings.ArrowDown=panDown),90===rotation&&(keyMappings.ArrowRight=panDown,keyMappings.ArrowLeft=panUp,keyMappings.ArrowUp=panRight,keyMappings.ArrowDown=panLeft),180===rotation&&(keyMappings.ArrowRight=panLeft,keyMappings.ArrowLeft=panRight,keyMappings.ArrowUp=panDown,keyMappings.ArrowDown=panUp),270===rotation&&(keyMappings.ArrowRight=panUp,keyMappings.ArrowLeft=panDown,keyMappings.ArrowUp=panLeft,keyMappings.ArrowDown=panRight),{onKeyZoom:function onKeyZoom(event){var _event$target,htmlTag=null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.tagName.toLowerCase(),handler=keyMappings[event.key];return!ALLOWED_TAGS.includes(htmlTag)||!handler||(event.preventDefault(),handler(),!1)}}}function useKeyZoom(){var{rotate=0,customKeyMappings={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{panLeft,panRight,panUp,panDown,zoomIn,zoomOut}=useStores(useKeyZoom_storeMapper);return defaultKeyMappings({panLeft,panRight,panUp,panDown,rotate,zoomIn,zoomOut,customKeyMappings})}function usePanoptesAuth_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function usePanoptesAuth(_ref){var{authClient}=_ref,[authorization,setAuthorization]=(0,react.useState)();function _checkAuth(){return _checkAuth=function usePanoptesAuth_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){usePanoptesAuth_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){usePanoptesAuth_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(){var token=yield getBearerToken(authClient);token!==authorization&&setAuthorization(token)}),_checkAuth.apply(this,arguments)}return function checkAuth(){return _checkAuth.apply(this,arguments)}(),authorization}var index=__webpack_require__("../../node_modules/swr/dist/index/index.mjs"),mergeWith=__webpack_require__("../../node_modules/lodash/mergeWith.js"),mergeWith_default=__webpack_require__.n(mergeWith);function usePanoptesTranslations_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}var SWRoptions={revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:0};function fetchTranslations(_x){return _fetchTranslations.apply(this,arguments)}function _fetchTranslations(){return _fetchTranslations=function usePanoptesTranslations_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){usePanoptesTranslations_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){usePanoptesTranslations_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(_ref){var{translated_id,translated_type,language,fallback="en"}=_ref,lowerCaseLang=null==language?void 0:language.toLowerCase(),languages=language===fallback?fallback:"".concat(lowerCaseLang,",").concat(fallback),response=yield src.bB.get("/translations",{language:languages,translated_id,translated_type}),translation=response.body.translations.find(t=>t.language===lowerCaseLang),original=response.body.translations.find(t=>t.language===fallback);if(!translation||!Object.keys(translation.strings).length)return original;var mergedStrings=mergeWith_default()(translation.strings,original.strings,(objValue,srcValue)=>""===objValue?srcValue:objValue);return Object.assign(translation,{strings:mergedStrings})}),_fetchTranslations.apply(this,arguments)}function usePanoptesTranslations(_ref2){var{translated_id,translated_type,language}=_ref2,key=translated_id?{translated_id,translated_type,language}:null,{data}=(0,index.Ay)(key,fetchTranslations,SWRoptions);return data}var usePanoptesUser_console=__webpack_require__("../../node_modules/console-browserify/index.js");function usePanoptesUser_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function usePanoptesUser_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){usePanoptesUser_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){usePanoptesUser_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function _fetchPanoptesUser(){return(_fetchPanoptesUser=usePanoptesUser_asyncToGenerator(function*(authClient){try{var authorization=yield getBearerToken(authClient);if(authorization){var{user,error}=yield src.j2.decodeJWT(authorization);if(user)return user;if(error)throw error}return yield authClient.checkCurrent()}catch(error){return usePanoptesUser_console.log(error),null}})).apply(this,arguments)}function usePanoptesUser(authClient){var[error,setError]=(0,react.useState)(null),[user,setUser]=(0,react.useState)(null),[loading,setLoading]=(0,react.useState)(!0);return(0,react.useEffect)(function(){function checkUserSession(){return _checkUserSession.apply(this,arguments)}function _checkUserSession(){return _checkUserSession=usePanoptesUser_asyncToGenerator(function*(){setLoading(!0);try{var panoptesUser=yield function fetchPanoptesUser(_x){return _fetchPanoptesUser.apply(this,arguments)}(authClient);setUser(panoptesUser)}catch(error){setError(error)}setLoading(!1)}),_checkUserSession.apply(this,arguments)}return checkUserSession(),authClient.listen("change",checkUserSession),function(){authClient.stopListening("change",checkUserSession)}},[authClient]),{data:user,error,isLoading:loading}}function useStores(){var storeMapper=arguments.length>0&&void 0!==arguments[0]?arguments[0]:store=>store,{classifierStore}=(0,react.useContext)(mobxreact_esm.Db);return storeMapper(classifierStore)}var useProgressiveImage=__webpack_require__("../lib-react-components/dist/esm/hooks/useProgressiveImage.js");function useSubjectImage(_ref){var{frame=0,src,onReady,onError}=_ref,subjectImage=(0,react.useRef)(),{img,error,loading}=(0,useProgressiveImage.A)({placeholderSrc:"",src,onLoad:function onLoad(event){var{naturalHeight,naturalWidth,src}=event.target;if(""!==src){var svgImage=subjectImage.current,{width:clientWidth,height:clientHeight}=svgImage?svgImage.getBoundingClientRect():{};onReady({target:{clientHeight,clientWidth,naturalHeight,naturalWidth}},frame)}},onError});return{img,error,loading,subjectImage}}var CSSBox=mobx_state_tree_module.gK.model("CSSBox",{bottom:mobx_state_tree_module.gK.number,left:mobx_state_tree_module.gK.number,right:mobx_state_tree_module.gK.number,top:mobx_state_tree_module.gK.number}),ChartOptions=mobx_state_tree_module.gK.model("ChartOptions",{xAxisLabel:mobx_state_tree_module.gK.string,xAxisLabelOffset:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),yAxisLabel:mobx_state_tree_module.gK.string,yAxisLabelOffset:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,0),margin:mobx_state_tree_module.gK.maybe(CSSBox),padding:mobx_state_tree_module.gK.maybe(CSSBox)}),BarValues=mobx_state_tree_module.gK.model("BarValues",{color:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),label:mobx_state_tree_module.gK.string,value:mobx_state_tree_module.gK.number}),BarData=mobx_state_tree_module.gK.refinement("BarData",mobx_state_tree_module.gK.array(BarValues),value=>value.length>0);const BarChart=mobx_state_tree_module.gK.model("BarChart",{data:BarData,chartOptions:mobx_state_tree_module.gK.maybe(ChartOptions)});var chartCoordinates=mobx_state_tree_module.gK.refinement("requiredArray",mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.number),value=>value.length>0);const TESSLightCurve=mobx_state_tree_module.gK.model("TESSLightCurve",{x:chartCoordinates,y:chartCoordinates});var DataSeriesPlot_CSSBox=mobx_state_tree_module.gK.model("CSSBox",{bottom:mobx_state_tree_module.gK.number,left:mobx_state_tree_module.gK.number,right:mobx_state_tree_module.gK.number,top:mobx_state_tree_module.gK.number}),InvertAxes=mobx_state_tree_module.gK.model("InvertAxes",{x:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1),y:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.boolean,!1)}),ZoomConfiguration=mobx_state_tree_module.gK.model("ZoomConfiguration",{direction:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.enumeration(["both","x","y"]),"both"),minZoom:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,1),maxZoom:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,10),zoomInValue:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,1.2),zoomOutValue:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.number,.8)}),DataSeriesPlot_ChartOptions=mobx_state_tree_module.gK.model("ChartOptions",{color:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),xAxisLabel:mobx_state_tree_module.gK.string,xAxisLabelOffset:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),yAxisLabel:mobx_state_tree_module.gK.string,yAxisLabelOffset:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),invertAxes:mobx_state_tree_module.gK.maybe(InvertAxes),margin:mobx_state_tree_module.gK.maybe(DataSeriesPlot_CSSBox),padding:mobx_state_tree_module.gK.maybe(DataSeriesPlot_CSSBox),zoomConfiguration:mobx_state_tree_module.gK.maybe(ZoomConfiguration)}),DataPoint=mobx_state_tree_module.gK.model("DataPoint",{x:mobx_state_tree_module.gK.number,y:mobx_state_tree_module.gK.number,x_error:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number),y_error:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number)}),SeriesOptions=mobx_state_tree_module.gK.model("SeriesOptions",{glyph:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.enumeration(["circle","cross","diamond","square","star","triangle","wye"])),label:mobx_state_tree_module.gK.string,color:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.string),period:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number)}),DataSeries=mobx_state_tree_module.gK.model("DataSeries",{seriesData:mobx_state_tree_module.gK.array(DataPoint),seriesOptions:mobx_state_tree_module.gK.maybe(SeriesOptions)}),ChartData=mobx_state_tree_module.gK.refinement("ChartData",mobx_state_tree_module.gK.array(DataSeries),value=>value.length>0);const DataSeriesPlot=mobx_state_tree_module.gK.model("DataSeriesPlot",{data:mobx_state_tree_module.gK.union(ChartData,TESSLightCurve),chartOptions:mobx_state_tree_module.gK.maybe(DataSeriesPlot_ChartOptions)});var Geometry=mobx_state_tree_module.gK.model("GeoJSONGeometry",{type:mobx_state_tree_module.gK.enumeration("Type",["Point","LineString","LinearRing","Polygon","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","Circle"]),coordinates:mobx_state_tree_module.gK.frozen()}),Feature=mobx_state_tree_module.gK.model("GeoJSONFeature",{type:mobx_state_tree_module.gK.literal("Feature"),geometry:Geometry,properties:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.frozen())});const GeoJSON=mobx_state_tree_module.gK.model("GeoJSON",{type:mobx_state_tree_module.gK.literal("FeatureCollection"),features:mobx_state_tree_module.gK.array(Feature)}),VariableStarPlots=mobx_state_tree_module.gK.model("VariableStarPlots",{data:mobx_state_tree_module.gK.model("VariableStarPlots",{scatterPlot:DataSeriesPlot,barCharts:mobx_state_tree_module.gK.map(BarChart)})}),JSONData=mobx_state_tree_module.gK.union(BarChart,DataSeriesPlot,GeoJSON,TESSLightCurve,VariableStarPlots);var useSubjectJSON_console=__webpack_require__("../../node_modules/console-browserify/index.js");function useSubjectJSON_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function useSubjectJSON_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){useSubjectJSON_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useSubjectJSON_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function _requestData(){return(_requestData=useSubjectJSON_asyncToGenerator(function*(subject){var url=function getSubjectUrl(subject){var jsonLocation=subject.locations.find(l=>"application"===l.type||"text"===l.type)||{},{url}=jsonLocation;if(url)return url;throw new Error("No JSON url found for this subject")}(subject),response=yield fetch(url);if(!response.ok){var error=new Error(response.statusText);throw error.status=response.status,error}return yield response.json()})).apply(this,arguments)}var useSubjectJSON_DEFAULT_HANDLER=()=>!0;function useSubjectJSON(_ref){var{onError=useSubjectJSON_DEFAULT_HANDLER,onReady=useSubjectJSON_DEFAULT_HANDLER,subject}=_ref,viewer=(0,react.useRef)(),[error,setError]=(0,react.useState)(null),[data,setData]=(0,react.useState)(null);return(0,react.useEffect)(function onSubjectChange(){function _handleSubject(){return _handleSubject=useSubjectJSON_asyncToGenerator(function*(){try{var rawData=yield function requestData(_x){return _requestData.apply(this,arguments)}(subject);if(rawData){var jsonData;try{jsonData=JSONData.create(rawData)}catch(typeError){useSubjectJSON_console.warn("JSON data does not match known types, using raw data:",typeError.message),jsonData=rawData}setData(jsonData),function onLoad(){var _viewer$current,container=null===(_viewer$current=viewer.current)||void 0===_viewer$current?void 0:_viewer$current.container,{width:clientWidth,height:clientHeight}=container?container.getBoundingClientRect():{};onReady({clientWidth,clientHeight,naturalWidth:0,naturalHeight:0})}()}}catch(error){setError(error),onError(error),useSubjectJSON_console.error(error)}}),_handleSubject.apply(this,arguments)}subject&&function handleSubject(){return _handleSubject.apply(this,arguments)}()},[subject]),{loading:!data&&!error,data:data?(0,mobx_state_tree_module.gk)(data)?(0,mobx_state_tree_module.dV)(data):data:null,error,type:data&&(0,mobx_state_tree_module.gk)(data)?(0,mobx_state_tree_module.Pw)(data):null,viewer}}function useSubjectText_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function useSubjectText_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){useSubjectText_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useSubjectText_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function hooks_useSubjectText_requestData(){return(hooks_useSubjectText_requestData=useSubjectText_asyncToGenerator(function*(subject){var url=function useSubjectText_getSubjectUrl(subject){var textLocation=subject.locations.find(l=>"text"===l.type)||{},{url}=textLocation;if(url)return url;throw new Error("No text url found for this subject")}(subject),response=yield fetch(url);if(!response.ok){var error=new Error(response.statusText);throw error.status=response.status,error}return yield response.text()})).apply(this,arguments)}var useSubjectText_DEFAULT_HANDLER=function DEFAULT_HANDLER(){return!0};function useSubjectText(_ref){var{frame=0,subject,onReady=useSubjectText_DEFAULT_HANDLER,onError=useSubjectText_DEFAULT_HANDLER}=_ref,[data,setData]=(0,react.useState)(""),[error,setError]=(0,react.useState)(null);return(0,react.useEffect)(function onSubjectChange(){function _handleSubject(){return _handleSubject=useSubjectText_asyncToGenerator(function*(){try{var rawData=yield function useSubjectText_requestData(_x){return hooks_useSubjectText_requestData.apply(this,arguments)}(subject);rawData&&function onLoad(rawData){setData(rawData),onReady(null,frame)}(rawData)}catch(error){setError(error),onError(error)}}),_handleSubject.apply(this,arguments)}subject&&function handleSubject(){return _handleSubject.apply(this,arguments)}()},[subject,onReady,onError]),{data,error,loading:!data&&!error}}function useTranscriptionReductions_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function useTranscriptionReductions_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){useTranscriptionReductions_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){useTranscriptionReductions_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}function _checkUser(){return _checkUser=useTranscriptionReductions_asyncToGenerator(function*(){var userIDs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],authorization=arguments.length>1?arguments[1]:void 0;if(authorization){var token=authorization.replace("Bearer ",""),{data}=yield src.j2.verify(token);return data&&userIDs.includes(data.id)}return!1}),_checkUser.apply(this,arguments)}function useTranscriptionReductions(){var _subject$stepHistory,{authClient,subjects:{active:subject},subjectViewer:{frame},workflows:{active:workflow},workflowSteps:{active:step,findTasksByType}}=useStores(),{loaded,caesarReductions}=useCaesarReductions(workflow.caesarReducer);(0,react.useEffect)(function checkTranscriptionUsers(){function _checkSubject(){return _checkSubject=useTranscriptionReductions_asyncToGenerator(function*(){var authorization=yield getBearerToken(authClient),alreadySeen=yield function checkUser(){return _checkUser.apply(this,arguments)}(null==caesarReductions?void 0:caesarReductions.userIDs,authorization);!ignore&&alreadySeen&&(!function logDuplicateSubject(subjectSnapshot){var subjectError=new Error("Duplicate transcription subject: ".concat(subjectSnapshot.id));currentScopes.v4(scope=>{scope.setTag("subjectError","duplicate"),scope.setExtra("subject",JSON.stringify(subjectSnapshot)),esm_exports.Cp(subjectError)})}((0,mobx_state_tree_module.dV)(subject)),subject.markAsSeen())}),_checkSubject.apply(this,arguments)}var ignore=!1;return subject&&loaded&&function checkSubject(){return _checkSubject.apply(this,arguments)}(),()=>{ignore=!0}},[loaded,caesarReductions,subject]);var lines=[],activeStepAnnotations=null==subject||null===(_subject$stepHistory=subject.stepHistory)||void 0===_subject$stepHistory?void 0:_subject$stepHistory.latest.annotations,[task]=findTasksByType("transcription"),marks=null==task?void 0:task.marks,annotation=activeStepAnnotations.find(annotation=>annotation.task===(null==task?void 0:task.taskKey)),invalidMark=!(null!=step&&step.isValid);loaded&&"TranscriptionReductions"===(0,mobx_state_tree_module.Pw)(caesarReductions).name&&(lines=caesarReductions.consensusLines(frame));var visible=(null==workflow?void 0:workflow.usesTranscriptionTask)&&loaded&&(null==task?void 0:task.shownMarks)===helpers_shownMarks.ALL&&lines.length>0;return{active:step.tasks.find(t=>(null==task?void 0:task.taskKey)===t.taskKey),annotation,frame,invalidMark,lines,marks,task,visible,workflow}}var useMachineLearntReductions_excluded=["stepKey","taskIndex","taskKey","taskType","toolType"];function useMachineLearntReductions(){var{workflows:{active:workflow},workflowSteps:{active:step,findTasksByType},subjects:{active:activeSubject}}=useStores(),{loaded,caesarReductions}=useCaesarReductions(workflow.caesarReducer),stepIndex=parseInt(step.stepKey.replace("S",""),10);if(loaded&&"MachineLearntReductions"===(0,mobx_state_tree_module.Pw)(caesarReductions).name&&!0!==activeSubject.caesarReductionsLoadedForStep[stepIndex]){var caesarMarks=caesarReductions.findCurrentTaskMarks({stepKey:step.stepKey});caesarMarks&&caesarMarks.forEach(caesarMark=>{var _step$tasks$0$tools$n,{stepKey,taskIndex,taskKey,taskType,toolType}=caesarMark,newMark=function useMachineLearntReductions_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function useMachineLearntReductions_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(caesarMark,useMachineLearntReductions_excluded);newMark.id=newMark.markId,delete newMark.markId,null==step||null===(_step$tasks$0$tools$n=step.tasks[0].tools[newMark.toolIndex])||void 0===_step$tasks$0$tools$n||_step$tasks$0$tools$n.createMark(newMark)}),activeSubject.setCaesarReductionsLoadedForStep(stepIndex)}var[drawingTask]=findTasksByType("drawing");return{task:drawingTask}}var Grid_Grid=__webpack_require__("../../node_modules/grommet/es6/components/Grid/Grid.js"),Drop=__webpack_require__("../../node_modules/grommet/es6/components/Drop/Drop.js"),CaretPrevious=__webpack_require__("../../node_modules/grommet-icons/es6/icons/CaretPrevious.js"),CaretNext=__webpack_require__("../../node_modules/grommet-icons/es6/icons/CaretNext.js"),DEFAULT_PAD={horizontal:"small"},Triangle_SVG=styled_components_browser_esm.default.svg.withConfig({displayName:"Triangle__SVG",componentId:"sc-11lel6u-0"})(["display:block;"," z-index:1;"],props=>(0,styled_components_browser_esm.css)(["fill:",";height:","px;width:","px;"],props.fill,props.height,props.height));function Triangle_Triangle_Triangle(_ref){var fill,{backgroundColor,height=20,justify="end",pad=DEFAULT_PAD,pointDirection="up",theme,width=20}=_ref,{colors}=theme.global;fill=backgroundColor||("light"===theme.mode?colors.white:colors["dark-2"]);return(0,jsx_runtime.jsx)(Box.a,{"aria-hidden":"true",direction:"row",justify,pad,children:(0,jsx_runtime.jsx)(Triangle_SVG,{fill,height,viewBox:"0 0 10 10",width,children:(0,jsx_runtime.jsx)("polygon",{points:{down:"0,0 10,0 5,10",left:"10,0 10,10 0,5",right:"0,0 0,10 10,5",up:"5,0 10,10 0,10"}[pointDirection]})})})}Triangle_Triangle_Triangle.propTypes={pad:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),pointDirection:(0,prop_types.oneOf)(["down","left","right","up"]),justify:(0,prop_types.oneOf)(["start","center","end"]),theme:(0,prop_types.shape)({global:(0,prop_types.shape)({colors:(0,prop_types.shape)({"dark-2":prop_types.string,white:prop_types.string})}),mode:(0,prop_types.oneOf)(["dark","light"])})};const shared_Triangle_Triangle=(0,styled_components_browser_esm.withTheme)(Triangle_Triangle_Triangle);function TooltipText(props){var{text}=props,textArray=Array.isArray(text)?text:[text],isLastElement=index=>function isLastElementOfArray(index,array){return index+1===array.length}(index,textArray);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:textArray.map((line,index)=>(0,jsx_runtime.jsx)(Paragraph.f,{margin:{bottom:isLastElement(index)?"none":"xsmall",top:"none"},size:"small",children:line},"TooltipText_Line".concat(index)))})}TooltipText.propTypes={text:(0,prop_types.oneOfType)([prop_types.string,(0,prop_types.arrayOf)(prop_types.string)]).isRequired};const TooltipText_TooltipText=TooltipText;function Banner_defineProperty(e,r,t){return(r=function Banner_toPropertyKey(t){var i=function Banner_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Banner_DEFAULT_THEME={mode:"light"};function Banner_Label(_ref){var{color}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(SpacedText.A,{color,children:t("Banners.Banner.whyAmISeeingThis")})}function Banner_Tooltip(_ref2){var{mode,tooltipText}=_ref2;return(0,jsx_runtime.jsxs)(Box.a,{direction:"column",margin:"xsmall",children:[(0,jsx_runtime.jsx)(shared_Triangle_Triangle,{}),(0,jsx_runtime.jsx)(Box.a,{background:"light"===mode?"white":"dark-2",pad:"small",children:(0,jsx_runtime.jsx)(TooltipText_TooltipText,{text:tooltipText})})]})}class Banner extends react.Component{componentDidUpdate(){!this.props.show&&this.state.tooltipOpen&&this.close()}render(){var{background,bannerText="",color="neutral-6",onNext,onPrevious,show=!1,subjects,t,theme=Banner_DEFAULT_THEME,tooltipText}=this.props,{mode=Banner_DEFAULT_THEME.mode}=theme;return show&&(0,jsx_runtime.jsxs)(Box.a,{align:"center",animation:"fadeIn",background:{color:background},direction:"row",justify:"between",pad:{vertical:"xsmall",horizontal:"small"},show,children:[onPrevious&&(0,jsx_runtime.jsx)(PlainButton.Ay,{color,icon:(0,jsx_runtime.jsx)(CaretPrevious.T,{color,size:"15px"}),onClick:onPrevious,text:t("Banners.Banner.previous")}),(0,jsx_runtime.jsx)(SpacedText.A,{color,weight:"bold",children:bannerText}),onNext&&(0,jsx_runtime.jsx)(PlainButton.Ay,{color,icon:(0,jsx_runtime.jsx)(CaretNext.P,{color,size:"15px"}),onClick:onNext,reverse:!0,text:t("Banners.Banner.next")}),(0,jsx_runtime.jsx)(Button.$,{disabled:!tooltipText,label:(0,jsx_runtime.jsx)(Banner_Label,{color}),onClick:this.toggle,plain:!0,ref:this.ref}),this.ref.current&&this.state.tooltipOpen&&(0,jsx_runtime.jsx)(Drop.e,{align:{right:"right",top:"bottom"},onEsc:this.close,plain:!0,target:this.ref.current,children:(0,jsx_runtime.jsx)(Banner_Tooltip,{mode,tooltipText})})]},bannerText)}constructor(){super(...arguments),Banner_defineProperty(this,"state",{tooltipOpen:!1}),Banner_defineProperty(this,"ref",(0,react.createRef)()),Banner_defineProperty(this,"close",()=>this.setState({tooltipOpen:!1})),Banner_defineProperty(this,"open",()=>this.setState({tooltipOpen:!0})),Banner_defineProperty(this,"toggle",()=>this.setState(state=>({tooltipOpen:!state.tooltipOpen})))}}Banner.propTypes={background:prop_types.string.isRequired,bannerText:prop_types.string.isRequired,color:prop_types.string,onNext:prop_types.func,onPrevious:prop_types.func,show:prop_types.bool,theme:(0,prop_types.shape)({mode:(0,prop_types.oneOf)(["dark","light"])}),tooltipText:(0,prop_types.oneOfType)([prop_types.array,prop_types.string])};const Banner_Banner=withTranslation("components")((0,styled_components_browser_esm.withTheme)(Banner));function AlreadySeenBanner(_ref){var{subject}=_ref,{t}=useTranslation("components"),show=!!subject&&subject.id&&subject.alreadySeen&&!subject.retired&&!subject.finished_workflow&&!subject.user_has_finished_workflow;return(0,jsx_runtime.jsx)(Banner_Banner,{background:"status-critical",bannerText:t("Banners.AlreadySeenBanner.bannerText"),show,tooltipText:t("Banners.AlreadySeenBanner.tooltipText",{returnObjects:!0})})}function RetiredBanner(_ref){var{subject}=_ref,{t}=useTranslation("components"),show=!!subject&&subject.id&&subject.retired&&!subject.finished_workflow&&!subject.user_has_finished_workflow;return(0,jsx_runtime.jsx)(Banner_Banner,{background:"status-critical",bannerText:t("Banners.RetiredBanner.bannerText"),show,tooltipText:t("Banners.RetiredBanner.tooltipText",{returnObjects:!0})})}function ConfirmModal(_ref){var{active=!1,onCancel=()=>!0,onConfirm=()=>!0}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsxs)(Modal.A,{active,modal:!0,closeFn:onCancel,"data-testid":"confirm-modal",children:[(0,jsx_runtime.jsx)(Paragraph.f,{margin:{bottom:"medium"},children:t("Banners.InProgressConfirmModal.inProgress")}),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",gap:"small",justify:"center",children:[(0,jsx_runtime.jsx)(Button.$,{label:t("Banners.InProgressConfirmModal.cancel"),onClick:onCancel,"data-testid":"confirm-modal-cancel-btn"}),(0,jsx_runtime.jsx)(PrimaryButton.A,{label:t("Banners.InProgressConfirmModal.confirm"),color:"teal",onClick:onConfirm,"data-testid":"confirm-modal-confirm-btn"})]})]})}Banner.__docgenInfo={description:"",methods:[],displayName:"Banner",props:{background:{description:"",type:{name:"string"},required:!0},bannerText:{description:"",type:{name:"string"},required:!0},color:{description:"",type:{name:"custom",raw:"string"},required:!1},onNext:{description:"",type:{name:"custom",raw:"func"},required:!1},onPrevious:{description:"",type:{name:"custom",raw:"func"},required:!1},show:{description:"",type:{name:"custom",raw:"bool"},required:!1},theme:{description:"",type:{name:"shape",value:{mode:{name:"enum",value:[{value:"'dark'",computed:!1},{value:"'light'",computed:!1}],required:!1}}},required:!1},tooltipText:{description:"",type:{name:"union",value:[{name:"array"},{name:"string"}]},required:!1}}},AlreadySeenBanner.propTypes={subject:(0,prop_types.shape)({alreadySeen:prop_types.bool,finished_workflow:prop_types.bool,id:prop_types.string,retired:prop_types.bool,user_has_finished_workflow:prop_types.bool})},RetiredBanner.propTypes={subject:(0,prop_types.shape)({finished_workflow:prop_types.bool,id:prop_types.string,retired:prop_types.bool,user_has_finished_workflow:prop_types.bool})},ConfirmModal.propTypes={active:prop_types.bool,onCancel:prop_types.func,onConfirm:prop_types.func};const ConfirmModal_ConfirmModal=ConfirmModal;function SubjectSetProgressBanner(_ref){var _workflow$subjectSet,_workflow$subjectSet2,{checkForProgress=!1,onNext,onPrevious,subject,workflow}=_ref,{t}=useTranslation("components"),[showModal,setShowModal]=(0,react.useState)(!1),[intent,setIntent]=(0,react.useState)(void 0),setName=(null==workflow||null===(_workflow$subjectSet=workflow.subjectSet)||void 0===_workflow$subjectSet?void 0:_workflow$subjectSet.display_name)||"",subjectTotal=null==workflow||null===(_workflow$subjectSet2=workflow.subjectSet)||void 0===_workflow$subjectSet2?void 0:_workflow$subjectSet2.set_member_subjects_count,background=null!=subject&&subject.alreadySeen||null!=subject&&subject.retired?"status-critical":"status-ok",color=null!=subject&&subject.alreadySeen||null!=subject&&subject.retired?"neutral-6":"neutral-7",statusText=null!=subject&&subject.alreadySeen?"".concat(t("Banners.SubjectSetProgressBanner.alreadySeen")):"";statusText=null!=subject&&subject.retired?"".concat(t("Banners.SubjectSetProgressBanner.finished")):statusText;var progressText=t("Banners.SubjectSetProgressBanner.bannerText",{number:null==subject?void 0:subject.priority,setName,total:subjectTotal}),tooltipText=t("Banners.SubjectSetProgressBanner.tooltipText",{returnObjects:!0}),bannerText=statusText?"".concat(progressText," (").concat(statusText,")"):progressText;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(Banner_Banner,{background,bannerText,color,onNext:onNext?()=>{if(checkForProgress)return setShowModal(!0),void setIntent(()=>onNext);onNext()}:void 0,onPrevious:onPrevious?()=>{if(checkForProgress)return setShowModal(!0),void setIntent(()=>onPrevious);onPrevious()}:void 0,show:!0,tooltipText}),(0,jsx_runtime.jsx)(ConfirmModal_ConfirmModal,{active:showModal,onCancel:()=>{setShowModal(!1),setIntent(void 0)},onConfirm:()=>{intent&&intent(),setShowModal(!1),setIntent(void 0)}})]})}SubjectSetProgressBanner.propTypes={checkForProgress:prop_types.bool,onNext:prop_types.func,onPrevious:prop_types.func,subject:(0,prop_types.shape)({alreadySeen:prop_types.bool,finished_workflow:prop_types.bool,id:prop_types.string,retired:prop_types.bool,user_has_finished_workflow:prop_types.bool}),workflow:(0,prop_types.shape)({subjectSet:(0,prop_types.shape)({display_name:prop_types.string,set_member_subjects_count:prop_types.number})})};const SubjectSetProgressBanner_SubjectSetProgressBanner=SubjectSetProgressBanner;function WorkflowIsFinishedBanner(_ref){var{subject}=_ref,{t}=useTranslation("components"),show=!!subject&&subject.id&&subject.finished_workflow;return(0,jsx_runtime.jsx)(Banner_Banner,{background:"status-critical",bannerText:t("Banners.WorkflowIsFinishedBanner.bannerText"),show,tooltipText:t("Banners.WorkflowIsFinishedBanner.tooltipText",{returnObjects:!0})})}function UserHasFinishedWorkflowBanner(_ref){var{subject}=_ref,{t}=useTranslation("components"),show=!!subject&&!subject.finished_workflow&&subject.user_has_finished_workflow;return(0,jsx_runtime.jsx)(Banner_Banner,{background:"status-warning",bannerText:t("Banners.UserHasFinishedWorkflowBanner.bannerText"),show,tooltipText:t("Banners.UserHasFinishedWorkflowBanner.tooltipText",{returnObjects:!0})})}WorkflowIsFinishedBanner.propTypes={subject:(0,prop_types.shape)({finished_workflow:prop_types.bool,id:prop_types.string,retired:prop_types.bool})},UserHasFinishedWorkflowBanner.propTypes={subject:(0,prop_types.shape)({finished_workflow:prop_types.bool,id:prop_types.string,retired:prop_types.bool})};const Banners_Banners=(0,mobxreact_esm.PA)(function Banners(_ref){var _subject$priority,_project$experimental,_subject$stepHistory,{mockStores}=_ref,{project,subject,subjects,workflow}=function Banners_useStores(mockStores){var{classifierStore}=null!=mockStores?mockStores:(0,react.useContext)(mobxreact_esm.Db);return{project:classifierStore.projects.active,subject:classifierStore.subjects.active,subjects:classifierStore.subjects,workflow:classifierStore.workflows.active}}(mockStores),subjectNumber=null!==(_subject$priority=null==subject?void 0:subject.priority)&&void 0!==_subject$priority?_subject$priority:-1,hasIndexedSubjects=null==workflow?void 0:workflow.hasIndexedSubjects,hasGroupedOrderedSubjects=(null==workflow?void 0:workflow.grouped)&&(null==workflow?void 0:workflow.prioritized),enableIndexedSubjectSetNextPrevButtons=null==project||null===(_project$experimental=project.experimental_tools)||void 0===_project$experimental?void 0:_project$experimental.includes("indexedSubjectSetNextPrevButtons"),onPrevious=subjects.previousIndexed,onNext=subjects.nextIndexed;return enableIndexedSubjectSetNextPrevButtons&&hasIndexedSubjects&&subjectNumber>-1?(0,jsx_runtime.jsx)(SubjectSetProgressBanner_SubjectSetProgressBanner,{checkForProgress:null==subject||null===(_subject$stepHistory=subject.stepHistory)||void 0===_subject$stepHistory?void 0:_subject$stepHistory.checkForProgress,onNext,onPrevious,subject,workflow}):hasGroupedOrderedSubjects&&subjectNumber>-1?(0,jsx_runtime.jsx)(SubjectSetProgressBanner_SubjectSetProgressBanner,{subject,workflow}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(AlreadySeenBanner,{subject}),(0,jsx_runtime.jsx)(RetiredBanner,{subject}),(0,jsx_runtime.jsx)(WorkflowIsFinishedBanner,{subject}),(0,jsx_runtime.jsx)(UserHasFinishedWorkflowBanner,{subject})]})});var Group=__webpack_require__("../../node_modules/@visx/group/esm/Group.js"),AxisLeft=__webpack_require__("../../node_modules/@visx/axis/esm/axis/AxisLeft.js"),AxisBottom=__webpack_require__("../../node_modules/@visx/axis/esm/axis/AxisBottom.js"),band=__webpack_require__("../../node_modules/@visx/scale/esm/scales/band.js"),linear=__webpack_require__("../../node_modules/@visx/scale/esm/scales/linear.js"),extent=__webpack_require__("../../node_modules/d3-array/src/extent.js"),withParentSize=__webpack_require__("../../node_modules/@visx/responsive/esm/enhancers/withParentSize.js"),Chart_excluded=["children","height","width"];function Chart_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Chart_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Chart_ownKeys(Object(t),!0).forEach(function(r){Chart_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Chart_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Chart_defineProperty(e,r,t){return(r=function Chart_toPropertyKey(t){var i=function Chart_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Chart=(0,react.forwardRef)(function Chart(_ref,ref){var{children,height="100%",width="100%"}=_ref,rest=function Chart_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function Chart_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,Chart_excluded);return(0,jsx_runtime.jsx)("svg",Chart_objectSpread(Chart_objectSpread({"data-testid":"data-vis-chart",height,ref,width},rest),{},{children}))});Chart.propTypes={height:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string]),width:prop_types_default().oneOfType([prop_types_default().number,prop_types_default().string])};const Chart_Chart=Chart;Chart.__docgenInfo={description:"",methods:[],displayName:"Chart",props:{height:{description:"",type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1},width:{description:"",type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1}}};var Background_excluded=["borderColor","className","fill","height","underlayParameters","width"];function Background_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Background_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Background_ownKeys(Object(t),!0).forEach(function(r){Background_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Background_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Background_defineProperty(e,r,t){return(r=function Background_toPropertyKey(t){var i=function Background_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Background(_ref){var{borderColor="",className="chartBackground",fill="",height="100%",underlayParameters=[],width="100%"}=_ref,rest=function Background_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function Background_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,Background_excluded);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("rect",Background_objectSpread({className,fill,focusable:!0,height,stroke:borderColor||"",strokeWidth:borderColor?1:0,tabIndex:0,width},rest)),underlayParameters.length>0&&underlayParameters.map(parameters=>{var{fill,left,width}=parameters;return(0,jsx_runtime.jsx)("rect",Background_objectSpread({className:"".concat(className,"-underlay"),fill,height,pointerEvents:"none",transform:"translate(".concat(left,", ").concat(borderColor?1:0,")"),width},rest),Math.random())})]})}Background.propTypes={borderColor:prop_types_default().string,fill:prop_types_default().string,height:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number]),underlayParameters:prop_types_default().arrayOf(prop_types_default().object),width:prop_types_default().oneOfType([prop_types_default().string,prop_types_default().number])};const Background_Background=Background;var Bar=__webpack_require__("../../node_modules/@visx/shape/esm/shapes/Bar.js"),StyledSvg=styled_components_browser_esm.default.svg.withConfig({displayName:"Bars__StyledSvg",componentId:"sc-18slxvd-0"})(["&:focus,&:hover{rect{outline:solid 4px ",";}}"],props=>props.focusColor),Bars_DEFAULT_THEME={dark:!1,global:{colors:{brand:"",text:{}}}};function Bars(_ref){var{data,xAxisLabel="x-axis",xScale,yAxisLabel="y-axis",yScale,yMax,theme=Bars_DEFAULT_THEME}=_ref;return data.map((datum,index)=>{var{color,label,value}=datum,fill=theme.global.colors[color]||color||theme.global.colors.brand,key="bar-".concat(label),barHeight=yMax-yScale(value),barWidth=xScale.bandwidth(),x=xScale(label),y=yMax-barHeight,alt="".concat(xAxisLabel," ").concat(label,": ").concat(yAxisLabel," ").concat(value);return(0,jsx_runtime.jsx)(Tooltip_Tooltip,{label:value.toString(),children:(0,jsx_runtime.jsx)(StyledSvg,{"aria-label":alt,tabIndex:"0",focusable:!0,focusColor:theme.global.colors[theme.global.colors.focus],role:"listitem",children:(0,jsx_runtime.jsx)(Bar.A,{"data-label":label,"data-value":value,fill,focusColor:theme.global.colors.focus,height:barHeight,index,width:barWidth,x,y})})},key)})}Bars.propTypes={data:prop_types_default().array.isRequired,theme:prop_types_default().object,xAxisLabel:prop_types_default().string,xScale:prop_types_default().func.isRequired,yAxisLabel:prop_types_default().string,yScale:prop_types_default().func.isRequired,yMax:prop_types_default().number.isRequired};const Bars_Bars=(0,styled_components_browser_esm.withTheme)(Bars);var BarChartViewer_StyledGroup=(0,styled_components_browser_esm.default)(Group.A).withConfig({displayName:"BarChartViewer__StyledGroup",componentId:"sc-1xw3fsj-0"})([".Axis__label{text-transform:uppercase;font-weight:bold;letter-spacing:1px;}"]),BarChartViewer=(0,react.forwardRef)(function BarChartViewer(props,ref){var{barStyles:{padding=.25}={padding:.25},data,margin:{bottom=40,left=40,right=10,top=10}={bottom:40,left:40,right:10,top:10},parentHeight,parentWidth,theme:{dark=!1,global:{colors={},font={family:""}}={colors:{brand:"",text:{}},font:{family:""}}}={dark:!1,global:{colors:{brand:"",text:{}},font:{family:""}}},xAxisLabel="x-axis",yAxisDomain,yAxisLabel="y-axis"}=props,{t}=useTranslation("components"),backgroundColor=dark?colors["dark-3"]:"white",xMax=parentWidth-left-right,yMax=parentHeight-bottom-top,xScale=(0,band.A)({domain:data.map(datum=>datum.label),range:[0,xMax],round:!0,padding}),yDataExtent=(0,extent.A)(data.map(datum=>datum.value)),yDomain=yAxisDomain||yDataExtent,yScale=(0,linear.A)({domain:yDomain,range:[yMax,0],round:!0}).nice(),xScaleTicks=xScale.domain(),yScaleTicks=yScale.domain(),axisColor=dark?colors.text.dark:colors.text.light;return(0,jsx_runtime.jsxs)(Chart_Chart,{height:parentHeight+top,ref,width:parentWidth,children:[(0,jsx_runtime.jsx)(Background_Background,{fill:backgroundColor}),(0,jsx_runtime.jsx)(Group.A,{"aria-label":t("SubjectViewer.BarChartViewer.chartLabel"),focusable:!0,left,role:"list",tabIndex:"0",top,children:(0,jsx_runtime.jsx)(Bars_Bars,{data,xAxisLabel,xScale,yAxisLabel,yScale,yMax})}),(0,jsx_runtime.jsxs)(BarChartViewer_StyledGroup,{left,top,children:[(0,jsx_runtime.jsx)(AxisLeft.A,{label:yAxisLabel,labelClassName:"Axis__label",labelProps:{fill:axisColor,textAnchor:"middle",fontSize:12,fontFamily:font.family},left:0,role:"presentation",scale:yScale,stroke:axisColor,ticks:yScaleTicks.length,tickStroke:axisColor,tickLabelProps:(value,index)=>({fill:axisColor,textAnchor:"end",fontSize:10,fontFamily:font.family,dx:"-0.25em",dy:"0.25em"}),top:0}),(0,jsx_runtime.jsx)(AxisBottom.A,{label:xAxisLabel,labelClassName:"Axis__label",labelProps:{fill:axisColor,textAnchor:"middle",fontSize:12,fontFamily:font.family},left:0,role:"presentation",scale:xScale,stroke:axisColor,ticks:xScaleTicks.length,tickStroke:axisColor,tickLabelProps:(value,index)=>({fill:axisColor,textAnchor:"middle",fontSize:10,fontFamily:font.family}),top:yMax})]})]})});BarChartViewer.propTypes={barStyles:prop_types_default().shape({padding:prop_types_default().number}),data:prop_types_default().arrayOf(prop_types_default().shape({color:prop_types_default().string,label:prop_types_default().string.isRequired,value:prop_types_default().number.isRequired})).isRequired,margin:prop_types_default().shape({bottom:prop_types_default().number,left:prop_types_default().number,right:prop_types_default().number,top:prop_types_default().number}),parentHeight:prop_types_default().number.isRequired,parentWidth:prop_types_default().number.isRequired,theme:prop_types_default().object,xAxisLabel:prop_types_default().string,yAxisLabel:prop_types_default().string};const BarChartViewer_BarChartViewer=(0,styled_components_browser_esm.withTheme)((0,withParentSize.A)(BarChartViewer));BarChartViewer.__docgenInfo={description:"",methods:[],displayName:"BarChartViewer",props:{barStyles:{description:"",type:{name:"shape",value:{padding:{name:"number",required:!1}}},required:!1},data:{description:"",type:{name:"arrayOf",value:{name:"shape",value:{color:{name:"string",required:!1},label:{name:"string",required:!0},value:{name:"number",required:!0}}}},required:!0},margin:{description:"",type:{name:"shape",value:{bottom:{name:"number",required:!1},left:{name:"number",required:!1},right:{name:"number",required:!1},top:{name:"number",required:!1}}},required:!1},parentHeight:{description:"",type:{name:"number"},required:!0},parentWidth:{description:"",type:{name:"number"},required:!0},theme:{description:"",type:{name:"object"},required:!1},xAxisLabel:{description:"",type:{name:"string"},required:!1},yAxisLabel:{description:"",type:{name:"string"},required:!1}}};var zip=__webpack_require__("../../node_modules/lodash/zip.js"),zip_default=__webpack_require__.n(zip),d3=__webpack_require__("../../node_modules/d3/index.js");function SVGImage_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function SVGImage_defineProperty(e,r,t){return(r=function SVGImage_toPropertyKey(t){var i=function SVGImage_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var DraggableImage=(0,styled_components_browser_esm.default)(draggable_draggable("image")).withConfig({displayName:"SVGImage__DraggableImage",componentId:"sc-samqbd-0"})(["cursor:move;"]);function SVGImageWithRef(_ref,ref){var{invert=!1,move=!1,naturalHeight,naturalWidth,onDrag=()=>!0,src,subjectID}=_ref;document.getElementById("svg-invert-filter")||document.body.insertAdjacentHTML("afterbegin",'<svg style="position: fixed; right: 100%; top: 100%; visibility: hidden;">\n    <defs>\n      <filter id="svg-invert-filter" color-interpolation-filters="sRGB">\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="1 0"/>\n          <feFuncG type="table" tableValues="1 0"/>\n          <feFuncB type="table" tableValues="1 0"/>\n        </feComponentTransfer>\n      </filter>\n    </defs>\n  </svg>');var props={"aria-label":"Subject ".concat(subjectID),draggable:!1,filter:invert?'url("#svg-invert-filter")':void 0,focusable:!0,height:naturalHeight,href:src,onPointerDown:e=>e.preventDefault(),role:"img",tabIndex:0,width:naturalWidth},ImageComponent=move?DraggableImage:"image";return move&&(props.dragMove=onDrag),(0,jsx_runtime.jsx)(ImageComponent,function SVGImage_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SVGImage_ownKeys(Object(t),!0).forEach(function(r){SVGImage_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SVGImage_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({ref},props))}var SVGImage=(0,react.forwardRef)(SVGImageWithRef);SVGImage.propTypes={invert:prop_types.PropTypes.bool,move:prop_types.PropTypes.bool,naturalHeight:prop_types.PropTypes.number.isRequired,naturalWidth:prop_types.PropTypes.number.isRequired,onDrag:prop_types.PropTypes.func,src:prop_types.PropTypes.string.isRequired,subjectID:prop_types.PropTypes.string.isRequired};const SVGImage_SVGImage=SVGImage;SVGImage.__docgenInfo={description:"",methods:[],displayName:"SVGImage",props:{invert:{description:"",type:{name:"bool"},required:!1},move:{description:"",type:{name:"bool"},required:!1},naturalHeight:{description:"",type:{name:"number"},required:!0},naturalWidth:{description:"",type:{name:"number"},required:!0},onDrag:{description:"",type:{name:"func"},required:!1},src:{description:"",type:{name:"string"},required:!0},subjectID:{description:"",type:{name:"string"},required:!0}}};var localPoint=__webpack_require__("../../node_modules/@visx/event/esm/localPoint.js"),Zoom=__webpack_require__("../../node_modules/@visx/zoom/esm/Zoom.js"),throttle=__webpack_require__("../../node_modules/lodash/throttle.js"),throttle_default=__webpack_require__.n(throttle),use_gesture_react_esm=__webpack_require__("../../node_modules/@use-gesture/react/dist/use-gesture-react.esm.js"),ZoomEventLayer_excluded=["disabled","height","left","onDoubleClick","onKeyDown","onPointerEnter","onPointerDown","onPointerMove","onPointerUp","onPointerLeave","onWheel","panning","top","width","children"];function ZoomEventLayer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ZoomEventLayer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ZoomEventLayer_ownKeys(Object(t),!0).forEach(function(r){ZoomEventLayer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZoomEventLayer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ZoomEventLayer_defineProperty(e,r,t){return(r=function ZoomEventLayer_toPropertyKey(t){var i=function ZoomEventLayer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ZoomEventLayer_StyledGroup=styled_components_browser_esm.default.g.withConfig({displayName:"ZoomEventLayer__StyledGroup",componentId:"sc-1guzy1r-0"})([""," overscroll-behavior:none;&:focus{","}"],props=>props.$panning?(0,styled_components_browser_esm.css)(["cursor:move;"]):(0,styled_components_browser_esm.css)(["cursor:inherit;"]),props=>(0,styled_components_browser_esm.css)(["outline-color:",";border:solid thick ",";box-shadow:0 0 4px 4px ",";"],props.$focusColor,props.$focusColor,props.$focusColor)),ZoomEventLayer_DEFAULT_HANDLER=()=>!0;function ZoomEventLayer(_ref){var{disabled=!1,height,left=0,onDoubleClick=ZoomEventLayer_DEFAULT_HANDLER,onKeyDown=ZoomEventLayer_DEFAULT_HANDLER,onPointerEnter=ZoomEventLayer_DEFAULT_HANDLER,onPointerDown=ZoomEventLayer_DEFAULT_HANDLER,onPointerMove=ZoomEventLayer_DEFAULT_HANDLER,onPointerUp=ZoomEventLayer_DEFAULT_HANDLER,onPointerLeave=ZoomEventLayer_DEFAULT_HANDLER,onWheel=ZoomEventLayer_DEFAULT_HANDLER,panning=!1,top=0,width,children}=_ref,rest=function ZoomEventLayer_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function ZoomEventLayer_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,ZoomEventLayer_excluded),root=(0,react.useRef)(null),theme=(0,styled_components_browser_esm.useTheme)(),focusColor=null==theme?void 0:theme.global.colors[theme.global.colors.focus],pointerEvents=disabled?"none":"all",handleWheel=disabled?ZoomEventLayer_DEFAULT_HANDLER:_ref2=>{var{event}=_ref2;return onWheel(event)};(0,use_gesture_react_esm.useWheel)(handleWheel,{eventOptions:{passive:!1},target:root});var zoomEventHandlers=disabled?{}:{onDoubleClick,onPointerDown:function handlePointerFocus(event){var _event$target,_event$target2,className=null===(_event$target=event.target)||void 0===_event$target?void 0:_event$target.className,baseVal=null==className?void 0:className.baseVal;return!(null!=baseVal?baseVal:className).includes("StyledLayer")&&(null===(_event$target2=event.target)||void 0===_event$target2||_event$target2.focus({preventScroll:!0}),onPointerDown(event))},onPointerEnter,onPointerMove,onPointerUp,onPointerLeave};return(0,jsx_runtime.jsx)(ZoomEventLayer_StyledGroup,ZoomEventLayer_objectSpread(ZoomEventLayer_objectSpread(ZoomEventLayer_objectSpread({ref:root,"data-testid":"zoom-layer",fill:"transparent",$focusColor:focusColor,height,onKeyDown,$panning:panning?"true":void 0,pointerEvents,transform:"translate(".concat(left,", ").concat(top,")"),width},zoomEventHandlers),rest),{},{children}))}ZoomEventLayer.propTypes={disabled:prop_types_default().bool,height:prop_types_default().number.isRequired,left:prop_types_default().number,onDoubleClick:prop_types_default().func,onKeyDown:prop_types_default().func,onPointerDown:prop_types_default().func.isRequired,onPointerEnter:prop_types_default().func,onPointerMove:prop_types_default().func.isRequired,onPointerUp:prop_types_default().func.isRequired,onPointerLeave:prop_types_default().func.isRequired,onWheel:prop_types_default().func,panning:prop_types_default().bool,theme:prop_types_default().object,top:prop_types_default().number,width:prop_types_default().number.isRequired};const ZoomEventLayer_ZoomEventLayer=ZoomEventLayer;var defaultZoomConfig={direction:"both",minZoom:1,maxZoom:10,onWheelThrottleWait:0,zoomInValue:1.2,zoomOutValue:.8},VisXZoom_DEFAULT_HANDLER=()=>!0;function VisXZoom(_ref){var{allowsScrolling=!1,children:_children,constrain,height,left=0,move=!0,onFirstScroll=VisXZoom_DEFAULT_HANDLER,onKeyDown,panning=!1,setOnPan=VisXZoom_DEFAULT_HANDLER,setOnZoom=VisXZoom_DEFAULT_HANDLER,top=0,width,zoomConfiguration=defaultZoomConfig,zooming=!1}=_ref,{onKeyZoom}=useKeyZoom(),zoomRef=(0,react.useRef)(null),hasScrolledRef=(0,react.useRef)(!1);(0,react.useEffect)(function setCallbacks(){setOnPan(handleToolbarPan),setOnZoom(handleToolbarZoom)},[setOnPan,setOnZoom]);var wheelHandler=zooming?e=>{var _zoomRef$current;return null===(_zoomRef$current=zoomRef.current)||void 0===_zoomRef$current?void 0:_zoomRef$current.handleWheel(e)}:VisXZoom_DEFAULT_HANDLER,throttledWheelHandler=throttle_default()(wheelHandler,null==zoomConfiguration?void 0:zoomConfiguration.onWheelThrottleWait);function onWheel(event){if(!allowsScrolling)return event.preventDefault(),throttledWheelHandler(event);if(!allowsScrolling||event.ctrlKey||hasScrolledRef.current||(hasScrolledRef.current=!0,onFirstScroll()),event.ctrlKey){var scrollbarWidth=window.innerWidth-document.documentElement.clientWidth;return document.body.style.overflow="hidden",scrollbarWidth&&(document.body.style.paddingRight="".concat(scrollbarWidth,"px")),hasScrolledRef.current=!0,event.preventDefault(),throttledWheelHandler(event)}document.body.style.overflow="",document.body.style.paddingRight=""}function handleToolbarPan(xMultiplier,yMultiplier){!function onPan(xMultiplier,yMultiplier){var{transformMatrix:{translateX,translateY}}=zoomRef.current,panDistance=20,newTransformation={translateX:translateX-xMultiplier*panDistance,translateY:translateY-yMultiplier*panDistance};zoomRef.current.setTranslate(newTransformation)}(xMultiplier,yMultiplier)}function handleToolbarZoom(type){var doZoom={zoomin:zoomIn,zoomout:zoomOut,zoomto:zoomReset};doZoom[type]&&doZoom[type]()}function zoomIn(){if(zooming){var{zoomInValue}=zoomConfiguration;zoomRef.current.scale({scaleX:zoomInValue,scaleY:zoomInValue})}}function zoomOut(){if(zooming){var{zoomOutValue}=zoomConfiguration;zoomRef.current.scale({scaleX:zoomOutValue,scaleY:zoomOutValue})}}function zoomReset(){zooming&&zoomRef.current.reset()}function onDoubleClick(event){zooming?function zoomToPoint(event,zoomDirection){var{zoomInValue,zoomOutValue}=zoomConfiguration,zoomValue="in"===zoomDirection?zoomInValue:zoomOutValue,point=(0,localPoint.A)(event);zoomRef.current.scale({scaleX:zoomValue,scaleY:zoomValue,point})}(event,"in"):event.preventDefault()}function onPointerEnter(){if(zooming&&!allowsScrolling){var scrollbarWidth=window.innerWidth-document.documentElement.clientWidth;document.body.style.paddingRight="".concat(scrollbarWidth,"px"),document.body.style.overflow="hidden"}}function onPointerLeave(){zooming&&(document.body.style.overflow="",document.body.style.paddingRight=""),(zoomRef.current.isDragging||panning)&&zoomRef.current.dragEnd()}return(0,jsx_runtime.jsx)(Zoom.A,{constrain,height,left,scaleXMin:zoomConfiguration.minZoom,scaleXMax:zoomConfiguration.maxZoom,scaleYMin:zoomConfiguration.minZoom,scaleYMax:zoomConfiguration.maxZoom,top,width,wheelDelta:function wheelDelta(event){var zoomValue=-event.deltaY>0?1.1:.9;return{scaleX:zoomValue,scaleY:zoomValue}},children:_zoom=>(zoomRef.current=_zoom,(0,jsx_runtime.jsx)(ZoomEventLayer_ZoomEventLayer,{disabled:!zooming||!move,focusable:!0,height,onDoubleClick,onKeyDown:onKeyDown||onKeyZoom,onPointerEnter,onPointerDown:panning?_zoom.dragStart:VisXZoom_DEFAULT_HANDLER,onPointerMove:panning?_zoom.dragMove:VisXZoom_DEFAULT_HANDLER,onPointerUp:panning?_zoom.dragEnd:VisXZoom_DEFAULT_HANDLER,onPointerLeave,onWheel,panning,tabIndex:0,width,children:_children({initialTransformMatrix:_zoom.initialTransformMatrix,transformMatrix:_zoom.transformMatrix,transform:_zoom.toString(),move})}))})}VisXZoom.propTypes={allowsScrolling:prop_types_default().bool,constrain:prop_types_default().func,height:prop_types_default().number.isRequired,left:prop_types_default().number,move:prop_types_default().bool,onKeyDown:prop_types_default().func,onFirstScroll:prop_types_default().func,panning:prop_types_default().bool,setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,top:prop_types_default().number,width:prop_types_default().number.isRequired,zoomConfiguration:prop_types_default().shape({direction:prop_types_default().oneOf(["both","x","y"]),minZoom:prop_types_default().number,maxZoom:prop_types_default().number,zoomInValue:prop_types_default().number,zoomOutValue:prop_types_default().number}),zooming:prop_types_default().bool,children:prop_types_default().func.isRequired};const VisXZoom_VisXZoom=(0,mobxreact_esm.PA)(VisXZoom);function addAxisLabel(selection,className,text,axisStyle){return selection.append("text").attr("class",className).style("font-size",axisStyle.fontSize).style("font-family",axisStyle.fontFamily).style("fill",axisStyle.color).text(text)}function addRemoveAnnotationButton_cancelEvent(event){event.stopPropagation}function addRemoveAnnotationButton(selection){var onClick=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,g=selection.append("g").attr("class","remove-button").attr("transform","translate(0, 0)").style("cursor","pointer");return g.append("circle").attr("fill","#4cc").attr("r",10).attr("cx",0).attr("cy",10).style("pointer-events","all").on("mousedown touchstart",addRemoveAnnotationButton_cancelEvent).on("click",onClick),g.append("path").attr("stroke","#eee").attr("stroke-width","3").attr("d","M ".concat(-4," ").concat(6," L ").concat(4," ").concat(14," M ").concat(4," ").concat(6," L ").concat(-4," ").concat(14," ")).style("pointer-events","none"),g}function addBackgroundLayer(selection,chartStyle){return selection.append("rect").attr("class","deco background-layer").attr("width","100%").attr("height","100%").attr("fill",chartStyle.background)}function addBorderLayer(selection){return selection.append("rect").attr("class","deco border-layer").attr("width","100%").attr("height","100%").attr("fill","none").attr("stroke","#444").attr("stroke-width","2")}function addDataLayer(selection){var id=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return selection.append("g").attr("class","data-layer").attr("clip-path","url(#data-mask-".concat(id,")"))}function addDataMask(selection,outerMargin){var id=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return selection.append("clipPath").attr("id","data-mask-".concat(id)).append("rect").attr("class","data-mask").attr("transform","translate(".concat(outerMargin,", ").concat(outerMargin,")")).attr("width",0).attr("height",0)}function addInterfaceLayer(selection){return selection.append("rect").attr("class","interface-layer").attr("width","100%").attr("height","100%").style("fill","none").style("pointer-events","all").style("cursor","move")}function setDataPointStyle(selection,chartStyle){return selection.attr("class","data-point").attr("r",chartStyle.dataPointSize).attr("fill",chartStyle.color)}var LightCurveViewer_d3={axisRight:d3.eH3,axisTop:d3.tlR,brushX:d3.n55,scaleLinear:d3.m4Y,select:d3.Ltv,zoom:d3.s_O,zoomIdentity:d3.GSI,zoomTransform:d3._V},DEFAULT_CHART_STYLE={color:"#eff2f5",background:"#003941",dataPointSize:"1.5",fontFamily:"inherit",fontSize:"0.75rem"};function drawFeedbackBrushes(d3annotationsLayer,repositionBrush,feedbackBrushes){feedbackBrushes.forEach(feedbackBrush=>{feedbackBrush.brush=(0,d3.n55)()}),d3annotationsLayer.selectAll(".brush").data(feedbackBrushes,d=>d.id).enter().insert("g",".brush").attr("class","brush").attr("id",brush=>"brush-".concat(brush.id)).each(function applyBrushLogic(feedbackBrush){feedbackBrush.brush((0,d3.Ltv)(this))}),feedbackBrushes.forEach(feedbackBrush=>{var d3brush=d3annotationsLayer.select("#brush-".concat(feedbackBrush.id));d3brush.attr("class","brush").selectAll(".selection").style("fill",()=>!0===feedbackBrush.success?"green":!1===feedbackBrush.success?"red":"white"),repositionBrush(feedbackBrush,d3brush)})}class LightCurveViewer extends react.Component{componentDidMount(){this.initChart(),this.props.setOnZoom(this.handleToolbarZoom),this.props.setOnPan(this.pan),this.drawChart()}componentDidUpdate(prevProps){var dataChanged=this.props.dataPoints!==prevProps.dataPoints;this.props.currentTask&&this.props.currentTask.taskKey,prevProps.currentTask&&prevProps.currentTask.taskKey;dataChanged&&(this.clearChart(),this.drawChart(!1)),prevProps.interactionMode!==this.props.interactionMode&&this.updateInteractionMode(this.props.interactionMode)}componentWillUnmount(){var _this$svgContainer;this.zoom&&this.zoom.on("zoom",null),this.d3svg&&this.d3svg.on("zoom",null),null===(_this$svgContainer=this.svgContainer)||void 0===_this$svgContainer||null===(_this$svgContainer=_this$svgContainer.current)||void 0===_this$svgContainer||_this$svgContainer.replaceChildren()}clearChart(){this.d3dataLayer.selectAll(".data-point").remove(),this.resetBrushes(),this.zoomTo(1)}drawChart(){var _this$svgContainer2,shouldAnimate=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],{chartStyle=DEFAULT_CHART_STYLE,dataExtent,dataPoints,feedbackBrushes,innerMargin=30,outerMargin=10}=this.props,container=null===(_this$svgContainer2=this.svgContainer)||void 0===_this$svgContainer2?void 0:_this$svgContainer2.current,height=null==container?void 0:container.getBoundingClientRect().height,width=null==container?void 0:container.getBoundingClientRect().width;if(height&&width){var _dataExtent$x,_this$props$dataExten;this.zoom.translateExtent([[-outerMargin,0],[width+outerMargin,0]]),this.xScale.domain(null!==(_dataExtent$x=dataExtent.x)&&void 0!==_dataExtent$x?_dataExtent$x:[-1,1]).range([0+innerMargin,width-innerMargin]),this.yScale.domain(null!==(_this$props$dataExten=this.props.dataExtent.y)&&void 0!==_this$props$dataExten?_this$props$dataExten:[-1,1]).range([height-innerMargin,0+innerMargin]),this.updatePresentation(width,height);var points=this.d3dataLayer.selectAll(".data-point").data(dataPoints);points.enter().append("circle").call(setDataPointStyle,chartStyle),points.exit().remove(),this.updateDataPoints(shouldAnimate),this.updatePresentation(width,height),this.props.feedback?(this.updateInteractionMode("move"),this.disableBrushEvents(),drawFeedbackBrushes(this.d3annotationsLayer,this.repositionBrush,feedbackBrushes)):(this.updateAnnotationBrushes(),this.initBrushes())}}initBrushes(){this.annotationBrushes.length||(this.loadBrushesFromAnnotations(),this.createAnnotationBrush(),this.updateAnnotationBrushes())}resetBrushes(){this.annotationBrushes=[],this.d3annotationsLayer.selectAll(".brush").remove()}loadBrushesFromAnnotations(){var annotationValues=this.getAnnotationValues();null==annotationValues||annotationValues.forEach(data=>{var brush=this.createAnnotationBrush();brush.minX=data.x-data.width/2,brush.maxX=data.x+data.width/2,brush.zoomLevelOnCreation=data.zoomLevelOnCreation})}saveBrushesToAnnotations(){var{addAnnotation,currentTask,toolIndex}=this.props;if(this.isCurrentTaskValidForAnnotation()){var annotations=this.annotationBrushes.filter(raw=>void 0!==raw.minX&&void 0!==raw.maxX&&null!==raw.minX&&null!==raw.maxX).map(raw=>{var x=(raw.minX+raw.maxX)/2,width=Math.abs(raw.maxX-raw.minX),toolType=currentTask.tools[toolIndex].type;return{x,width,tool:toolIndex,zoomLevelOnCreation:raw.zoomLevelOnCreation,toolType}});null==addAnnotation||addAnnotation(currentTask,annotations)}}createAnnotationBrush(){var defaultBrush=this.getDefaultBrush(),newAnnotationBrush={id:defaultBrush&&defaultBrush.id+1||0,brush:LightCurveViewer_d3.brushX().on("start",this.onAnnotationBrushStart).on("brush",this.onAnnotationBrushBrushed).on("end",this.onAnnotationBrushEnd),minX:void 0,maxX:void 0,zoomLevelOnCreation:void 0};return this.annotationBrushes.push(newAnnotationBrush),newAnnotationBrush}removeAnnotationBrush(event,annotationBrush){this.annotationBrushes=this.annotationBrushes.filter(ab=>ab.id!==annotationBrush.id),this.updateAnnotationBrushes(),this.saveBrushesToAnnotations()}disableBrushEvents(){this.annotationBrushes.forEach(annotationBrush=>{annotationBrush.brush.on("start",null).on("brush",null).on("end",null)})}enableBrushEvents(){this.annotationBrushes.forEach(annotationBrush=>{annotationBrush.brush.on("start",this.onAnnotationBrushStart).on("brush",this.onAnnotationBrushBrushed).on("end",this.onAnnotationBrushEnd)})}getDefaultBrush(){return this.annotationBrushes.length&&this.annotationBrushes[this.annotationBrushes.length-1]}onAnnotationBrushStart(){}onAnnotationBrushBrushed(){}onAnnotationBrushEnd(_ref,annotationBrush){var{selection}=_ref,{enableMove}=this.props,brushSelection=selection;if(!this.isCurrentTaskValidForAnnotation())return this.disableBrushEvents(),this.d3annotationsLayer.select(".brush").call(annotationBrush.brush.move,null),this.enableBrushEvents(),void(null==enableMove||enableMove());var currentTransform=this.getCurrentTransform(),dataMinX=brushSelection&&brushSelection[0],dataMaxX=brushSelection&&brushSelection[1];annotationBrush.minX=dataMinX&&currentTransform.rescaleX(this.xScale).invert(dataMinX),annotationBrush.maxX=dataMaxX&&currentTransform.rescaleX(this.xScale).invert(dataMaxX),void 0===annotationBrush.zoomLevelOnCreation&&(annotationBrush.zoomLevelOnCreation=this.getCurrentTransform().k),this.getDefaultBrush()===annotationBrush&&brushSelection&&this.createAnnotationBrush(),this.updateAnnotationBrushes(),this.saveBrushesToAnnotations()}getAnnotationValues(){var{annotation}=this.props;return annotation&&this.isCurrentTaskValidForAnnotation()&&Array.from(annotation.value)||[]}getCurrentTransform(){return this.d3interfaceLayer&&LightCurveViewer_d3.zoomTransform(this.d3interfaceLayer.node())||LightCurveViewer_d3.zoomIdentity}handleToolbarZoom(type,zoomValue){var doZoom={zoomin:this.zoomIn,zoomout:this.zoomOut,zoomto:this.zoomTo};doZoom[type]&&doZoom[type](zoomValue)}doZoom(){this.updateDataPoints(),this.updatePresentation(),this.props.feedback?(this.updateInteractionMode("move"),this.disableBrushEvents(),drawFeedbackBrushes(this.d3annotationsLayer,this.repositionBrush,this.props.feedbackBrushes)):this.updateAnnotationBrushes()}zoomIn(){this.zoom.scaleBy(this.d3interfaceLayer.transition().duration(100),1.2)}zoomOut(){this.zoom.scaleBy(this.d3interfaceLayer.transition().duration(100),.8)}zoomTo(zoomValue){this.zoom.scaleTo(this.d3interfaceLayer.transition().duration(100),zoomValue)}pan(xMultiplier){this.zoom.translateBy(this.d3interfaceLayer.transition().duration(100),20*-xMultiplier,0)}initChart(){var _this$svgContainer3,{axisXLabel="Days",axisYLabel="Brightness",chartStyle=DEFAULT_CHART_STYLE,id,interactionMode="annotate",minZoom=1,maxZoom=10,outerMargin=10}=this.props,container=null===(_this$svgContainer3=this.svgContainer)||void 0===_this$svgContainer3?void 0:_this$svgContainer3.current;this.d3svg=LightCurveViewer_d3.select(container).style("cursor","crosshair"),this.xScale=LightCurveViewer_d3.scaleLinear(),this.yScale=LightCurveViewer_d3.scaleLinear(),this.d3svg.call(addBackgroundLayer,chartStyle);var uniqueId=id||Math.floor(1e6*Math.random());this.d3svg.call(addDataLayer,uniqueId),this.d3dataLayer=this.d3svg.select(".data-layer"),this.d3svg.call(addDataMask,outerMargin,uniqueId),this.d3dataMask=this.d3svg.select(".data-mask"),this.xAxis=LightCurveViewer_d3.axisTop(this.yScale),this.yAxis=LightCurveViewer_d3.axisRight(this.yScale),function addAxis(selection,chartStyle,xAxis,yAxis,axisXLabel,axisYLabel){var axisLayer=selection.append("g").attr("class","axis-layer");return axisLayer.append("g").attr("class","x-axis").attr("color",chartStyle.color).call(xAxis),axisLayer.append("g").attr("class","y-axis").attr("color",chartStyle.color).call(yAxis),axisLayer.call(addAxisLabel,"x-axis-label",axisXLabel,chartStyle),axisLayer.call(addAxisLabel,"y-axis-label",axisYLabel,chartStyle),axisLayer}(this.d3svg,chartStyle,this.xAxis,this.yAxis,axisXLabel,axisYLabel),this.d3svg.call(addBorderLayer),this.zoom=LightCurveViewer_d3.zoom().scaleExtent([minZoom,maxZoom]).on("zoom",this.doZoom),this.d3svg.append("g").attr("class","annotations-layer"),this.d3annotationsLayer=this.d3svg.select(".annotations-layer"),this.d3svg.call(addInterfaceLayer),this.d3interfaceLayer=this.d3svg.select(".interface-layer"),this.d3interfaceLayer.call(this.zoom),this.updateInteractionMode(interactionMode)}updateInteractionMode(){var interactionMode=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.zoom&&this.d3interfaceLayer&&("annotate"===interactionMode?this.d3interfaceLayer.style("display","none"):"move"===interactionMode&&this.d3interfaceLayer.style("display","inline"))}isCurrentTaskValidForAnnotation(){return"dataVisAnnotation"===this.props.currentTask.type&&this.props.currentTask.tools.some(tool=>"graph2dRangeX"===tool.type)}updateAnnotationBrushes(){var annotationBrushes=this.annotationBrushes,defaultBrush=this.getDefaultBrush(),brushSelection=this.d3annotationsLayer.selectAll(".brush").data(annotationBrushes,d=>d.id);brushSelection.enter().insert("g",".brush").attr("class","brush").attr("id",brush=>"brush-".concat(brush.id)).each(function applyBrushLogic(annotationBrush){annotationBrush.brush(LightCurveViewer_d3.select(this))}).call(addRemoveAnnotationButton,this.removeAnnotationBrush),brushSelection.each(function disableInvisibleBrushOverlay(annotationBrush){LightCurveViewer_d3.select(this).attr("class","brush").selectAll(".overlay").style("pointer-events",()=>{var brush=annotationBrush.brush;return annotationBrush.id===defaultBrush.id&&void 0!==brush?"all":"none"})}),brushSelection.exit().remove(),this.disableBrushEvents(),this.annotationBrushes.forEach(annotationBrush=>{var d3brush=this.d3annotationsLayer.select("#brush-".concat(annotationBrush.id));annotationBrush.minX&&annotationBrush.maxX?this.repositionBrush(annotationBrush,d3brush):d3brush.select(".remove-button").attr("visibility","hidden")}),this.enableBrushEvents()}repositionBrush(brush,d3brush){var currentTransform=this.getCurrentTransform(),minXonScreen=currentTransform.rescaleX(this.xScale)(brush.minX),maxXonScreen=currentTransform.rescaleX(this.xScale)(brush.maxX),midXonScreen=currentTransform.rescaleX(this.xScale)((brush.minX+brush.maxX)/2);d3brush.call(brush.brush.move,[minXonScreen,maxXonScreen]),d3brush.select(".remove-button").attr("visibility","visible").attr("transform","translate(".concat(midXonScreen,", 0)"))}updateDataPoints(){var shouldAnimate=arguments.length>0&&void 0!==arguments[0]&&arguments[0],currentTransform=this.getCurrentTransform(),dataPoints=this.d3dataLayer.selectAll(".data-point");shouldAnimate?dataPoints.transition().attr("cx",d=>currentTransform.rescaleX(this.xScale)(d[0])).attr("cy",d=>this.yScale(d[1])):dataPoints.attr("cx",d=>currentTransform.rescaleX(this.xScale)(d[0])).attr("cy",d=>this.yScale(d[1]))}updatePresentation(width,height){var{chartStyle=DEFAULT_CHART_STYLE,outerMargin=10}=this.props,currentTransform=this.getCurrentTransform();this.updateScales(currentTransform),width&&height&&(this.repositionAxes(width,height),this.repositionAxisLabels(width,height,chartStyle),this.resizeDataMask(width,height,outerMargin))}updateScales(transform){this.xAxis.scale(transform.rescaleX(this.xScale)),this.d3svg.select(".x-axis").call(this.xAxis),this.yAxis.scale(this.yScale),this.d3svg.select(".y-axis").call(this.yAxis)}repositionAxes(width,height){this.d3svg.select(".x-axis").attr("transform","translate(0, ".concat(height,")")),this.d3svg.select(".y-axis").attr("transform","translate(0, 0)")}repositionAxisLabels(width,height,chartStyle){var{axisXOffsetX=-40,axisXOffsetY=-20,axisYOffsetX=20,axisYOffsetY=20}=this.props;this.d3svg.select(".x-axis-label").attr("transform","translate(".concat(width+axisXOffsetX,", ").concat(height+axisXOffsetY,")")),this.d3svg.select(".y-axis-label").attr("transform","translate(".concat(axisYOffsetX,", ").concat(axisYOffsetY,")"))}resizeDataMask(width,height,margin){this.d3dataMask.attr("width",width-2*margin).attr("height",height-2*margin)}render(){return(0,jsx_runtime.jsx)(Chart_Chart,{className:"light-curve-viewer",focusable:!0,onKeyDown:this.props.onKeyDown,tabIndex:0,ref:this.svgContainer,style:{touchAction:"pinch-zoom"}})}constructor(props){super(props),this.svgContainer=props.forwardRef||(0,react.createRef)(),this.d3annotationsLayer=null,this.d3dataMask=null,this.d3dataLayer=null,this.d3interfaceLayer=null,this.d3svg=null,this.zoom=null,this.xScale=null,this.yScale=null,this.xAxis=null,this.yAxis=null,this.annotationBrushes=[],this.doZoom=this.doZoom.bind(this),this.drawChart=this.drawChart.bind(this),this.removeAnnotationBrush=this.removeAnnotationBrush.bind(this),this.onAnnotationBrushStart=this.onAnnotationBrushStart.bind(this),this.onAnnotationBrushBrushed=this.onAnnotationBrushBrushed.bind(this),this.onAnnotationBrushEnd=this.onAnnotationBrushEnd.bind(this),this.handleToolbarZoom=this.handleToolbarZoom.bind(this),this.repositionBrush=this.repositionBrush.bind(this),this.pan=this.pan.bind(this),this.zoomIn=this.zoomIn.bind(this),this.zoomOut=this.zoomOut.bind(this),this.zoomTo=this.zoomTo.bind(this)}}LightCurveViewer.propTypes={dataExtent:prop_types_default().shape({x:prop_types_default().arrayOf(prop_types_default().number),y:prop_types_default().arrayOf(prop_types_default().number)}),dataPoints:prop_types_default().arrayOf(prop_types_default().arrayOf(prop_types_default().number)),minZoom:prop_types_default().number,maxZoom:prop_types_default().number,innerMargin:prop_types_default().number,outerMargin:prop_types_default().number,axisXLabel:prop_types_default().string,axisXOffsetX:prop_types_default().number,axisXOffsetY:prop_types_default().number,axisYLabel:prop_types_default().string,axisYOffsetX:prop_types_default().number,axisYOffsetY:prop_types_default().number,chartStyle:prop_types_default().shape({color:prop_types_default().string,background:prop_types_default().string,dataPointSize:prop_types_default().string,fontFamily:prop_types_default().string,fontSize:prop_types_default().string}),id:prop_types_default().number,interactionMode:prop_types_default().oneOf(["annotate","move"]),setOnZoom:prop_types_default().func.isRequired,onKeyDown:prop_types_default().func};const LightCurveViewer_LightCurveViewer=LightCurveViewer;LightCurveViewer.__docgenInfo={description:"",methods:[{name:"clearChart",docblock:null,modifiers:[],params:[],returns:null},{name:"drawChart",docblock:null,modifiers:[],params:[],returns:null},{name:"initBrushes",docblock:null,modifiers:[],params:[],returns:null},{name:"resetBrushes",docblock:null,modifiers:[],params:[],returns:null},{name:"loadBrushesFromAnnotations",docblock:null,modifiers:[],params:[],returns:null},{name:"saveBrushesToAnnotations",docblock:null,modifiers:[],params:[],returns:null},{name:"createAnnotationBrush",docblock:null,modifiers:[],params:[],returns:null},{name:"removeAnnotationBrush",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null},{name:"annotationBrush",optional:!1,type:null}],returns:null},{name:"disableBrushEvents",docblock:null,modifiers:[],params:[],returns:null},{name:"enableBrushEvents",docblock:null,modifiers:[],params:[],returns:null},{name:"getDefaultBrush",docblock:null,modifiers:[],params:[],returns:null},{name:"onAnnotationBrushStart",docblock:null,modifiers:[],params:[],returns:null},{name:"onAnnotationBrushBrushed",docblock:null,modifiers:[],params:[],returns:null},{name:"onAnnotationBrushEnd",docblock:null,modifiers:[],params:[{name:"_ref",optional:!1,type:null},{name:"annotationBrush",optional:!1,type:null}],returns:null},{name:"getAnnotationValues",docblock:null,modifiers:[],params:[],returns:null},{name:"getCurrentTransform",docblock:null,modifiers:[],params:[],returns:null},{name:"handleToolbarZoom",docblock:null,modifiers:[],params:[{name:"type",optional:!1,type:null},{name:"zoomValue",optional:!1,type:null}],returns:null},{name:"doZoom",docblock:null,modifiers:[],params:[],returns:null},{name:"zoomIn",docblock:null,modifiers:[],params:[],returns:null},{name:"zoomOut",docblock:null,modifiers:[],params:[],returns:null},{name:"zoomTo",docblock:null,modifiers:[],params:[{name:"zoomValue",optional:!1,type:null}],returns:null},{name:"pan",docblock:null,modifiers:[],params:[{name:"xMultiplier",optional:!1,type:null}],returns:null},{name:"initChart",docblock:null,modifiers:[],params:[],returns:null},{name:"updateInteractionMode",docblock:null,modifiers:[],params:[],returns:null},{name:"isCurrentTaskValidForAnnotation",docblock:null,modifiers:[],params:[],returns:null},{name:"updateAnnotationBrushes",docblock:null,modifiers:[],params:[],returns:null},{name:"repositionBrush",docblock:null,modifiers:[],params:[{name:"brush",optional:!1,type:null},{name:"d3brush",optional:!1,type:null}],returns:null},{name:"updateDataPoints",docblock:null,modifiers:[],params:[],returns:null},{name:"updatePresentation",docblock:null,modifiers:[],params:[{name:"width",optional:!1,type:null},{name:"height",optional:!1,type:null}],returns:null},{name:"updateScales",docblock:null,modifiers:[],params:[{name:"transform",optional:!1,type:null}],returns:null},{name:"repositionAxes",docblock:null,modifiers:[],params:[{name:"width",optional:!1,type:null},{name:"height",optional:!1,type:null}],returns:null},{name:"repositionAxisLabels",docblock:null,modifiers:[],params:[{name:"width",optional:!1,type:null},{name:"height",optional:!1,type:null},{name:"chartStyle",optional:!1,type:null}],returns:null},{name:"resizeDataMask",docblock:null,modifiers:[],params:[{name:"width",optional:!1,type:null},{name:"height",optional:!1,type:null},{name:"margin",optional:!1,type:null}],returns:null}],displayName:"LightCurveViewer",props:{dataExtent:{description:"",type:{name:"shape",value:{x:{name:"arrayOf",value:{name:"number"},required:!1},y:{name:"arrayOf",value:{name:"number"},required:!1}}},required:!1},dataPoints:{description:"",type:{name:"arrayOf",value:{name:"arrayOf",value:{name:"number"}}},required:!1},minZoom:{description:"",type:{name:"number"},required:!1},maxZoom:{description:"",type:{name:"number"},required:!1},innerMargin:{description:"",type:{name:"number"},required:!1},outerMargin:{description:"",type:{name:"number"},required:!1},axisXLabel:{description:"",type:{name:"string"},required:!1},axisXOffsetX:{description:"",type:{name:"number"},required:!1},axisXOffsetY:{description:"",type:{name:"number"},required:!1},axisYLabel:{description:"",type:{name:"string"},required:!1},axisYOffsetX:{description:"",type:{name:"number"},required:!1},axisYOffsetY:{description:"",type:{name:"number"},required:!1},chartStyle:{description:"",type:{name:"shape",value:{color:{name:"string",required:!1},background:{name:"string",required:!1},dataPointSize:{name:"string",required:!1},fontFamily:{name:"string",required:!1},fontSize:{name:"string",required:!1}}},required:!1},id:{description:"",type:{name:"number"},required:!1},interactionMode:{description:"",type:{name:"enum",value:[{value:"'annotate'",computed:!1},{value:"'move'",computed:!1}]},required:!1},setOnZoom:{description:"",type:{name:"func"},required:!0},onKeyDown:{description:"",type:{name:"func"},required:!1}}};var valid_url=__webpack_require__("../../node_modules/valid-url/index.js"),mimeTypeRe=/^[-\w+.]+\/[-\w+.]+$/;const locationValidator_locationValidator=function locationValidator(propValue,key,componentName,location,propFullName){var subjectLocation=propValue[key],{mimeType,url}=subjectLocation;if(!mimeTypeRe.test(mimeType)||!(0,valid_url.isUri)(url))return new Error("Invalid prop `"+propFullName+"` supplied to `"+componentName+"`. Validation failed.")};var LightCurveViewerContainer_DEFAULT_HANDLER=()=>!0;function LightCurveViewerContainer_storeMapper(classifierStore){var annotation,{subjectViewer:{enableAnnotate,enableMove,interactionMode,setOnPan,setOnZoom},classifications:{addAnnotation},workflowSteps:{activeStepTasks},subjects:{active:subject}}=classifierStore,[activeDataVisTask]=activeStepTasks.filter(task=>"dataVisAnnotation"===(null==task?void 0:task.type)),{activeToolIndex}=activeDataVisTask||{},latest=null==subject?void 0:subject.stepHistory.latest;return latest&&([annotation]=latest.annotations.filter(annotation=>activeDataVisTask&&annotation.task===activeDataVisTask.taskKey)),{activeDataVisTask,activeToolIndex,addAnnotation,annotation,enableAnnotate,enableMove,interactionMode,setOnPan,setOnZoom}}function LightCurveViewerContainer(_ref){var{data=null,feedback=!1,feedbackBrushes=[]}=_ref,{activeDataVisTask,activeToolIndex=0,addAnnotation=LightCurveViewerContainer_DEFAULT_HANDLER,annotation,enableAnnotate=LightCurveViewerContainer_DEFAULT_HANDLER,enableMove=LightCurveViewerContainer_DEFAULT_HANDLER,interactionMode="annotate",setOnPan=LightCurveViewerContainer_DEFAULT_HANDLER,setOnZoom=LightCurveViewerContainer_DEFAULT_HANDLER}=useStores(LightCurveViewerContainer_storeMapper),{onKeyZoom}=useKeyZoom(),{dataExtent,dataPoints}=(0,react.useMemo)(()=>{var dataExtent={x:[],y:[]},dataPoints=[];return null!=data&&data.x&&null!=data&&data.y&&(dataExtent={x:(0,extent.A)(data.x),y:(0,extent.A)(data.y)},dataPoints=zip_default()(data.x,data.y)),{dataExtent,dataPoints}},[data]);return data?(0,jsx_runtime.jsx)(Box.a,{width:"100%",height:"500px",children:(0,jsx_runtime.jsx)(LightCurveViewer_LightCurveViewer,{addAnnotation,annotation,currentTask:activeDataVisTask,dataExtent,dataPoints,enableAnnotate,enableMove,feedback,feedbackBrushes,interactionMode,onKeyDown:onKeyZoom,setOnPan,setOnZoom,toolIndex:activeToolIndex})}):null}LightCurveViewerContainer.propTypes={feedback:prop_types_default().bool,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator_locationValidator)}),loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func};const LightCurveViewer_LightCurveViewerContainer=(0,mobxreact_esm.PA)(LightCurveViewerContainer);var ParentSize=__webpack_require__("../../node_modules/@visx/responsive/esm/components/ParentSize.js"),zipWith=__webpack_require__("../../node_modules/lodash/zipWith.js"),zipWith_default=__webpack_require__.n(zipWith);function isThisMultipleDataSeries(data){return Array.isArray(data)}function getDataExtent(data){if(isThisMultipleDataSeries(data)){var xValues=flatten_default()(data.map(series=>series.seriesData.map(dataItem=>dataItem.x))),yValues=flatten_default()(data.map(series=>series.seriesData.map(dataItem=>dataItem.y)));return{x:(0,extent.A)(xValues),y:(0,extent.A)(yValues)}}return{x:(0,extent.A)(data.x),y:(0,extent.A)(data.y)}}function left(tickDirection,margin){return{inner:0,outer:margin.left}[tickDirection]}function utils_top(tickDirection,margin){return{inner:0,outer:margin.top}[tickDirection]}function xMin(_ref){var{tickDirection,padding}=_ref;return{inner:padding.left,outer:0}[tickDirection]}function xMax(_ref2){var{tickDirection,parentWidth,margin}=_ref2;return{inner:parentWidth-margin.left,outer:parentWidth-margin.left-margin.right}[tickDirection]}function yMin(_ref3){var{tickDirection,padding}=_ref3;return{inner:padding.bottom,outer:0}[tickDirection]}function yMax(_ref4){var{tickDirection,parentHeight,margin,padding}=_ref4;return{inner:parentHeight-padding.bottom,outer:parentHeight-margin.top-margin.bottom}[tickDirection]}function transformXScale(data,transformMatrix,rangeParameters){var dataExtent=getDataExtent(data),xRange=rangeParameters.invertAxes.x?[xMax(rangeParameters),xMin(rangeParameters)]:[xMin(rangeParameters),xMax(rangeParameters)],xScale=(0,linear.A)({domain:dataExtent.x,range:xRange});return(0,linear.A)({domain:[xScale.invert((xScale(dataExtent.x[0])-transformMatrix.translateX)/transformMatrix.scaleX),xScale.invert((xScale(dataExtent.x[1])-transformMatrix.translateX)/transformMatrix.scaleX)],range:xRange})}function transformYScale(data,transformMatrix,rangeParameters){var dataExtent=getDataExtent(data),yRange=rangeParameters.invertAxes.y?[yMin(rangeParameters),yMax(rangeParameters)]:[yMax(rangeParameters),yMin(rangeParameters)],yScale=(0,linear.A)({domain:dataExtent.y,range:yRange});return(0,linear.A)({domain:[yScale.invert((yScale(dataExtent.y[0])-transformMatrix.translateY)/transformMatrix.scaleY),yScale.invert((yScale(dataExtent.y[1])-transformMatrix.translateY)/transformMatrix.scaleY)],range:yRange})}function getZoomBackgroundColor(){var zooming=arguments.length>1&&void 0!==arguments[1]&&arguments[1],colors=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?zooming?colors["dark-5"]:colors["dark-1"]:zooming?colors["neutral-6"]:colors["light-1"]}function isDataSeriesHighlighted(){var{highlightedSeries,seriesOptions={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!((null==highlightedSeries?void 0:highlightedSeries.length)>=0&&seriesOptions.label)||highlightedSeries.includes(seriesOptions.label)}var GlyphCircle=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphCircle.js"),GlyphCross=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphCross.js"),GlyphDiamond=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphDiamond.js"),GlyphSquare=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphSquare.js"),GlyphStar=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphStar.js"),GlyphTriangle=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphTriangle.js"),GlyphWye=__webpack_require__("../../node_modules/@visx/glyph/esm/glyphs/GlyphWye.js");const getDataSeriesSymbol_glyphComponents={circle:GlyphCircle.A,cross:GlyphCross.A,diamond:GlyphDiamond.A,square:GlyphSquare.A,star:GlyphStar.A,triangle:GlyphTriangle.A,wye:GlyphWye.A};function getDataSeriesSymbol(_ref){var{seriesOptions={},seriesIndex=0}=_ref;if(null==seriesIndex)throw new TypeError("seriesIndex cannot be null or undefined");var glyphNameBySeriesIndex=Object.keys(getDataSeriesSymbol_glyphComponents)[seriesIndex];return getDataSeriesSymbol_glyphComponents[seriesOptions.glyph]||getDataSeriesSymbol_glyphComponents[glyphNameBySeriesIndex]}var Axis=__webpack_require__("../../node_modules/@visx/axis/esm/axis/Axis.js"),shapes_Line=__webpack_require__("../../node_modules/@visx/shape/esm/shapes/Line.js"),DEFAULT_AXIS={},DEFAULT_MARGIN={bottom:10,left:10,right:10,top:10},DEFAULT_PADDING={bottom:30,left:30,right:0,top:0};function InnerTickAxis(_ref){var{axis=DEFAULT_AXIS,color="black",fontSize=12,margin=DEFAULT_MARGIN,numTicks=10,padding=DEFAULT_PADDING,parentHeight,parentWidth,tickLength=5}=_ref,{label,orientation,scale}=axis,top={bottom:parentHeight-margin.top-tickLength,left:padding.top},labelTransform={bottom:"translate(".concat(parentWidth-(padding.left+margin.left),", ").concat(0-margin.right,")"),left:"translate(".concat(margin.left,", ").concat(margin.right,")")};return(0,jsx_runtime.jsx)(Axis.A,{hideAxisLine:!0,label,left:0,numTicks,orientation:{bottom:"bottom",left:"right"}[orientation],tickLength,top:top[orientation],scale,children:innerAxis=>(0,jsx_runtime.jsxs)(Group.A,{children:[innerAxis.ticks.map((tick,i)=>{var tickLabelTransform={left:"translate(".concat(tick.to.x+tickLength,", ").concat(tick.to.y+3,")"),bottom:"translate(".concat(tick.to.x,", ").concat(tick.to.y-margin.bottom,")")};return(0,jsx_runtime.jsxs)(Group.A,{className:"visx-axis-tick",children:[(0,jsx_runtime.jsx)(shapes_Line.A,{from:tick.from,to:tick.to,stroke:color}),(0,jsx_runtime.jsx)("text",{transform:tickLabelTransform[orientation],fontSize,textAnchor:{left:"start",bottom:"middle"}[orientation],fill:color,children:tick.formattedValue})]},"visx-tick-".concat(tick.value,"-").concat(i))}),(0,jsx_runtime.jsx)("text",{fill:color,fontSize,transform:labelTransform[orientation],children:innerAxis.label})]})})}InnerTickAxis.propTypes={axis:prop_types_default().shape({label:prop_types_default().string.isRequired,orientation:prop_types_default().oneOf(["bottom","left"]).isRequired,scale:prop_types_default().func.isRequired}),color:prop_types_default().string,fontSize:prop_types_default().number,margin:prop_types_default().shape({bottom:prop_types_default().number,left:prop_types_default().number,right:prop_types_default().number,top:prop_types_default().number}),numTicks:prop_types_default().number,padding:prop_types_default().shape({bottom:prop_types_default().number,left:prop_types_default().number,right:prop_types_default().number,top:prop_types_default().number}),parentHeight:prop_types_default().number.isRequired,parentWidth:prop_types_default().number.isRequired,tickLength:prop_types_default().number};const InnerTickAxis_InnerTickAxis=InnerTickAxis;function Axis_Axis(props){var axisColor,{axis={},className,color="",margin={bottom:10,left:10,right:10,top:10},padding={bottom:30,left:30,right:0,top:0},parentHeight,parentWidth,theme={global:{colors:{},font:{}}},tickDirection="outer",tickLength=5}=props;axisColor=color||(theme.dark?theme.global.colors["light-1"]:theme.global.colors["dark-5"]);var fontFamily=theme.global.font.family,{label,labelOffset,numTicks,orientation,scale}=axis;if("inner"===tickDirection)return(0,jsx_runtime.jsx)(InnerTickAxis_InnerTickAxis,{axis,color:axisColor,fontSize:12,margin,numTicks,padding,parentHeight,parentWidth,tickLength});if("left"===orientation)return(0,jsx_runtime.jsx)(AxisLeft.A,{axisClassName:className,label,labelClassName:"Axis__label",labelOffset,labelProps:{dy:"2.5em",fill:axisColor,fontSize:12,fontFamily},left:padding.left,numTicks,tickLabelProps:()=>({dx:"-0.25em",dy:"0.25em",fill:axisColor,fontSize:12,fontFamily,textAnchor:"end"}),tickStroke:axisColor,stroke:axisColor,scale,top:0});if("bottom"===orientation){var dx=scale.range()[1]/2;return(0,jsx_runtime.jsx)(AxisBottom.A,{axisClassName:className,label,labelClassName:"Axis__label",labelOffset,labelProps:{dx:-dx,fill:axisColor,fontSize:12,fontFamily},left:0,numTicks,tickLabelProps:()=>({dy:"0.25em",fill:axisColor,fontSize:12,fontFamily,textAnchor:"middle"}),tickStroke:axisColor,stroke:axisColor,scale,top:parentHeight-margin.bottom-margin.top})}return null}Axis_Axis.propTypes={axis:prop_types_default().shape({label:prop_types_default().string.isRequired,labelOffset:prop_types_default().number.isRequired,orientation:prop_types_default().oneOf(["bottom","left"]).isRequired,scale:prop_types_default().func.isRequired}),color:prop_types_default().string,margin:prop_types_default().shape({bottom:prop_types_default().number,left:prop_types_default().number,right:prop_types_default().number,top:prop_types_default().number}).isRequired,numTicks:prop_types_default().number,padding:prop_types_default().shape({bottom:prop_types_default().number,left:prop_types_default().number,right:prop_types_default().number,top:prop_types_default().number}).isRequired,parentHeight:prop_types_default().number.isRequired,parentWidth:prop_types_default().number.isRequired,theme:prop_types_default().object,tickDirection:prop_types_default().oneOf(["inner","outer"]),tickLength:prop_types_default().number};const components_Axis_Axis=(0,styled_components_browser_esm.withTheme)(Axis_Axis);var Axes_excluded=["axesConfig","className"];function Axes_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Axes_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Axes_ownKeys(Object(t),!0).forEach(function(r){Axes_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Axes_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Axes_defineProperty(e,r,t){return(r=function Axes_toPropertyKey(t){var i=function Axes_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledAxis=(0,styled_components_browser_esm.default)(components_Axis_Axis).withConfig({displayName:"Axes__StyledAxis",componentId:"sc-h45ols-0"})([".Axis__label{text-transform:uppercase;font-weight:bold;letter-spacing:1px;}"]);function Axes(_ref){var{axesConfig,className}=_ref,rest=function Axes_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function Axes_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,Axes_excluded),{color,xAxis,yAxis}=axesConfig;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledAxis,Axes_objectSpread({axis:yAxis,className,color},rest)),(0,jsx_runtime.jsx)(StyledAxis,Axes_objectSpread({axis:xAxis,className,color},rest))]})}Axes.propTypes={axesConfig:prop_types_default().shape({xAxis:prop_types_default().object,yAxis:prop_types_default().object})};const Axes_Axes=Axes;function ScatterPlotPoint(_ref){var xErrorBarPoints,yErrorBarPoints,{dataPointSize,glyphColor,GlyphComponent,highlighted,point,xScale,yScale}=_ref,{global:{colors={}}}=(0,styled_components_browser_esm.useTheme)(),{x,y,x_error,y_error}=point,cx=xScale(x),cy=yScale(y),errorBarColor=(0,polished_esm.a)(.25,glyphColor);return x_error&&(xErrorBarPoints={x1:xScale(x-x_error),x2:xScale(x+x_error)}),y_error&&(yErrorBarPoints={y1:yScale(y+y_error),y2:yScale(y-y_error)}),(0,jsx_runtime.jsxs)("g",{children:[x_error&&(0,jsx_runtime.jsx)("line",{className:"errorBar",stroke:errorBarColor,strokeWidth:2,x1:xErrorBarPoints.x1,x2:xErrorBarPoints.x2,y1:cy,y2:cy}),y_error&&(0,jsx_runtime.jsx)("line",{className:"errorBar",stroke:errorBarColor,strokeWidth:2,x1:cx,x2:cx,y1:yErrorBarPoints.y1,y2:yErrorBarPoints.y2}),(0,jsx_runtime.jsx)(GlyphComponent,{"data-x":x,"data-y":y,left:cx,size:dataPointSize,top:cy,fill:glyphColor,stroke:highlighted?"black":colors["light-4"]})]})}var getDataSeriesColor_console=__webpack_require__("../../node_modules/console-browserify/index.js");function whichColor(color,themeColors,defaultColors,seriesIndex){return function validateColor(color){var tempElementStyle=(new Option).style;return tempElementStyle.color=color,""===tempElementStyle.color?(getDataSeriesColor_console.error("Color for data subject viewer is invalid: ".concat(color)),""):color||""}(themeColors[color]||color||defaultColors[seriesIndex])}function getDataSeriesColor(){var{seriesOptions={},seriesIndex=0,themeColors={},defaultColors=[],highlighted=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{color}=seriesOptions;return highlighted?whichColor(color,themeColors,defaultColors,seriesIndex):"transparent"}function ScatterPlotSeries(_ref){var{color,dataPointSize,highlightedSeries,series,seriesIndex,xScale,yScale}=_ref,{global:{colors={}}}=(0,styled_components_browser_esm.useTheme)(),highlighted=isDataSeriesHighlighted({highlightedSeries,seriesOptions:null==series?void 0:series.seriesOptions}),glyphColor=color||getDataSeriesColor({defaultColors:Object.values(colors.drawingTools),seriesOptions:null==series?void 0:series.seriesOptions,seriesIndex,themeColors:colors,highlighted}),GlyphComponent=getDataSeriesSymbol({seriesOptions:null==series?void 0:series.seriesOptions,seriesIndex});return series.seriesData.map((point,index)=>(0,jsx_runtime.jsx)(ScatterPlotPoint,{dataPointSize,glyphColor,GlyphComponent,highlighted,point,xScale,yScale},"point-".concat(index)))}var Brush=__webpack_require__("../../node_modules/@visx/brush/esm/Brush.js"),Selections_DeleteButton_StyledGroup=(0,styled_components_browser_esm.default)("g").withConfig({displayName:"DeleteButton__StyledGroup",componentId:"sc-1ye0tiv-0"})(["&:focus{","}&:hover{cursor:pointer;}"],props=>(0,styled_components_browser_esm.css)(["outline:solid 4px ",";"],props.focusColor)),Selections_DeleteButton_DEFAULT_HANDLER=()=>!0;function Selections_DeleteButton_DeleteButton(_ref){var{colors,cx,cy,fill="black",label,onDelete=Selections_DeleteButton_DEFAULT_HANDLER,opacity=1,rotate=0,stroke="white",strokeWidth=1.5}=_ref,focusColor=colors.focus,RADIUS=screen.width<900?11:8,CROSS_PATH="\n    M ".concat(-1*RADIUS*.7," 0\n    L ").concat(.7*RADIUS," 0\n    M 0 ").concat(-1*RADIUS*.7,"\n    L 0 ").concat(.7*RADIUS,"\n  "),transform="\n    translate(".concat(cx,", ").concat(cy,")\n    rotate(").concat(rotate,")\n  ");function onPointerUp(event){return event.preventDefault(),event.stopPropagation(),onDelete(),!1}return(0,jsx_runtime.jsxs)(Selections_DeleteButton_StyledGroup,{"aria-label":label,focusable:!0,focusColor,onKeyDown:function onKeyDown(event){switch(event.key){case"Enter":case" ":return onPointerUp(event);default:return!0}},onPointerUp,opacity,role:"button",stroke,strokeWidth,tabIndex:"-1",transform,children:[(0,jsx_runtime.jsx)("circle",{fill,r:RADIUS}),(0,jsx_runtime.jsx)("path",{d:CROSS_PATH,transform:"rotate(45)"})]})}function Selection(_ref){var{active=!1,disabled=!1,fill,selection,onSelect,xScale}=_ref,x=xScale(selection.x-selection.width/2),width=xScale(selection.x+selection.width/2)-x;function onClick(){return!!disabled||onSelect(selection)}return(0,jsx_runtime.jsx)("rect",{className:"selection",fill,focusable:disabled?"false":"true",height:"100%",onClick,onFocus:onClick,opacity:.5,pointerEvents:disabled?"none":"all",tabIndex:disabled?"-1":"0",width,x})}function Selections_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Selections_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Selections_ownKeys(Object(t),!0).forEach(function(r){Selections_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Selections_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Selections_defineProperty(e,r,t){return(r=function Selections_toPropertyKey(t){var i=function Selections_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}Selections_DeleteButton_DeleteButton.propTypes={label:prop_types_default().string.isRequired,mark:prop_types_default().object.isRequired,onDelete:prop_types_default().func,onDeselect:prop_types_default().func,rotate:prop_types_default().number,scale:prop_types_default().number,theme:prop_types_default().object};var TRANSFORM_MATRIX={scaleX:1,scaleY:1,skewX:0,skewY:0,translateX:0,translateY:0};function Selections_cancelEvent(event){event.preventDefault(),event.stopPropagation()}function convertSelection(selection){return{x:(selection.x0+selection.x1)/2,width:selection.x1-selection.x0}}var Selections_DEFAULT_HANDLER=()=>!0;const Selections_Selections=(0,mobxreact_esm.PA)(function Selections(_ref){var initialBrushPosition,{disabled=!1,feedbackBrushes=[],height,margin,transformMatrix=TRANSFORM_MATRIX,width,xScale=Selections_DEFAULT_HANDLER,yScale=Selections_DEFAULT_HANDLER}=_ref,{activeTool=null,activeToolIndex=0,annotation=null,setActiveTool=Selections_DEFAULT_HANDLER}=function useDataSelectionTool(){var{classifications:{active:classification},workflowSteps:{active:step,findTasksByType}}=useStores(),[dataSelectionTask]=findTasksByType("dataVisAnnotation"),annotation=dataSelectionTask?classification.addAnnotation(dataSelectionTask):null,activeTask=step.tasks.find(task=>task===dataSelectionTask);return{activeTool:null==activeTask?void 0:activeTask.activeTool,activeToolIndex:null==activeTask?void 0:activeTask.activeToolIndex,annotation,setActiveTool:null==activeTask?void 0:activeTask.setActiveTool}}(),{global:{colors={}}}=(0,styled_components_browser_esm.useTheme)(),{t}=useTranslation("components"),{onKeyZoom}=useKeyZoom(),eventRoot=(0,react.useRef)(),[activeIndex,setActiveIndex]=(0,react.useState)(-1),[createNewBrush,setCreateNewBrush]=(0,react.useState)(!0),highlighterColours=Object.keys(colors.highlighterTool),allowSelection=activeTool&&!disabled,selections=null==annotation?void 0:annotation.value,activeSelection=null==annotation?void 0:annotation.value[activeIndex],activeColour="highlighter-".concat(highlighterColours[activeToolIndex]),brushStyle={fill:colors[activeColour],fillOpacity:.2,stroke:colors["dark-3"],strokeOpacity:.2},key="new-brush";if(activeSelection){var{x,width:_width}=activeSelection,start=xScale(x-_width/2),end=xScale(x+_width/2);initialBrushPosition={start:{x:start},end:{x:end}},key="active-selection-".concat(start,"-").concat(end)}function deleteSelection(index){var newSelections=selections.filter((selection,i)=>i!==index);null==annotation||annotation.update(newSelections),index===activeIndex&&(setActiveIndex(-1),setCreateNewBrush(!0))}function onSelectBrush(index){var selection=selections[index];setActiveTool(selection.tool),setActiveIndex(index),setCreateNewBrush(!1)}function FeedbackBrush(_ref3){var{feedbackBrush}=_ref3,width=feedbackBrush.maxX-feedbackBrush.minX,x=feedbackBrush.minX+width/2,fill="transparent";return!0===feedbackBrush.success&&(fill="green"),!1===feedbackBrush.success&&(fill="red"),(0,jsx_runtime.jsx)(Selection,{disabled:!0,selection:{x,width},fill,height,xScale})}return disabled&&activeSelection&&(setActiveIndex(-1),setCreateNewBrush(!0)),(0,jsx_runtime.jsxs)("g",{ref:eventRoot,className:"brushLayer",focusable:"true",onKeyDown:function onKeyDown(event){switch(event.key){case"Backspace":case"Del":if(activeIndex>-1)return event.preventDefault(),deleteSelection(activeIndex),!1}return onKeyZoom(event)},onPointerDown:Selections_cancelEvent,onPointerMove:Selections_cancelEvent,onPointerUp:Selections_cancelEvent,tabIndex:"-1",children:[null==selections?void 0:selections.map((selection,index)=>(0,jsx_runtime.jsx)(Selection,{active:!createNewBrush&&selection===activeSelection,disabled:!allowSelection||selection.toolType!==activeTool.type,fill:colors["highlighter-".concat(highlighterColours[selection.tool])],height,onSelect:()=>onSelectBrush(index),selection,xScale},"selection-".concat(index))),allowSelection&&(0,jsx_runtime.jsx)(Brush.A,{handleSize:10,height,initialBrushPosition,margin,onBrushStart:function onStartSelection(_ref2){var{x}=_ref2,index=-1;selections.forEach((selection,i)=>{var lower=xScale(selection.x-selection.width/2)-10,upper=xScale(selection.x+selection.width/2)+10,click=xScale(x);click>lower&&click<upper&&(index=i)}),index>-1?onSelectBrush(index):function onStartNewBrush(){setCreateNewBrush(!0)}()},onBrushEnd:function onEndSelection(selection){var newSelection=createNewBrush?function createNewSelection(selection){if(selection){var{x:_x,width:_width2}=convertSelection(selection),newSelection={tool:activeToolIndex,toolType:activeTool.type,x:_x,width:_width2,zoomLevelOnCreation:transformMatrix.scaleX},newSelections=[...selections,newSelection];return null==annotation||annotation.update(newSelections),newSelections.length-1}return-1}(selection):function replaceActiveSelection(selection){if(selection){var{x:_x2,width:_width3}=convertSelection(selection),newSelection=Selections_objectSpread(Selections_objectSpread({},activeSelection),{},{x:_x2,width:_width3}),newSelections=[...selections];return newSelections[activeIndex]=newSelection,null==annotation||annotation.update(newSelections),activeIndex}return setCreateNewBrush(!0),-1}(selection);setActiveIndex(newSelection),null==eventRoot||eventRoot.current.focus()},selectedBoxStyle:brushStyle,width,xScale,yScale},key),allowSelection&&(null==selections?void 0:selections.map((selection,index)=>(0,jsx_runtime.jsx)(Selections_DeleteButton_DeleteButton,{colors,cx:xScale(selection.x),cy:10,fill:colors["accent-1"],label:t("SubjectViewer.ScatterPlotViewer.Selection.delete",{index:index+1}),onDelete:()=>deleteSelection(index),opacity:.8,stroke:colors["dark-3"]},"delete-selection-".concat(index)))),null==feedbackBrushes?void 0:feedbackBrushes.map(feedbackBrush=>(0,jsx_runtime.jsx)(FeedbackBrush,{feedbackBrush},feedbackBrush.minX))]})});var INVERT_AXES={x:!1,y:!1},MARGIN={bottom:60,left:60,right:10,top:10},PADDING={bottom:0,left:0,right:0,top:0},ScatterPlot_TRANSFORM_MATRIX={scaleX:1,scaleY:1,skewX:0,skewY:0,translateX:0,translateY:0};function ScatterPlot(_ref){var background,{axisColor="",backgroundColor="",children,color="",data,dataPointSize=25,disabled=!1,experimentalSelectionTool=!1,feedbackBrushes=[],highlightedSeries,initialSelections=[],interactionMode="annotate",invertAxes=INVERT_AXES,margin=MARGIN,padding=PADDING,panning=!1,parentHeight,parentWidth,tickDirection="outer",tickLength=5,transformMatrix=ScatterPlot_TRANSFORM_MATRIX,transform,underlays=[],xAxisLabel="x-axis",xAxisLabelOffset,xAxisNumTicks=10,xScale=null,yAxisLabel="y-axis",yAxisLabelOffset,yAxisNumTicks=10,yScale=null,zooming=!1}=_ref,{dark,global:{colors={}}}=(0,styled_components_browser_esm.useTheme)(),rangeParameters={invertAxes,margin,padding,parentHeight,parentWidth,tickDirection},leftPosition=left(tickDirection,margin),topPosition=utils_top(tickDirection,margin);background=backgroundColor||getZoomBackgroundColor(dark,zooming,colors);var dataPoints=function getDataPoints(data){return isThisMultipleDataSeries(data)?data:[{seriesData:zipWith_default()(data.x,data.y,function(a,b){return{x:a,y:b}})}]}(data),xScaleTransformed=xScale||transformXScale(data,transformMatrix,rangeParameters),yScaleTransformed=yScale||transformYScale(data,transformMatrix,rangeParameters),sortedDataPoints=function sortDataPointsByHighlight(dataPoints){var highlightedSeries=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],highlightedDataSeries=[],unhighlightedDataSeries=[];if(null==dataPoints)throw new TypeError("dataPoints cannot be null or undefined");return highlightedSeries.length>0?(dataPoints.forEach((series,seriesIndex)=>{var _series$seriesOptions;if(null==series||null===(_series$seriesOptions=series.seriesOptions)||void 0===_series$seriesOptions||!_series$seriesOptions.glyph){var glyph=Object.keys(getDataSeriesSymbol)[seriesIndex];series.seriesOptions=Object.assign({},series.seriesOptions,{glyph})}isDataSeriesHighlighted({highlightedSeries,seriesOptions:null==series?void 0:series.seriesOptions})?highlightedDataSeries.push(series):unhighlightedDataSeries.push(series)}),[...unhighlightedDataSeries,...highlightedDataSeries]):dataPoints}(dataPoints,highlightedSeries),axesConfig={color:axisColor,xAxis:{label:xAxisLabel,labelOffset:xAxisLabelOffset,numTicks:xAxisNumTicks,orientation:"bottom",scale:xScaleTransformed},yAxis:{label:yAxisLabel,labelOffset:yAxisLabelOffset,numTicks:yAxisNumTicks,orientation:"left",scale:yScaleTransformed}},clipPathId=cuid_default()(),plotHeight=parentHeight-margin.bottom-margin.top,plotWidth=parentWidth-margin.right-margin.left,underlayParameters=[];return underlays.length>0&&(underlayParameters=underlays.map(underlay=>{var{fill,startPosition,xAxisWidth}=underlay;return{fill,left:xScaleTransformed(startPosition),width:xScaleTransformed(0)-xScaleTransformed(-xAxisWidth)}})),(0,jsx_runtime.jsxs)(Chart_Chart,{className:"scatterPlot",height:parentHeight,style:{touchAction:"pinch-zoom"},width:parentWidth,children:[(0,jsx_runtime.jsx)(Background_Background,{fill:background}),(0,jsx_runtime.jsx)("clipPath",{id:"scatter-plot-".concat(clipPathId),children:(0,jsx_runtime.jsx)("rect",{height:plotHeight,width:plotWidth})}),(0,jsx_runtime.jsxs)(Group.A,{className:"chartContent",clipPath:"url(#scatter-plot-".concat(clipPathId,")"),left:leftPosition,top:topPosition,children:["outer"===tickDirection&&(0,jsx_runtime.jsx)(Background_Background,{borderColor:dark?colors["light-5"]:colors["dark-5"],fill:dark?colors["light-3"]:colors["neutral-6"],height:plotHeight,underlayParameters,width:plotWidth}),sortedDataPoints.map((series,seriesIndex)=>(0,jsx_runtime.jsx)(ScatterPlotSeries,{color,dataPointSize,highlightedSeries,series,seriesIndex,xScale:xScaleTransformed,yScale:yScaleTransformed},"series-".concat(seriesIndex))),children,experimentalSelectionTool&&(0,jsx_runtime.jsx)(Selections_Selections,{disabled:disabled||"annotate"!==interactionMode,feedbackBrushes,height:plotHeight,margin,transformMatrix,width:plotWidth,xScale:xScaleTransformed,yScale:yScaleTransformed})]}),(0,jsx_runtime.jsx)(Group.A,{className:"chartAxes",left:leftPosition,top:margin.top,children:(0,jsx_runtime.jsx)(Axes_Axes,{axisColor,axesConfig,margin,padding,parentHeight,parentWidth,tickDirection,tickLength})})]})}ScatterPlot.propTypes={axisColor:prop_types_default().string,backgroundColor:prop_types_default().string,data:prop_types_default().oneOfType([prop_types_default().shape({x:prop_types_default().arrayOf(prop_types_default().number),y:prop_types_default().arrayOf(prop_types_default().number)}),prop_types_default().arrayOf(prop_types_default().shape({seriesData:prop_types_default().arrayOf(prop_types_default().shape({x:prop_types_default().number.isRequired,y:prop_types_default().number.isRequired,x_error:prop_types_default().number,y_error:prop_types_default().number})).isRequired,seriesOptions:prop_types_default().shape({color:prop_types_default().string,label:prop_types_default().string.isRequired}).isRequired}))]).isRequired,dataPointSize:prop_types_default().number,highlightedSeries:prop_types_default().arrayOf(prop_types_default().object),invertAxes:prop_types_default().shape({x:prop_types_default().bool,y:prop_types_default().bool}),margin:prop_types_default().shape({bottom:prop_types_default().number,left:prop_types_default().number,right:prop_types_default().number,top:prop_types_default().number}),padding:prop_types_default().shape({bottom:prop_types_default().number,left:prop_types_default().number,right:prop_types_default().number,top:prop_types_default().number}),panning:prop_types_default().bool,parentHeight:prop_types_default().number.isRequired,parentWidth:prop_types_default().number.isRequired,tickDirection:prop_types_default().oneOf(["inner","outer"]),tickLength:prop_types_default().number,transformMatrix:prop_types_default().shape({scaleX:prop_types_default().number,scaleY:prop_types_default().number,skewX:prop_types_default().number,skewY:prop_types_default().number,translateX:prop_types_default().number,translateY:prop_types_default().number}),underlays:prop_types_default().arrayOf(prop_types_default().object),xAxisLabel:prop_types_default().string,xAxisLabelOffset:prop_types_default().number,xAxisNumTicks:prop_types_default().number,xScale:prop_types_default().oneOfType([prop_types_default().func,prop_types_default().object]),yAxisLabel:prop_types_default().string,yAxisLabelOffset:prop_types_default().number,yAxisNumTicks:prop_types_default().number,yScale:prop_types_default().oneOfType([prop_types_default().func,prop_types_default().object]),zooming:prop_types_default().bool};var ZoomingScatterPlot_excluded=["panning","setOnPan","setOnZoom","zoomConfiguration","zooming"];function ZoomingScatterPlot_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ZoomingScatterPlot_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ZoomingScatterPlot_ownKeys(Object(t),!0).forEach(function(r){ZoomingScatterPlot_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZoomingScatterPlot_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ZoomingScatterPlot_defineProperty(e,r,t){return(r=function ZoomingScatterPlot_toPropertyKey(t){var i=function ZoomingScatterPlot_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ZoomingScatterPlot_DEFAULT_HANDLER=()=>!0,DEFAULT_ZOOM={scaleX:1,scaleY:1,skewX:0,skewY:0,translateX:0,translateY:0},defaultInvertAxes={x:!1,y:!1},defaultMargin={bottom:60,left:60,right:10,top:10},defaultPadding={bottom:0,left:0,right:0,top:0},ZoomingScatterPlot_defaultZoomConfig={direction:"both",minZoom:1,maxZoom:10,zoomInValue:1.2,zoomOutValue:.8};function ZoomingScatterPlot(_ref){var{panning=!0,setOnPan=ZoomingScatterPlot_DEFAULT_HANDLER,setOnZoom=ZoomingScatterPlot_DEFAULT_HANDLER,zoomConfiguration=ZoomingScatterPlot_defaultZoomConfig,zooming=!0}=_ref,scatterPlotProps=function ZoomingScatterPlot_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function ZoomingScatterPlot_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,ZoomingScatterPlot_excluded),{data,interactionMode="move",invertAxes=defaultInvertAxes,margin=defaultMargin,padding=defaultPadding,parentHeight,parentWidth,tickDirection="outer"}=scatterPlotProps,rangeParameters={invertAxes,margin,padding,parentHeight,parentWidth,tickDirection};function isXAxisOutOfBounds(transformMatrix){var dataExtent=getDataExtent(data),xScaleDomain=transformXScale(data,transformMatrix,rangeParameters).domain();return xScaleDomain[0]<dataExtent.x[0]-2||xScaleDomain[1]>dataExtent.x[1]+2}function isScaleMin(scale){var{minZoom}=zoomConfiguration;return scale<minZoom}function isScaleMax(scale){var{maxZoom}=zoomConfiguration;return scale>maxZoom}function isYAxisOutOfBounds(transformMatrix){var dataExtent=getDataExtent(data),yScaleDomain=transformYScale(data,transformMatrix,rangeParameters).domain();return yScaleDomain[0]<dataExtent.y[0]-2||yScaleDomain[1]>dataExtent.y[1]+2}var height=parentHeight-margin.bottom-margin.top,width=parentWidth-margin.right-margin.left,leftPosition=left(tickDirection,margin),topPosition=utils_top(tickDirection,margin);return(0,jsx_runtime.jsx)(VisXZoom_VisXZoom,{constrain:function constrain(transformMatrix,prevTransformMatrix){return"x"===zoomConfiguration.direction?function constrainXAxisZoom(transformMatrix,prevTransformMatrix){var{maxZoom}=zoomConfiguration,{scaleX}=transformMatrix,isOutOfBounds=isXAxisOutOfBounds(transformMatrix),isMin=isScaleMin(scaleX),isMax=isScaleMax(scaleX),newTransformMatrix=Object.assign({},transformMatrix,{scaleY:1,translateY:0});return isMin?DEFAULT_ZOOM:(isMax&&(newTransformMatrix.scaleX=maxZoom,newTransformMatrix.translateX=prevTransformMatrix.translateX),isOutOfBounds?prevTransformMatrix:newTransformMatrix)}(transformMatrix,prevTransformMatrix):"y"===zoomConfiguration.direction?function constrainYAxisZoom(transformMatrix,prevTransformMatrix){var{maxZoom}=zoomConfiguration,{scaleY}=transformMatrix,isOutOfBounds=isYAxisOutOfBounds(transformMatrix),isMin=isScaleMin(scaleY),isMax=isScaleMax(scaleY),newTransformMatrix=Object.assign({},transformMatrix,{scaleX:1,translateX:0});return isMin?DEFAULT_ZOOM:(isMax&&(newTransformMatrix.scaleY=maxZoom,newTransformMatrix.translateY=prevTransformMatrix.translateY),isOutOfBounds?prevTransformMatrix:newTransformMatrix)}(transformMatrix,prevTransformMatrix):"both"===zoomConfiguration.direction?function constrainBothAxisZoom(transformMatrix,prevTransformMatrix){var{maxZoom}=zoomConfiguration,{scaleX,scaleY}=transformMatrix,isOutOfBoundsX=isXAxisOutOfBounds(transformMatrix),isOutOfBoundsY=isYAxisOutOfBounds(transformMatrix),isMinX=isScaleMin(scaleX),isMinY=isScaleMin(scaleY),isMaxX=isScaleMax(scaleX),isMaxY=isScaleMax(scaleY);return isMaxX&&isMaxY?Object.assign({},transformMatrix,{scaleX:maxZoom,scaleY:maxZoom,translateX:prevTransformMatrix.translateX,translateY:prevTransformMatrix.translateY}):isMinX||isMinY?DEFAULT_ZOOM:isOutOfBoundsX||isOutOfBoundsY?prevTransformMatrix:transformMatrix}(transformMatrix,prevTransformMatrix):transformMatrix},height,left:leftPosition,panning,top:topPosition,width,move:"move"===interactionMode,setOnPan,setOnZoom,zoomConfiguration,zooming,children:zoomProps=>(0,jsx_runtime.jsx)(ScatterPlot,ZoomingScatterPlot_objectSpread(ZoomingScatterPlot_objectSpread({},scatterPlotProps),zoomProps))})}ZoomingScatterPlot.propTypes=ZoomingScatterPlot_objectSpread({panning:prop_types_default().bool,setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,zoomConfiguration:prop_types_default().shape({direction:prop_types_default().oneOf(["both","x","y"]),minZoom:prop_types_default().number,maxZoom:prop_types_default().number,zoomInValue:prop_types_default().number,zoomOutValue:prop_types_default().number}),zooming:prop_types_default().bool},ScatterPlot.propTypes);const ZoomingScatterPlot_ZoomingScatterPlot=ZoomingScatterPlot;var ZoomIn=__webpack_require__("../../node_modules/grommet-icons/es6/icons/ZoomIn.js"),MetaToolsButton=__webpack_require__("../lib-react-components/dist/esm/MetaToolsButton/MetaToolsButton.js");function ZoomControlButton(props){var style,{t}=useTranslation("components"),{onClick=()=>{},position,zooming=!1}=props,label=t(zooming?"SubjectViewer.ZoomControlButton.disable":"SubjectViewer.ZoomControlButton.enable");return position&&(style={position,top:0}),(0,jsx_runtime.jsx)(Box.a,{direction:"row",justify:"center",margin:{vertical:"xsmall"},style,width:"100%",children:(0,jsx_runtime.jsx)(MetaToolsButton.h,{"aria-checked":zooming,icon:(0,jsx_runtime.jsx)(ZoomIn.$,{color:{dark:"light-3",light:"light-6"},size:"small"}),text:label,onClick,role:"radio"})})}ZoomControlButton.propTypes={onClick:prop_types_default().func,zooming:prop_types_default().bool};const ZoomControlButton_ZoomControlButton=ZoomControlButton;function ScatterPlotViewer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ScatterPlotViewer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ScatterPlotViewer_ownKeys(Object(t),!0).forEach(function(r){ScatterPlotViewer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ScatterPlotViewer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ScatterPlotViewer_defineProperty(e,r,t){return(r=function ScatterPlotViewer_toPropertyKey(t){var i=function ScatterPlotViewer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var ScatterPlotViewer=(0,react.forwardRef)(function ScatterPlotViewer(props,ref){var{zoomControlFn,zooming=!1}=props,Plot=zooming?ZoomingScatterPlot_ZoomingScatterPlot:ScatterPlot;return(0,jsx_runtime.jsx)(ParentSize.A,{children:parent=>(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[zoomControlFn&&(0,jsx_runtime.jsx)(ZoomControlButton_ZoomControlButton,{onClick:zoomControlFn,position:"absolute",zooming}),(0,jsx_runtime.jsx)(Plot,ScatterPlotViewer_objectSpread({forwardedRef:ref,parentHeight:parent.height,parentWidth:parent.width},props))]})})});ScatterPlotViewer.propTypes={zooming:prop_types_default().bool};const ScatterPlotViewer_ScatterPlotViewer=ScatterPlotViewer;ScatterPlotViewer.__docgenInfo={description:"",methods:[],displayName:"ScatterPlotViewer",props:{zooming:{description:"",type:{name:"bool"},required:!1}}};var StyledPlaceholderSVG=styled_components_browser_esm.default.svg.withConfig({displayName:"PlaceholderSVG__StyledPlaceholderSVG",componentId:"sc-1h02og5-0"})(["background:no-repeat center / cover url('https://static.zooniverse.org/www.zooniverse.org/assets/fe-project-subject-placeholder-800x600.png');touch-action:pinch-zoom;max-width:",";",""],props=>props.$maxWidth,props=>props.$maxHeight&&(0,styled_components_browser_esm.css)(["max-height:",";"],props.$maxHeight)),PlaceholderSVG=(0,react.forwardRef)(function PlaceholderSVG(_ref,ref){var{maxWidth="100%",maxHeight,viewBox="0 0 800 600"}=_ref;return(0,jsx_runtime.jsx)(StyledPlaceholderSVG,{ref,"data-testid":"placeholder-svg",focusable:!0,$maxHeight:maxHeight,$maxWidth:maxWidth,tabIndex:0,viewBox})});PlaceholderSVG.displayName="PlaceholderSVG",PlaceholderSVG.propTypes={maxWidth:prop_types.string,maxHeight:prop_types.string,viewBox:prop_types.string};const components_PlaceholderSVG=PlaceholderSVG;PlaceholderSVG.__docgenInfo={description:"",methods:[],displayName:"PlaceholderSVG",props:{maxWidth:{description:"",type:{name:"custom",raw:"string"},required:!1},maxHeight:{description:"",type:{name:"custom",raw:"string"},required:!1},viewBox:{description:"",type:{name:"custom",raw:"string"},required:!1}}};var fadeIn=(0,styled_components_browser_esm.keyframes)(["from{opacity:0;}to{opacity:1;}"]),fadeOut=(0,styled_components_browser_esm.keyframes)(["from{opacity:1;}to{opacity:0;}"]),StyledOverlay=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"ZoomHelperOverlay__StyledOverlay",componentId:"sc-6bt36r-0"})(["position:absolute;top:0;background:",";backdrop-filter:blur(1px);pointer-events:none;animation:"," 0.3s forwards;"],props=>props.theme.dark?"rgba(45, 45, 45, 0.40)":"rgba(255, 255, 255, 0.40)",props=>props.$fadeOut?fadeOut:fadeIn),ZoomHelperOverlay_StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"ZoomHelperOverlay__StyledBox",componentId:"sc-6bt36r-1"})(["background:",";backdrop-filter:blur(4px);"],props=>props.theme.dark?"rgba(45, 45, 45, 0.60)":"rgba(255, 255, 255, 0.60)");function ZoomHelperOverlay(_ref){var{fadingOut=!1}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(StyledOverlay,{align:"center",direction:"row",$fadeOut:fadingOut,justify:"center",width:"100%",height:"100%",children:(0,jsx_runtime.jsx)(ZoomHelperOverlay_StyledBox,{align:"center",flex:"grow",height:"120px",justify:"center",pad:{horizontal:"medium",vertical:"small"},round:"8px",width:{max:"400px"},children:(0,jsx_runtime.jsx)(Text.E,{weight:"bold",size:"18px",children:t("SubjectViewer.zoomHelp")})})})}ZoomHelperOverlay.propTypes={fadingOut:prop_types.bool};const components_ZoomHelperOverlay=ZoomHelperOverlay;var Close=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Close.js"),Checkmark=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Checkmark.js"),Undo=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Undo.js"),Redo=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Redo.js"),Radial=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Radial.js"),Trash=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Trash.js"),Pan=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Pan.js"),LineControls_StyledGroup=styled_components_browser_esm.default.g.withConfig({displayName:"LineControls__StyledGroup",componentId:"sc-nuhwlg-0"})(["cursor:pointer;pointer-events:all !important;"]),LineControls_DEFAULT_TRANSFORM_MATRIX={scaleX:1,scaleY:1,skewX:0,skewY:0,translateX:0,translateY:0},LineControls=(0,react.forwardRef)(function LineControls(_ref,ref){var{mark,onDelete,theme}=_ref,[activePosition,setActivePosition]=(0,react.useState)("tl"),[showDeleteButtons,setShowDeleteButtons]=(0,react.useState)(!1),{t}=useTranslation("plugins"),{canvas,rotate,transformMatrix=LineControls_DEFAULT_TRANSFORM_MATRIX}=(0,react.useContext)(shared_SVGContext),{scaleX,scaleY,translateX,translateY}=transformMatrix,FILL_COLOR=theme.dark?"#333333":"#ffffff",STROKE_COLOR=theme.dark?"#ffffff":"#000000",STROKE_WIDTH=.5/scaleX,OUTER_RADIUS=40/scaleX,INNER_RADIUS=20/scaleX,{width,height}=canvas.getBBox(),y=(70-translateY)/scaleY,p="tl"===activePosition?{x:(70-translateX)/scaleX,y}:{x:(width-translateX-70)/scaleX,y};var deleteButtons=[{label:t("LineControls.deleteCancel"),action:function deleteMarkCancel(){setShowDeleteButtons(!1)},icon:{type:Close.b,size:16/scaleX,x:p.x-27/scaleX,y:p.y-8/scaleY,color:"#E45950"},path:"M ".concat(p.x," ").concat(p.y+OUTER_RADIUS,"\n        A ").concat(OUTER_RADIUS," ").concat(OUTER_RADIUS," 0 0 1 ").concat(p.x," ").concat(p.y-OUTER_RADIUS,"\n        L ").concat(p.x," ").concat(p.y,"\n        Z")},{label:t("LineControls.deleteConfirm"),action:function deleteMarkConfirm(event){return event.preventDefault(),event.stopPropagation(),onDelete(event)},icon:{type:Checkmark.M,size:18/scaleX,x:p.x+12/scaleX,y:p.y-10/scaleY,color:"#1ED359"},path:"M ".concat(p.x," ").concat(p.y+OUTER_RADIUS,"\n        A ").concat(OUTER_RADIUS," ").concat(OUTER_RADIUS," 0 0 0 ").concat(p.x," ").concat(p.y-OUTER_RADIUS,"\n        Z")}],defaultButtons=[{label:t("LineControls.undo"),action:function undo(event){return event.preventDefault(),event.stopPropagation(),mark.undo()},icon:{type:Undo.V,size:10/scaleX,x:p.x-27/scaleX,y:p.y-27/scaleY,color:STROKE_COLOR},path:"M ".concat(p.x-OUTER_RADIUS," ").concat(p.y,"\n        A ").concat(OUTER_RADIUS," ").concat(OUTER_RADIUS," 0 0 1 ").concat(p.x," ").concat(p.y-OUTER_RADIUS,"\n        L ").concat(p.x," ").concat(p.y-INNER_RADIUS,"\n        A ").concat(INNER_RADIUS," ").concat(INNER_RADIUS," 0 0 0 ").concat(p.x-INNER_RADIUS," ").concat(p.y,"\n        Z")},{label:t("LineControls.redo"),action:mark.redo,icon:{type:Redo.B,size:10/scaleX,x:p.x+17/scaleX,y:p.y-27/scaleY,color:STROKE_COLOR},path:"M ".concat(p.x+OUTER_RADIUS," ").concat(p.y,"\n        A ").concat(OUTER_RADIUS," ").concat(OUTER_RADIUS," 0 0 0 ").concat(p.x," ").concat(p.y-OUTER_RADIUS,"\n        L ").concat(p.x," ").concat(p.y-INNER_RADIUS,"\n        A ").concat(INNER_RADIUS," ").concat(INNER_RADIUS," 0 0 1 ").concat(p.x+INNER_RADIUS," ").concat(p.y,"\n        Z")},{label:t("LineControls.close"),action:mark.close,icon:{type:Radial.s,size:10/scaleX,x:p.x-27/scaleX,y:p.y+17/scaleY,color:STROKE_COLOR},path:"M ".concat(p.x-OUTER_RADIUS," ").concat(p.y,"\n        A ").concat(OUTER_RADIUS," ").concat(OUTER_RADIUS," 0 0 0 ").concat(p.x," ").concat(p.y+OUTER_RADIUS,"\n        L ").concat(p.x," ").concat(p.y+INNER_RADIUS,"\n        A ").concat(INNER_RADIUS," ").concat(INNER_RADIUS," 0 0 1 ").concat(p.x-INNER_RADIUS," ").concat(p.y,"\n        Z")},{label:t("LineControls.delete"),action:function deleteMark(){setShowDeleteButtons(!0)},icon:{type:Trash.l,size:10/scaleX,x:p.x+17/scaleX,y:p.y+17/scaleY,color:STROKE_COLOR},path:"M ".concat(p.x+OUTER_RADIUS," ").concat(p.y,"\n        A ").concat(OUTER_RADIUS," ").concat(OUTER_RADIUS," 0 0 1 ").concat(p.x," ").concat(p.y+OUTER_RADIUS,"\n        L ").concat(p.x," ").concat(p.y+INNER_RADIUS,"\n        A ").concat(INNER_RADIUS," ").concat(INNER_RADIUS," 0 0 0 ").concat(p.x+INNER_RADIUS," ").concat(p.y,"\n        Z")},{label:t("LineControls.move"),action:()=>{setActivePosition("tl"==activePosition?"tr":"tl")},icon:{type:Pan.u,size:20/scaleX,x:p.x-10/scaleX,y:p.y-10/scaleY,color:STROKE_COLOR},path:"M ".concat(p.x-INNER_RADIUS," ").concat(p.y,"\n        A ").concat(INNER_RADIUS," ").concat(INNER_RADIUS," 0 0 0 ").concat(p.x+INNER_RADIUS," ").concat(p.y,"\n        A ").concat(INNER_RADIUS," ").concat(INNER_RADIUS," 0 0 0 ").concat(p.x-INNER_RADIUS," ").concat(p.y,"\n        Z")}],buttons=showDeleteButtons?deleteButtons:defaultButtons;return(0,jsx_runtime.jsx)(LineControls_StyledGroup,{ref,role:"group","aria-label":t("lineControls.lineControls"),focusable:"false",fill:FILL_COLOR,transform:"rotate(".concat(-rotate," ").concat(width/2," ").concat(height/2,")"),children:buttons.map((_ref2,index)=>{var{label,path,action,icon}=_ref2,IconComponent=icon.type;return(0,jsx_runtime.jsxs)("g",{focusable:"false",children:[(0,jsx_runtime.jsx)(Tooltip_Tooltip,{label,children:(0,jsx_runtime.jsx)("path",{role:"button","aria-label":label,focusable:"true",tabIndex:"0",d:path,stroke:STROKE_COLOR,strokeWidth:STROKE_WIDTH,onPointerDown:action,onKeyDown:ev=>{!function onEnterOrSpace(ev,func){if(13===ev.keyCode||32===ev.keyCode)return ev.preventDefault(),ev.stopPropagation(),func(ev)}(ev,action)}})}),(0,jsx_runtime.jsx)("svg",{height:icon.size,width:icon.size,x:icon.x,y:icon.y,children:(0,jsx_runtime.jsx)(IconComponent,{color:icon.color,size:"".concat(icon.size,"px"),focusable:"false"})})]},index)})})});LineControls.propTypes={mark:prop_types_default().shape({id:prop_types_default().string,setSubTaskVisibility:prop_types_default().func}),onDelete:prop_types_default().func};const LineControls_LineControls=(0,styled_components_browser_esm.withTheme)(LineControls);function isInBounds(markElement,canvas){if(!canvas)return!0;if(!markElement)return!0;var object=markElement.getBoundingClientRect(),bounds=canvas.getBoundingClientRect(),notBeyondLeft=object.left+object.width>bounds.left,notBeyondRight=object.left<bounds.left+bounds.width,notBeyondTop=object.top+object.height>bounds.top,notBeyondBottom=object.top<bounds.top+bounds.height;return notBeyondLeft&&notBeyondRight&&notBeyondTop&&notBeyondBottom}function DrawingToolMarks(_ref){var{activeMark={id:"",setSubTaskVisibility:()=>{}},disabled=!1,marks=[],onDelete=()=>!0,onDeselectMark=()=>!0,onFinish=()=>!0,onMove=()=>!0,onSelectMark=()=>!0,pointerEvents="painted",played}=_ref,{canvas}=(0,react.useContext)(shared_SVGContext);return marks.map((mark,index)=>{var{tool,videoTime}=mark,MarkingComponent=mark.toolComponent,isActive=mark.id===(null==activeMark?void 0:activeMark.id);function deleteMark(){activeMark.setSubTaskVisibility(!1),tool.deleteMark(mark),onDelete(mark)}function selectMark(){onSelectMark(mark)}return void 0!==videoTime&&played<videoTime?null:(0,jsx_runtime.jsxs)("g",{children:[(0,jsx_runtime.jsxs)(Mark_Mark,{isActive,coords:mark.coords,disabled,dragStart:selectMark,dragMove:function moveMark(_event,difference){onMove(mark,difference)},dragEnd:function endMoveMark(event){null!=event&&event.currentTarget&&!isInBounds(event.currentTarget,canvas)?deleteMark():onFinish(event)},label:"Mark ".concat(index),mark,onDelete:deleteMark,onFinish,onSelect:selectMark,pointerEvents:isActive?"painted":pointerEvents,children:[(0,jsx_runtime.jsx)(MarkingComponent,{active:isActive,mark,onFinish,played}),isActive&&"freehandLine"!==mark.tool.type&&(0,jsx_runtime.jsx)(DeleteButton_DeleteButton,{label:"Delete ".concat(tool.type),mark,onDelete:deleteMark,onDeselect:function deselectMark(event){null!=event&&event.currentTarget&&!isInBounds(event.currentTarget,canvas)?deleteMark():onDeselectMark(mark)}})]}),isActive&&"freehandLine"==mark.tool.type&&(0,jsx_runtime.jsx)(LineControls_LineControls,{mark,onDelete:deleteMark})]},mark.id)})}LineControls.__docgenInfo={description:"",methods:[],displayName:"LineControls",props:{mark:{description:"",type:{name:"shape",value:{id:{name:"string",required:!1},setSubTaskVisibility:{name:"func",required:!1}}},required:!1},onDelete:{description:"",type:{name:"func"},required:!1}}},DrawingToolMarks.propTypes={activeMark:prop_types_default().shape({id:prop_types_default().string,setSubTaskVisibility:prop_types_default().func}),marks:prop_types_default().array.isRequired,onDelete:prop_types_default().func,onDeselectMark:prop_types_default().func,onFinish:prop_types_default().func,onMove:prop_types_default().func,onSelectMark:prop_types_default().func,pointerEvents:prop_types_default().oneOf(["all","none","painted"])};function DrawingToolMarksConnector_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function DrawingToolMarksConnector_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DrawingToolMarksConnector_ownKeys(Object(t),!0).forEach(function(r){DrawingToolMarksConnector_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DrawingToolMarksConnector_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function DrawingToolMarksConnector_defineProperty(e,r,t){return(r=function DrawingToolMarksConnector_toPropertyKey(t){var i=function DrawingToolMarksConnector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const DrawingToolMarksConnector=function withMachineLearntReductions(Component){function WithMachineLearntReductions(props,ref){var taskProps=useMachineLearntReductions();return(0,jsx_runtime.jsx)(Component,DrawingToolMarksConnector_objectSpread(DrawingToolMarksConnector_objectSpread({ref},props),taskProps))}return(0,mobxreact_esm.PA)((0,react.forwardRef)(WithMachineLearntReductions))}(DrawingToolMarks);function TooltipIcon_TooltipIcon(_ref){var{fill}=_ref;return(0,jsx_runtime.jsx)(Blank.h,{color:fill,children:(0,jsx_runtime.jsx)("circle",{cx:"12",cy:"12",r:"6"})})}TooltipIcon_TooltipIcon.propTypes={fill:prop_types.string};var List=__webpack_require__("../../node_modules/grommet/es6/components/List/List.js"),lib=__webpack_require__("../../node_modules/react-rnd/lib/index.js");function ResizeIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ResizeIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ResizeIcon_ownKeys(Object(t),!0).forEach(function(r){ResizeIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ResizeIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ResizeIcon_defineProperty(e,r,t){return(r=function ResizeIcon_toPropertyKey(t){var i=function ResizeIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledWrapper=styled_components_browser_esm.default.span.withConfig({displayName:"ResizeIcon__StyledWrapper",componentId:"sc-1oobo67-0"})([""," display:flex;justify-content:center;"],props=>props.theme.dark?(0,styled_components_browser_esm.css)(["color:",";"],props.theme.global.colors.text.dark):(0,styled_components_browser_esm.css)(["color:",";"],props.theme.global.colors.text.light));const ResizeIcon_ResizeIcon=function ResizeIcon(props){return(0,jsx_runtime.jsx)(StyledWrapper,ResizeIcon_objectSpread(ResizeIcon_objectSpread({},props),{},{children:""}))};var withLayer=__webpack_require__("../lib-react-components/dist/esm/helpers/withLayer/withLayer.js"),MovableModal_excluded=["children","closeFn","headingBackground","overflow","pad","rndProps","title","titleColor"],MovableModal_excluded2=["cancel","minHeight","minWidth"];function MovableModal_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function MovableModal_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?MovableModal_ownKeys(Object(t),!0).forEach(function(r){MovableModal_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):MovableModal_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function MovableModal_defineProperty(e,r,t){return(r=function MovableModal_toPropertyKey(t){var i=function MovableModal_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function MovableModal_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function MovableModal_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var defaultRndProps={default:{x:0,y:0},minHeight:100,minWidth:350},MovableModal=(0,react.forwardRef)(function(_ref,ref){var{children,closeFn,headingBackground,overflow="auto",pad,rndProps=defaultRndProps,title="",titleColor}=_ref,rest=MovableModal_objectWithoutProperties(_ref,MovableModal_excluded),{cancel,minHeight,minWidth}=rndProps,restRndProps=MovableModal_objectWithoutProperties(rndProps,MovableModal_excluded2);return(0,jsx_runtime.jsx)(lib.p,MovableModal_objectSpread(MovableModal_objectSpread({cancel,enableResizing:{bottom:!0,bottomLeft:!1,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!1,topRight:!1},minHeight,minWidth,resizeHandleComponent:{bottomRight:(0,jsx_runtime.jsx)(ResizeIcon_ResizeIcon,{})},resizeHandleStyles:{bottomLeft:{bottom:0,left:0},bottomRight:{bottom:0,height:"20px",right:0,width:"14px"},topLeft:{left:0,top:0},topRight:{right:0,top:0}}},restRndProps),{},{children:(0,jsx_runtime.jsx)(Modal.a,MovableModal_objectSpread(MovableModal_objectSpread({ref,closeFn,headingBackground,overflow,pad,title,titleColor},rest),{},{children}))}))});MovableModal.propTypes={children:prop_types.node,closeFn:prop_types.func,headingBackground:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),overflow:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),pad:(0,prop_types.oneOfType)([prop_types.object,prop_types.string]),rndProps:(0,prop_types.shape)({cancel:prop_types.string,minHeight:prop_types.number,minWidth:prop_types.number,position:(0,prop_types.shape)({x:prop_types.number,y:prop_types.number})}),title:prop_types.string,titleColor:(0,prop_types.oneOfType)([prop_types.object,prop_types.string])};const MovableModal_MovableModal=(0,withLayer.A)(MovableModal);MovableModal.__docgenInfo={description:"",methods:[],displayName:"MovableModal",props:{children:{description:"",type:{name:"custom",raw:"node"},required:!1},closeFn:{description:"",type:{name:"custom",raw:"func"},required:!1},headingBackground:{description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1},overflow:{description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1},pad:{description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1},rndProps:{description:"",type:{name:"shape",value:{cancel:{name:"string",required:!1},minHeight:{name:"number",required:!1},minWidth:{name:"number",required:!1},position:{name:"shape",value:{x:{name:"number",required:!1},y:{name:"number",required:!1}},required:!1}}},required:!1},title:{description:"",type:{name:"custom",raw:"string"},required:!1},titleColor:{description:"",type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1}}};function getDefaultPosition(){var _window,_window2,bounds=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},minHeight=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,minWidth=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350,viewport_height=null===(_window=window)||void 0===_window?void 0:_window.innerHeight,viewport_width=null===(_window2=window)||void 0===_window2?void 0:_window2.innerWidth,x=0,y=0;if(bounds){var markX=bounds.x||0,markY=bounds.y||0,markWidth=bounds.width||0,markHeight=bounds.height||0,yOffset=markHeight;viewport_height-(markY+markHeight)<minHeight&&(yOffset=0-(minHeight+markHeight)),x=markX+.5*markWidth,y=markY+yOffset}var rightLimit=viewport_width-minWidth||0,bottomLimit=viewport_height-minHeight||0;return x=Math.max(x,0),y=Math.max(y,0),{x:x=Math.min(x,rightLimit),y:y=Math.min(y,bottomLimit)}}var ConsensusPopup_StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"ConsensusPopup__StyledBox",componentId:"sc-4q4c0a-0"})(['font-family:"Roboto Mono Regular",monospace;ul{font-size:0.8em;}']);function ConsensusPopup(_ref){var{active=!1,bounds,closeFn=()=>{},line={consensusText:"",textOptions:[]}}=_ref,{t}=useTranslation("components"),itemProps={},position=getDefaultPosition(bounds,250,350);return line.textOptions.forEach((option,index)=>itemProps[index]={border:!1,pad:{horizontal:"none",vertical:"xsmall"}}),(0,jsx_runtime.jsxs)(MovableModal_MovableModal,{active,closeFn,headingBackground:{dark:"dark-5",light:"neutral-6"},height:{min:"250px",max:"350px"},onWheel:function onWheel(event){event.stopPropagation()},pad:{bottom:"medium",left:"medium",right:"medium"},position:"top-left",plain:!0,rndProps:{cancel:".element-that-ignores-drag-actions",default:position,maxHeight:350,minHeight:250,minWidth:350},title:t("SubjectViewer.InteractionLayer.TranscribedLines.ConsensusPopup.title"),titleColor:"",children:[(0,jsx_runtime.jsx)(Paragraph.f,{children:t("SubjectViewer.InteractionLayer.TranscribedLines.ConsensusPopup.explanation",{count:line.textOptions.length})}),(0,jsx_runtime.jsxs)(ConsensusPopup_StyledBox,{className:"element-that-ignores-drag-actions",children:[line.consensusText&&(0,jsx_runtime.jsxs)(Paragraph.f,{children:[line.consensusText,(0,jsx_runtime.jsx)("br",{}),(0,jsx_runtime.jsx)(Text.E,{children:(0,jsx_runtime.jsx)("em",{children:t("SubjectViewer.InteractionLayer.TranscribedLines.ConsensusPopup.aggregatedTranscription")})})]}),!line.consensusText&&(0,jsx_runtime.jsx)(Paragraph.f,{children:t("SubjectViewer.InteractionLayer.TranscribedLines.ConsensusPopup.noAggregation")}),line.textOptions.length>0&&(0,jsx_runtime.jsx)(List.B,{data:line.textOptions,itemKey:(item,index)=>"line-".concat(index),itemProps}),0===line.textOptions.length&&(0,jsx_runtime.jsx)(Paragraph.f,{children:t("SubjectViewer.InteractionLayer.TranscribedLines.ConsensusPopup.transcriptionsUnavailable")})]})]})}function TranscribedLines_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function TranscribedLines_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?TranscribedLines_ownKeys(Object(t),!0).forEach(function(r){TranscribedLines_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):TranscribedLines_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function TranscribedLines_defineProperty(e,r,t){return(r=function TranscribedLines_toPropertyKey(t){var i=function TranscribedLines_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}ConsensusPopup.propTypes={active:prop_types.bool,bounds:prop_types.object,closeFn:prop_types.func,line:(0,prop_types.shape)({consensusText:prop_types.string,textOptions:prop_types.array})};var ConsensusLine=styled_components_browser_esm.default.g.withConfig({displayName:"TranscribedLines__ConsensusLine",componentId:"sc-jddd70-0"})(["cursor:pointer;filter:drop-shadow(1px 1px 4px #5c5c5c);&:focus{outline:none;}&:focus-visible{",'}&[aria-disabled="true"]{cursor:not-allowed;opacity:0.3;}'],props=>(0,styled_components_browser_esm.css)(["outline:solid medium ",";"],props.focusColor)),defaultLine={consensusText:"",textOptions:[]};function onClick(event,callback,line){callback(line,event.target)}function onKeyDown(event,callback,line){if("Enter"===event.key||" "===event.key){var node=event.target;event.preventDefault(),callback(line,node)}}function TranscribedLines(){var{active,annotation,frame,invalidMark,lines,marks,task,visible}=useTranscriptionReductions(),theme=(0,styled_components_browser_esm.useTheme)(),[bounds,setBounds]=(0,react.useState)({}),[line,setLine]=(0,react.useState)(defaultLine),[show,setShow]=(0,react.useState)(!1),activeLine=(0,react.useRef)(null),scrollPosition=(0,react.useRef)(null),{t}=useTranslation("components");if((0,react.useEffect)(function handleVisibilityChange(){!show&&activeLine.current&&(activeLine.current.focus({preventScroll:!0}),scrollPosition.current&&window.scrollTo(scrollPosition.current.x,scrollPosition.current.y))},[show]),!visible)return null;var invalidTranscriptionTask=!active||0===Object.keys(task).length,completedLines=lines.filter(line=>line.consensusReached),transcribedLines=lines.filter(line=>!line.consensusReached),fills_transcribed="drawing-pink",fills_complete="light-4",focusColor=theme.global.colors[theme.global.colors.focus];function createMark(line,node){var{activeTool,activeToolIndex,setActiveMark}=task;if(activeTool){var[{x:x1,y:y1},{x:x2,y:y2}]=line.points,{id}=line,markSnapshot={frame,id,x1,y1,x2,y2,toolIndex:activeToolIndex},mark=activeTool.createMark(markSnapshot);setActiveMark(mark);var previousAnnotationValuesForEachMark=[];activeTool.tasks.forEach(task=>{var previousAnnotationValuesForThisMark={id:mark.id,taskKey:task.taskKey,taskType:task.type,values:line.textOptions};previousAnnotationValuesForEachMark.push(previousAnnotationValuesForThisMark)}),mark.setPreviousAnnotations(previousAnnotationValuesForEachMark),mark.finish();var value=annotation.value.slice();annotation.update([...value,mark.id])}}function showConsensus(line,node){activeLine.current=document.activeElement,scrollPosition.current={x:window.scrollX,y:window.scrollY};var bounds=(null==node?void 0:node.getBoundingClientRect())||{};setBounds(bounds),setLine(line),setShow(!0)}return(0,jsx_runtime.jsxs)("g",{children:[completedLines.map((line,index)=>{var[{x:x1,y:y1},{x:x2,y:y2}]=line.points,mark={length:Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2)),x1,y1,x2,y2},id="complete-".concat(index),disabled=invalidMark,lineProps={};return disabled||(lineProps.onClick=event=>onClick(event,showConsensus,line),lineProps.onKeyDown=event=>onKeyDown(event,showConsensus,line)),(0,jsx_runtime.jsx)(Tooltip_Tooltip,{id,icon:(0,jsx_runtime.jsx)(TooltipIcon_TooltipIcon,{fill:fills_complete}),label:t("SubjectViewer.InteractionLayer.TranscribedLines.complete"),children:(0,jsx_runtime.jsx)(ConsensusLine,TranscribedLines_objectSpread(TranscribedLines_objectSpread({role:"button","aria-disabled":disabled.toString(),"aria-describedby":id,"aria-label":line.consensusText,className:"complete line",focusColor,pointerEvents:disabled?"none":"painted",tabIndex:disabled?-1:0},lineProps),{},{children:(0,jsx_runtime.jsx)(components_TranscriptionLine_TranscriptionLine,{state:"complete",mark})}))},line.id)}),transcribedLines.map((line,index)=>{var[existingMark]=marks.filter(mark=>mark.id===line.id),disabled=invalidTranscriptionTask||invalidMark||!!existingMark,[{x:x1,y:y1},{x:x2,y:y2}]=line.points,mark={length:Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2)),x1,y1,x2,y2},id="transcribed-".concat(index),lineProps={};return disabled||(lineProps.onClick=event=>onClick(event,createMark,line),lineProps.onKeyDown=event=>onKeyDown(event,createMark,line)),(0,jsx_runtime.jsx)(Tooltip_Tooltip,{id,icon:(0,jsx_runtime.jsx)(TooltipIcon_TooltipIcon,{fill:fills_transcribed}),label:t("SubjectViewer.InteractionLayer.TranscribedLines.transcribed"),children:(0,jsx_runtime.jsx)(ConsensusLine,TranscribedLines_objectSpread(TranscribedLines_objectSpread({role:"button","aria-describedby":id,"aria-disabled":disabled.toString(),"aria-label":line.consensusText,className:"transcribed line",focusColor,pointerEvents:disabled?"none":"painted",tabIndex:disabled?-1:0},lineProps),{},{children:(0,jsx_runtime.jsx)(components_TranscriptionLine_TranscriptionLine,{state:"transcribed",mark})}))},line.id)}),(0,jsx_runtime.jsx)(ConsensusPopup,{active:show,closeFn:function close(event){event.preventDefault(),event.stopPropagation(),setBounds({}),setLine(defaultLine),setShow(!1)},line,bounds})]})}TranscribedLines.propTypes={};const TranscribedLines_TranscribedLines=(0,mobxreact_esm.PA)(TranscribedLines);function ConfirmModal_ConfirmModal_ConfirmModal(_ref){var{onClose=()=>!0,onDelete=()=>!0}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsxs)(Modal.A,{active:!0,modal:!1,children:[(0,jsx_runtime.jsx)(Paragraph.f,{margin:{bottom:"medium"},children:t("SubjectViewer.InteractionLayer.ConfirmModal.confirm")}),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",gap:"small",justify:"center",children:[(0,jsx_runtime.jsx)(Button.$,{label:t("SubjectViewer.InteractionLayer.ConfirmModal.keepWorking"),onClick:onClose}),(0,jsx_runtime.jsx)(PrimaryButton.A,{label:t("SubjectViewer.InteractionLayer.ConfirmModal.close"),color:"teal",onClick:onDelete})]})]})}ConfirmModal_ConfirmModal_ConfirmModal.propTypes={onClose:prop_types.func,onDelete:prop_types.func};const components_ConfirmModal_ConfirmModal=ConfirmModal_ConfirmModal_ConfirmModal;const SaveButton_theme={text:{extend:props=>(0,styled_components_browser_esm.css)(["text-transform:capitalize;html[lang=\"ar\"],html[lang=\"he\"]{&:after{content:' ';}}&:after{content:' ';}"])}};function SaveButton(_ref){var{autoFocus=!1,disabled=!1,onClick}=_ref,{t}=useTranslation("components"),label=t("SubjectViewer.InteractionLayer.SaveButton.save");return(0,jsx_runtime.jsx)(PrimaryButton.A,{autoFocus,disabled,label,onClick})}SaveButton.propTypes={autoFocus:prop_types.bool,disabled:prop_types.bool,onClick:prop_types.func.isRequired};const SaveButton_SaveButton=(0,withThemeContext.A)(SaveButton,SaveButton_theme);var SubTaskPopup_DEFAULT_HANDLER=()=>!1,DEFAULT_ACTIVE_MARK={subTaskMarkBounds:void 0,subTaskPreviousAnnotationValues:void 0,subTaskVisibility:!1,setSubTaskVisibility:SubTaskPopup_DEFAULT_HANDLER};function SubTaskPopup(_ref){var{activeMark=DEFAULT_ACTIVE_MARK,onDelete=SubTaskPopup_DEFAULT_HANDLER}=_ref,{subTaskMarkBounds,subTaskVisibility,subTaskPreviousAnnotationValues,setSubTaskVisibility}=activeMark,{t}=useTranslation("components"),[dimensions,measuredContentRef]=useClientRect(),[confirmationState,setConfirm]=(0,react.useState)("pending"),[position,setPosition]=(0,react.useState)(null);if(!subTaskVisibility)return null;var tasks=null!=activeMark&&activeMark.tasks?activeMark.tasks:[];function close(event){event.preventDefault(),event.stopPropagation(),activeMark.isComplete?(setSubTaskVisibility(!1),activeMark.setPreviousAnnotations()):setConfirm("confirming")}var minHeight=(null==dimensions?void 0:dimensions.height)||200,minWidth=(null==dimensions?void 0:dimensions.width)||350,defaultPosition=getDefaultPosition(subTaskMarkBounds,minHeight,minWidth),disabled="confirming"===confirmationState,onDragStop=(0,react.useCallback)(function(event,data){var{x,y}=data;setPosition({x,y})}),onResize=(0,react.useCallback)(function(event,direction,ref,delta,position){setPosition(position)}),rndProps={cancel:".element-that-ignores-drag-actions",minHeight,minWidth,onDragStop,onResize,position:position||defaultPosition};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(MovableModal_MovableModal,{ref:measuredContentRef,active:!0,closeFn:close,headingBackground:"transparent",onWheel:function onWheel(event){event.stopPropagation()},pad:{bottom:"medium",left:"medium",right:"medium"},plain:!0,position:"top-left",rndProps,titleColor:"",children:(0,jsx_runtime.jsx)(Box.a,{className:"element-that-ignores-drag-actions",gap:"small",children:(0,jsx_runtime.jsxs)("form",{onSubmit:close,children:[tasks.map((task,index)=>{var annotation=activeMark.annotation(task);annotation||(annotation=activeMark.addAnnotation(task));var taskType=task.type;"dropdown-simple"===taskType&&(taskType="dropdownSimple");var{TaskComponent}=tasks_namespaceObject[taskType];if(annotation&&TaskComponent){var _subTaskPreviousAnnot,requiredEmphasis=task.required&&!task.isComplete(annotation)&&"closed"===confirmationState;return(0,jsx_runtime.jsxs)(Box.a,{className:"subtaskpopup-task",border:!!requiredEmphasis&&{size:"small",color:"tomato"},overflow:"auto",pad:{horizontal:"2px"},children:[(0,jsx_runtime.jsx)(TaskComponent,{annotation,autoFocus:0===index,disabled,suggestions:null==subTaskPreviousAnnotationValues||null===(_subTaskPreviousAnnot=subTaskPreviousAnnotationValues.get(task.taskKey))||void 0===_subTaskPreviousAnnot?void 0:_subTaskPreviousAnnot.values,task}),requiredEmphasis&&(0,jsx_runtime.jsx)(Paragraph.f,{children:(0,jsx_runtime.jsx)("strong",{children:t("SubjectViewer.InteractionLayer.SubTaskPopup.required")})})]},annotation.id)}return(0,jsx_runtime.jsx)(Box.a,{pad:"none",children:(0,jsx_runtime.jsx)(Paragraph.f,{children:t("SubjectViewer.InteractionLayer.SubTaskPopup.notRender")})},"".concat(index,"-").concat(null==task?void 0:task.type))}),(0,jsx_runtime.jsx)(SaveButton_SaveButton,{disabled,onClick:close})]})})}),"confirming"===confirmationState&&(0,jsx_runtime.jsx)(components_ConfirmModal_ConfirmModal,{onClose:function onCloseConfirm(){setConfirm("closed")},onDelete:function deleteMark(){var{tool}=activeMark;setConfirm("closed"),setSubTaskVisibility(!1),tool.deleteMark(activeMark),onDelete()}})]})}SubTaskPopup.propTypes={activeMark:prop_types_default().shape({subTaskMarkBounds:prop_types_default().object,subTaskPreviousAnnotationValues:mobxreact_esm.By.observableMap,subTaskVisibility:prop_types_default().bool,setSubTaskVisibility:prop_types_default().func}),onDelete:prop_types_default().func};const SubTaskPopup_SubTaskPopup=SubTaskPopup,SubTaskPopupContainer=(0,mobxreact_esm.PA)(function SubTaskPopupContainer(_ref){var{activeMark,onDelete}=_ref;return activeMark&&activeMark.subTaskVisibility?(0,jsx_runtime.jsx)(SubTaskPopup_SubTaskPopup,{activeMark,onDelete}):null});var getFixedNumber_console=__webpack_require__("../../node_modules/console-browserify/index.js");var DrawingCanvas=(0,styled_components_browser_esm.default)("rect").withConfig({displayName:"InteractionLayer__DrawingCanvas",componentId:"sc-j9ll7u-0"})(["",""],props=>props.disabled?(0,styled_components_browser_esm.css)(["cursor:not-allowed;"]):(0,styled_components_browser_esm.css)(["cursor:crosshair;"]));function InteractionLayer_cancelEvent(event){event.preventDefault(),event.stopPropagation()}function InteractionLayer(_ref){var{activeMark,activeTool,activeToolIndex=0,annotation,disabled=!1,frame=0,height,marks=[],move,multiImageCloneMarkers=!1,setActiveMark=()=>{},width,played,duration}=_ref,[creating,setCreating]=(0,react.useState)(!1),canvasRef=(0,react.useRef)(null);function createMark(event){var _annotation$value,timeStamp=function getFixedNumber(number,digits){return digits||getFixedNumber_console.log("getFixedNumber: Missing digits variable"),Math.round(number*10**digits)/10**digits}(played,5),mark=activeTool.createMark({id:cuid_default()(),frame:multiImageCloneMarkers?0:frame,toolIndex:activeToolIndex});mark.initialPosition(convertEvent(event,canvasRef.current)),setActiveMark(mark),setCreating(!0),mark.setSubTaskVisibility(!1),mark.setVideoTime(timeStamp,duration);var markIDs=null===(_annotation$value=annotation.value)||void 0===_annotation$value?void 0:_annotation$value.map(mark=>mark.id);annotation.update([...markIDs,mark.id])}function onFinish(event){var _event$preventDefault,_event$stopPropagatio;null==event||null===(_event$preventDefault=event.preventDefault)||void 0===_event$preventDefault||_event$preventDefault.call(event),null==event||null===(_event$stopPropagatio=event.stopPropagation)||void 0===_event$stopPropagatio||_event$stopPropagatio.call(event),setCreating(!1),activeMark.frame===frame&&activeMark.element&&!isInBounds(activeMark.element,canvasRef.current)&&(activeTool.deleteMark(activeMark),setActiveMark(void 0))}function inactivateMark(){setActiveMark(void 0)}return creating&&!activeMark&&setCreating(!1),null!=activeMark&&activeMark.finished&&!activeMark.isValid&&(activeTool.deleteMark(activeMark),setActiveMark(void 0)),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DrawingCanvas,{ref:canvasRef,disabled:disabled||move,pointerEvents:move?"none":"all",width,height,fill:"transparent",onPointerDown:function onPointerDown(event){if(disabled||InteractionLayer_cancelEvent(event),disabled||move)return!0;var _activeTool$handlePoi,{target,pointerId}=event;return target.setPointerCapture(pointerId),!!activeTool.type&&(creating?(null==activeTool||null===(_activeTool$handlePoi=activeTool.handlePointerDown)||void 0===_activeTool$handlePoi||_activeTool$handlePoi.call(activeTool,convertEvent(event,canvasRef.current),activeMark),activeMark.finished&&onFinish(event),!0):(createMark(event),!1))},onPointerMove:function onPointerMove(event){var _activeTool$handlePoi2;InteractionLayer_cancelEvent(event),creating&&(null==activeTool||null===(_activeTool$handlePoi2=activeTool.handlePointerMove)||void 0===_activeTool$handlePoi2||_activeTool$handlePoi2.call(activeTool,convertEvent(event,canvasRef.current),activeMark))},onPointerUp:function onPointerUp(event){var _activeTool$handlePoi3;InteractionLayer_cancelEvent(event),creating&&(null==activeTool||null===(_activeTool$handlePoi3=activeTool.handlePointerUp)||void 0===_activeTool$handlePoi3||_activeTool$handlePoi3.call(activeTool,convertEvent(event,canvasRef.current),activeMark),activeMark.finished&&onFinish(event))}}),(0,jsx_runtime.jsx)(TranscribedLines_TranscribedLines,{}),(0,jsx_runtime.jsx)(SubTaskPopupContainer,{activeMark,onDelete:inactivateMark}),(0,jsx_runtime.jsx)(DrawingToolMarksConnector,{activeMark,marks,onDelete:inactivateMark,onDeselectMark:inactivateMark,onFinish,onSelectMark:function onSelectMark(mark){setActiveMark(mark)},onMove:(mark,difference)=>mark.move(difference),pointerEvents:creating?"none":"painted",played})]})}InteractionLayer.propTypes={activeMark:prop_types_default().object,activeTool:prop_types_default().object.isRequired,activeToolIndex:prop_types_default().number,annotation:prop_types_default().shape({task:prop_types_default().string,taskType:prop_types_default().string,value:prop_types_default().array}).isRequired,disabled:prop_types_default().bool,frame:prop_types_default().number,height:prop_types_default().number.isRequired,marks:prop_types_default().array,multiImageCloneMarkers:prop_types_default().bool,setActiveMark:prop_types_default().func,width:prop_types_default().number.isRequired};const InteractionLayer_InteractionLayer=InteractionLayer;function PreviousMarks_storeMapper(classifierStore){var _classifierStore$work,{classifications:{active:classification},workflowSteps:{activeInteractionTask,interactionTask:{shownMarks}}}=classifierStore,{multi_image_clone_markers:multiImageCloneMarkers}=null===(_classifierStore$work=classifierStore.workflows)||void 0===_classifierStore$work||null===(_classifierStore$work=_classifierStore$work.active)||void 0===_classifierStore$work?void 0:_classifierStore$work.configuration;return{multiImageCloneMarkers,previousAnnotations:(null==classification?void 0:classification.previousInteractionTaskAnnotations(activeInteractionTask.taskKey))||[],shownMarks}}function PreviousMarks(_ref){var{frame=0}=_ref,{multiImageCloneMarkers,previousAnnotations,shownMarks="ALL"}=useStores(PreviousMarks_storeMapper),marksToShow=shownMarks===helpers_shownMarks.ALL||shownMarks===helpers_shownMarks.USER;return(null==previousAnnotations?void 0:previousAnnotations.length)>0&&marksToShow?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:previousAnnotations.map(annotation=>{var annotationValuesPerFrame=multiImageCloneMarkers?annotation.value:annotation.value.filter(value=>value.frame===frame);return(0,jsx_runtime.jsx)("g",{className:"markGroup",pointerEvents:"none",children:(0,jsx_runtime.jsx)(DrawingToolMarksConnector,{disabled:!0,marks:annotationValuesPerFrame})},annotation.task)})}):null}PreviousMarks.propTypes={frame:prop_types_default().number};const PreviousMarks_PreviousMarks=(0,mobxreact_esm.PA)(PreviousMarks);function InteractionLayerContainer(_ref){var{activeMark,activeTool,activeToolIndex,annotation,disabled=!1,frame=0,height,hiddenMarkIds=[],marks=[],move=!1,multiImageCloneMarkers=!1,setActiveMark=()=>{},shownMarks=helpers_shownMarks.ALL,taskKey="",width,played,duration}=_ref,hiddenSet=shownMarks===helpers_shownMarks.NONE?new Set(hiddenMarkIds):null,newMarks=hiddenSet?marks.filter(mark=>!hiddenSet.has(mark.id)):marks,visibleMarksPerFrame=multiImageCloneMarkers?newMarks:null==newMarks?void 0:newMarks.filter(mark=>mark.frame===frame);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[activeTool&&(0,jsx_runtime.jsx)(InteractionLayer_InteractionLayer,{activeMark,activeTool,activeToolIndex,annotation,disabled,duration,frame,height,marks:visibleMarksPerFrame,move,multiImageCloneMarkers,played,setActiveMark,width},taskKey),(0,jsx_runtime.jsx)(PreviousMarks_PreviousMarks,{frame})]})}InteractionLayerContainer.propTypes={activeMark:prop_types_default().object,activeTool:prop_types_default().object,disabled:prop_types_default().bool,duration:prop_types_default().number,frame:prop_types_default().number,height:prop_types_default().number.isRequired,interactionTaskAnnotations:prop_types_default().array,marks:prop_types_default().array,move:prop_types_default().bool,played:prop_types_default().number,setActiveMark:prop_types_default().func,shownMarks:prop_types_default().string,taskKey:prop_types_default().string,width:prop_types_default().number.isRequired};const InteractionLayer_InteractionLayerContainer=withStores(InteractionLayerContainer,function InteractionLayerContainer_storeMapper(classifierStore){var _classifierStore$subj,_classifierStore$work,activeStepAnnotations=null===(_classifierStore$subj=classifierStore.subjects.active)||void 0===_classifierStore$subj||null===(_classifierStore$subj=_classifierStore$subj.stepHistory)||void 0===_classifierStore$subj||null===(_classifierStore$subj=_classifierStore$subj.latest)||void 0===_classifierStore$subj?void 0:_classifierStore$subj.annotations,{activeStepTasks}=classifierStore.workflowSteps,{move}=classifierStore.subjectViewer,{multi_image_clone_markers:multiImageCloneMarkers}=null===(_classifierStore$work=classifierStore.workflows)||void 0===_classifierStore$work||null===(_classifierStore$work=_classifierStore$work.active)||void 0===_classifierStore$work?void 0:_classifierStore$work.configuration,[activeInteractionTask]=activeStepTasks.filter(task=>"drawing"===task.type||"transcription"===task.type),annotation=null==activeStepAnnotations?void 0:activeStepAnnotations.find(annotation=>"drawing"===annotation.taskType||"transcription"===annotation.taskType),{activeTool,activeToolIndex,hiddenMarkIds,marks,setActiveMark,shownMarks,taskKey}=activeInteractionTask||{};return{activeMark:(0,mobx_state_tree_module.$Q)(()=>null==activeInteractionTask?void 0:activeInteractionTask.activeMark),activeTool,activeToolIndex,annotation,disabled:null==activeTool?void 0:activeTool.disabled,hiddenMarkIds,marks,move,multiImageCloneMarkers,setActiveMark,shownMarks,taskKey}});function SingleImageCanvas(_ref){var{enableInteractionLayer=!1,frame=0,imgRef,invert=!1,move=!1,naturalHeight,naturalWidth,rotation=0,src,subject,transform,transformMatrix}=_ref,canvasLayer=(0,react.useRef)(),rotationTransform=rotation?"rotate(".concat(rotation," ").concat(naturalWidth/2," ").concat(naturalHeight/2,")"):"";return(0,jsx_runtime.jsx)(shared_SVGContext.Provider,{value:{canvas:canvasLayer.current,rotate:rotation,transformMatrix},children:(0,jsx_runtime.jsx)("svg",{children:(0,jsx_runtime.jsx)("g",{"data-testid":"single-image-canvas-visxzoom-transform-group",transform,children:(0,jsx_runtime.jsxs)("g",{ref:canvasLayer,"data-testid":"single-image-canvas-rotation-transform-group",transform:rotationTransform,children:[(0,jsx_runtime.jsx)(SVGImage_SVGImage,{ref:imgRef,invert,naturalHeight,naturalWidth,src,subjectID:null==subject?void 0:subject.id}),enableInteractionLayer&&(0,jsx_runtime.jsx)(InteractionLayer_InteractionLayerContainer,{frame,height:naturalHeight,move,width:naturalWidth})]})})})})}SingleImageCanvas.propTypes={enableInteractionLayer:prop_types.bool,frame:prop_types.number,imgRef:(0,prop_types.shape)({current:(0,prop_types.shape)({naturalHeight:prop_types.number,naturalWidth:prop_types.number,src:prop_types.string})}),invert:prop_types.bool,move:prop_types.bool,naturalHeight:prop_types.number,naturalWidth:prop_types.number,rotation:prop_types.number,src:prop_types.string,subject:(0,prop_types.shape)({locations:(0,prop_types.arrayOf)((0,prop_types.shape)({url:prop_types.string}))}),transform:prop_types.string,transformMatrix:(0,prop_types.shape)({scaleX:prop_types.number,translateX:prop_types.number,translateY:prop_types.number})};const SingleImageViewer_SingleImageCanvas=SingleImageCanvas;function SingleImageViewer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function SingleImageViewer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SingleImageViewer_ownKeys(Object(t),!0).forEach(function(r){SingleImageViewer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SingleImageViewer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function SingleImageViewer_defineProperty(e,r,t){return(r=function SingleImageViewer_toPropertyKey(t){var i=function SingleImageViewer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Relative=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"SingleImageViewer__Relative",componentId:"sc-1v6ubxk-0"})(["position:relative;"]),StyledSVG=styled_components_browser_esm.default.svg.withConfig({displayName:"SingleImageViewer__StyledSVG",componentId:"sc-1v6ubxk-1"})(["background-color:",";touch-action:pinch-zoom;max-width:",";max-height:",";"],props=>props.theme.global.colors["light-4"],props=>props.$maxWidth,props=>props.$maxHeight),SingleImageViewer_DEFAULT_HANDLER=()=>!0,DEFAULT_ZOOM_CONFIG={direction:"both",maxZoom:10,minZoom:.1,onWheelThrottleWait:100,zoomInValue:1.2,zoomOutValue:.8};function SingleImageViewer(_ref){var{allowsScrolling=!0,enableInteractionLayer=!0,enableRotation=SingleImageViewer_DEFAULT_HANDLER,frame=0,imgRef,invert=!1,limitSubjectHeight=!1,move=!1,naturalHeight,naturalWidth,onKeyDown=SingleImageViewer_DEFAULT_HANDLER,panning=!0,rotation=0,setOnPan=SingleImageViewer_DEFAULT_HANDLER,setOnZoom=SingleImageViewer_DEFAULT_HANDLER,src,subject,title,zoomControlFn=null,zooming=!0}=_ref,{t}=useTranslation("components"),[showZoomHelper,setShowZoomHelper]=(0,react.useState)(!1),[fadingOut,setFadingOut]=(0,react.useState)(!1);(0,react.useEffect)(function onMount(){enableRotation()},[]);var maxHeight=limitSubjectHeight?"min(".concat(naturalHeight,"px, 90vh)"):null,maxWidth=limitSubjectHeight?"".concat(naturalWidth,"px"):"100%";return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[zoomControlFn&&(0,jsx_runtime.jsx)(ZoomControlButton_ZoomControlButton,{onClick:zoomControlFn,zooming}),(0,jsx_runtime.jsxs)(Relative,{align:"flex-end",animation:"fadeIn",overflow:"hidden",width:"100%",children:[showZoomHelper&&(0,jsx_runtime.jsx)(components_ZoomHelperOverlay,{fadingOut}),(0,jsx_runtime.jsxs)(StyledSVG,{"aria-labelledby":null==title?void 0:title.id,"aria-describedby":allowsScrolling?"scrolling-info":void 0,$maxHeight:maxHeight,$maxWidth:maxWidth,viewBox:"0 0 ".concat(naturalWidth," ").concat(naturalHeight),children:[allowsScrolling&&(0,jsx_runtime.jsx)("desc",{id:"scrolling-info",children:t("SubjectViewer.zoomHelp")}),(null==title?void 0:title.id)&&(null==title?void 0:title.text)&&(0,jsx_runtime.jsx)("title",{id:title.id,children:title.text}),(0,jsx_runtime.jsx)(VisXZoom_VisXZoom,{allowsScrolling,height:naturalHeight,move,onFirstScroll:function handleFirstScroll(){allowsScrolling&&zooming&&(setShowZoomHelper(!0),setTimeout(()=>{setFadingOut(!0)},3e3),setTimeout(()=>{setShowZoomHelper(!1),setFadingOut(!1)},3300))},onKeyDown,panning,setOnPan,setOnZoom,width:naturalWidth,zoomConfiguration:DEFAULT_ZOOM_CONFIG,zooming,children:zoomProps=>(0,jsx_runtime.jsx)(SingleImageViewer_SingleImageCanvas,SingleImageViewer_objectSpread(SingleImageViewer_objectSpread({},zoomProps),{},{enableInteractionLayer,frame,imgRef,invert,move,naturalHeight,naturalWidth,rotation,src,subject}))})]})]})]})}SingleImageViewer.propTypes=SingleImageViewer_objectSpread({allowsScrolling:prop_types.bool,enableRotation:prop_types.func,limitSubjectHeight:prop_types.bool,panning:prop_types.bool,setOnPan:prop_types.func,setOnZoom:prop_types.func,title:(0,prop_types.shape)({id:prop_types.string,text:prop_types.string}),zoomControlFn:prop_types.func,zooming:prop_types.bool},SingleImageViewer_SingleImageCanvas.propTypes);const SingleImageViewer_SingleImageViewer=SingleImageViewer;function SingleImageViewerContainer_storeMapper(classifierStore){var{subjects:{active:subject},subjectViewer:{enableRotation,frame,invert,move,rotation,setOnZoom,setOnPan},workflows:{active:{configuration:{limit_subject_height:limitSubjectHeight}}}}=classifierStore;return{enableRotation,frame,invert,limitSubjectHeight,move,rotation,setOnZoom,setOnPan,subject}}var SingleImageViewerContainer_DEFAULT_HANDLER=()=>!0;function SingleImageViewerContainer(_ref){var _subject$locations$fr,{enableInteractionLayer=!0,imageLocation=null,loadingState=async_states_default().initialized,onError=SingleImageViewerContainer_DEFAULT_HANDLER,onReady=SingleImageViewerContainer_DEFAULT_HANDLER,setOnPan:propSetOnPan=null,setOnZoom:propSetOnZoom=null,title,zoomControlFn=null,zooming=!0}=_ref,{enableRotation,frame,invert,limitSubjectHeight,move,rotation,setOnZoom:storeSetOnZoom,setOnPan:storeSetOnPan,subject}=useStores(SingleImageViewerContainer_storeMapper),{onKeyZoom}=useKeyZoom(),effectiveSetOnPan=propSetOnPan||storeSetOnPan,effectiveSetOnZoom=propSetOnZoom||storeSetOnZoom,imageLocationUrl=null!=imageLocation&&imageLocation.url?imageLocation.url:null==subject||null===(_subject$locations$fr=subject.locations[frame])||void 0===_subject$locations$fr?void 0:_subject$locations$fr.url,{img,error,loading,subjectImage}=useSubjectImage({frame,src:imageLocationUrl,onError,onReady}),{naturalHeight=600,naturalWidth=800}=img;return loadingState===async_states_default().loading?(0,jsx_runtime.jsx)(components_PlaceholderSVG,{ref:subjectImage,maxHeight:limitSubjectHeight?"min(".concat(naturalHeight,"px, 90vh)"):null,maxWidth:limitSubjectHeight?"".concat(naturalWidth,"px"):"100%",viewBox:"0 0 ".concat(naturalWidth," ").concat(naturalHeight)}):loadingState===async_states_default().error?(0,jsx_runtime.jsx)("div",{children:"Something went wrong."}):loadingState===async_states_default().success?(0,jsx_runtime.jsx)(SingleImageViewer_SingleImageViewer,{enableInteractionLayer,enableRotation,frame,imgRef:subjectImage,invert,limitSubjectHeight,move,naturalHeight,naturalWidth,onKeyDown:onKeyZoom,rotation,setOnPan:effectiveSetOnPan,setOnZoom:effectiveSetOnZoom,src:img.src,subject,title,zoomControlFn,zooming}):null}SingleImageViewerContainer.propTypes={enableInteractionLayer:prop_types.bool,imageLocation:(0,prop_types.shape)({url:prop_types.string}),loadingState:prop_types.string,onError:prop_types.func,onReady:prop_types.func,setOnPan:prop_types.func,setOnZoom:prop_types.func,title:(0,prop_types.shape)({id:prop_types.string,text:prop_types.string}),zoomControlFn:prop_types.func,zooming:prop_types.bool};const SingleImageViewer_SingleImageViewerContainer=(0,mobxreact_esm.PA)(SingleImageViewerContainer);function FlipIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function FlipIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FlipIcon_ownKeys(Object(t),!0).forEach(function(r){FlipIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FlipIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function FlipIcon_defineProperty(e,r,t){return(r=function FlipIcon_toPropertyKey(t){var i=function FlipIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FlipIcon(props){return(0,jsx_runtime.jsxs)(Blank.h,FlipIcon_objectSpread(FlipIcon_objectSpread({viewBox:"0 0 26 26"},props),{},{children:[(0,jsx_runtime.jsx)("circle",{cx:"13",cy:"13",r:"12",stroke:"currentColor",fill:"transparent"}),(0,jsx_runtime.jsxs)("g",{transform:"translate(6, 6)",children:[(0,jsx_runtime.jsx)("polygon",{points:"4.647375 8.27813672 4.647375 1.98481641 7.55198437 4.88942578 8.27813672 4.13906836 4.13906836 1.687539e-14 -3.99680289e-14 4.13906836 0.726152344 4.8652207 3.63076172 1.98481641 3.63076172 8.27813672",stroke:"currentColor",strokeWidth:"1"}),(0,jsx_runtime.jsx)("polygon",{points:"10.3355684 13.1763867 14.4746367 9.03731836 13.7484844 8.28696094 10.843875 11.1915703 10.843875 4.89825 9.82726172 4.89825 9.82726172 11.1915703 6.92265234 8.31116602 6.1965 9.03731836",stroke:"currentColor",strokeWidth:"1"})]})]}))}const Controls_theme={checkBox:{border:{color:{light:"light-6",dark:"light-3"}},hover:{border:{color:{dark:"accent-1",light:"neutral-1"}}},gap:"0px",icon:{size:"20px"},size:"14px"},radioButton:{border:{color:{light:"light-6",dark:"light-3"}},hover:{border:{color:{dark:"accent-1",light:"neutral-1"}}},gap:"0px",size:"10px",icon:{size:"16px"}}};var CheckBox=__webpack_require__("../../node_modules/grommet/es6/components/CheckBox/CheckBox.js"),Label_StyledLabel=styled_components_browser_esm.default.span.withConfig({displayName:"Label__StyledLabel",componentId:"sc-m4doog-0"})(["align-items:center;cursor:pointer;display:inline-flex;flex-direction:row;padding:2.5px;svg{padding:0px 0.5ch;}&:hover,&:focus-within{background-color:rgba(216,216,216,0.4);}"]);function Label_Label_Label(props){var{colors,label,seriesIndex,seriesOptions={},highlightedSeries}=props,highlighted=isDataSeriesHighlighted({highlightedSeries,seriesOptions}),Glyph=getDataSeriesSymbol({seriesOptions,seriesIndex}),color=getDataSeriesColor({defaultColors:Object.values(colors.drawingTools),highlighted,seriesOptions,seriesIndex,themeColors:colors});return(0,jsx_runtime.jsxs)(Label_StyledLabel,{children:[(0,jsx_runtime.jsx)("svg",{viewBox:"0 0 10 10",width:"15px",children:(0,jsx_runtime.jsx)(Glyph,{left:5,fill:color,size:20,stroke:highlighted?"black":colors["light-4"],top:5})}),(0,jsx_runtime.jsx)(SpacedText.A,{style:{whiteSpace:"nowrap"},size:"0.5em",weight:"bold",children:label})]})}Label_Label_Label.propTypes={colors:prop_types_default().object.isRequired,label:prop_types_default().string.isRequired,seriesIndex:prop_types_default().number.isRequired,seriesOptions:prop_types_default().object,highlighted:prop_types_default().bool};const components_Label_Label=Label_Label_Label;var HighlightSeriesCheckBoxes_DEFAULT_HANDLER=()=>!1;function HighlightSeriesCheckBoxes(props){var{data,highlightedSeries,setSeriesHighlight=HighlightSeriesCheckBoxes_DEFAULT_HANDLER,theme:{global:{colors={drawingTools:{}}}}={global:{colors:{drawingTools:{}}}}}=props;return(0,jsx_runtime.jsx)(Box.a,{direction:"column",pad:"none",children:data.map((series,seriesIndex)=>{var{seriesOptions}=series,{label}=seriesOptions,checked=isDataSeriesHighlighted({highlightedSeries,seriesOptions});return(0,jsx_runtime.jsx)(CheckBox.o,{checked,label:(0,jsx_runtime.jsx)(components_Label_Label,{colors,checked,label,seriesIndex,seriesOptions,highlightedSeries}),name:"series-highlight",onChange:event=>{setSeriesHighlight(event)},type:"checkbox",value:label},"".concat(label,"-").concat(seriesIndex))})})}HighlightSeriesCheckBoxes.propTypes={data:prop_types_default().arrayOf(prop_types_default().shape({seriesData:prop_types_default().array,seriesOptions:prop_types_default().object})).isRequired,highlightedSeries:prop_types_default().arrayOf(prop_types_default().string).isRequired,setSeriesHighlight:prop_types_default().func,theme:prop_types_default().object};const HighlightSeriesCheckBoxes_HighlightSeriesCheckBoxes=(0,styled_components_browser_esm.withTheme)(HighlightSeriesCheckBoxes);var RadioButton=__webpack_require__("../../node_modules/grommet/es6/components/RadioButton/RadioButton.js"),PhaseFocusControls_DEFAULT_HANDLER=()=>!1;function PhaseFocusControls(props){var{data,highlightedSeries,phaseFocusedSeries,setSeriesPhaseFocus=PhaseFocusControls_DEFAULT_HANDLER,theme:{global:{colors={drawingTools:{}}}}={global:{colors:{drawingTools:{}}}}}=props,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(Box.a,{direction:"column",pad:"none",children:data.map((series,seriesIndex)=>{var{seriesOptions}=series,checked=phaseFocusedSeries===seriesIndex,label=(null==seriesOptions?void 0:seriesOptions.label)||t("SubjectViewer.VariableStarViewer.label",{id:seriesIndex+1});return(0,jsx_runtime.jsx)(RadioButton.a,{checked,label:(0,jsx_runtime.jsx)(components_Label_Label,{colors,highlightedSeries,seriesIndex,seriesOptions,label,visible:!0}),name:"series-phase-focus",onChange:event=>{setSeriesPhaseFocus(event)},type:"radio",value:seriesIndex.toString()},"".concat(label,"-").concat(seriesIndex))})})}PhaseFocusControls.propTypes={data:prop_types_default().arrayOf(prop_types_default().shape({seriesData:prop_types_default().array,seriesOptions:prop_types_default().object})).isRequired,phaseFocusedSeries:prop_types_default().number.isRequired,setSeriesPhaseFocus:prop_types_default().func,theme:prop_types_default().object};const PhaseFocusControls_PhaseFocusControls=(0,styled_components_browser_esm.withTheme)(PhaseFocusControls);var FormField=__webpack_require__("../../node_modules/grommet/es6/components/FormField/FormField.js");const PeriodMultipleControls_theme={checkBox:{icon:{size:"20px"},size:"14px"},formField:{border:"none",extend:()=>(0,styled_components_browser_esm.css)(["flex-direction:column-reverse;"]),label:{margin:"none"},margin:"none"},radioButton:{border:{color:{light:"light-6",dark:"light-3"}},extend:()=>(0,styled_components_browser_esm.css)(["position:relative;input:not(:checked) + div{height:5px;margin-bottom:5px;position:relative;top:2.5px;width:5px;}"]),hover:{border:{color:{dark:"accent-1",light:"neutral-1"}}},gap:"0px",size:"10px",icon:{size:"6px"}}};var StyledRadioButtonGroup=(0,styled_components_browser_esm.default)(RadioButtonGroup.z).withConfig({displayName:"PeriodMultipleControls__StyledRadioButtonGroup",componentId:"sc-13gmub3-0"})(["label{flex-direction:column;}> div{position:relative;}> div:after{"," bottom:0;content:'';height:5px;left:1px;position:absolute;right:0;top:0;width:28px;}"],props=>(0,styled_components_browser_esm.css)(["border-bottom:1px solid ",";"],props.color));function PeriodMultipleControls(props){var{periodMultiple,options,setPeriodMultiple,theme={global:{colors:{}}}}=props,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(FormField.z,{htmlFor:"periodMultiple",label:(0,jsx_runtime.jsx)(SpacedText.A,{size:"10px",weight:"bold",children:t("SubjectViewer.VariableStarViewer.periodMultiple")}),children:(0,jsx_runtime.jsx)(StyledRadioButtonGroup,{color:theme.global.colors["light-6"],direction:"row",gap:"medium",id:"periodMultiple",name:"periodMultiple",onChange:event=>setPeriodMultiple(event),options,value:periodMultiple.toString()})})}PeriodMultipleControls.propTypes={options:prop_types_default().array.isRequired,periodMultiple:prop_types_default().number.isRequired,setPeriodMultiple:prop_types_default().func.isRequired,theme:prop_types_default().object};const PeriodMultipleControls_PeriodMultipleControls=(0,withThemeContext.A)(PeriodMultipleControls,PeriodMultipleControls_theme);var FlipButton=(0,styled_components_browser_esm.default)(PlainButton.Ay).withConfig({displayName:"Controls__FlipButton",componentId:"sc-65ycin-0"})(["&:enabled:hover,&:focus{text-decoration:none;> div > svg > circle{fill:rgba(216,216,216,0.4);}}> div{flex-direction:column;}"]),Controls_DEFAULT_HANDLER=()=>!1;function Controls(props){var{data=[],gridArea="",highlightedSeries=[],periodMultiple=1,periodMultipleOptions=["0.5","1","2","3"],phaseFocusedSeries=0,setSeriesHighlight=Controls_DEFAULT_HANDLER,setSeriesPhaseFocus,setPeriodMultiple=Controls_DEFAULT_HANDLER,setYAxisInversion=Controls_DEFAULT_HANDLER}=props,{t}=useTranslation("components"),radioButtonOptions=periodMultipleOptions.map(option=>({label:(0,jsx_runtime.jsx)(SpacedText.A,{size:"10px",style:{width:"1ch"},weight:"bold",children:option}),value:option}));return(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-3",light:"neutral-6"},border:{color:{light:"light-3",dark:"dark-3"},size:"xsmall"},direction:"row",justify:"between",gridArea,pad:"xsmall",children:[(0,jsx_runtime.jsx)(SpacedText.A,{style:{fontSize:"0.5em",textAlign:"center",transform:"rotate(180deg)",writingMode:"vertical-lr"},children:t("SubjectViewer.VariableStarViewer.controls")}),(0,jsx_runtime.jsx)(FlipButton,{icon:(0,jsx_runtime.jsx)(FlipIcon,{}),label:(0,jsx_runtime.jsx)(SpacedText.A,{margin:{top:"5px"},size:"10px",weight:"bold",children:t("SubjectViewer.VariableStarViewer.flip")}),onClick:event=>setYAxisInversion(event),pad:"small"}),(0,jsx_runtime.jsx)(PeriodMultipleControls_PeriodMultipleControls,{options:radioButtonOptions,periodMultiple,setPeriodMultiple}),(0,jsx_runtime.jsxs)(Box.a,{justify:"between",children:[(0,jsx_runtime.jsx)(PhaseFocusControls_PhaseFocusControls,{data,highlightedSeries,phaseFocusedSeries,setSeriesPhaseFocus}),(0,jsx_runtime.jsx)(SpacedText.A,{size:"10px",weight:"bold",children:t("SubjectViewer.VariableStarViewer.phaseFocus")})]}),(0,jsx_runtime.jsxs)(Box.a,{justify:"between",children:[(0,jsx_runtime.jsx)(HighlightSeriesCheckBoxes_HighlightSeriesCheckBoxes,{data,highlightedSeries,setSeriesHighlight}),(0,jsx_runtime.jsx)(SpacedText.A,{size:"10px",weight:"bold",children:t("SubjectViewer.VariableStarViewer.highlight")})]})]})}Controls.propTypes={data:prop_types_default().array,gridArea:prop_types_default().string,highlightedSeries:prop_types_default().arrayOf(prop_types_default().object),periodMultiple:prop_types_default().number,periodMultipleOptions:prop_types_default().arrayOf(prop_types_default().string),phaseFocusedSeries:prop_types_default().number,setSeriesHighlight:prop_types_default().func,setPeriodMultiple:prop_types_default().func,setYAxisInversion:prop_types_default().func};const Controls_Controls=(0,withThemeContext.A)(Controls,Controls_theme);var VariableStarViewer_DEFAULT_HANDLER=()=>!1,VariableStarViewer=(0,react.forwardRef)((props,ref)=>{var _rawJSON$data,{allowPanZoom="",barJSON={amplitude:{data:[],chartOptions:{}},period:{data:[],chartOptions:{}}},highlightedSeries=[],imageLocation=null,invertYAxis=!1,loadingState,parentHeight,parentWidth,periodMultiple=1,phaseFocusedSeries=0,phasedJSON={data:[],chartOptions:{}},phaseLimit,rawJSON={data:{scatterPlot:{data:[],chartOptions:{}},barCharts:{}}},setAllowPanZoom,setOnPan=()=>!0,setOnZoom=()=>!0,setPeriodMultiple=VariableStarViewer_DEFAULT_HANDLER,setSeriesPhaseFocus=VariableStarViewer_DEFAULT_HANDLER,setSeriesHighlight=VariableStarViewer_DEFAULT_HANDLER,setYAxisInversion=VariableStarViewer_DEFAULT_HANDLER,theme={dark:!1,global:{colors:{},font:{}}}}=props,scatterPlot=(null==rawJSON?void 0:rawJSON.scatterPlot)||(null==rawJSON||null===(_rawJSON$data=rawJSON.data)||void 0===_rawJSON$data?void 0:_rawJSON$data.scatterPlot),{t}=useTranslation("components"),underlays=[{fill:theme.dark?theme.global.colors["light-5"]:theme.global.colors["light-3"],startPosition:-phaseLimit,xAxisWidth:phaseLimit},{fill:theme.dark?theme.global.colors["light-5"]:theme.global.colors["light-3"],startPosition:1,xAxisWidth:phaseLimit}],zoomEnabled={HRDiagram:"HRDiagram"===allowPanZoom,phasedJSON:"phasedJSON"===allowPanZoom,rawJSON:"rawJSON"===allowPanZoom},areas=parentWidth<=768?[{name:"controls",start:[0,0],end:[0,0]},{name:"scatterPlots",start:[0,1],end:[0,1]},{name:"barCharts",start:[0,2],end:[0,2]},{name:"HRDiagram",start:[0,3],end:[0,3]}]:[{name:"controls",start:[0,0],end:[0,0]},{name:"scatterPlots",start:[0,1],end:[0,7]},{name:"barCharts",start:[1,0],end:[1,2]},{name:"HRDiagram",start:[1,3],end:[1,7]}],columns=parentWidth<=768?["full"]:["2/3","1/3"],rows=parentWidth<=768?["80px","590px","330px","620px"]:["80px","80px","80px","80px","80px","80px","80px","50px"];return(0,jsx_runtime.jsxs)(Grid_Grid.x,{areas,columns,fill:!0,gap:"xsmall",pad:{horizontal:"xsmall"},ref,rows,children:[(0,jsx_runtime.jsx)(Controls_Controls,{data:null==scatterPlot?void 0:scatterPlot.data,gridArea:"controls",highlightedSeries,periodMultiple,phaseFocusedSeries,setPeriodMultiple,setSeriesPhaseFocus,setSeriesHighlight,setYAxisInversion,theme}),(0,jsx_runtime.jsx)(Box.a,{border:{color:{light:"light-3",dark:"dark-3"},size:"xsmall"},fill:!0,gridArea:"scatterPlots",children:(0,jsx_runtime.jsxs)(Grid_Grid.x,{areas:[{name:"phasedJSON",start:[0,0],end:[0,0]},{name:"rawJSON",start:[0,1],end:[0,1]}],columns:["auto"],fill:!0,gap:"5px",rows:["2/3","1/3"],children:[(0,jsx_runtime.jsx)(Box.a,{border:zoomEnabled.phasedJSON&&{color:"brand",size:"xsmall"},gridArea:"phasedJSON",style:{position:"relative"},children:(0,jsx_runtime.jsx)(ScatterPlotViewer_ScatterPlotViewer,{data:phasedJSON.data,highlightedSeries,invertAxes:{x:!1,y:invertYAxis},margin:{bottom:50,left:60,right:10,top:30},setOnPan,setOnZoom,underlays,xAxisLabel:t("SubjectViewer.VariableStarViewer.phase"),xAxisNumTicks:8,yAxisLabel:phasedJSON.chartOptions.yAxisLabel,yAxisNumTicks:8,zoomControlFn:zoomEnabled.phasedJSON?()=>setAllowPanZoom(""):()=>setAllowPanZoom("phasedJSON"),zooming:zoomEnabled.phasedJSON})}),(0,jsx_runtime.jsx)(Box.a,{border:zoomEnabled.rawJSON&&{color:"brand",size:"xsmall"},gridArea:"rawJSON",style:{position:"relative"},children:(0,jsx_runtime.jsx)(ScatterPlotViewer_ScatterPlotViewer,{data:null==scatterPlot?void 0:scatterPlot.data,highlightedSeries,invertAxes:{x:!1,y:invertYAxis},margin:{bottom:50,left:60,right:10,top:30},setOnPan,setOnZoom,xAxisLabel:null==scatterPlot?void 0:scatterPlot.chartOptions.xAxisLabel,xAxisNumTicks:4,yAxisLabel:null==scatterPlot?void 0:scatterPlot.chartOptions.yAxisLabel,yAxisNumTicks:6,zoomControlFn:zoomEnabled.rawJSON?()=>setAllowPanZoom(""):()=>setAllowPanZoom("rawJSON"),zooming:zoomEnabled.rawJSON})})]})}),(0,jsx_runtime.jsx)(Box.a,{background:{dark:"dark-3",light:"neutral-6"},border:{color:{light:"light-3",dark:"dark-3"},size:"xsmall"},direction:"row",gridArea:"barCharts",margin:{bottom:"xsmall"},pad:"none",children:Object.keys(barJSON).map(barChartKey=>(0,jsx_runtime.jsx)(Box.a,{basis:"1/2",children:(0,jsx_runtime.jsx)(BarChartViewer_BarChartViewer,{data:barJSON[barChartKey].data,xAxisLabel:barJSON[barChartKey].chartOptions.xAxisLabel,yAxisDomain:barJSON[barChartKey].chartOptions.yAxisDomain,yAxisLabel:barJSON[barChartKey].chartOptions.yAxisLabel})},barChartKey))}),imageLocation&&(0,jsx_runtime.jsxs)(Box.a,{as:"figure",direction:"column",gridArea:"HRDiagram",margin:"none",children:[(0,jsx_runtime.jsx)(SingleImageViewer_SingleImageViewerContainer,{"aria-labelledby":"imageId",enableInteractionLayer:!1,loadingState,role:"img",subject:{locations:[imageLocation]},title:{id:"imageId",text:t("SubjectViewer.VariableStarViewer.imageTitle")}}),(0,jsx_runtime.jsx)("figcaption",{children:(0,jsx_runtime.jsx)(SpacedText.A,{color:{light:"dark-5",dark:"light-1"},weight:"bold",children:t("SubjectViewer.VariableStarViewer.figCaption")})})]})]})});VariableStarViewer.propTypes={allowPanZoom:prop_types_default().string,barJSON:prop_types_default().shape({amplitude:prop_types_default().shape({data:prop_types_default().array,options:prop_types_default().object}),period:prop_types_default().shape({data:prop_types_default().array,options:prop_types_default().object})}),highlightedSeries:prop_types_default().arrayOf(prop_types_default().object),imageLocation:prop_types_default().object,invertYAxis:prop_types_default().bool,parentHeight:prop_types_default().number,parentWidth:prop_types_default().number,periodMultiple:prop_types_default().number,phaseFocusedSeries:prop_types_default().number,phasedJSON:prop_types_default().shape({data:prop_types_default().array,chartOptions:prop_types_default().object}),rawJSON:prop_types_default().shape({data:prop_types_default().object,chartOptions:prop_types_default().object}),setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,setPeriodMultiple:prop_types_default().func,setSeriesPhaseFocus:prop_types_default().func,setSeriesHighlight:prop_types_default().func,setYAxisInversion:prop_types_default().func,theme:prop_types_default().object,zooming:prop_types_default().bool};const VariableStarViewer_VariableStarViewer=(0,styled_components_browser_esm.withTheme)((0,withParentSize.A)(VariableStarViewer));VariableStarViewer.__docgenInfo={description:"",methods:[],displayName:"VariableStarViewer",props:{allowPanZoom:{description:"",type:{name:"string"},required:!1},barJSON:{description:"",type:{name:"shape",value:{amplitude:{name:"shape",value:{data:{name:"array",required:!1},options:{name:"object",required:!1}},required:!1},period:{name:"shape",value:{data:{name:"array",required:!1},options:{name:"object",required:!1}},required:!1}}},required:!1},highlightedSeries:{description:"",type:{name:"arrayOf",value:{name:"object"}},required:!1},imageLocation:{description:"",type:{name:"object"},required:!1},invertYAxis:{description:"",type:{name:"bool"},required:!1},parentHeight:{description:"",type:{name:"number"},required:!1},parentWidth:{description:"",type:{name:"number"},required:!1},periodMultiple:{description:"",type:{name:"number"},required:!1},phaseFocusedSeries:{description:"",type:{name:"number"},required:!1},phasedJSON:{description:"",type:{name:"shape",value:{data:{name:"array",required:!1},chartOptions:{name:"object",required:!1}}},required:!1},rawJSON:{description:"",type:{name:"shape",value:{data:{name:"object",required:!1},chartOptions:{name:"object",required:!1}}},required:!1},setOnPan:{description:"",type:{name:"func"},required:!1},setOnZoom:{description:"",type:{name:"func"},required:!1},setPeriodMultiple:{description:"",type:{name:"func"},required:!1},setSeriesPhaseFocus:{description:"",type:{name:"func"},required:!1},setSeriesHighlight:{description:"",type:{name:"func"},required:!1},setYAxisInversion:{description:"",type:{name:"func"},required:!1},theme:{description:"",type:{name:"object"},required:!1},zooming:{description:"",type:{name:"bool"},required:!1}}};var additiveDictionary={.5:-.301,1:0,2:.301,3:.477};function VariableStarViewerContainer_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function VariableStarViewerContainer_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){VariableStarViewerContainer_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){VariableStarViewerContainer_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}class VariableStarViewerContainer extends react.Component{componentDidMount(){var _this=this;return VariableStarViewerContainer_asyncToGenerator(function*(){var{data}=_this.props;data&&(yield _this.onLoad(data))})()}componentDidUpdate(prevProps){var _this2=this;return VariableStarViewerContainer_asyncToGenerator(function*(){var{data}=_this2.props;data!==prevProps.data&&(yield _this2.onLoad(data))})()}onLoad(data){var _this$viewer$current,{scatterPlot,barCharts}=data,{onReady,subject}=this.props,container=null===(_this$viewer$current=this.viewer.current)||void 0===_this$viewer$current?void 0:_this$viewer$current.container,phasedJSON=this.calculatePhase(scatterPlot),barJSON=this.calculateBarJSON(barCharts),highlightedSeries=this.setupSeriesHighlight(scatterPlot),imageLocation=subject.locations[2]||{},{width:clientWidth,height:clientHeight}=container?container.getBoundingClientRect():{},target={clientWidth,clientHeight,naturalWidth:0,naturalHeight:0};this.setState({barJSON,imageLocation,phasedJSON,rawJSON:data,highlightedSeries},function(){onReady({target})})}calculatePhase(scatterPlotJSON){var seriesIndexForPeriod=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.phaseFocusedSeries,{periodMultiple,phaseLimit}=this.state,phasedJSON={data:[],chartOptions:scatterPlotJSON.chartOptions};return scatterPlotJSON.data.forEach((series,seriesIndex)=>{var seriesPeriod=parseFloat(scatterPlotJSON.data[seriesIndexForPeriod].seriesOptions.period)*periodMultiple,seriesData=[];series.seriesData.forEach(datum=>{var phasedXPoint,calculatedXPoint=datum.x%seriesPeriod/seriesPeriod;seriesData.push(Object.assign({},datum,{x:calculatedXPoint,mirrored:!1})),calculatedXPoint<phaseLimit?phasedXPoint=calculatedXPoint+1:calculatedXPoint>1-phaseLimit&&(phasedXPoint=calculatedXPoint-1),phasedXPoint&&seriesData.push(Object.assign({},datum,{x:phasedXPoint,mirrored:!0}))}),phasedJSON.data.push({seriesData,seriesOptions:series.seriesOptions})}),phasedJSON}calculateBarJSON(barChartJSON){var{periodMultiple}=this.state,phasedBarChartJSON={amplitude:barChartJSON.amplitude,period:{data:[],chartOptions:barChartJSON.period.chartOptions}},{chartOptions}=phasedBarChartJSON.period;if(barChartJSON.period.data.forEach(datum=>{var phasedDatum=Object.assign({},datum,{value:datum.value+additiveDictionary[periodMultiple.toString()]});phasedBarChartJSON.period.data.push(phasedDatum)}),!chartOptions.yAxisDomain){var yDataExtent=(0,extent.A)(phasedBarChartJSON.period.data.map(datum=>datum.value)),yAxisDomain=[Math.floor(yDataExtent[0]),Math.ceil(yDataExtent[1])+1];phasedBarChartJSON.period.chartOptions=Object.assign({},chartOptions,{yAxisDomain})}return phasedBarChartJSON}calculateJSON(){var{scatterPlot,barCharts}=this.state.rawJSON,phasedJSON=this.calculatePhase(scatterPlot),barJSON=this.calculateBarJSON(barCharts);this.setState({barJSON,phasedJSON})}setupSeriesHighlight(scatterPlotJSON){var{t}=this.props;return scatterPlotJSON.data.map((series,index)=>{if((null==series?void 0:series.seriesData.length)>0){var _series$seriesOptions,_series$seriesOptions2,fallbackLabel=t("SubjectViewer.VariableStarViewer.label",{id:index+1});return null!==(_series$seriesOptions2=(_series$seriesOptions=series.seriesOptions).label)&&void 0!==_series$seriesOptions2||(_series$seriesOptions.label=fallbackLabel),series.seriesOptions.label}})}setAllowPanZoom(area){this.setState({allowPanZoom:area})}setPeriodMultiple(event){var periodMultiple=parseFloat(event.target.value);this.setState({periodMultiple},()=>this.calculateJSON())}setSeriesHighlight(event){var newHighlightedSeriesState=this.state.highlightedSeries,seriesToUnhighlightIndex=this.state.highlightedSeries.findIndex(highlightedLabel=>highlightedLabel===event.target.value);seriesToUnhighlightIndex>-1?newHighlightedSeriesState.splice(seriesToUnhighlightIndex,1):newHighlightedSeriesState.push(event.target.value),this.setState({highlightedSeries:newHighlightedSeriesState})}setSeriesPhaseFocus(event){var seriesIndexForPeriod=parseInt(event.target.value),phasedJSON=this.calculatePhase(this.state.rawJSON.scatterPlot,seriesIndexForPeriod);this.setState({phasedJSON,phaseFocusedSeries:seriesIndexForPeriod})}setYAxisInversion(){this.setState(prevState=>({invertYAxis:!prevState.invertYAxis}))}render(){var{loadingState,setOnPan,setOnZoom,subject}=this.props;return subject.id?(0,jsx_runtime.jsx)(VariableStarViewer_VariableStarViewer,{allowPanZoom:this.state.allowPanZoom,barJSON:this.state.barJSON,highlightedSeries:this.state.highlightedSeries,imageLocation:this.state.imageLocation,invertYAxis:this.state.invertYAxis,loadingState,periodMultiple:this.state.periodMultiple,phaseFocusedSeries:this.state.phaseFocusedSeries,phaseLimit:this.state.phaseLimit,phasedJSON:this.state.phasedJSON,rawJSON:this.state.rawJSON,ref:this.viewer,setOnPan,setOnZoom,setAllowPanZoom:this.setAllowPanZoom,setPeriodMultiple:this.setPeriodMultiple,setSeriesPhaseFocus:this.setSeriesPhaseFocus,setSeriesHighlight:this.setSeriesHighlight,setYAxisInversion:this.setYAxisInversion}):null}constructor(){super(),this.viewer=(0,react.createRef)(),this.state={allowPanZoom:"",barJSON:{amplitude:{data:[],chartOptions:{}},period:{data:[],chartOptions:{}}},highlightedSeries:[],imageLocation:null,invertYAxis:!1,periodMultiple:1,phaseFocusedSeries:0,phasedJSON:{data:[],chartOptions:{}},phaseLimit:.2,rawJSON:{scatterPlot:{data:[],chartOptions:{}},barCharts:{amplitude:{data:[],chartOptions:{}},period:{data:[],chartOptions:{}}}}},this.setAllowPanZoom=this.setAllowPanZoom.bind(this),this.setPeriodMultiple=this.setPeriodMultiple.bind(this),this.setSeriesPhaseFocus=this.setSeriesPhaseFocus.bind(this),this.setSeriesHighlight=this.setSeriesHighlight.bind(this),this.setYAxisInversion=this.setYAxisInversion.bind(this)}}VariableStarViewerContainer.defaultProps={loadingState:async_states_default().initialized,onError:()=>!0,onReady:()=>!0,setOnPan:()=>{},setOnZoom:()=>{},subject:{id:"",locations:[]},t:key=>key},VariableStarViewerContainer.propTypes={loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator_locationValidator)})};const VariableStarViewer_VariableStarViewerContainer=withTranslation("components")(VariableStarViewerContainer);VariableStarViewerContainer.__docgenInfo={description:"",methods:[{name:"onLoad",docblock:null,modifiers:[],params:[{name:"data",optional:!1,type:null}],returns:null},{name:"calculatePhase",docblock:null,modifiers:[],params:[{name:"scatterPlotJSON",optional:!1,type:null}],returns:null},{name:"calculateBarJSON",docblock:null,modifiers:[],params:[{name:"barChartJSON",optional:!1,type:null}],returns:null},{name:"calculateJSON",docblock:null,modifiers:[],params:[],returns:null},{name:"setupSeriesHighlight",docblock:null,modifiers:[],params:[{name:"scatterPlotJSON",optional:!1,type:null}],returns:null},{name:"setAllowPanZoom",docblock:null,modifiers:[],params:[{name:"area",optional:!1,type:null}],returns:null},{name:"setPeriodMultiple",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"setSeriesHighlight",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"setSeriesPhaseFocus",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:null}],returns:null},{name:"setYAxisInversion",docblock:null,modifiers:[],params:[],returns:null}],displayName:"VariableStarViewerContainer",props:{loadingState:{defaultValue:{value:"asyncStates.initialized",computed:!0},description:"",type:{name:"string"},required:!1},onError:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},onReady:{defaultValue:{value:"() => true",computed:!1},description:"",type:{name:"func"},required:!1},setOnPan:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},setOnZoom:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},subject:{defaultValue:{value:"{\n  id: '',\n  locations: []\n}",computed:!1},description:"",type:{name:"shape",value:{id:{name:"string",required:!1},locations:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"},required:!1}}},required:!1},t:{defaultValue:{value:"key => key",computed:!1},required:!1}}};var JSONDataViewer_excluded=["onError","onReady"];function JSONDataViewer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function JSONDataViewer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?JSONDataViewer_ownKeys(Object(t),!0).forEach(function(r){JSONDataViewer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):JSONDataViewer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function JSONDataViewer_defineProperty(e,r,t){return(r=function JSONDataViewer_toPropertyKey(t){var i=function JSONDataViewer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var viewers={BarChart:BarChartViewer_BarChartViewer,DataSeriesPlot:ScatterPlotViewer_ScatterPlotViewer,TESSLightCurve:LightCurveViewer_LightCurveViewerContainer,VariableStarPlots:VariableStarViewer_VariableStarViewerContainer};function JSONDataViewer_storeMapper(classifierStore){var{subjects:{active:subject},subjectViewer:{interactionMode,setOnZoom,setOnPan}}=classifierStore;return{interactionMode,setOnZoom,setOnPan,subject}}var JSONDataViewer_DEFAULT_HANDLER=()=>!0;const JSONDataViewer_JSONDataViewer=(0,mobxreact_esm.PA)(function JSONDataViewer(_ref){var _subject$viewerConfig,{onError=JSONDataViewer_DEFAULT_HANDLER,onReady=JSONDataViewer_DEFAULT_HANDLER}=_ref,props=function JSONDataViewer_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function JSONDataViewer_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,JSONDataViewer_excluded),{interactionMode,subject,setOnPan,setOnZoom}=useStores(JSONDataViewer_storeMapper),{data:jsonData,loading,error,type,viewer}=useSubjectJSON({onError,onReady,subject});if(loading)return null;if(error)return(0,jsx_runtime.jsx)("p",{children:error.message});var Viewer=viewers[type.name],{chartOptions,data}="TESSLightCurve"===type.name?{data:jsonData}:jsonData,zoomConfiguration=(null==chartOptions?void 0:chartOptions.zoomConfiguration)||(null==subject||null===(_subject$viewerConfig=subject.viewerConfiguration)||void 0===_subject$viewerConfig?void 0:_subject$viewerConfig.zoomConfiguration),chartProps=JSONDataViewer_objectSpread(JSONDataViewer_objectSpread({},chartOptions),{},{zoomConfiguration}),height="DataSeriesPlot"===type.name?"500px":void 0;return(0,jsx_runtime.jsx)(Box.a,{ref:viewer,className:type.name,height,width:"100%",children:(0,jsx_runtime.jsx)(Viewer,JSONDataViewer_objectSpread(JSONDataViewer_objectSpread({data,experimentalSelectionTool:!0,interactionMode,setOnPan,setOnZoom,subject,zoomConfiguration,zooming:!0},chartProps),props))})});function Graph2dRangeFeedback_storeMapper(classifierStore){var{classifications:{currentAnnotations:annotations},feedback:{applicableRules,showModal:feedback},subjects:{active:subject}}=classifierStore;return{annotations,applicableRules,feedback,subject}}var getFeedbackViewer_viewers={graph2drange:function Graph2dRangeFeedback(){var{annotations=[],applicableRules=[],feedback=!1,subject=null}=useStores(Graph2dRangeFeedback_storeMapper),annotationBrushes=[];annotations.forEach(annotation=>{var{value}=(0,mobx_state_tree_module.dV)(annotation);null==value||value.forEach((marking,i)=>{var markingBrush={id:i,maxX:marking.x+marking.width/2,minX:marking.x-marking.width/2};annotationBrushes.push(markingBrush)})});var ruleBrushes=applicableRules.map(rule=>({id:rule.id,maxX:parseFloat(rule.x)+parseFloat(rule.width)/2+parseFloat(rule.tolerance),minX:parseFloat(rule.x)-parseFloat(rule.width)/2-parseFloat(rule.tolerance),success:rule.success}));return(0,jsx_runtime.jsx)(JSONDataViewer_JSONDataViewer,{disabled:!0,subject,feedback,feedbackBrushes:[...annotationBrushes,...ruleBrushes]})}};const helpers_getFeedbackViewer=function getFeedbackViewer(applicableRules){if(0===applicableRules.length)return null;var strategies=applicableRules.map(rule=>rule.strategy),uniqStrategies=strategies.filter((strat,index)=>strategies.indexOf(strat)>=index);return uniqStrategies.length>1?null:getFeedbackViewer_viewers[[uniqStrategies]]||null};const helpers_reduceFeedbackMessages=function reduceFeedbackMessages(messages){var result=[];return messages&&messages.length&&(result=messages.reduce((acc,message)=>{var messageExists=acc.find(obj=>obj.text===message);return messageExists?messageExists.count++:acc.push({text:message,count:1}),acc},[])),result};function FeedbackModal(_ref){var{applicableRules,hideFeedback,hideSubjectViewer,messages,showModal}=_ref,{t}=useTranslation("components"),label=t("FeedbackModal.label"),showViewer=!hideSubjectViewer&&(null==applicableRules?void 0:applicableRules.length)>0,FeedbackViewer=showViewer?helpers_getFeedbackViewer(applicableRules):null,messageContainerHeight=showViewer&&FeedbackViewer?"400px":"100%",reducedMessages=helpers_reduceFeedbackMessages(messages);return showModal?(0,jsx_runtime.jsx)(Modal.A,{active:!0,closeFn:hideFeedback,title:label,children:(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[showViewer&&!!FeedbackViewer&&(0,jsx_runtime.jsx)(Box.a,{height:"400px",width:"600px",children:(0,jsx_runtime.jsx)(FeedbackViewer,{})}),(0,jsx_runtime.jsx)(Box.a,{height:messageContainerHeight,overflow:"scroll",children:(0,jsx_runtime.jsx)("ul",{children:reducedMessages.map(message=>(0,jsx_runtime.jsxs)("li",{children:[message.text," ",(0,jsx_runtime.jsxs)("small",{children:["(",message.count," ",1===message.count?"match":"matches",")"]})]},Math.random()))})}),(0,jsx_runtime.jsx)(Box.a,{pad:{top:"small"},children:(0,jsx_runtime.jsx)(Button.$,{onClick:hideFeedback,label:t("FeedbackModal.keepClassifying"),primary:!0})})]})}):null}FeedbackModal.propTypes={applicableRules:prop_types_default().arrayOf(prop_types_default().shape({strategy:prop_types_default().string})),hideFeedback:prop_types_default().func,hideSubjectViewer:prop_types_default().bool,messages:prop_types_default().arrayOf(prop_types_default().string),showModal:prop_types_default().bool};const Feedback_FeedbackModal=withStores(FeedbackModal,function FeedbackModal_storeMapper(classifierStore){var{applicableRules,hideFeedback,hideSubjectViewer,messages,showModal}=classifierStore.feedback;return{applicableRules,hideFeedback,hideSubjectViewer,messages,showModal}});var FavouritesButton=__webpack_require__("../lib-react-components/dist/esm/FavouritesButton/FavouritesButton.js");function InfoIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function InfoIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?InfoIcon_ownKeys(Object(t),!0).forEach(function(r){InfoIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):InfoIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function InfoIcon_defineProperty(e,r,t){return(r=function InfoIcon_toPropertyKey(t){var i=function InfoIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function InfoIcon(props){return(0,jsx_runtime.jsx)(Blank.h,InfoIcon_objectSpread(InfoIcon_objectSpread({viewBox:"0 0 20 20"},props),{},{children:(0,jsx_runtime.jsx)("path",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",d:"M11.221875,13.84375 C11.3907235,13.84375 11.5368402,13.9025059 11.6602295,14.0200195 C11.7836188,14.1375331 11.8453125,14.2766919 11.8453125,14.4375 C11.8453125,14.5983081 11.7836188,14.7374669 11.6602295,14.8549805 C11.5368402,14.9724941 11.3907235,15.03125 11.221875,15.03125 L8.728125,15.03125 C8.5592765,15.03125 8.4131598,14.9724941 8.28977051,14.8549805 C8.16638122,14.7374669 8.1046875,14.5983081 8.1046875,14.4375 C8.1046875,14.2766919 8.16638122,14.1375331 8.28977051,14.0200195 C8.4131598,13.9025059 8.5592765,13.84375 8.728125,13.84375 L9.3515625,13.84375 L9.3515625,9.09375 L8.728125,9.09375 C8.5592765,9.09375 8.4131598,9.03499408 8.28977051,8.91748047 C8.16638122,8.79996686 8.1046875,8.6608081 8.1046875,8.5 C8.1046875,8.3391919 8.16638122,8.20003314 8.28977051,8.08251953 C8.4131598,7.96500592 8.5592765,7.90625 8.728125,7.90625 L9.975,7.90625 C10.1438485,7.90625 10.2899652,7.96500592 10.4133545,8.08251953 C10.5367438,8.20003314 10.5984375,8.3391919 10.5984375,8.5 L10.5984375,13.84375 L11.221875,13.84375 Z M9.07880859,6.38476562 C8.84501836,6.14973841 8.728125,5.86523604 8.728125,5.53125 C8.728125,5.19726396 8.8482654,4.91585401 9.0885498,4.68701172 C9.32883421,4.45816943 9.62431465,4.34375 9.975,4.34375 C10.3256853,4.34375 10.6211658,4.45816943 10.8614502,4.68701172 C11.1017346,4.91585401 11.221875,5.19726396 11.221875,5.53125 C11.221875,5.86523604 11.1017346,6.14664599 10.8614502,6.37548828 C10.6211658,6.60433057 10.3256853,6.71875 9.975,6.71875 C9.62431465,6.71875 9.32558717,6.60742299 9.07880859,6.38476562 Z M13.1116699,0.669921875 C14.1377493,0.991538066 15.059908,1.44303095 15.8781738,2.02441406 C16.6964396,2.60579718 17.410788,3.28612892 18.0212402,4.06542969 C18.6316925,4.84473046 19.10576,5.71988447 19.443457,6.69091797 C19.781154,7.66195147 19.95,8.66080216 19.95,9.6875 C19.95,10.9739648 19.6869899,12.2047467 19.1609619,13.3798828 C18.6349339,14.5550189 17.9270796,15.5662393 17.0373779,16.4135742 C16.1476762,17.2609092 15.0858948,17.9350561 13.852002,18.4360352 C12.6181091,18.9370142 11.325788,19.1875 9.975,19.1875 C8.624212,19.1875 7.33189094,18.9370142 6.09799805,18.4360352 C4.86410516,17.9350561 3.80232378,17.2609092 2.91262207,16.4135742 C2.02292036,15.5662393 1.31506611,14.5550189 0.789038086,13.3798828 C0.263010065,12.2047467 0,10.9739648 0,9.6875 C0,8.66080216 0.168845968,7.66195147 0.506542969,6.69091797 C0.84423997,5.71988447 1.31830749,4.84473046 1.92875977,4.06542969 C2.53921204,3.28612892 3.25356036,2.60579718 4.07182617,2.02441406 C4.89009198,1.44303095 5.80900369,0.991538066 6.82858887,0.669921875 C7.84817404,0.348305684 8.89696727,0.1875 9.975,0.1875 C11.0530327,0.1875 12.0985789,0.348305684 13.1116699,0.669921875 Z M9.975,18.0185547 C11.1569395,18.0185547 12.2869087,17.7989931 13.3649414,17.3598633 C14.4429741,16.9207335 15.371627,16.3269894 16.1509277,15.5786133 C16.9302285,14.8302371 17.5504127,13.9427135 18.011499,12.9160156 C18.4725853,11.8893178 18.703125,10.8131567 18.703125,9.6875 C18.703125,8.56184333 18.4725853,7.48568222 18.011499,6.45898438 C17.5504127,5.43228653 16.9302285,4.54785527 16.1509277,3.80566406 C15.371627,3.06347285 14.4429741,2.47282121 13.3649414,2.03369141 C12.2869087,1.59456161 11.1569395,1.375 9.975,1.375 C8.7930605,1.375 7.66309133,1.59456161 6.58505859,2.03369141 C5.50702586,2.47282121 4.57837304,3.06347285 3.79907227,3.80566406 C3.01977149,4.54785527 2.39958727,5.43228653 1.93850098,6.45898438 C1.47741469,7.48568222 1.246875,8.56184333 1.246875,9.6875 C1.246875,10.5904993 1.3929917,11.4656533 1.68522949,12.3129883 C1.97746728,13.1603232 2.39308813,13.9241502 2.93210449,14.6044922 C3.47112086,15.2848341 4.09779916,15.884763 4.8121582,16.4042969 C5.52651724,16.9238307 6.32853559,17.3227525 7.2182373,17.6010742 C8.10793902,17.8793959 9.02685073,18.0185547 9.975,18.0185547 Z"})}))}function MetadataButton(_ref){var{disabled=!1,onClick=()=>!0}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(MetaToolsButton.h,{disabled,icon:(0,jsx_runtime.jsx)(InfoIcon,{color:"dark-5",size:"15px"}),text:t("MetaTools.MetadataButton.label"),onClick})}MetadataButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func};var Metadata=_ref=>{var{isThereMetadata=!1,metadata={}}=_ref,[showMetadataModal,setShowMetadataModal]=(0,react.useState)(!1),toggleMetadataModal=()=>{setShowMetadataModal(!showMetadataModal)};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(MetadataButton,{disabled:!isThereMetadata,onClick:toggleMetadataModal}),isThereMetadata&&(0,jsx_runtime.jsx)(MetadataModal,{active:showMetadataModal,closeFn:toggleMetadataModal,metadata})]})};Metadata.propTypes={isThereMetadata:prop_types_default().bool,metadata:prop_types_default().object};const Metadata_Metadata=Metadata;function CollectionsIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function CollectionsIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?CollectionsIcon_ownKeys(Object(t),!0).forEach(function(r){CollectionsIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):CollectionsIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function CollectionsIcon_defineProperty(e,r,t){return(r=function CollectionsIcon_toPropertyKey(t){var i=function CollectionsIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function CollectionsIcon(props){return(0,jsx_runtime.jsx)(Blank.h,CollectionsIcon_objectSpread(CollectionsIcon_objectSpread({viewBox:"0 0 24 24"},props),{},{children:(0,jsx_runtime.jsx)("path",{strokeWidth:"1",d:"M1.96875,9 C2.14648526,9 2.30029232,9.06184834 2.43017578,9.18554688 C2.56005924,9.30924541 2.625,9.45572832 2.625,9.625 L2.625,10.875 C2.625,11.0442717 2.56005924,11.1907546 2.43017578,11.3144531 C2.30029232,11.4381517 2.14648526,11.5 1.96875,11.5 L0.65625,11.5 C0.478514736,11.5 0.324707681,11.4381517 0.194824219,11.3144531 C0.0649407568,11.1907546 0,11.0442717 0,10.875 L0,9.625 C0,9.45572832 0.0649407568,9.30924541 0.194824219,9.18554688 C0.324707681,9.06184834 0.478514736,9 0.65625,9 L1.96875,9 Z M20.34375,9.625 C20.5214853,9.625 20.6752923,9.68684834 20.8051758,9.81054688 C20.9350592,9.93424541 21,10.0807283 21,10.25 C21,10.4192717 20.9350592,10.5657546 20.8051758,10.6894531 C20.6752923,10.8131517 20.5214853,10.875 20.34375,10.875 L6.5625,10.875 C6.38476474,10.875 6.23095768,10.8131517 6.10107422,10.6894531 C5.97119076,10.5657546 5.90625,10.4192717 5.90625,10.25 C5.90625,10.0807283 5.97119076,9.93424541 6.10107422,9.81054688 C6.23095768,9.68684834 6.38476474,9.625 6.5625,9.625 L20.34375,9.625 Z M1.96875,14 C2.14648526,14 2.30029232,14.0618483 2.43017578,14.1855469 C2.56005924,14.3092454 2.625,14.4557283 2.625,14.625 L2.625,15.875 C2.625,16.0442717 2.56005924,16.1907546 2.43017578,16.3144531 C2.30029232,16.4381517 2.14648526,16.5 1.96875,16.5 L0.65625,16.5 C0.478514736,16.5 0.324707681,16.4381517 0.194824219,16.3144531 C0.0649407568,16.1907546 0,16.0442717 0,15.875 L0,14.625 C0,14.4557283 0.0649407568,14.3092454 0.194824219,14.1855469 C0.324707681,14.0618483 0.478514736,14 0.65625,14 L1.96875,14 Z M20.34375,14.625 C20.5214853,14.625 20.6752923,14.6868483 20.8051758,14.8105469 C20.9350592,14.9342454 21,15.0807283 21,15.25 C21,15.4192717 20.9350592,15.5657546 20.8051758,15.6894531 C20.6752923,15.8131517 20.5214853,15.875 20.34375,15.875 L6.5625,15.875 C6.38476474,15.875 6.23095768,15.8131517 6.10107422,15.6894531 C5.97119076,15.5657546 5.90625,15.4192717 5.90625,15.25 C5.90625,15.0807283 5.97119076,14.9342454 6.10107422,14.8105469 C6.23095768,14.6868483 6.38476474,14.625 6.5625,14.625 L20.34375,14.625 Z M1.96875,4 C2.14648526,4 2.30029232,4.06184834 2.43017578,4.18554688 C2.56005924,4.30924541 2.625,4.45572832 2.625,4.625 L2.625,5.875 C2.625,6.04427168 2.56005924,6.19075459 2.43017578,6.31445312 C2.30029232,6.43815166 2.14648526,6.5 1.96875,6.5 L0.65625,6.5 C0.478514736,6.5 0.324707681,6.43815166 0.194824219,6.31445312 C0.0649407568,6.19075459 0,6.04427168 0,5.875 L0,4.625 C0,4.45572832 0.0649407568,4.30924541 0.194824219,4.18554688 C0.324707681,4.06184834 0.478514736,4 0.65625,4 L1.96875,4 Z M6.5625,5.875 C6.38476474,5.875 6.23095768,5.81315166 6.10107422,5.68945312 C5.97119076,5.56575459 5.90625,5.41927168 5.90625,5.25 C5.90625,5.08072832 5.97119076,4.93424541 6.10107422,4.81054688 C6.23095768,4.68684834 6.38476474,4.625 6.5625,4.625 L20.34375,4.625 C20.5214853,4.625 20.6752923,4.68684834 20.8051758,4.81054688 C20.9350592,4.93424541 21,5.08072832 21,5.25 C21,5.41927168 20.9350592,5.56575459 20.8051758,5.68945312 C20.6752923,5.81315166 20.5214853,5.875 20.34375,5.875 L6.5625,5.875 Z"})}))}var CollectionsButton_DEFAULT_HANDLER=()=>!1;function CollectionsButton(_ref){var{disabled=!1,onClick=CollectionsButton_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(MetaToolsButton.h,{disabled,icon:(0,jsx_runtime.jsx)(CollectionsIcon,{color:"dark-5",size:"15px"}),text:t("MetaTools.CollectionsButton.add"),onClick})}CollectionsButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func};var FormView=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormView.js"),FormViewHide=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormViewHide.js"),HidePreviousMarksButton_DEFAULT_HANDLER=()=>!1;function HidePreviousMarksButton(_ref){var{disabled=!1,onClick=HidePreviousMarksButton_DEFAULT_HANDLER,shownMarks=helpers_shownMarks.ALL}=_ref,{t}=useTranslation("components"),text=shownMarks===helpers_shownMarks.ALL?t("MetaTools.HidePreviousMarksDrawingButton.hide"):t("MetaTools.HidePreviousMarksDrawingButton.show"),icon=shownMarks===helpers_shownMarks.ALL?(0,jsx_runtime.jsx)(FormView.c,{}):(0,jsx_runtime.jsx)(FormViewHide.K,{});return(0,jsx_runtime.jsx)(MetaToolsButton.h,{"aria-checked":shownMarks===helpers_shownMarks.NONE,disabled,icon,role:"checkbox",text,onClick})}HidePreviousMarksButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func,shownMarks:prop_types_default().string};var Hide=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Hide.js"),HidePreviousTranscriptionsButton_DEFAULT_HANDLER=()=>!1,StyledDrop=(0,styled_components_browser_esm.default)(DropButton.E).withConfig({displayName:"HidePreviousTranscriptionsButton__StyledDrop",componentId:"sc-1kmte49-0"})(["div{padding:0;}span{","}"],props=>(0,styled_components_browser_esm.css)(["line-height:",";"],props.theme.paragraph.small.height));function HidePreviousTranscriptionsButton(_ref){var{disabled=!1,onClick:_onClick=HidePreviousTranscriptionsButton_DEFAULT_HANDLER,shownMarks=helpers_shownMarks.ALL}=_ref,{t}=useTranslation("components"),[isOpen,setOpen]=(0,react.useState)(!1),currentTitle={ALL:t("MetaTools.HidePreviousTranscriptionsButton.show"),USER:t("MetaTools.HidePreviousTranscriptionsButton.showUser"),NONE:t("MetaTools.HidePreviousTranscriptionsButton.hide")}[shownMarks];return(0,jsx_runtime.jsx)(StyledDrop,{a11yTitle:currentTitle,dropContent:(0,jsx_runtime.jsxs)(Box.a,{role:"radiogroup",children:[(0,jsx_runtime.jsx)(MetaToolsButton.h,{a11yTitle:t("MetaTools.HidePreviousTranscriptionsButton.show"),active:shownMarks===helpers_shownMarks.ALL,"aria-checked":shownMarks===helpers_shownMarks.ALL,icon:(0,jsx_runtime.jsx)(FormView.c,{}),margin:{top:"0"},onClick:()=>{_onClick(helpers_shownMarks.ALL),setOpen(!1)},padding:"0.5em",role:"radio",text:t("MetaTools.HidePreviousTranscriptionsButton.show")}),(0,jsx_runtime.jsx)(MetaToolsButton.h,{a11yTitle:t("MetaTools.HidePreviousTranscriptionsButton.showUser"),active:shownMarks===helpers_shownMarks.USER,"aria-checked":shownMarks===helpers_shownMarks.USER,disabled,icon:(0,jsx_runtime.jsx)(FormViewHide.K,{}),margin:{top:"0"},onClick:()=>{_onClick(helpers_shownMarks.USER),setOpen(!1)},padding:"0.5em",role:"radio",text:t("MetaTools.HidePreviousTranscriptionsButton.showUser")}),(0,jsx_runtime.jsx)(MetaToolsButton.h,{a11yTitle:t("MetaTools.HidePreviousTranscriptionsButton.hide"),active:shownMarks===helpers_shownMarks.NONE,"aria-checked":shownMarks===helpers_shownMarks.NONE,icon:(0,jsx_runtime.jsx)(Hide.L,{}),margin:{top:"0"},onClick:()=>{_onClick(helpers_shownMarks.NONE),setOpen(!1)},padding:"0.5em",role:"radio",text:t("MetaTools.HidePreviousTranscriptionsButton.hide")})]}),dropProps:{align:{top:"bottom",left:"left"}},onClose:()=>setOpen(!1),onOpen:()=>setOpen(!0),open:isOpen,plain:!0,children:(0,jsx_runtime.jsxs)(Box.a,{align:"center",direction:"row",children:[(0,jsx_runtime.jsx)(FormDown.t,{}),(0,jsx_runtime.jsx)(SpacedText.A,{color:{dark:"accent-1",light:"neutral-1"},children:currentTitle})]})})}HidePreviousTranscriptionsButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func,shownMarks:prop_types_default().string};const HidePreviousMarksButton_HidePreviousTranscriptionsButton=(0,styled_components_browser_esm.withTheme)(HidePreviousTranscriptionsButton);function HidePreviousMarksContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function HidePreviousMarksContainer_defineProperty(e,r,t){return(r=function HidePreviousMarksContainer_toPropertyKey(t){var i=function HidePreviousMarksContainer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function HidePreviousMarksContainer(props){var{type="drawing"}=props,HideMarksButton="transcription"===type?HidePreviousMarksButton_HidePreviousTranscriptionsButton:HidePreviousMarksButton;return(0,jsx_runtime.jsx)(HideMarksButton,function HidePreviousMarksContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?HidePreviousMarksContainer_ownKeys(Object(t),!0).forEach(function(r){HidePreviousMarksContainer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):HidePreviousMarksContainer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},props))}function MetaTools_storeMapper(store){var{subjects:{active:subject,isThereMetadata},userProjectPreferences:{active:upp},workflowSteps:{interactionTask}}=store;return{interactionTask,isThereMetadata,subject,upp}}HidePreviousMarksContainer.propTypes={type:prop_types_default().string};var MetaTools=_ref=>{var{className=""}=_ref,{interactionTask={},isThereMetadata=!1,subject=null,upp=null}=useStores(MetaTools_storeMapper),{shownMarks,marks,togglePreviousMarks,type}=interactionTask;return(0,jsx_runtime.jsxs)(Box.a,{className,direction:"row-responsive",gap:"small",margin:{top:"small"},children:[(0,jsx_runtime.jsx)(Metadata_Metadata,{isThereMetadata,metadata:subject&&subject.metadata}),(0,jsx_runtime.jsx)(FavouritesButton.A,{checked:null==subject?void 0:subject.favorite,disabled:!subject||!upp,onClick:null==subject?void 0:subject.toggleFavorite}),(0,jsx_runtime.jsx)(CollectionsButton,{disabled:!subject||!upp,onClick:()=>{subject.addToCollection()}}),Object.keys(interactionTask).length>0&&(0,jsx_runtime.jsx)(HidePreviousMarksContainer,{disabled:0===(null==marks?void 0:marks.length),shownMarks,type,onClick:state=>togglePreviousMarks(state)})]},subject&&subject.id)};MetaTools.propTypes={className:prop_types_default().string,interactionTask:prop_types_default().shape({shownMarks:prop_types_default().string,togglePreviousMarks:prop_types_default().func,type:prop_types_default().string}),isThereMetadata:prop_types_default().bool,screenSize:prop_types_default().string,subject:prop_types_default().object,upp:prop_types_default().object};const MetaTools_MetaTools=(0,mobxreact_esm.PA)(MetaTools);function withResponsiveContext_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function withResponsiveContext_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?withResponsiveContext_ownKeys(Object(t),!0).forEach(function(r){withResponsiveContext_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):withResponsiveContext_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function withResponsiveContext_defineProperty(e,r,t){return(r=function withResponsiveContext_toPropertyKey(t){var i=function withResponsiveContext_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const withResponsiveContext_withResponsiveContext=function withResponsiveContext(WrappedComponent){return props=>(0,jsx_runtime.jsx)(ResponsiveContext.u.Consumer,{children:size=>(0,jsx_runtime.jsx)(WrappedComponent,withResponsiveContext_objectSpread(withResponsiveContext_objectSpread({},props),{},{screenSize:size}))})};var Keyboard=__webpack_require__("../../node_modules/grommet/es6/components/Keyboard/Keyboard.js"),Chat=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Chat.js"),FormNextLink=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormNextLink.js"),DEFAULT_AVATAR="https://static.zooniverse.org/fem-assets/simple-avatar.jpg";function UserAvatar(_ref){var{src,displayName="",size="3em"}=_ref,{t}=useTranslation("components"),imgSrc=src&&src.length>0?src:DEFAULT_AVATAR;return(0,jsx_runtime.jsx)(Box.a,{alignSelf:"center",width:size,height:size,children:(0,jsx_runtime.jsx)(Image._,{alt:t("QuickTalk.aria.userAvatar",{name:displayName}),src:imgSrc,fallback:DEFAULT_AVATAR})})}UserAvatar.propTypes={src:prop_types_default().string,displayName:prop_types_default().string,size:prop_types_default().string};const components_UserAvatar=UserAvatar;function roleDisplayName(role){return"zooniverse"===role.section&&["admin","team"].indexOf(role.name)>=0?"Zooniverse Team":"zooniverse"!==role.section&&["admin","scientist","owner"].indexOf(role.name)>=0?"Researcher":role.name}function UserRole(_ref){var{role}=_ref;return role?(0,jsx_runtime.jsxs)(Text.E,{textAlign:"center",children:["[",roleDisplayName(role),"]"]}):null}UserRole.propTypes={role:prop_types_default().object};const components_UserRole=UserRole;function Comment(_ref){var{author,comment,roles}=_ref;return(0,jsx_runtime.jsxs)(Box.a,{as:"li",background:{dark:"dark-1",light:"light-1"},direction:"row",margin:{horizontal:"none",vertical:"xsmall"},children:[(0,jsx_runtime.jsxs)(Box.a,{margin:"xsmall",pad:"xsmall",width:"small",children:[(0,jsx_runtime.jsx)(components_UserAvatar,{src:null==author?void 0:author.avatar_src,displayName:null==author?void 0:author.display_name}),(0,jsx_runtime.jsx)(Text.E,{textAlign:"center",weight:"bold",children:null==author?void 0:author.display_name}),(0,jsx_runtime.jsxs)(Text.E,{textAlign:"center",children:["(@",null==author?void 0:author.login,")"]}),null==roles?void 0:roles.map(role=>(0,jsx_runtime.jsx)(components_UserRole,{role},"quicktalk-role-".concat(comment.id,"-").concat(role.name)))]}),(0,jsx_runtime.jsx)(Box.a,{flex:!0,pad:"xsmall",width:"medium",children:(0,jsx_runtime.jsx)(Markdownz.Ay,{children:null==comment?void 0:comment.body})})]})}Comment.propTypes={author:prop_types_default().object,comment:prop_types_default().object,role:prop_types_default().object};const components_Comment=Comment;var Form=__webpack_require__("../../node_modules/grommet/es6/components/Form/Form.js"),SubmitButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"PostForm__SubmitButton",componentId:"sc-qzah0j-0"})(["display:block;margin:0 auto;"]);function PostForm(_ref){var{postComment,postCommentStatus,postCommentStatusMessage}=_ref,{t}=useTranslation("components"),[text,setText]=(0,react.useState)("");function onSubmit(e){return postComment(text),function stopEvent(e){return!!e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0,!1)}(e)}(0,react.useEffect)(()=>{setText("")},[postCommentStatus]);var statusText,disabled=postCommentStatus===async_states_default().loading;return postCommentStatusMessage?statusText=postCommentStatusMessage:postCommentStatus===async_states_default().initialized?statusText=t("QuickTalk.status.initialized"):postCommentStatus===async_states_default().loading?statusText=t("QuickTalk.status.loading"):postCommentStatus===async_states_default().success&&(statusText=t("QuickTalk.status.success")),(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-1",light:"light-1"},flex:!1,pad:"xsmall",children:[statusText&&(0,jsx_runtime.jsx)(Text.E,{role:"status","aria-live":"polite",children:statusText}),(0,jsx_runtime.jsxs)(Form.l,{onSubmit,children:[(0,jsx_runtime.jsx)(TextArea.f,{a11yTitle:"Write comments",value:text,onChange:e=>setText(e.target.value),disabled}),(0,jsx_runtime.jsx)(SubmitButton,{a11yTitle:"Post comment",onClick:onSubmit,type:"submit",label:"Post",disabled})]})]})}PostForm.propTypes={postComment:prop_types_default().func,postCommentStatus:prop_types_default().string,postCommentStatusMessage:prop_types_default().string};const components_PostForm=PostForm;var FixedBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuickTalk__FixedBox",componentId:"sc-dhmfag-0"})(["position:fixed;bottom:1em;right:2.5em;max-width:80vw;max-height:80vh;z-index:10;"]),ButtonContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuickTalk__ButtonContainer",componentId:"sc-dhmfag-1"})(["border-radius:1em;"]),FixedButtonContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuickTalk__FixedButtonContainer",componentId:"sc-dhmfag-2"})(["border-radius:1em;position:fixed;bottom:1em;right:2.5em;"]),UnorderedList=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"QuickTalk__UnorderedList",componentId:"sc-dhmfag-3"})(["margin:0;padding:0;"]);function QuickTalk(_ref){var{subject,comments=[],authors={},authorRoles={},postCommentStatus=async_states_default().initialized,postCommentStatusMessage="",postComment=()=>{},userId,screenSize,expand=!1,fixedPosition=!0,showBadge=!0}=_ref,panelContent=(0,react.useRef)(),{t}=useTranslation("components");if((0,react.useEffect)(function scrollToLatestComment(){if(postCommentStatus===async_states_default().success){var _panelContent$current,_panelContent$current2,newYCoord=null===(_panelContent$current=panelContent.current)||void 0===_panelContent$current?void 0:_panelContent$current.scrollHeight;null===(_panelContent$current2=panelContent.current)||void 0===_panelContent$current2||_panelContent$current2.scrollTo({top:newYCoord,left:0,behavior:"smooth"})}},[postCommentStatus]),!subject)return null;var[_expand,setExpand]=(0,react.useState)(expand),badge=!!(showBadge&&comments.length>0)&&comments.length,QTButtonContainer=fixedPosition?FixedButtonContainer:ButtonContainer,QTPanel=fixedPosition?FixedBox:Box.a;return _expand?(0,jsx_runtime.jsx)(Keyboard.s,{onEsc:()=>setExpand(!1),children:(0,jsx_runtime.jsxs)(QTPanel,{a11yTitle:t("QuickTalk.aria.mainPanel"),elevation:"medium",role:"dialog",background:{dark:"dark-3",light:"light-3"},children:[(0,jsx_runtime.jsxs)(Box.a,{direction:"row",flex:!1,justify:"between",pad:{vertical:"none",horizontal:"small"},children:[(0,jsx_runtime.jsx)(Heading.D,{level:"4",margin:{top:"small",bottom:"none"},pad:"none",children:t("QuickTalk.aria.panelHeading")}),(0,jsx_runtime.jsx)(Button.$,{a11yTitle:t("QuickTalk.aria.closeButton"),autoFocus:!0,icon:(0,jsx_runtime.jsx)(Close.b,{size:"small"}),onClick:()=>setExpand(!1),plain:!0})]}),(0,jsx_runtime.jsx)(Box.a,{ref:panelContent,"aria-label":t("QuickTalk.aria.panelContent"),overflow:{vertical:"auto",horizontal:"hidden"},role:"group",tabIndex:"0",children:(0,jsx_runtime.jsxs)(Box.a,{flex:!1,pad:{bottom:"small",left:"small",right:"small"},children:[comments.length>0&&(0,jsx_runtime.jsx)(UnorderedList,{as:"ul",flex:!1,children:comments.map(comment=>{var author=authors[comment.user_id],roles=authorRoles[comment.user_id];return(0,jsx_runtime.jsx)(components_Comment,{comment,author,roles},"quicktalk-comment-".concat(comment.id))})}),!comments.length&&(0,jsx_runtime.jsx)(Box.a,{background:{dark:"dark-1",light:"light-1"},margin:{horizontal:"none",vertical:"xsmall"},pad:"xsmall",children:(0,jsx_runtime.jsx)(Paragraph.f,{textAlign:"center",children:t("QuickTalk.subjectHasNoComments")})})]})}),(0,jsx_runtime.jsxs)(Box.a,{flex:!1,pad:{horizontal:"small",vertical:"xsmall"},children:[userId&&(0,jsx_runtime.jsx)(components_PostForm,{postComment,postCommentStatus,postCommentStatusMessage}),!userId&&(0,jsx_runtime.jsx)(Box.a,{background:{dark:"dark-1",light:"light-1"},margin:{horizontal:"none",vertical:"xsmall"},pad:"xsmall",children:(0,jsx_runtime.jsx)(Paragraph.f,{textAlign:"center",children:t("QuickTalk.loginToPost")})}),(0,jsx_runtime.jsx)(Anchor.M,{alignSelf:"center",label:t("QuickTalk.aria.goToTalk"),href:subject.talkURL,icon:(0,jsx_runtime.jsx)(FormNextLink.s,{size:"small"}),margin:"xsmall",target:"_blank",rel:"nofollow noopener noreferrer",reverse:!0,size:"xsmall"})]})]})}):(0,jsx_runtime.jsx)(QTButtonContainer,{background:{dark:"dark-3",light:"light-3"},elevation:"small",children:(0,jsx_runtime.jsx)(Button.$,{a11yTitle:t("QuickTalk.aria.openButton",{count:comments.length}),onClick:()=>setExpand(!0),icon:(0,jsx_runtime.jsx)(Chat.r,{}),badge})})}QuickTalk.propTypes={subject:prop_types_default().object,comments:prop_types_default().arrayOf(prop_types_default().object),authors:prop_types_default().object,authorRoles:prop_types_default().object,postCommentStatus:prop_types_default().string,postCommentStatusMessage:prop_types_default().string,postComment:prop_types_default().func,userId:prop_types_default().string,expand:prop_types_default().bool,fixedPosition:prop_types_default().bool,showBadge:prop_types_default().bool};const QuickTalk_QuickTalk=withResponsiveContext_withResponsiveContext(QuickTalk);function getDefaultTalkBoard_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _getDefaultTalkBoard(){return _getDefaultTalkBoard=function getDefaultTalkBoard_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getDefaultTalkBoard_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getDefaultTalkBoard_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(project){if(project){var query={section:"project-".concat(project.id),subject_default:!0};return src.Hv.get("/boards",query).then(response=>{var _response$body;return null==response||null===(_response$body=response.body)||void 0===_response$body||null===(_response$body=_response$body.boards)||void 0===_response$body?void 0:_response$body[0]})}}),_getDefaultTalkBoard.apply(this,arguments)}function getTalkComments_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getTalkComments(_x){return _getTalkComments.apply(this,arguments)}function _getTalkComments(){return _getTalkComments=function getTalkComments_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getTalkComments_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getTalkComments_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(subject){if(null==subject||!subject.project)return[];var query={section:"project-".concat(subject.project.id),focus_id:subject.id,focus_type:"Subject",page:1,sort:"created_at"};return src.Hv.get("/comments",query).then(response=>{var _response$body;return(null==response||null===(_response$body=response.body)||void 0===_response$body?void 0:_response$body.comments)||[]})}),_getTalkComments.apply(this,arguments)}function getTalkDiscussion_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _getTalkDiscussion(){return _getTalkDiscussion=function getTalkDiscussion_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getTalkDiscussion_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getTalkDiscussion_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(board,title){if(board&&title){var query={board_id:board.id,title,subject_default:!0};return src.Hv.get("/discussions",query).then(response=>{var _response$body;return null==response||null===(_response$body=response.body)||void 0===_response$body||null===(_response$body=_response$body.discussions)||void 0===_response$body?void 0:_response$body[0]})}}),_getTalkDiscussion.apply(this,arguments)}function getTalkRoles_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getTalkRoles(_x){return _getTalkRoles.apply(this,arguments)}function _getTalkRoles(){return _getTalkRoles=function getTalkRoles_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getTalkRoles_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getTalkRoles_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(_ref){var{userIds=[],project}=_ref;if(0===userIds.length||!project)return[];var query={user_id:userIds.join(","),section:["zooniverse","project-".concat(project.id)].join(","),is_shown:!0};return src.Hv.get("/roles",query).then(response=>{var _response$body;return(null==response||null===(_response$body=response.body)||void 0===_response$body?void 0:_response$body.roles)||[]})}),_getTalkRoles.apply(this,arguments)}function getUsersByID_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function getUsersByID(){return _getUsersByID.apply(this,arguments)}function _getUsersByID(){return _getUsersByID=function getUsersByID_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){getUsersByID_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){getUsersByID_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(){var userIds=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===userIds.length)return[];var query={id:userIds.join(",")};return src.bB.get("/users",query).then(response=>{var _response$body;return(null==response||null===(_response$body=response.body)||void 0===_response$body?void 0:_response$body.users)||[]})}),_getUsersByID.apply(this,arguments)}function postTalkComment_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _postTalkComment(){return _postTalkComment=function postTalkComment_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){postTalkComment_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){postTalkComment_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(text,discussion,user,authorization){var _response$body;if(text&&discussion&&user&&authorization){var comments={user_id:user.id,body:text,discussion_id:+discussion.id},response=yield src.Hv.post("/comments",{comments},{authorization});if(null!=response&&null!==(_response$body=response.body)&&void 0!==_response$body&&_response$body.comments){var[comment]=response.body.comments;return comment}return null}}),_postTalkComment.apply(this,arguments)}function postTalkDiscussion_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function _postTalkDiscussion(){return _postTalkDiscussion=function postTalkDiscussion_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){postTalkDiscussion_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){postTalkDiscussion_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(text,title,subject,board,user,authorization){var _response$body;if(text&&title&&subject&&board&&user&&authorization){var comments=[{user_id:user.id,body:text,focus_id:+subject.id,focus_type:"Subject"}],discussions={title,user_id:user.id,subject_default:!0,board_id:board.id,comments},response=yield src.Hv.post("/discussions",{discussions},{authorization});if(null!=response&&null!==(_response$body=response.body)&&void 0!==_response$body&&_response$body.discussions){var[discussion]=response.body.discussions;return discussion}return null}}),_postTalkDiscussion.apply(this,arguments)}var QuickTalkContainer_console=__webpack_require__("../../node_modules/console-browserify/index.js");function QuickTalkContainer_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function QuickTalkContainer_storeMapper(store){var{authClient,subjects:{active:subject}}=store;return{authClient,subject}}var SWROptions={revalidateIfStale:!0,revalidateOnMount:!0,revalidateOnFocus:!0,revalidateOnReconnect:!0,refreshInterval:0};const QuickTalk_QuickTalkContainer=function withFeatureFlag(Component,featureFlag){function WithFeatureFlag(props,ref){var{project}=useStores(withFeatureFlag_storeMapper);return null!=project&&project.experimental_tools.includes(featureFlag)?(0,jsx_runtime.jsx)(Component,function withFeatureFlag_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?withFeatureFlag_ownKeys(Object(t),!0).forEach(function(r){withFeatureFlag_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):withFeatureFlag_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({ref},props)):null}return(0,mobxreact_esm.PA)((0,react.forwardRef)(WithFeatureFlag))}((0,mobxreact_esm.PA)(function QuickTalkContainer(){var _author_ids,{t}=useTranslation(),{authClient,subject}=useStores(QuickTalkContainer_storeMapper),{data:user}=usePanoptesUser(authClient),userId=null==user?void 0:user.id,authorization=usePanoptesAuth({authClient,userID:userId}),{data:comments}=(0,index.Ay)(subject,getTalkComments,SWROptions),author_ids=null==comments?void 0:comments.map(comment=>comment.user_id);author_ids=null===(_author_ids=author_ids)||void 0===_author_ids?void 0:_author_ids.filter((id,i)=>author_ids.indexOf(id)===i);var authors={},authorRoles={},{data:allUsers}=(0,index.Ay)([author_ids],getUsersByID,SWROptions);null==allUsers||allUsers.forEach(user=>{authors[user.id]=user,authorRoles[user.id]=[]});var rolesKey=null!=subject&&subject.project?{userIds:author_ids,project:subject.project}:null,{data:allRoles}=(0,index.Ay)(rolesKey,getTalkRoles,SWROptions);null==allRoles||allRoles.forEach(role=>{var _authorRoles$role$use;null===(_authorRoles$role$use=authorRoles[role.user_id])||void 0===_authorRoles$role$use||_authorRoles$role$use.push(role)});var[postCommentStatus,setPostCommentStatus]=(0,react.useState)(async_states_default().initialized),[postCommentStatusMessage,setPostCommentStatusMessage]=(0,react.useState)("");if(!subject)return null;function _postComment(){return _postComment=function QuickTalkContainer_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){QuickTalkContainer_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){QuickTalkContainer_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}(function*(text){var project=null==subject?void 0:subject.project;if(subject&&project){setPostCommentStatus(async_states_default().loading),setPostCommentStatusMessage("");try{if(!text||0===text.trim().length)throw new Error(t("QuickTalk.errors.noText"));if(!authorization)throw new Error(t("QuickTalk.errors.noUser"));var defaultBoard=yield function getDefaultTalkBoard(_x){return _getDefaultTalkBoard.apply(this,arguments)}(project);if(!defaultBoard)throw new Error(t("QuickTalk.errors.noBoard"));var discussionTitle="Subject ".concat(subject.id),existingDiscussion=yield function getTalkDiscussion(_x,_x2){return _getTalkDiscussion.apply(this,arguments)}(defaultBoard,discussionTitle);if(existingDiscussion){var newComment=yield function postTalkComment(_x,_x2,_x3,_x4){return _postTalkComment.apply(this,arguments)}(text,existingDiscussion,user,authorization);if(!newComment)throw new Error(t("QuickTalk.errors.failPostComment"));comments.push(newComment),setPostCommentStatus(async_states_default().success),setPostCommentStatusMessage("")}else{var discussion=yield function postTalkDiscussion(_x,_x2,_x3,_x4,_x5,_x6){return _postTalkDiscussion.apply(this,arguments)}(text,discussionTitle,subject,defaultBoard,user,authorization);if(!discussion)throw new Error(t("QuickTalk.errors.failPostDiscussion"));comments.push(discussion.latest_comment),setPostCommentStatus(async_states_default().success),setPostCommentStatusMessage("")}}catch(err){QuickTalkContainer_console.error(err),setPostCommentStatus(async_states_default().error),setPostCommentStatusMessage((null==err?void 0:err.message)||err)}}}),_postComment.apply(this,arguments)}return(0,jsx_runtime.jsx)(QuickTalk_QuickTalk,{subject,comments,authors,authorRoles,postCommentStatus,postCommentStatusMessage,postComment:function postComment(_x){return _postComment.apply(this,arguments)},userId})}),"quicktalk");var DataImageViewer_StyledBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"DataImageViewer__StyledBox",componentId:"sc-j3kw6w-0"})(["position:relative;"]),CHART_MARGINS={bottom:50,left:70,right:10,top:40},JSON_DATA={data:[],chartOptions:{xAxisLabel:"",yAxisLabel:""}},DataImageViewer_DEFAULT_HANDLER=()=>!0,DataImageViewer_DEFAULT_THEME={dark:!1,global:{colors:{}}},DataImageViewer=(0,react.forwardRef)(function DataImageViewer(_ref,ref){var{allowPanZoom="",imageLocation=null,jsonData=JSON_DATA,loadingState,parentWidth,resetView=DataImageViewer_DEFAULT_HANDLER,setAllowPanZoom=DataImageViewer_DEFAULT_HANDLER,setOnPan=DataImageViewer_DEFAULT_HANDLER,setOnZoom=DataImageViewer_DEFAULT_HANDLER,theme=DataImageViewer_DEFAULT_THEME,zoomConfiguration}=_ref,{dark,global:{colors={}}}=theme,{chartOptions}=jsonData,zoomEnabled={image:"image"===allowPanZoom,scatterPlot:"scatterPlot"===allowPanZoom},imageViewerBackground=getZoomBackgroundColor(dark,zoomEnabled.image,colors),areas=parentWidth<=500?[{name:"scatterPlot",start:[0,0],end:[0,0]},{name:"image",start:[0,1],end:[0,1]}]:[{name:"scatterPlot",start:[0,0],end:[0,0]},{name:"image",start:[1,0],end:[1,0]}],columns=parentWidth<=500?["full"]:["1/2","1/2"],rows=parentWidth<=500?["auto","auto"]:["full"];var data=jsonData.data?jsonData.data:jsonData;return(0,jsx_runtime.jsxs)(Grid_Grid.x,{areas,columns,fill:!0,forwardedRef:ref,gap:"xsmall",pad:{horizontal:"xsmall"},rows,children:[(0,jsx_runtime.jsx)(DataImageViewer_StyledBox,{border:zoomEnabled.scatterPlot&&{color:"brand",size:"xsmall"},gridArea:"scatterPlot",height:"500px",children:(0,jsx_runtime.jsx)(ScatterPlotViewer_ScatterPlotViewer,{data,invertAxes:null==chartOptions?void 0:chartOptions.invertAxes,margin:CHART_MARGINS,setOnPan:zoomEnabled.scatterPlot?setOnPan:DataImageViewer_DEFAULT_HANDLER,setOnZoom:zoomEnabled.scatterPlot?setOnZoom:DataImageViewer_DEFAULT_HANDLER,xAxisLabel:null==chartOptions?void 0:chartOptions.xAxisLabel,yAxisLabel:null==chartOptions?void 0:chartOptions.yAxisLabel,yAxisLabelOffset:50,zoomConfiguration,zoomControlFn:zoomEnabled.scatterPlot?()=>setAllowPanZoom(""):()=>setAllowPanZoom("scatterPlot"),zooming:zoomEnabled.scatterPlot})}),(0,jsx_runtime.jsx)(Box.a,{background:imageViewerBackground,border:zoomEnabled.image&&{color:"brand",size:"xsmall"},gridArea:"image",children:imageLocation&&(0,jsx_runtime.jsx)(SingleImageViewer_SingleImageViewerContainer,{enableInteractionLayer:!1,imageLocation,loadingState,setOnPan:zoomEnabled.image?setOnPan:DataImageViewer_DEFAULT_HANDLER,setOnZoom:zoomEnabled.image?setOnZoom:DataImageViewer_DEFAULT_HANDLER,zoomControlFn:zoomEnabled.image?()=>function disableImageZoom(){resetView(),setAllowPanZoom("")}():()=>setAllowPanZoom("image"),zooming:zoomEnabled.image})})]})});DataImageViewer.propTypes={allowPanZoom:prop_types_default().string,enableRotation:prop_types_default().func,imageLocation:prop_types_default().object,jsonData:prop_types_default().shape({data:prop_types_default().oneOfType([prop_types_default().array,prop_types_default().object]),chartOptions:prop_types_default().object}),move:prop_types_default().bool,parentWidth:prop_types_default().number,resetView:prop_types_default().func,rotation:prop_types_default().number,setAllowPanZoom:prop_types_default().func,setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,theme:prop_types_default().object};const DataImageViewer_DataImageViewer=(0,styled_components_browser_esm.withTheme)((0,withParentSize.A)(DataImageViewer));DataImageViewer.__docgenInfo={description:"",methods:[],displayName:"DataImageViewer",props:{allowPanZoom:{description:"",type:{name:"string"},required:!1},enableRotation:{description:"",type:{name:"func"},required:!1},imageLocation:{description:"",type:{name:"object"},required:!1},jsonData:{description:"",type:{name:"shape",value:{data:{name:"union",value:[{name:"array"},{name:"object"}],required:!1},chartOptions:{name:"object",required:!1}}},required:!1},move:{description:"",type:{name:"bool"},required:!1},parentWidth:{description:"",type:{name:"number"},required:!1},resetView:{description:"",type:{name:"func"},required:!1},rotation:{description:"",type:{name:"number"},required:!1},setAllowPanZoom:{description:"",type:{name:"func"},required:!1},setOnPan:{description:"",type:{name:"func"},required:!1},setOnZoom:{description:"",type:{name:"func"},required:!1},theme:{description:"",type:{name:"object"},required:!1}}};var DataImageViewerContainer_excluded=["onError","onReady","subject","viewerConfiguration"];function DataImageViewerContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function DataImageViewerContainer_defineProperty(e,r,t){return(r=function DataImageViewerContainer_toPropertyKey(t){var i=function DataImageViewerContainer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var DataImageViewerContainer_DEFAULT_HANDLER=()=>!0,SUBJECT={id:"",locations:[]};function DataImageViewerContainer(_ref){var _jsonData$chartOption,{onError=DataImageViewerContainer_DEFAULT_HANDLER,onReady=DataImageViewerContainer_DEFAULT_HANDLER,subject=SUBJECT,viewerConfiguration}=_ref,rest=function DataImageViewerContainer_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function DataImageViewerContainer_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,DataImageViewerContainer_excluded),[allowPanZoom,setAllowPanZoom]=(0,react.useState)(""),{imageLocation,jsonData,loading,viewer}=function useDataImageSubject(_ref){var{onError,onReady,subject}=_ref,{loading,error,data,viewer}=useSubjectJSON({onError,onReady,subject}),jsonData={data:[],chartOptions:{}},imageLocation=null;data&&!loading&&(jsonData=data);var locations=subject.locations.filter(location=>"image"===location.type);return(null==locations?void 0:locations.length)>0&&(imageLocation=locations.reverse()[0]),{imageLocation,jsonData,loading,viewer}}({onError,onReady,subject});if(!subject.id)return null;var zoomConfiguration=(null===(_jsonData$chartOption=jsonData.chartOptions)||void 0===_jsonData$chartOption?void 0:_jsonData$chartOption.zoomConfiguration)||(null==viewerConfiguration?void 0:viewerConfiguration.zoomConfiguration);return(0,jsx_runtime.jsx)(DataImageViewer_DataImageViewer,function DataImageViewerContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DataImageViewerContainer_ownKeys(Object(t),!0).forEach(function(r){DataImageViewerContainer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DataImageViewerContainer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({allowPanZoom,imageLocation,ref:viewer,jsonData,setAllowPanZoom,zoomConfiguration},rest))}DataImageViewerContainer.propTypes={onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator_locationValidator)})};const DataImageViewerConnector=withStores(DataImageViewerContainer,function DataImageViewerConnector_storeMapper(classifierStore){var{subjects:{active:subject},subjectViewer:{resetView,setOnPan,setOnZoom}}=classifierStore;return{resetView,setOnPan,setOnZoom,subject}});var ThemeContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),Pause=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Pause.js"),CirclePlay=__webpack_require__("../../node_modules/grommet-icons/es6/icons/CirclePlay.js"),FormPrevious=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormPrevious.js"),FormNext=__webpack_require__("../../node_modules/grommet-icons/es6/icons/FormNext.js"),debounce=__webpack_require__("../../node_modules/lodash/debounce.js"),debounce_default=__webpack_require__.n(debounce);const FlipbookControls_theme={global:{colors:{icon:{dark:"white",light:"black"},text:{dark:"white",light:"black"}},hover:{background:"accent-1"}},select:{icons:{margin:"0"},options:{text:{size:"small"}}}};function ViewModeButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ViewModeButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ViewModeButton_ownKeys(Object(t),!0).forEach(function(r){ViewModeButton_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ViewModeButton_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ViewModeButton_defineProperty(e,r,t){return(r=function ViewModeButton_toPropertyKey(t){var i=function ViewModeButton_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var SwitchToFlipbook=props=>(0,jsx_runtime.jsxs)(Blank.h,ViewModeButton_objectSpread(ViewModeButton_objectSpread({viewBox:"0 0 640 512",color:{light:"black",dark:"white"}},props),{},{children:[(0,jsx_runtime.jsx)("path",{d:"M596.7-0.2H230.3c-22.6,0-41.5,16.9-41.5,37.7v276.6c0,20.8,18.9,37.7,41.5,37.7h366.4c23.3,0,42.3-16.9,42.3-37.7V37.5 C639,16.7,620.9-0.2,596.7-0.2z M286.7,295.3c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3v-37.7c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3L286.7,295.3z M286.7,194.7c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3V157c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H286.7z M286.7,94.1c0,3.5-3.2,6.3-7,6.3h-42.3c-3.9,0-7-2.8-7-6.3V56.4c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3L286.7,94.1z M498.1,289c0,6.9-6.3,12.6-14.1,12.6H343.1c-7.8,0-14.1-5.6-14.1-12.6v-75.4c0-6.9,6.3-12.6,14.1-12.6H484c7.8,0,14.1,5.6,14.1,12.6V289z M498.1,138.1c0,6.9-6.3,12.6-14.1,12.6H343.1c-7.8,0-14.1-5.6-14.1-12.6V62.7c0-6.9,6.3-12.6,14.1-12.6H484c7.8,0,14.1,5.6,14.1,12.6V138.1z M596.7,295.3c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-6.3-2.8-6.3-6.3v-37.7c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H596.7z M596.7,194.7c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-7-2.8-7-6.3V157c0-3.5,3.2-6.3,7-6.3h41.5c3.9,0,7,2.8,7,6.3V194.7z M596.7,94.1c0,3.5-3.2,6.3-7,6.3h-41.5c-3.9,0-7-2.8-7-6.3V56.4c0-3.5,3.2-6.3,6.3-6.3h41.5c3.9,0,7,2.8,7,6.3v37.7H596.7z"}),(0,jsx_runtime.jsx)("path",{d:"M158.4,307.7V128H54.9C25.6,128,0,151.4,0,180.4v279.3C0,488.6,24.6,512,54.9,512h402.3c30.3,0,54.9-23.4,54.9-52.4v-75.2h-97.6l21.4,30.6c3.8,5.3,4.1,12.2,0.9,18c-3.2,5.7-9.4,9.2-16.1,9.2H90.4c-6.9,0-12.1-3.7-15.3-9.5c-3.1-5.9-2.5-13,1.6-18.2M107,197.8c20.2,0,36.6,15.6,36.6,34.9s-16.4,34.9-36.6,34.9c-19.2,0-36.6-15.6-36.6-34.9S87.8,197.8,107,197.8z"})]})),SwitchToSeparateFrames=props=>(0,jsx_runtime.jsx)(Blank.h,ViewModeButton_objectSpread(ViewModeButton_objectSpread({viewBox:"0 0 640 512",color:{light:"black",dark:"white"}},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M352 432c0 8.836-7.164 16-16 16H176c-8.838 0-16-7.164-16-16L160 128H48C21.49 128 .0003 149.5 .0003 176v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48L512 384h-160L352 432zM104 439c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9V439zM104 335c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9V335zM104 231c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9v-30C56 196 60.03 192 65 192h30c4.969 0 9 4.031 9 9V231zM408 409c0-4.969 4.031-9 9-9h30c4.969 0 9 4.031 9 9v30c0 4.969-4.031 9-9 9h-30c-4.969 0-9-4.031-9-9V409zM591.1 0H239.1C213.5 0 191.1 21.49 191.1 48v256c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48v-256C640 21.49 618.5 0 591.1 0zM303.1 64c17.68 0 32 14.33 32 32s-14.32 32-32 32C286.3 128 271.1 113.7 271.1 96S286.3 64 303.1 64zM574.1 279.6C571.3 284.8 565.9 288 560 288H271.1C265.1 288 260.5 284.6 257.7 279.3C255 273.9 255.5 267.4 259.1 262.6l70-96C332.1 162.4 336.9 160 341.1 160c5.11 0 9.914 2.441 12.93 6.574l22.35 30.66l62.74-94.11C442.1 98.67 447.1 96 453.3 96c5.348 0 10.34 2.672 13.31 7.125l106.7 160C576.6 268 576.9 274.3 574.1 279.6z"})}));function ViewModeButton_storeMapper(classifierStore){var{separateFramesView,setSeparateFramesView}=classifierStore.subjectViewer;return{separateFramesView,setSeparateFramesView}}const ViewModeButton_ViewModeButton=(0,mobxreact_esm.PA)(_ref=>{var{smallScreenStyle}=_ref,{separateFramesView,setSeparateFramesView}=useStores(ViewModeButton_storeMapper),{t}=useTranslation("components"),a11yTitle=t(separateFramesView?"SubjectViewer.SeparateFramesViewer.ViewModeButton.switchToFlipbook":"SubjectViewer.SeparateFramesViewer.ViewModeButton.switchToSeparateFrames");return(0,jsx_runtime.jsx)(Button.$,{a11yTitle,plain:!0,icon:separateFramesView?(0,jsx_runtime.jsx)(SwitchToFlipbook,{onClick:()=>setSeparateFramesView(!1),size:smallScreenStyle?"20px":"medium"}):(0,jsx_runtime.jsx)(SwitchToSeparateFrames,{onClick:()=>setSeparateFramesView(!0),size:smallScreenStyle?"20px":"medium"}),style:{width:"fit-content"}})});var SpeedSelect=(0,styled_components_browser_esm.default)(Select.l).withConfig({displayName:"FlipbookControls__SpeedSelect",componentId:"sc-cjnv8p-0"})(["display:block;padding:0 5px;text-align:right;"]),DirectionButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FlipbookControls__DirectionButton",componentId:"sc-cjnv8p-1"})(["border:none;padding:0;& > div{flex-direction:column;}"]),ThumbnailButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FlipbookControls__ThumbnailButton",componentId:"sc-cjnv8p-2"})(["display:flex;"," "," padding:0;border:none;background-size:cover;background-repeat:no-repeat;background-position:center;"," &[aria-selected=true]{border:solid 2px ",";}"],props=>(0,styled_components_browser_esm.css)(["height:",";"],props.thumbnailDimension),props=>(0,styled_components_browser_esm.css)(["width:",";"],props.thumbnailDimension),props=>(0,styled_components_browser_esm.css)(["background-image:url(",");"],props.thumbnailerUrl),props=>props.theme.global.colors["neutral-2"]),backgrounds={dark:"dark-3",light:"neutral-6"},FlipbookControls_DEFAULT_HANDLER=()=>!0,FlipbookControls=_ref=>{var{currentFrame=0,enableSwitchView=!1,flipbookSpeed=1,locations=[],onFrameChange=FlipbookControls_DEFAULT_HANDLER,onPlayPause=FlipbookControls_DEFAULT_HANDLER,playing=!1,playIterations,setFlipbookSpeed=FlipbookControls_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components"),timeoutRef=(0,react.useRef)(null),[iterationCounter,setIterationCounter]=(0,react.useState)(0),[smallScreenStyle,setSmallScreenStyle]=(0,react.useState)(!1),controlsContainer=(0,react.useRef)(null);(0,react.useEffect)(()=>{var debouncedObserver=debounce_default()(entries=>{entries[0].contentRect.width<500?setSmallScreenStyle(!0):setSmallScreenStyle(!1)},100),containerElement=controlsContainer.current,resizeObserver=new window.ResizeObserver(debouncedObserver);return resizeObserver.observe(containerElement),()=>{resizeObserver.disconnect()}},[controlsContainer.current]);var handleKeyDown=event=>{var index=currentFrame;switch(event.key){case"ArrowRight":event.preventDefault(),event.stopPropagation(),playing&&onPlayPause(),handleNext(),index<locations.length-1?document.getElementById("thumbnail-".concat(index+1)).focus():document.getElementById("thumbnail-".concat(0)).focus();break;case"ArrowLeft":event.preventDefault(),event.stopPropagation(),playing&&onPlayPause(),handlePrevious(),index>0?document.getElementById("thumbnail-".concat(index-1)).focus():document.getElementById("thumbnail-".concat(locations.length-1)).focus();break;default:return!0}},handlePrevious=()=>{onFrameChange(currentFrame>0?currentFrame-1:locations.length-1)},handleNext=()=>{currentFrame<locations.length-1?onFrameChange(currentFrame+1):onFrameChange(0)};(0,react.useEffect)(()=>(playing&&(iterationCounter<playIterations*locations.length?timeoutRef.current=setTimeout(()=>{playIterations!==1/0&&setIterationCounter(iterationCounter+1),handleNext()},500/flipbookSpeed):iterationCounter===playIterations*locations.length&&onPlayPause()),()=>{setIterationCounter(0),timeoutRef.current&&clearInterval(timeoutRef.current)}),[playing,currentFrame]);var playPauseLabel=playing?"SubjectViewer.VideoController.pause":"SubjectViewer.VideoController.play";return(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:FlipbookControls_theme,children:(0,jsx_runtime.jsx)(Box.a,{background:backgrounds,ref:controlsContainer,children:(0,jsx_runtime.jsxs)(Grid_Grid.x,{columns:smallScreenStyle?["75px","flex","75px"]:["90px","flex","90px"],pad:smallScreenStyle?{horizontal:"10px",vertical:"5px"}:{horizontal:"20px",vertical:"10px"},gap:smallScreenStyle?"xsmall":"small",children:[(0,jsx_runtime.jsxs)(Box.a,{direction:"row",children:[(0,jsx_runtime.jsx)(Button.$,{a11yTitle:t(playPauseLabel),onClick:onPlayPause,icon:playing?(0,jsx_runtime.jsx)(Pause.v,{size:smallScreenStyle?"20px":"medium"}):(0,jsx_runtime.jsx)(CirclePlay.H,{size:smallScreenStyle?"20px":"medium"}),plain:!0}),(0,jsx_runtime.jsx)(SpeedSelect,{a11yTitle:t("SubjectViewer.VideoController.playbackSpeed"),options:["0.25x","0.5x","1x","2x","4x"],value:"".concat(flipbookSpeed,"x"),onChange:e=>{setFlipbookSpeed(Number(e.value.slice(0,e.value.length-1)))},plain:!0,size:smallScreenStyle?"small":"16px",icon:(0,jsx_runtime.jsx)(FormDown.t,{size:smallScreenStyle?"small":"16px"}),focusIndicator:!0})]}),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",justify:"center",gap:smallScreenStyle?"xsmall":"small",children:[(0,jsx_runtime.jsx)(DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormPrevious.Q,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"),onClick:handlePrevious}),(0,jsx_runtime.jsx)(Box.a,{"aria-label":"Image thumbnails",direction:"row",gap:"5px",role:"tablist",align:"center",children:(null==locations?void 0:locations.length)&&locations.map((location,index)=>{var thumbnailerUrl="https://thumbnails.zooniverse.org/100x100".concat(location.url.slice(7,location.url.length)),activeFrame=currentFrame===index,tabIndex=activeFrame?0:-1;return(0,jsx_runtime.jsx)(ThumbnailButton,{id:"thumbnail-".concat(index),"aria-controls":"flipbook-tab-panel","aria-label":"".concat(t("SubjectViewer.MultiFrameViewer.FrameCarousel.thumbnailAltText")," ").concat(index+1),"aria-selected":activeFrame?"true":"false",onClick:()=>(index=>{playing&&onPlayPause(),onFrameChange(index)})(index),onKeyDown:handleKeyDown,role:"tab",tabIndex,thumbnailDimension:smallScreenStyle?"30px":"40px",thumbnailerUrl},"".concat(location.url,"-").concat(index))})}),(0,jsx_runtime.jsx)(DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormNext.O,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"),onClick:handleNext})]}),(0,jsx_runtime.jsx)(Box.a,{justify:"center",align:"center",children:enableSwitchView&&(0,jsx_runtime.jsx)(ViewModeButton_ViewModeButton,{smallScreenStyle})})]})})})};FlipbookControls.propTypes={currentFrame:prop_types.number,enableSwitchView:prop_types.bool,flipbookSpeed:prop_types.number,onFrameChange:prop_types.func,onPlayPause:prop_types.func,playing:prop_types.bool,setFlipbookSpeed:prop_types.func};const FlipbookControls_FlipbookControls=FlipbookControls;function FlipbookControlsConnector_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function FlipbookControlsConnector_defineProperty(e,r,t){return(r=function FlipbookControlsConnector_toPropertyKey(t){var i=function FlipbookControlsConnector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FlipbookControlsConnector_storeMapper(store){var _store$workflows,{flipbookSpeed,setFlipbookSpeed}=store.subjectViewer,{enable_switching_flipbook_and_separate:enableSwitchView}=null===(_store$workflows=store.workflows)||void 0===_store$workflows||null===(_store$workflows=_store$workflows.active)||void 0===_store$workflows?void 0:_store$workflows.configuration;return{enableSwitchView,flipbookSpeed,setFlipbookSpeed}}const FlipbookControls_FlipbookControlsConnector=(0,mobxreact_esm.PA)(function FlipbookControlsConnector(props){var{enableSwitchView,flipbookSpeed,setFlipbookSpeed}=useStores(FlipbookControlsConnector_storeMapper);return(0,jsx_runtime.jsx)(FlipbookControls_FlipbookControls,function FlipbookControlsConnector_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FlipbookControlsConnector_ownKeys(Object(t),!0).forEach(function(r){FlipbookControlsConnector_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FlipbookControlsConnector_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({enableSwitchView,flipbookSpeed,setFlipbookSpeed},props))});var FlipbookViewer_DEFAULT_HANDLER=()=>!0,FlipbookViewer=_ref=>{var _subject$locations$de,_subject$locations$cu,{defaultFrame=0,enableInteractionLayer=!1,enableRotation=FlipbookViewer_DEFAULT_HANDLER,flipbookAutoplay=!1,invert=!1,limitSubjectHeight=!1,move=!1,onError=FlipbookViewer_DEFAULT_HANDLER,onReady=FlipbookViewer_DEFAULT_HANDLER,playIterations,rotation=0,setOnPan=FlipbookViewer_DEFAULT_HANDLER,setOnZoom=FlipbookViewer_DEFAULT_HANDLER,subject}=_ref,[currentFrame,setCurrentFrame]=(0,react.useState)(defaultFrame),[playing,setPlaying]=(0,react.useState)(!1);(0,react.useEffect)(()=>{!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&flipbookAutoplay&&setPlaying(!0)},[]);var defaultLocationUrl=null==subject||null===(_subject$locations$de=subject.locations[defaultFrame])||void 0===_subject$locations$de?void 0:_subject$locations$de.url,{img,error,loading,subjectImage}=useSubjectImage({src:defaultLocationUrl,onError,onReady}),{naturalHeight=600,naturalWidth=800}=img,onPlayPause=()=>{setPlaying(!playing)},{onKeyZoom}=useKeyZoom({customKeyMappings:{" ":onPlayPause}}),imageLocationUrl=null==subject||null===(_subject$locations$cu=subject.locations[currentFrame])||void 0===_subject$locations$cu?void 0:_subject$locations$cu.url;return(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(SingleImageViewer_SingleImageViewer,{enableInteractionLayer,enableRotation,frame:currentFrame,imgRef:subjectImage,invert,limitSubjectHeight,move,naturalHeight,naturalWidth,onKeyDown:onKeyZoom,rotation,setOnPan,setOnZoom,src:imageLocationUrl,subject}),(0,jsx_runtime.jsx)(FlipbookControls_FlipbookControlsConnector,{currentFrame,locations:subject.locations,onFrameChange:setCurrentFrame,onPlayPause,playing,playIterations})]})};FlipbookViewer.propTypes={defaultFrame:prop_types_default().number,enableInteractionLayer:prop_types_default().bool,enableRotation:prop_types_default().func,flipbookAutoplay:prop_types_default().bool,invert:prop_types_default().bool,limitSubjectHeight:prop_types_default().bool,move:prop_types_default().bool,onError:prop_types_default().func,onReady:prop_types_default().func,playIterations:prop_types_default().number,rotation:prop_types_default().number,setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator_locationValidator)}).isRequired};const FlipbookViewer_FlipbookViewer=FlipbookViewer;function EditIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function EditIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?EditIcon_ownKeys(Object(t),!0).forEach(function(r){EditIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):EditIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function EditIcon_defineProperty(e,r,t){return(r=function EditIcon_toPropertyKey(t){var i=function EditIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function EditIcon(props){return(0,jsx_runtime.jsx)(Blank.h,EditIcon_objectSpread(EditIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{transform:"scale(0.9)",d:"M26.512.082c-.469.107-1.008.331-1.351.562-.155.103-4.916 4.819-10.581 10.479L4.282 21.413l-1.852 6.48C1.412 31.457.59 34.384.603 34.397c.013.013 2.94-.809 6.504-1.827l6.48-1.852L23.88 20.42c7.629-7.634 10.355-10.396 10.532-10.674.485-.76.688-1.835.506-2.688a5.138 5.138 0 0 0-.329-.933c-.235-.491-.263-.522-2.728-2.984C29.602.883 29.333.634 28.962.45a5.478 5.478 0 0 0-.729-.299c-.448-.135-1.289-.168-1.721-.069m1.425 2.08c.218.093.743.589 2.553 2.405 2.534 2.543 2.502 2.501 2.493 3.254-.007.678-.043.724-2.429 3.117l-2.152 2.158-3.205-3.23c-1.763-1.777-3.205-3.261-3.205-3.297 0-.085 4.042-4.111 4.313-4.297.442-.303 1.083-.346 1.632-.11m-4.172 9.076c1.752 1.769 3.185 3.239 3.185 3.267 0 .027-3.24 3.289-7.2 7.25l-7.201 7.2-4.538 1.298a422.462 422.462 0 0 1-4.55 1.286c-.006-.006.573-2.054 1.286-4.55l1.298-4.538 7.23-7.23c3.976-3.976 7.246-7.223 7.267-7.215.021.008 1.471 1.463 3.223 3.232"})}))}var Tip=__webpack_require__("../../node_modules/grommet/es6/components/Tip/Tip.js"),Button_excluded=["active","a11yTitle","disabled","icon","onBlur","onClick","onFocus","onPointerDown","onPointerOut","onPointerOver","onPointerUp"];function Button_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Button_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Button_ownKeys(Object(t),!0).forEach(function(r){Button_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Button_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Button_defineProperty(e,r,t){return(r=function Button_toPropertyKey(t){var i=function Button_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Button_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"Button__StyledButton",componentId:"sc-1cpeojo-0"})(["display:flex;align-items:center;justify-content:center;width:100%;aspect-ratio:1;border-radius:50%;background-color:",";> svg{fill:",";width:min(50%,1.2rem);stroke:transparent;}:not(:last-child){margin-bottom:clamp(8px,20%,10px);}&:disabled{cursor:not-allowed;}&:hover:not(:disabled),&:focus-visible:not(:disabled){"," > svg{fill:white;> circle{fill:",";stroke:",";}> path{fill:",";}}}&[aria-pressed='true']{background-color:",";> svg{fill:white;}&:not(:hover){background-color:",";> svg{fill:white;}}}"],props=>props.theme.dark?props.theme.global.colors["dark-3"]:"inherit",props=>props.theme.dark?"white":"black",props=>props.theme.dark?(0,styled_components_browser_esm.css)(["background-color:",";"],props.theme.global.colors["neutral-1"]):(0,styled_components_browser_esm.css)(["background-color:",";"],props.theme.global.colors["accent-1"]),props=>props.theme.dark?"white":"black",props=>props.theme.dark?"black":"white",props=>props.theme.dark?"black":"white",props=>props.theme.global.colors.brand,props=>props.theme.global.colors.brand),HoverContent=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"Button__HoverContent",componentId:"sc-1cpeojo-1"})(["display:none;@media (hover:hover){display:flex;}"]),Button_Triangle=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"Button__Triangle",componentId:"sc-1cpeojo-2"})(["width:0;height:0;border-style:solid;border-width:8px 0 8px 10px;border-color:transparent transparent transparent ",";"],props=>props.theme.global.colors["dark-4"]),TipContent=_ref=>{var{message=""}=_ref;return(0,jsx_runtime.jsxs)(HoverContent,{direction:"row",align:"center",width:"100%",animation:{delay:250,duration:200,type:"fadeIn"},children:[(0,jsx_runtime.jsx)(Box.a,{background:"dark-4",round:"5px",pad:"5px",children:(0,jsx_runtime.jsx)(Text.E,{children:message})}),(0,jsx_runtime.jsx)(Button_Triangle,{})]})};function Button_DEFAULT_HANDLER(){return!0}function Button_Button(_ref2){var{active=!1,a11yTitle,disabled,icon,onBlur=Button_DEFAULT_HANDLER,onClick=Button_DEFAULT_HANDLER,onFocus=Button_DEFAULT_HANDLER,onPointerDown=Button_DEFAULT_HANDLER,onPointerOut=Button_DEFAULT_HANDLER,onPointerOver=Button_DEFAULT_HANDLER,onPointerUp=Button_DEFAULT_HANDLER}=_ref2,props=function Button_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function Button_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref2,Button_excluded),eventHandlers=disabled?{}:{onBlur,onClick,onFocus,onPointerDown,onPointerOut,onPointerOver,onPointerUp};return(0,jsx_runtime.jsx)(Tip.Y,{content:(0,jsx_runtime.jsx)(TipContent,{message:a11yTitle}),plain:!0,dropProps:{align:{right:"left"}},children:(0,jsx_runtime.jsx)(Button_StyledButton,Button_objectSpread(Button_objectSpread({active,a11yTitle,disabled,icon,plain:!0},eventHandlers),props))})}Button_Button.propTypes={active:prop_types.bool,onBlur:prop_types.func,onClick:prop_types.func,onFocus:prop_types.func,onPointerDown:prop_types.func,onPointerOut:prop_types.func,onPointerOver:prop_types.func,onPointerUp:prop_types.func};const components_Button_Button=Button_Button;var AnnotateButton_DEFAULT_HANDLER=()=>{};function AnnotateButton(_ref){var{active=!1,disabled=!1,onClick=AnnotateButton_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(components_Button_Button,{active,"aria-pressed":active.toString(),a11yTitle:t("ImageToolbar.AnnotateButton.ariaLabel"),disabled,icon:(0,jsx_runtime.jsx)(EditIcon,{}),onClick})}AnnotateButton.propTypes={active:prop_types_default().bool,disabled:prop_types_default().bool,onClick:prop_types_default().func};const AnnotateButton_AnnotateButton=AnnotateButton;function AnnotateButtonContainer_storeMapper(classifierStore){var{annotate,enableAnnotate,hasActiveAnnotateTask,separateFramesView}=classifierStore.subjectViewer;return{annotate,enableAnnotate,hasActiveAnnotateTask,separateFramesView}}function AnnotateButtonContainer(_ref){var{separateFrameAnnotate=!1,separateFrameEnableAnnotate=()=>!0}=_ref,{annotate,enableAnnotate,hasActiveAnnotateTask,separateFramesView}=useStores(AnnotateButtonContainer_storeMapper);return(0,jsx_runtime.jsx)(AnnotateButton_AnnotateButton,{active:separateFramesView?separateFrameAnnotate:annotate,disabled:!hasActiveAnnotateTask,onClick:separateFramesView?separateFrameEnableAnnotate:enableAnnotate})}const AnnotateButton_AnnotateButtonContainer=(0,mobxreact_esm.PA)(AnnotateButtonContainer);function ActualSizeIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ActualSizeIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ActualSizeIcon_ownKeys(Object(t),!0).forEach(function(r){ActualSizeIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ActualSizeIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ActualSizeIcon_defineProperty(e,r,t){return(r=function ActualSizeIcon_toPropertyKey(t){var i=function ActualSizeIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ActualSizeIcon(props){return(0,jsx_runtime.jsx)(Blank.h,ActualSizeIcon_objectSpread(ActualSizeIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M11.975 10.838l-0.021-7.219c-0.009-0.404-0.344-0.644-0.748-0.654l-0.513-0.001c-0.405-0.009-0.725 0.343-0.716 0.747l0.028 4.851-8.321-8.242c-0.391-0.391-1.024-0.391-1.414 0s-0.391 1.024 0 1.414l8.285 8.207-4.721 0.012c-0.404-0.009-0.779 0.27-0.84 0.746l0.001 0.513c0.010 0.405 0.344 0.739 0.748 0.748l7.172-0.031c0.008 0.001 0.013 0.003 0.020 0.003l0.366 0.008c0.201 0.005 0.383-0.074 0.512-0.205 0.132-0.13 0.178-0.311 0.175-0.514l-0.040-0.366c0.001-0.007 0.027-0.012 0.027-0.019zM20.187 11.736c0.129 0.13 0.311 0.21 0.512 0.205l0.366-0.008c0.007 0 0.012-0.002 0.020-0.004l7.172 0.031c0.404-0.009 0.738-0.344 0.747-0.748l0.001-0.513c-0.061-0.476-0.436-0.755-0.84-0.746l-4.721-0.012 8.285-8.207c0.391-0.391 0.391-1.024 0-1.414s-1.023-0.391-1.414 0l-8.32 8.241 0.027-4.851c0.009-0.404-0.311-0.756-0.715-0.747l-0.513 0.001c-0.405 0.010-0.739 0.25-0.748 0.654l-0.021 7.219c0 0.007 0.027 0.012 0.027 0.020l-0.040 0.366c-0.005 0.203 0.043 0.384 0.174 0.514zM11.813 20.232c-0.13-0.131-0.311-0.21-0.512-0.205l-0.366 0.009c-0.007 0-0.012 0.003-0.020 0.003l-7.173-0.032c-0.404 0.009-0.738 0.343-0.748 0.747l-0.001 0.514c0.062 0.476 0.436 0.755 0.84 0.745l4.727 0.012-8.29 8.238c-0.391 0.39-0.391 1.023 0 1.414s1.024 0.39 1.414 0l8.321-8.268-0.028 4.878c-0.009 0.404 0.312 0.756 0.716 0.747l0.513-0.001c0.405-0.010 0.739-0.25 0.748-0.654l0.021-7.219c0-0.007-0.027-0.011-0.027-0.019l0.040-0.397c0.005-0.203-0.043-0.384-0.174-0.514zM23.439 22.028l4.727-0.012c0.404 0.009 0.779-0.27 0.84-0.745l-0.001-0.514c-0.010-0.404-0.344-0.739-0.748-0.748h-7.172c-0.008-0-0.013-0.003-0.020-0.003l-0.428-0.009c-0.201-0.006-0.384 0.136-0.512 0.267-0.131 0.13-0.178 0.311-0.174 0.514l0.040 0.366c0 0.008-0.027 0.012-0.027 0.019l0.021 7.219c0.009 0.404 0.343 0.644 0.748 0.654l0.544 0.001c0.404 0.009 0.725-0.343 0.715-0.747l-0.027-4.829 8.352 8.22c0.39 0.391 1.023 0.391 1.414 0s0.391-1.023 0-1.414z"})}))}function FullscreenIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function FullscreenIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FullscreenIcon_ownKeys(Object(t),!0).forEach(function(r){FullscreenIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FullscreenIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function FullscreenIcon_defineProperty(e,r,t){return(r=function FullscreenIcon_toPropertyKey(t){var i=function FullscreenIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FullscreenIcon(props){return(0,jsx_runtime.jsx)(Blank.h,FullscreenIcon_objectSpread(FullscreenIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M21.434 11.975l8.602-8.549-0.028 4.846c-0.009 0.404 0.311 0.755 0.716 0.746l0.513-0.001c0.404-0.009 0.739-0.25 0.748-0.654l0.021-7.219c0-0.007-0.027-0.012-0.027-0.019l0.040-0.366c0.004-0.203-0.044-0.384-0.174-0.513-0.13-0.131-0.311-0.21-0.512-0.204l-0.366 0.009c-0.007 0-0.012 0.003-0.020 0.004l-7.172-0.032c-0.404 0.009-0.738 0.343-0.747 0.748l-0.001 0.513c0.061 0.476 0.436 0.755 0.84 0.746l4.726 0.013-8.572 8.52c-0.39 0.39-0.39 1.024 0 1.415s1.023 0.39 1.414 0zM10.597 20.025l-8.602 8.523 0.027-4.82c0.010-0.404-0.312-0.756-0.716-0.747l-0.544 0.001c-0.405 0.010-0.739 0.25-0.748 0.654l-0.021 7.219c0 0.007 0.028 0.011 0.028 0.019l-0.040 0.365c-0.005 0.203 0.043 0.385 0.174 0.514 0.129 0.131 0.311 0.21 0.512 0.205l0.366-0.009c0.007 0 0.012-0.003 0.020-0.003l7.203 0.032c0.404-0.010 0.738-0.344 0.748-0.748l0.001-0.514c-0.062-0.476-0.436-0.755-0.84-0.746l-4.726-0.012 8.571-8.518c0.39-0.39 0.39-1.023 0-1.414s-1.023-0.391-1.413-0zM32.007 30.855l-0.021-7.219c-0.009-0.404-0.343-0.645-0.747-0.654l-0.513-0.001c-0.404-0.009-0.725 0.343-0.716 0.747l0.028 4.846-8.602-8.549c-0.39-0.39-1.023-0.39-1.414 0s-0.39 1.023 0 1.414l8.571 8.518-4.726 0.012c-0.404-0.009-0.779 0.27-0.84 0.746l0.001 0.514c0.009 0.404 0.344 0.739 0.747 0.748l7.172-0.032c0.008 0 0.013 0.003 0.020 0.003l0.366 0.009c0.201 0.005 0.384-0.074 0.512-0.205 0.131-0.129 0.178-0.311 0.174-0.514l-0.040-0.365c0-0.008 0.027-0.012 0.027-0.019zM3.439 2.041l4.727-0.012c0.404 0.009 0.778-0.27 0.84-0.746l-0.001-0.513c-0.010-0.405-0.344-0.739-0.748-0.748l-7.204 0.031c-0.008-0.001-0.013-0.004-0.020-0.004l-0.366-0.009c-0.201-0.005-0.383 0.074-0.512 0.204-0.132 0.13-0.179 0.31-0.174 0.514l0.040 0.366c0 0.007-0.028 0.012-0.028 0.020l0.021 7.219c0.009 0.404 0.343 0.645 0.748 0.654l0.545 0.001c0.404 0.009 0.724-0.342 0.715-0.746l-0.028-4.819 8.602 8.523c0.39 0.39 1.024 0.39 1.414 0s0.39-1.024 0-1.415z"})}))}AnnotateButtonContainer.propTypes={separateFrameAnnotate:prop_types_default().bool,separateFrameEnableAnnotate:prop_types_default().func};var FullscreenButton_console=__webpack_require__("../../node_modules/console-browserify/index.js");function FullscreenButton(_ref){var{active=!1,disabled=!1,onClick=()=>FullscreenButton_console.log("toggle fullscreen")}=_ref,{t}=useTranslation("components"),Icon=active?ActualSizeIcon:FullscreenIcon,label=t("ImageToolbar.FullscreenButton.ariaLabel.".concat(active?"actualSize":"fullscreen"));return(0,jsx_runtime.jsx)(components_Button_Button,{a11yTitle:label,active,disabled,icon:(0,jsx_runtime.jsx)(Icon,{}),onClick})}FullscreenButton.propTypes={active:prop_types_default().bool,disabled:prop_types_default().bool,onClick:prop_types_default().func};const FullscreenButton_FullscreenButton=FullscreenButton;function FullscreenButtonContainer_storeMapper(classifierStore){var{fullscreen,enableFullscreen,disableFullscreen}=classifierStore.subjectViewer;return{fullscreen,enableFullscreen,disableFullscreen}}function FullscreenButtonContainer(_ref){var{disabled=!1,show=!1}=_ref,{fullscreen,enableFullscreen,disableFullscreen}=useStores(FullscreenButtonContainer_storeMapper);return show?(0,jsx_runtime.jsx)(FullscreenButton_FullscreenButton,{active:fullscreen,onClick:function onClick(){return fullscreen?disableFullscreen():enableFullscreen()}}):null}FullscreenButtonContainer.propTypes={disabled:prop_types_default().bool,show:prop_types_default().bool};const FullscreenButton_FullscreenButtonContainer=(0,mobxreact_esm.PA)(FullscreenButtonContainer);function InvertIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function InvertIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?InvertIcon_ownKeys(Object(t),!0).forEach(function(r){InvertIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):InvertIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function InvertIcon_defineProperty(e,r,t){return(r=function InvertIcon_toPropertyKey(t){var i=function InvertIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledBlank=(0,styled_components_browser_esm.default)(Blank.h).withConfig({displayName:"InvertIcon__StyledBlank",componentId:"sc-4hzrh7-0"})(["circle{fill:",";stroke:",";}path{fill:",";}"],props=>props.theme.dark?"black":"white",props=>props.theme.dark?"white":"black",props=>props.theme.dark?"white":"black");function InvertIcon(props){return(0,jsx_runtime.jsxs)(StyledBlank,InvertIcon_objectSpread(InvertIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:[(0,jsx_runtime.jsx)("circle",{cx:"16",cy:"16",r:"15",strokeWidth:1.5}),(0,jsx_runtime.jsx)("path",{d:"M16,1.5c6.6,0,15,5.4,15,15s-5.4,15-15,15"})]}))}var InvertButton_console=__webpack_require__("../../node_modules/console-browserify/index.js");function InvertButton(_ref){var{active=!1,disabled=!1,onClick=()=>InvertButton_console.log("Invert Button")}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(components_Button_Button,{active,"aria-pressed":active.toString(),a11yTitle:t("ImageToolbar.InvertButton.ariaLabel"),disabled,icon:(0,jsx_runtime.jsx)(InvertIcon,{}),onClick})}InvertButton.propTypes={active:prop_types_default().bool,disabled:prop_types_default().bool,onClick:prop_types_default().func};const InvertButton_InvertButton=InvertButton;function InvertButtonContainer_storeMapper(classifierStore){var _workflow$configurati,{subjectViewer:{disableInvertButton,invert,invertView},workflows:{active:workflow}}=classifierStore;return{active:invert,disabled:disableInvertButton,invertView,show:null==workflow||null===(_workflow$configurati=workflow.configuration)||void 0===_workflow$configurati?void 0:_workflow$configurati.invert_subject}}function InvertButtonContainer(_ref){var{separateFrameInvert}=_ref,{active,disabled,invertView,show}=useStores(InvertButtonContainer_storeMapper),invertCallback=separateFrameInvert||invertView;return show?(0,jsx_runtime.jsx)(InvertButton_InvertButton,{active,disabled,onClick:invertCallback}):null}const InvertButton_InvertButtonContainer=(0,mobxreact_esm.PA)(InvertButtonContainer);function MoveIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function MoveIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?MoveIcon_ownKeys(Object(t),!0).forEach(function(r){MoveIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):MoveIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function MoveIcon_defineProperty(e,r,t){return(r=function MoveIcon_toPropertyKey(t){var i=function MoveIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function MoveIcon(props){return(0,jsx_runtime.jsx)(Blank.h,MoveIcon_objectSpread(MoveIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M31.762 15.52l-0.265-0.252c-0.005-0.005-0.011-0.007-0.017-0.011l-4.055-3.701c-0.292-0.28-0.764-0.28-1.057 0l-0.172 0.252c-0.292 0.28-0.197 0.732 0.095 1.011l2.39 2.167h-11.605v-11.667l2.167 2.389c0.279 0.292 0.732 0.387 1.011 0.094l0.252-0.171c0.279-0.293 0.279-0.765 0-1.058l-3.537-3.874c-0.086-0.173-0.219-0.317-0.385-0.415l-0.044-0.046c-0.139-0.146-0.323-0.219-0.507-0.218-0.184-0.001-0.368 0.072-0.509 0.218l-0.253 0.264c-0.005 0.005-0.005 0.011-0.011 0.017l-3.61 3.992c-0.279 0.292-0.279 0.764 0 1.057l0.252 0.171c0.279 0.292 0.732 0.197 1.011-0.095l2.161-2.41v11.749h-11.759l2.389-2.167c0.292-0.28 0.387-0.732 0.095-1.011l-0.171-0.252c-0.293-0.28-0.766-0.28-1.058 0l-3.874 3.537c-0.173 0.085-0.317 0.219-0.415 0.384l-0.046 0.044c-0.146 0.139-0.219 0.324-0.218 0.508-0.001 0.184 0.071 0.368 0.218 0.509l0.265 0.253c0.005 0.005 0.011 0.006 0.016 0.011l3.992 3.61c0.292 0.279 0.764 0.279 1.058 0l0.171-0.252c0.292-0.279 0.197-0.733-0.095-1.012l-2.41-2.161h11.844v11.78l-2.161-2.41c-0.28-0.292-0.732-0.387-1.011-0.095l-0.252 0.171c-0.279 0.293-0.279 0.765 0 1.057l3.61 3.992c0.005 0.006 0.006 0.012 0.011 0.017l0.253 0.265c0.141 0.146 0.325 0.219 0.509 0.218 0.183 0.001 0.368-0.072 0.507-0.218l0.253-0.265c0.005-0.005 0.007-0.011 0.012-0.017l3.701-4.055c0.279-0.292 0.279-0.764 0-1.057l-0.252-0.172c-0.279-0.292-0.732-0.197-1.011 0.095l-2.167 2.39v-11.698h11.687l-2.41 2.161c-0.292 0.279-0.387 0.733-0.095 1.012l0.171 0.252c0.293 0.279 0.765 0.279 1.057 0l3.992-3.61c0.006-0.006 0.012-0.006 0.017-0.010l0.265-0.253c0.146-0.14 0.219-0.324 0.218-0.509 0.001-0.183-0.072-0.368-0.218-0.507z"})}))}InvertButtonContainer.propTypes={separateFrameInvert:prop_types_default().func};var MoveButton_console=__webpack_require__("../../node_modules/console-browserify/index.js");function MoveButton(_ref){var{active=!1,disabled=!1,onClick=()=>MoveButton_console.log("Move Button")}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(components_Button_Button,{a11yTitle:t("ImageToolbar.MoveButton.ariaLabel"),active,"aria-pressed":active.toString(),disabled,icon:(0,jsx_runtime.jsx)(MoveIcon,{}),onClick})}MoveButton.propTypes={active:prop_types_default().bool,disabled:prop_types_default().bool,onClick:prop_types_default().func};const MoveButton_MoveButton=MoveButton;function MoveButtonContainer_storeMapper(classifierStore){var{move,disableImageToolbar,enableMove,separateFramesView}=classifierStore.subjectViewer;return{move,disabled:disableImageToolbar,enableMove,separateFramesView}}function MoveButtonContainer(_ref){var{separateFrameMove=!1,separateFrameEnableMove=()=>!0}=_ref,{move,disabled,enableMove,separateFramesView}=useStores(MoveButtonContainer_storeMapper);return(0,jsx_runtime.jsx)(MoveButton_MoveButton,{active:separateFramesView?separateFrameMove:move,disabled,onClick:separateFramesView?separateFrameEnableMove:enableMove})}const MoveButton_MoveButtonContainer=(0,mobxreact_esm.PA)(MoveButtonContainer);function ResetIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ResetIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ResetIcon_ownKeys(Object(t),!0).forEach(function(r){ResetIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ResetIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ResetIcon_defineProperty(e,r,t){return(r=function ResetIcon_toPropertyKey(t){var i=function ResetIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ResetIcon(props){return(0,jsx_runtime.jsx)(Blank.h,ResetIcon_objectSpread(ResetIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M15.544 28.080c-0.002-0.006-0.008-0.010-0.012-0.015l-2.873-4.489c-0.204-0.335-0.646-0.454-0.992-0.266l-0.256 0.157c-0.344 0.188-0.337 0.673-0.133 1.008l1.841 2.857c-0.157-0.035-0.316-0.063-0.471-0.103-3.224-0.843-5.953-3.026-7.485-5.988-1.448-2.797-1.72-5.99-0.766-8.992s3.118-5.452 5.915-6.899c0.476-0.247 0.662-0.832 0.416-1.308-0.246-0.477-0.832-0.663-1.308-0.416-3.258 1.686-5.763 4.54-6.874 8.036s-0.794 7.215 0.892 10.473c1.786 3.448 4.963 5.989 8.72 6.973 0.043 0.011 0.087 0.017 0.13 0.028l-2.541 1.288c-0.344 0.189-0.458 0.613-0.254 0.948l0.098 0.256c0.205 0.335 0.557 0.454 0.9 0.266l4.651-2.381c0.006-0.004 0.012-0.003 0.018-0.007l0.312-0.171c0.172-0.095 0.287-0.249 0.332-0.422 0.047-0.172 0.025-0.364-0.076-0.531zM28.559 10.025c-1.783-3.447-4.862-5.988-8.618-6.972-0.267-0.070-0.541-0.124-0.814-0.179l2.494-1.265c0.344-0.189 0.549-0.614 0.345-0.949l-0.099-0.255c-0.205-0.336-0.648-0.454-0.991-0.267l-4.651 2.381c-0.006 0.003-0.012 0.002-0.018 0.006l-0.312 0.171c-0.173 0.095-0.287 0.249-0.332 0.422-0.047 0.172-0.025 0.364 0.077 0.53l0.185 0.304c0.003 0.006 0.008 0.010 0.012 0.016l2.873 4.489c0.203 0.335 0.646 0.454 0.991 0.266l0.226-0.157c0.344-0.188 0.366-0.673 0.163-1.008l-1.85-2.87c0.407 0.063 0.811 0.138 1.207 0.242 3.226 0.845 5.856 3.027 7.387 5.986 1.448 2.797 1.72 5.99 0.765 8.991s-3.020 5.451-5.818 6.901c-0.476 0.247-0.662 0.831-0.415 1.308 0.172 0.332 0.511 0.524 0.863 0.524 0.15 0 0.302-0.035 0.446-0.109 3.259-1.686 5.664-4.54 6.776-8.035 1.111-3.497 0.794-7.217-0.893-10.473z"})}))}MoveButtonContainer.propTypes={separateFrameMove:prop_types_default().bool,separateFrameEnableMove:prop_types_default().func};var ResetButton_console=__webpack_require__("../../node_modules/console-browserify/index.js");function ResetButton(_ref){var{disabled=!1,onClick=()=>ResetButton_console.log("Reset Button")}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(components_Button_Button,{a11yTitle:t("ImageToolbar.ResetButton.ariaLabel"),disabled,icon:(0,jsx_runtime.jsx)(ResetIcon,{}),onClick})}ResetButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func};const ResetButton_ResetButton=ResetButton;function ResetButtonContainer_storeMapper(classifierStore){var{disableImageToolbar,resetView}=classifierStore.subjectViewer;return{disabled:disableImageToolbar,resetView}}const ResetButton_ResetButtonContainer=(0,mobxreact_esm.PA)(function ResetButtonContainer(_ref){var{separateFrameResetView}=_ref,{disabled,resetView}=useStores(ResetButtonContainer_storeMapper),resetCallback=separateFrameResetView||resetView;return(0,jsx_runtime.jsx)(ResetButton_ResetButton,{disabled,onClick:resetCallback})});function RotateIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function RotateIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?RotateIcon_ownKeys(Object(t),!0).forEach(function(r){RotateIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):RotateIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function RotateIcon_defineProperty(e,r,t){return(r=function RotateIcon_toPropertyKey(t){var i=function RotateIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function RotateIcon(props){return(0,jsx_runtime.jsx)(Blank.h,RotateIcon_objectSpread(RotateIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M15.977 0c-7.994 0-14.498 6.504-14.498 14.498 0 7.514 5.79 13.798 13.236 14.44l-2.87 1.455c-0.354 0.195-0.566 0.632-0.355 0.977l0.101 0.262c0.211 0.346 0.668 0.468 1.021 0.274l4.791-2.453c0.006-0.004 0.012-0.003 0.019-0.007l0.322-0.176c0.177-0.098 0.295-0.257 0.342-0.434 0.049-0.177 0.027-0.375-0.079-0.547l-0.191-0.313c-0.003-0.006-0.009-0.010-0.012-0.015l-2.959-4.624c-0.21-0.346-0.666-0.468-1.021-0.274l-0.232 0.162c-0.354 0.194-0.378 0.694-0.168 1.038l1.746 2.709c-0.009-0-0.018-0.004-0.027-0.005-6.54-0.429-11.662-5.907-11.662-12.47 0-6.891 5.607-12.498 12.498-12.498 6.892 0 12.53 5.606 12.53 12.498 0 3.968-1.823 7.613-5 9.999-0.442 0.332-0.53 0.959-0.199 1.401 0.332 0.442 0.959 0.531 1.401 0.199 3.686-2.768 5.799-6.996 5.799-11.598-0-7.994-6.536-14.498-14.53-14.498z"})}))}ResetButton_ResetButton.propTypes={separateFrameResetView:prop_types_default().func};var RotateButton_console=__webpack_require__("../../node_modules/console-browserify/index.js");function RotateButton(_ref){var{disabled=!1,onClick=()=>RotateButton_console.log("Rotate Button")}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(components_Button_Button,{a11yTitle:t("ImageToolbar.RotateButton.ariaLabel"),disabled,icon:(0,jsx_runtime.jsx)(RotateIcon,{}),onClick})}RotateButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func};const RotateButton_RotateButton=RotateButton;function RotateButtonContainer_storeMapper(classifierStore){var{disableImageToolbar,rotate,rotationEnabled}=classifierStore.subjectViewer;return{disabled:disableImageToolbar,rotate,show:rotationEnabled}}function RotateButtonContainer(_ref){var{separateFrameRotate}=_ref,{disabled,rotate,show}=useStores(RotateButtonContainer_storeMapper),rotateCallback=separateFrameRotate||rotate;return show?(0,jsx_runtime.jsx)(RotateButton_RotateButton,{disabled,onClick:rotateCallback}):null}RotateButtonContainer.propTypes={separateFrameRotate:prop_types_default().func};const RotateButton_RotateButtonContainer=(0,mobxreact_esm.PA)(RotateButtonContainer);function ZoomInIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ZoomInIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ZoomInIcon_ownKeys(Object(t),!0).forEach(function(r){ZoomInIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZoomInIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ZoomInIcon_defineProperty(e,r,t){return(r=function ZoomInIcon_toPropertyKey(t){var i=function ZoomInIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ZoomInIcon(props){return(0,jsx_runtime.jsx)(Blank.h,ZoomInIcon_objectSpread(ZoomInIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M31.707 30.282l-8.845-8.899c1.894-2.262 3.034-5.18 3.034-8.366 0-7.189-5.797-13.018-12.986-13.018s-13.017 5.828-13.017 13.017 5.828 13.017 13.017 13.017c3.282 0 6.271-1.218 8.553-3.221l8.829 8.884c0.39 0.39 1.024 0.39 1.414 0s0.391-1.024 0-1.415zM12.893 24c-6.048 0-11-4.951-11-11s4.952-11 11-11c6.048 0 11 4.952 11 11s-4.951 11-11 11zM17.893 12h-4v-4c0-0.552-0.448-1-1-1s-1 0.448-1 1v4h-4c-0.552 0-1 0.448-1 1s0.448 1 1 1h4v4c0 0.552 0.448 1 1 1s1-0.448 1-1v-4h4c0.552 0 1-0.448 1-1s-0.448-1-1-1z"})}))}var ZoomInButton_console=__webpack_require__("../../node_modules/console-browserify/index.js");function ZoomInButton_DEFAULT_HANDLER(){return ZoomInButton_console.log("zoom in"),!0}function ZoomInButton(_ref){var{disabled=!1,onClick=ZoomInButton_DEFAULT_HANDLER,onPointerDown=ZoomInButton_DEFAULT_HANDLER,onPointerUp=ZoomInButton_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(components_Button_Button,{a11yTitle:t("ImageToolbar.ZoomInButton.ariaLabel"),disabled,icon:(0,jsx_runtime.jsx)(ZoomInIcon,{}),onClick,onContextMenu:onClick,onPointerDown,onPointerUp})}ZoomInButton.propTypes={disabled:prop_types.bool,onClick:prop_types.func,onPointerDown:prop_types.func,onPointerUp:prop_types.func};const ZoomInButton_ZoomInButton=ZoomInButton;function ZoomInButtonContainer_storeMapper(classifierStore){var{disableImageToolbar,zoomIn}=classifierStore.subjectViewer;return{disabled:disableImageToolbar,zoomIn}}function ZoomInButtonContainer(_ref){var{separateFrameZoomIn}=_ref,{disabled,zoomIn}=useStores(ZoomInButtonContainer_storeMapper),[timer,setTimer]=(0,react.useState)(""),zoomCallback=separateFrameZoomIn||zoomIn;return(0,jsx_runtime.jsx)(ZoomInButton_ZoomInButton,{disabled,onClick:function onClick(){clearInterval(timer),zoomCallback()},onPointerDown:function onPointerDown(event){var{currentTarget,pointerId}=event;clearInterval(timer);var newTimer=setInterval(zoomCallback,100);setTimer(newTimer),currentTarget.setPointerCapture(pointerId)},onPointerUp:function onPointerUp(event){var{currentTarget,pointerId}=event;currentTarget.releasePointerCapture(pointerId),clearInterval(timer),setTimer("")}})}const ZoomInButton_ZoomInButtonContainer=(0,mobxreact_esm.PA)(ZoomInButtonContainer);function ZoomOutIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ZoomOutIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ZoomOutIcon_ownKeys(Object(t),!0).forEach(function(r){ZoomOutIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ZoomOutIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ZoomOutIcon_defineProperty(e,r,t){return(r=function ZoomOutIcon_toPropertyKey(t){var i=function ZoomOutIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ZoomOutIcon(props){return(0,jsx_runtime.jsx)(Blank.h,ZoomOutIcon_objectSpread(ZoomOutIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M31.707 30.282l-8.845-8.899c1.894-2.262 3.034-5.18 3.034-8.366 0-7.189-5.797-13.018-12.986-13.018s-13.017 5.828-13.017 13.017 5.828 13.017 13.017 13.017c3.282 0 6.271-1.218 8.553-3.221l8.829 8.884c0.39 0.39 1.024 0.39 1.414 0s0.391-1.024 0-1.415zM12.893 24c-6.048 0-11-4.951-11-11s4.952-11 11-11c6.048 0 11 4.952 11 11s-4.951 11-11 11zM17.893 12h-10c-0.552 0-1 0.448-1 1s0.448 1 1 1h10c0.552 0 1-0.448 1-1s-0.448-1-1-1z"})}))}ZoomInButtonContainer.propTypes={separateFrameZoomIn:prop_types_default().func};var ZoomOutButton_console=__webpack_require__("../../node_modules/console-browserify/index.js");function ZoomOutButton_DEFAULT_HANDLER(){return ZoomOutButton_console.log("zoom out"),!0}function ZoomOutButton(_ref){var{disabled=!1,onClick=ZoomOutButton_DEFAULT_HANDLER,onPointerDown=ZoomOutButton_DEFAULT_HANDLER,onPointerUp=ZoomOutButton_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(components_Button_Button,{a11yTitle:t("ImageToolbar.ZoomOutButton.ariaLabel"),disabled,icon:(0,jsx_runtime.jsx)(ZoomOutIcon,{}),onClick,onContextMenu:onClick,onPointerDown,onPointerUp})}ZoomOutButton.propTypes={disabled:prop_types_default().bool,onClick:prop_types_default().func};const ZoomOutButton_ZoomOutButton=ZoomOutButton;function ZoomOutButtonContainer_storeMapper(classifierStore){var{disableImageToolbar,zoomOut}=classifierStore.subjectViewer;return{disabled:disableImageToolbar,zoomOut}}function ZoomOutButtonContainer(_ref){var{separateFrameZoomOut}=_ref,{disabled,zoomOut}=useStores(ZoomOutButtonContainer_storeMapper),[timer,setTimer]=(0,react.useState)(""),zoomCallback=separateFrameZoomOut||zoomOut;return(0,jsx_runtime.jsx)(ZoomOutButton_ZoomOutButton,{disabled,onClick:function onClick(){clearInterval(timer),zoomCallback()},onPointerDown:function onPointerDown(event){var{currentTarget,pointerId}=event;clearInterval(timer);var newTimer=setInterval(zoomCallback,100);setTimer(newTimer),currentTarget.setPointerCapture(pointerId)},onPointerUp:function onPointerUp(event){var{currentTarget,pointerId}=event;currentTarget.releasePointerCapture(pointerId),clearInterval(timer),setTimer("")}})}const ZoomOutButton_ZoomOutButtonContainer=(0,mobxreact_esm.PA)(ZoomOutButtonContainer);ZoomOutButtonContainer.propTypes={separateFrameZoomOut:prop_types_default().func};var SeparateFrame_DEFAULT_HANDLER=()=>!0;function SeparateFrame_storeMapper(classifierStore){return{hasAnnotateTask:classifierStore.subjectViewer.hasAnnotateTask}}var SeparateFrame=_ref=>{var{enableInteractionLayer=!1,enableRotation=SeparateFrame_DEFAULT_HANDLER,frame=0,frameUrl="",limitSubjectHeight=!1,onError=SeparateFrame_DEFAULT_HANDLER,onReady=SeparateFrame_DEFAULT_HANDLER,subject}=_ref,{img,error,loading,subjectImage}=useSubjectImage({frame,src:frameUrl,onError,onReady}),{naturalHeight=600,naturalWidth=800}=img,[invert,setInvert]=(0,react.useState)(!1),[rotation,setRotation]=(0,react.useState)(0),[onPan,setOnPanState]=(0,react.useState)(SeparateFrame_DEFAULT_HANDLER),[onZoom,setOnZoomState]=(0,react.useState)(SeparateFrame_DEFAULT_HANDLER),[separateFrameAnnotate,setSeparateFrameAnnotate]=(0,react.useState)(!0),[separateFrameMove,setSeparateFrameMove]=(0,react.useState)(!1),handleSetOnPan=(0,react.useCallback)(fn=>{setOnPanState(()=>fn)},[]),handleSetOnZoom=(0,react.useCallback)(fn=>{setOnZoomState(()=>fn)},[]);var{onKeyZoom}=defaultKeyMappings({panLeft:function panLeft(){onPan(-1,0)},panRight:function panRight(){onPan(1,0)},panUp:function panUp(){onPan(0,-1)},panDown:function panDown(){onPan(0,1)},rotate:rotation,zoomIn:function zoomIn(){onZoom("zoomin",1)},zoomOut:function zoomOut(){onZoom("zoomout",-1)}}),separateFrameEnableMove=()=>{setSeparateFrameMove(!0),setSeparateFrameAnnotate(!1)},{hasAnnotateTask}=useStores(SeparateFrame_storeMapper);return!hasAnnotateTask&&separateFrameAnnotate&&separateFrameEnableMove(),(0,jsx_runtime.jsxs)(Box.a,{direction:"row",children:[(0,jsx_runtime.jsx)(SingleImageViewer_SingleImageViewer,{enableInteractionLayer,enableRotation,frame,imgRef:subjectImage,invert,limitSubjectHeight,move:separateFrameMove,naturalHeight,naturalWidth,onKeyDown:onKeyZoom,rotation,setOnPan:handleSetOnPan,setOnZoom:handleSetOnZoom,src:img.src,subject}),(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-3",light:"white"},border:{color:{dark:"dark-1",light:"light-3"},side:"all"},direction:"column",height:"fit-content",pad:"8px",style:{width:"3rem"},children:[hasAnnotateTask&&(0,jsx_runtime.jsx)(AnnotateButton_AnnotateButtonContainer,{separateFrameAnnotate,separateFrameEnableAnnotate:()=>{setSeparateFrameAnnotate(!0),setSeparateFrameMove(!1)}}),(0,jsx_runtime.jsx)(MoveButton_MoveButtonContainer,{separateFrameMove,separateFrameEnableMove}),(0,jsx_runtime.jsx)(ZoomInButton_ZoomInButtonContainer,{separateFrameZoomIn:()=>{onZoom("zoomin",1)}}),(0,jsx_runtime.jsx)(ZoomOutButton_ZoomOutButtonContainer,{separateFrameZoomOut:()=>{onZoom("zoomout",-1)}}),(0,jsx_runtime.jsx)(RotateButton_RotateButtonContainer,{separateFrameRotate:()=>{setRotation(prevRotation=>prevRotation-90)}}),(0,jsx_runtime.jsx)(ResetButton_ResetButtonContainer,{separateFrameResetView:()=>{setRotation(0),setInvert(!1),onZoom("zoomto",1)}}),(0,jsx_runtime.jsx)(InvertButton_InvertButtonContainer,{separateFrameInvert:()=>{setInvert(prev=>!prev)}})]})]})};SeparateFrame.propTypes={enableInteractionLayer:prop_types_default().bool,enableRotation:prop_types_default().func,frame:prop_types_default().number,frameUrl:prop_types_default().string,limitSubjectHeight:prop_types_default().bool,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(prop_types_default().shape({url:prop_types_default().string}))})};const SeparateFrame_SeparateFrame=SeparateFrame;function SeparateFramesViewer_storeMapper(store){var _store$workflows,{limit_subject_height:limitSubjectHeight,multi_image_layout:multiImageLayout}=null===(_store$workflows=store.workflows)||void 0===_store$workflows||null===(_store$workflows=_store$workflows.active)||void 0===_store$workflows?void 0:_store$workflows.configuration;return{limitSubjectHeight,multiImageLayout}}var SeparateFramesViewer_DEFAULT_HANDLER=()=>!0;function SeparateFramesViewer(_ref){var _subject$locations2,{enableInteractionLayer=!1,enableRotation=SeparateFramesViewer_DEFAULT_HANDLER,loadingState=async_states_default().initialized,onError=SeparateFramesViewer_DEFAULT_HANDLER,onReady=SeparateFramesViewer_DEFAULT_HANDLER,subject}=_ref,{limitSubjectHeight,multiImageLayout}=useStores(SeparateFramesViewer_storeMapper),[forceColLayout,setForceColLayout]=(0,react.useState)(!1),[numFramesHorizontally,setNumFramesHorizontally]=(0,react.useState)(1);(0,react.useEffect)(()=>{var _subject$locations;"row"===multiImageLayout?setNumFramesHorizontally(null==subject||null===(_subject$locations=subject.locations)||void 0===_subject$locations?void 0:_subject$locations.length):"grid2"===multiImageLayout?setNumFramesHorizontally(2):"grid3"===multiImageLayout&&setNumFramesHorizontally(3)},[multiImageLayout]);var framesContainer=(0,react.useRef)(null),resizeObserver=(0,react.useRef)(null);return(0,react.useEffect)(()=>{var tooSmallContainerWidth=200*numFramesHorizontally;return resizeObserver.current=new window.ResizeObserver(entries=>{entries[0].contentRect.width<tooSmallContainerWidth?setForceColLayout(!0):setForceColLayout(!1)}),framesContainer.current&&resizeObserver.current.observe(framesContainer.current),()=>{framesContainer.current&&resizeObserver.current.unobserve(framesContainer.current)}},[numFramesHorizontally]),loadingState!==async_states_default().error&&null!=subject&&subject.locations?(0,jsx_runtime.jsxs)("div",{ref:framesContainer,children:[(0,jsx_runtime.jsx)(Grid_Grid.x,{gap:"xsmall",columns:forceColLayout?"auto":["repeat(".concat(numFramesHorizontally,", 1fr)")],rows:"auto",children:null===(_subject$locations2=subject.locations)||void 0===_subject$locations2?void 0:_subject$locations2.map((location,index)=>(0,jsx_runtime.jsx)(SeparateFrame_SeparateFrame,{enableInteractionLayer,enableRotation,frame:index,frameUrl:location.url,limitSubjectHeight,onError,onReady,subject},location.url))}),(0,jsx_runtime.jsx)(Box.a,{justify:"center",pad:"xsmall",children:(0,jsx_runtime.jsx)(ViewModeButton_ViewModeButton,{})})]}):(0,jsx_runtime.jsx)("div",{children:"Something went wrong."})}const SeparateFramesViewer_SeparateFramesViewer=(0,mobxreact_esm.PA)(SeparateFramesViewer);function FlipbookViewerContainer_storeMapper(store){var _store$workflows,{enableRotation,frame:defaultFrame,invert,move,rotation,separateFramesView,setOnPan,setOnZoom}=store.subjectViewer,{flipbook_autoplay:flipbookAutoplay,limit_subject_height:limitSubjectHeight,playIterations}=null===(_store$workflows=store.workflows)||void 0===_store$workflows||null===(_store$workflows=_store$workflows.active)||void 0===_store$workflows?void 0:_store$workflows.configuration;return{defaultFrame,enableRotation,flipbookAutoplay,invert,limitSubjectHeight,move,playIterations,rotation,separateFramesView,setOnPan,setOnZoom}}SeparateFramesViewer.propTypes={enableInteractionLayer:prop_types_default().bool,enableRotation:prop_types_default().func,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator_locationValidator)}).isRequired};var FlipbookViewerContainer_DEFAULT_HANDLER=()=>!0;function FlipbookViewerContainer(_ref){var{enableInteractionLayer=!1,loadingState=async_states_default().initialized,onError=FlipbookViewerContainer_DEFAULT_HANDLER,onReady=FlipbookViewerContainer_DEFAULT_HANDLER,subject}=_ref,{defaultFrame,enableRotation,flipbookAutoplay,invert,limitSubjectHeight,move,playIterations,rotation,separateFramesView,setOnPan,setOnZoom}=useStores(FlipbookViewerContainer_storeMapper);return(0,react.useEffect)(function preloadImages(){var _subject$locations;null==subject||null===(_subject$locations=subject.locations)||void 0===_subject$locations||_subject$locations.forEach(_ref2=>{var{url}=_ref2;if(url){var{Image}=window;(new Image).src=url}})},[null==subject?void 0:subject.locations]),loadingState!==async_states_default().error&&null!=subject&&subject.locations?(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:separateFramesView?(0,jsx_runtime.jsx)(SeparateFramesViewer_SeparateFramesViewer,{enableInteractionLayer,enableRotation,onError,onReady,subject}):(0,jsx_runtime.jsx)(FlipbookViewer_FlipbookViewer,{defaultFrame,enableInteractionLayer,enableRotation,flipbookAutoplay,invert,limitSubjectHeight,move,onError,onReady,playIterations,rotation,setOnPan,setOnZoom,subject})}):(0,jsx_runtime.jsx)("div",{children:"Something went wrong."})}FlipbookViewerContainer.propTypes={enableInteractionLayer:prop_types_default().bool,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator_locationValidator)}).isRequired};const FlipbookViewer_FlipbookViewerContainer=(0,mobxreact_esm.PA)(FlipbookViewerContainer);var Map=__webpack_require__("../../node_modules/ol/Map.js"),View=__webpack_require__("../../node_modules/ol/View.js"),condition=__webpack_require__("../../node_modules/ol/events/condition.js"),format_GeoJSON=__webpack_require__("../../node_modules/ol/format/GeoJSON.js"),interaction_Select=__webpack_require__("../../node_modules/ol/interaction/Select.js"),Translate=__webpack_require__("../../node_modules/ol/interaction/Translate.js"),Tile=__webpack_require__("../../node_modules/ol/layer/Tile.js"),Vector=__webpack_require__("../../node_modules/ol/layer/Vector.js"),OSM=__webpack_require__("../../node_modules/ol/source/OSM.js"),source_Vector=__webpack_require__("../../node_modules/ol/source/Vector.js"),Location=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Location.js"),ControlButton_excluded=["a11yTitle","icon","onClick","title"];function ControlButton_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ControlButton_defineProperty(e,r,t){return(r=function ControlButton_toPropertyKey(t){var i=function ControlButton_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledControlButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ControlButton__StyledControlButton",componentId:"sc-umnj2x-0"})(["margin:1px;padding:0;height:24.75px;width:24.75px;background-color:white;border:1px solid transparent;border-radius:2px;text-align:center;&:hover{border-color:black;}"]);function ControlButton(_ref){var{a11yTitle,icon,onClick,title}=_ref,rest=function ControlButton_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function ControlButton_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,ControlButton_excluded);return(0,jsx_runtime.jsx)(StyledControlButton,function ControlButton_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ControlButton_ownKeys(Object(t),!0).forEach(function(r){ControlButton_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ControlButton_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({a11yTitle,icon,onClick,title},rest))}ControlButton.propTypes={a11yTitle:prop_types.string.isRequired,icon:prop_types.node.isRequired,onClick:prop_types.func.isRequired,title:prop_types.string.isRequired};const ControlButton_ControlButton=ControlButton;function RecenterButton(_ref){var{onClick}=_ref,{t}=useTranslation("components"),label=t("SubjectViewer.GeoMapViewer.RecenterButton.ariaLabel");return(0,jsx_runtime.jsx)(ControlButton_ControlButton,{a11yTitle:label,icon:(0,jsx_runtime.jsx)(Location.a,{color:"dark-5",size:"small"}),onClick,title:label})}RecenterButton.propTypes={onClick:prop_types.func.isRequired};const RecenterButton_RecenterButton=RecenterButton;var Revert=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Revert.js");function ResetButton_ResetButton_ResetButton(_ref){var{onClick}=_ref,{t}=useTranslation("components"),label=t("SubjectViewer.GeoMapViewer.ResetButton.ariaLabel");return(0,jsx_runtime.jsx)(ControlButton_ControlButton,{a11yTitle:label,icon:(0,jsx_runtime.jsx)(Revert.z,{color:"dark-5",size:"small"}),onClick:function handleClick(){var confirmMessage=t("SubjectViewer.GeoMapViewer.ResetButton.confirm");window.confirm(confirmMessage)&&onClick()},title:label})}ResetButton_ResetButton_ResetButton.propTypes={onClick:prop_types.func.isRequired};const components_ResetButton_ResetButton=ResetButton_ResetButton_ResetButton;var geom_Point=__webpack_require__("../../node_modules/ol/geom/Point.js"),Style=__webpack_require__("../../node_modules/ol/style/Style.js"),Fill=__webpack_require__("../../node_modules/ol/style/Fill.js"),Stroke=__webpack_require__("../../node_modules/ol/style/Stroke.js"),style_Circle=__webpack_require__("../../node_modules/ol/style/Circle.js"),models_Point_Point_Point=mobx_state_tree_module.gK.model("Point",{type:mobx_state_tree_module.gK.literal("Feature"),geometry:mobx_state_tree_module.gK.model({type:mobx_state_tree_module.gK.literal("Point"),coordinates:mobx_state_tree_module.gK.array(mobx_state_tree_module.gK.number)}),properties:mobx_state_tree_module.gK.optional(mobx_state_tree_module.gK.model({uncertainty_radius:mobx_state_tree_module.gK.maybe(mobx_state_tree_module.gK.number)}),{})}).preProcessSnapshot(snapshot=>{var _newGeometry$getType,_newGeometry$getCoord,newSnapshot=Object.assign({},snapshot,{type:"Feature"}),newGeometry=newSnapshot.geometry||{},coordinates=[];"function"==typeof newGeometry.getType?coordinates=(null===(_newGeometry$getCoord=newGeometry.getCoordinates)||void 0===_newGeometry$getCoord?void 0:_newGeometry$getCoord.call(newGeometry))||[]:coordinates=newGeometry.coordinates||[];return newSnapshot.geometry={type:newGeometry.type||(null===(_newGeometry$getType=newGeometry.getType)||void 0===_newGeometry$getType?void 0:_newGeometry$getType.call(newGeometry))||"Point",coordinates:Array.isArray(coordinates)?coordinates:[]},newSnapshot}).views(self=>({getCenterCoordinates(_ref){var _feature$getGeometry,_feature$getGeometry$,{feature}=_ref,olCenter=null==feature||null===(_feature$getGeometry=feature.getGeometry)||void 0===_feature$getGeometry||null===(_feature$getGeometry=_feature$getGeometry.call(feature))||void 0===_feature$getGeometry||null===(_feature$getGeometry$=_feature$getGeometry.getCoordinates)||void 0===_feature$getGeometry$?void 0:_feature$getGeometry$.call(_feature$getGeometry);return Array.isArray(olCenter)&&olCenter.length>=2?olCenter:self.geometry.coordinates},getDragHandleCoordinates(_ref2){var{feature,geoDrawingTask}=_ref2,radius=self.getUncertaintyRadius({feature,geoDrawingTask});if(null!=radius){var center=self.getCenterCoordinates({feature});if(Array.isArray(center)&&!(center.length<2))return[center[0]+radius,center[1]]}},getTool(_ref3){var _feature$get,{feature,geoDrawingTask}=_ref3,tools=null==geoDrawingTask?void 0:geoDrawingTask.tools;if(tools){var toolIndex=null==feature||null===(_feature$get=feature.get)||void 0===_feature$get?void 0:_feature$get.call(feature,"toolIndex");return("number"==typeof toolIndex?tools[toolIndex]:void 0)||tools.find(tool=>"Point"===tool.type)}},getStyles(_ref4){var{feature,geoDrawingTask,resolution,isSelected=!1}=_ref4,tool=self.getTool({feature,geoDrawingTask}),color=(null==tool?void 0:tool.color)||"#007bff",pointRadius=isSelected?8:6,strokeWidth=isSelected?3:2,strokeColor=isSelected?"white":color,styles=[new Style.Ay({image:new style_Circle.A({radius:pointRadius,fill:new Fill.A({color}),stroke:new Stroke.A({color:strokeColor,width:strokeWidth})})})],uncertaintyRadiusPixels=self.getUncertaintyRadiusPixels({feature,geoDrawingTask,resolution});if(uncertaintyRadiusPixels&&(styles.push(new Style.Ay({image:new style_Circle.A({radius:uncertaintyRadiusPixels,stroke:new Stroke.A({color,width:2,lineDash:[5,10]})})})),isSelected)){var dragHandleCoordinates=self.getDragHandleCoordinates({feature,geoDrawingTask});dragHandleCoordinates&&styles.push(new Style.Ay({geometry:new geom_Point.A(dragHandleCoordinates),image:new style_Circle.A({radius:6,fill:new Fill.A({color}),stroke:new Stroke.A({color:"white",width:2})})}))}return styles},getUncertaintyRadius(_ref5){var _feature$get2,_feature$get3,_self$properties,{feature,geoDrawingTask}=_ref5,tool=self.getTool({feature,geoDrawingTask});return!0===(null==tool?void 0:tool.uncertainty_circle)?null!==(_feature$get2=null==feature||null===(_feature$get3=feature.get)||void 0===_feature$get3?void 0:_feature$get3.call(feature,"uncertainty_radius"))&&void 0!==_feature$get2?_feature$get2:null===(_self$properties=self.properties)||void 0===_self$properties?void 0:_self$properties.uncertainty_radius:null},getUncertaintyRadiusPixels(_ref6){var{feature,geoDrawingTask,resolution}=_ref6;if(resolution){var radiusCoords=self.getUncertaintyRadius({feature,geoDrawingTask});if(null!=radiusCoords)return radiusCoords/resolution}}}));const models_Point_Point=models_Point_Point_Point;const helpers_asMSTFeature=function asMSTFeature(feature){return feature?(0,mobx_state_tree_module.gk)(feature)?feature:function toMSTFeature(olFeature){var _olFeature$getGeometr,_geometry$getType,_olFeature$getPropert,geometry=null==olFeature||null===(_olFeature$getGeometr=olFeature.getGeometry)||void 0===_olFeature$getGeometr?void 0:_olFeature$getGeometr.call(olFeature),geometryType=null==geometry||null===(_geometry$getType=geometry.getType)||void 0===_geometry$getType?void 0:_geometry$getType.call(geometry),GeoFeatureModel=geometryType?features_models_namespaceObject[geometryType]:void 0;return null!=GeoFeatureModel&&GeoFeatureModel.create?GeoFeatureModel.create({geometry,properties:null===(_olFeature$getPropert=olFeature.getProperties)||void 0===_olFeature$getPropert?void 0:_olFeature$getPropert.call(olFeature)}):null}(feature):null};const helpers_getFeatureStyle=function getFeatureStyle(_ref){var{feature,geoDrawingTask,isSelected=!1,resolution}=_ref,mstFeature=helpers_asMSTFeature(feature);return mstFeature?mstFeature.getStyles({feature,geoDrawingTask,isSelected,resolution}):null};var Pointer=__webpack_require__("../../node_modules/ol/interaction/Pointer.js");const helpers_createModifyUncertaintyInteraction=function createModifyUncertaintyInteraction(_ref){var{geoDrawingTask,selectInteraction,translateInteraction,dragHandleTolerance=15,minRadius=10}=_ref,state={draggedFeature:null,isDragging:!1},mstFeatureCache=new WeakMap;function getCachedMSTFeature(olFeature){return mstFeatureCache.has(olFeature)||mstFeatureCache.set(olFeature,helpers_asMSTFeature(olFeature)),mstFeatureCache.get(olFeature)}function distance(_ref2,_ref3){var[x1,y1]=_ref2,[x2,y2]=_ref3,dx=x2-x1,dy=y2-y1;return Math.sqrt(dx*dx+dy*dy)}function checkDragHandleClick(pixel,map){if(!selectInteraction)return null;var selectedFeatures=selectInteraction.getFeatures().getArray();for(var olFeature of selectedFeatures){var _mstFeature$getUncert,_mstFeature$getDragHa,mstFeature=getCachedMSTFeature(olFeature);if(mstFeature)if(null!==(null===(_mstFeature$getUncert=mstFeature.getUncertaintyRadius)||void 0===_mstFeature$getUncert?void 0:_mstFeature$getUncert.call(mstFeature,{feature:olFeature,geoDrawingTask}))){var dragHandleCoordinates=null===(_mstFeature$getDragHa=mstFeature.getDragHandleCoordinates)||void 0===_mstFeature$getDragHa?void 0:_mstFeature$getDragHa.call(mstFeature,{feature:olFeature,geoDrawingTask});if(dragHandleCoordinates)if(distance(pixel,map.getPixelFromCoordinate(dragHandleCoordinates))<dragHandleTolerance)return olFeature}}return null}return new Pointer.A({handleDownEvent:function handleDownEvent(event){var map=this.getMap();if(!map)return!1;var selectedFeature=checkDragHandleClick(event.pixel,map);if(selectedFeature){state.draggedFeature=selectedFeature,state.isDragging=!0,translateInteraction&&translateInteraction.setActive(!1);var viewport=map.getViewport();return viewport&&(viewport.style.cursor="ew-resize"),!0}return!1},handleDragEvent:function handleDragEvent(event){if(state.isDragging&&state.draggedFeature){var map=this.getMap();if(map){var coordinate=map.getCoordinateFromPixel(event.pixel),centerCoordinates=state.draggedFeature.getGeometry().getCoordinates(),newRadius=Math.max(minRadius,distance(centerCoordinates,coordinate));state.draggedFeature.set("uncertainty_radius",newRadius),state.draggedFeature.changed()}}},handleUpEvent:function handleUpEvent(event){if(state.isDragging){state.isDragging=!1,state.draggedFeature=null,translateInteraction&&translateInteraction.setActive(!0);var map=this.getMap(),viewport=null==map?void 0:map.getViewport();return viewport&&(viewport.style.cursor=""),!1}return!0},handleMoveEvent:function handleMoveEvent(event){var map=this.getMap();if(map&&!state.isDragging){var viewport=map.getViewport();if(viewport){var selectedFeature=checkDragHandleClick(event.pixel,map);viewport.style.cursor=selectedFeature?"ew-resize":""}}}})};var MapContainer=styled_components_browser_esm.default.div.withConfig({displayName:"GeoMapViewer__MapContainer",componentId:"sc-ut4gi2-0"})(["height:100%;min-height:400px;width:100%;"]),ControlsBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"GeoMapViewer__ControlsBox",componentId:"sc-ut4gi2-1"})(["position:absolute;top:80px;left:10px;z-index:1;"]);function fitViewToFeatures(map,features){map.getView().fit(features.getExtent(),{padding:[32,32,32,32],maxZoom:12,duration:250})}function GeoMapViewer(_ref){var{geoDrawingTask,geoJSON}=_ref,mapContainerRef=(0,react.useRef)(),mapRef=(0,react.useRef)(),featuresRef=(0,react.useRef)(),featuresLayerRef=(0,react.useRef)(),geoJSONFormatRef=(0,react.useRef)(),selectRef=(0,react.useRef)(),translateRef=(0,react.useRef)(),modifyUncertaintyRef=(0,react.useRef)(),pointerMoveHandlerRef=(0,react.useRef)(),geoJSONReadOptions={dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"};return(0,react.useEffect)(function createMapOnce(){if(!mapRef.current&&mapContainerRef.current){var geoJSONFormat=new format_GeoJSON.A;geoJSONFormatRef.current=geoJSONFormat;var baseLayer=new Tile.A({preload:1,source:new OSM.A}),featuresSource=new source_Vector.A({features:[]});featuresRef.current=featuresSource;var featuresLayer=new Vector.A({source:featuresSource});featuresLayerRef.current=featuresLayer;var map=new Map.A({target:mapContainerRef.current,layers:[baseLayer,featuresLayer],view:new View.Ay({center:[0,0],zoom:0})}),hasGeoDrawingTask=geoDrawingTask&&geoDrawingTask.tools.length>0;if(hasGeoDrawingTask){var select=new interaction_Select.A({condition:condition.jM,layers:[featuresLayer],style:feature=>handleFeatureStyle({feature,isSelected:!0})});featuresLayer.setStyle(feature=>handleFeatureStyle({feature,isSelected:select.getFeatures().getArray().includes(feature)}));var translate=new Translate.A({features:select.getFeatures()});map.addInteraction(select),map.addInteraction(translate),selectRef.current=select,translateRef.current=translate;var modifyUncertainty=helpers_createModifyUncertaintyInteraction({geoDrawingTask,selectInteraction:select,translateInteraction:translate});map.addInteraction(modifyUncertainty),modifyUncertaintyRef.current=modifyUncertainty;var handlePointerMove=event=>{var hit=map.hasFeatureAtPixel(event.pixel,{layerFilter:layer=>layer===featuresLayer}),element=map.getTargetElement();element&&(element.style.cursor=hit?"pointer":"")};map.on("pointermove",handlePointerMove),pointerMoveHandlerRef.current=handlePointerMove}else featuresLayer.setStyle(feature=>handleFeatureStyle({feature,isSelected:!1}));return mapRef.current=map,()=>{selectRef.current&&map.removeInteraction(selectRef.current),translateRef.current&&map.removeInteraction(translateRef.current),modifyUncertaintyRef.current&&map.removeInteraction(modifyUncertaintyRef.current),pointerMoveHandlerRef.current&&map.un("pointermove",pointerMoveHandlerRef.current),map.setTarget(void 0),mapRef.current=void 0,featuresRef.current=void 0,featuresLayerRef.current=void 0,geoJSONFormatRef.current=void 0,selectRef.current=void 0,translateRef.current=void 0,modifyUncertaintyRef.current=void 0,pointerMoveHandlerRef.current=void 0}}function handleFeatureStyle(_ref2){var{feature,isSelected=!1}=_ref2;return helpers_getFeatureStyle({feature,geoDrawingTask:hasGeoDrawingTask?geoDrawingTask:null,isSelected,resolution:map.getView().getResolution()})}},[]),(0,react.useEffect)(function updateFeatures(){var map=mapRef.current,features=featuresRef.current;if(map&&features){var geoJSONFormat=geoJSONFormatRef.current||new format_GeoJSON.A;if(geoJSONFormatRef.current=geoJSONFormat,features.clear(),geoJSON){var newFeatures=geoJSONFormat.readFeatures(geoJSON,geoJSONReadOptions);features.addFeatures(newFeatures),features.getFeatures().length&&fitViewToFeatures(map,features)}}},[geoJSON]),(0,jsx_runtime.jsxs)(Box.a,{as:"section",fill:!0,children:[(0,jsx_runtime.jsx)(MapContainer,{ref:mapContainerRef,className:"map-container","data-testid":"geo-map-container"}),geoJSON&&(0,jsx_runtime.jsxs)(ControlsBox,{children:[(0,jsx_runtime.jsx)(RecenterButton_RecenterButton,{onClick:function handleRecenter(){var map=mapRef.current,features=featuresRef.current;map&&features&&features.getFeatures().length>0&&fitViewToFeatures(map,features)}}),(0,jsx_runtime.jsx)(components_ResetButton_ResetButton,{onClick:function handleReset(){var map=mapRef.current,features=featuresRef.current;if(map&&features&&geoJSON){var geoJSONFormat=geoJSONFormatRef.current||new format_GeoJSON.A;geoJSONFormatRef.current=geoJSONFormat,features.clear();var newFeatures=geoJSONFormat.readFeatures(geoJSON,geoJSONReadOptions);features.addFeatures(newFeatures),features.getFeatures().length&&fitViewToFeatures(map,features)}}})]})]})}GeoMapViewer.propTypes={geoDrawingTask:(0,prop_types.shape)({tools:(0,prop_types.arrayOf)((0,prop_types.shape)({type:prop_types.string.isRequired,label:prop_types.string,color:prop_types.string})),type:prop_types.string.isRequired}),geoJSON:(0,prop_types.shape)({})};const GeoMapViewer_GeoMapViewer=GeoMapViewer;function GeoMapViewerContainer_storeMapper(classifierStore){var{subjects:{active:subject},subjectViewer:{loadingState},workflowSteps:{activeStepTasks}}=classifierStore;return{activeStepTasks,latest:null==subject?void 0:subject.stepHistory.latest,loadingState,subject}}var GeoMapViewerContainer_DEFAULT_HANDLER=()=>!0;function GeoMapViewerContainer(_ref){var{onError=GeoMapViewerContainer_DEFAULT_HANDLER,onReady=GeoMapViewerContainer_DEFAULT_HANDLER}=_ref,{activeStepTasks,latest,loadingState,subject}=useStores(GeoMapViewerContainer_storeMapper),{data,error,loading,type,viewer}=useSubjectJSON({onError,onReady,subject}),geoJSONData=null;if(data&&"GeoJSON"===(null==type?void 0:type.name)&&(geoJSONData=data),(0,react.useEffect)(()=>{var _latest$annotations,geoAnnotation=null==latest||null===(_latest$annotations=latest.annotations)||void 0===_latest$annotations?void 0:_latest$annotations.find(annotation=>"geoDrawing"===annotation.taskType);geoAnnotation&&geoJSONData&&0===geoAnnotation.value.length&&geoAnnotation.update([geoJSONData])},[geoJSONData,null==latest?void 0:latest.annotations]),loadingState===async_states_default().loading||loading)return null;if(error)return(0,jsx_runtime.jsx)("p",{children:error.message});var geoDrawingTask=activeStepTasks.find(task=>"geoDrawing"===task.type);return(0,jsx_runtime.jsx)(GeoMapViewer_GeoMapViewer,{geoDrawingTask,geoJSON:geoJSONData,subjectId:subject.id})}GeoMapViewerContainer.propTypes={onError:prop_types.func,onReady:prop_types.func};const GeoMapViewer_GeoMapViewerContainer=(0,mobxreact_esm.PA)(GeoMapViewerContainer);var DocumentText=__webpack_require__("../../node_modules/grommet-icons/es6/icons/DocumentText.js");const components_theme={global:{colors:{icon:{dark:"white",light:"black"},text:{dark:"white",light:"black"}},hover:{background:"accent-1"}},select:{icons:{margin:"0"},options:{text:{size:"small"}}}};var ImageAndTextControls_DirectionButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__DirectionButton",componentId:"sc-1vj916i-0"})(["border:none;padding:0;& > div{flex-direction:column;}"]),ImageAndTextControls_ThumbnailButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__ThumbnailButton",componentId:"sc-1vj916i-1"})(["display:flex;"," "," padding:0;border:none;background-size:cover;background-repeat:no-repeat;background-position:center;"," &[aria-selected=true]{border:solid 2px ",";}"],props=>(0,styled_components_browser_esm.css)(["height:",";"],props.thumbnailDimension),props=>(0,styled_components_browser_esm.css)(["width:",";"],props.thumbnailDimension),props=>(0,styled_components_browser_esm.css)(["background-image:url(",");"],props.thumbnailerUrl),props=>props.theme.global.colors["neutral-2"]),TextButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"ImageAndTextControls__TextButton",componentId:"sc-1vj916i-2"})(["align-items:center;border:solid 1px ",";display:flex;justify-content:center;padding:0;"," "," &:hover{box-shadow:0px 0px 0px 2px ",";}&[aria-selected=true]{border:solid 2px ",";}"],props=>props.theme.global.colors["light-3"],props=>(0,styled_components_browser_esm.css)(["height:",";"],props.thumbnailDimension),props=>(0,styled_components_browser_esm.css)(["width:",";"],props.thumbnailDimension),props=>props.theme.global.colors.brand,props=>props.theme.global.colors["neutral-2"]),ImageAndTextControls_backgrounds={dark:"dark-3",light:"neutral-6"},ImageAndTextControls=_ref=>{var{currentFrame=0,locations=[],onFrameChange=()=>!0}=_ref,{t}=useTranslation("components"),[smallScreenStyle,setSmallScreenStyle]=(0,react.useState)(!1),controlsContainer=(0,react.useRef)(null),resizeObserver=(0,react.useRef)(null);(0,react.useEffect)(()=>(resizeObserver.current=new window.ResizeObserver(entries=>{entries[0].contentRect.width<500?setSmallScreenStyle(!0):setSmallScreenStyle(!1)}),controlsContainer.current&&resizeObserver.current.observe(controlsContainer.current),()=>{controlsContainer.current&&resizeObserver.current.unobserve(controlsContainer.current)}),[]);var handleKeyDown=event=>{var index=currentFrame;switch(event.key){case"ArrowRight":event.preventDefault(),event.stopPropagation(),handleNext(),index<locations.length-1?document.getElementById("thumbnail-".concat(index+1)).focus():document.getElementById("thumbnail-".concat(0)).focus();break;case"ArrowLeft":event.preventDefault(),event.stopPropagation(),handlePrevious(),index>0?document.getElementById("thumbnail-".concat(index-1)).focus():document.getElementById("thumbnail-".concat(locations.length-1)).focus();break;default:return!0}},handlePrevious=()=>{onFrameChange(currentFrame>0?currentFrame-1:locations.length-1)},handleNext=()=>{currentFrame<locations.length-1?onFrameChange(currentFrame+1):onFrameChange(0)},handleThumbnailClick=index=>{onFrameChange(index)};return(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:components_theme,children:(0,jsx_runtime.jsx)(Box.a,{background:ImageAndTextControls_backgrounds,ref:controlsContainer,children:(0,jsx_runtime.jsx)(Box.a,{fill:!0,pad:smallScreenStyle?{horizontal:"10px",vertical:"5px"}:{horizontal:"20px",vertical:"10px"},gap:smallScreenStyle?"xsmall":"small",children:(0,jsx_runtime.jsxs)(Box.a,{direction:"row",justify:"center",gap:smallScreenStyle?"xsmall":"small",children:[(0,jsx_runtime.jsx)(ImageAndTextControls_DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormPrevious.Q,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel"),onClick:handlePrevious}),(0,jsx_runtime.jsx)(Box.a,{"aria-label":"Image thumbnail and text icon",direction:"row",gap:"5px",role:"tablist",align:"center",children:(null==locations?void 0:locations.length)&&locations.map((_ref2,index)=>{var{mimeType,url}=_ref2,activeFrame=currentFrame===index,tabIndex=activeFrame?0:-1;if("text/plain"!==mimeType){var thumbnailerUrl="https://thumbnails.zooniverse.org/100x100".concat(url.slice(7,url.length));return(0,jsx_runtime.jsx)(ImageAndTextControls_ThumbnailButton,{id:"thumbnail-".concat(index),"aria-controls":"image-and-text-tab-panel","aria-label":t("SubjectViewer.MultiFrameViewer.FrameCarousel.thumbnailAltText"),"aria-selected":activeFrame?"true":"false",onClick:()=>handleThumbnailClick(index),onKeyDown:handleKeyDown,role:"tab",tabIndex,thumbnailDimension:smallScreenStyle?"30px":"40px",thumbnailerUrl},"".concat(url,"-").concat(index))}return(0,jsx_runtime.jsx)(TextButton,{id:"thumbnail-".concat(index),"aria-controls":"image-and-text-tab-panel","aria-label":t("SubjectViewer.ImageAndTextViewer.textIconAltText"),"aria-selected":activeFrame?"true":"false",icon:(0,jsx_runtime.jsx)(DocumentText.T,{}),onClick:()=>handleThumbnailClick(index),onKeyDown:handleKeyDown,role:"tab",tabIndex,thumbnailDimension:smallScreenStyle?"30px":"40px"},"".concat(url,"-").concat(index))})}),(0,jsx_runtime.jsx)(ImageAndTextControls_DirectionButton,{a11yTitle:smallScreenStyle?t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"):"",icon:(0,jsx_runtime.jsx)(FormNext.O,{}),label:smallScreenStyle?"":t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"),onClick:handleNext})]})})})})};ImageAndTextControls.propTypes={currentFrame:prop_types_default().number,locations:prop_types_default().arrayOf(locationValidator_locationValidator).isRequired,onFrameChange:prop_types_default().func};const components_ImageAndTextControls=(0,styled_components_browser_esm.withTheme)(ImageAndTextControls);var StyledMark=styled_components_browser_esm.default.mark.withConfig({displayName:"Selection__StyledMark",componentId:"sc-19qu8jh-0"})(["background-color:",";border-radius:8px;color:black;margin-right:.2em;padding:.1em .3em;"],props=>props.color),StyledDeleteButton=styled_components_browser_esm.default.button.withConfig({displayName:"Selection__StyledDeleteButton",componentId:"sc-19qu8jh-1"})(["border:none;background:transparent;font-size:1.2em;padding:0;&:hover{cursor:pointer;}"]);function Selection_DEFAULT_HANDLER(){return!0}function Selection_Selection(_ref){var{color,handleDelete=Selection_DEFAULT_HANDLER,label,text}=_ref,{t}=useTranslation("plugins");return(0,jsx_runtime.jsxs)(StyledMark,{"aria-label":"".concat(label,": ").concat(text),"data-selection":text,color,onKeyDown:function onKeyDown(event){"Delete"!==event.key&&"Backspace"!==event.key||handleDelete()},tabIndex:"0",children:[text," ",(0,jsx_runtime.jsx)(StyledDeleteButton,{"aria-label":t("HighlighterTask.delete"),onClick:handleDelete,title:t("HighlighterTask.delete"),children:""})]})}Selection_Selection.propTypes={color:prop_types_default().string.isRequired,handleDelete:prop_types_default().func,label:prop_types_default().string.isRequired,text:prop_types_default().string.isRequired};const components_Selection=Selection_Selection;var StyledPre=styled_components_browser_esm.default.pre.withConfig({displayName:"SingleTextViewer__StyledPre",componentId:"sc-igtbcc-0"})(["white-space:pre-wrap;color:",";font-family:'Anonymous Pro',monospace;@font-face{font-family:'Anonymous Pro';font-style:normal;font-weight:400;src:local('Anonymous Pro'),local('Anonymous Pro-Regular'),url(https://fonts.gstatic.com/s/anonymouspro/v21/rP2Bp2a15UIB7Un-bOeISG3pHls29QP-4Ks.woff2)  format('woff2');unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+2000-206F,U+2074,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD;}"],props=>props.theme.dark?"inherit":"black");function SingleTextViewer(_ref){var{content=[""],height="",subjectId=""}=_ref,theme=(0,styled_components_browser_esm.useTheme)();return(0,jsx_runtime.jsx)(Box.a,{a11yTitle:"Subject ".concat(subjectId," text"),as:"section",flex:"grow",height:{min:height},pad:"xsmall",tabIndex:"0",children:(0,jsx_runtime.jsx)(StyledPre,{theme,children:content})})}SingleTextViewer.propTypes={content:prop_types_default().arrayOf(prop_types_default().oneOfType([prop_types_default().string,prop_types_default().node])),height:prop_types_default().string,subjectId:prop_types_default().string};const SingleTextViewer_SingleTextViewer=SingleTextViewer;var defaultSubject={id:"",locations:[]};function SingleTextViewerContainer_DEFAULT_HANDLER(){return!0}function SingleTextViewerContainer(_ref){var highlighterAnnotation,content,_latest$annotations,{frame=0,height="",latest,loadingState=async_states_default().initialized,onError=SingleTextViewerContainer_DEFAULT_HANDLER,onReady=SingleTextViewerContainer_DEFAULT_HANDLER,subject=defaultSubject}=_ref,{data,error,loading}=useSubjectText({frame,subject,onReady,onError});latest&&([highlighterAnnotation]=null==latest||null===(_latest$annotations=latest.annotations)||void 0===_latest$annotations?void 0:_latest$annotations.filter(annotation=>"highlighter"===annotation.taskType));return loadingState===async_states_default().error?(0,jsx_runtime.jsxs)("p",{children:["Something went wrong. ",null==error?void 0:error.message]}):loadingState!==async_states_default().initialized?(content=highlighterAnnotation&&highlighterAnnotation.value.length>0?function labeledContent(data,annotation){var newContent=[],lastFocusIndex=0,dataIndex=0,{deleteHighlight,value}=annotation;for(dataIndex=0;dataIndex<data.length;dataIndex++){var _loop=function _loop(highlight){if(highlight.start===dataIndex){var preContent=data.slice(lastFocusIndex,dataIndex);newContent.push(preContent);var newLabel=(0,jsx_runtime.jsx)(components_Selection,{color:highlight.labelInformation.color,handleDelete:()=>deleteHighlight(value.indexOf(highlight)),label:highlight.labelInformation.label,text:highlight.text},"".concat(highlight.start,"-").concat(highlight.end));newContent.push(newLabel),lastFocusIndex=highlight.end+1}};for(var highlight of value)_loop(highlight)}var endContent=data.slice(lastFocusIndex,dataIndex);return newContent.push(endContent),newContent}(data,highlighterAnnotation):[data],(0,jsx_runtime.jsx)(SingleTextViewer_SingleTextViewer,{content,height,subjectId:subject.id})):null}SingleTextViewerContainer.propTypes={height:prop_types_default().string,latest:prop_types_default().shape({annotations:prop_types_default().array}),loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,subject:prop_types_default().shape({id:prop_types_default().string,locations:prop_types_default().arrayOf(locationValidator_locationValidator)})};const SingleTextViewerConnector=withStores((0,mobxreact_esm.PA)(SingleTextViewerContainer),function SingleTextViewerConnector_storeMapper(store){var{subjects:{active:subject},subjectViewer:{loadingState}}=store;return{latest:null==subject?void 0:subject.stepHistory.latest,loadingState,subject}});var DEFAULT_DIMENSIONS=[{clientHeight:400}],ImageAndTextViewerContainer_DEFAULT_HANDLER=()=>!0;function ImageAndTextViewerContainer(_ref){var{dimensions=DEFAULT_DIMENSIONS,frame=0,loadingState=async_states_default().initialized,onError=ImageAndTextViewerContainer_DEFAULT_HANDLER,onReady=ImageAndTextViewerContainer_DEFAULT_HANDLER,setFrame=ImageAndTextViewerContainer_DEFAULT_HANDLER,subject}=_ref;if(loadingState===async_states_default().error)return(0,jsx_runtime.jsx)("div",{children:"Something went wrong."});var _dimensions$,_dimensions$2,{type}=subject.locations[frame];return loadingState!==async_states_default().initialized?(0,jsx_runtime.jsxs)(Box.a,{fill:"horizontal",children:["text"===type?(0,jsx_runtime.jsx)(SingleTextViewerConnector,{frame,height:null!==(_dimensions$=dimensions[0])&&void 0!==_dimensions$&&_dimensions$.clientHeight?"".concat(null===(_dimensions$2=dimensions[0])||void 0===_dimensions$2?void 0:_dimensions$2.clientHeight,"px"):"",onError,onReady}):(0,jsx_runtime.jsx)(SingleImageViewer_SingleImageViewerContainer,{enableInteractionLayer:!1,loadingState,onError,onReady}),(0,jsx_runtime.jsx)(components_ImageAndTextControls,{currentFrame:frame,locations:subject.locations,onFrameChange:function handleFrameChange(newFrame){setFrame(newFrame)}})]}):null}ImageAndTextViewerContainer.propTypes={dimensions:prop_types_default().arrayOf(prop_types_default().shape({clientHeight:prop_types_default().number})),frame:prop_types_default().number,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,setFrame:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator_locationValidator)})};const ImageAndTextViewerConnector=withStores(ImageAndTextViewerContainer,function ImageAndTextViewerConnector_storeMapper(store){var{subjects:{active:subject},subjectViewer:{dimensions,frame,loadingState,setFrame}}=store;return{dimensions,frame,loadingState,setFrame,subject}});var More=__webpack_require__("../../node_modules/grommet-icons/es6/icons/More.js"),FrameCarousel_StyledControlButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FrameCarousel__StyledControlButton",componentId:"sc-eb3aut-0"})(["",""],props=>props.theme&&(0,styled_components_browser_esm.css)(["color:",";background:",";&:focus:not(:disabled),&:hover:not(:disabled){background:",";box-shadow:none;}"],props.theme.global.colors["neutral-6"],props.theme.global.colors.brand,(0,polished_esm.uq)(.5,props.theme.global.colors.brand)));function PreviousLabel(){var{t}=useTranslation("components");return(0,jsx_runtime.jsxs)(Box.a,{as:"span",align:"center",direction:"column",children:[(0,jsx_runtime.jsx)(FormUp.I,{color:"neutral-6"}),t("SubjectViewer.MultiFrameViewer.FrameCarousel.previousFrameLabel")]})}function NextLabel(){var{t}=useTranslation("components");return(0,jsx_runtime.jsxs)(Box.a,{as:"span",align:"center",direction:"column",children:[t("SubjectViewer.MultiFrameViewer.FrameCarousel.nextFrameLabel"),(0,jsx_runtime.jsx)(FormDown.t,{color:"neutral-6"})]})}var StyledMedia=(0,styled_components_browser_esm.default)(Media.A).withConfig({displayName:"FrameCarousel__StyledMedia",componentId:"sc-eb3aut-1"})(["height:40px;width:40px;img{aspect-ratio:1 / 1;}"]),FrameCarousel_StyledLabel=styled_components_browser_esm.default.label.withConfig({displayName:"FrameCarousel__StyledLabel",componentId:"sc-eb3aut-2"})([""," input{opacity:0.01;position:absolute;height:0;width:0;}:hover{cursor:pointer;}"],props=>props.theme&&(0,styled_components_browser_esm.css)(["input:checked + ","{border:solid ",";}input:focus + ","{outline:2px solid ",";}input:hover + ","{outline:2px solid ",";}"],StyledMedia,props.theme.global.colors["neutral-2"],StyledMedia,(0,polished_esm.uq)(.5,props.theme.global.colors.brand),StyledMedia,(0,polished_esm.uq)(.5,props.theme.global.colors.brand))),StyledFrameList=styled_components_browser_esm.default.ul.withConfig({displayName:"FrameCarousel__StyledFrameList",componentId:"sc-eb3aut-3"})(["align-items:center;display:flex;flex-direction:column;flex:1 1 auto;list-style-type:none;margin:0;overflow:auto;padding:0;position:relative;scroll-behavior:smooth;li{height:40px;margin:5px 0;width:40px;&:first-child{margin-top:14px;}&:last-child{margin-bottom:14px;}}"]);class FrameCarousel extends react.Component{componentDidMount(){this.handleScroll()}componentDidUpdate(prevProps){var{frame}=this.props;prevProps.frame!==frame&&this.handleScroll()}handleScroll(){var _this$activeLabel$cur,_this$frameList$curre,_this$activeLabel$cur2,_this$frameList$curre2,_this$frameList$curre3,labelIsAboveContainerTop=(null===(_this$activeLabel$cur=this.activeLabel.current)||void 0===_this$activeLabel$cur?void 0:_this$activeLabel$cur.offsetTop)<=(null===(_this$frameList$curre=this.frameList.current)||void 0===_this$frameList$curre?void 0:_this$frameList$curre.scrollTop),labelIsBelowContainerBottom=(null===(_this$activeLabel$cur2=this.activeLabel.current)||void 0===_this$activeLabel$cur2?void 0:_this$activeLabel$cur2.offsetTop)>=(null===(_this$frameList$curre2=this.frameList.current)||void 0===_this$frameList$curre2?void 0:_this$frameList$curre2.scrollTop)+(null===(_this$frameList$curre3=this.frameList.current)||void 0===_this$frameList$curre3?void 0:_this$frameList$curre3.clientHeight);if(labelIsAboveContainerTop||labelIsBelowContainerBottom){var newContainerTopPosition=this.activeLabel.current.offsetTop-this.activeLabel.current.offsetHeight;this.frameList.current.scrollTop=newContainerTopPosition}}handleFrameChange(frameIndex){var{onFrameChange}=this.props;onFrameChange(frameIndex)}handlePrevious(){var{frame}=this.props;frame>0&&this.handleFrameChange(frame-1)}handleNext(){var{frame,locations}=this.props;frame<locations.length&&this.handleFrameChange(frame+1)}render(){var{frame,locations,t}=this.props,locationElements=locations.map((location,index)=>{var{mimeType,url}=location,activeFrame=frame===index;return(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsxs)(FrameCarousel_StyledLabel,{ref:activeFrame?this.activeLabel:null,children:[(0,jsx_runtime.jsx)("input",{checked:activeFrame,name:"frame",onChange:()=>this.handleFrameChange(index),type:"radio"}),(0,jsx_runtime.jsx)(StyledMedia,{alt:t("SubjectViewer.MultiFrameViewer.FrameCarousel.thumbnailAltText"),background:"accent-1",fit:"cover",height:40,placeholder:(0,jsx_runtime.jsx)(More.K,{color:"neutral-6",size:"medium"}),src:url,width:40})]})},"".concat(url,"-").concat(index))});return(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-3",light:"neutral-6"},direction:"column",height:{max:"450px"},width:"4em",children:[(0,jsx_runtime.jsx)(FrameCarousel_StyledControlButton,{disabled:0===frame,fill:"horizontal",label:(0,jsx_runtime.jsx)(PreviousLabel,{}),onClick:()=>this.handlePrevious()}),(0,jsx_runtime.jsx)(StyledFrameList,{ref:this.frameList,children:locationElements}),(0,jsx_runtime.jsx)(FrameCarousel_StyledControlButton,{align:"center",disabled:frame===locations.length-1,fill:"horizontal",label:(0,jsx_runtime.jsx)(NextLabel,{}),onClick:()=>this.handleNext()})]})}constructor(props){super(props),this.theme=props.theme||{global:{colors:{}}},this.handleScroll=this.handleScroll.bind(this),this.handlePrevious=this.handlePrevious.bind(this),this.handleNext=this.handleNext.bind(this),this.activeLabel=(0,react.createRef)(),this.frameList=(0,react.createRef)()}}FrameCarousel.propTypes={frame:prop_types_default().number.isRequired,locations:prop_types_default().arrayOf(locationValidator_locationValidator).isRequired,onFrameChange:prop_types_default().func.isRequired,theme:prop_types_default().object};var ThemedFrameCarousel=(0,styled_components_browser_esm.withTheme)(FrameCarousel);const MultiFrameViewer_FrameCarousel=withTranslation("components")(ThemedFrameCarousel);FrameCarousel.__docgenInfo={description:"",methods:[{name:"handleScroll",docblock:null,modifiers:[],params:[],returns:null},{name:"handleFrameChange",docblock:null,modifiers:[],params:[{name:"frameIndex",optional:!1,type:null}],returns:null},{name:"handlePrevious",docblock:null,modifiers:[],params:[],returns:null},{name:"handleNext",docblock:null,modifiers:[],params:[],returns:null}],displayName:"FrameCarousel",props:{frame:{description:"",type:{name:"number"},required:!0},locations:{description:"",type:{name:"arrayOf",value:{name:"custom",raw:"locationValidator"}},required:!0},onFrameChange:{description:"",type:{name:"func"},required:!0},theme:{description:"",type:{name:"object"},required:!1}}};var MultiFrameViewerContainer_DEFAULT_HANDLER=()=>!0,DEFAULT_TOOL={validate:()=>{}};function MultiFrameViewerContainer(_ref){var{activeTool=DEFAULT_TOOL,enableInteractionLayer=!1,frame=0,loadingState=async_states_default().initialized,onError=MultiFrameViewerContainer_DEFAULT_HANDLER,onReady=MultiFrameViewerContainer_DEFAULT_HANDLER,resetView=MultiFrameViewerContainer_DEFAULT_HANDLER,setFrame=MultiFrameViewerContainer_DEFAULT_HANDLER,subject}=_ref;return(0,react.useEffect)(function onFrameChange(){null==activeTool||activeTool.validate(),resetView()},[frame]),loadingState===async_states_default().error?(0,jsx_runtime.jsx)("div",{children:"Something went wrong."}):loadingState!==async_states_default().initialized?(0,jsx_runtime.jsxs)(Box.a,{direction:"row",fill:"horizontal",children:[(0,jsx_runtime.jsx)(MultiFrameViewer_FrameCarousel,{frame,onFrameChange:setFrame,locations:subject.locations}),(0,jsx_runtime.jsx)(SingleImageViewer_SingleImageViewerContainer,{enableInteractionLayer,loadingState,onError,onReady})]}):null}MultiFrameViewerContainer.propTypes={activeTool:prop_types_default().shape({validate:prop_types_default().func}),enableInteractionLayer:prop_types_default().bool,frame:prop_types_default().number,loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,resetView:prop_types_default().func,setFrame:prop_types_default().func,subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator_locationValidator)}).isRequired};const MultiFrameViewer_MultiFrameViewerContainer=withStores(MultiFrameViewerContainer,function MultiFrameViewerContainer_storeMapper(store){var{frame,resetView,setFrame}=store.subjectViewer,{activeStepTasks}=store.workflowSteps,[activeInteractionTask]=activeStepTasks.filter(task=>"drawing"===task.type||"transcription"===task.type),{activeTool}=activeInteractionTask||{};return{activeTool,frame,resetView,setFrame}});var react_player_lib=__webpack_require__("../../node_modules/react-player/lib/index.js"),SubjectContainer=styled_components_browser_esm.default.div.withConfig({displayName:"VideoViewer__SubjectContainer",componentId:"sc-1aqsme0-0"})(["position:relative;video{filter:invert(",");","}"],props=>props.$invert?1:0,props=>props.$limitSubjectHeight&&(0,styled_components_browser_esm.css)(["display:flex;width:auto;max-height:90vh;max-width:100%;margin-left:auto;"]));function VideoViewer(_ref){var{invert=!1,limitSubjectHeight=!1,onError=()=>!0,onReady=()=>!0,subject}=_ref,{t}=useTranslation("components"),playerRef=(0,react.useRef)(null),videoLocation=subject?subject.locations.find(l=>"video"===l.type):null,onReactPlayerReady=()=>{try{var _playerRef$current,_playerRef$current2,_playerRef$current3,_playerRef$current4,reactPlayerVideoHeight=null===(_playerRef$current=playerRef.current)||void 0===_playerRef$current?void 0:_playerRef$current.getInternalPlayer().videoHeight,reactPlayerVideoWidth=null===(_playerRef$current2=playerRef.current)||void 0===_playerRef$current2?void 0:_playerRef$current2.getInternalPlayer().videoWidth,reactPlayerClientHeight=null===(_playerRef$current3=playerRef.current)||void 0===_playerRef$current3?void 0:_playerRef$current3.getInternalPlayer().getBoundingClientRect().height,reactPlayerClientWidth=null===(_playerRef$current4=playerRef.current)||void 0===_playerRef$current4?void 0:_playerRef$current4.getInternalPlayer().getBoundingClientRect().width;onReady({target:{clientHeight:reactPlayerClientHeight,clientWidth:reactPlayerClientWidth,naturalHeight:reactPlayerVideoHeight,naturalWidth:reactPlayerVideoWidth}})}catch(error){onError(error)}},handlePlayerError=error=>{onError(error)},memoizedViewer=(0,react.useMemo)(()=>(0,jsx_runtime.jsx)(react_player_lib.A,{controls:!0,height:"100%",onError:handlePlayerError,onReady:onReactPlayerReady,ref:playerRef,width:"100%",url:null==videoLocation?void 0:videoLocation.url,config:{file:{attributes:{controlsList:["nodownload"],style:{display:"block",height:"100%",width:limitSubjectHeight?"auto":"100%"}}}}}),[videoLocation]);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:videoLocation?(0,jsx_runtime.jsx)(SubjectContainer,{$invert:invert,$limitSubjectHeight:limitSubjectHeight,children:memoizedViewer}):(0,jsx_runtime.jsx)(Box.a,{children:t("SubjectViewer.SingleVideoViewerContainer.error")})})}VideoViewer.propTypes={invert:prop_types.bool,limitSubjectHeight:prop_types.bool,onError:prop_types.func,onReady:prop_types.func,subject:(0,prop_types.shape)({locations:(0,prop_types.arrayOf)(locationValidator_locationValidator)})};const VideoViewer_VideoViewer=VideoViewer;var RangeInput=__webpack_require__("../../node_modules/grommet/es6/components/RangeInput/RangeInput.js"),VolumeMute=__webpack_require__("../../node_modules/grommet-icons/es6/icons/VolumeMute.js"),VolumeLow=__webpack_require__("../../node_modules/grommet-icons/es6/icons/VolumeLow.js"),Volume=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Volume.js"),Expand=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Expand.js");const VideoController_theme={global:{input:{display:"block",padding:{horizontal:"0",vertical:"0"}},spacing:"10px"},select:{icons:{margin:"0"}},rangeInput:{track:{height:"3px",lower:{color:{light:"black",dark:"light-1"}},upper:{color:{light:"dark-5",dark:"dark-6"}}},thumb:{color:"neutral-1"}}};var color={light:"dark-5",dark:"white"},VideoController_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"VideoController__StyledButton",componentId:"sc-gqcv9c-0"})(["height:40px;width:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;&:hover:not(:disabled),&:focus:not(:disabled){"," > svg{stroke:white;}}"],props=>props.theme.dark?(0,styled_components_browser_esm.css)(["background-color:",";"],props.theme.global.colors["neutral-1"]):(0,styled_components_browser_esm.css)(["background-color:",";"],props.theme.global.colors["accent-1"])),VideoController_SpeedSelect=(0,styled_components_browser_esm.default)(Select.l).withConfig({displayName:"VideoController__SpeedSelect",componentId:"sc-gqcv9c-1"})(["display:flex;align-content:center;width:2rem;text-align:right;"]),VolumeContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"VideoController__VolumeContainer",componentId:"sc-gqcv9c-2"})(["position:relative;"]),VolumeRange=(0,styled_components_browser_esm.default)(RangeInput.s).withConfig({displayName:"VideoController__VolumeRange",componentId:"sc-gqcv9c-3"})(["display:block;width:100px;height:24px;padding:0 8px;background:",";position:absolute;left:-30px;bottom:80px;transform:rotate(-90deg);"],props=>props.theme.dark?props.theme.global.colors["dark-1"]:props.theme.global.colors["light-1"]),VideoController_DEFAULT_HANDLER=()=>{},VideoController=_ref=>{var{duration=0,enableDrawing=!1,isPlaying=!1,handleFullscreen=VideoController_DEFAULT_HANDLER,handleSeekChange=VideoController_DEFAULT_HANDLER,handleSeekMouseDown=VideoController_DEFAULT_HANDLER,handleSeekMouseUp=VideoController_DEFAULT_HANDLER,onPlayPause=VideoController_DEFAULT_HANDLER,onSpeedChange=VideoController_DEFAULT_HANDLER,playbackSpeed="1x",played=0,playerRef,setVolume=VideoController_DEFAULT_HANDLER,volume=1,volumeDisabled=!1}=_ref,size=(0,react.useContext)(ResponsiveContext.u),{t}=useTranslation("components"),[volumeOpen,setVolumeOpen]=(0,react.useState)(!1),playPauseLabel=isPlaying?"SubjectViewer.VideoController.pause":"SubjectViewer.VideoController.play",volumeButtonLabel=volumeOpen?"SubjectViewer.VideoController.closeVolume":"SubjectViewer.VideoController.openVolume",secondsPlayed=played*duration,displayedDuration=(0,react.useMemo)(()=>formatTimeStamp_formatTimeStamp(duration),[duration]),handleVolumeKeys=e=>{"ArrowUp"===e.key&&volume<1?(e.preventDefault(),e.stopPropagation(),setVolume(volume+.25)):"ArrowDown"===e.key&&volume>0&&(e.preventDefault(),e.stopPropagation(),setVolume(volume-.25))};return(0,jsx_runtime.jsx)(Box.a,{background:{light:"white",dark:"dark-3"},pad:{horizontal:"small"===size?"0":"small"},border:[{color:{dark:"dark-1",light:"light-3"},side:"all"},{color:{dark:"transparent",light:"transparent"},side:"top"}],children:(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:VideoController_theme,children:(0,jsx_runtime.jsxs)(Grid_Grid.x,{columns:["min-content","flex","min-content"],rows:["1fr"],"data-testid":"video subject viewer custom controls",children:[(0,jsx_runtime.jsxs)(Box.a,{direction:"row",children:[(0,jsx_runtime.jsx)(VideoController_StyledButton,{a11yTitle:t(playPauseLabel),onClick:onPlayPause,icon:isPlaying?(0,jsx_runtime.jsx)(Pause.v,{size:"1rem",color}):(0,jsx_runtime.jsx)(CirclePlay.H,{size:"1rem",color}),plain:!0}),(0,jsx_runtime.jsx)(VideoController_SpeedSelect,{a11yTitle:t("SubjectViewer.VideoController.playbackSpeed"),options:["0.25x","0.5x","1x"],value:playbackSpeed,onChange:_ref2=>{var{option}=_ref2;return onSpeedChange(option)},plain:!0,icon:(0,jsx_runtime.jsx)(FormDown.t,{size:"0.75rem",color}),focusIndicator:!0,size:"0.75rem",color}),(0,jsx_runtime.jsx)(Box.a,{direction:"row",align:"center",width:{min:"3.7rem",max:"3.7rem"},margin:{horizontal:"small"===size?"10px":"20px"},children:(0,jsx_runtime.jsxs)(Text.E,{size:"0.75rem",color,children:[(0,jsx_runtime.jsx)("time",{dateTime:"P".concat(Math.round(secondsPlayed),"S"),children:formatTimeStamp_formatTimeStamp(secondsPlayed)})," / ",(0,jsx_runtime.jsx)("time",{dateTime:"P".concat(Math.round(duration),"S"),children:displayedDuration})]})})]}),(0,jsx_runtime.jsx)(Box.a,{direction:"row",align:"center",margin:{right:"10px"},children:(0,jsx_runtime.jsx)(RangeInput.s,{a11yTitle:t("SubjectViewer.VideoController.scrubber"),min:0,max:.999999,step:.01,value:played,onChange:handleSeekChange,onKeyDown:e=>{if("Space"===e.code||"Enter"===e.code)e.preventDefault(),e.stopPropagation(),onPlayPause();else if("ArrowLeft"===e.code){var _playerRef$current,_playerRef$current2;if(e.preventDefault(),e.stopPropagation(),0===played)return;0<played&&played<=.05?null==playerRef||null===(_playerRef$current=playerRef.current)||void 0===_playerRef$current||_playerRef$current.seekTo(0):null==playerRef||null===(_playerRef$current2=playerRef.current)||void 0===_playerRef$current2||_playerRef$current2.seekTo(played-.05)}else if("ArrowRight"===e.code){var _playerRef$current3,_playerRef$current4;if(e.preventDefault(),e.stopPropagation(),1===played)return;1>played&&played>=.95?null==playerRef||null===(_playerRef$current3=playerRef.current)||void 0===_playerRef$current3||_playerRef$current3.seekTo(duration):null==playerRef||null===(_playerRef$current4=playerRef.current)||void 0===_playerRef$current4||_playerRef$current4.seekTo(played+.05)}},onMouseDown:handleSeekMouseDown,onMouseUp:handleSeekMouseUp})}),(0,jsx_runtime.jsxs)(Box.a,{align:"center",direction:"row",fill:!0,children:[(0,jsx_runtime.jsxs)(VolumeContainer,{children:[(0,jsx_runtime.jsx)(VideoController_StyledButton,{a11yTitle:t(volumeButtonLabel),disabled:volumeDisabled,icon:volume<=0||volumeDisabled?(0,jsx_runtime.jsx)(VolumeMute.W,{size:"1rem",color}):volume<=.5?(0,jsx_runtime.jsx)(VolumeLow.Z,{size:"1rem",color}):(0,jsx_runtime.jsx)(Volume.f,{size:"1rem",color}),onClick:()=>setVolumeOpen(!volumeOpen),onKeyDown:handleVolumeKeys,plain:!0}),volumeOpen&&(0,jsx_runtime.jsx)(VolumeRange,{a11yTitle:t("SubjectViewer.VideoController.volumeSlider"),disabled:volumeDisabled,min:0,max:1,step:.25,onChange:e=>{setVolume(parseFloat(e.target.value))},onKeyDown:handleVolumeKeys,value:volume})]}),(0,jsx_runtime.jsx)(VideoController_StyledButton,{a11yTitle:t("SubjectViewer.VideoController.fullscreen"),icon:(0,jsx_runtime.jsx)(Expand.J,{size:"1rem",color}),plain:!0,onClick:handleFullscreen})]})]})})})};VideoController.propTypes={duration:prop_types.number,enableDrawing:prop_types.bool,isPlaying:prop_types.bool,handleFullscreen:prop_types.func,handleSeekChange:prop_types.func,handleSeekMouseDown:prop_types.func,handleSeekMouseUp:prop_types.func,onPlayPause:prop_types.func,onSpeedChange:prop_types.func,playbackSpeed:prop_types.string,played:prop_types.number,setVolume:prop_types.func,volume:prop_types.number,volumeDisabled:prop_types.bool};const VideoController_VideoController=VideoController;var VideoWithDrawing_SubjectContainer=styled_components_browser_esm.default.div.withConfig({displayName:"VideoWithDrawing__SubjectContainer",componentId:"sc-hgjq1t-0"})(["position:relative;video{filter:invert(",");","}"],props=>props.$invert?1:0,props=>props.$limitSubjectHeight&&(0,styled_components_browser_esm.css)(["display:flex;width:auto;max-height:90vh;max-width:100%;margin-left:auto;"])),DrawingLayer=styled_components_browser_esm.default.div.withConfig({displayName:"VideoWithDrawing__DrawingLayer",componentId:"sc-hgjq1t-1"})(["position:absolute;top:0px;width:100%;cursor:default;"]),VideoWithDrawing_DEFAULT_HANDLER=()=>!0;function VideoWithDrawing(_ref){var{invert=!1,limitSubjectHeight=!1,loadingState=async_states_default().initialized,onError=VideoWithDrawing_DEFAULT_HANDLER,onReady=VideoWithDrawing_DEFAULT_HANDLER,onKeyDown=VideoWithDrawing_DEFAULT_HANDLER,setVideoSpeed=VideoWithDrawing_DEFAULT_HANDLER,setVolume=VideoWithDrawing_DEFAULT_HANDLER,subject,videoSpeed="1x",volume=1}=_ref,[duration,setDuration]=(0,react.useState)(0),[fullscreenError,setFullscreenError]=(0,react.useState)(!1),[isPlaying,setIsPlaying]=(0,react.useState)(!1),[isSeeking,setIsSeeking]=(0,react.useState)(!1),[played,setPlayed]=(0,react.useState)(0),[volumeDisabled,setVolumeDisabled]=(0,react.useState)(!0),[clientWidth,setClientWidth]=(0,react.useState)(0),[videoHeight,setVideoHeight]=(0,react.useState)(0),[videoWidth,setVideoWidth]=(0,react.useState)(0),playerRef=(0,react.useRef)(),interactionLayerSVG=(0,react.useRef)(),transformLayer=(0,react.useRef)(),{t}=useTranslation("components"),videoLocation=subject?subject.locations.find(l=>"video"===l.type):null,enableDrawing=loadingState===async_states_default().success,sanitizedSpeed=Number(videoSpeed.slice(0,-1)),canvas=null==transformLayer?void 0:transformLayer.current,interactionLayerScale=clientWidth/videoWidth,svgStyle={touchAction:"pinch-zoom"};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[videoLocation?(0,jsx_runtime.jsxs)(VideoWithDrawing_SubjectContainer,{$invert:invert,$limitSubjectHeight:limitSubjectHeight,children:[(0,jsx_runtime.jsx)(react_player_lib.A,{controls:!1,height:"100%",onDuration:duration=>{setDuration(duration)},onEnded:()=>{setIsPlaying(!1)},onError:error=>{onError(error)},onReady:()=>{try{var _playerRef$current,_playerRef$current2,_playerRef$current3,_playerRef$current4,reactPlayerVideoHeight=null===(_playerRef$current=playerRef.current)||void 0===_playerRef$current?void 0:_playerRef$current.getInternalPlayer().videoHeight,reactPlayerVideoWidth=null===(_playerRef$current2=playerRef.current)||void 0===_playerRef$current2?void 0:_playerRef$current2.getInternalPlayer().videoWidth,reactPlayerClientHeight=null===(_playerRef$current3=playerRef.current)||void 0===_playerRef$current3?void 0:_playerRef$current3.getInternalPlayer().getBoundingClientRect().height,reactPlayerClientWidth=null===(_playerRef$current4=playerRef.current)||void 0===_playerRef$current4?void 0:_playerRef$current4.getInternalPlayer().getBoundingClientRect().width;onReady({target:{clientHeight:reactPlayerClientHeight,clientWidth:reactPlayerClientWidth,naturalHeight:reactPlayerVideoHeight,naturalWidth:reactPlayerVideoWidth}}),(void 0!==(internalVideo=playerRef.current.getInternalPlayer()).webkitAudioDecodedByteCount&&internalVideo.webkitAudioDecodedByteCount>0||internalVideo.audioTracks&&internalVideo.audioTracks.length||void 0!==internalVideo.mozHasAudio)&&setVolumeDisabled(!1),setVideoHeight(reactPlayerVideoHeight),setVideoWidth(reactPlayerVideoWidth),setClientWidth(reactPlayerClientWidth)}catch(error){onError(error)}var internalVideo},onProgress:reactPlayerState=>{var{played}=reactPlayerState;isSeeking||setPlayed(played)},playing:isPlaying,playbackRate:sanitizedSpeed,playsinline:!0,progressInterval:10,ref:playerRef,width:"100%",volume,url:null==videoLocation?void 0:videoLocation.url,config:{file:{attributes:{style:{display:"block",height:"100%",width:limitSubjectHeight?"auto":"100%"}}}}}),enableDrawing&&(0,jsx_runtime.jsx)(DrawingLayer,{children:(0,jsx_runtime.jsx)(Box.a,{overflow:"hidden",children:(0,jsx_runtime.jsx)(shared_SVGContext.Provider,{value:{canvas},children:(0,jsx_runtime.jsx)("svg",{ref:interactionLayerSVG,focusable:!0,onKeyDown,style:svgStyle,tabIndex:0,viewBox:"0 0 ".concat(videoWidth," ").concat(videoHeight),xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("g",{ref:transformLayer,transform:"",children:(0,jsx_runtime.jsx)(InteractionLayer_InteractionLayerContainer,{scale:interactionLayerScale,duration,height:videoHeight,played,width:videoWidth})})})})})})]}):(0,jsx_runtime.jsx)(Box.a,{children:t("SubjectViewer.SingleVideoViewerContainer.error")}),(0,jsx_runtime.jsx)(VideoController_VideoController,{duration,enableDrawing,isPlaying,handleFullscreen:()=>{try{var _playerRef$current6;null===(_playerRef$current6=playerRef.current)||void 0===_playerRef$current6||_playerRef$current6.getInternalPlayer().requestFullscreen()}catch(error){setFullscreenError(!0)}},handleSeekChange:e=>{var _playerRef$current5;setPlayed(parseFloat(e.target.value)),null==playerRef||null===(_playerRef$current5=playerRef.current)||void 0===_playerRef$current5||_playerRef$current5.seekTo(parseFloat(e.target.value))},handleSeekMouseDown:e=>{setIsSeeking(!0)},handleSeekMouseUp:e=>{setIsSeeking(!1)},onPlayPause:()=>{setIsPlaying(!isPlaying)},onSpeedChange:speed=>{setVideoSpeed(speed)},played,playbackSpeed:videoSpeed,playerRef,setVolume,volume,volumeDisabled}),fullscreenError&&(0,jsx_runtime.jsx)(Text.E,{children:"Fullscreen not supported in some mobile browsers"})]})}VideoWithDrawing.propTypes={invert:prop_types.bool,limitSubjectHeight:prop_types.bool,loadingState:prop_types.string,onError:prop_types.func,onKeyDown:prop_types.func,onReady:prop_types.func,setVideoSpeed:prop_types.func,setVolume:prop_types.func,subject:(0,prop_types.shape)({locations:(0,prop_types.arrayOf)(locationValidator_locationValidator)}),videoSpeed:prop_types.string,volume:prop_types.number};const VideoWithDrawing_VideoWithDrawing=VideoWithDrawing;function SingleVideoViewerContainer_storeMapper(store){var drawingTasks=store.workflowSteps.findTasksByType("drawing"),{subjectViewer:{invert,setVideoSpeed,setVolume,videoSpeed,volume},workflows:{active:{configuration:{limit_subject_height:limitSubjectHeight}}}}=store;return{enableInteractionLayer:!(null==drawingTasks||!drawingTasks.length),invert,limitSubjectHeight,setVideoSpeed,setVolume,videoSpeed,volume}}var SingleVideoViewerContainer_DEFAULT_HANDLER=()=>{};function SingleVideoViewerContainer(_ref){var{loadingState=async_states_default().initialized,onError=SingleVideoViewerContainer_DEFAULT_HANDLER,onReady=SingleVideoViewerContainer_DEFAULT_HANDLER,onKeyDown=SingleVideoViewerContainer_DEFAULT_HANDLER,subject}=_ref,{enableInteractionLayer,invert,limitSubjectHeight,setVideoSpeed,setVolume,videoSpeed,volume}=useStores(SingleVideoViewerContainer_storeMapper);return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:enableInteractionLayer?(0,jsx_runtime.jsx)(VideoWithDrawing_VideoWithDrawing,{invert,limitSubjectHeight,loadingState,onError,onReady,onKeyDown,setVideoSpeed,setVolume,subject,volume,videoSpeed}):(0,jsx_runtime.jsx)(VideoViewer_VideoViewer,{invert,limitSubjectHeight,onError,onReady,subject})})}SingleVideoViewerContainer.propTypes={loadingState:prop_types.string,onError:prop_types.func,onKeyDown:prop_types.func,onReady:prop_types.func,subject:(0,prop_types.shape)({locations:(0,prop_types.arrayOf)(locationValidator_locationValidator)})};const SingleVideoViewer_SingleVideoViewerContainer=(0,mobxreact_esm.PA)(SingleVideoViewerContainer);var SubjectGroupSubTaskPopup_console=__webpack_require__("../../node_modules/console-browserify/index.js"),SubjectGroupSubTaskPopup_DEFAULT_HANDLER=()=>!0;function SubjectGroupSubTaskPopup(_ref){var{cellIndex,cellBounds,annotation,currentTask,onClose=SubjectGroupSubTaskPopup_DEFAULT_HANDLER,onSave=SubjectGroupSubTaskPopup_DEFAULT_HANDLER,onCancelSelection=SubjectGroupSubTaskPopup_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components"),[dimensions,measuredContentRef]=useClientRect(),[position,setPosition]=(0,react.useState)(null),[confirmationState,setConfirm]=(0,react.useState)("pending"),[viewportSize,setViewportSize]=(0,react.useState)({width:window.innerWidth,height:window.innerHeight});(0,react.useEffect)(()=>{var handleResize=()=>{setViewportSize({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",handleResize),()=>window.removeEventListener("resize",handleResize)},[]);var subtaskDefinitions=(null==currentTask?void 0:currentTask.subtasks)||[],currentCell=null==annotation?void 0:annotation.getCellByIndex(cellIndex);if(!subtaskDefinitions||0===subtaskDefinitions.length||!currentCell)return null;function normalizeAnswerLabel(answer){return"string"==typeof answer?answer:(null==answer?void 0:answer.label)||(null==answer?void 0:answer.value)||String(answer)}var subtasks=subtaskDefinitions.map((subtaskDef,index)=>{try{var{TaskModel}=tasks_namespaceObject[subtaskDef.type]||{};if(TaskModel){var taskSnapshot={taskKey:"".concat(currentTask.taskKey,".cell.").concat(cellIndex,".subtask.").concat(index),type:subtaskDef.type,required:subtaskDef.required||!1,strings:{question:subtaskDef.question||subtaskDef.instruction||"Select an option",instruction:subtaskDef.instruction||subtaskDef.question||"",help:subtaskDef.help||""}};return subtaskDef.answers&&Array.isArray(subtaskDef.answers)&&(taskSnapshot.answers=subtaskDef.answers.map(answer=>({label:normalizeAnswerLabel(answer)})).filter(answer=>answer.label),subtaskDef.answers.forEach((answer,answerIndex)=>{taskSnapshot.strings["answers.".concat(answerIndex,".label")]=normalizeAnswerLabel(answer)})),TaskModel.create(taskSnapshot)}}catch(error){SubjectGroupSubTaskPopup_console.warn("Could not create Task for subtask type ".concat(subtaskDef.type,":"),error)}return null}).filter(Boolean);function getAnnotationForTask(task){return currentCell.annotation(task)}function isTaskComplete(task){var annotation=getAnnotationForTask(task);return!!annotation&&annotation.isComplete}function handleClose(event){null==event||event.preventDefault(),null==event||event.stopPropagation(),!function areAllRequiredTasksComplete(){return subtasks.every(subtask=>!("true"===subtask.required||!0===subtask.required)||isTaskComplete(subtask))}()?setConfirm("confirming"):(onSave({}),onClose())}var minHeight=(null==dimensions?void 0:dimensions.height)||200,minWidth=(null==dimensions?void 0:dimensions.width)||350,disabled="confirming"===confirmationState;(0,react.useEffect)(()=>{var x=cellBounds.x+cellBounds.width+10,y=cellBounds.y,maxX=viewportSize.width-minWidth-10,maxY=viewportSize.height-minHeight-10;setPosition({x:Math.max(10,Math.min(x,maxX)),y:Math.max(10,Math.min(y,maxY))})},[cellBounds,minWidth,minHeight,viewportSize]);var rndProps={cancel:".element-that-ignores-drag-actions",minHeight,minWidth,onDragStop:function onDragStop(_,data){var{x,y}=data;setPosition({x,y})},onResize:function onResize(_,__,___,____,newPosition){setPosition(newPosition)},position};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(MovableModal_MovableModal,{ref:measuredContentRef,active:!0,closeFn:handleClose,headingBackground:"transparent",onWheel:function onWheel(event){event.stopPropagation()},pad:{bottom:"medium",left:"medium",right:"medium"},plain:!0,position:"top-left",rndProps,title:"Cell ".concat(cellIndex+1," Details"),titleColor:"",children:(0,jsx_runtime.jsx)(Box.a,{className:"element-that-ignores-drag-actions",gap:"small",children:(0,jsx_runtime.jsxs)("form",{onSubmit:handleClose,children:[subtasks.map((subtask,index)=>{var annotation=getAnnotationForTask(subtask);annotation||(annotation=function createAnnotationForTask(task){return currentCell.addAnnotation(task)}(subtask));var taskType=subtask.type;"dropdown-simple"===taskType&&(taskType="dropdownSimple");var{TaskComponent}=tasks_namespaceObject[taskType]||{};if(annotation&&TaskComponent){var requiredEmphasis=("true"===subtask.required||!0===subtask.required)&&!isTaskComplete(subtask)&&"closed"===confirmationState;return(0,jsx_runtime.jsxs)(Box.a,{border:!!requiredEmphasis&&{size:"small",color:"tomato"},overflow:"auto",pad:{horizontal:"2px"},children:[(0,jsx_runtime.jsx)(TaskComponent,{annotation,autoFocus:0===index,disabled,task:subtask}),requiredEmphasis&&(0,jsx_runtime.jsx)(Paragraph.f,{children:(0,jsx_runtime.jsx)("strong",{children:t("SubjectViewer.InteractionLayer.SubTaskPopup.required")})})]},annotation.id)}return(0,jsx_runtime.jsx)(Box.a,{pad:"none",children:(0,jsx_runtime.jsx)(Paragraph.f,{children:t("SubjectViewer.InteractionLayer.SubTaskPopup.notRender")})},"".concat(index,"-").concat(null==subtask?void 0:subtask.type))}),(0,jsx_runtime.jsx)(SaveButton_SaveButton,{disabled,onClick:handleClose}),(0,jsx_runtime.jsx)(PrimaryButton.A,{label:"Unselect",onClick:function handleCancelSelection(){subtasks.forEach(subtask=>{var annotation=getAnnotationForTask(subtask);annotation&&currentCell.removeAnnotation(annotation)}),onCancelSelection(),onClose()},disabled,color:"teal",margin:{top:"small"}})]})})}),"confirming"===confirmationState&&(0,jsx_runtime.jsx)(components_ConfirmModal_ConfirmModal,{onClose:function onCloseConfirm(){setConfirm("closed")},onDelete:function deleteCellData(){setConfirm("closed"),subtasks.forEach(subtask=>{var annotation=getAnnotationForTask(subtask);annotation&&currentCell.removeAnnotation(annotation)}),onSave({}),onClose()}})]})}SubjectGroupSubTaskPopup.propTypes={cellIndex:prop_types.number.isRequired,cellBounds:(0,prop_types.shape)({x:prop_types.number,y:prop_types.number,width:prop_types.number,height:prop_types.number}).isRequired,annotation:(0,prop_types.shape)({getCellByIndex:prop_types.func}),currentTask:(0,prop_types.shape)({subtasks:prop_types.array}),onClose:prop_types.func.isRequired,onSave:prop_types.func.isRequired,onCancelSelection:prop_types.func};const components_SubjectGroupSubTaskPopup=SubjectGroupSubTaskPopup;var SGVGridCell_DEFAULT_HANDLER=()=>!1,SGVGridCell_DraggableImage=draggable_draggable((0,styled_components_browser_esm.default)("image").withConfig({shouldForwardProp:prop=>"dragging"!==prop}).withConfig({displayName:"SGVGridCell__DraggableImage",componentId:"sc-1unwdfp-0"})(["cursor:grab;"])),DraggableRect=draggable_draggable((0,styled_components_browser_esm.default)("rect").withConfig({shouldForwardProp:prop=>"dragging"!==prop}).withConfig({displayName:"SGVGridCell__DraggableRect",componentId:"sc-1unwdfp-1"})(["cursor:grab;"])),ClickableRect=(0,styled_components_browser_esm.default)("rect").withConfig({shouldForwardProp:prop=>"cellStyle"!==prop}).withConfig({displayName:"SGVGridCell__ClickableRect",componentId:"sc-1unwdfp-2"})(["cursor:pointer;&:focus{","}}"],props=>(0,styled_components_browser_esm.css)(["outline:",";"],props.cellStyle.focusOutline));function SGVGridCell(props){var{image,index=0,subjectId="",dragMove=SGVGridCell_DEFAULT_HANDLER,cellWidth=200,cellHeight=200,cellStyle={},gridRows=1,gridColumns=1,panX=0,panY=0,zoom=1,annotation,annotationMode=!0,cellAnnotated=!1,currentTask}=props,[checked,setChecked]=(0,react.useState)(cellAnnotated),[showSubTaskPopup,setShowSubTaskPopup]=(0,react.useState)(!1),row=Math.floor(index/gridColumns),col=index%gridColumns,cellXOffset=col*cellWidth,cellYOffset=row*cellHeight;if(!image||!image.src||!image.naturalHeight||!image.naturalWidth||row<0||row>=gridRows||col<0||col>=gridColumns||!cellWidth||!cellHeight||!gridColumns||!gridRows)return null;var fitRatio=Math.max(image.naturalWidth/cellWidth,image.naturalHeight/cellHeight),imageHeight=image.naturalHeight/fitRatio,imageWidth=image.naturalWidth/fitRatio,imageX=(cellWidth-imageWidth)/2,imageY=(cellHeight-imageHeight)/2,clipPathID="subjectGroupViewer-clipPath-".concat(index);function toggleCellAnnotation(){var _currentTask$hasSubta;if(annotationMode&&annotation&&currentTask){var hasSubtasks=null==currentTask||null===(_currentTask$hasSubta=currentTask.hasSubtasks)||void 0===_currentTask$hasSubta?void 0:_currentTask$hasSubta.call(currentTask);annotation.getCellByIndex(index)?hasSubtasks?setShowSubTaskPopup(!0):(annotation.removeCell(index),setChecked(!1),setShowSubTaskPopup(!1)):(setChecked(!0),annotation.addCell(index,subjectId),hasSubtasks&&setShowSubTaskPopup(!0))}}var addOriginOffset="translate(".concat(imageWidth/2,", ").concat(imageHeight/2,")"),removeOriginOffset="translate(".concat(-imageWidth/2,", ").concat(-imageHeight/2,")"),imageTransform="".concat(addOriginOffset," scale(").concat(zoom,") ").concat(removeOriginOffset," translate(").concat(panX,", ").concat(panY,")"),cellBounds={x:cellXOffset,y:cellYOffset,width:cellWidth,height:cellHeight};return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("g",{transform:"translate(".concat(cellXOffset,", ").concat(cellYOffset,")"),children:[(0,jsx_runtime.jsx)("clipPath",{id:clipPathID,children:(0,jsx_runtime.jsx)("rect",{width:cellWidth,height:cellHeight})}),(0,jsx_runtime.jsx)(DraggableRect,{fill:cellStyle.background,width:cellWidth,height:cellHeight,dragMove}),(0,jsx_runtime.jsxs)("g",{clipPath:"url(#".concat(clipPathID,")"),children:[(0,jsx_runtime.jsx)(SGVGridCell_DraggableImage,{dragMove,height:imageHeight,width:imageWidth,href:image.src,x:imageX,y:imageY,transform:imageTransform}),(0,jsx_runtime.jsx)(DraggableRect,{fill:checked?cellStyle.overlay:"none",stroke:checked?cellStyle.selectedStroke:cellStyle.stroke,strokeWidth:checked?cellStyle.selectedStrokeWidth:cellStyle.strokeWidth,width:cellWidth,height:cellHeight}),annotationMode&&(0,jsx_runtime.jsx)(ClickableRect,{tabIndex:0,role:"checkbox","aria-checked":checked,"aria-label":"Cell at row ".concat(row," column ").concat(col),fill:"transparent",cellStyle,x:2,y:2,width:cellWidth-4,height:cellHeight-4,onClick:e=>{toggleCellAnnotation(),e.preventDefault()},onKeyDown:e=>{"Enter"===e.key&&(toggleCellAnnotation(),e.preventDefault())}})]})]}),showSubTaskPopup&&checked&&(0,jsx_runtime.jsx)(components_SubjectGroupSubTaskPopup,{cellIndex:index,cellBounds,annotation,currentTask,onClose:function handleSubTaskClose(){setShowSubTaskPopup(!1)},onSave:function handleSubTaskSave(){setShowSubTaskPopup(!1)},onCancelSelection:function handleCancelSelection(){annotation.removeCell(index),setChecked(!1),setShowSubTaskPopup(!1)}})]})}SGVGridCell.propTypes={image:prop_types.object,index:prop_types.number,subjectId:prop_types.string,dragMove:prop_types.func,cellWidth:prop_types.number,cellHeight:prop_types.number,cellStyle:prop_types.object,gridRows:prop_types.number,gridColumns:prop_types.number,panX:prop_types.number,panY:prop_types.number,zoom:prop_types.number,annotation:(0,prop_types.shape)({getCellByIndex:prop_types.func,addCell:prop_types.func,removeCell:prop_types.func}),annotationMode:prop_types.bool,cellAnnotated:prop_types.bool,currentTask:(0,prop_types.shape)({hasSubtasks:prop_types.func})};const SGVGridCell_SGVGridCell=SGVGridCell;var DEFAULT_CELL_STYLE={},DEFAULT_IMAGES=[],SubjectGroupViewer_DEFAULT_HANDLER=()=>!1,DEFAULT_SUBJECT_IDS=[],Container=styled_components_browser_esm.default.div.withConfig({shouldForwardProp:prop=>!["gridMaxWidth","gridMaxHeight"].includes(prop)}).withConfig({displayName:"SubjectGroupViewer__Container",componentId:"sc-xdc4t-0"})(["overflow:hidden;height:100%;width:100%;"," "," animation:fadein 1s 0s forwards;@keyframes fadein{from{opacity:0;}to{opacity:100%;}}"],props=>props.gridMaxWidth?(0,styled_components_browser_esm.css)(["max-width:",";"],props.gridMaxWidth):"",props=>props.gridMaxHeight?(0,styled_components_browser_esm.css)(["max-height:",";"],props.gridMaxHeight):""),SubjectGroupViewer_SVG=styled_components_browser_esm.default.svg.withConfig({shouldForwardProp:prop=>!["gridMaxWidth","gridMaxHeight"].includes(prop)}).withConfig({displayName:"SubjectGroupViewer__SVG",componentId:"sc-xdc4t-1"})(["width:100%;height:100%;"," ",""],props=>props.gridMaxWidth?(0,styled_components_browser_esm.css)(["max-width:",";"],props.gridMaxWidth):"",props=>props.gridMaxHeight?(0,styled_components_browser_esm.css)(["max-height:",";"],props.gridMaxHeight):""),SubjectGroupViewer=(0,react.forwardRef)(function SubjectGroupViewer(_ref,ref){var{images=DEFAULT_IMAGES,subjectIds=DEFAULT_SUBJECT_IDS,dragMove=SubjectGroupViewer_DEFAULT_HANDLER,onKeyDown=SubjectGroupViewer_DEFAULT_HANDLER,cellWidth=200,cellHeight=200,cellStyle=DEFAULT_CELL_STYLE,gridRows=1,gridColumns=1,gridMaxWidth="",gridMaxHeight="",width,height,panX=0,panY=0,zoom=1,annotation,currentTask=null,interactionMode="move",isCurrentTaskValidForAnnotation=!1}=_ref,transformLayer=(0,react.useRef)(),canvas=transformLayer.current,annotatedValues=null!=annotation&&annotation.value?annotation.value.map(cell=>cell.index):[],annotationMode="annotate"===interactionMode&&isCurrentTaskValidForAnnotation;return(0,jsx_runtime.jsx)(shared_SVGContext.Provider,{value:{canvas},children:(0,jsx_runtime.jsx)(Container,{gridMaxWidth,gridMaxHeight,children:(0,jsx_runtime.jsx)(SubjectGroupViewer_SVG,{ref,focusable:!0,onKeyDown,tabIndex:0,viewBox:"0 0 ".concat(width," ").concat(height),gridMaxWidth,gridMaxHeight,xmlns:"http://www.w3.org/2000/svg",children:(0,jsx_runtime.jsx)("g",{ref:transformLayer,children:images.map((image,index)=>(0,jsx_runtime.jsx)(SGVGridCell_SGVGridCell,{image,index,subjectId:subjectIds[index],dragMove,cellWidth,cellHeight,cellStyle,gridRows,gridColumns,panX,panY,zoom,annotation,annotationMode,cellAnnotated:annotatedValues.includes(index),currentTask},"sgv-grid-cell-".concat(index)))})})})})});SubjectGroupViewer.propTypes={images:prop_types.array,subjectIds:(0,prop_types.arrayOf)(prop_types.string),dragMove:prop_types.func,onKeyDown:prop_types.func,cellWidth:prop_types.number,cellHeight:prop_types.number,cellStyle:prop_types.object,gridRows:prop_types.number,gridColumns:prop_types.number,gridMaxWidth:prop_types.string,gridMaxHeight:prop_types.string,width:prop_types.number.isRequired,height:prop_types.number.isRequired,panX:prop_types.number,panY:prop_types.number,zoom:prop_types.number,annotation:(0,prop_types.shape)({value:prop_types.array,getCellByIndex:prop_types.func,addCell:prop_types.func,removeCell:prop_types.func}),currentTask:prop_types.object,interactionMode:(0,prop_types.oneOf)(["annotate","move"]),isCurrentTaskValidForAnnotation:prop_types.bool};const SubjectGroupViewer_SubjectGroupViewer=SubjectGroupViewer;SubjectGroupViewer.__docgenInfo={description:"",methods:[],displayName:"SubjectGroupViewer",props:{images:{description:"",type:{name:"custom",raw:"array"},required:!1},subjectIds:{description:"",type:{name:"arrayOf",value:{name:"string"}},required:!1},dragMove:{description:"",type:{name:"custom",raw:"func"},required:!1},onKeyDown:{description:"",type:{name:"custom",raw:"func"},required:!1},cellWidth:{description:"",type:{name:"custom",raw:"number"},required:!1},cellHeight:{description:"",type:{name:"custom",raw:"number"},required:!1},cellStyle:{description:"",type:{name:"custom",raw:"object"},required:!1},gridRows:{description:"",type:{name:"custom",raw:"number"},required:!1},gridColumns:{description:"",type:{name:"custom",raw:"number"},required:!1},gridMaxWidth:{description:"",type:{name:"custom",raw:"string"},required:!1},gridMaxHeight:{description:"",type:{name:"custom",raw:"string"},required:!1},width:{description:"",type:{name:"number"},required:!0},height:{description:"",type:{name:"number"},required:!0},panX:{description:"",type:{name:"custom",raw:"number"},required:!1},panY:{description:"",type:{name:"custom",raw:"number"},required:!1},zoom:{description:"",type:{name:"custom",raw:"number"},required:!1},annotation:{description:"",type:{name:"shape",value:{value:{name:"array",required:!1},getCellByIndex:{name:"func",required:!1},addCell:{name:"func",required:!1},removeCell:{name:"func",required:!1}}},required:!1},currentTask:{description:"",type:{name:"custom",raw:"object"},required:!1},interactionMode:{description:"",type:{name:"enum",value:[{value:"'annotate'",computed:!1},{value:"'move'",computed:!1}]},required:!1},isCurrentTaskValidForAnnotation:{description:"",type:{name:"custom",raw:"bool"},required:!1}}};var SubjectGroupViewerContainer_console=__webpack_require__("../../node_modules/console-browserify/index.js");function SubjectGroupViewerContainer_asyncGeneratorStep(n,t,e,r,o,a,c){try{var i=n[a](c),u=i.value}catch(n){return void e(n)}i.done?t(u):Promise.resolve(u).then(r,o)}function SubjectGroupViewerContainer_asyncToGenerator(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function _next(n){SubjectGroupViewerContainer_asyncGeneratorStep(a,r,o,_next,_throw,"next",n)}function _throw(n){SubjectGroupViewerContainer_asyncGeneratorStep(a,r,o,_next,_throw,"throw",n)}_next(void 0)})}}var SubjectGroupViewerContainer_DEFAULT_CELL_STYLE={stroke:"#fff",strokeWidth:"1",overlay:"rgba(41,103,255,0.3)",selectedStroke:"#2967FF",selectedStrokeWidth:"8",focusOutline:"2px dashed rgba(255, 255, 255, 0.5)",background:"#000"},SubjectGroupViewerContainer_DEFAULT_HANDLER=()=>!0;function SubjectGroupViewerContainer(_ref){var{annotation,cellWidth,cellHeight,cellStyle,currentTask,gridColumns,gridRows,gridMaxWidth,gridMaxHeight,ImageObject=window.Image,interactionMode="annotate",isCurrentTaskValidForAnnotation,loadingState=async_states_default().initialized,onError=SubjectGroupViewerContainer_DEFAULT_HANDLER,onReady=SubjectGroupViewerContainer_DEFAULT_HANDLER,setOnPan=SubjectGroupViewerContainer_DEFAULT_HANDLER,setOnZoom=SubjectGroupViewerContainer_DEFAULT_HANDLER,subject}=_ref,{onKeyZoom}=useKeyZoom(),groupViewer=(0,react.useRef)(),scrollContainer=(0,react.useRef)(),[images,setImages]=(0,react.useState)([]),[panX,setPanX]=(0,react.useState)(0),[panY,setPanY]=(0,react.useState)(0),[zoom,setZoom]=(0,react.useState)(1);function onUnmount(){var _scrollContainer$curr;setOnPan(()=>!0),setOnZoom(()=>!0),null===(_scrollContainer$curr=scrollContainer.current)||void 0===_scrollContainer$curr||_scrollContainer$curr.removeEventListener("wheel",onWheel)}function fetchImage(url){return new Promise((resolve,reject)=>{var img=new ImageObject;return img.onload=()=>resolve(img),img.onerror=reject,img.src=url,img})}function _preload(){return(_preload=SubjectGroupViewerContainer_asyncToGenerator(function*(){if(null!=subject&&subject.locations){var imageUrls=subject.locations.map(l=>l.url),_images=yield Promise.all(imageUrls.map(fetchImage));setImages(_images)}})).apply(this,arguments)}function _onLoad(){return _onLoad=SubjectGroupViewerContainer_asyncToGenerator(function*(){try{yield function preload(){return _preload.apply(this,arguments)}();var{clientHeight,clientWidth,gridHeight:naturalHeight,gridWidth:naturalWidth}=function getGridSize(){var svg=groupViewer.current||{},{width:clientWidth,height:clientHeight}=svg.getBoundingClientRect&&svg.getBoundingClientRect()||{};return{clientHeight,clientWidth,gridHeight:gridRows*cellHeight,gridWidth:gridColumns*cellWidth}}();onReady({target:{clientHeight,clientWidth,naturalHeight,naturalWidth}})}catch(error){SubjectGroupViewerContainer_console.error(error),onError(error)}}),_onLoad.apply(this,arguments)}function onDrag(event,difference){doPan(difference.x,difference.y)}function onPanViaExternalControls(dx,dy){var ARBITRARY_FACTOR=Math.min(cellWidth,cellHeight)/20;doPan(dx*ARBITRARY_FACTOR,dy*ARBITRARY_FACTOR)}function doPan(dx,dy){setPanX(_panX=>_panX+dx),setPanY(_panY=>_panY+dy)}function onZoomViaExternalControls(type){doZoom(type)}function doZoom(type){switch(type){case"zoomin":setZoom(_zoom=>Math.min(_zoom+.1,4));break;case"zoomout":setZoom(_zoom=>Math.max(_zoom-.1,1));break;case"zoomto":setZoom(1),setPanX(0),setPanY(0)}}function onWheel(event){var{deltaY}=event;doZoom(deltaY<0?"zoomout":"zoomin"),function preventDefault(e){e.preventDefault()}(event)}(0,react.useEffect)(function onMount(){var _scrollContainer$curr2;return function onLoad(){return _onLoad.apply(this,arguments)}(),setOnPan(onPanViaExternalControls),setOnZoom(onZoomViaExternalControls),null===(_scrollContainer$curr2=scrollContainer.current)||void 0===_scrollContainer$curr2||_scrollContainer$curr2.addEventListener("wheel",onWheel),onUnmount},[]);var gridWidth=gridColumns*cellWidth,gridHeight=gridRows*cellHeight;return loadingState===async_states_default().error?(0,jsx_runtime.jsx)("div",{children:"Something went wrong."}):subject&&subject.locations&&subject.locations.length>0&&cellHeight>0&&cellWidth>0&&gridColumns>0&&gridRows>0?(0,jsx_runtime.jsx)("div",{ref:scrollContainer,children:(0,jsx_runtime.jsx)(SubjectGroupViewer_SubjectGroupViewer,{ref:groupViewer,images,subjectIds:subject.subjectIds,dragMove:function dragMove(event,difference){onDrag&&onDrag(event,difference)},onKeyDown:onKeyZoom,cellWidth,cellHeight,cellStyle,gridRows,gridColumns,gridMaxWidth,gridMaxHeight,width:gridWidth,height:gridHeight,panX,panY,zoom,annotation,currentTask,interactionMode,isCurrentTaskValidForAnnotation})}):null}SubjectGroupViewerContainer.propTypes={subject:prop_types_default().shape({locations:prop_types_default().arrayOf(locationValidator_locationValidator),subjectIds:prop_types_default().arrayOf(prop_types_default().string)}),loadingState:prop_types_default().string,onError:prop_types_default().func,onReady:prop_types_default().func,interactionMode:prop_types_default().oneOf(["annotate","move"]),setOnPan:prop_types_default().func,setOnZoom:prop_types_default().func};const SubjectGroupViewer_SubjectGroupViewerContainer=withStores(SubjectGroupViewerContainer,function SubjectGroupViewerContainer_storeMapper(classifierStore){var _activeWorkflow$confi,{interactionMode,setOnPan,setOnZoom}=classifierStore.subjectViewer,{active:activeWorkflow}=classifierStore.workflows,viewerConfig=(null==activeWorkflow||null===(_activeWorkflow$confi=activeWorkflow.configuration)||void 0===_activeWorkflow$confi?void 0:_activeWorkflow$confi.subject_viewer_config)||{},cellWidth=viewerConfig.cell_width||1200,cellHeight=viewerConfig.cell_height||1e3,cellStyle=viewerConfig.cell_style||SubjectGroupViewerContainer_DEFAULT_CELL_STYLE,gridColumns=viewerConfig.grid_columns||3,gridRows=viewerConfig.grid_rows||3,gridMaxWidth=viewerConfig.grid_max_width||"",gridMaxHeight=viewerConfig.grid_max_height||"",{activeStepTasks}=classifierStore.workflowSteps,[currentTask]=activeStepTasks.filter(task=>"subjectGroupComparison"===task.type),{active:classification}=classifierStore.classifications,isCurrentTaskValidForAnnotation=!!currentTask;return{cellWidth,cellHeight,cellStyle,gridColumns,gridRows,gridMaxWidth,gridMaxHeight,interactionMode,setOnZoom,setOnPan,annotation:(classification?Array.from(classification.annotations.values()):[]).find(item=>"SubjectGroupComparisonAnnotation"===(0,mobx_state_tree_module.Pw)(item).name),currentTask,isCurrentTaskValidForAnnotation}});function VolumetricViewerWrapper_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function VolumetricViewerWrapper_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?VolumetricViewerWrapper_ownKeys(Object(t),!0).forEach(function(r){VolumetricViewerWrapper_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):VolumetricViewerWrapper_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function VolumetricViewerWrapper_defineProperty(e,r,t){return(r=function VolumetricViewerWrapper_toPropertyKey(t){var i=function VolumetricViewerWrapper_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var VolumetricViewerWrapper_DEFAULT_HANDLER=()=>{},VolumetricViewer=(0,react.lazy)(()=>Promise.all([__webpack_require__.e(4939),__webpack_require__.e(9206),__webpack_require__.e(1509)]).then(__webpack_require__.bind(__webpack_require__,"../lib-subject-viewers/dist/esm/VolumetricViewer/VolumetricFull/index.js")));var getViewer_viewers={dataImage:DataImageViewerConnector,flipbook:FlipbookViewer_FlipbookViewerContainer,geoMap:GeoMapViewer_GeoMapViewerContainer,jsonData:JSONDataViewer_JSONDataViewer,imageAndText:ImageAndTextViewerConnector,lightCurve:JSONDataViewer_JSONDataViewer,multiFrame:MultiFrameViewer_MultiFrameViewerContainer,scatterPlot:JSONDataViewer_JSONDataViewer,singleImage:SingleImageViewer_SingleImageViewerContainer,singleText:SingleTextViewerConnector,singleVideo:SingleVideoViewer_SingleVideoViewerContainer,subjectGroup:SubjectGroupViewer_SubjectGroupViewerContainer,variableStar:JSONDataViewer_JSONDataViewer,volumetric:function VolumetricViewerWrapper(_ref){var _stores$classifierSto,_stores$classifierSto2,_stores$classifierSto3,_stores$classifierSto4,{loadingState=async_states_default().initialized,onError=VolumetricViewerWrapper_DEFAULT_HANDLER,onReady=VolumetricViewerWrapper_DEFAULT_HANDLER,subject}=_ref,stores=(0,react.useContext)(mobxreact_esm.Db),addAnnotation=null!==(_stores$classifierSto=null==stores||null===(_stores$classifierSto2=stores.classifierStore)||void 0===_stores$classifierSto2||null===(_stores$classifierSto2=_stores$classifierSto2.classifications)||void 0===_stores$classifierSto2?void 0:_stores$classifierSto2.addAnnotation)&&void 0!==_stores$classifierSto?_stores$classifierSto:VolumetricViewerWrapper_DEFAULT_HANDLER,activeStepTasks=null!==(_stores$classifierSto3=null==stores||null===(_stores$classifierSto4=stores.classifierStore)||void 0===_stores$classifierSto4||null===(_stores$classifierSto4=_stores$classifierSto4.workflowSteps)||void 0===_stores$classifierSto4?void 0:_stores$classifierSto4.activeStepTasks)&&void 0!==_stores$classifierSto3?_stores$classifierSto3:[],config={loadingState,onAnnotation:function onAnnotationUpdate(annotations){activeStepTasks[0]&&addAnnotation(activeStepTasks[0],annotations)},onError,onReady,subject};return(0,jsx_runtime.jsx)(react.Suspense,{fallback:(0,jsx_runtime.jsx)("p",{children:"Loading Volumetric Viewer..."}),children:(0,jsx_runtime.jsx)(VolumetricViewer,VolumetricViewerWrapper_objectSpread({},config))})}};const getViewer_getViewer=function getViewer(viewer){return getViewer_viewers[viewer]||null};var SubjectViewer_console=__webpack_require__("../../node_modules/console-browserify/index.js");function SubjectViewer_SubjectViewer(_ref){var{enableInteractionLayer,onError,onSubjectReady,subject,subjectQueueState=async_states_default().initialized,subjectReadyState}=_ref,{t}=useTranslation("components");switch(subjectQueueState){case async_states_default().initialized:return null;case async_states_default().loading:return(0,jsx_runtime.jsx)("div",{children:t("SubjectViewer.loading")});case async_states_default().error:return SubjectViewer_console.error("There was an error loading the subjects"),null;case async_states_default().success:var Viewer=getViewer_getViewer(null==subject?void 0:subject.viewer);return Viewer?(0,jsx_runtime.jsx)(Viewer,{enableInteractionLayer,loadingState:subjectReadyState,onError,onReady:onSubjectReady,subject,title:{id:"subject-title",text:"Subject ".concat(subject.id)},viewerConfiguration:null==subject?void 0:subject.viewerConfiguration},subject.id):null}}SubjectViewer_SubjectViewer.propTypes={subjectQueueState:prop_types_default().oneOf(async_states_default().values),subject:prop_types_default().shape({viewer:prop_types_default().string})};const components_SubjectViewer_SubjectViewer=withStores(SubjectViewer_SubjectViewer,function SubjectViewer_storeMapper(classifierStore){var{subjects:{active:subject,loadingState:subjectQueueState},subjectViewer:{onSubjectReady,onError,loadingState:subjectReadyState}}=classifierStore,drawingTasks=null==classifierStore?void 0:classifierStore.workflowSteps.findTasksByType("drawing"),transcriptionTasks=null==classifierStore?void 0:classifierStore.workflowSteps.findTasksByType("transcription");return{enableInteractionLayer:drawingTasks.length>0||transcriptionTasks.length>0,onError,onSubjectReady,subject,subjectQueueState,subjectReadyState}});var Tab=__webpack_require__("../../node_modules/grommet/es6/components/Tab/Tab.js");function Tab_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Tab_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Tab_ownKeys(Object(t),!0).forEach(function(r){Tab_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tab_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Tab_defineProperty(e,r,t){return(r=function Tab_toPropertyKey(t){var i=function Tab_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const esm_Tab_Tab=function Tab_Tab(props){var clonedProps=Tab_objectSpread({},props);return"string"==typeof clonedProps.title&&(clonedProps.title=(0,jsx_runtime.jsx)(SpacedText.A,{size:"medium",weight:"bold",children:clonedProps.title})),(0,jsx_runtime.jsx)(Tab.o,Tab_objectSpread({},clonedProps))};var Tabs=__webpack_require__("../../node_modules/grommet/es6/components/Tabs/Tabs.js"),Tabs_theme_theme={tab:{active:{background:{dark:"dark-3",light:"white"}},background:{dark:"dark-2",light:"light-1"},hover:{color:{dark:"light-5",light:"dark-5"}},margin:"0"},tabs:{extend:props=>{var _props$children,tabHeaderColor=function getTabHeaderColor(props){return getFromTheme(props,"light-5","dark-5")}(props),borderColor=getBorderColor(props),activeTabHeaderColor=function getActiveTabHeaderColor(props){return getFromTheme(props,"white","black")}(props),hoverBackgroundColor=function getHoverBackground(props){var color=getFromTheme(props,"neutral-1","accent-1"),darkColors=[(0,polished_esm.e$)(.04,color),(0,polished_esm.e$)(.11,color)],lightColors=[(0,polished_esm.a)(.05,color),(0,polished_esm.e$)(.11,color)],activeColors=props.theme.dark?darkColors:lightColors;return(0,styled_components_browser_esm.css)(["linear-gradient(",",",");"],activeColors[0],activeColors[1])}(props),tabChildren=null===(_props$children=props.children)||void 0===_props$children||null===(_props$children=_props$children[0])||void 0===_props$children||null===(_props$children=_props$children.props)||void 0===_props$children?void 0:_props$children.children,flexBasis=tabChildren?"".concat(100/tabChildren.length,"%"):"auto";return(0,styled_components_browser_esm.css)(['button[role="tab"]{color:',";flex:1 1 ",";> div{height:40px;padding:0;justify-content:center;border-bottom:1px solid ",";border-right:1px solid ",';}&:last-of-type > div{border-right:none;}&:disabled{cursor:not-allowed;opacity:1;}&[aria-selected="true"]{pointer-events:none;> div{border-bottom:1px solid transparent;color:',';}}&:enabled[aria-selected="false"] > div{&:focus,&:hover{background:',";}}}"],tabHeaderColor,flexBasis,borderColor,borderColor,activeTabHeaderColor,hoverBackgroundColor)},header:{background:{dark:"dark-2",light:"light-1"},extend:props=>{var borderColor=getBorderColor(props);return(0,styled_components_browser_esm.css)(["border-left:1px solid ",";border-right:1px solid ",";border-top:1px solid ",";text-align:center;"],borderColor,borderColor,borderColor)}},panel:{extend:props=>{var backgroundColor=function getBackgroundColor(props){return getFromTheme(props,"dark-3","white")}(props),borderColor=getBorderColor(props);return(0,styled_components_browser_esm.css)(["background-color:",";border-bottom:1px solid ",";border-left:1px solid ",";border-right:1px solid ",";padding:20px 20px 30px 20px;"],backgroundColor,borderColor,borderColor,borderColor)}}}};const Tabs_theme=Tabs_theme_theme;function getBorderColor(props){return getFromTheme(props,"dark-1","light-3")}function getFromTheme(props,darkColor,lightColor){return props.theme.dark?props.theme.global.colors[darkColor]:props.theme.global.colors[lightColor]}const Tabs_Tabs=(0,withThemeContext.A)(Tabs.t,Tabs_theme);var StyledDialog=styled_components_browser_esm.default.dialog.withConfig({displayName:"DisabledTaskPopup__StyledDialog",componentId:"sc-1e0q0fu-0"})(["z-index:1000;border:none;padding:0;margin:2em 1em;height:min-content;min-height:30ch;"]);function DisabledTaskPopup(_ref){var{isOpen=!1,nextAvailable,onClose=()=>!0,reset}=_ref,{t}=useTranslation("components"),[active,setActive]=(0,react.useState)(isOpen);return(0,react.useEffect)(function onLoaded(){setActive(isOpen)},[isOpen]),(0,jsx_runtime.jsx)(StyledDialog,{open:active,"aria-label":t("TaskArea.DisabledTaskPopup.title"),children:(0,jsx_runtime.jsxs)(Modal.a,{full:"horizontal",title:t("TaskArea.DisabledTaskPopup.title"),children:[(0,jsx_runtime.jsx)(Paragraph.f,{children:t("TaskArea.DisabledTaskPopup.body")}),(0,jsx_runtime.jsx)(PlainButton.Ay,{alignSelf:"center",onClick:function onReset(){setActive(!1),reset()},text:t("TaskArea.DisabledTaskPopup.options.select")}),(0,jsx_runtime.jsx)(PrimaryButton.A,{alignSelf:"center",color:"teal",label:t("TaskArea.DisabledTaskPopup.options.next"),onClick:function onNext(){setActive(!1),nextAvailable()},margin:"xsmall"}),(0,jsx_runtime.jsx)(PlainButton.Ay,{alignSelf:"center",text:t("TaskArea.DisabledTaskPopup.options.dismiss"),onClick:function closeModal(){setActive(!1),onClose()}})]})})}DisabledTaskPopup.propTypes={isOpen:prop_types.bool,nextAvailable:prop_types.func,onClose:prop_types.func,reset:prop_types.func};const DisabledTaskPopupConnector=withStores(DisabledTaskPopup,function DisabledTaskPopupConnector_storeMapper(store){var{subjects:{nextAvailable,clearQueue}}=store;return{nextAvailable,reset:clearQueue}});var Task_excluded=["autoFocus","disabled","latest","previousAnnotationValues","subject","task"];function Task_Task_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Task_Task_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Task_Task_ownKeys(Object(t),!0).forEach(function(r){Task_Task_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Task_Task_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Task_Task_defineProperty(e,r,t){return(r=function Task_Task_toPropertyKey(t){var i=function Task_Task_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Task_Task(_ref){var annotation,suggestions,{autoFocus=!1,disabled=!1,latest,previousAnnotationValues=null,subject,task}=_ref,props=function Task_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function Task_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,Task_excluded),TaskPlugin="dropdown-simple"===task.type?dropdown_simple:tasks_namespaceObject[task.type],TaskComponent=null==TaskPlugin?void 0:TaskPlugin.TaskComponent;return TaskComponent?(latest&&([annotation]=latest.annotations.filter(annotation=>annotation.task===task.taskKey)),previousAnnotationValues&&(suggestions=previousAnnotationValues.get(task.taskKey)),annotation?(0,jsx_runtime.jsx)(Box.a,{basis:"auto",children:(0,jsx_runtime.jsx)(TaskComponent,Task_Task_objectSpread(Task_Task_objectSpread({},props),{},{autoFocus,disabled,annotation,suggestions,subject,task}))},annotation.id):(0,jsx_runtime.jsxs)(Paragraph.f,{children:["Annotation missing for task ",(0,jsx_runtime.jsx)("code",{children:task.taskKey})]})):(0,jsx_runtime.jsxs)(Paragraph.f,{children:[(0,jsx_runtime.jsxs)("code",{children:[task.taskKey," ",task.type]})," is not a supported task type."]})}Task_Task.propTypes={autoFocus:prop_types.bool,disabled:prop_types.bool,latest:(0,prop_types.shape)({annotations:prop_types.array}),previousAnnotationValues:prop_types.object,task:(0,prop_types.shape)({taskKey:prop_types.string.isRequired}).isRequired};const components_Task_Task=withStores(Task_Task,function Task_storeMapper(classifierStore){var{subjects:{active:subject},subjectViewer:{loadingState:subjectReadyState}}=classifierStore;return{disabled:subjectReadyState!==async_states_default().success,latest:null==subject?void 0:subject.stepHistory.latest,subject}});var StyledPlainButton=(0,styled_components_browser_esm.default)(PlainButton.Ay).withConfig({displayName:"TaskHelp__StyledPlainButton",componentId:"sc-ewnzwn-0"})(["text-align:center;"]);function TaskHelp(_ref){var{tasks}=_ref,{t}=useTranslation("components"),[showModal,setShowModal]=(0,react.useState)(!1),label=t("TaskArea.Tasks.TaskHelp.label"),tasksWithHelp=null==tasks?void 0:tasks.filter(task=>!!task.help);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(StyledPlainButton,{onClick:()=>setShowModal(!0),margin:{bottom:"small"},text:label}),(0,jsx_runtime.jsx)(Modal.A,{active:showModal,closeFn:()=>setShowModal(!1),title:label,height:{max:"90vh"},children:(0,jsx_runtime.jsxs)(Box.a,{overflow:"auto",children:[tasksWithHelp.map((task,index)=>tasksWithHelp.length>1?(0,jsx_runtime.jsxs)(react.Fragment,{children:[(0,jsx_runtime.jsx)(Markdownz.Ay,{children:task.help}),tasksWithHelp.length-1===index?null:(0,jsx_runtime.jsx)("hr",{})]},task.taskKey):(0,jsx_runtime.jsx)(Markdownz.Ay,{children:task.help},task.taskKey)),(0,jsx_runtime.jsx)(Button.$,{margin:{top:"small"},onClick:()=>setShowModal(!1),label:t("TaskArea.Tasks.TaskHelp.close"),primary:!0})]})})]})}TaskHelp.propTypes={tasks:(0,prop_types.arrayOf)(prop_types.object).isRequired};const TaskHelp_TaskHelp=TaskHelp;var NextButton_DEFAULT_HANDLER=()=>!0,NextButton_StyledButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"NextButton__StyledButton",componentId:"sc-11v9d4d-0"})(["flex:1 0;"]);function NextButton(_ref){var{disabled=!1,onClick=NextButton_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components"),label=t("TaskArea.Tasks.NextButton.next");return(0,jsx_runtime.jsx)(NextButton_StyledButton,{disabled,label,onClick})}NextButton.propTypes={disabled:prop_types.bool,onClick:prop_types.func};const NextButton_NextButton=NextButton;function NextButtonConnector_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function NextButtonConnector_defineProperty(e,r,t){return(r=function NextButtonConnector_toPropertyKey(t){var i=function NextButtonConnector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function NextButtonConnector_storeMapper(classifierStore){var{subjects:{active:subject},workflowSteps:{active:step}}=classifierStore;if(null!=subject&&subject.stepHistory){var{next,hasNextStep,latest}=subject.stepHistory,annotations=null==latest?void 0:latest.annotations;function onClick(){step.completeAndValidate(annotations),next(),requestAnimationFrame(()=>{var taskArea=document.querySelector(".classifier-task-area");null==taskArea||taskArea.focus(),(null==taskArea?void 0:taskArea.getBoundingClientRect().top)<0&&taskArea.scrollIntoView({block:"start"})})}return{hasNextStep,onClick}}return{}}const NextButton_NextButtonConnector=(0,mobxreact_esm.PA)(function NextButtonConnector(props){var{hasNextStep,onClick}=useStores(NextButtonConnector_storeMapper);return hasNextStep?(0,jsx_runtime.jsx)(NextButton_NextButton,function NextButtonConnector_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?NextButtonConnector_ownKeys(Object(t),!0).forEach(function(r){NextButtonConnector_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):NextButtonConnector_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({onClick},props)):null});var DoneButton_DEFAULT_HANDLER=()=>!0,DoneButton_StyledButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"DoneButton__StyledButton",componentId:"sc-a8jjzu-0"})(["flex:1 0;padding:10px;font-weight:bold;"]);function DoneButton(_ref){var{disabled=!1,onClick=DoneButton_DEFAULT_HANDLER,setSaving=DoneButton_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(DoneButton_StyledButton,{color:"green",disabled,label:t("TaskArea.Tasks.DoneButton.done"),onClick:function handleClick(event){return setSaving(!0),onClick(event)}})}DoneButton.propTypes={disabled:prop_types.bool,onClick:prop_types.func,setSaving:prop_types.func};const DoneButton_DoneButton=DoneButton;function DoneButtonConnector_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function DoneButtonConnector_defineProperty(e,r,t){return(r=function DoneButtonConnector_toPropertyKey(t){var i=function DoneButtonConnector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function DoneButtonConnector_storeMapper(classifierStore){var{subjects:{active:subject},classifications:{completeClassification},workflowSteps:{active:step}}=classifierStore;if(null!=subject&&subject.stepHistory){var{finish,hasNextStep,latest}=subject.stepHistory,annotations=null==latest?void 0:latest.annotations;function onClick(event){return event.preventDefault(),step.completeAndValidate(annotations),finish(),requestAnimationFrame(()=>{var taskArea=document.querySelector(".classifier-task-area");null==taskArea||taskArea.focus(),(null==taskArea?void 0:taskArea.getBoundingClientRect().top)<0&&taskArea.scrollIntoView({block:"start"})}),completeClassification({doneAndTalk:!1})}return{hasNextStep,onClick}}return{}}const DoneButton_DoneButtonConnector=(0,mobxreact_esm.PA)(function DoneButtonConnector(props){var{hasNextStep,onClick}=useStores(DoneButtonConnector_storeMapper);return hasNextStep?null:(0,jsx_runtime.jsx)(DoneButton_DoneButton,function DoneButtonConnector_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DoneButtonConnector_ownKeys(Object(t),!0).forEach(function(r){DoneButtonConnector_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DoneButtonConnector_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({onClick},props))});var ShareRounded=__webpack_require__("../../node_modules/grommet-icons/es6/icons/ShareRounded.js"),DoneAndTalkButton_StyledLabel=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"DoneAndTalkButton__StyledLabel",componentId:"sc-1wrlm7m-0"})(["display:flex;align-items:center;justify-content:center;gap:5px;"]),DoneAndTalkButton_StyledButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"DoneAndTalkButton__StyledButton",componentId:"sc-1wrlm7m-1"})(["margin-right:1ch;flex:1 0;padding:10px;"]),DoneAndTalkButton_Label=()=>{var{t}=useTranslation("components");return(0,jsx_runtime.jsxs)(DoneAndTalkButton_StyledLabel,{children:[t("TaskArea.Tasks.DoneAndTalkButton.doneAndTalk"),(0,jsx_runtime.jsx)(ShareRounded.N,{size:"0.825rem",color:{light:"black",dark:"white"},"aria-label":t("TaskArea.Tasks.DoneAndTalkButton.newTab")})]})},DoneAndTalkButton_DEFAULT_HANDLER=()=>!0;function DoneAndTalkButton(_ref){var{disabled=!1,onClick=DoneAndTalkButton_DEFAULT_HANDLER,setSaving=DoneAndTalkButton_DEFAULT_HANDLER,talkURL=""}=_ref;return(0,jsx_runtime.jsx)(DoneAndTalkButton_StyledButton,{color:"blue",href:disabled?"":talkURL,label:(0,jsx_runtime.jsx)(DoneAndTalkButton_Label,{}),onClick:function handleClick(event){return setSaving(!0),onClick(event)},disabled,target:"_blank",onContextMenu:e=>e.preventDefault()})}DoneAndTalkButton.propTypes={disabled:prop_types.bool,onClick:prop_types.func,setSaving:prop_types.func,talkURL:prop_types.string};const DoneAndTalkButton_DoneAndTalkButton=DoneAndTalkButton;function DoneAndTalkButtonConnector_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function DoneAndTalkButtonConnector_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DoneAndTalkButtonConnector_ownKeys(Object(t),!0).forEach(function(r){DoneAndTalkButtonConnector_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DoneAndTalkButtonConnector_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function DoneAndTalkButtonConnector_defineProperty(e,r,t){return(r=function DoneAndTalkButtonConnector_toPropertyKey(t){var i=function DoneAndTalkButtonConnector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function DoneAndTalkButtonConnector_storeMapper(classifierStore){var{classifications:{completeClassification},subjects:{active:subject},workflowSteps:{shouldWeShowDoneAndTalkButton}}=classifierStore;if(null!=subject&&subject.stepHistory){var{finish,hasNextStep}=subject.stepHistory,visible=!hasNextStep&&shouldWeShowDoneAndTalkButton;function onClick(){return finish(),completeClassification({doneAndTalk:!0})}return{onClick,talkURL:subject.talkURL,visible}}return{}}const DoneAndTalkButtonConnector=(0,mobxreact_esm.PA)(function DoneAndTalkConnector(props){var{onClick,talkURL,visible}=useStores(DoneAndTalkButtonConnector_storeMapper);return visible?(0,jsx_runtime.jsx)(DoneAndTalkButton_DoneAndTalkButton,DoneAndTalkButtonConnector_objectSpread(DoneAndTalkButtonConnector_objectSpread({onClick},props),{},{talkURL})):null});var SGVDoneAndTalkButton_StyledLabel=(0,styled_components_browser_esm.default)(Text.E).withConfig({displayName:"SGVDoneAndTalkButton__StyledLabel",componentId:"sc-9nlko9-0"})(["display:flex;align-items:center;justify-content:center;gap:5px;"]),SGVDoneAndTalkButton_StyledButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"SGVDoneAndTalkButton__StyledButton",componentId:"sc-9nlko9-1"})(["margin-right:1ch;flex:1 0;padding:10px;"]),SGVDoneAndTalkButton_Label=()=>{var{t}=useTranslation("components");return(0,jsx_runtime.jsxs)(SGVDoneAndTalkButton_StyledLabel,{children:[t("TaskArea.Tasks.DoneAndTalkButton.doneAndTalk"),(0,jsx_runtime.jsx)(ShareRounded.N,{size:"0.825rem",color:{light:"black",dark:"white"},"aria-label":t("TaskArea.Tasks.DoneAndTalkButton.newTab")})]})},SGVDoneAndTalkButton_DEFAULT_HANDLER=()=>!0;function SGVDoneAndTalkButton(_ref){var{disabled=!1,onClick=SGVDoneAndTalkButton_DEFAULT_HANDLER,setSaving=SGVDoneAndTalkButton_DEFAULT_HANDLER}=_ref;return(0,jsx_runtime.jsx)(SGVDoneAndTalkButton_StyledButton,{color:"blue",label:(0,jsx_runtime.jsx)(SGVDoneAndTalkButton_Label,{}),onClick:function handleClick(event){return event.preventDefault(),setSaving(!0),onClick(event)},disabled})}SGVDoneAndTalkButton.propTypes={disabled:prop_types.bool,onClick:prop_types.func,setSaving:prop_types.func};const SGVDoneAndTalkButton_SGVDoneAndTalkButton=SGVDoneAndTalkButton;var SubjectGroupModal_DEFAULT_HANDLER=()=>{};var StyledAnchor=(0,styled_components_browser_esm.default)(Anchor.M).withConfig({displayName:"SubjectGroupModal__StyledAnchor",componentId:"sc-1et7id5-0"})(["&:hover,&:focus,&:focus-visible{border:solid 3px ",";}"],props=>props.theme.global.colors.brand);function SubjectGroupModal(_ref){var{active=!1,closeFn=SubjectGroupModal_DEFAULT_HANDLER,subject,workflowConfiguration}=_ref;if(!active||!subject)return null;var columns=new Array(workflowConfiguration.subject_viewer_config.grid_columns).fill("1fr"),rows=new Array(workflowConfiguration.subject_viewer_config.grid_rows).fill("1fr");return(0,jsx_runtime.jsx)(Modal.A,{active,closeFn,title:"Discuss this subject group",children:(0,jsx_runtime.jsxs)(Box.a,{gap:"xsmall",width:{max:"400px"},children:[(0,jsx_runtime.jsx)(Text.E,{children:"Choose a subject to view in Talk"}),(0,jsx_runtime.jsx)(Grid_Grid.x,{columns,rows,gap:"xsmall",children:subject.locations.map((location,i)=>{return(0,jsx_runtime.jsx)(StyledAnchor,{href:(projectSlug=subject.project.slug,subjectId=subject.subjectIds[i],"https://www.zooniverse.org/projects/".concat(projectSlug,"/talk/subjects/").concat(subjectId)),target:"_blank",children:(0,jsx_runtime.jsx)(Image._,{height:"100%",width:"100%",src:location.url,alt:"Subject ".concat(subject.subjectIds[i])})},subject.subjectIds[i]);var projectSlug,subjectId})})]})})}SubjectGroupModal.propTypes={active:prop_types.bool,closeFn:prop_types.func,subject:(0,prop_types.shape)({project:(0,prop_types.shape)({slug:prop_types.string}),subjectIds:(0,prop_types.arrayOf)(prop_types.string),locations:(0,prop_types.arrayOf)((0,prop_types.shape)({url:prop_types.string}))}),workflowConfiguration:(0,prop_types.shape)({subject_viewer_config:(0,prop_types.shape)({grid_columns:prop_types.number,grid_rows:prop_types.number})})};const SubjectGroupModal_SubjectGroupModal=SubjectGroupModal;function SGVDoneAndTalkButtonConnector_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function SGVDoneAndTalkButtonConnector_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SGVDoneAndTalkButtonConnector_ownKeys(Object(t),!0).forEach(function(r){SGVDoneAndTalkButtonConnector_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SGVDoneAndTalkButtonConnector_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function SGVDoneAndTalkButtonConnector_defineProperty(e,r,t){return(r=function SGVDoneAndTalkButtonConnector_toPropertyKey(t){var i=function SGVDoneAndTalkButtonConnector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function SGVDoneAndTalkButtonConnector_storeMapper(classifierStore){var{classifications:{completeClassification},projects:{active:project},subjects:{active:subject},workflows:{active:workflow},workflowSteps:{shouldWeShowDoneAndTalkButton}}=classifierStore;if(null!=subject&&subject.stepHistory&&workflow){var{finish,hasNextStep}=subject.stepHistory;return{completeClassification,finish,project,subject,visible:!hasNextStep&&shouldWeShowDoneAndTalkButton,workflow}}return{}}const SGVDoneAndTalkButton_SGVDoneAndTalkButtonConnector=(0,mobxreact_esm.PA)(function SGVDoneAndTalkButtonConnector(props){var{completeClassification,finish,project,subject,visible,workflow}=useStores(SGVDoneAndTalkButtonConnector_storeMapper);return visible&&workflow?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(SGVDoneAndTalkButton_SGVDoneAndTalkButton,SGVDoneAndTalkButtonConnector_objectSpread({onClick:function onClick(){var subjectData={project:{slug:(null==project?void 0:project.slug)||""},subjectIds:subject.subjectIds?[...subject.subjectIds]:[],locations:subject.locations?subject.locations.map(loc=>({url:loc.url})):[]};return workflow.setSGVModalState(!0,subjectData),finish(),completeClassification({doneAndTalk:!0})}},props)),workflow.SGVModalState.showModal&&workflow.SGVModalState.lastSubject&&(0,jsx_runtime.jsx)(SubjectGroupModal_SubjectGroupModal,{active:workflow.SGVModalState.showModal,closeFn:function onCloseModal(){workflow.setSGVModalState(!1,null)},subject:workflow.SGVModalState.lastSubject,workflowConfiguration:workflow.configuration})]}):null});var BackButton_StyledButton=(0,styled_components_browser_esm.default)(PrimaryButton.A).withConfig({displayName:"BackButton__StyledButton",componentId:"sc-1h5msl8-0"})(["margin-right:1ch;width:fit-content;padding:10px 20px;"," &:focus:not(:disabled),&:hover:not(:disabled){background:linear-gradient(180deg,#c0e5e7,#84ccd1);}"],props=>props.theme.dark?(0,styled_components_browser_esm.css)(["border:white 1px solid;font-color:white;background:",";"],props.theme.global.colors["dark-1"]):(0,styled_components_browser_esm.css)(["border:none;font-color:black;background:",";"],props.theme.global.colors["light-1"])),BackButton_DEFAULT_HANDLER=()=>{};function BackButton(_ref){var{onClick=BackButton_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(BackButton_StyledButton,{label:t("TaskArea.Tasks.BackButton.back"),onClick})}BackButton.propTypes={onClick:prop_types.func,theme:prop_types.object};const BackButton_BackButton=BackButton;function BackButtonConnector_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function BackButtonConnector_defineProperty(e,r,t){return(r=function BackButtonConnector_toPropertyKey(t){var i=function BackButtonConnector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function BackButtonConnector_storeMapper(classifierStore){var{subjects:{active:subject}}=classifierStore;if(null!=subject&&subject.stepHistory){var{back,canUndo}=null==subject?void 0:subject.stepHistory;function onClick(){back(),requestAnimationFrame(()=>{var taskArea=document.querySelector(".classifier-task-area");null==taskArea||taskArea.focus(),(null==taskArea?void 0:taskArea.getBoundingClientRect().top)<0&&taskArea.scrollIntoView({block:"start"})})}return{canUndo,onClick}}return{}}const BackButton_BackButtonConnector=(0,mobxreact_esm.PA)(function BackButtonConnector(props){var{canUndo,onClick}=useStores(BackButtonConnector_storeMapper);return canUndo?(0,jsx_runtime.jsx)(BackButton_BackButton,function BackButtonConnector_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?BackButtonConnector_ownKeys(Object(t),!0).forEach(function(r){BackButtonConnector_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):BackButtonConnector_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({onClick},props)):null});var SettingsOption=__webpack_require__("../../node_modules/grommet-icons/es6/icons/SettingsOption.js"),DemoModeToggle_DEFAULT_HANDLER=()=>{};function DemoModeToggle(_ref){var{demoMode=!1,setDemoMode=DemoModeToggle_DEFAULT_HANDLER}=_ref,{t}=useTranslation("components");return(0,jsx_runtime.jsx)(CheckBox.o,{checked:demoMode,label:(0,jsx_runtime.jsx)(SpacedText.A,{children:t("TaskArea.Tasks.ExpertOptions.demoToggle")}),onChange:event=>setDemoMode(event.target.checked),toggle:!0})}function DemoModeToggleConnector_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function DemoModeToggleConnector_defineProperty(e,r,t){return(r=function DemoModeToggleConnector_toPropertyKey(t){var i=function DemoModeToggleConnector_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function DemoModeToggleConnector_storeMapper(classifierStore){var{demoMode,setDemoMode}=classifierStore.classifications;return{demoMode,setDemoMode}}DemoModeToggle.propTypes={demoMode:prop_types.bool,setDemoMode:prop_types.func};const DemoModeToggle_DemoModeToggleConnector=(0,mobxreact_esm.PA)(function DemoModeToggleConnector(props){var{demoMode,setDemoMode}=useStores(DemoModeToggleConnector_storeMapper);return(0,jsx_runtime.jsx)(DemoModeToggle,function DemoModeToggleConnector_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?DemoModeToggleConnector_ownKeys(Object(t),!0).forEach(function(r){DemoModeToggleConnector_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DemoModeToggleConnector_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({demoMode,setDemoMode},props))});const ExpertOptions_ExpertOptions=function ExpertOptions(){var{t}=useTranslation("components");return(0,jsx_runtime.jsx)(DropButton.E,{a11yTitle:t("TaskArea.Tasks.ExpertOptions.label"),dropAlign:{top:"bottom",right:"right"},dropContent:(0,jsx_runtime.jsx)(Box.a,{pad:"small",children:(0,jsx_runtime.jsx)(DemoModeToggle_DemoModeToggleConnector,{})}),icon:(0,jsx_runtime.jsx)(SettingsOption.Z,{size:"small"}),plain:!0})};var ExpertOptionsContainer_DEFAULT_HANDLER=()=>{};function ExpertOptionsContainer(_ref){var _window,{storeDemoMode,setDemoMode=ExpertOptionsContainer_DEFAULT_HANDLER}=_ref,showDemoModeToggle=null===(_window=window)||void 0===_window||null===(_window=_window.location)||void 0===_window||null===(_window=_window.search)||void 0===_window?void 0:_window.includes("demo=true");return(0,react.useEffect)(()=>{showDemoModeToggle&&void 0===storeDemoMode&&setDemoMode(!0)},[storeDemoMode,setDemoMode]),showDemoModeToggle?(0,jsx_runtime.jsx)(ExpertOptions_ExpertOptions,{}):null}ExpertOptionsContainer.propTypes={setDemoMode:prop_types.func,storeDemoMode:prop_types.bool};const ExpertOptions_ExpertOptionsContainer=ExpertOptionsContainer;function ExpertOptionsConnector_storeMapper(classifierStore){var{demoMode,setDemoMode}=classifierStore.classifications;return{storeDemoMode:demoMode,setDemoMode}}const ExpertOptions_ExpertOptionsConnector=(0,mobxreact_esm.PA)(function ExpertOptionsConnector(){var{storeDemoMode,setDemoMode}=useStores(ExpertOptionsConnector_storeMapper);return(0,jsx_runtime.jsx)(ExpertOptions_ExpertOptionsContainer,{setDemoMode,storeDemoMode})});function TaskNavButtons_storeMapper(classifierStore){var _classifierStore$work;return{isSubjectGroupViewer:"subjectGroup"===(null===(_classifierStore$work=classifierStore.workflows)||void 0===_classifierStore$work||null===(_classifierStore$work=_classifierStore$work.active)||void 0===_classifierStore$work||null===(_classifierStore$work=_classifierStore$work.configuration)||void 0===_classifierStore$work?void 0:_classifierStore$work.subject_viewer)}}function TaskNavButtons(_ref){var{disabled=!1}=_ref,[saving,setSaving]=(0,react.useState)(!1),{isSubjectGroupViewer}=useStores(TaskNavButtons_storeMapper);return(0,jsx_runtime.jsxs)(Box.a,{direction:"row",justify:"center",children:[(0,jsx_runtime.jsx)(BackButton_BackButtonConnector,{}),(0,jsx_runtime.jsx)(NextButton_NextButtonConnector,{disabled}),isSubjectGroupViewer?(0,jsx_runtime.jsx)(SGVDoneAndTalkButton_SGVDoneAndTalkButtonConnector,{disabled:disabled||saving,setSaving}):(0,jsx_runtime.jsx)(DoneAndTalkButtonConnector,{disabled:disabled||saving,setSaving}),(0,jsx_runtime.jsx)(DoneButton_DoneButtonConnector,{disabled:disabled||saving,setSaving}),(0,jsx_runtime.jsx)(ExpertOptions_ExpertOptionsConnector,{})]})}TaskNavButtons.propTypes={disabled:prop_types.bool};const TaskNavButtons_TaskNavButtons=(0,mobxreact_esm.PA)(TaskNavButtons);var Tasks_console=__webpack_require__("../../node_modules/console-browserify/index.js");function Tasks(_ref){var{classification,demoMode=!1,disabled=!1,isComplete=!1,isThereTaskHelp=!1,loadingState=async_states_default().initialized,previousAnnotationValues=null,subjectReadyState,step}=_ref,{t}=useTranslation("components");switch(loadingState){case async_states_default().initialized:return null;case async_states_default().loading:return(0,jsx_runtime.jsx)(Paragraph.f,{children:t("TaskArea.Tasks.loading")});case async_states_default().error:return Tasks_console.error("There was an error loading the workflow steps and tasks."),(0,jsx_runtime.jsx)(Paragraph.f,{children:t("TaskArea.Tasks.error")});case async_states_default().success:var ready=subjectReadyState===async_states_default().success;return classification&&step?(0,jsx_runtime.jsxs)(Box.a,{as:"form",gap:"small",justify:"between",fill:!0,children:[step.tasks.map((task,index)=>(0,jsx_runtime.jsx)(components_Task_Task,{autoFocus:0===index,disabled:disabled||!ready,previousAnnotationValues,task},task.taskKey)),isThereTaskHelp&&(0,jsx_runtime.jsx)(TaskHelp_TaskHelp,{disabled,tasks:step.tasks}),(0,jsx_runtime.jsx)(TaskNavButtons_TaskNavButtons,{disabled:disabled||!ready||!isComplete}),demoMode&&(0,jsx_runtime.jsx)(Paragraph.f,{children:t("TaskArea.Tasks.demoMode")})]},classification.id):null;default:return null}}Tasks.propTypes={classification:(0,prop_types.shape)({id:prop_types.string}),demoMode:prop_types.bool,disabled:prop_types.bool,isComplete:prop_types.bool,isThereTaskHelp:prop_types.bool,loadingState:(0,prop_types.oneOf)(async_states_default().values),previousAnnotationValues:prop_types.object,subjectReadyState:(0,prop_types.oneOf)(async_states_default().values),step:(0,prop_types.shape)({tasks:prop_types.array})};const TasksConnector=withStores(Tasks,function TasksConnector_storeMapper(store){var isComplete,{classifications:{active:classification,demoMode},subjects:{active:subject},subjectViewer:{loadingState:subjectReadyState},workflows:{loadingState},workflowSteps:{active:step,isThereTaskHelp}}=store,latest=null==subject?void 0:subject.stepHistory.latest;return step&&latest&&(isComplete=step.isComplete(latest.annotations)),{classification,demoMode,isComplete,isThereTaskHelp,loadingState,step,subjectReadyState}});var StepNavigation_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"StepNavigation__StyledButton",componentId:"sc-ok9dw1-0"})(["&:first-of-type{margin:0 15px 0 0;padding:0;}&:last-of-type{margin:0;padding:0;}"]),StepNavigation_StyledRadioButtonGroup=(0,styled_components_browser_esm.default)(RadioButtonGroup.z).withConfig({displayName:"StepNavigation__StyledRadioButtonGroup",componentId:"sc-ok9dw1-1"})(["position:relative;flex-wrap:wrap;gap:20px 0;> label{> span{height:0;overflow:hidden;position:absolute;width:0;}> div{margin-right:15px;}}"]);function StepNavigation(_ref){var{className="",name="step-selectors",onChange=()=>!0,stepIndex=0,steps=[]}=_ref,{t}=useTranslation("components");if((null==steps?void 0:steps.length)>1){var nextStep=stepIndex+1,prevStep=stepIndex-1,options=steps.map((step,index)=>{var label=t("StepNavigation.go",{index:index+1}),value="step-".concat(index);return{id:"".concat(name,"-").concat(value),label,value}});return(0,jsx_runtime.jsxs)(Box.a,{align:"center",className,direction:"row",justify:"center",margin:{top:"medium"},children:[(0,jsx_runtime.jsx)(StepNavigation_StyledButton,{a11yTitle:t("StepNavigation.previous"),"data-index":prevStep,disabled:0===stepIndex,icon:(0,jsx_runtime.jsx)(FormPrevious.Q,{}),onClick:()=>onChange(prevStep),plain:!0}),(0,jsx_runtime.jsx)(StepNavigation_StyledRadioButtonGroup,{direction:"row",gap:"none",name,onChange:function onRadioChange(event){var[key,value]=event.target.value.split("-"),indexValue=parseInt(value);onChange(indexValue)},options,value:"step-".concat(stepIndex)}),(0,jsx_runtime.jsx)(StepNavigation_StyledButton,{a11yTitle:t("StepNavigation.next"),"data-index":nextStep,disabled:stepIndex===steps.length-1,icon:(0,jsx_runtime.jsx)(FormNext.O,{}),onClick:()=>onChange(nextStep),plain:!0})]})}return null}StepNavigation.propTypes={className:prop_types_default().string,name:prop_types_default().string,onChange:prop_types_default().func,stepIndex:prop_types_default().number,steps:prop_types_default().array};const StepNavigation_StepNavigation=StepNavigation;var StyledMarkdownWrapper=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"SlideTutorial__StyledMarkdownWrapper",componentId:"sc-zx5fnv-0"})(["> h1,h2{font-size:26px;line-height:31px;}> p{margin-top:10px;margin-bottom:10px;}"]);function SlideTutorial(_ref){var{activeStep=0,className="",projectDisplayName="",onClick=()=>!0,height,pad="medium",steps=[],stepWithMedium,strings={},width}=_ref,[stepIndex,setStepIndex]=(0,react.useState)(activeStep),{t}=useTranslation("components"),{medium,step}=stepWithMedium(stepIndex),isThereMedia=null==medium?void 0:medium.src,isLastStep=stepIndex===steps.length-1;return step?(0,jsx_runtime.jsxs)(Box.a,{className,height,justify:"between",pad,width,children:[(0,jsx_runtime.jsxs)(StyledMarkdownWrapper,{"aria-live":"polite",autoFocus:!0,height:"100%",overflow:{horizontal:"hidden",vertical:"auto"},children:[isThereMedia&&(0,jsx_runtime.jsx)(Media.A,{alt:t("SlideTutorial.alt",{activeStep:stepIndex}),fit:"contain",height:200,src:medium.src}),(0,jsx_runtime.jsx)(Markdownz.Ay,{children:strings["steps.".concat(stepIndex,".content")]})]}),(0,jsx_runtime.jsx)(StepNavigation_StepNavigation,{name:"TutorialStepNavigation",onChange:setStepIndex,stepIndex,steps}),isLastStep&&(0,jsx_runtime.jsx)(Button.$,{label:t("SlideTutorial.getStarted"),onClick,margin:{top:"medium"},primary:!0})]}):(0,jsx_runtime.jsx)(Box.a,{height:"100%",justify:"between",pad,children:(0,jsx_runtime.jsx)(Paragraph.f,{children:t("SlideTutorial.error")})})}var tutorialStep=prop_types_default().shape({content:prop_types_default().string,medium:prop_types_default().string});SlideTutorial.propTypes={activeStep:prop_types_default().number,className:prop_types_default().string,height:prop_types_default().string,projectDisplayName:prop_types_default().string,onClick:prop_types_default().func,steps:prop_types_default().arrayOf(tutorialStep),stepWithMedium:prop_types_default().func.isRequired,strings:prop_types_default().object,width:prop_types_default().string};const SlideTutorial_SlideTutorial=SlideTutorial;var SlideTutorialContainer_excluded=["locale","pad","projectDisplayName","tutorial"];function SlideTutorialContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function SlideTutorialContainer_defineProperty(e,r,t){return(r=function SlideTutorialContainer_toPropertyKey(t){var i=function SlideTutorialContainer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var defaultTutorial={activeStep:0,steps:[]};function SlideTutorialContainer(_ref){var{locale,pad="medium",projectDisplayName="",tutorial=defaultTutorial}=_ref,props=function SlideTutorialContainer_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function SlideTutorialContainer_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,SlideTutorialContainer_excluded),tutorialTranslation=usePanoptesTranslations({translated_type:"tutorial",translated_id:null==tutorial?void 0:tutorial.id,language:locale}),size=(0,react.useContext)(ResponsiveContext.u),strings=null==tutorialTranslation?void 0:tutorialTranslation.strings,{activeStep,steps,stepWithMedium}=tutorial,height="small"===size?"100%":"73vh";return(0,jsx_runtime.jsx)(SlideTutorial_SlideTutorial,function SlideTutorialContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?SlideTutorialContainer_ownKeys(Object(t),!0).forEach(function(r){SlideTutorialContainer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):SlideTutorialContainer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({activeStep,height,pad,projectDisplayName,steps,stepWithMedium,strings},props))}SlideTutorialContainer.propTypes={locale:prop_types_default().string,projectDisplayName:prop_types_default().string,tutorial:prop_types_default().shape({activeStep:prop_types_default().number,steps:prop_types_default().array,stepWithMedium:prop_types_default().func.isRequired})};const SlideTutorial_SlideTutorialContainer=withStores(SlideTutorialContainer,function SlideTutorialContainer_storeMapper(classifierStore){var{locale,projects:{active:project},tutorials:{active:tutorial,activeStep,stepWithMedium}}=classifierStore,steps=null==tutorial?void 0:tutorial.steps;return{activeStep,locale,projectDisplayName:project.display_name,steps,stepWithMedium,tutorial}});var TaskContainer=styled_components_browser_esm.default.div.withConfig({displayName:"TaskArea__TaskContainer",componentId:"sc-1jnocm-0"})(["&[inert]{opacity:0.5;}"]);function TaskArea(_ref){var{alreadySeen,className,currentStepIndex=1,disableTutorialTab=!0,setActiveTutorial=()=>!0,retired,subject,totalSteps=1,tutorial=null,workflow={hasIndexedSubjects:!1}}=_ref,{t}=useTranslation("components"),[activeIndex,setActiveIndex]=(0,react.useState)(0),[disabled,setDisabled]=(0,react.useState)(!1),taskArea=(0,react.useRef)(null),finished=retired||alreadySeen;return taskArea.current&&(taskArea.current.inert=finished&&disabled),(0,react.useEffect)(function onSubjectChange(){setDisabled(finished&&workflow.hasIndexedSubjects)},[alreadySeen,subject,retired]),(0,react.useEffect)(function onWorkflowChange(){setActiveIndex(0)},[workflow]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(DisabledTaskPopupConnector,{isOpen:disabled,onClose:function enableTasks(){setDisabled(!1)}}),(0,jsx_runtime.jsx)(TaskContainer,{"aria-label":"Task area: Step ".concat(currentStepIndex," of ").concat(totalSteps),className:"classifier-task-area",ref:taskArea,role:"region",tabIndex:-1,children:(0,jsx_runtime.jsxs)(Tabs_Tabs,{activeIndex,className,onActive:function onTabClick(newIndex){1===newIndex&&setActiveTutorial(tutorial.id),0===newIndex&&setActiveTutorial(),setActiveIndex(newIndex)},flex:!0,children:[(0,jsx_runtime.jsx)(esm_Tab_Tab,{title:t("TaskArea.task"),children:(0,jsx_runtime.jsx)(Box.a,{fill:!0,children:(0,jsx_runtime.jsx)(TasksConnector,{disabled})})}),(0,jsx_runtime.jsx)(esm_Tab_Tab,{disabled:disabled||disableTutorialTab,title:t("TaskArea.tutorial"),children:(0,jsx_runtime.jsx)(Box.a,{children:(0,jsx_runtime.jsx)(SlideTutorial_SlideTutorialContainer,{onClick:function onClose(){setActiveIndex(0),null==tutorial||tutorial.setSeenTime()},pad:"none"})})})]})})]})}TaskArea.propTypes={className:prop_types.string,currentStepIndex:prop_types.number,disableTutorialTab:prop_types.bool,setActiveTutorial:prop_types.func,subject:(0,prop_types.shape)({already_seen:prop_types.bool,id:prop_types.string,retired:prop_types.bool}),totalSteps:prop_types.number,workflow:(0,prop_types.shape)({hasIndexedSubjects:prop_types.bool})};const TaskAreaConnector=withStores(TaskArea,function TaskAreaConnector_storeMapper(store){var{subjects:{active:subject},tutorials:{disableTutorialTab,setActiveTutorial,tutorial},workflows:{active:workflow},workflowSteps:{active:step,steps}}=store,currentStepIndex=1,totalSteps=1;if(null!=step&&step.stepKey&&steps){var stepKeysArray=Array.from(steps.keys());currentStepIndex=stepKeysArray.indexOf(step.stepKey)+1,totalSteps=stepKeysArray.length}return{alreadySeen:null==subject?void 0:subject.alreadySeen,currentStepIndex,disableTutorialTab,setActiveTutorial,retired:null==subject?void 0:subject.retired,subject,totalSteps,tutorial,workflow}});function HelpIcon_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function HelpIcon_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?HelpIcon_ownKeys(Object(t),!0).forEach(function(r){HelpIcon_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):HelpIcon_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function HelpIcon_defineProperty(e,r,t){return(r=function HelpIcon_toPropertyKey(t){var i=function HelpIcon_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const FieldGuideButton_HelpIcon=function HelpIcon(props){return(0,jsx_runtime.jsx)("svg",HelpIcon_objectSpread(HelpIcon_objectSpread({viewBox:"0 0 32 32"},props),{},{children:(0,jsx_runtime.jsx)("path",{d:"M16 0c-8.836 0-16 7.163-16 16s7.163 16 16 16c8.837 0 16.001-7.163 16.001-16s-7.163-16-16.001-16zM16 30.032c-7.72 0-14-6.312-14-14.032s6.28-14 14-14 14.001 6.28 14.001 14-6.281 14.032-14.001 14.032zM14.53 25.015h2.516v-2.539h-2.516zM15.97 6.985c-1.465 0-2.672 0.395-3.62 1.184s-1.409 2.37-1.386 3.68l0.037 0.073h2.295c0-0.781 0.261-1.904 0.781-2.308s1.152-0.604 1.893-0.604c0.854 0 1.511 0.232 1.971 0.696s0.689 1.127 0.689 1.989c0 0.725-0.17 1.343-0.512 1.855-0.343 0.512-0.916 1.245-1.721 2.198-0.831 0.749-1.344 1.351-1.538 1.806s-0.297 1.274-0.305 2.454h2.405c0-0.74 0.047-1.285 0.14-1.636s0.36-0.744 0.799-1.184c0.945-0.911 1.703-1.802 2.277-2.674 0.573-0.87 0.86-1.831 0.86-2.881 0-1.465-0.443-2.607-1.331-3.424s-2.134-1.226-3.736-1.226z"})}))};var LabelBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"FieldGuideButton__LabelBox",componentId:"sc-1dujtl3-0"})(["display:flex;flex-direction:column;align-items:center;gap:8px;@container (min-width:4.5rem){flex-direction:row-reverse;justify-content:center;}"]),StyledHelpIcon=(0,styled_components_browser_esm.default)(FieldGuideButton_HelpIcon).withConfig({displayName:"FieldGuideButton__StyledHelpIcon",componentId:"sc-1dujtl3-1"})(["width:min(50%,1.2rem);@container (min-width:4.5rem){width:1.2rem;}"]),FieldGuideButton_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FieldGuideButton__StyledButton",componentId:"sc-1dujtl3-2"})(["container-type:inline-size;width:100%;",""],props=>props.theme&&(0,styled_components_browser_esm.css)(["background:",";padding:clamp(8px,15%,10px);&:hover,&:focus{background:",";}&:disabled{&:hover,&:focus{background:",";}}"],props.theme.global.colors.brand,(0,polished_esm.uq)(.5,props.theme.global.colors.brand),props.theme.global.colors.brand)),StyledSpacedText=(0,styled_components_browser_esm.default)(SpacedText.A).withConfig({displayName:"FieldGuideButton__StyledSpacedText",componentId:"sc-1dujtl3-3"})(["line-height:1.2;font-size:0.75rem;@container (min-width:4.5rem){font-size:0.875rem;}"]);function ButtonLabel(){var{t}=useTranslation("components");return(0,jsx_runtime.jsxs)(LabelBox,{as:"span",children:[(0,jsx_runtime.jsx)(StyledSpacedText,{color:"white",textAlign:"center",children:t("FieldGuide.FieldGuideButton.buttonLabel")}),(0,jsx_runtime.jsx)(StyledHelpIcon,{fill:"white"})]})}var FieldGuideButton_DEFAULT_HANDLER=()=>{};function FieldGuideButton(_ref){var{fieldGuide=null,onClick=FieldGuideButton_DEFAULT_HANDLER}=_ref,disabled=!fieldGuide||0===fieldGuide.items.length;return(0,jsx_runtime.jsx)(FieldGuideButton_StyledButton,{label:(0,jsx_runtime.jsx)(ButtonLabel,{}),disabled,onClick,plain:!0})}FieldGuideButton.propTypes={fieldGuide:prop_types_default().object,onClick:prop_types_default().func.isRequired};const FieldGuideButton_FieldGuideButton=FieldGuideButton;var lib_grommet_theme_src=__webpack_require__("../lib-grommet-theme/src/index.js"),FieldGuideItemIcon_excluded=["alt","className","height","icon","width"];function FieldGuideItemIcon(_ref){var{alt="",className="",height=100,icon=null,width=100}=_ref,placeholder=(function FieldGuideItemIcon_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function FieldGuideItemIcon_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,FieldGuideItemIcon_excluded),(0,jsx_runtime.jsx)(Box.a,{background:lib_grommet_theme_src.A.global.colors["accent-1"],className,height:"".concat(height,"px"),width:"".concat(width,"px")}));return icon&&Object.keys(icon).length>0?(0,jsx_runtime.jsx)(Media.A,{alt,className,fit:"contain",height,placeholder,src:icon.src,width}):placeholder}FieldGuideItemIcon.propTypes={alt:prop_types_default().string,className:prop_types_default().string,height:prop_types_default().number,icon:prop_types_default().object,width:prop_types_default().number};var defaultIcons=mobx_esm.sH.map();function AnchorLabel(_ref){var{className="",icons=defaultIcons,item,title}=_ref,icon=icons.get(item.icon);return(0,jsx_runtime.jsxs)(Box.a,{align:"center",className,direction:"column",children:[(0,jsx_runtime.jsx)(FieldGuideItemIcon,{alt:title,height:100,icon,width:100}),(0,jsx_runtime.jsx)(Text.E,{margin:{vertical:"15px"},children:title})]})}function FieldGuideItemAnchor(_ref2){var{className="",icons=defaultIcons,item,itemIndex,onClick,title}=_ref2,selectItem=(0,react.useCallback)(function(event){onClick(itemIndex),event.preventDefault()},[itemIndex,onClick]),label=(0,jsx_runtime.jsx)(AnchorLabel,{icons,item,title});return(0,jsx_runtime.jsx)(Anchor.M,{className,color:{light:"dark-5",dark:"light-3"},href:"#field-guide-item-".concat(itemIndex),label,onClick:selectItem})}FieldGuideItemAnchor.propTypes={className:prop_types.string,icons:mobxreact_esm.By.observableMap,item:prop_types.object.isRequired,label:prop_types.string};const FieldGuideItemAnchor_FieldGuideItemAnchor=FieldGuideItemAnchor;function FieldGuideItems(_ref){var{icons,items,onChange,strings}=_ref;return(0,jsx_runtime.jsx)(Grid_Grid.x,{columns:{count:"fill",size:"100px"},gap:"medium",pad:{top:"medium"},rows:"150px",width:"100%",children:items.map((item,index)=>(0,jsx_runtime.jsx)(FieldGuideItemAnchor_FieldGuideItemAnchor,{className:"item",icons,item,itemIndex:index,onClick:onChange,title:strings["items.".concat(index,".title")]},item.title))})}FieldGuideItems.propTypes={items:(0,prop_types.arrayOf)(prop_types.object).isRequired};const FieldGuideItems_FieldGuideItems=FieldGuideItems;var FieldGuideItem_StyledButton=(0,styled_components_browser_esm.default)(Button.$).withConfig({displayName:"FieldGuideItem__StyledButton",componentId:"sc-4518c8-0"})(["padding:0;",""],props=>props.theme.dark?(0,styled_components_browser_esm.css)(["&:hover > svg,&:focus > svg{fill:",";stroke:",";}"],props.theme.global.colors["light-2"],props.theme.global.colors["light-2"]):(0,styled_components_browser_esm.css)(["&:hover > svg,&:focus > svg{fill:",";stroke:",";}"],props.theme.global.colors["dark-5"],props.theme.global.colors["dark-5"])),StickyTitle=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"FieldGuideItem__StickyTitle",componentId:"sc-4518c8-1"})(["position:sticky;top:-1px;z-index:999;"]),markdownTitleComponent={h3:nodeProps=>(0,jsx_runtime.jsx)(SpacedHeading.A,{level:3,margin:"none",children:nodeProps.children})},markdownComponents={h1:nodeProps=>(0,jsx_runtime.jsx)(SpacedHeading.A,{level:1,children:nodeProps.children}),h2:nodeProps=>(0,jsx_runtime.jsx)(SpacedHeading.A,{level:2,children:nodeProps.children}),h3:nodeProps=>(0,jsx_runtime.jsx)(SpacedHeading.A,{level:3,children:nodeProps.children}),h4:nodeProps=>(0,jsx_runtime.jsx)(SpacedHeading.A,{level:4,children:nodeProps.children}),h5:nodeProps=>(0,jsx_runtime.jsx)(SpacedHeading.A,{level:5,children:nodeProps.children}),h6:nodeProps=>(0,jsx_runtime.jsx)(SpacedHeading.A,{level:6,children:nodeProps.children}),p:nodeProps=>(0,jsx_runtime.jsx)(Paragraph.f,{margin:{bottom:"none",top:"xxsmall"},children:nodeProps.children})},FieldGuideItem_defaultIcons=mobx_esm.sH.map();function FieldGuideItem(_ref){var{className="",content="",icons=FieldGuideItem_defaultIcons,id,item,setActiveItemIndex,theme,title=""}=_ref,icon=icons.get(item.icon),{t}=useTranslation("components");return(0,jsx_runtime.jsxs)(Box.a,{id,className:"item-content ".concat(className),style:{cursor:"default"},children:[(0,jsx_runtime.jsxs)(StickyTitle,{align:"center",border:{color:"light-5",side:"bottom"},direction:"row",pad:{bottom:"xsmall",top:"medium"},background:theme.dark?"dark-5":"white",children:[(0,jsx_runtime.jsx)(FieldGuideItem_StyledButton,{a11yTitle:t("FieldGuide.FieldGuideItem.ariaTitle"),icon:(0,jsx_runtime.jsx)(FormPrevious.Q,{color:"light-5"}),margin:{right:"small"},onClick:()=>setActiveItemIndex(),plain:!0}),(0,jsx_runtime.jsx)(Markdownz.Ay,{components:markdownTitleComponent,children:"### ".concat(title)})]}),(0,jsx_runtime.jsx)(Box.a,{align:"center",pad:{top:"small",bottom:"35px"},children:(0,jsx_runtime.jsx)(FieldGuideItemIcon,{icon,height:140,width:140})}),(0,jsx_runtime.jsx)(Markdownz.Ay,{components:markdownComponents,children:content})]})}FieldGuideItem.propTypes={className:prop_types_default().string,content:prop_types_default().string,icons:mobxreact_esm.By.observableMap,id:prop_types_default().string,item:prop_types_default().object.isRequired,setActiveItemIndex:prop_types_default().func.isRequired,strings:prop_types_default().string,theme:prop_types_default().object,title:prop_types_default().string};const FieldGuideItem_FieldGuideItem=(0,styled_components_browser_esm.withTheme)(FieldGuideItem);function FieldGuide_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function FieldGuide_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FieldGuide_ownKeys(Object(t),!0).forEach(function(r){FieldGuide_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FieldGuide_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function FieldGuide_defineProperty(e,r,t){return(r=function FieldGuide_toPropertyKey(t){var i=function FieldGuide_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var AutoMinHeight=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"FieldGuide__AutoMinHeight",componentId:"sc-15zohvg-0"})(["min-height:auto;"]),FieldGuide_defaultIcons=mobx_esm.sH.map();function FieldGuide_FieldGuide_FieldGuide(_ref){var{className="",fieldGuide,icons=FieldGuide_defaultIcons,modalComponent,modalProps,strings={}}=_ref,[activeItemIndex,setActiveItemIndex]=(0,react.useState)(-1),items=(null==fieldGuide?void 0:fieldGuide.items)||[],item=items[activeItemIndex],title=strings["items.".concat(activeItemIndex,".title")],content=strings["items.".concat(activeItemIndex,".content")],ModalComponent=modalComponent,id=activeItemIndex?"field-guide-item-".concat(activeItemIndex):"field-guide-menu";return(0,jsx_runtime.jsx)(ModalComponent,FieldGuide_objectSpread(FieldGuide_objectSpread({},modalProps),{},{children:(0,jsx_runtime.jsx)(AutoMinHeight,{className,pad:{left:"medium",right:"medium",bottom:"medium",top:"0"},children:item?(0,jsx_runtime.jsx)(FieldGuideItem_FieldGuideItem,{id,icons,item,setActiveItemIndex,content,title}):(0,jsx_runtime.jsx)(FieldGuideItems_FieldGuideItems,{id,icons,items,onChange:setActiveItemIndex,strings})})}))}FieldGuide_FieldGuide_FieldGuide.propTypes={activeItemIndex:prop_types_default().number,className:prop_types_default().string,fieldGuide:prop_types_default().object.isRequired,icons:mobxreact_esm.By.observableMap,modalComponent:prop_types_default().object.isRequired,modalProps:prop_types_default().object.isRequired,onClose:prop_types_default().func,size:prop_types_default().string,strings:prop_types_default().object};const components_FieldGuide_FieldGuide=FieldGuide_FieldGuide_FieldGuide;var FieldGuideContainer_excluded=["onClose","size"];function FieldGuideContainer_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function FieldGuideContainer_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FieldGuideContainer_ownKeys(Object(t),!0).forEach(function(r){FieldGuideContainer_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FieldGuideContainer_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function FieldGuideContainer_defineProperty(e,r,t){return(r=function FieldGuideContainer_toPropertyKey(t){var i=function FieldGuideContainer_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FieldGuideContainer(_ref){var{onClose=()=>!0,size="large"}=_ref,rest=function FieldGuideContainer_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function FieldGuideContainer_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,FieldGuideContainer_excluded),{t}=useTranslation("components"),modalComponent="small"===size?Modal.A:MovableModal_MovableModal,[height,setHeight]=(0,react.useState)(415);var modalProps={active:!0,closeFn:onClose,modal:!1,pad:"0",position:"right",title:t("FieldGuide.title")},rndProps={cancel:"button, a.item, div.item-content",default:{height,x:-550,y:-237.5},minHeight:415,minWidth:550,onResize:function onResize(e,direction,ref,delta,position){"auto"!==height&&modalComponent===MovableModal_MovableModal&&setHeight("auto")}},modalPropsToUse="small"===size?modalProps:FieldGuideContainer_objectSpread(FieldGuideContainer_objectSpread({},modalProps),{},{rndProps});return(0,jsx_runtime.jsx)(components_FieldGuide_FieldGuide,FieldGuideContainer_objectSpread({modalComponent,modalProps:modalPropsToUse},rest))}FieldGuideContainer.propTypes={onClose:prop_types_default().func,size:prop_types_default().string};const FieldGuide_FieldGuideContainer=FieldGuideContainer;var FieldGuideWrapper_excluded=["fieldGuide","locale"];function FieldGuideWrapper_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function FieldGuideWrapper_defineProperty(e,r,t){return(r=function FieldGuideWrapper_toPropertyKey(t){var i=function FieldGuideWrapper_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function FieldGuideWrapper(_ref){var{fieldGuide=null,locale}=_ref,props=function FieldGuideWrapper_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function FieldGuideWrapper_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,FieldGuideWrapper_excluded),[showModal,setModalVisibility]=(0,react.useState)(!1),translation=usePanoptesTranslations({translated_type:"field_guide",translated_id:null==fieldGuide?void 0:fieldGuide.id,language:locale}),strings=null==translation?void 0:translation.strings;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(FieldGuideButton_FieldGuideButton,{fieldGuide,onClick:()=>setModalVisibility(!0)}),showModal&&(0,jsx_runtime.jsx)(ResponsiveContext.u.Consumer,{children:size=>(0,jsx_runtime.jsx)(FieldGuide_FieldGuideContainer,function FieldGuideWrapper_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?FieldGuideWrapper_ownKeys(Object(t),!0).forEach(function(r){FieldGuideWrapper_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):FieldGuideWrapper_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({fieldGuide,onClose:()=>setModalVisibility(!1),size,strings},props))})]})}FieldGuideWrapper.propTypes={fieldGuide:prop_types_default().object,icons:mobxreact_esm.By.observableMap,locale:prop_types_default().string};const FieldGuideConnector=withStores(FieldGuideWrapper,function FieldGuideConnector_storeMapper(classifierStore){var{locale,fieldGuide:{active:fieldGuide,attachedMedia:icons}}=classifierStore;return{locale,fieldGuide,icons}});function ImageToolbar_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ImageToolbar_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ImageToolbar_ownKeys(Object(t),!0).forEach(function(r){ImageToolbar_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ImageToolbar_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ImageToolbar_defineProperty(e,r,t){return(r=function ImageToolbar_toPropertyKey(t){var i=function ImageToolbar_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ImageToolbar_storeMapper(classifierStore){return{hasAnnotateTask:classifierStore.subjectViewer.hasAnnotateTask,rotation:classifierStore.subjectViewer.rotation}}const ImageToolbar_ImageToolbar=(0,mobxreact_esm.PA)(function ImageToolbar(props){var{hasAnnotateTask,rotation}=useStores(ImageToolbar_storeMapper),{onKeyZoom}=useKeyZoom({rotation});return(0,jsx_runtime.jsxs)(Box.a,ImageToolbar_objectSpread(ImageToolbar_objectSpread({height:"min-content",onKeyDown:onKeyZoom},props),{},{children:[(0,jsx_runtime.jsxs)(Box.a,{background:{dark:"dark-3",light:"white"},border:{color:{dark:"dark-1",light:"light-3"},side:"all"},direction:"column",fill:!0,pad:"clamp(8px, 15%, 10px)",gap:"2px",children:[hasAnnotateTask&&(0,jsx_runtime.jsx)(AnnotateButton_AnnotateButtonContainer,{}),(0,jsx_runtime.jsx)(MoveButton_MoveButtonContainer,{}),(0,jsx_runtime.jsx)(ZoomInButton_ZoomInButtonContainer,{}),(0,jsx_runtime.jsx)(ZoomOutButton_ZoomOutButtonContainer,{}),(0,jsx_runtime.jsx)(RotateButton_RotateButtonContainer,{}),(0,jsx_runtime.jsx)(FullscreenButton_FullscreenButtonContainer,{show:!1}),(0,jsx_runtime.jsx)(ResetButton_ResetButtonContainer,{}),(0,jsx_runtime.jsx)(InvertButton_InvertButtonContainer,{})]}),(0,jsx_runtime.jsx)(FieldGuideConnector,{})]}))});var ViewerGrid=(0,styled_components_browser_esm.default)(Grid_Grid.x).withConfig({displayName:"StyledContainers__ViewerGrid",componentId:"sc-vstnx3-0"})(["grid-area:viewer;grid-template-columns:auto clamp(3rem,10%,4.5rem);grid-template-rows:auto;grid-template-areas:'subject toolbar';"]),StyledSubjectContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"StyledContainers__StyledSubjectContainer",componentId:"sc-vstnx3-1"})(["grid-area:subject;height:fit-content;",""],props=>props.hasSurveyTask?(0,styled_components_browser_esm.css)(["@media screen and (min-width:70rem){position:sticky;top:10px;}"]):(0,styled_components_browser_esm.css)(["@media screen and (min-width:769px){position:sticky;top:10px;}"])),StyledImageToolbarContainer=styled_components_browser_esm.default.div.withConfig({displayName:"StyledContainers__StyledImageToolbarContainer",componentId:"sc-vstnx3-2"})(["grid-area:toolbar;"]),StyledImageToolbar=(0,styled_components_browser_esm.default)(ImageToolbar_ImageToolbar).withConfig({displayName:"StyledContainers__StyledImageToolbar",componentId:"sc-vstnx3-3"})(["position:sticky;top:10px;"]),StyledTaskAreaContainer=styled_components_browser_esm.default.div.withConfig({displayName:"StyledContainers__StyledTaskAreaContainer",componentId:"sc-vstnx3-4"})(["grid-area:task;"]),StyledTaskArea=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"StyledContainers__StyledTaskArea",componentId:"sc-vstnx3-5"})(["",""],props=>props.hasSurveyTask?(0,styled_components_browser_esm.css)(["@media screen and (min-width:70rem){position:sticky;top:10px;}"]):(0,styled_components_browser_esm.css)(["@media screen and (min-width:769px){position:sticky;top:10px;}"])),CenteredLayout_Relative=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"CenteredLayout__Relative",componentId:"sc-1b2c7i0-0"})(["position:relative;"]),ContainerBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"CenteredLayout__ContainerBox",componentId:"sc-1b2c7i0-1"})(["display:flex;flex-direction:row;gap:20px;justify-content:center;"," @media screen and (max-width:768px){flex-direction:column;}"],props=>props.hasSurveyTask&&(0,styled_components_browser_esm.css)(["@media screen and (min-width:769px) and (max-width:70rem){flex-direction:column;}"])),CenteredLayout_ViewerGrid=(0,styled_components_browser_esm.default)(Grid_Grid.x).withConfig({displayName:"CenteredLayout__ViewerGrid",componentId:"sc-1b2c7i0-2"})(["grid-area:viewer;grid-template-columns:auto;grid-template-rows:auto;grid-template-areas:'subject toolbar';"]),CenteredLayout_StyledImageToolbarContainer=styled_components_browser_esm.default.div.withConfig({displayName:"CenteredLayout__StyledImageToolbarContainer",componentId:"sc-1b2c7i0-3"})(["min-width:3rem;width:3rem;"]),StickyTaskArea=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"CenteredLayout__StickyTaskArea",componentId:"sc-1b2c7i0-4"})(["height:fit-content;position:sticky;top:10px;min-width:",";width:",";"," @media screen and (max-width:768px){min-width:auto;position:static;width:100%;}"],props=>props.hasSurveyTask?"33.75rem":"auto",props=>props.hasSurveyTask?"33.75rem":"25rem",props=>props.hasSurveyTask&&(0,styled_components_browser_esm.css)(["@media screen and (min-width:769px) and (max-width:70rem){position:static;width:100%;}"]));function CenteredLayout(_ref){var{separateFramesView=!1,hasSurveyTask=!1}=_ref;return(0,jsx_runtime.jsxs)(CenteredLayout_Relative,{children:[(0,jsx_runtime.jsxs)(ContainerBox,{hasSurveyTask,children:[(0,jsx_runtime.jsxs)(CenteredLayout_ViewerGrid,{forwardedAs:"section",children:[(0,jsx_runtime.jsxs)(StyledSubjectContainer,{hasSurveyTask,children:[(0,jsx_runtime.jsx)(Banners_Banners,{}),(0,jsx_runtime.jsx)(components_SubjectViewer_SubjectViewer,{}),(0,jsx_runtime.jsx)(MetaTools_MetaTools,{})]}),!separateFramesView&&(0,jsx_runtime.jsx)(CenteredLayout_StyledImageToolbarContainer,{children:(0,jsx_runtime.jsx)(StyledImageToolbar,{})})]}),(0,jsx_runtime.jsxs)(StickyTaskArea,{hasSurveyTask,children:[(0,jsx_runtime.jsx)(TaskAreaConnector,{}),separateFramesView&&(0,jsx_runtime.jsx)(FieldGuideConnector,{})]})]}),(0,jsx_runtime.jsx)(Feedback_FeedbackModal,{}),(0,jsx_runtime.jsx)(QuickTalk_QuickTalkContainer,{})]})}var GeoMapLayout_Relative=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"GeoMapLayout__Relative",componentId:"sc-1rgtuqb-0"})(["position:relative;"]),GeoMapLayout_ContainerBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"GeoMapLayout__ContainerBox",componentId:"sc-1rgtuqb-1"})(["display:flex;flex-direction:row;gap:20px;@media screen and (max-width:768px){flex-direction:column;}"]),GeoMapSubjectContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"GeoMapLayout__GeoMapSubjectContainer",componentId:"sc-1rgtuqb-2"})(["height:100%;width:100%;"]),GeoMapLayout_GeoMapViewerContainer=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"GeoMapLayout__GeoMapViewerContainer",componentId:"sc-1rgtuqb-3"})(["height:600px;width:100%;@media screen and (max-width:768px){height:400px;}"]),GeoMapLayout_StickyTaskArea=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"GeoMapLayout__StickyTaskArea",componentId:"sc-1rgtuqb-4"})(["height:fit-content;min-width:auto;position:sticky;top:10px;width:20rem;@media screen and (max-width:768px){min-width:auto;position:static;width:100%;}"]);function GeoMapLayout(){return(0,jsx_runtime.jsxs)(GeoMapLayout_Relative,{children:[(0,jsx_runtime.jsxs)(GeoMapLayout_ContainerBox,{children:[(0,jsx_runtime.jsxs)(GeoMapSubjectContainer,{forwardedAs:"section",children:[(0,jsx_runtime.jsx)(Banners_Banners,{}),(0,jsx_runtime.jsx)(GeoMapLayout_GeoMapViewerContainer,{children:(0,jsx_runtime.jsx)(components_SubjectViewer_SubjectViewer,{})}),(0,jsx_runtime.jsx)(MetaTools_MetaTools,{})]}),(0,jsx_runtime.jsxs)(GeoMapLayout_StickyTaskArea,{children:[(0,jsx_runtime.jsx)(TaskAreaConnector,{}),(0,jsx_runtime.jsx)(FieldGuideConnector,{})]})]}),(0,jsx_runtime.jsx)(Feedback_FeedbackModal,{}),(0,jsx_runtime.jsx)(QuickTalk_QuickTalkContainer,{})]})}var ContainerGrid=(0,styled_components_browser_esm.default)(Grid_Grid.x).withConfig({displayName:"MaxWidth__ContainerGrid",componentId:"sc-hhqfbx-0"})(["position:relative;grid-gap:1.875rem;grid-template-areas:'viewer task';grid-template-columns:minmax(auto,100rem) ",";margin:auto;"," @media screen and (max-width:768px){grid-gap:1.25rem;grid-template-areas:'viewer' 'task';grid-template-columns:100%;grid-template-rows:auto auto;margin:0;}"],props=>props.hasSurveyTask?"33.75rem":"25rem",props=>props.hasSurveyTask?(0,styled_components_browser_esm.css)(["@media screen and (min-width:769px) and (max-width:70rem){grid-gap:1.25rem;grid-template-areas:'viewer' 'task';grid-template-columns:100%;grid-template-rows:auto auto;margin:0;}"]):(0,styled_components_browser_esm.css)(["@media screen and (min-width:769px) and (max-width:70rem){grid-gap:1.25rem;grid-template-areas:'viewer task';grid-template-columns:9fr 5fr;}"]));function MaxWidth(_ref){var{className="",separateFramesView=!1,hasSurveyTask=!1}=_ref;return(0,jsx_runtime.jsxs)(ContainerGrid,{className,hasSurveyTask,children:[separateFramesView?(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(Banners_Banners,{}),(0,jsx_runtime.jsx)(components_SubjectViewer_SubjectViewer,{}),(0,jsx_runtime.jsx)(MetaTools_MetaTools,{})]}):(0,jsx_runtime.jsxs)(ViewerGrid,{forwardedAs:"section",children:[(0,jsx_runtime.jsxs)(StyledSubjectContainer,{hasSurveyTask,children:[(0,jsx_runtime.jsx)(Banners_Banners,{}),(0,jsx_runtime.jsx)(components_SubjectViewer_SubjectViewer,{}),(0,jsx_runtime.jsx)(MetaTools_MetaTools,{})]}),(0,jsx_runtime.jsx)(StyledImageToolbarContainer,{children:(0,jsx_runtime.jsx)(StyledImageToolbar,{})})]}),(0,jsx_runtime.jsx)(StyledTaskAreaContainer,{children:(0,jsx_runtime.jsxs)(StyledTaskArea,{hasSurveyTask,children:[(0,jsx_runtime.jsx)(TaskAreaConnector,{}),separateFramesView&&(0,jsx_runtime.jsx)(FieldGuideConnector,{})]})}),(0,jsx_runtime.jsx)(Feedback_FeedbackModal,{}),(0,jsx_runtime.jsx)(QuickTalk_QuickTalkContainer,{})]})}var NoMaxWidth_ContainerGrid=(0,styled_components_browser_esm.default)(Grid_Grid.x).withConfig({displayName:"NoMaxWidth__ContainerGrid",componentId:"sc-1tq37qa-0"})(["position:relative;grid-gap:1.875rem;grid-template-areas:'viewer task';grid-template-columns:auto ",";"," @media screen and (max-width:768px){grid-gap:1.25rem;grid-template-areas:'viewer' 'task';grid-template-columns:100%;grid-template-rows:auto auto;margin:0;}"],props=>props.hasSurveyTask?"33.75rem":"25rem",props=>props.hasSurveyTask?(0,styled_components_browser_esm.css)(["@media screen and (min-width:769px) and (max-width:70rem){grid-gap:1.25rem;grid-template-areas:'viewer' 'task';grid-template-columns:100%;grid-template-rows:auto auto;margin:0;}"]):(0,styled_components_browser_esm.css)(["@media screen and (min-width:769px) and (max-width:70rem){grid-gap:1.25rem;grid-template-areas:'viewer task';grid-template-columns:9fr 5fr;}"]));function NoMaxWidth(_ref){var{className="",separateFramesView=!1,hasSurveyTask=!1}=_ref;return(0,jsx_runtime.jsxs)(NoMaxWidth_ContainerGrid,{className,hasSurveyTask,children:[separateFramesView?(0,jsx_runtime.jsxs)(Box.a,{children:[(0,jsx_runtime.jsx)(Banners_Banners,{}),(0,jsx_runtime.jsx)(components_SubjectViewer_SubjectViewer,{}),(0,jsx_runtime.jsx)(MetaTools_MetaTools,{})]}):(0,jsx_runtime.jsxs)(ViewerGrid,{forwardedAs:"section",children:[(0,jsx_runtime.jsxs)(StyledSubjectContainer,{hasSurveyTask,children:[(0,jsx_runtime.jsx)(Banners_Banners,{}),(0,jsx_runtime.jsx)(components_SubjectViewer_SubjectViewer,{}),(0,jsx_runtime.jsx)(MetaTools_MetaTools,{})]}),(0,jsx_runtime.jsx)(StyledImageToolbarContainer,{children:(0,jsx_runtime.jsx)(StyledImageToolbar,{})})]}),(0,jsx_runtime.jsx)(StyledTaskAreaContainer,{children:(0,jsx_runtime.jsxs)(StyledTaskArea,{hasSurveyTask,children:[(0,jsx_runtime.jsx)(TaskAreaConnector,{}),separateFramesView&&(0,jsx_runtime.jsx)(FieldGuideConnector,{})]})}),(0,jsx_runtime.jsx)(Feedback_FeedbackModal,{}),(0,jsx_runtime.jsx)(QuickTalk_QuickTalkContainer,{})]})}var VolumetricLayout_Relative=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"VolumetricLayout__Relative",componentId:"sc-16906e5-0"})(["position:relative;"]),VolumetricLayout_ContainerBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"VolumetricLayout__ContainerBox",componentId:"sc-16906e5-1"})(["display:flex;flex-direction:row;gap:20px;justify-content:center;.metatools-centered{justify-content:center;}@media screen and (max-width:768px){flex-direction:column;}"]),ViewBox=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"VolumetricLayout__ViewBox",componentId:"sc-16906e5-2"})(["flex-direction:row;"]),VolumetricLayout_StickyTaskArea=(0,styled_components_browser_esm.default)(Box.a).withConfig({displayName:"VolumetricLayout__StickyTaskArea",componentId:"sc-16906e5-3"})(["height:fit-content;position:sticky;top:10px;min-width:auto;width:20rem;@media screen and (max-width:768px){min-width:auto;position:static;width:100%;}"]);function VolumetricLayout(){return(0,jsx_runtime.jsxs)(VolumetricLayout_Relative,{children:[(0,jsx_runtime.jsxs)(VolumetricLayout_ContainerBox,{children:[(0,jsx_runtime.jsx)(ViewBox,{forwardedAs:"section",children:(0,jsx_runtime.jsxs)(StyledSubjectContainer,{children:[(0,jsx_runtime.jsx)(Banners_Banners,{}),(0,jsx_runtime.jsx)(components_SubjectViewer_SubjectViewer,{}),(0,jsx_runtime.jsx)(MetaTools_MetaTools,{className:"metatools-centered"})]})}),(0,jsx_runtime.jsxs)(VolumetricLayout_StickyTaskArea,{children:[(0,jsx_runtime.jsx)(TaskAreaConnector,{}),(0,jsx_runtime.jsx)(FieldGuideConnector,{})]})]}),(0,jsx_runtime.jsx)(Feedback_FeedbackModal,{}),(0,jsx_runtime.jsx)(QuickTalk_QuickTalkContainer,{})]})}const Layout_components=MaxWidth;function Layout_storeMapper(classifierStore){var _classifierStore$proj,workflow=classifierStore.workflows.active,hasSurveyTask=null==workflow?void 0:workflow.hasSurveyTask,separateFramesView=classifierStore.subjectViewer.separateFramesView;return{hasSurveyTask,layout:null!==(_classifierStore$proj=classifierStore.projects)&&void 0!==_classifierStore$proj&&null!==(_classifierStore$proj=_classifierStore$proj.active)&&void 0!==_classifierStore$proj&&_classifierStore$proj.isVolumetricViewer?"volumetric":null==workflow?void 0:workflow.layout,separateFramesView}}const Layout_Layout=(0,mobxreact_esm.PA)(function Layout(){var{layout,separateFramesView,hasSurveyTask}=useStores(Layout_storeMapper),CurrentLayout=function getLayout(layout){return Layout_components_namespaceObject[layout]?Layout_components_namespaceObject[layout]:Layout_components}(layout);return(0,jsx_runtime.jsx)(CurrentLayout,{separateFramesView,hasSurveyTask})});var ModalTutorial_excluded=["hasNotSeenTutorialBefore","tutorial"];function ModalTutorial_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function ModalTutorial_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ModalTutorial_ownKeys(Object(t),!0).forEach(function(r){ModalTutorial_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ModalTutorial_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function ModalTutorial_defineProperty(e,r,t){return(r=function ModalTutorial_toPropertyKey(t){var i=function ModalTutorial_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ModalTutorial(_ref){var{hasNotSeenTutorialBefore=!1,tutorial}=_ref,props=function ModalTutorial_objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function ModalTutorial_objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,ModalTutorial_excluded),[active,setActive]=(0,react.useState)(!1),size=(0,react.useContext)(ResponsiveContext.u),{t}=useTranslation("components");function onClose(){setActive(!1),tutorial.setSeenTime()}(0,react.useEffect)(()=>{hasNotSeenTutorialBefore&&setActive(!0)},[hasNotSeenTutorialBefore]);var width="small"===size?"100%":"400px";return tutorial?(0,jsx_runtime.jsx)(Modal.A,ModalTutorial_objectSpread(ModalTutorial_objectSpread({},props),{},{active,closeFn:onClose,height:{max:"90%"},title:t("ModalTutorial.title"),children:(0,jsx_runtime.jsx)(SlideTutorial_SlideTutorialContainer,{onClick:onClose,pad:"none",width})})):null}ModalTutorial.propTypes={hasNotSeenTutorialBefore:prop_types_default().bool,tutorial:prop_types_default().object};const ModalTutorial_ModalTutorial=withStores(ModalTutorial,function ModalTutorial_storeMapper(classifierStore){var{active:tutorial}=classifierStore.tutorials;return{hasNotSeenTutorialBefore:null==tutorial?void 0:tutorial.hasNotBeenSeen,tutorial}});var Classifier_console=__webpack_require__("../../node_modules/console-browserify/index.js");function Classifier_ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function Classifier_objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Classifier_ownKeys(Object(t),!0).forEach(function(r){Classifier_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Classifier_ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Classifier_defineProperty(e,r,t){return(r=function Classifier_toPropertyKey(t){var i=function Classifier_toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Classifier(_ref){var _workflowSnapshot,{onError=()=>!0,showTutorial=!1,subjectID,subjectSetID,workflowSnapshot=null}=_ref,classifierStore=useStores(),{workflows}=classifierStore,workflowID=null===(_workflowSnapshot=workflowSnapshot)||void 0===_workflowSnapshot?void 0:_workflowSnapshot.id,workflowVersionChanged=!1;if(workflowSnapshot){var storedWorkflow=workflows.resources.get(workflowSnapshot.id);workflowVersionChanged=workflowSnapshot.version!==(null==storedWorkflow?void 0:storedWorkflow.version),workflowSnapshot=storedWorkflow?Classifier_objectSpread(Classifier_objectSpread({},(0,mobx_state_tree_module.dV)(storedWorkflow)),workflowSnapshot):workflowSnapshot,workflowVersionChanged&&(Classifier_console.log("Refreshing workflow snapshot",workflowSnapshot.id),workflows.setResources([workflowSnapshot]),classifierStore.startClassification())}var{selectWorkflow}=workflows;(0,react.useEffect)(function onURLChange(){workflowID&&(Classifier_console.log("starting new subject queue",{workflowID,subjectSetID,subjectID}),selectWorkflow(workflowID,subjectSetID,subjectID))},[selectWorkflow,subjectID,subjectSetID,workflowID]);try{return(0,jsx_runtime.jsxs)(react.StrictMode,{children:[(0,jsx_runtime.jsx)(Layout_Layout,{}),showTutorial&&(0,jsx_runtime.jsx)(ModalTutorial_ModalTutorial,{})]})}catch(error){onError(error,{package:"@zooniverse/classifier"})}return null}Classifier.propTypes={onError:prop_types.func,showTutorial:prop_types.bool,subjectSetID:prop_types.string,subjectID:prop_types.string,workflowSnapshot:(0,prop_types.shape)({id:prop_types.string,strings:prop_types.object,version:prop_types.string})};(0,mobxreact_esm.PA)(Classifier);__webpack_require__("../../node_modules/console-browserify/index.js");(function caesarClient(env){return"production"===env?new esm.l4("https://caesar.zooniverse.org/graphql"):new esm.l4("https://caesar-staging.zooniverse.org/graphql")})(src._K),src.bB,src.dt,src.EL;prop_types_default().bool,prop_types_default().object.isRequired,prop_types_default().bool,prop_types_default().string,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().func,prop_types_default().shape({id:prop_types_default().string.isRequired}).isRequired,prop_types_default().bool,prop_types_default().string,prop_types_default().string,prop_types_default().string},"../lib-classifier/dist/esm/translations sync recursive ^\\.\\/.*\\.json$"(module,__unused_webpack_exports,__webpack_require__){var map={"./ar/components.json":"../lib-classifier/dist/esm/translations/ar/components.json","./ar/plugins.json":"../lib-classifier/dist/esm/translations/ar/plugins.json","./bn/components.json":"../lib-classifier/dist/esm/translations/bn/components.json","./bn/plugins.json":"../lib-classifier/dist/esm/translations/bn/plugins.json","./cs/components.json":"../lib-classifier/dist/esm/translations/cs/components.json","./cs/plugins.json":"../lib-classifier/dist/esm/translations/cs/plugins.json","./da/components.json":"../lib-classifier/dist/esm/translations/da/components.json","./da/plugins.json":"../lib-classifier/dist/esm/translations/da/plugins.json","./de/components.json":"../lib-classifier/dist/esm/translations/de/components.json","./de/plugins.json":"../lib-classifier/dist/esm/translations/de/plugins.json","./el/components.json":"../lib-classifier/dist/esm/translations/el/components.json","./el/plugins.json":"../lib-classifier/dist/esm/translations/el/plugins.json","./en/components.json":"../lib-classifier/dist/esm/translations/en/components.json","./en/plugins.json":"../lib-classifier/dist/esm/translations/en/plugins.json","./es/components.json":"../lib-classifier/dist/esm/translations/es/components.json","./es/plugins.json":"../lib-classifier/dist/esm/translations/es/plugins.json","./fi/components.json":"../lib-classifier/dist/esm/translations/fi/components.json","./fi/plugins.json":"../lib-classifier/dist/esm/translations/fi/plugins.json","./fr/components.json":"../lib-classifier/dist/esm/translations/fr/components.json","./fr/plugins.json":"../lib-classifier/dist/esm/translations/fr/plugins.json","./ha/components.json":"../lib-classifier/dist/esm/translations/ha/components.json","./ha/plugins.json":"../lib-classifier/dist/esm/translations/ha/plugins.json","./he/components.json":"../lib-classifier/dist/esm/translations/he/components.json","./he/plugins.json":"../lib-classifier/dist/esm/translations/he/plugins.json","./hi/components.json":"../lib-classifier/dist/esm/translations/hi/components.json","./hi/plugins.json":"../lib-classifier/dist/esm/translations/hi/plugins.json","./hr/components.json":"../lib-classifier/dist/esm/translations/hr/components.json","./hr/plugins.json":"../lib-classifier/dist/esm/translations/hr/plugins.json","./hu/components.json":"../lib-classifier/dist/esm/translations/hu/components.json","./hu/plugins.json":"../lib-classifier/dist/esm/translations/hu/plugins.json","./hy/components.json":"../lib-classifier/dist/esm/translations/hy/components.json","./hy/plugins.json":"../lib-classifier/dist/esm/translations/hy/plugins.json","./id/components.json":"../lib-classifier/dist/esm/translations/id/components.json","./id/plugins.json":"../lib-classifier/dist/esm/translations/id/plugins.json","./it/components.json":"../lib-classifier/dist/esm/translations/it/components.json","./it/plugins.json":"../lib-classifier/dist/esm/translations/it/plugins.json","./ja/components.json":"../lib-classifier/dist/esm/translations/ja/components.json","./ja/plugins.json":"../lib-classifier/dist/esm/translations/ja/plugins.json","./kn/components.json":"../lib-classifier/dist/esm/translations/kn/components.json","./kn/plugins.json":"../lib-classifier/dist/esm/translations/kn/plugins.json","./ko/components.json":"../lib-classifier/dist/esm/translations/ko/components.json","./ko/plugins.json":"../lib-classifier/dist/esm/translations/ko/plugins.json","./mr/components.json":"../lib-classifier/dist/esm/translations/mr/components.json","./mr/plugins.json":"../lib-classifier/dist/esm/translations/mr/plugins.json","./nl/components.json":"../lib-classifier/dist/esm/translations/nl/components.json","./nl/plugins.json":"../lib-classifier/dist/esm/translations/nl/plugins.json","./pl/components.json":"../lib-classifier/dist/esm/translations/pl/components.json","./pl/plugins.json":"../lib-classifier/dist/esm/translations/pl/plugins.json","./pt/components.json":"../lib-classifier/dist/esm/translations/pt/components.json","./pt/plugins.json":"../lib-classifier/dist/esm/translations/pt/plugins.json","./ru/components.json":"../lib-classifier/dist/esm/translations/ru/components.json","./ru/plugins.json":"../lib-classifier/dist/esm/translations/ru/plugins.json","./sv/components.json":"../lib-classifier/dist/esm/translations/sv/components.json","./sv/plugins.json":"../lib-classifier/dist/esm/translations/sv/plugins.json","./sw/components.json":"../lib-classifier/dist/esm/translations/sw/components.json","./sw/plugins.json":"../lib-classifier/dist/esm/translations/sw/plugins.json","./te/components.json":"../lib-classifier/dist/esm/translations/te/components.json","./te/plugins.json":"../lib-classifier/dist/esm/translations/te/plugins.json","./test/components.json":"../lib-classifier/dist/esm/translations/test/components.json","./test/plugins.json":"../lib-classifier/dist/esm/translations/test/plugins.json","./tr/components.json":"../lib-classifier/dist/esm/translations/tr/components.json","./tr/plugins.json":"../lib-classifier/dist/esm/translations/tr/plugins.json","./uk/components.json":"../lib-classifier/dist/esm/translations/uk/components.json","./uk/plugins.json":"../lib-classifier/dist/esm/translations/uk/plugins.json","./ur/components.json":"../lib-classifier/dist/esm/translations/ur/components.json","./ur/plugins.json":"../lib-classifier/dist/esm/translations/ur/plugins.json","./ve/components.json":"../lib-classifier/dist/esm/translations/ve/components.json","./ve/plugins.json":"../lib-classifier/dist/esm/translations/ve/plugins.json","./vi/components.json":"../lib-classifier/dist/esm/translations/vi/components.json","./vi/plugins.json":"../lib-classifier/dist/esm/translations/vi/plugins.json","./zh-CN/components.json":"../lib-classifier/dist/esm/translations/zh-CN/components.json","./zh-CN/plugins.json":"../lib-classifier/dist/esm/translations/zh-CN/plugins.json","./zh-TW/components.json":"../lib-classifier/dist/esm/translations/zh-TW/components.json","./zh-TW/plugins.json":"../lib-classifier/dist/esm/translations/zh-TW/plugins.json"};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id="../lib-classifier/dist/esm/translations sync recursive ^\\.\\/.*\\.json$"},"../lib-classifier/dist/esm/translations/ar/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"    ","tooltipText":["              .","              ."]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"  "},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":"      / "},"RetiredBanner":{"bannerText":":    ","tooltipText":["            .","              ."]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":"","tooltipText":["       .","       ."]},"UserHasFinishedWorkflowBanner":{"bannerText":":    ","tooltipText":["                  .","              ."]},"WorkflowIsFinishedBanner":{"bannerText":"     ","tooltipText":["                  .","              ."]}},"DrawingTools":{"RotateHandle":"  / ."},"FeedbackModal":{"keepClassifying":"","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":" "},"FieldGuideItemAnchor":{"ariaTitle":" {{title}}"},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":""},"FullscreenButton":{"ariaLabel":{"actualSize":"   ","fullscreen":"    "}},"InvertButton":{"ariaLabel":" "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"   "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"  "},"ZoomOutButton":{"ariaLabel":"  "}},"MetaTools":{"CollectionsButton":{"add":"  "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":" "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":"  "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"  ","goToTalk":"     ","mainPanel":"  QuickTalk","openButton":"   {{count}}  .  .","panelContent":"  ","panelHeading":" "},"errors":{"failPostComment":"     .","failPostDiscussion":"     .","noBoard":"       .","noText":"    .","noUser":"   ."},"loginToPost":"   .","status":{"initialized":"    ","loading":"( )","success":"  !"},"subjectHasNoComments":"       ."},"SlideTutorial":{"StepNavigation":{"go":"   {{index}}","next":"   ","previous":"   "},"alt":"   {{activeStep}}","error":"    .","getStarted":" ","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":"   {{index}}","next":"   ","previous":"   "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"   "},"InteractionLayer":{"ConfirmModal":{"close":"  ","confirm":"      .","keepWorking":" "},"SaveButton":{"save":" "},"SubTaskPopup":{"notRender":"   .","required":"  ."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"  ","explanation":"      {{count}}       .","noAggregation":"  .","title":"  ","transcriptionsUnavailable":"   ."},"complete":"  ","transcribed":"  "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":"  "}},"ScatterPlotViewer":{"Selection":{"delete":"  {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"    ","switchToSeparateFrames":"    "}},"SingleVideoViewerContainer":{"error":"    ."},"VariableStarViewer":{"controls":" ","figCaption":" HR","flip":"","focus":"","highlight":"","imageTitle":" HR:    ","label":"  {{id}}","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"   ","fullscreen":"   ","openVolume":"   ","pause":"  ","play":" ","playbackSpeed":"   ","scrubber":" ","volumeSlider":"  "},"ZoomControlButton":{"disable":"  ","enable":"  "},"loading":"  ","zoomHelp":" CTRL +    "},"TaskArea":{"DisabledTaskPopup":{"body":"              .      .","options":{"dismiss":"","next":"  ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":" "},"DoneAndTalkButton":{"doneAndTalk":"   ","newTab":"  "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"     "},"demoMode":"     .          .","error":" ","loading":"( )","renderFallback":"   ."},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/ar/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                  ","closePoint":"        ","inactive":"   ","spliceDrag":"       ","splicePoint":"         "},"HighlighterTask":{"delete":"","noLabels":"    ","status":"{{count}}  "},"InputStatus":{"drawn":"  {{count}}","max":"  {{count}}  {{max}}  ","maxAndMin":"  {{count}}  {{min}}  {{max}}  ","min":"  {{count}}  {{min}} "},"LineControls":{"close":"","delete":"","deleteCancel":" ","deleteConfirm":" ","lineControls":"  ","move":"","redo":"","undo":""},"SimpleDropdownTask":{"customInputPlaceholder":" ","otherLabel":" ...","selectPlaceholder":" "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"  ","closeFilters":"  ","filter":"","removeFilter":"   {{valueLabel}}","showing":"  {{showing}}  {{total}}"},"Choice":{"cancel":"","identify":"","lessInfo":" ","moreInfo":" ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"    {{choiceLabel}}"},"ConfusedWith":{"cancel":"","confused":"   ","itsThis":" "},"DeleteButton":{"delete":"  {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":" "},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":"   ","editing":"  "}}')},"../lib-classifier/dist/esm/translations/bn/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"    ","tooltipText":["       ,        ","    ,              "]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"   ?"},"InProgressConfirmModal":{"cancel":" ","confirm":" ","inProgress":"         ?        "},"RetiredBanner":{"bannerText":":      ","tooltipText":["     ,         ","    ,              "]},"SubjectSetProgressBanner":{"alreadySeen":"  ","bannerText":"{{setName}}: {{number}}/{{total}}","finished":"","tooltipText":["        ","   -    "]},"UserHasFinishedWorkflowBanner":{"bannerText":":   ","tooltipText":["   -   ,           ","    ,              "]},"WorkflowIsFinishedBanner":{"bannerText":"   ","tooltipText":["     ,          ","  "]}},"DrawingTools":{"RotateHandle":"  /  "},"FeedbackModal":{"keepClassifying":"  ","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":"     "},"FieldGuideItemAnchor":{"ariaTitle":"{{title}}  "},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":""},"FullscreenButton":{"ariaLabel":{"actualSize":"   ","fullscreen":"    "}},"InvertButton":{"ariaLabel":"  "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"   "},"RotateButton":{"ariaLabel":"  "},"ZoomInButton":{"ariaLabel":"    "},"ZoomOutButton":{"ariaLabel":"    "}},"MetaTools":{"CollectionsButton":{"add":"-  "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":"  "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"   ","goToTalk":"       ","mainPanel":"  ","openButton":" {{count}} ()     ","panelContent":"   ","panelHeading":"  "},"errors":{"failPostComment":"     ","failPostDiscussion":"     ","noBoard":"            ","noText":"     ","noUser":"   "},"loginToPost":"      ","status":{"initialized":"     ","loading":"   ...","success":"   !"},"subjectHasNoComments":"      "},"SlideTutorial":{"StepNavigation":{"go":" {{index}}- ","next":"  ","previous":"  "},"alt":"  {{activeStep}}","error":"    ","getStarted":" ","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":"{{index}}  ","next":"  ","previous":"  "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"  "},"InteractionLayer":{"ConfirmModal":{"close":"    ","confirm":"       ?     ","keepWorking":"  "},"SaveButton":{"save":"    "},"SubTaskPopup":{"notRender":"    ","required":"  "},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":" {{count}}             ","noAggregation":"   ","title":" ","transcriptionsUnavailable":" "},"complete":"  ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":"{{index}}  "}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"   ","switchToSeparateFrames":"    "}},"SingleVideoViewerContainer":{"error":"      "},"VariableStarViewer":{"controls":"","figCaption":"HR ","flip":"","focus":"","highlight":"","imageTitle":"HR :   ","label":" {{id}}","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"   ","fullscreen":"  ","openVolume":"  ","pause":"  ","play":" ","playbackSpeed":"   ","scrubber":"  ","volumeSlider":" "},"ZoomControlButton":{"disable":"  ","enable":"  "},"loading":"   ","zoomHelp":"   +   "},"TaskArea":{"DisabledTaskPopup":{"body":"    ,                    ","options":{"dismiss":" ","next":"  ","select":"    "},"title":""},"Tasks":{"BackButton":{"back":" "},"DoneAndTalkButton":{"doneAndTalk":"   ","newTab":"  "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":" ","label":"    ?"},"demoMode":" ,        ,      ","error":"   ","loading":" ","renderFallback":"    "},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/bn/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                     ","closePoint":"        ","inactive":"     ","spliceDrag":"         ","splicePoint":"          "},"HighlighterTask":{"delete":" ","noLabels":"     ","status":"{{count}}   "},"InputStatus":{"drawn":"{{count}}  ","max":"{{max}}   {{count}}   ","maxAndMin":"{{min}}   {{count}} ,  {{max}}  ","min":"{{min}}   {{count}}  "},"LineControls":{"close":" ","delete":" ","deleteCancel":"   ","deleteConfirm":"   ","lineControls":" ","move":" ","redo":" ","undo":" "},"SimpleDropdownTask":{"customInputPlaceholder":"   ","otherLabel":"...","selectPlaceholder":"   "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"  ","closeFilters":"  ","filter":"","removeFilter":"{{valueLabel}}  ","showing":"{{total}}   {{showing}}  "},"Choice":{"cancel":" ","identify":" ","lessInfo":" ","moreInfo":" ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"{{choiceLabel}}    "},"ConfusedWith":{"cancel":" ","confused":"   ","itsThis":"    "},"DeleteButton":{"delete":"   {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":" "},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":"  ","editing":"  "}}')},"../lib-classifier/dist/esm/translations/cs/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"S tmto objektem jste se ji setkali","tooltipText":["Tento objekt jste ji vidli a klasifikovali, take dal klasifikace nepispje k jeho analze.","Pokud chcete pomoci, zkuste zvolit jin pracovn postup nebo pispt do jinho projektu."]},"Banner":{"next":"Dal","previous":"Pedchoz","whyAmISeeingThis":"Pro se mi to zobrazuje?"},"InProgressConfirmModal":{"cancel":"Zruit","confirm":"Potvrdit","inProgress":"Opravdu chcete pejt na jin objekt? Veker anotace, kter jste vytvoili pro aktuln objekt, budou ztraceny."},"RetiredBanner":{"bannerText":"Dokoneno: Tento objekt byl vyazen","tooltipText":["Tento objekt m ji dostatek klasifikac, take vae nebudou pouity pi jeho analze.","Pokud chcete pomoci, zkuste zvolit jin pracovn postup nebo pispt do jinho projektu."]},"SubjectSetProgressBanner":{"alreadySeen":"Ji vidno","bannerText":"{{setName}}: Objekt {{number}}/{{total}}","finished":"Dokoneno","tooltipText":["Tento projekt umouje dobrovolnkm prohlet si objekty v postupnm poad.","slo zobrazuje pozici objektu v rmci cel skupiny."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Dokoneno: Vidli jste vechno","tooltipText":["V tomto pracovnm postupu jste ji ve klasifikovali, take dal klasifikace tohoto objektu nebudou pi jeho analze pouity.","Pokud chcete pomoci, zkuste zvolit jin pracovn postup nebo pispt do jinho projektu."]},"WorkflowIsFinishedBanner":{"bannerText":"Tento pracovn postup je dokonen","tooltipText":["Vechny objekty v tomto pracovnm postupu byly dokoneny, take dal klasifikace tohoto objektu nebudou pi jeho analze pouity.","Pokud chcete pomoci, zkuste zvolit jin pracovn postup nebo pispt do jinho projektu."]}},"DrawingTools":{"RotateHandle":"chop pro oten nakreslen anotace/znaky."},"FeedbackModal":{"keepClassifying":"Pokraovat v klasifikaci","label":"Zptn vazba"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Ternn prvodce"},"FieldGuideItem":{"ariaTitle":"Zpt na seznam poloek ternnho prvodce"},"FieldGuideItemAnchor":{"ariaTitle":"Vybrat {{title}}"},"title":"Ternn prvodce"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Poznmky"},"FullscreenButton":{"ariaLabel":{"actualSize":"Zobrazit objekt v normln velikosti","fullscreen":"Zobrazit objekt v reimu cel obrazovky"}},"InvertButton":{"ariaLabel":"Obrtit objekt"},"MoveButton":{"ariaLabel":"Pesun objektu"},"ResetButton":{"ariaLabel":"Obnoven zobrazen pedmtu"},"RotateButton":{"ariaLabel":"Oten objektu"},"ZoomInButton":{"ariaLabel":"Piblen objektu"},"ZoomOutButton":{"ariaLabel":"Oddlen od objektu"}},"MetaTools":{"CollectionsButton":{"add":"Pidat do alb"},"HidePreviousMarksDrawingButton":{"hide":"Skrt pedchoz znaky","show":"Zobrazit pedchoz znaky"},"HidePreviousTranscriptionsButton":{"hide":"Skrt vechny znaky","show":"Zobrazit vechny znaky","showUser":"Zobrazit sv znaky"},"MetadataButton":{"label":"Info o objektu"},"MetadataModal":{"table":{"label":"ttek","value":"Hodnota"},"title":"Metadata objektu"}},"ModalTutorial":{"title":"Nvod"},"QuickTalk":{"aria":{"closeButton":"Zavt panel koment","goToTalk":"Pejt na tma Diskuze na stran Talk","mainPanel":"Panel koment QuickTalk","openButton":"Pedmt m {{count}} koment(). Kliknte pro rozbalen.","panelContent":"Komente k pedmtu diskuze","panelHeading":"Pedmt Diskuze"},"errors":{"failPostComment":"Nepodailo se pidat komente ke stvajc diskusi.","failPostDiscussion":"Do nov diskuse se nepodailo pidat komente.","noBoard":"Pro tento projekt zatm nebyla zzena nstnka pro pipomnky k objektu.","noText":"Nelze vloit przdn koment.","noUser":"Uivatel nen pihlen."},"loginToPost":"Pro vloen komente se pihlaste.","status":{"initialized":"Zanechte poznmku k tomuto objektu","loading":"Vloen komente...","success":"Koment odesln!"},"subjectHasNoComments":"Tento objekt zatm nem dn komente."},"SlideTutorial":{"StepNavigation":{"go":"Pejt na krok {{index}}","next":"Pejt na dal krok","previous":"Pejt na pedchoz krok"},"alt":"Krok vukovho programu {{activeStep}}","error":"Krok vukovho programu se nepodailo nast.","getStarted":"Zanme","heading":"Nvod {{projectDisplayName}}"},"StepNavigation":{"go":"Pejt na krok {{index}}","next":"Pejt na dal krok","previous":"Pejt na pedchoz krok"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Sloupcov graf"},"ImageAndTextViewer":{"textIconAltText":"Ikona prohlee textu"},"InteractionLayer":{"ConfirmModal":{"close":"Zavt bez uloen","confirm":"Opravdu chcete zavt? Tato znaka bude smazna.","keepWorking":"Pokraujte v prci"},"SaveButton":{"save":"Uloit a zavt"},"SubTaskPopup":{"notRender":"Komponentu lohy se nepodailo vykreslit.","required":"Tato loha je vyadovna."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"agregovan pepis","explanation":"Tchto {{count}} pepis bylo odeslno pedchozmi dobrovolnky a nelze je upravovat.","noAggregation":"Agregace nen k dispozici.","title":"Pedchoz pepisy","transcriptionsUnavailable":"Pepisy jsou nedostupn."},"complete":"Pepis dokonen","transcribed":"M pepisy"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Dal","previousFrameLabel":"Pedchoz","thumbnailAltText":"Miniatura obrzku"}},"ScatterPlotViewer":{"Selection":{"delete":"Odstranit vbr {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Pepnout na zobrazen flipbooku","switchToSeparateFrames":"Pepnout na zobrazen samostatnch rmek"}},"SingleVideoViewerContainer":{"error":"Pi natn objektu dolo k chyb."},"VariableStarViewer":{"controls":"ovldac prvky","figCaption":"HR Diagram","flip":"peklopen","focus":"zamen","highlight":"zvraznn","imageTitle":"HR diagram: Jas v pomru k teplot","label":"Filtr {{id}}","periodMultiple":"opakovn doby","phase":"fze","phaseFocus":"zamen fze"},"VideoController":{"closeVolume":"Zavt posuvnk hlasitosti","fullscreen":"Zobrazit video pes celou obrazovku","openVolume":"Otevt posuvnk hlasitosti","pause":"Pozastavit video","play":"Pehrt video","playbackSpeed":"Volba rychlosti pehrvn videa","scrubber":"Posuvnk videopehrvae","volumeSlider":"Posuvnk hlasitosti"},"ZoomControlButton":{"disable":"zakzat zvten","enable":"povolit zvten"},"loading":"Natn objektu","zoomHelp":"Pouijte CTRL + scrollovn pro piblen"},"TaskArea":{"DisabledTaskPopup":{"body":"Tento objekt m dostatek klasifikac, take dn dal pedloen klasifikace nebudou pi jeho analze pouity. Tento objekt si pesto mete zobrazit pro referenci.","options":{"dismiss":"Odmtnout","next":"Dal dostupn objekt","select":"Vyberte nov objekt"},"title":"Dokoneno"},"Tasks":{"BackButton":{"back":"zpt"},"DoneAndTalkButton":{"doneAndTalk":"Dokonit & Komentovat","newTab":"na nov kart"},"DoneButton":{"done":"dokonit"},"ExpertOptions":{"demoToggle":"Ukzkov reim","label":"Expertn monosti"},"NextButton":{"next":"dal"},"TaskHelp":{"close":"Zavt","label":"Potebujete s tmto kolem pomoci?"},"demoMode":"V ukzkovm reimu se klasifikace neukldaj. Pouijte jej pro rychl a nepesn ukzky rozhran klasifikace.","error":"Nco se pokazilo","loading":"Natn","renderFallback":"Komponentu lohy se nepodailo vykreslit."},"task":"kol","tutorial":"Nvod"}}')},"../lib-classifier/dist/esm/translations/cs/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Kliknutm a petaenm z otevenho bodu do koncovho bodu nebo dvojitm kliknutm kdekoli na e vytvote bod spoje","closePoint":"Kliknutm na libovoln msto na e nastavte uzavrac bod","inactive":"Kliknutm upravte tuto ru","spliceDrag":"Kliknte a pethnte z otevenho bodu do zavracho bodu.","splicePoint":"Dvojitm kliknutm kdekoli na e vytvote spojovac bod."},"HighlighterTask":{"delete":"Smazat","noLabels":"dn ttky pro Zvraznnou lohu","status":"{{count}} Oznaeno"},"InputStatus":{"drawn":"{{count}} zakresleno","max":"{{count}} z {{max}} maximln zakresleno","maxAndMin":"{{count}} z {{min}} vyadovno, {{max}} maximln zakresleno","min":"{{count}} z {{min}} vyadovno zakreslit"},"LineControls":{"close":"Zavt","delete":"Smazat","deleteCancel":"Zruit smazn","deleteConfirm":"Potvrdit smazn","lineControls":"Ovldac prvky na e","move":"Pesunout","redo":"Znovu","undo":"Vrtit zpt"},"SimpleDropdownTask":{"customInputPlaceholder":"Zadejte nco","otherLabel":"Jin...","selectPlaceholder":"Vyberte odpov"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Zruit filtry","closeFilters":"Zavt filtry","filter":"Filtr","removeFilter":"Odebrat filtr {{valueLabel}}","showing":"Zobrazuje {{showing}} kategori z {{total}}"},"Choice":{"cancel":"Zruit","identify":"Identifikovat","lessInfo":"Mn informac","moreInfo":"Vce informac","notThis":"Tohle ne"},"ChoiceButton":{"identified":"identifikovno","openSubmenu":"Otevt podnabdku pro {{choiceLabel}}"},"ConfusedWith":{"cancel":"Zruit","confused":"Nkdy zamnno za","itsThis":"Myslm, e to je tohle"},"DeleteButton":{"delete":"Odstrant volbu {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Resetovat"},"TextTask":{"TextTagButtons":{"modifiers":"pravy textu"}},"TranscriptionLine":{"created":"Vytvoen pepis","editing":"prava pepisu"}}')},"../lib-classifier/dist/esm/translations/da/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Du har allerede set dette emne","tooltipText":["Du har allerede set og klassificeret dette emne, s yderligere klassifikationer vil ikke bidrage til analysen.","Hvis du gerne vil hjlpe, kan du prve at vlge en anden arbejdsgang eller bidrage til et andet projekt."]},"Banner":{"next":"Nste","previous":"Forrige","whyAmISeeingThis":"Hvorfor ser jeg dette?"},"InProgressConfirmModal":{"cancel":"Annuller","confirm":"Bekrft","inProgress":"Er du sikker p, at du vil navigere til et andet emne? Alle anmrkninger, du har lavet for det aktuelle emne, vil g tabt."},"RetiredBanner":{"bannerText":"Frdig: Dette emne er blevet trukket tilbage","tooltipText":["Dette emne har allerede nok klassifikationer, s din vil ikke blive brugt i dets analyse.","Hvis du gerne vil hjlpe, kan du prve at vlge en anden arbejdsgang eller bidrage til et andet projekt."]},"SubjectSetProgressBanner":{"alreadySeen":"Allerede set","bannerText":"{{setName}}: Emne {{number}} / {{total}}","finished":"Frdig","tooltipText":["Dette projekt giver frivillige mulighed for at se emner i rkkeflge.","Tallet viser dig emnets position inden for den samlede gruppe."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Frdig: Du har set det hele","tooltipText":["Du har allerede klassificeret alt i denne arbejdsgang, s yderligere klassifikationer af dette emne vil ikke blive brugt i analysen.","Hvis du gerne vil hjlpe, kan du prve at vlge en anden arbejdsgang eller bidrage til et andet projekt."]},"WorkflowIsFinishedBanner":{"bannerText":"Denne arbejdsgang er afsluttet","tooltipText":["Alle emnerne i denne arbejdsproces er blevet fuldfrt, s yderligere klassifikationer om dette emne vil ikke blive brugt i analysen.","Hvis du gerne vil hjlpe, kan du prve at vlge en anden arbejdsgang eller bidrage til et andet projekt."]}},"DrawingTools":{"RotateHandle":"Hndtag til at rotere tegnet anmrkning/markering"},"FeedbackModal":{"keepClassifying":"Fortst med at klassificere","label":"Feedback"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Feltvejledning"},"FieldGuideItem":{"ariaTitle":"G tilbage til listen over elementer i feltvejledningen"},"FieldGuideItemAnchor":{"ariaTitle":"Vlg {{title}}"},"title":"Feltvejledning"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Anmrkning"},"FullscreenButton":{"ariaLabel":{"actualSize":"Vis emnet i normal strrelse","fullscreen":"Vis emnet i fuld skrm"}},"InvertButton":{"ariaLabel":"Omvend emne"},"MoveButton":{"ariaLabel":"Flyt emnet"},"ResetButton":{"ariaLabel":"Nulstil visning af emnet"},"RotateButton":{"ariaLabel":"Roter emnet"},"ZoomInButton":{"ariaLabel":"Zoom ind p emnet"},"ZoomOutButton":{"ariaLabel":"Zoom ud fra emnet"}},"MetaTools":{"CollectionsButton":{"add":"Fj til samlinger"},"HidePreviousMarksDrawingButton":{"hide":"Skjul tidligere markeringer","show":"Vis tidligere markeringer"},"HidePreviousTranscriptionsButton":{"hide":"Skjul alle markeringer","show":"Vis alle markeringer","showUser":"Vis dine markeringer"},"MetadataButton":{"label":"Oplysninger om emnet"},"MetadataModal":{"table":{"label":"Etiket","value":"Vrdi"},"title":"Metadata for emne"}},"ModalTutorial":{"title":"Vejledning"},"QuickTalk":{"aria":{"closeButton":"Luk kommentarpanelet","goToTalk":"G til Emnedebat under Snak","mainPanel":"QuickTalk-kommentarpanel","openButton":"Emnet har {{count}} kommentar(er). Klik for at udvide.","panelContent":"Kommentarer til emnedebat","panelHeading":"Emnedebat"},"errors":{"failPostComment":"Der kunne ikke fjes kommentarer til den eksisterende debat.","failPostDiscussion":"Der kunne ikke fjes kommentarer til den nye debat.","noBoard":"Der er endnu ikke oprettet en tavle til emnekommentarer til dette projekt.","noText":"Tom kommentar  kan ikke sls op.","noUser":"Brugeren er ikke logget ind."},"loginToPost":"Log ind for at skrive en kommentar.","status":{"initialized":"Skriv en bemrkning om dette emne","loading":"Sender kommentar ...","success":"Kommentaren er udgivet!"},"subjectHasNoComments":"Dette emne har endnu ingen kommentarer."},"SlideTutorial":{"StepNavigation":{"go":"G til trin {{index}}","next":"G til nste trin","previous":"G til forrige trin"},"alt":"Vejledningstrin {{activeStep}}","error":"Vejledningstrinnet kunne ikke indlses.","getStarted":"Kom godt i gang","heading":"Vejledning for {{projectDisplayName}}"},"StepNavigation":{"go":"G til trin {{index}}","next":"G til nste trin","previous":"G til forrige trin"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Sjlediagram"},"ImageAndTextViewer":{"textIconAltText":"Ikon for tekstvisning"},"InteractionLayer":{"ConfirmModal":{"close":"Luk uden at gemme","confirm":"Er du sikker p, at du vil lukke? Denne markering vil blive slettet.","keepWorking":"Fortst med at arbejde"},"SaveButton":{"save":"Gem og luk"},"SubTaskPopup":{"notRender":"Opgavekomponenten kunne ikke gengives.","required":"Denne opgave er obligatorisk."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"sammenlagt transskription","explanation":"Disse {{count}} transskriptioner er blevet indsendt af tidligere frivillige og kan ikke ndres.","noAggregation":"Ingen sammenlgning tilgngelig.","title":"Tidligere transskriptioner","transcriptionsUnavailable":"Transskriptioner er ikke tilgngelige."},"complete":"Transskriptionen er fuldfrt","transcribed":"Har transskriptioner"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Nste","previousFrameLabel":"Forrige","thumbnailAltText":"Miniature af billede"}},"ScatterPlotViewer":{"Selection":{"delete":"Slet valg {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Skift til bladrevisning","switchToSeparateFrames":"Skift til visning med separate rammer"}},"SingleVideoViewerContainer":{"error":"Der opstod en fejl under indlsning af emnet."},"VariableStarViewer":{"controls":"styring","figCaption":"HR-diagram","flip":"vend","focus":"fokus","highlight":"fremhvning","imageTitle":"HR-diagram: Lysstyrke vs. temperatur","label":"Filter {{id}}","periodMultiple":"periode med flere","phase":"fase","phaseFocus":"fasefokus"},"VideoController":{"closeVolume":"Luk lydstyrkeknap","fullscreen":"Vis video i fuld skrm","openVolume":"bn lydstyrkeknap","pause":"St videoen p pause","play":"Afspil video","playbackSpeed":"Valg af hastighed for videoafspilning","scrubber":"Sgning i videoafspilning","volumeSlider":"Knap til lydstyrke"},"ZoomControlButton":{"disable":"deaktiver zoom","enable":"aktivr zoom"},"loading":"Indlser et emne","zoomHelp":"Brug CTRL + scroll for at zoome"},"TaskArea":{"DisabledTaskPopup":{"body":"Dette emne har tilstrkkeligt mange klassifikationer, s eventuelle yderligere klassifikationer, der indsendes, vil ikke blive brugt i analysen. Du kan stadig se dette emne som reference.","options":{"dismiss":"Afvis","next":"Nste tilgngelige emne","select":"Vlg et nyt emne"},"title":"Frdig"},"Tasks":{"BackButton":{"back":"Tilbage"},"DoneAndTalkButton":{"doneAndTalk":"Frdig  snak","newTab":"i en ny fane"},"DoneButton":{"done":"Frdig"},"ExpertOptions":{"demoToggle":"Demotilstand","label":"Ekspertindstillinger"},"NextButton":{"next":"Nste"},"TaskHelp":{"close":"Luk","label":"Har du brug for hjlp til denne opgave?"},"demoMode":"I demotilstand gemmes klassifikationer ikke. Brug dette til hurtige, unjagtige demonstrationer af klassifikationsgrnsefladen.","error":"Der gik noget galt","loading":"Indlser","renderFallback":"Opgavekomponenten kunne ikke gengives."},"task":"Opgave","tutorial":"Vejledning"}}')},"../lib-classifier/dist/esm/translations/da/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Klik og trk fra bningspunktet til lukkepunktet, eller dobbeltklik et vilkrligt sted p linjen for at oprette et splejsepunkt.","closePoint":"Klik et vilkrligt sted p linjen for at indstille lukkepunktet","inactive":"Klik for at redigere denne linje","spliceDrag":"Klik og trk fra bningspunktet til lukkepunktet","splicePoint":"Dobbeltklik hvor som helst p linjen for at oprette et splejsepunkt"},"HighlighterTask":{"delete":"Slet","noLabels":"Ingen etiketter til fremhvningsopgaven","status":"{{count}} markeret"},"InputStatus":{"drawn":"{{count}} er tegnet","max":"{{count}} ud af maksimalt {{max}} er tegnet","maxAndMin":"{{count}} af {{min}} er pkrvet, {{max}} maksimalt tegnet","min":"{{count}} ud af {{min}} pkrvne er tegnet"},"LineControls":{"close":"Luk","delete":"Slet","deleteCancel":"Annuller sletning","deleteConfirm":"Bekrft sletning","lineControls":"Linjestyring","move":"Flyt","redo":"Gentag","undo":"Fortryd"},"SimpleDropdownTask":{"customInputPlaceholder":"Indtast noget","otherLabel":"Andet ...","selectPlaceholder":"Vlg et svar"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Ryd filtre","closeFilters":"Luk filtre","filter":"Filtrr","removeFilter":"Fjern filteret {{valueLabel}}","showing":"Viser {{showing}} ud af {{total}}"},"Choice":{"cancel":"Annuller","identify":"Identificer","lessInfo":"Frre oplysninger","moreInfo":"Flere oplysninger","notThis":"Ikke dette"},"ChoiceButton":{"identified":"identificeret","openSubmenu":"bn undermenuen for {{choiceLabel}}"},"ConfusedWith":{"cancel":"Annuller","confused":"Forveksles somme tider med","itsThis":"Jeg tror, det er dette"},"DeleteButton":{"delete":"Slet valg {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Nulstil"},"TextTask":{"TextTagButtons":{"modifiers":"Tekstmodificeringer"}},"TranscriptionLine":{"created":"Transskriptionen er oprettet","editing":"Redigering af transskription"}}')},"../lib-classifier/dist/esm/translations/de/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Sie haben dieses Objekt schon angesehen.","tooltipText":["Sie haben dieses Objekt bereits angesehen und klassifiziert. Eine weitere Klassifizierung wird somit nicht zur Analyse beitragen.","Wenn Sie helfen mchten, versuchen Sie, einen anderen Workflow zu whlen oder an einem anderen Projekt mitzuarbeiten."]},"Banner":{"next":"Weiter","previous":"Vorherige","whyAmISeeingThis":"Warum sehe ich das?"},"InProgressConfirmModal":{"cancel":"Zurckziehen","confirm":"OK","inProgress":"Das Zurckgehen wird Deine Arbeit in der derzeitigen Aufgabe lschen!"},"RetiredBanner":{"bannerText":"Abgeschlossen: Dieses Objekt wurde zurckgezogen.","tooltipText":["Zu diesem Objekt gibt es bereits gengend Klassifizierungen und Ihre wird bei der Analyse nicht verwendet.","Wenn Sie helfen mchten, versuchen Sie, einen anderen Workflow zu whlen oder an einem anderen Projekt mitzuarbeiten."]},"SubjectSetProgressBanner":{"alreadySeen":"Bereits gesehen","bannerText":"{{setName}}: Objekt {{number}}/{{total}}","finished":"Abgeschlossen","tooltipText":["Im Rahmen dieses Projekts knnen Freiwillige die Objekte der Reihe nach betrachten.","Die Zahl zeigt Ihnen die Position des Objekts innerhalb der Gesamtgruppe an."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Abgeschlossen: Sie haben alles gesehen.","tooltipText":["Sie haben bereits alles in diesem Workflow klassifiziert. Eine weitere Klassifizierung dieses Objekts wird somit nicht in seiner Analyse verwendet.","Wenn Sie helfen mchten, versuchen Sie, einen anderen Workflow zu whlen oder an einem anderen Projekt mitzuarbeiten."]},"WorkflowIsFinishedBanner":{"bannerText":"Dieser Workflow ist abgeschlossen.","tooltipText":["Alle Objekte in diesem Workflow wurden bereits abgeschlossen. Eine weitere Klassifizierung dieses Objekts wird somit nicht in seiner Analyse verwendet.","Wenn Sie helfen mchten, versuchen Sie, einen anderen Workflow zu whlen oder an einem anderen Projekt mitzuarbeiten."]}},"DrawingTools":{"RotateHandle":"Griff zum Drehen der gezeichneten Anmerkung/Markierung."},"FeedbackModal":{"keepClassifying":"Weiter","label":"Feedback"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Benutzerhandbuch"},"FieldGuideItem":{"ariaTitle":"Zurck"},"FieldGuideItemAnchor":{"ariaTitle":"{{title}} auswhlen"},"title":"Benutzerhandbuch"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Anmerken"},"FullscreenButton":{"ariaLabel":{"actualSize":"Objekt in normaler Gre anzeigen","fullscreen":"Objekt im Vollbildschirm anzeigen"}},"InvertButton":{"ariaLabel":"Objekt umkehren"},"MoveButton":{"ariaLabel":"Objekt verschieben"},"ResetButton":{"ariaLabel":"Objektansicht zurcksetzen"},"RotateButton":{"ariaLabel":"Objekt drehen"},"ZoomInButton":{"ariaLabel":"Objekt vergrern"},"ZoomOutButton":{"ariaLabel":"Objekt verkleinern"}},"MetaTools":{"CollectionsButton":{"add":"Zu Sammlungen hinzufgen"},"HidePreviousMarksDrawingButton":{"hide":"Vorherige Markierungen ausblenden","show":"Vorherige Markierungen anzeigen"},"HidePreviousTranscriptionsButton":{"hide":"Alle Markierungen ausblenden","show":"Alle Markierungen anzeigen","showUser":"Ihre Markierungen anzeigen"},"MetadataButton":{"label":"Informationen zum Objekt"},"MetadataModal":{"table":{"label":"Label","value":"Wert"},"title":"Objekt-Metadaten"}},"ModalTutorial":{"title":"Lernprogramm"},"QuickTalk":{"aria":{"closeButton":"Kommentarpanel schlieen","goToTalk":"Zur Diskussion ber das Objekt auf Talk wechseln","mainPanel":"QuickTalk-Kommentarpanel","openButton":"Das Objekt hat {{count}} Kommentar(e). Zum Erweitern klicken.","panelContent":"Kommentar zur Unterhaltung ber das Objekt","panelHeading":"Unterhaltung zum Objekt"},"errors":{"failPostComment":"Es konnten keine Kommentare zu einer vorhandenen Diskussion hinzugefgt werden.","failPostDiscussion":"Es konnten keine Kommentare zu einer neuen Diskussion hinzugefgt werden.","noBoard":"Zu diesem Objekt wurde noch kein Board fr Fachkommentare eingerichtet.","noText":"Ein leerer Kommentar kann nicht gepostet werden.","noUser":"Benutzer nicht angemeldet."},"loginToPost":"Bitte melden Sie sich an, um ein Kommentar zu hinterlassen.","status":{"initialized":"Hinterlassen Sie eine Notiz zu diesem Objekt","loading":"(Laden)","success":"Kommentar gepostet!"},"subjectHasNoComments":"Das Objekt hat noch keine Kommentare."},"SlideTutorial":{"StepNavigation":{"go":"Zum Schritt {{index}}","next":"Zum nchsten Schritt","previous":"Zum vorherigen Schritt"},"alt":"Tutorial-Schritt {{activeStep}}","error":"Der Tutorial-Schritt konnte nicht geladen werden.","getStarted":"Fang an","heading":"{{projectDisplayName}} Lernprogramm"},"StepNavigation":{"go":"Zum Schritt {{index}}","next":"Zum nchsten Schritt","previous":"Zum vorherigen Schritt"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Balkendiagramm"},"ImageAndTextViewer":{"textIconAltText":"Symbol fr die Textanzeige"},"InteractionLayer":{"ConfirmModal":{"close":"Ohne Speichern schlieen","confirm":"Mchten Sie dies wirklich schlieen? Die Markierung wird gelscht.","keepWorking":"Weiterarbeiten"},"SaveButton":{"save":"Speichern und schlieen"},"SubTaskPopup":{"notRender":"Die Aufgabenkomponente konnte nicht gerendert werden.","required":"Die Aufgabe ist erforderlich."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"aggregierte Transkription","explanation":"Diese {{count}} Transkriptionen wurden von anderen Freiwilligen eingereicht und knnen nicht gendert werden.","noAggregation":"Keine Aggregation verfgbar.","title":"Frhere Transkriptionen","transcriptionsUnavailable":"Transkriptionen nicht verfgbar."},"complete":"Transkription abgeschlossen","transcribed":"Hat Transkriptionen"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Weiter","previousFrameLabel":"Vorherige","thumbnailAltText":"Miniaturansicht des Bildes"}},"ScatterPlotViewer":{"Selection":{"delete":"Auswahl {{index}} lschen"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Zur Klappansicht wechseln","switchToSeparateFrames":"Zur Einzelbildansicht wechseln"}},"SingleVideoViewerContainer":{"error":"Beim Laden des Objekts ist ein Fehler aufgetreten"},"VariableStarViewer":{"controls":"Steuerungen","figCaption":"HR-Diagramm","flip":"umdrehen","focus":"zentrieren","highlight":"hervorheben","imageTitle":"HR-Diagramm: Helligkeit vs. Temperatur","label":"Filter {{id}}","periodMultiple":"Periode mehrfach","phase":"Phase","phaseFocus":"Phasenzentrierung"},"VideoController":{"closeVolume":"Lautstrkeregler schlieen","fullscreen":"Video im Vollbildschirm anzeigen","openVolume":"Lautstrkeregler ffnen","pause":"Video pausieren","play":"Video abspielen","playbackSpeed":"Auswahl der Geschwindigkeit der Videowiedergabe","scrubber":"Scrubber fr Videoplayer","volumeSlider":"Lautstrkeregler"},"ZoomControlButton":{"disable":"Zoom deaktivieren","enable":"Zoom aktivieren"},"loading":"Objekt laden","zoomHelp":"Verwenden Sie STRG + Scrollen zum Zoomen"},"TaskArea":{"DisabledTaskPopup":{"body":"Zu diesem Objekt gibt es bereits gengend Klassifizierungen und weitere Klassifizierungen werden bei der Analyse nicht verwendet. Sie knnen dieses Objekt aber weiterhin als Referenz nutzen.","options":{"dismiss":"Verwerfen","next":"Nchstes verfgbares Objekt","select":"Neues Objekt auswhlen"},"title":"Abgeschlossen"},"Tasks":{"BackButton":{"back":"Zurck"},"DoneAndTalkButton":{"doneAndTalk":"Fertig & Diskutieren","newTab":"in einer neuen Registerkarte"},"DoneButton":{"done":"Fertig"},"ExpertOptions":{"demoToggle":"Demo-Modus","label":"Expertenoptionen"},"NextButton":{"next":"Weiter"},"TaskHelp":{"close":"Schlieen","label":"Brauchst Du Hilfe?"},"demoMode":"Im Demo-Modus werden die Klassifizierungen nicht gespeichert. Nutzen Sie dies fr schnelle, ungenaue Demos der Klassifizierungsschnittstelle.","error":"Etwas ist schiefgelaufen.","loading":"(Laden)","renderFallback":"Die Aufgabenkomponente konnte nicht gerendert werden."},"task":"Aufgabe","tutorial":"Lernprogramm"}}')},"../lib-classifier/dist/esm/translations/de/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Klicken und ziehen Sie vom offenen Punkt zum geschlossenen Punkt oder klicken Sie doppelt auf eine beliebige Stelle der Linie, um einen Anschlusspunkt zu erstellen.","closePoint":"Klicken Sie auf eine beliebige Stelle auf der Linie, um den Punkt zu schlieen.","inactive":"Klicken, um diese Linie zu bearbeiten","spliceDrag":"Klicken und ziehen Sie vom offenen Punkt zum geschlossenen Punkt.","splicePoint":"Klicken Sie doppelt auf eine beliebige Stelle der Linie, um einen Anschlusspunkt zu erstellen."},"HighlighterTask":{"delete":"Lschen","noLabels":"Keine Label fr die Highlighter-Aufgabe","status":"{{count}} markiert"},"InputStatus":{"drawn":"{{count}} gezeichnet","max":"{{count}} von {{max}} maximal gezeichnet","maxAndMin":"{{count}} von {{min}} erforderlich, {{max}} maximal gezeichnet","min":"{{count}} von {{min}} erforderlichen gezeichnet"},"LineControls":{"close":"Schlieen","delete":"Lschen","deleteCancel":"Lschen abbrechen","deleteConfirm":"Lschen besttigen","lineControls":"Liniensteuerungen","move":"Verschieben","redo":"Wiederholen","undo":"Rckgngig machen"},"SimpleDropdownTask":{"customInputPlaceholder":"Geben Sie etwas ein","otherLabel":"Sonstiges ","selectPlaceholder":"Whlen Sie eine Antwort"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Filter lschen","closeFilters":"Filter schlieen","filter":"Filtern","removeFilter":"{{valueLabel}}-Filter entfernen","showing":"Zeigt {{showing}} von {{total}}"},"Choice":{"cancel":"Abbrechen","identify":"Identifizieren","lessInfo":"Mehr Informationen","moreInfo":"Weitere Informationen","notThis":"Nicht das"},"ChoiceButton":{"identified":"identifiziert","openSubmenu":"Untermen fr {{choiceLabel}} ffnen"},"ConfusedWith":{"cancel":"Zurckziehen","confused":"Oft verwechselt mit","itsThis":"Ich denke, das ist es."},"DeleteButton":{"delete":"Auswahl {{choiceLabel}} lschen"}},"TextFromSubjectTask":{"reset":"Zurcksetzen"},"TextTask":{"TextTagButtons":{"modifiers":"Textmodifikatoren"}},"TranscriptionLine":{"created":"Erstellte Transkription","editing":"Transkription wird bearbeitet"}}')},"../lib-classifier/dist/esm/translations/el/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"     ","tooltipText":["       ,         .","   ,              ."]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"   ;"},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":"        ;          ."},"RetiredBanner":{"bannerText":":     ","tooltipText":["      ,          .","   ,              ."]},"SubjectSetProgressBanner":{"alreadySeen":"  ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":"","tooltipText":["           .","           ."]},"UserHasFinishedWorkflowBanner":{"bannerText":":    ","tooltipText":["          ,            .","   ,              ."]},"WorkflowIsFinishedBanner":{"bannerText":"     ","tooltipText":["         ,            .","   ,              ."]}},"DrawingTools":{"RotateHandle":"     /."},"FeedbackModal":{"keepClassifying":" ","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":"     "},"FieldGuideItemAnchor":{"ariaTitle":" {{title}}"},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":""},"FullscreenButton":{"ariaLabel":{"actualSize":"    ","fullscreen":"     "}},"InvertButton":{"ariaLabel":" "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"  "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"  "},"ZoomOutButton":{"ariaLabel":"   "}},"MetaTools":{"CollectionsButton":{"add":"  "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"   ","show":"   ","showUser":"   "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":" "},"QuickTalk":{"aria":{"closeButton":"  ","goToTalk":"     ","mainPanel":"   ","openButton":"   {{count}} /-.    .","panelContent":"  ","panelHeading":" "},"errors":{"failPostComment":"        .","failPostDiscussion":"        .","noBoard":"           .","noText":"      .","noUser":"    ."},"loginToPost":"     .","status":{"initialized":"      ","loading":" ...","success":"  !"},"subjectHasNoComments":"     ."},"SlideTutorial":{"StepNavigation":{"go":"   {{index}}","next":"   ","previous":"   "},"alt":"   {{activeStep}}","error":"        .","getStarted":"","heading":"  {{projectDisplayName}}"},"StepNavigation":{"go":"   {{index}}","next":"   ","previous":"   "},"SubjectViewer":{"BarChartViewer":{"chartLabel":""},"ImageAndTextViewer":{"textIconAltText":"   "},"InteractionLayer":{"ConfirmModal":{"close":"  ","confirm":"      ;     .","keepWorking":"  "},"SaveButton":{"save":"  "},"SubTaskPopup":{"notRender":"       .","required":"    ."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":"  {{count}}             .","noAggregation":"   .","title":" ","transcriptionsUnavailable":"   ."},"complete":"  ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":"  {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"   ","switchToSeparateFrames":"    "}},"SingleVideoViewerContainer":{"error":"      ."},"VariableStarViewer":{"controls":" ","figCaption":" HR","flip":"","focus":"","highlight":"","imageTitle":" HR:    ","label":" {{id}}","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"   ","fullscreen":"    ","openVolume":"   ","pause":" ","play":" ","playbackSpeed":"   ","scrubber":"   ","volumeSlider":"  "},"ZoomControlButton":{"disable":" ","enable":" "},"loading":" ","zoomHelp":"  CTRL +    "},"TaskArea":{"DisabledTaskPopup":{"body":"     ,             .        .","options":{"dismiss":"","next":"  ","select":"   "},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"  ","newTab":"  "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"     ;"},"demoMode":"  ,     .      ,      .","error":"  ","loading":"","renderFallback":"       ."},"task":"","tutorial":" "}}')},"../lib-classifier/dist/esm/translations/el/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                        ","closePoint":"          ","inactive":"       ","spliceDrag":"          ","splicePoint":"           "},"HighlighterTask":{"delete":"","noLabels":"      ","status":"{{count}}  "},"InputStatus":{"drawn":" {{count}}","max":" {{count}}  {{max}}  ","maxAndMin":" {{count}}  {{min}},   {{max}}","min":" {{count}}  {{min}}  "},"LineControls":{"close":"","delete":"","deleteCancel":" ","deleteConfirm":" ","lineControls":" ","move":"","redo":"","undo":""},"SimpleDropdownTask":{"customInputPlaceholder":" ","otherLabel":"...","selectPlaceholder":"  "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":" ","closeFilters":" ","filter":"","removeFilter":"  {{valueLabel}}","showing":" {{showing}}  {{total}}"},"Choice":{"cancel":"","identify":"","lessInfo":" ","moreInfo":" ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"   {{choiceLabel}}"},"ConfusedWith":{"cancel":"","confused":"   ","itsThis":"   "},"DeleteButton":{"delete":"  {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":"  "}},"TranscriptionLine":{"created":"  ","editing":" "}}')},"../lib-classifier/dist/esm/translations/en/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"You\'ve already seen this subject","tooltipText":["You\'ve already seen and classified this subject, so further classifications won\'t contribute to its analysis.","If you\'re looking to help, try choosing a different workflow or contributing to a different project."]},"Banner":{"next":"Next","previous":"Previous","whyAmISeeingThis":"Why am I seeing this?"},"InProgressConfirmModal":{"cancel":"Cancel","confirm":"Confirm","inProgress":"Are you sure you want to navigate to a different Subject? Any annotation you\'ve made for the current Subject will be lost."},"RetiredBanner":{"bannerText":"Finished: This subject has been retired","tooltipText":["This subject already has enough classifications, so yours won\'t be used in its analysis.","If you\'re looking to help, try choosing a different workflow or contributing to a different project."]},"SubjectSetProgressBanner":{"alreadySeen":"Already seen","bannerText":"{{setName}}: Subject {{number}}/{{total}}","finished":"Finished","tooltipText":["This project allows volunteers to view subjects in sequential order.","The number shows you the subjects position within the total group."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Finished: You\'ve seen everything","tooltipText":["You\'ve already classified everything in this workflow, so further classifications on this subject won\'t be used in its analysis.","If you\'re looking to help, try choosing a different workflow or contributing to a different project."]},"WorkflowIsFinishedBanner":{"bannerText":"This workflow is finished","tooltipText":["All the subjects in this workflow have been completed, so further classifications on this subject won\'t be used in its analysis.","If you\'re looking to help, try choosing a different workflow or contributing to a different project."]}},"DrawingTools":{"RotateHandle":"Handle for rotating drawn annotation/mark."},"FeedbackModal":{"keepClassifying":"Keep Classifying","label":"Feedback"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Field Guide"},"FieldGuideItem":{"ariaTitle":"Go back to Field Guide items list"},"FieldGuideItemAnchor":{"ariaTitle":"Select {{title}}"},"title":"Field Guide"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Annotate"},"FullscreenButton":{"ariaLabel":{"actualSize":"View subject at normal size","fullscreen":"View subject in full screen mode"}},"InvertButton":{"ariaLabel":"Invert subject"},"MoveButton":{"ariaLabel":"Move subject"},"ResetButton":{"ariaLabel":"Reset subject view"},"RotateButton":{"ariaLabel":"Rotate subject"},"ZoomInButton":{"ariaLabel":"Zoom in on subject"},"ZoomOutButton":{"ariaLabel":"Zoom out from subject"}},"MetaTools":{"CollectionsButton":{"add":"Add to collections"},"HidePreviousMarksDrawingButton":{"hide":"Hide Previous Marks","show":"Show Previous Marks"},"HidePreviousTranscriptionsButton":{"hide":"Hide All Marks","show":"Show All Marks","showUser":"Show Your Marks"},"MetadataButton":{"label":"Subject Info"},"MetadataModal":{"table":{"label":"Label","value":"Value"},"title":"Subject Metadata"}},"ModalTutorial":{"title":"Tutorial"},"QuickTalk":{"aria":{"closeButton":"Close comments panel","goToTalk":"Go to Subject Discussion on Talk","mainPanel":"QuickTalk Comments Panel","openButton":"Subject has {{count}} comment(s). Click to expand.","panelContent":"Subject Discussion comments","panelHeading":"Subject Discussion"},"errors":{"failPostComment":"Couldn\'t add comments to existing discussion.","failPostDiscussion":"Couldn\'t add comments to new discussion.","noBoard":"A board for subject comments has not been setup for this project yet.","noText":"Can\'t post an empty comment.","noUser":"User not logged in."},"loginToPost":"Please log in to post a comment.","status":{"initialized":"Leave a note about this subject","loading":"Posting comment...","success":"Comment posted!"},"subjectHasNoComments":"This Subject doesn\'t have any comments yet."},"SlideTutorial":{"StepNavigation":{"go":"Go to step {{index}}","next":"Go to next step","previous":"Go to previous step"},"alt":"Tutorial step {{activeStep}}","error":"Tutorial step could not be loaded.","getStarted":"Get Started","heading":"{{projectDisplayName}} Tutorial"},"StepNavigation":{"go":"Go to step {{index}}","next":"Go to next step","previous":"Go to previous step"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Bar chart"},"GeoMapViewer":{"RecenterButton":{"ariaLabel":"Recenter map to features"},"ResetButton":{"ariaLabel":"Reset features on map","confirm":"Are you sure you want to reset the features on the map to their original positions?"}},"ImageAndTextViewer":{"textIconAltText":"Icon for text viewer"},"InteractionLayer":{"ConfirmModal":{"close":"Close without saving","confirm":"Are you sure you want to close? This mark will be deleted.","keepWorking":"Keep working"},"SaveButton":{"save":"Save and Close"},"SubTaskPopup":{"notRender":"Task component could not be rendered.","required":"This task is required."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"aggregated transcription","explanation":"These {{count}} transcriptions have been submitted by previous volunteers and cannot be modified.","noAggregation":"No aggregation available.","title":"Previous Transcriptions","transcriptionsUnavailable":"Transcriptions unavailable."},"complete":"Transcription completed","transcribed":"Has transcriptions"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Next","previousFrameLabel":"Previous","thumbnailAltText":"Thumbnail of Image"}},"ScatterPlotViewer":{"Selection":{"delete":"Delete selection {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Switch to flipbook view","switchToSeparateFrames":"Switch to separate frames view"}},"SingleVideoViewerContainer":{"error":"There was an error loading the subject."},"VariableStarViewer":{"controls":"controls","figCaption":"HR Diagram","flip":"flip","focus":"focus","highlight":"highlight","imageTitle":"HR Diagram: Luminosity vs Temperature","label":"Filter {{id}}","periodMultiple":"period multiple","phase":"phase","phaseFocus":"phase focus"},"VideoController":{"closeVolume":"Close Volume Slider","fullscreen":"Show Video Fullscreen","openVolume":"Open Volume Slider","pause":"Pause video","play":"Play video","playbackSpeed":"Video playback speed selection","scrubber":"Video player scrubber","volumeSlider":"Volume Slider"},"ZoomControlButton":{"disable":"disable zoom","enable":"enable zoom"},"loading":"Loading a subject","zoomHelp":"Use CTRL + scroll to zoom"},"TaskArea":{"DisabledTaskPopup":{"body":"This subject has enough classifications, so any additional classifications submitted will not be used in its analysis. You can still view this subject for reference.","options":{"dismiss":"Dismiss","next":"Next available subject","select":"Choose a new subject"},"title":"Finished"},"Tasks":{"BackButton":{"back":"Back"},"DoneAndTalkButton":{"doneAndTalk":"Done & Talk","newTab":"in a new tab"},"DoneButton":{"done":"Done"},"ExpertOptions":{"demoToggle":"Demo Mode","label":"Expert Options"},"NextButton":{"next":"Next"},"TaskHelp":{"close":"Close","label":"Need some help with this task?"},"demoMode":"In demo mode, classifications will not be saved. Use this for quick, inaccurate demos of the classification interface.","error":"Something went wrong","loading":"Loading","renderFallback":"Task component could not be rendered."},"task":"Task","tutorial":"Tutorial"}}')},"../lib-classifier/dist/esm/translations/en/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Click and drag from the open point to the close point or double click anywhere on the line to create a splice point","closePoint":"Click anywhere on the line to set the close point","inactive":"Click to edit this line","spliceDrag":"Click and drag from the open point to the close point","splicePoint":"Double click anywhere on the line to create a splice point"},"HighlighterTask":{"delete":"Delete","noLabels":"No labels for the Highlighter Task","status":"{{count}} Marked"},"InputStatus":{"drawn":"{{count}} drawn","max":"{{count}} of {{max}} maximum drawn","maxAndMin":"{{count}} of {{min}} required, {{max}} maximum drawn","min":"{{count}} of {{min}} required drawn"},"LineControls":{"close":"Close","delete":"Delete","deleteCancel":"Cancel Delete","deleteConfirm":"Confirm Delete","lineControls":"Line Controls","move":"Move","redo":"Redo","undo":"Undo"},"SimpleDropdownTask":{"customInputPlaceholder":"Input something","otherLabel":"Other...","selectPlaceholder":"Choose an answer"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Clear filters","closeFilters":"Close filters","filter":"Filter","removeFilter":"Remove {{valueLabel}} filter","showing":"Showing {{showing}} of {{total}}"},"Choice":{"cancel":"Cancel","identify":"Identify","lessInfo":"Less info","moreInfo":"More info","notThis":"Not this"},"ChoiceButton":{"identified":"identified","openSubmenu":"Open submenu for {{choiceLabel}}"},"ConfusedWith":{"cancel":"Cancel","confused":"Sometimes confused with","itsThis":"I think it\'s this"},"DeleteButton":{"delete":"Delete choice {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Reset"},"TextTask":{"TextTagButtons":{"modifiers":"Text modifiers"}},"TranscriptionLine":{"created":"Created transcription","editing":"Editing transcription"}}')},"../lib-classifier/dist/esm/translations/es/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Ya has visto este objeto","tooltipText":["Ya has visto y clasificado este objeto, por lo que las clasificaciones posteriores no se utilizarn en su anlisis.","Si ests buscando ayuda, prueba a seleccionar un flujo de trabajo distinto o contribuir en un proyecto diferente."]},"Banner":{"next":"Siguiente","previous":"Anterior","whyAmISeeingThis":"Por qu veo esto?"},"InProgressConfirmModal":{"cancel":"Cancelar","confirm":"OK","inProgress":"Al regresar se borrar su trabajo para la tarea actual."},"RetiredBanner":{"bannerText":"Terminado: este objeto se ha retirado","tooltipText":["Este objeto ya tiene suficientes clasificaciones, por lo que las tuyas no se utilizarn en su anlisis.","Si ests buscando ayuda, prueba a seleccionar un flujo de trabajo distinto o contribuir en un proyecto diferente."]},"SubjectSetProgressBanner":{"alreadySeen":"Ya se ha visto","bannerText":"{{setName}}: objeto {{number}}/{{total}}","finished":"Terminado","tooltipText":["Este proyecto permite a los voluntarios ver los objetos en el orden secuencial.","El nmero te muestra la posicin del objeto en el conjunto total."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Terminado: has visto todo","tooltipText":["Ya has clasificado todo en este flujo de trabajo, por lo que las clasificaciones posteriores no se utilizarn en su anlisis.","Si ests buscando ayuda, prueba a seleccionar un flujo de trabajo distinto o contribuir en un proyecto diferente."]},"WorkflowIsFinishedBanner":{"bannerText":"Este flujo de trabajo se ha terminado","tooltipText":["Se han completado todos los objetos en este flujo de trabajo, por lo que las clasificaciones posteriores no se utilizarn en su anlisis.","Si ests buscando ayuda, prueba a seleccionar un flujo de trabajo distinto o contribuir en un proyecto diferente."]}},"DrawingTools":{"RotateHandle":"Control para girar la anotacin/marca dibujada."},"FeedbackModal":{"keepClassifying":"Continuar","label":"Opinin"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Gua Prctica"},"FieldGuideItem":{"ariaTitle":"Atrs"},"FieldGuideItemAnchor":{"ariaTitle":"Seleccionar {{title}}"},"title":"Gua Prctica"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Anotar"},"FullscreenButton":{"ariaLabel":{"actualSize":"Ver objeto en tamao normal","fullscreen":"Ver objeto en modo de pantalla completa"}},"InvertButton":{"ariaLabel":"Invertir el objeto"},"MoveButton":{"ariaLabel":"Mover objeto"},"ResetButton":{"ariaLabel":"Restablecer la vista del objeto"},"RotateButton":{"ariaLabel":"Rotar objeto"},"ZoomInButton":{"ariaLabel":"Acercar el zoom al objeto"},"ZoomOutButton":{"ariaLabel":"Alejar el zoom del objeto"}},"MetaTools":{"CollectionsButton":{"add":"Aadir a las colecciones"},"HidePreviousMarksDrawingButton":{"hide":"Ocultar marcas anteriores","show":"Mostrar marcas anteriores"},"HidePreviousTranscriptionsButton":{"hide":"Ocultar todas las marcas","show":"Mostrar todas las marcas","showUser":"Mostrar tus marcas"},"MetadataButton":{"label":"Informacin del objeto"},"MetadataModal":{"table":{"label":"Etiqueta","value":"Valor"},"title":"Metadatos del objeto"}},"ModalTutorial":{"title":"Tutorial"},"QuickTalk":{"aria":{"closeButton":"Cerrar panel de comentarios","goToTalk":"Ir al debate sobre el objeto en Hablemos","mainPanel":"Panel de comentarios de Charla rpida","openButton":"El objeto tiene {{count}} comentarios. Haz clic para expandir.","panelContent":"Comentarios del debate sobre el objeto","panelHeading":"Debate sobre el objeto"},"errors":{"failPostComment":"No se han podido aadir comentarios al debate.","failPostDiscussion":"No se han podido aadir comentarios al nuevo debate.","noBoard":"Todava no se ha configurado un panel para los comentarios sobre el objeto de este proyecto.","noText":"No se puede publicar un comentario vaco.","noUser":"El usuario no ha iniciado sesin."},"loginToPost":"Inicia sesin para publicar un comentario.","status":{"initialized":"Deja una nota sobre este objeto","loading":"(Cargando)","success":"Comentario publicado!"},"subjectHasNoComments":"Este objeto no tiene ningn comentario todava."},"SlideTutorial":{"StepNavigation":{"go":"Ir al paso {{index}}","next":"Ir al paso siguiente","previous":"Ir al paso anterior"},"alt":"Paso del tutorial {{activeStep}}","error":"El paso del tutorial no se pudo cargar.","getStarted":"Comenzar","heading":"{{projectDisplayName}} Tutorial"},"StepNavigation":{"go":"Ir al paso {{index}}","next":"Ir al paso siguiente","previous":"Ir al paso anterior"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Grfico de barras"},"ImageAndTextViewer":{"textIconAltText":"Icono para el visor de texto"},"InteractionLayer":{"ConfirmModal":{"close":"Cerrar sin guardar","confirm":"Seguro que quieres cerrar? Esta marca se eliminar.","keepWorking":"Seguir trabajando"},"SaveButton":{"save":"Guardar y cerrar"},"SubTaskPopup":{"notRender":"El componente de la tarea no se ha podido representar.","required":"Esta tarea es obligatoria."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"transcripcin agregada","explanation":"Estas {{count}} transcripciones han sido enviadas por voluntarios anteriores y no se pueden modificar.","noAggregation":"No hay agregaciones disponibles.","title":"Transcripciones anteriores","transcriptionsUnavailable":"Transcripciones no disponibles."},"complete":"Transcripcin completada","transcribed":"Tiene transcripciones"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Siguiente","previousFrameLabel":"Anterior","thumbnailAltText":"Miniatura de imagen"}},"ScatterPlotViewer":{"Selection":{"delete":"Eliminar seleccin {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Cambiar a vista de carrusel","switchToSeparateFrames":"Cambiar a vista de marcos separados"}},"SingleVideoViewerContainer":{"error":"Se ha producido un error al cargar el objeto."},"VariableStarViewer":{"controls":"controles","figCaption":"Diagrama HR","flip":"dar la vuelta","focus":"enfocar","highlight":"resaltar","imageTitle":"Diagrama HR: luminosidad vs. temperatura","label":"Filtrar {{id}}","periodMultiple":"periodo mltiple","phase":"fase","phaseFocus":"enfoque de la fase"},"VideoController":{"closeVolume":"Cerrar control deslizante de volumen","fullscreen":"Mostrar vdeo en pantalla completa","openVolume":"Abrir control deslizante de volumen","pause":"Pausar vdeo","play":"Reproducir vdeo","playbackSpeed":"Seleccin de la velocidad de reproduccin del vdeo","scrubber":"Limpiador del reproductor de vdeo","volumeSlider":"Control deslizante de volumen"},"ZoomControlButton":{"disable":"desactivar zoom","enable":"activar zoom"},"loading":"Cargando un objeto","zoomHelp":"Utiliza CTRL + rueda del ratn para hacer zoom"},"TaskArea":{"DisabledTaskPopup":{"body":"Este objeto tiene suficientes clasificaciones, por lo que no se utilizar en su anlisis ninguna clasificacin adicional que se enve. Todava puedes ver este objeto como referencia.","options":{"dismiss":"Descartar","next":"Nuevo objeto disponible","select":"Elige un objeto nuevo"},"title":"Terminado"},"Tasks":{"BackButton":{"back":"Atrs"},"DoneAndTalkButton":{"doneAndTalk":"Listo & Hablemos","newTab":"en una nueva pestaa"},"DoneButton":{"done":"Listo"},"ExpertOptions":{"demoToggle":"Modo demostracin","label":"Opciones para expertos"},"NextButton":{"next":"Siguiente"},"TaskHelp":{"close":"Cerrar","label":"Necesitas ayuda con esta tarea?"},"demoMode":"En el modo demostracin, no se guardarn las clasificaciones. Utilzalo para demostraciones rpidas e imprecisas de la interfaz de clasificacin.","error":"Algo sali mal","loading":"(Cargando)","renderFallback":"El componente de la tarea no se ha podido representar."},"task":"Tarea","tutorial":"Tutorial"}}')},"../lib-classifier/dist/esm/translations/es/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Haz clic y arrastra desde el punto de apertura hasta el punto de cierre o haz doble clic en cualquier parte de la lnea para crear un punto de unin","closePoint":"Haz clic en cualquier parte de la lnea para establecer el punto de cierre","inactive":"Haz clic para editar esta lnea","spliceDrag":"Haz clic y arrastra desde el punto de apertura hasta el punto de cierre","splicePoint":"Haz doble clic en cualquier parte de la lnea para crear un punto de unin"},"HighlighterTask":{"delete":"Eliminar","noLabels":"No hay etiquetas para la tarea de resaltado","status":"{{count}} marcado(s)"},"InputStatus":{"drawn":"{{count}} dibujados","max":"{{count}} de {{max}} dibujados como mximo","maxAndMin":"Se necesitan {{count}} de {{min}} dibujados, {{max}} como mximo","min":"Se necesitan {{count}} de {{min}} dibujados"},"LineControls":{"close":"Cerrar","delete":"Eliminar","deleteCancel":"Cancelar eliminacin","deleteConfirm":"Confirmar eliminacin","lineControls":"Controles de lnea","move":"Mover","redo":"Rehacer","undo":"Deshacer"},"SimpleDropdownTask":{"customInputPlaceholder":"Introduce algo","otherLabel":"Otra...","selectPlaceholder":"Elige una respuesta"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Borrar filtros","closeFilters":"Cerrar filtros","filter":"Filtrar","removeFilter":"Eliminar filtro {{valueLabel}}","showing":"Mostrando {{showing}} de {{total}}"},"Choice":{"cancel":"Cancelar","identify":"Identificar","lessInfo":"Menos informacin","moreInfo":"Ms informacin","notThis":"Esto no"},"ChoiceButton":{"identified":"identificado","openSubmenu":"Abrir submen para {{choiceLabel}}"},"ConfusedWith":{"cancel":"Cancelar","confused":"Frecuentemente confundido con","itsThis":"Pienso que es esto"},"DeleteButton":{"delete":"Eliminar opcin {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Restablecer"},"TextTask":{"TextTagButtons":{"modifiers":"Modificadores de texto"}},"TranscriptionLine":{"created":"Transcripcin creada","editing":"Edicin de la transcripcin"}}')},"../lib-classifier/dist/esm/translations/fi/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Olet jo nhnyt tmn aiheen","tooltipText":["Olet jo nhnyt ja luokitellut tmn aiheen, joten tulevat luokittelut eivt edist sen analyysi.","Jos haluat auttaa, kokeile valita toinen tynkulku tai osallistua eri projektiin."]},"Banner":{"next":"Seuraava","previous":"Edellinen","whyAmISeeingThis":"Miksi nen tmn?"},"InProgressConfirmModal":{"cancel":"Peruuta","confirm":"Vahvista","inProgress":"Haluatko varmasti siirty eri aiheeseen? Kaikki tekemsi merkinnt nykyisess aiheessa menetetn."},"RetiredBanner":{"bannerText":"Valmis: Tm aihe on suljettu","tooltipText":["Tss aiheessa on jo tarpeeksi luokitteluja, joten omaasi ei kytet sen analyysiss.","Jos haluat auttaa, kokeile valita toinen tynkulku tai osallistua eri projektiin."]},"SubjectSetProgressBanner":{"alreadySeen":"Jo nhty","bannerText":"{{setName}}: aihe {{number}}/{{total}}","finished":"Valmis","tooltipText":["Tmn projektin avulla vapaaehtoiset voivat katsella aiheita perkkisess jrjestyksess.","Tm luku nytt aiheen sijainnin kokonaisryhmss."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Valmis: Olet nhnyt kaiken","tooltipText":["Olet jo luokitellut kaiken tss tynkulussa, joten tmn aiheen muita luokitteluja ei kytet sen analyysiss.","Jos haluat auttaa, kokeile valita toinen tynkulku tai osallistua eri projektiin."]},"WorkflowIsFinishedBanner":{"bannerText":"Tm tynkulku on valmis.","tooltipText":["Kaikki tmn tynkulun aiheet ovat valmiita, joten tmn aiheen muita luokitteluja ei kytet sen analyysiss.","Jos haluat auttaa, kokeile valita toinen tynkulku tai osallistua eri projektiin."]}},"DrawingTools":{"RotateHandle":"Piirretyn huomautuksen/merkinnn kntmiseen kytettv vipu."},"FeedbackModal":{"keepClassifying":"Jatka luokittelua","label":"Palaute"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Kenttopas"},"FieldGuideItem":{"ariaTitle":"Siirry takaisin kenttoppaan kohdeluetteloon"},"FieldGuideItemAnchor":{"ariaTitle":"Valitse {{title}}"},"title":"Kenttopas"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Lis huomautus"},"FullscreenButton":{"ariaLabel":{"actualSize":"Katsele aihetta normaalikoossa","fullscreen":"Katsele aihetta koko nytn tilassa"}},"InvertButton":{"ariaLabel":"Knn aihe"},"MoveButton":{"ariaLabel":"Siirr aihetta"},"ResetButton":{"ariaLabel":"Nollaa aihenkym"},"RotateButton":{"ariaLabel":"Kierr aihetta"},"ZoomInButton":{"ariaLabel":"Lhenn aiheeseen"},"ZoomOutButton":{"ariaLabel":"Loitonna aiheesta"}},"MetaTools":{"CollectionsButton":{"add":"Lis kokoelmiin"},"HidePreviousMarksDrawingButton":{"hide":"Piilota edelliset merkinnt","show":"Nyt edelliset merkinnt"},"HidePreviousTranscriptionsButton":{"hide":"Piilota kaikki merkinnt","show":"Nyt kaikki merkinnt","showUser":"Nyt omat merkinnt"},"MetadataButton":{"label":"Aiheen tiedot"},"MetadataModal":{"table":{"label":"Merkint","value":"Arvo"},"title":"Aiheen metatiedot"}},"ModalTutorial":{"title":"Tutoriaali"},"QuickTalk":{"aria":{"closeButton":"Sulje kommenttipaneeli","goToTalk":"Siirry aihekeskusteluun Talkissa","mainPanel":"QuickTalk-kommenttipaneeli","openButton":"Aiheessa on {{count}} kommentti(a). Laajenna napsauttamalla.","panelContent":"Aihekeskustelun kommentit","panelHeading":"Aihekeskustelu"},"errors":{"failPostComment":"Olemassa olevaan keskusteluun ei voitu list kommentteja.","failPostDiscussion":"Uuteen keskusteluun ei voitu list kommentteja.","noBoard":"Taulua aiheen kommenteille ei ole viel mritetty tlle projektille.","noText":"Et voi julkaista tyhj kommenttia.","noUser":"Kyttj ei ole kirjautunut sisn."},"loginToPost":"Kirjaudu sisn julkaistaksesi kommentin.","status":{"initialized":"Jt aiheeseen kommentti","loading":"Julkaistaan kommenttia...","success":"Kommentti julkaistu!"},"subjectHasNoComments":"Tss aiheessa ei viel ole kommentteja."},"SlideTutorial":{"StepNavigation":{"go":"Siirry vaiheeseen {{index}}","next":"Siirry seuraavaan vaiheeseen","previous":"Siirry edelliseen vaiheeseen"},"alt":"Tutoriaalivaihe {{activeStep}}","error":"Tutoriaalin vaihetta ei voitu ladata.","getStarted":"Aloita","heading":"Tutoriaali {{projectDisplayName}}"},"StepNavigation":{"go":"Siirry vaiheeseen {{index}}","next":"Siirry seuraavaan vaiheeseen","previous":"Siirry edelliseen vaiheeseen"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Pylvskaavio"},"ImageAndTextViewer":{"textIconAltText":"Tekstin katseluohjelman kuvake"},"InteractionLayer":{"ConfirmModal":{"close":"Sulje tallentamatta","confirm":"Haluatko varmasti sulkea? Tm merkint poistetaan.","keepWorking":"Jatka tystmist"},"SaveButton":{"save":"Tallenna ja sulje"},"SubTaskPopup":{"notRender":"Tehtvn komponenttia ei voitu renderid.","required":"Tm tehtv on valmis."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"koostettu transkriptio","explanation":"Edelliset vapaaehtoiset ovat lhettneet nm {{count}} transkriptiota eik nit voi muokata.","noAggregation":"Koostetta ei saatavilla.","title":"Edelliset transkriptiot","transcriptionsUnavailable":"Transkriptioita ei saatavilla."},"complete":"Transkriptio valmis","transcribed":"Omaa transkriptioita"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Seuraava","previousFrameLabel":"Edellinen","thumbnailAltText":"Kuvan pikkukuva"}},"ScatterPlotViewer":{"Selection":{"delete":"Poista valinta {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Vaihda nkym","switchToSeparateFrames":"Vaihda erillisten kuvien nkymn"}},"SingleVideoViewerContainer":{"error":"Aihetta ladattaessa ilmeni virhe."},"VariableStarViewer":{"controls":"hallinta","figCaption":"HR-kaavio","flip":"knn","focus":"tarkenna","highlight":"korosta","imageTitle":"HR-kaavio: valoisuus vs lmptila","label":"Suodata {{id}}","periodMultiple":"useita ajanjaksoja","phase":"vaihe","phaseFocus":"vaiheen tarkennus"},"VideoController":{"closeVolume":"Sulje nenvoimakkuuden liukusdin","fullscreen":"Nyt video koko nytss","openVolume":"Avaa nenvoimakkuuden liukusdin","pause":"Pysyt video","play":"Toista video","playbackSpeed":"Videon toiston nopeuden valinta","scrubber":"Videosoittimen sdin","volumeSlider":"nenvoimakkuuden liukusdin"},"ZoomControlButton":{"disable":"poista lhennys kytst","enable":"ota lhennys kyttn"},"loading":"Ladataan aihetta","zoomHelp":"Lhenn painamalla CTRL + vierittmll"},"TaskArea":{"DisabledTaskPopup":{"body":"Tss aiheessa on tarpeeksi luokitteluja, joten muita lhetettyj luokitteluja ei kytet sen analyysiss. Voit kuitenkin edelleen katsella tt aihetta.","options":{"dismiss":"Ohita","next":"Uusi saatavilla oleva aihe","select":"Valitse uusi aihe"},"title":"Valmis"},"Tasks":{"BackButton":{"back":"Takaisin"},"DoneAndTalkButton":{"doneAndTalk":"Done & Talk","newTab":"uudessa vlilehdess"},"DoneButton":{"done":"Valmis"},"ExpertOptions":{"demoToggle":"Demotila","label":"Asiantuntijan vaihtoehdot"},"NextButton":{"next":"Seuraava"},"TaskHelp":{"close":"Sulje","label":"Tarvitsetko apua tmn tehtvn parissa?"},"demoMode":"Luokitteluja ei tallenneta demotilassa. Tm sopii luokittelukyttliittymn nopeisiin ja eptarkkoihin demoihin.","error":"Jokin meni vikaan.","loading":"Ladataan","renderFallback":"Tehtvn komponenttia ei voitu renderid."},"task":"Tehtv","tutorial":"Tutoriaali"}}')},"../lib-classifier/dist/esm/translations/fi/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Napsauta ja raahaa avauskohdasta sulkukohtaan tai kaksoisnapsauta miss tahansa viivalla leikkauskohdan luomiseksi","closePoint":"Napsauta miss tahansa viivalla sulkukohdan asettamiseksi","inactive":"Muokkaa tt viivaa napsauttamalla","spliceDrag":"Napsauta ja raahaa avauskohdasta sulkukohtaan","splicePoint":"Kaksoisnapsauta miss tahansa viivalla leikkauskohdan luomiseksi"},"HighlighterTask":{"delete":"Poista","noLabels":"Ei merkintj korostustehtvlle","status":"{{count}} merkitty"},"InputStatus":{"drawn":"{{count}} piirretty","max":"{{count}}/{{max}} enimmispiirrosta","maxAndMin":"Vaaditaan {{count}}/{{min}}, {{max}} enimmispiirrosta","min":"{{count}}/{{min}} pakollista piirretty"},"LineControls":{"close":"Sulje","delete":"Poista","deleteCancel":"Peruuta poisto","deleteConfirm":"Vahvista poisto","lineControls":"Viivan ohjaukset","move":"Siirr","redo":"Tee uudelleen","undo":"Kumoa"},"SimpleDropdownTask":{"customInputPlaceholder":"Syt jotain","otherLabel":"Muu...","selectPlaceholder":"Valitse vastaus"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Tyhjenn suodattimet","closeFilters":"Sulje suodattimet","filter":"Suodata","removeFilter":"Poista suodatin {{valueLabel}}","showing":"Nytetn {{showing}}/{{total}}"},"Choice":{"cancel":"Peruuta","identify":"Tunnista","lessInfo":"Vhemmn tietoja","moreInfo":"Listietoja","notThis":"Ei tm"},"ChoiceButton":{"identified":"tunnistettu","openSubmenu":"Avaa alivalikko kohteelle {{choiceLabel}}"},"ConfusedWith":{"cancel":"Peruuta","confused":"Sekoitetaan joskus:","itsThis":"Luulen, ett se on tm"},"DeleteButton":{"delete":"Poista valinta {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Nollaa"},"TextTask":{"TextTagButtons":{"modifiers":"Tekstinmuokkaus"}},"TranscriptionLine":{"created":"Luotu transkriptio","editing":"Muokataan transkriptiota"}}')},"../lib-classifier/dist/esm/translations/fr/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Vous avez dj vu ce sujet","tooltipText":["Vous avez dj vu et class ce sujet, c\'est pourquoi d\'autres classifications ne contribueront pas  son analyse.","Si vous cherchez  apporter votre aide, essayez de choisir un autre module ou de contribuer  un autre projet."]},"Banner":{"next":"Suivant","previous":"Prcdent","whyAmISeeingThis":"Pourquoi est-ce que je vois ceci?"},"InProgressConfirmModal":{"cancel":"Annuler","confirm":"OK","inProgress":"Retourner en arrire va effacer le travail fait sur cette tche."},"RetiredBanner":{"bannerText":"Termin: ce sujet a t retir","tooltipText":["Ce sujet possde dj suffisamment de classifications, c\'est pourquoi les vtres ne seront pas utilises dans son analyse.","Si vous cherchez  apporter votre aide, essayez de choisir un autre module ou de contribuer  un autre projet."]},"SubjectSetProgressBanner":{"alreadySeen":"Dj vu","bannerText":"{{setName}}: Sujet {{number}}/{{total}}","finished":"Termin","tooltipText":["Ce projet permet aux volontaires d\'afficher des sujets dans l\'ordre squentiel.","Le nombre montre la position du sujet dans le groupe total."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Termin: vous avez tout vu","tooltipText":["Vous avez dj class tous les lments de ce module, c\'est pourquoi d\'autres classifications sur ce module ne seront pas utilises dans son analyse.","Si vous cherchez  apporter votre aide, essayez de choisir un autre module ou de contribuer  un autre projet."]},"WorkflowIsFinishedBanner":{"bannerText":"Ce module est termin","tooltipText":["Tous les sujets de ce module sont termins, c\'est pourquoi d\'autres classifications concernant ce sujet ne seront pas utilises dans son analyse.","Si vous cherchez  apporter votre aide, essayez de choisir un autre module ou de contribuer  un autre projet."]}},"DrawingTools":{"RotateHandle":"Poigne pour faire pivoter la marque ou l\'annotation dessine."},"FeedbackModal":{"keepClassifying":"Continuer","label":"Retours"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Guide Pratique"},"FieldGuideItem":{"ariaTitle":"Retour"},"FieldGuideItemAnchor":{"ariaTitle":"Slectionner {{title}}"},"title":"Guide Pratique"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Annoter"},"FullscreenButton":{"ariaLabel":{"actualSize":"Afficher le sujet en taille normale","fullscreen":"Afficher le sujet en mode plein cran"}},"InvertButton":{"ariaLabel":"Inverser le sujet"},"MoveButton":{"ariaLabel":"Dplacer le sujet"},"ResetButton":{"ariaLabel":"Rinitialiser l\'affichage du sujet"},"RotateButton":{"ariaLabel":"Faire pivoter le sujet"},"ZoomInButton":{"ariaLabel":"Zoomer sur le sujet"},"ZoomOutButton":{"ariaLabel":"Dzoomer du sujet"}},"MetaTools":{"CollectionsButton":{"add":"Ajouter aux collections"},"HidePreviousMarksDrawingButton":{"hide":"Masquer les marques prcdentes","show":"Afficher les marques prcdentes"},"HidePreviousTranscriptionsButton":{"hide":"Masquer toutes les marques","show":"Afficher toutes les marques","showUser":"Afficher vos marques"},"MetadataButton":{"label":"Informations sur le sujet"},"MetadataModal":{"table":{"label":"tiquette","value":"Valeur"},"title":"Mtadonnes du sujet"}},"ModalTutorial":{"title":"Tutoriel"},"QuickTalk":{"aria":{"closeButton":"Fermer le panneau de commentaires","goToTalk":"Accder  la discussion sur le sujet sur Talk","mainPanel":"Panneau de commentaires QuickTalk","openButton":"Il y a {{count}}commentaire(s) sur le sujet. Cliquez pour agrandir.","panelContent":"Commentaires sur la discussion sur le sujet","panelHeading":"Discussion sur le sujet"},"errors":{"failPostComment":"Impossible d\'ajouter des commentaires  une discussion existante.","failPostDiscussion":"Impossible d\'ajouter des commentaires  une nouvelle discussion.","noBoard":"Il n\'y a pas encore de tableau de commentaires sur le sujet configur pour ce projet.","noText":"Impossible de publier un commentaire vide.","noUser":"L\'utilisateur n\'est pas connect."},"loginToPost":"Veuillez vous connecter pour publier un commentaire.","status":{"initialized":"Laissez une note concernant ce sujet","loading":"(Chargement)","success":"Commentaire publi!"},"subjectHasNoComments":"Il n\'y a pas encore de commentaire concernant ce sujet."},"SlideTutorial":{"StepNavigation":{"go":"Passer  l\'tape{{index}}","next":"Passer  l\'tape suivante","previous":"Revenir  l\'tape prcdente"},"alt":"tape{{activeStep}} du tutoriel","error":"Impossible de charger les tapes du tutoriel.","getStarted":" vos marques, prts, partez!","heading":"{{projectDisplayName}} Tutoriel"},"StepNavigation":{"go":"Aller  l\'tape{{index}}","next":"Aller  l\'tape suivante","previous":"Aller  l\'tape prcdente"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Diagramme  barres"},"ImageAndTextViewer":{"textIconAltText":"Icne de l\'afficheur de texte"},"InteractionLayer":{"ConfirmModal":{"close":"Fermer sans enregistrer","confirm":"Voulez-vous vraiment fermer? Cette marque sera supprime.","keepWorking":"Continuer  travailler"},"SaveButton":{"save":"Enregistrer et fermer"},"SubTaskPopup":{"notRender":"Impossible de rendre un composant de la tche.","required":"Cette tche est obligatoire."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"transcription cumule","explanation":"Ces {{count}}transcriptions ont t soumises par des contributeurs prcdents et ne peuvent pas tre modifies.","noAggregation":"Aucune agrgation disponible.","title":"Transcriptions prcdentes","transcriptionsUnavailable":"Transcriptions indisponibles."},"complete":"Transcription termine","transcribed":"Possde des transcriptions"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Suivant","previousFrameLabel":"Prcdente","thumbnailAltText":"Vignette de l\'image"}},"ScatterPlotViewer":{"Selection":{"delete":"Supprimer la slection {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Passer en vue Folioscope","switchToSeparateFrames":"Passer en vue Image par image"}},"SingleVideoViewerContainer":{"error":"Une erreur s\'est produite lors du chargement du sujet."},"VariableStarViewer":{"controls":"commandes","figCaption":"Diagramme HR","flip":"retourner","focus":"se concentrer","highlight":"mettre en avant","imageTitle":"Diagramme HR: luminosit par rapport  la temprature","label":"Filtrer {{id}}","periodMultiple":"plusieurs priodes","phase":"phase","phaseFocus":"concentration sur la phase"},"VideoController":{"closeVolume":"Fermer le contrle du volume","fullscreen":"Afficher la vido en plein cran","openVolume":"Ouvrir le contrle du volume","pause":"Mettre la vido en pause","play":"Lire la vido","playbackSpeed":"Slection de la vitesse de lecture de la vido","scrubber":"Barre de dfilement du lecteur vido","volumeSlider":"Contrle du volume"},"ZoomControlButton":{"disable":"dsactiver le zoom","enable":"activer le zoom"},"loading":"Chargement d\'un sujet","zoomHelp":"Utilisez CTRL + dfilement pour zoomer"},"TaskArea":{"DisabledTaskPopup":{"body":"Il y a suffisamment de classement pour ce sujet, aussi toute classification supplmentaire soumise ne sera pas prise en compte dans l\'analyse. Vous pouvez toujours afficher ce sujet pour rfrence.","options":{"dismiss":"Rejeter","next":"Nouveau sujet disponible","select":"Choisissez un nouveau sujet"},"title":"Termin"},"Tasks":{"BackButton":{"back":"Retour"},"DoneAndTalkButton":{"doneAndTalk":"Valider & Discussion","newTab":"dans un nouvel onglet"},"DoneButton":{"done":"Valider"},"ExpertOptions":{"demoToggle":"Mode de dmonstration","label":"Options d\'expert"},"NextButton":{"next":"Suivant"},"TaskHelp":{"close":"Fermer","label":"Avez-vous besoin d\'aide?"},"demoMode":"Les classements ne seront pas enregistrs en mode de dmonstration. Utilisez cette fonctionnalit pour des dmonstrations rapides et prcises de l\'interface de classification.","error":"Une erreur s\'est produite","loading":"(Chargement)","renderFallback":"Impossible de rendre un composant de la tche."},"task":"Tache","tutorial":"Tutoriel"}}')},"../lib-classifier/dist/esm/translations/fr/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Cliquez et dplacez depuis le point d\'ouverture vers le point de fermeture ou double-cliquez n\'importe o sur la ligne pour crer un point de raccordement","closePoint":"Cliquez n\'importe o sur la ligne pour dfinir le point de fermeture","inactive":"Cliquez pour modifier cette ligne","spliceDrag":"Cliquez et dplacez du point d\'ouverture vers le point de fermeture","splicePoint":"Double-cliquez n\'importe o sur la ligne pour crer un point de raccordement"},"HighlighterTask":{"delete":"Supprimer","noLabels":"Aucune tiquette pour la tche en surbrillance","status":"{{count}} marqu(e)(s)"},"InputStatus":{"drawn":"{{count}}ligne(s)","max":"{{count}}ligne(s) sur {{max}} maximum","maxAndMin":"{{count}}ligne(s) sur {{min}} requise(s), {{max}}lignes dessines maximum","min":"{{count}}ligne(s) requise(s) sur {{min}}"},"LineControls":{"close":"Fermer","delete":"Supprimer","deleteCancel":"Annuler la suppression","deleteConfirm":"Confirmer la suppression","lineControls":"Contrles de ligne","move":"Dplacer","redo":"Rtablir","undo":"Annuler"},"SimpleDropdownTask":{"customInputPlaceholder":"Saisir quelque chose","otherLabel":"Autre","selectPlaceholder":"Choisir une rponse"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Effacer les filtres","closeFilters":"Fermer les filtres","filter":"Filtrer","removeFilter":"Supprimer le filtre {{valueLabel}}","showing":"Montrer {{showing}} de {{total}}"},"Choice":{"cancel":"Annuler","identify":"Identifier","lessInfo":"Moins d\'infos","moreInfo":"Plus d\'infos","notThis":"Pas ceci"},"ChoiceButton":{"identified":"identifi(e)","openSubmenu":"Ouvrir le sous-menu pour {{choiceLabel}}"},"ConfusedWith":{"cancel":"Annuler","confused":"Souvent confondu avec","itsThis":"Je pense que c\'est a"},"DeleteButton":{"delete":"Supprimer le choix {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Rinitialiser"},"TextTask":{"TextTagButtons":{"modifiers":"Modificateurs de texte"}},"TranscriptionLine":{"created":"Transcription cre","editing":"Modification de la transcription"}}')},"../lib-classifier/dist/esm/translations/ha/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Kun riga da kun ga wannan batu","tooltipText":["Kun riga da kun gani kuma kun sanya rukuni ga wannan batu, saboda haka sake sanya rukuni ba zai taimaka ba wajen wanwance shi.","Idan kana son yin taimako, yi oarin zaen wani aiki na daban ko kuma taimaka wa wani aiki na daban."]},"Banner":{"next":"Gaba","previous":"Baya","whyAmISeeingThis":"Me ya sa nake kallon wannan?"},"InProgressConfirmModal":{"cancel":"Soke","confirm":"Tabbatar","inProgress":"Shin kun tabbatar da cewa kuna son duba wani batu na daban? Duk wani bayani da kuka yi game da wannan Batu na yanzu zai salwanta."},"RetiredBanner":{"bannerText":"An kammala: An mayar da wannan batu","tooltipText":["Tuni wannan batu yake da rabe-rabe wadatattu, saboda haka ba za a yi amfani da naku ba yayin wanwance shi.","Idan kana son yin taimako, yi oarin zaen wani aiki na daban ko kuma taimaka wa wani aiki na daban."]},"SubjectSetProgressBanner":{"alreadySeen":"An riga da an gani","bannerText":"{{setName}}: Batu {{number}}/{{total}}","finished":"An kammala","tooltipText":["Wannan batu yana bayar da dama ga masu sa-kai domin duba batutuwa a cikin tsari a jere.","Lambar yana muku nuni ga gurbin batun a cikin illahirin rukunin."]},"UserHasFinishedWorkflowBanner":{"bannerText":"An Kammala: Kun gama ganin komai","tooltipText":["Kun riga da kun kammala dukkannin abubuwan da suke cikin wannan aikin, saboda haka ba za a yi amfani da wani sabon rabe-rabe ba game da wannan batu yayin wanwance shi.","Idan kana son yin taimako, yi oarin zaen wani aiki na daban ko kuma taimaka wa wani aiki na daban."]},"WorkflowIsFinishedBanner":{"bannerText":"An kammala wannan aikin","tooltipText":["An kammala dukkannin batutuwan da suke cikin wannan aikin, saboda haka ba za a yi amfani da wani sabon rabe-rabe ba game da wannan batu yayin wanwance shi.","Idan kana son yin taimako, yi oarin zaen wani aiki na daban ko kuma taimaka wa wani aiki na daban."]}},"DrawingTools":{"RotateHandle":"Maallin juya inkiya/alamar da aka zana."},"FeedbackModal":{"keepClassifying":"Ci Gaba Da Rabawa","label":"Tsokaci"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Jagoran Fage"},"FieldGuideItem":{"ariaTitle":"Koma zuwa jerin abubuwan da suke arashin Jagoran Fage"},"FieldGuideItemAnchor":{"ariaTitle":"Zai {{title}}"},"title":"Jagoran Fage"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Yi bayani"},"FullscreenButton":{"ariaLabel":{"actualSize":"Duba batu a cikin girma na gama-gari","fullscreen":"Duba batu a cikin tsarin cike fuskar na\'ura"}},"InvertButton":{"ariaLabel":"Juya batu"},"MoveButton":{"ariaLabel":"Matsar da batu"},"ResetButton":{"ariaLabel":"Gyara tsarin batu"},"RotateButton":{"ariaLabel":"Juya batu"},"ZoomInButton":{"ariaLabel":"Zuke batu"},"ZoomOutButton":{"ariaLabel":"Faaa batu"}},"MetaTools":{"CollectionsButton":{"add":"ara rukunoni"},"HidePreviousMarksDrawingButton":{"hide":"oye Makin Da Suka Gabata","show":"Nuna Makin Da Suka Gabata"},"HidePreviousTranscriptionsButton":{"hide":"Rufe Dukkannin Maki","show":"Nuna Dukkannin Maki","showUser":"Nuna Makinku"},"MetadataButton":{"label":"Bayanan Darasi"},"MetadataModal":{"table":{"label":"Rukuni","value":"ima"},"title":"Bayanan Darasi"}},"ModalTutorial":{"title":"Koyarwa"},"QuickTalk":{"aria":{"closeButton":"Rufe shafin tsokaci","goToTalk":"Je zuwa angaren Tattauna Batu a sashen Magana","mainPanel":"Shafin Tsokaci na QuickTalk","openButton":"Batun yana da tsokaci {{count}}. Latsa domin faaawa.","panelContent":"Tsokaci a fannin Tattauna Batu","panelHeading":"Tattauna Batu"},"errors":{"failPostComment":"Ba za a iya yin tsokaci a tattaunar da aka yi ba.","failPostDiscussion":"Ba za a iya yin tsokaci a sabon tattaunawa ba.","noBoard":"Ba a saita allon tsokaci game da batu ba dangane da wannan aikin.","noText":"Ba za a iya ora tsokacin da babu komai a cikinsa ba.","noUser":"Mai akawun bai shiga ciki ba."},"loginToPost":"A shiga ciki domin yin tsokaci.","status":{"initialized":"Yi tsokaci game da wannan batu","loading":"Ana ora tsokaci...","success":"An sanya tsokaci!"},"subjectHasNoComments":"Wannan Batu ba shi da wani tsokaci ya zuwa yanzu."},"SlideTutorial":{"StepNavigation":{"go":"Je zuwa mataki na {{index}}","next":"Je zuwa matakin gaba","previous":"Koma zuwa matakin baya"},"alt":"Matakin koyarwa na {{activeStep}}","error":"An kasa bue matakin koyarwa.","getStarted":"Fara","heading":"Koyarwa Na {{projectDisplayName}}"},"StepNavigation":{"go":"Je zuwa mataki na {{index}}","next":"Je zuwa matakin gaba","previous":"Koma zuwa matakin baya"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Jadawalin bacat"},"ImageAndTextViewer":{"textIconAltText":"Tambari don mai duba rubutu"},"InteractionLayer":{"ConfirmModal":{"close":"A rufe ba tare da adanawa ba.","confirm":"Shin an tabbatar da ana son a rufe? Za a share wannan alama.","keepWorking":"Ci gaba da aiki"},"SaveButton":{"save":"A Adana a Rufe"},"SubTaskPopup":{"notRender":"Ba za a iya gabatar da wannan angaren aiki ba.","required":"Ana buatar wannan aikin."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"haaen rubutaccen bayani","explanation":"\'Yan sa-kai da suka gabata sun tura waannan rubutattun bayanai guda {{count}} sannan ba za a iya gyara su ba.","noAggregation":"Babu tarin abubuwa.","title":"Rubutattun Bayanai Da Suka Gabata","transcriptionsUnavailable":"Babu rubutattun bayanai."},"complete":"An kammala rubuta bayanai","transcribed":"Yana da rubutatun bayanai"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Gaba","previousFrameLabel":"Baya","thumbnailAltText":"aramin Hoto Na Bidiyo"}},"ScatterPlotViewer":{"Selection":{"delete":"Share zai {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Sauya zuwa tsarin littafi mai shafuka","switchToSeparateFrames":"Sauya tsuwa tsarin firam-firam daban"}},"SingleVideoViewerContainer":{"error":"An samu matsala yayin bue maudu\'in."},"VariableStarViewer":{"controls":"masarrafai","figCaption":"Taswirar HR","flip":"buewa","focus":"manufa","highlight":"nunawa","imageTitle":"Taswirar HR: Haske da Zafi","label":"{{id}} na Mataci","periodMultiple":"lokaci mai yawa","phase":"mataki","phaseFocus":"muradin mataki"},"VideoController":{"closeVolume":"Rufe Majayin Sauti","fullscreen":"Nuna Bidiyo a Tsarin Cike Fuskar Na\'ura","openVolume":"Bue Majayin Sauti","pause":"Dakatar da bidiyo","play":"Kunna bidiyo","playbackSpeed":"Zain kunna saurin bidiyo","scrubber":"Majanyin bidiyo zuwa gaba da baya","volumeSlider":"Majayin Sauti"},"ZoomControlButton":{"disable":"kashe tsarin faaawa","enable":"kunna tsarin faaawa"},"loading":"Ana bue maudu\'i","zoomHelp":"Yi amfani da CTRL + scroll domin faaawa"},"TaskArea":{"DisabledTaskPopup":{"body":"Wannan batu yana da rabe-rabe wadatattu, saboda da haka duk wani arin rabe-rabe da aka tura, ba za a yi amfani da shi ba yayin wanwance shi. Har yanzu za ku iya ganin wannan batu domin dubawa.","options":{"dismiss":"Kawar","next":"Batu na gaba da ake da shi","select":"Zai sabon batu"},"title":"An Kammala"},"Tasks":{"BackButton":{"back":"Baya"},"DoneAndTalkButton":{"doneAndTalk":"Kammalawa & Magana","newTab":"a sabon shafin burawuza"},"DoneButton":{"done":"An Kammala"},"ExpertOptions":{"demoToggle":"Tsarin Samfuri","label":"Zaukan Gwani"},"NextButton":{"next":"Na gaba"},"TaskHelp":{"close":"Rufe","label":"Ana buatar taimako game da wannan aikin?"},"demoMode":"A tsarin samfuri, ba za a iya adana rabe-rabe ba. A yi amfani da wannan domin abin da ya shafi samar da rabe-rabe cikin gaggawa da daidaito.","error":"Wata matsala ta auku.","loading":"Lodawa","renderFallback":"An kasa gabato da angaren aiki."},"task":"Aiki","tutorial":"Koyarwa"}}')},"../lib-classifier/dist/esm/translations/ha/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"A latsa sannan a ja daga wurin buewa zuwa wurin rufewa ko a latsa sau biyu a wani wuri a kan layin domin samar da wurin haawa","closePoint":"Latsa wani wuri a kan layin domin samar da wurin rufewa","inactive":"Latsa domin gyara wannan layin","spliceDrag":"A latsa sannan a ja daga wurin buewa zuwa wurin rufewa","splicePoint":"A latsa sau biya a wani wuri a kan layin domin samar da wurin haawa"},"HighlighterTask":{"delete":"Share","noLabels":"Ba a sa rukunoni game da Aikin Haskakawa","status":"An yi alama a guda {{count}}"},"InputStatus":{"drawn":"An zana {{count}}","max":"{{count}} a cikin {{max}} mafi yawa da ake buata ne aka zana","maxAndMin":"{{count}} a cikin {{min}} ake buata, {{max}} ne mafi yawa da aka zana","min":"{{count}} a cikin {{min}} da ake buata ne aka zana"},"LineControls":{"close":"Rufe","delete":"Soke","deleteCancel":"Soke Sharewa","deleteConfirm":"Tabbatar Da Sharewa","lineControls":"Masarrafar Layi","move":"Matsa","redo":"Sake","undo":"Maido"},"SimpleDropdownTask":{"customInputPlaceholder":"Sanya wani abu","otherLabel":"Wani daban...","selectPlaceholder":"Zai amsa"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Cire matata","closeFilters":"Rufe matata","filter":"Tace","removeFilter":"Cire matacin {{valueLabel}}","showing":"Ana nuna {{showing}} a cikin {{total}}"},"Choice":{"cancel":"Soke","identify":"Gano","lessInfo":"arancin bayani","moreInfo":"arin bayani","notThis":"Ba wannan ba"},"ChoiceButton":{"identified":"an gano","openSubmenu":"Bue aramin menu na {{choiceLabel}}"},"ConfusedWith":{"cancel":"Soke","confused":"Wani lokaci aka auke shi a matsayin","itsThis":"Ina tunanin wannan ne"},"DeleteButton":{"delete":"Share zai {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Sake saitawa"},"TextTask":{"TextTagButtons":{"modifiers":"Masu gyara rubutu"}},"TranscriptionLine":{"created":"Rubutaccen bayani da aka samar","editing":"Ana gyara rubutaccen bayani"}}')},"../lib-classifier/dist/esm/translations/he/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"    ","tooltipText":["     ,        .","   ,         ."]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"    ?"},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":"     /"},"RetiredBanner":{"bannerText":":     ","tooltipText":["     ,       .","   ,         ."]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":"","tooltipText":["       .","         ."]},"UserHasFinishedWorkflowBanner":{"bannerText":":  ","tooltipText":["        ,          .","   ,         ."]},"WorkflowIsFinishedBanner":{"bannerText":"   ","tooltipText":["     ,          .","   ,         ."]}},"DrawingTools":{"RotateHandle":"  /."},"FeedbackModal":{"keepClassifying":"","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":""},"FieldGuideItemAnchor":{"ariaTitle":" {{title}}"},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":" "},"FullscreenButton":{"ariaLabel":{"actualSize":"    ","fullscreen":"    "}},"InvertButton":{"ariaLabel":" "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"  "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"    "},"ZoomOutButton":{"ariaLabel":"   "}},"MetaTools":{"CollectionsButton":{"add":" "},"HidePreviousMarksDrawingButton":{"hide":"   ","show":"   "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"   ","showUser":"   "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":"-  "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"  ","goToTalk":"     -Talk","mainPanel":"  QuickTalk","openButton":" {{count}}   .     .","panelContent":"  ","panelHeading":"  "},"errors":{"failPostComment":"      .","failPostDiscussion":"      .","noBoard":"         .","noText":"    .","noUser":"  ."},"loginToPost":"   .","status":{"initialized":"    ","loading":"()","success":" !"},"subjectHasNoComments":"    ."},"SlideTutorial":{"StepNavigation":{"go":"  {{index}}","next":"  ","previous":"  "},"alt":"  {{activeStep}}","error":"      .","getStarted":" ","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":"  {{index}}","next":"  ","previous":"  "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"   "},"InteractionLayer":{"ConfirmModal":{"close":"  ","confirm":"     ?   .","keepWorking":" "},"SaveButton":{"save":" "},"SubTaskPopup":{"notRender":"     .","required":"  ."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":"{{count}}       ,    .","noAggregation":"  .","title":" ","transcriptionsUnavailable":"  ."},"complete":" ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":"  {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"  ","switchToSeparateFrames":"   "}},"SingleVideoViewerContainer":{"error":"   ."},"VariableStarViewer":{"controls":"","figCaption":" HR","flip":"","focus":"","highlight":"","imageTitle":" HR:   ","label":" {{id}}","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"   ","fullscreen":"   ","openVolume":"   ","pause":"  ","play":" ","playbackSpeed":"    ","scrubber":"  ","volumeSlider":"  "},"ZoomControlButton":{"disable":"  ","enable":" "},"loading":" ","zoomHelp":" -Ctrl     "},"TaskArea":{"DisabledTaskPopup":{"body":"     ,        .       .","options":{"dismiss":"","next":"  ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"  ","newTab":" "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":"  "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"?/    "},"demoMode":" ,   .         .","error":" ","loading":"()","renderFallback":"     ."},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/he/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                ","closePoint":"         ","inactive":"    ","spliceDrag":"     ","splicePoint":"         "},"HighlighterTask":{"delete":"","noLabels":"   ","status":"{{count}} "},"InputStatus":{"drawn":"{{count}} ","max":"{{count}}  {{max}}   ","maxAndMin":" {{count}}  {{min}},   {{max}}   ","min":" {{count}}  {{min}}   "},"LineControls":{"close":"","delete":"","deleteCancel":" ","deleteConfirm":" ","lineControls":" ","move":"","redo":" ","undo":" "},"SimpleDropdownTask":{"customInputPlaceholder":" ","otherLabel":"...","selectPlaceholder":" "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":" ","closeFilters":" ","filter":"","removeFilter":"  {{valueLabel}}","showing":" {{showing}}  {{total}}"},"Choice":{"cancel":"","identify":"","lessInfo":" ","moreInfo":" ","notThis":"  "},"ChoiceButton":{"identified":"","openSubmenu":"    {{choiceLabel}}"},"ConfusedWith":{"cancel":"","confused":"  ","itsThis":"  "},"DeleteButton":{"delete":"  {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":" ","editing":" "}}')},"../lib-classifier/dist/esm/translations/hi/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"        ","tooltipText":["            ,          ","    ,               "]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"     ?"},"InProgressConfirmModal":{"cancel":" ","confirm":"","inProgress":"   ,          "},"RetiredBanner":{"bannerText":":      ","tooltipText":["        ,           ","    ,               "]},"SubjectSetProgressBanner":{"alreadySeen":"    ","bannerText":"{{setName}} :  {{number}} / {{total}}","finished":"","tooltipText":["             ","          "]},"UserHasFinishedWorkflowBanner":{"bannerText":":      ","tooltipText":["           ,               ","    ,               "]},"WorkflowIsFinishedBanner":{"bannerText":"     ","tooltipText":["        ,               ","    ,               "]}},"DrawingTools":{"RotateHandle":"  /     "},"FeedbackModal":{"keepClassifying":" ","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":" "},"FieldGuideItemAnchor":{"ariaTitle":"{{title}} "},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":" "},"FullscreenButton":{"ariaLabel":{"actualSize":"     ","fullscreen":"      "}},"InvertButton":{"ariaLabel":" "},"MoveButton":{"ariaLabel":"  "},"ResetButton":{"ariaLabel":"   "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"    "},"ZoomOutButton":{"ariaLabel":"    "}},"MetaTools":{"CollectionsButton":{"add":"  "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":"  "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"   ","goToTalk":"     ","mainPanel":"QuickTalk   ","openButton":"  {{count}} ()       ","panelContent":"  ","panelHeading":" "},"errors":{"failPostComment":"       ","failPostDiscussion":"       ","noBoard":"              ","noText":"      ","noUser":"    "},"loginToPost":"       ","status":{"initialized":"       ","loading":" /    ","success":"  !"},"subjectHasNoComments":"        "},"SlideTutorial":{"StepNavigation":{"go":"{{index}}   ","next":"   ","previous":"   "},"alt":"  {{activeStep}}","error":"      ","getStarted":" ","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":"{{index}}   ","next":"   ","previous":"   "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"    "},"InteractionLayer":{"ConfirmModal":{"close":"   ","confirm":"     ?     ","keepWorking":"  "},"SaveButton":{"save":"   "},"SubTaskPopup":{"notRender":"     ","required":"   "},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":" {{count}}                ","noAggregation":"    ","title":" ","transcriptionsUnavailable":" "},"complete":"  ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":"  "}},"ScatterPlotViewer":{"Selection":{"delete":" {{index}} "}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"    ","switchToSeparateFrames":"     "}},"SingleVideoViewerContainer":{"error":"      "},"VariableStarViewer":{"controls":"","figCaption":"HR ","flip":"","focus":"","highlight":"","imageTitle":"HR :   ","label":"{{id}}  ","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"   ","fullscreen":"  ","openVolume":"  ","pause":" ","play":" ","playbackSpeed":"    ","scrubber":"  ","volumeSlider":" "},"ZoomControlButton":{"disable":"  ","enable":"  "},"loading":"  ","zoomHelp":"    CTRL +   "},"TaskArea":{"DisabledTaskPopup":{"body":"     ,                            ","options":{"dismiss":" ","next":"  ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":" "},"DoneAndTalkButton":{"doneAndTalk":"    ","newTab":"   "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":" ","label":"           ?"},"demoMode":"  ,        ,       ","error":"   ","loading":" /    ","renderFallback":"     "},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/hi/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                      ","closePoint":"            ","inactive":"        ","spliceDrag":"         ","splicePoint":"           "},"HighlighterTask":{"delete":"","noLabels":"      ","status":"{{count}} "},"InputStatus":{"drawn":"{{count}}  ","max":"{{count}}   {{max}}   ","maxAndMin":"{{count}}  {{min}}  {{max}}  ","min":"{{count}}   {{min}}   "},"LineControls":{"close":" ","delete":"","deleteCancel":"  ","deleteConfirm":"   ","lineControls":" ","move":" ","redo":" ","undo":" "},"SimpleDropdownTask":{"customInputPlaceholder":"  ","otherLabel":"...","selectPlaceholder":"  "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"  ","closeFilters":"  ","filter":"","removeFilter":"{{valueLabel}}  ","showing":"{{showing}})   {{total}}   "},"Choice":{"cancel":" ","identify":" /  ","lessInfo":" ","moreInfo":" ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"{{choiceLabel}}    "},"ConfusedWith":{"cancel":" ","confused":"   ...","itsThis":"     "},"DeleteButton":{"delete":" {{choiceLabel}} "}},"TextFromSubjectTask":{"reset":" "},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":"  ","editing":"  "}}')},"../lib-classifier/dist/esm/translations/hr/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Ve ste pregledali ovaj predmetni element","tooltipText":["Ve ste pregledali i klasificirali ovaj predmetni element i stoga daljnje klasifikacije nee doprinijeti njegovoj analizi.","Ako elite pomoi, pokuajte odabrati drugi tijek rada ili doprinijeti drugom projektu."]},"Banner":{"next":"Sljedee","previous":"Prethodno","whyAmISeeingThis":"Zato vidim ovo?"},"InProgressConfirmModal":{"cancel":"Poniti","confirm":"Potvrdi","inProgress":"Zaista elite prijei na drugi predmetni element? Sve vae biljeke za trenutni predmetni element bit e izgubljene."},"RetiredBanner":{"bannerText":"Zavreno: Ovaj predmetni element je povuen","tooltipText":["Ovaj predmetni element ve ima dovoljno klasifikacija i stoga se vaa klasifikacija nee upotrebljavati u njegovoj analizi.","Ako elite pomoi, pokuajte odabrati drugi tijek rada ili doprinijeti drugom projektu."]},"SubjectSetProgressBanner":{"alreadySeen":"Ve pregledano","bannerText":"{{setName}}: predmetni element {{number}}/{{total}}","finished":"Zavreno","tooltipText":["Ovaj projekt omoguuje volonterima da pregledaju predmetne elemente uzastopnim redoslijedom.","Broj pokazuje poloaj ovog predmetnog elementa unutar cijele grupe."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Zavreno: sve je pregledano","tooltipText":["Ve ste sve klasificirali u ovom tijeku rada i stoga se daljnje klasifikacije za ovaj predmetni element nee upotrebljavati u njegovoj analizi.","Ako elite pomoi, pokuajte odabrati drugi tijek rada ili doprinijeti drugom projektu."]},"WorkflowIsFinishedBanner":{"bannerText":"Ovaj tijek rada je zavren","tooltipText":["Svi predmetni elementi u ovom tijeku rada su dovreni i stoga se daljnje klasifikacije za ovaj predmetni element nee upotrebljavati u njegovoj analizi.","Ako elite pomoi, pokuajte odabrati drugi tijek rada ili doprinijeti drugom projektu."]}},"DrawingTools":{"RotateHandle":"Ruica za rotiranje nacrtane napomene/oznake."},"FeedbackModal":{"keepClassifying":"Nastavi s klasifikacijom","label":"Povratne informacije"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Terenski vodi"},"FieldGuideItem":{"ariaTitle":"Idi natrag na popis stavki Terenskog vodia"},"FieldGuideItemAnchor":{"ariaTitle":"Odaberi {{title}}"},"title":"Terenski vodi"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Zabiljei"},"FullscreenButton":{"ariaLabel":{"actualSize":"Prikai predmetni element u normalnoj veliini","fullscreen":"Prikai predmetni element preko cijelog zaslona"}},"InvertButton":{"ariaLabel":"Okreni predmetni element"},"MoveButton":{"ariaLabel":"Premjesti predmetni element"},"ResetButton":{"ariaLabel":"Ponovno postavi prikaz predmetnog elementa"},"RotateButton":{"ariaLabel":"Rotiraj predmetni element"},"ZoomInButton":{"ariaLabel":"Uveaj prikaz predmetnog elementa"},"ZoomOutButton":{"ariaLabel":"Umanji prikaz predmetnog elementa"}},"MetaTools":{"CollectionsButton":{"add":"Dodaj u zbirke"},"HidePreviousMarksDrawingButton":{"hide":"Sakrij prethodne oznake","show":"Prikai prethodne oznake"},"HidePreviousTranscriptionsButton":{"hide":"Sakrij sve oznake","show":"Prikai sve oznake","showUser":"Prikai svoje oznake"},"MetadataButton":{"label":"Informacije o predmetnom elementu"},"MetadataModal":{"table":{"label":"Oznaka","value":"Vrijednost"},"title":"Metapodaci o predmetnom elementu"}},"ModalTutorial":{"title":"Vodi"},"QuickTalk":{"aria":{"closeButton":"Zatvori panel za komentare","goToTalk":"Idi na raspravu o predmetnom elementu na Talku","mainPanel":"Panel za komentare QuickTalk","openButton":"Predmetni element ima {{count}} komentar(a). Kliknite za proirenje.","panelContent":"Komentari u raspravi o predmetnom elementu","panelHeading":"Rasprava o predmetnom elementu"},"errors":{"failPostComment":"Nije mogue dodati komentare postojeoj raspravi.","failPostDiscussion":"Nije mogue dodati komentare u novu raspravu.","noBoard":"Ploa za komentare o predmetnom elementu jo nije postavljena za ovaj projekt.","noText":"Nije mogue objaviti prazan komentar.","noUser":"Korisnik nije prijavljen."},"loginToPost":"Prijavite se kako biste objavili komentar.","status":{"initialized":"Ostavite biljeku o ovom predmetnom elementu","loading":"Objavljivanje komentara...","success":"Komentar je objavljen!"},"subjectHasNoComments":"Ovaj predmetni element jo nema nijedan komentar."},"SlideTutorial":{"StepNavigation":{"go":"Idi na korak {{index}}","next":"Idi na sljedei korak","previous":"Idi na prethodni korak"},"alt":"Korak vodia {{activeStep}}","error":"Korak vodia nije mogue uitati.","getStarted":"Poetak rada","heading":"Vodi za {{projectDisplayName}}"},"StepNavigation":{"go":"Idi na korak {{index}}","next":"Idi na sljedei korak","previous":"Idi na prethodni korak"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Trakasti grafikon"},"ImageAndTextViewer":{"textIconAltText":"Ikona za preglednik teksta"},"InteractionLayer":{"ConfirmModal":{"close":"Zatvori bez spremanja","confirm":"Zaista elite zatvoriti? Ova e oznaka biti izbrisana.","keepWorking":"Nastavi s radom"},"SaveButton":{"save":"Spremi i zatvori"},"SubTaskPopup":{"notRender":"Komponenta zadatka nije se mogla prikazati.","required":"Ovaj zadatak je obavezan."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"agregirana transkripcija","explanation":"Ovih {{count}} transkripcija poslali su prethodni volonteri i ne mogu se mijenjati.","noAggregation":"Agregacija nije dostupna.","title":"Prethodne transkripcije","transcriptionsUnavailable":"Transkripcije nisu dostupne."},"complete":"Transkripcija je dovrena","transcribed":"Ima transkripcije"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Sljedee","previousFrameLabel":"Prethodno","thumbnailAltText":"Sliica slike"}},"ScatterPlotViewer":{"Selection":{"delete":"Izbrii odabir {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Prijei na prikaz za prebacivanje","switchToSeparateFrames":"Prijei na prikaz odvojenih okvira"}},"SingleVideoViewerContainer":{"error":"Dolo je do greke prilikom uitavanja predmetnog elementa."},"VariableStarViewer":{"controls":"kontrole","figCaption":"HR dijagram","flip":"okreni","focus":"fokus","highlight":"istaknuto","imageTitle":"HR dijagram: Svjetlina u odnosu na temperaturu","label":"Filtar {{id}}","periodMultiple":"vie razdoblja","phase":"faza","phaseFocus":"fazni fokus"},"VideoController":{"closeVolume":"Zatvori kliza za glasnou","fullscreen":"Prikai video preko cijelog zaslona","openVolume":"Otvori kliza za glasnou","pause":"Pauziraj video","play":"Reproduciraj video","playbackSpeed":"Odabir brzine reprodukcije videa","scrubber":"Kliza videoreproduktora","volumeSlider":"Kliza za glasnou"},"ZoomControlButton":{"disable":"onemogui zumiranje","enable":"omogui zumiranje"},"loading":"Uitavanje predmetnog elementa","zoomHelp":"Zumiraj pomou CTRL +"},"TaskArea":{"DisabledTaskPopup":{"body":"Ovaj predmetni element ima dovoljno klasifikacija i stoga se dodatne podnesene klasifikacije nee upotrebljavati u njegovoj analizi. I dalje moete pregledati ovaj predmetni element kao referencu.","options":{"dismiss":"Odbaci","next":"Sljedei dostupan predmetni element","select":"Odaberi novi predmetni element"},"title":"Zavreno"},"Tasks":{"BackButton":{"back":"Natrag"},"DoneAndTalkButton":{"doneAndTalk":"Zavri i priaj","newTab":"u novoj kartici"},"DoneButton":{"done":"Gotovo"},"ExpertOptions":{"demoToggle":"Demo nain rada","label":"Opcije za strunjake"},"NextButton":{"next":"Sljedee"},"TaskHelp":{"close":"Zatvori","label":"Trebate li pomo s ovim zadatkom?"},"demoMode":"U demo nainu rada klasifikacije nee biti spremljene. Upotrebljavajte ga za brze, netone demonstracije suelja klasifikacije.","error":"Neto nije bilo u redu","loading":"Uitavanje","renderFallback":"Komponenta zadatka nije se mogla prikazati."},"task":"Zadatak","tutorial":"Vodi"}}')},"../lib-classifier/dist/esm/translations/hr/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Klikni i povuci od toke otvaranja do toke zatvaranja ili dvaput klikni bilo gdje na liniji za kreiranje toke spajanja","closePoint":"Klikni bilo gdje na liniji za postavljanje toke zatvaranja","inactive":"Klikni za ureivanje ove linije","spliceDrag":"Klikni i povuci od toke otvaranja do toke zatvaranja","splicePoint":"Dvaput klikni bilo gdje na liniji za kreiranje toke spajanja"},"HighlighterTask":{"delete":"Izbrii","noLabels":"Nema oznaka za zadatak isticanja","status":"{{count}} oznaeno"},"InputStatus":{"drawn":"{{count}} izvueno","max":"Izvueno {{count}} od maksimalno {{max}}","maxAndMin":"Potrebno je {{count}} od {{min}}, maksimalno izvueno {{max}}","min":"Potrebno je izvui {{count}} od {{min}}"},"LineControls":{"close":"Zatvori","delete":"Izbrii","deleteCancel":"Poniti brisanje","deleteConfirm":"Potvrdi brisanje","lineControls":"Kontrole linije","move":"Premjesti","redo":"Vrati","undo":"Poniti"},"SimpleDropdownTask":{"customInputPlaceholder":"Unesi neto","otherLabel":"Drugo...","selectPlaceholder":"Odaberi odgovor"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Oisti filtre","closeFilters":"Zatvori filtre","filter":"Filtar","removeFilter":"Ukloni filtar {{valueLabel}}","showing":"Prikazuje se {{showing}} od {{total}}"},"Choice":{"cancel":"Poniti","identify":"Identificiraj","lessInfo":"Manje informacija","moreInfo":"Vie informacija","notThis":"Ne ovo"},"ChoiceButton":{"identified":"identificirano","openSubmenu":"Otvori podizbornik za {{choiceLabel}}"},"ConfusedWith":{"cancel":"Poniti","confused":"Ponekad se zamijenjuje s","itsThis":"Mislim da je ovo"},"DeleteButton":{"delete":"Izbrii izbor {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Ponovno postavi"},"TextTask":{"TextTagButtons":{"modifiers":"Modifikatori teksta"}},"TranscriptionLine":{"created":"Izraena transkripcija","editing":"Ureivanje transkripcije"}}')},"../lib-classifier/dist/esm/translations/hu/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Mr lttad ezt a trgyat","tooltipText":["Ezt a trgyat mr lttad s besoroltad mr, ezrt a tovbbi besorolsokat nem hasznljuk fel az elemzs sorn.","Ha segteni szeretnl, prblj vlasztani egy msik munkafolyamatot, vagy vegyl rszt egy msik projektben."]},"Banner":{"next":"Kvetkez","previous":"Elz","whyAmISeeingThis":"MIrt ltom ezt?"},"InProgressConfirmModal":{"cancel":"Mgse","confirm":"Megersts","inProgress":"Biztosan egy msik trgyra szeretnl naviglni? Az aktulis trgyhoz ksztett sszes annotci elveszik."},"RetiredBanner":{"bannerText":"Elkszlt: Ezt a trgyat kivezettk","tooltipText":["A trgyhoz mr elg besorols tartozik, ezrt a tidet nem hasznljuk fel az elemzs sorn.","Ha segteni szeretnl, prblj vlasztani egy msik munkafolyamatot, vagy vegyl rszt egy msik projektben."]},"SubjectSetProgressBanner":{"alreadySeen":"Mr megtekintve","bannerText":"{{setName}}:  {{total}}/{{number}}. trgy","finished":"Befejezve","tooltipText":["Ez a projekt lehetv teszi, hogy az nkntesek egymst kvet sorrendben tekintsk meg a trgyakat.","A szm a trgy pozcijt mutatja meg a teljes csoportban."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Ksz: Mr mindent lttl","tooltipText":["A munkafolyamatban szerepl sszes trgyat besoroltad mr, ezrt a trggyal kapcsolatos tovbbi besorolsokat nem hasznljuk fel az elemzs sorn.","Ha segteni szeretnl, prblj vlasztani egy msik munkafolyamatot, vagy vegyl rszt egy msik projektben."]},"WorkflowIsFinishedBanner":{"bannerText":"Ez a munkafolyamat elkszlt","tooltipText":["A munkafolyamatban szerepl sszes trgy elkszlt, ezrt a trggyal kapcsolatos tovbbi besorolsokat nem hasznljuk fel az elemzs sorn.","Ha segteni szeretnl, prblj vlasztani egy msik munkafolyamatot, vagy vegyl rszt egy msik projektben."]}},"DrawingTools":{"RotateHandle":"Foganty a rajzolt annotci/jells elforgatshoz."},"FeedbackModal":{"keepClassifying":"Besorols folytatsa","label":"Visszajelzs"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"tmutat"},"FieldGuideItem":{"ariaTitle":"Vissza az tmutat elemlistjhoz"},"FieldGuideItemAnchor":{"ariaTitle":"{{title}} kijellse"},"title":"tmutat"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Annotls"},"FullscreenButton":{"ariaLabel":{"actualSize":"Trgy megjelentse norml mretben","fullscreen":"Trgy megjelentse teljse kpernys mdban"}},"InvertButton":{"ariaLabel":"Trgy invertlsa"},"MoveButton":{"ariaLabel":"Trgy mozgatsa"},"ResetButton":{"ariaLabel":"Trgynzet alaphelyzetbe lltsa"},"RotateButton":{"ariaLabel":"Trgy elforgatsa"},"ZoomInButton":{"ariaLabel":"Rnagyts a trgyra"},"ZoomOutButton":{"ariaLabel":"Kizoomols a trgyrl"}},"MetaTools":{"CollectionsButton":{"add":"Hozzads gyjtemnyekhez"},"HidePreviousMarksDrawingButton":{"hide":"Korbbi jellsek elrejtse","show":"Korbbi jellsek megjelentse"},"HidePreviousTranscriptionsButton":{"hide":"sszes jells elrejtse","show":"Minden jells megjelentse","showUser":"Jellseid megjelentse"},"MetadataButton":{"label":"Trgyinformcik"},"MetadataModal":{"table":{"label":"Cmke","value":"rtk"},"title":"Trgy metaadatai"}},"ModalTutorial":{"title":"tmutat"},"QuickTalk":{"aria":{"closeButton":"Hozzszlspanel bezrsa","goToTalk":"Ugrs a trggyal kapcsolatos megbeszlsre a Talk frumban","mainPanel":"QuickTalk-hozzszlspanel","openButton":"A tmhoz  {{count}} hozzszls rkezett. Kattints a kibontshoz.","panelContent":"Trggyal kapcsolatos megbeszls hozzszlsai","panelHeading":"Trggyal kapcsolatos megbeszls"},"errors":{"failPostComment":"Nem sikerlt hozzszlsokat adni a meglv beszlgetshez.","failPostDiscussion":"Nem sikerlt hozzszlsokat adni az j beszlgetshez.","noBoard":"A projekthez mg nincs belltva frum a trggyal kapcsolatos megbeszlsekhez.","noText":"Nem tehetsz kzz res hozzszlst.","noUser":"A felhasznl nincs bejelentkezve."},"loginToPost":"A hozzszlshoz jelentkezz be.","status":{"initialized":"Megjegyzs hagysa errl a trgyrl","loading":"Hozzszls kzzttele","success":"Hozzszls kzztve!"},"subjectHasNoComments":"Mg nincsenek hozzszlsok a trggyal kapcsolatosan"},"SlideTutorial":{"StepNavigation":{"go":"Ugrs a(z) {{index}}. lpsre ","next":"Ugrs a kvetkez lpsre","previous":"Ugrs az elz lpsre"},"alt":"{{activeStep}}. tmutatlps","error":"Az tmutatlps betltse nem sikerlt.","getStarted":"Kezdjnk neki","heading":"{{projectDisplayName}} tmutatja"},"StepNavigation":{"go":"Ugrs a(z) {{index}}. lpsre ","next":"Ugrs a kvetkez lpsre","previous":"Ugrs az elz lpsre"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Oszlopdiagram"},"ImageAndTextViewer":{"textIconAltText":"Ikon a szvegmegjelenthz"},"InteractionLayer":{"ConfirmModal":{"close":"Bezrs ments nlkl","confirm":"Biztosan be szeretnd zrni? Ez a jells trlve lesz.","keepWorking":"Munka folytatsa"},"SaveButton":{"save":"Ments s bezrs"},"SubTaskPopup":{"notRender":"A feladatsszetevt nem sikerlt megjelenteni.","required":"Ez a feladat ktelez."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"sszestett trat","explanation":"Ezt a(z) {{count}} tiratot korbbi nkntesek kldtk be, s nem mdosthatk.","noAggregation":"Nincs elrhet sszegzs","title":"Korbbi tiratok","transcriptionsUnavailable":"Az tiratok nem rhetk el."},"complete":"tirat befejezve","transcribed":"tiratokkal rendelkezik"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Kvetkez","previousFrameLabel":"Elz","thumbnailAltText":"Kp indexkpe"}},"ScatterPlotViewer":{"Selection":{"delete":"{{index}} kijells trlse"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Vlts lapozhat nzetre","switchToSeparateFrames":"Vlts klnll kpkockkbl ll nzetre"}},"SingleVideoViewerContainer":{"error":"Hiba trtnt a trgy betltsekor"},"VariableStarViewer":{"controls":"vezrlk","figCaption":"HR-diagram","flip":"megfordts","focus":"fkusz","highlight":"kiemels","imageTitle":"HR-diagram: fnyessg s hmrsklet","label":"{{id}} szr","periodMultiple":"tbb peridus","phase":"fzis","phaseFocus":"fzisfkusz"},"VideoController":{"closeVolume":"Hanger csszka bezrsa","fullscreen":"Vide megjelentse teljes kpernyn","openVolume":"Hanger csszka megnyitsa","pause":"Vide szneteltetse","play":"Vide lejtszsa","playbackSpeed":"Vide lejtszsi sebessgnek kivlasztsa","scrubber":"Videolejtsz-csszka","volumeSlider":"Hanger csszka"},"ZoomControlButton":{"disable":"nagyts/kicsinyts letiltsa","enable":"nagyts/kicsinyts engedlyezse"},"loading":"Trgy betltse","zoomHelp":"Nagytshoz hasznld a CTRL + grgets billentykombincit"},"TaskArea":{"DisabledTaskPopup":{"body":"Ez a trgy elegend besorolssal rendelkezik, gy a tovbbi benyjtott besorolsok nem lesznek felhasznlva az elemzs sorn. Ezt a trgyat tovbbra is megtekintheted referenciaknt.","options":{"dismiss":"Elutast","next":"Kvetkez elrhet trgy","select":"Vlassz j tmt"},"title":"Befejezve"},"Tasks":{"BackButton":{"back":"Vissza"},"DoneAndTalkButton":{"doneAndTalk":"Ksz s Talk frum","newTab":"j lapon"},"DoneButton":{"done":"Ksz"},"ExpertOptions":{"demoToggle":"Dem md","label":"Szakrti belltsok"},"NextButton":{"next":"Kvetkez"},"TaskHelp":{"close":"Bezrs","label":"Segtsgre van szksged a feladattal kapcsolatosan?"},"demoMode":"Dem mdban az besorolsok nem kerlnek mentsre. Ezt a besorolsi fellet gyors s pontatlan demihoz hasznlhatod.","error":"Valamilyen hiba trtnt.","loading":"Betlts","renderFallback":"A feladatsszetevt nem sikerlt megjelenteni."},"task":"Feladat","tutorial":"tmutat"}}')},"../lib-classifier/dist/esm/translations/hu/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Katints a nyit pontra, s hzd a lezrsi pontra, vagy kattints dupln a vonal brmelyik pontjra illesztsi pont ltrehozshoz.","closePoint":"Kattints a vonal brmely pontjra lezr pont belltshoz","inactive":"A vonal szerkesztshez kattints","spliceDrag":"Katintsa a nyit pontra, s hzd a lezr pontra.","splicePoint":"Illesztsi pont ltrehozshoz kattints dupln a vonal brmely pontjra."},"HighlighterTask":{"delete":"Trls","noLabels":"Nincsenek cmkk a Kiemelfeladathoz","status":"{{count}} megjellve"},"InputStatus":{"drawn":"{{count}} megrajzolva","max":"{{max}}/{{count}} maximum megrajzolva","maxAndMin":" {{min}}/{{count}} szksges, {{max}} rajzolva maximum","min":"{{min}}/{{count}} ktelez megrajzolva"},"LineControls":{"close":"Bezrs","delete":"Trls","deleteCancel":"Trls megszaktsa","deleteConfirm":"Trls megerstse","lineControls":"Vonalevezrlk","move":"Mozgats","redo":"jra","undo":"Visszavons"},"SimpleDropdownTask":{"customInputPlaceholder":"Adj meg valamit","otherLabel":"Egyb","selectPlaceholder":"Vlassz ki egy vlaszt"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Szrk trlse","closeFilters":"Szrk bezrsa","filter":"Szr","removeFilter":"{{valueLabel}} szr eltvoltsa","showing":"{{total}}/{{showing}} megjelentve"},"Choice":{"cancel":"Mgse","identify":"Beazonost","lessInfo":"Kevesebb informci","moreInfo":"Tovbbi informci","notThis":"Nem ez"},"ChoiceButton":{"identified":"azonostva","openSubmenu":"Almen megnyitsa a kvetkezhz: {{choiceLabel}}"},"ConfusedWith":{"cancel":"Mgse","confused":"Nha sszetveszthet ezzel:","itsThis":"Szerintem ez az"},"DeleteButton":{"delete":"A(z) {{choiceLabel}} vlaszts trlse"}},"TextFromSubjectTask":{"reset":"Visszallts"},"TextTask":{"TextTagButtons":{"modifiers":"Szvegmdostk"}},"TranscriptionLine":{"created":"tirat ltrehozva","editing":"tirat szerkesztse"}}')},"../lib-classifier/dist/esm/translations/hy/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"     ","tooltipText":["       ,       :","    ,          :"]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"    "},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":" ,       :        :"},"RetiredBanner":{"bannerText":" .     ","tooltipText":["     ,       :","   ,          :"]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}  {{number}}/{{total}}","finished":"","tooltipText":["        :","       :"]},"UserHasFinishedWorkflowBanner":{"bannerText":"      ","tooltipText":["        ,           :","   ,          :"]},"WorkflowIsFinishedBanner":{"bannerText":"    ","tooltipText":["      ,           :","   ,          :"]}},"DrawingTools":{"RotateHandle":"   / :"},"FeedbackModal":{"keepClassifying":" ","label":" "},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":"     "},"FieldGuideItemAnchor":{"ariaTitle":" {{title}}"},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":""},"FullscreenButton":{"ariaLabel":{"actualSize":"    ","fullscreen":"     "}},"InvertButton":{"ariaLabel":" "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"  "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":" "},"ZoomOutButton":{"ariaLabel":" "}},"MetaTools":{"CollectionsButton":{"add":" "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"   "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"   ","showUser":"   "},"MetadataButton":{"label":"  "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"  ","goToTalk":"   Talk-","mainPanel":"QuickTalk  ","openButton":"  {{count}}    ","panelContent":"  ","panelHeading":" "},"errors":{"failPostComment":"    ","failPostDiscussion":"    ","noBoard":"        :","noText":"    ","noUser":"   "},"loginToPost":"      ","status":{"initialized":"    ","loading":" ","success":"  "},"subjectHasNoComments":"    "},"SlideTutorial":{"StepNavigation":{"go":" {{index}} ","next":"  ","previous":"  "},"alt":"  {{activeStep}}","error":"   ","getStarted":"","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":" {{index}} ","next":"  ","previous":"  "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"   "},"InteractionLayer":{"ConfirmModal":{"close":"  ","confirm":" ,    :   :","keepWorking":" "},"SaveButton":{"save":"  "},"SubTaskPopup":{"notRender":"    :","required":"   "},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":" {{count}}          ","noAggregation":"  ","title":" ","transcriptionsUnavailable":"  "},"complete":"  ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":"  {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"  ","switchToSeparateFrames":"   "}},"SingleVideoViewerContainer":{"error":"    "},"VariableStarViewer":{"controls":"","figCaption":"HR ","flip":" ","focus":" ","highlight":"","imageTitle":"HR .   ","label":" {{id}}","periodMultiple":"  ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"  ","fullscreen":"    ","openVolume":"  ","pause":" ","play":" ","playbackSpeed":"   ","scrubber":" ","volumeSlider":""},"ZoomControlButton":{"disable":"  ","enable":"  "},"loading":" ","zoomHelp":" CTRL +   "},"TaskArea":{"DisabledTaskPopup":{"body":"    ,         :         :","options":{"dismiss":"","next":"  ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":" "},"DoneAndTalkButton":{"doneAndTalk":"   ","newTab":" "},"DoneButton":{"done":" "},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"      "},"demoMode":"    :     ,    :","error":"-   ","loading":"","renderFallback":"    :"},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/hy/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                ","closePoint":"       ","inactive":"    ","spliceDrag":"      ","splicePoint":"         "},"HighlighterTask":{"delete":"","noLabels":"    ","status":"{{count}} "},"InputStatus":{"drawn":"{{count}}-  ","max":" {{max}}- {{count}}-  ","maxAndMin":"  {{min}}- {{count}},   {{max}}","min":" {{min}}- {{count}}-  "},"LineControls":{"close":"","delete":"","deleteCancel":" ","deleteConfirm":" ","lineControls":" ","move":"","redo":"","undo":""},"SimpleDropdownTask":{"customInputPlaceholder":"  ","otherLabel":"","selectPlaceholder":" "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":" ","closeFilters":" ","filter":"","removeFilter":" {{valueLabel}}","showing":"  {{total}}- {{showing}}-"},"Choice":{"cancel":"","identify":"","lessInfo":"  ","moreInfo":"  ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"  {{choiceLabel}}- "},"ConfusedWith":{"cancel":"","confused":"  ","itsThis":"    "},"DeleteButton":{"delete":"  {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":" ","editing":" "}}')},"../lib-classifier/dist/esm/translations/id/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Anda sudah melihat subjek ini.","tooltipText":["Anda sudah melihat dan mengklasifikasikan subjek ini, jadi klasifikasi lanjutan tidak akan berkontribusi dalam analisis.","Jika Anda ingin membantu, coba pilih alur kerja lain atau berkontribusi di proyek lain."]},"Banner":{"next":"Berikutnya","previous":"Sebelumnya","whyAmISeeingThis":"Mengapa saya melihat ini?"},"InProgressConfirmModal":{"cancel":"Batal","confirm":"Konfirmasi","inProgress":"Yakin ingin menavigasi ke Subjek lain? Semua anotasi yang Anda buat untuk Subjek saat ini akan hilang."},"RetiredBanner":{"bannerText":"Selesai: Subjek ini sudah tidak digunakan","tooltipText":["Subjek ini sudah memiliki klasifikasi yang memadai, jadi klasifikasi Anda tidak akan digunakan dalam analisis.","Jika Anda ingin membantu, coba pilih alur kerja lain atau berkontribusi di proyek lain."]},"SubjectSetProgressBanner":{"alreadySeen":"Sudah dilihat","bannerText":"{{setName}}: Subjek {{number}}/{{total}}","finished":"Selesai","tooltipText":["Project ini memungkinkan sukarelawan melihat subjek secara berurutan.","Angka ini menunjukkan posisi subjek dalam total grup."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Selesai: Anda sudah melihat semuanya","tooltipText":["Anda sudah mengklasifikasikan semua dalam alur kerja ini, jadi klasifikasi lanjutan untuk subjek ini tidak akan digunakan dalam analisis.","Jika Anda ingin membantu, coba pilih alur kerja lain atau berkontribusi di proyek lain."]},"WorkflowIsFinishedBanner":{"bannerText":"Alur kerja ini sudah selesai","tooltipText":["Semua subjek dalam alur kerja ini sudah selesai, jadi klasifikasi lanjutan untuk subjek ini tidak akan digunakan dalam analisis.","Jika Anda ingin membantu, coba pilih alur kerja lain atau berkontribusi di proyek lain."]}},"DrawingTools":{"RotateHandle":"Tangkai untuk memutar anotasi/tanda yang dibuat."},"FeedbackModal":{"keepClassifying":"Terus Klasifikasikan","label":"Masukan"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Panduan Lapangan"},"FieldGuideItem":{"ariaTitle":"Kembali ke daftar item Pedoman Lapangan"},"FieldGuideItemAnchor":{"ariaTitle":"Pilih {{title}}"},"title":"Pedoman Lapangan"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Buat anotasi"},"FullscreenButton":{"ariaLabel":{"actualSize":"Lihat subjek dalam ukuran normal","fullscreen":"Lihat subjek dalam mode layar penuh"}},"InvertButton":{"ariaLabel":"Balikkan subjek"},"MoveButton":{"ariaLabel":"Pindahkan subjek"},"ResetButton":{"ariaLabel":"Atur ulang tampilan subjek"},"RotateButton":{"ariaLabel":"Putar subjek"},"ZoomInButton":{"ariaLabel":"Perbesar subjek"},"ZoomOutButton":{"ariaLabel":"Perkecil subjek"}},"MetaTools":{"CollectionsButton":{"add":"Tambah ke koleksi"},"HidePreviousMarksDrawingButton":{"hide":"Sembunyikan Tanda Sebelumnya","show":"Tampilkan Tanda Sebelumnya"},"HidePreviousTranscriptionsButton":{"hide":"Sembunyikan Semua Tanda","show":"Tampilkan Semua Tanda","showUser":"Tampilkan Tanda Anda"},"MetadataButton":{"label":"Info Subjek"},"MetadataModal":{"table":{"label":"Label","value":"Nilai"},"title":"Metadata Subjek"}},"ModalTutorial":{"title":"Panduan"},"QuickTalk":{"aria":{"closeButton":"Tutup panel komentar","goToTalk":"Masuk ke Diskusi Subjek di Bicarakan","mainPanel":"Panel Komentar QuickTalk","openButton":"Subjek mendapat {{count}} komentar. Klik untuk memperluas.","panelContent":"Komentar Diskusi Subjek","panelHeading":"Diskusi Subjek"},"errors":{"failPostComment":"Tidak bisa menambahkan komentar ke diskusi yang sudah ada.","failPostDiscussion":"Tidak bisa menambahkan komentar ke diskusi baru.","noBoard":"Papan untuk komentar subjek belum dibuat untuk proyek ini.","noText":"Tidak bisa memposting komentar kosong.","noUser":"Pengguna belum masuk."},"loginToPost":"Masuk untuk memposting komentar.","status":{"initialized":"Beri catatan tentang subjek ini","loading":"Memposting komentar...","success":"Komentar diposting!"},"subjectHasNoComments":"Subjek ini belum mendapat komentar."},"SlideTutorial":{"StepNavigation":{"go":"Ke langkah {{index}}","next":"Ke langkah berikutnya","previous":"Ke langkah sebelumnya"},"alt":"Langkah panduan {{activeStep}}","error":"Langkah panduan tidak bisa dimuat.","getStarted":"Mulai","heading":"Panduan {{projectDisplayName}}"},"StepNavigation":{"go":"Ke langkah {{index}}","next":"Ke langkah berikutnya","previous":"Ke langkah sebelumnya"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Diagram batang"},"ImageAndTextViewer":{"textIconAltText":"Ikon untuk penampil teks"},"InteractionLayer":{"ConfirmModal":{"close":"Tutup tanpa menyimpan","confirm":"Yakin ingin menutup? Tanda ini akan dihapus.","keepWorking":"Lanjutkan"},"SaveButton":{"save":"Simpan dan Tutup"},"SubTaskPopup":{"notRender":"Komponen tugas tidak bisa diubah.","required":"Tugas ini harus ada."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"transkripsi agregat","explanation":"{{count}} transkripsi ini sudah dikirim oleh sukarelawan terdahulu dan tidak bisa diubah.","noAggregation":"Agregasi tidak tersedia.","title":"Transkripsi Sebelumnya","transcriptionsUnavailable":"Transkripsi tidak tersedia."},"complete":"Transkripsi selesai","transcribed":"Ada transkripsi"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Berikutnya","previousFrameLabel":"Sebelumnya","thumbnailAltText":"Gambar Mini"}},"ScatterPlotViewer":{"Selection":{"delete":"Hapus pilihan {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Beralih ke tampilan flipbook","switchToSeparateFrames":"Beralih ke tampilan frame terpisah"}},"SingleVideoViewerContainer":{"error":"Ada kesalahan saat memuat subjek."},"VariableStarViewer":{"controls":"kontrol","figCaption":"Diagram HR","flip":"balik","focus":"fokus","highlight":"sorot","imageTitle":"Diagram HR: Kilau vs. Suhu","label":"Filter {{id}}","periodMultiple":"periode banyak","phase":"fase","phaseFocus":"fokus fase"},"VideoController":{"closeVolume":"Tutup Penggeser Volume","fullscreen":"Tampilkan Video di Layar Penuh","openVolume":"Buka Penggeser Volume","pause":"Jeda video","play":"Putar video","playbackSpeed":"Pilihan kecepatan pemutaran video","scrubber":"Scrubber pemutar video","volumeSlider":"Penggeser Volume"},"ZoomControlButton":{"disable":"nonaktifkan perbesar","enable":"aktifkan perbesar"},"loading":"Memuat subjek","zoomHelp":"Gunakan CTRL + gulir untuk memperbesar"},"TaskArea":{"DisabledTaskPopup":{"body":"Subjek ini memiliki klasifikasi yang memadai, jadi klasifikasi tambahan lain yang dikirim tidak akan digunakan dalam analisisnya. Anda masih dapat melihat subjek ini sebagai rujukan.","options":{"dismiss":"Buang","next":"Subjek yang tersedia selanjutnya","select":"Pilih subjek baru"},"title":"Selesai"},"Tasks":{"BackButton":{"back":"Kembali"},"DoneAndTalkButton":{"doneAndTalk":"Selesai & Bicarakan","newTab":"di tab baru"},"DoneButton":{"done":"Selesai"},"ExpertOptions":{"demoToggle":"Mode Demo","label":"Opsi Ahli"},"NextButton":{"next":"Berikutnya"},"TaskHelp":{"close":"Tutup","label":"Perlu bantuan untuk tugas ini?"},"demoMode":"Dalam mode demo, klasifikasi tidak akan disimpan. Gunakan ini untuk demo cepat yang tidak akurat di antarmuka klasifikasi.","error":"Ada yang salah","loading":"Memuat","renderFallback":"Komponen tugas tidak bisa diubah."},"task":"Tugas","tutorial":"Panduan"}}')},"../lib-classifier/dist/esm/translations/id/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Klik dan seret dari titik buka ke titik tutup atau klik dua kali di mana saja pada garis untuk membuat titik sambung","closePoint":"Klik di mana saja pada garis untuk menetapkan titik tutup","inactive":"Klik untuk mengedit garis ini","spliceDrag":"Klik dan seret dari titik buka ke titik tutup","splicePoint":"Klik dua kali di mana saja pada garis untuk membuat titik sambung"},"HighlighterTask":{"delete":"Hapus","noLabels":"Tidak ada label untuk Tugas Highlighter","status":"{{count}} Ditandai"},"InputStatus":{"drawn":"{{count}} garis ditarik","max":"{{count}} dari {{max}} maksimal garis ditarik","maxAndMin":"{{count}} dari {{min}} harus ada, maksimal {{max}} garis ditarik","min":"{{count}} dari {{min}} garis harus ditarik"},"LineControls":{"close":"Tutup","delete":"Hapus","deleteCancel":"Batalkan Penghapusan","deleteConfirm":"Konfirmasi Penghapusan","lineControls":"Pengaturan Garis","move":"Pindahkan","redo":"Ulang","undo":"Urungkan"},"SimpleDropdownTask":{"customInputPlaceholder":"Ketikkan sesuatu","otherLabel":"Lainnya...","selectPlaceholder":"Pilih jawaban"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Hapus filter","closeFilters":"Tutup filter","filter":"Filter","removeFilter":"Hapus filter {{valueLabel}}","showing":"Menampilkan {{showing}} dari {{total}}"},"Choice":{"cancel":"Batal","identify":"Identifikasi","lessInfo":"Lebih sedikit info","moreInfo":"Lebih banyak info","notThis":"Bukan ini"},"ChoiceButton":{"identified":"teridentifikasi","openSubmenu":"Buka submenu untuk {{choiceLabel}}"},"ConfusedWith":{"cancel":"Batal","confused":"Kadang tertukar dengan","itsThis":"Menurut saya ini"},"DeleteButton":{"delete":"Hapus pilihan {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Atur ulang"},"TextTask":{"TextTagButtons":{"modifiers":"Pengubah teks"}},"TranscriptionLine":{"created":"Transkripsi yang dibuat","editing":"Mengedit transkripsi"}}')},"../lib-classifier/dist/esm/translations/it/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Hai gi visto questo oggetto","tooltipText":["Hai gi visto e contribuito a questo oggetto. Eventuali altri contributi non verranno inclusi nell\'analisi.","Se vuoi dare una mano, prova a scegliere un altro flusso di lavoro o a contribuire a un altro progetto."]},"Banner":{"next":"Avanti","previous":"Indietro","whyAmISeeingThis":"Perch lo vedo?"},"InProgressConfirmModal":{"cancel":"Annulla","confirm":"Conferma","inProgress":"Confermi di voler passare a un altro oggetto? Eventuali annotazioni sull\'oggetto attuale andranno perse."},"RetiredBanner":{"bannerText":"Terminato: questo oggetto  stato ritirato","tooltipText":["Questo oggetto ha gi un numero sufficiente di contributi. Il tuo contributo non verr incluso nell\'analisi.","Se vuoi dare una mano, prova a scegliere un altro flusso di lavoro o a contribuire a un altro progetto."]},"SubjectSetProgressBanner":{"alreadySeen":"Gi visto","bannerText":"{{setName}}: oggetto {{number}}/{{total}}","finished":"Terminato","tooltipText":["Questo progetto permette ai volontari di vedere gli oggetti in ordine di sequenza","Il numero indica la posizione dell\'oggetto all\'interno del gruppo totale."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Terminato: hai visto tutto","tooltipText":["Hai gi completato tutti i contributi di questo flusso di lavoro. Eventuali altri contributi su questo oggetto non verranno inclusi nell\'analisi.","Se vuoi dare una mano, prova a scegliere un altro flusso di lavoro o a contribuire a un altro progetto."]},"WorkflowIsFinishedBanner":{"bannerText":"Questo flusso di lavoro  terminato","tooltipText":["Tutti gli oggetti di questo flusso di lavoro sono stati completati. Eventuali altri contributi non verranno inclusi nell\'analisi.","Se vuoi dare una mano, prova a scegliere un altro flusso di lavoro o a contribuire a un altro progetto."]}},"DrawingTools":{"RotateHandle":"Punto di presa per ruotare l\'annotazione o il segno disegnato."},"FeedbackModal":{"keepClassifying":"Continua","label":"Feedback"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Guida Pratica"},"FieldGuideItem":{"ariaTitle":"Indietro"},"FieldGuideItemAnchor":{"ariaTitle":"Seleziona {{title}}"},"title":"Guida Pratica"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Annota"},"FullscreenButton":{"ariaLabel":{"actualSize":"Visualizza l\'oggetto con la dimensione standard","fullscreen":"Visualizza l\'oggetto in modalit a schermo intero"}},"InvertButton":{"ariaLabel":"Inverti l\'oggetto"},"MoveButton":{"ariaLabel":"Sposta l\'oggetto"},"ResetButton":{"ariaLabel":"Resetta la vista dell\'oggetto"},"RotateButton":{"ariaLabel":"Ruota l\'oggetto"},"ZoomInButton":{"ariaLabel":"Ingrandisci l\'oggetto"},"ZoomOutButton":{"ariaLabel":"Riduci l\'oggetto"}},"MetaTools":{"CollectionsButton":{"add":"Aggiungi alle collezioni"},"HidePreviousMarksDrawingButton":{"hide":"Nascondi i segni precedenti","show":"Mostra i segni precedenti"},"HidePreviousTranscriptionsButton":{"hide":"Nascondi tutti i segni","show":"Mostra tutti i segni","showUser":"Mostra i tuoi segni"},"MetadataButton":{"label":"Informazioni sull\'oggetto"},"MetadataModal":{"table":{"label":"Etichetta","value":"Valore"},"title":"Metadati dell\'oggetto"}},"ModalTutorial":{"title":"Tutorial"},"QuickTalk":{"aria":{"closeButton":"Chiudi il pannello dei commenti","goToTalk":"Vai alla discussione sull\'oggetto nel Forum","mainPanel":"Pannello dei commenti QuickTalk","openButton":"L\'oggetto ha {{count}} commento/i. Fai clic per espandere.","panelContent":"Commenti nella discussione sull\'oggetto","panelHeading":"Discussione sull\'oggetto"},"errors":{"failPostComment":"Impossibile aggiungere commenti a una discussione esistente.","failPostDiscussion":"Impossibile aggiungere commenti a una nuova discussione.","noBoard":"Non  stato ancora creato un forum per i commenti sugli oggetti di questo progetto.","noText":"Impossibile pubblicare un commento vuoto.","noUser":"L\'utente non ha eseguito l\'accesso."},"loginToPost":"Accedi per pubblicare un commento.","status":{"initialized":"Lascia una nota su questo oggetto","loading":"(Caricamento in corso)","success":"Commento pubblicato!"},"subjectHasNoComments":"Questo oggetto non ha ancora nessun commento."},"SlideTutorial":{"StepNavigation":{"go":"Passa allo step {{index}}","next":"Passa allo step successivo","previous":"Passa allo step precedente"},"alt":"Step {{activeStep}} del tutorial","error":"Impossibile caricare lo step del tutorial","getStarted":"Inizia ora","heading":"{{projectDisplayName}} Tutorial"},"StepNavigation":{"go":"Passa allo step {{index}}","next":"Passa allo step successivo","previous":"Passa allo step precedente"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Grafico a barre"},"ImageAndTextViewer":{"textIconAltText":"Icona del visualizzatore di testo"},"InteractionLayer":{"ConfirmModal":{"close":"Chiudi senza salvare","confirm":"Confermi di voler chiudere? Questo segno verr eliminato.","keepWorking":"Continua il lavoro"},"SaveButton":{"save":"Salva e chiudi"},"SubTaskPopup":{"notRender":"Impossibile visualizzare la componente dell\'attivit","required":"Questa attivit  obbligatoria."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"trascrizione aggregata","explanation":"Queste {{count}} trascrizioni sono state inviate dai volontari precedenti e non possono essere modificate.","noAggregation":"Nessuna aggregazione disponibile","title":"Trascrizioni precedenti","transcriptionsUnavailable":"Trascrizioni non disponibili."},"complete":"Trascrizione completata","transcribed":"Ha delle trascrizioni"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Avanti","previousFrameLabel":"Indietro","thumbnailAltText":"Miniatura dell\'immagine"}},"ScatterPlotViewer":{"Selection":{"delete":"Elimina la selezione {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Passa alla vista a carosello","switchToSeparateFrames":"Passa alla vista in riquadri separati"}},"SingleVideoViewerContainer":{"error":"Errore durante il caricamento dell\'oggetto."},"VariableStarViewer":{"controls":"comandi","figCaption":"Diagramma H-R","flip":"gira","focus":"focus","highlight":"evidenzia","imageTitle":"Diagramma H-R: luminosit vs. temperatura","label":"Filtra {{id}}","periodMultiple":"multipli del periodo","phase":"fase","phaseFocus":"focus di fase"},"VideoController":{"closeVolume":"Chiudi il cursore del volume","fullscreen":"Mostra video a schermo intero","openVolume":"Apri il cursore del volume","pause":"Sospendi video","play":"Riproduci video","playbackSpeed":"Selezione della velocit di riproduzione video","scrubber":"Scorrimento lettore video","volumeSlider":"Cursore del volume"},"ZoomControlButton":{"disable":"disattiva zoom","enable":"attiva zoom"},"loading":"Caricamento di un oggetto","zoomHelp":"Tieni premuto CTRL e scorri per fare zoom"},"TaskArea":{"DisabledTaskPopup":{"body":"Questo oggetto ha un numero sufficiente di contributi: eventuali altri contributi inviati non verranno inclusi nell\'analisi. Puoi comunque visualizzare l\'oggetto come riferimento.","options":{"dismiss":"Ignora","next":"Prossimo oggetto disponibile","select":"Scegli un nuovo oggetto"},"title":"Terminato"},"Tasks":{"BackButton":{"back":"Indietro"},"DoneAndTalkButton":{"doneAndTalk":"Concludi e Commenta","newTab":"in una nuova scheda"},"DoneButton":{"done":"Completato"},"ExpertOptions":{"demoToggle":"Modalit demo","label":"Opzioni avanzate"},"NextButton":{"next":"Avanti"},"TaskHelp":{"close":"Chiudi","label":"Hai bisogno di aiuto?"},"demoMode":"In modalit demo, i contributi non verranno salvati. Usa questa modalit per prove rapide e imprecise dell\'interfaccia di lavoro.","error":"Si  verificato un errore","loading":"(Caricamento in corso)","renderFallback":"Impossibile visualizzare la componente dell\'attivit"},"task":"Task","tutorial":"Tutorial"}}')},"../lib-classifier/dist/esm/translations/it/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Fai clic e trascina dal punto di apertura al punto di chiusura o fai doppio clic ovunque sulla linea per creare un punto di giunzione","closePoint":"Clicca ovunque sulla linea per impostare il punto di chiusura","inactive":"Fai clic per modificare questa linea","spliceDrag":"Clicca e trascina dal punto di apertura al punto di chiusura","splicePoint":"Fai doppio clic ovunque sulla linea per creare un punto di giunzione"},"HighlighterTask":{"delete":"Elimina","noLabels":"Nessuna etichetta per l\'attivit di evidenziazione","status":"{{count}} segnati"},"InputStatus":{"drawn":"{{count}} disegnati","max":"{{count}} disegnati su un massimo di {{max}}","maxAndMin":"{{count}} disegnati su un minimo di {{min}} e un massimo di {{max}}","min":"{{count}} disegnati su un minimo di {{min}}"},"LineControls":{"close":"Chiudi","delete":"Elimina","deleteCancel":"Annulla l\'eliminazione","deleteConfirm":"Conferma l\'eliminazione","lineControls":"Comandi linea","move":"Sposta","redo":"Ripeti","undo":"Annulla"},"SimpleDropdownTask":{"customInputPlaceholder":"Inserisci qualcosa","otherLabel":"Altro...","selectPlaceholder":"Scegli una risposta"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Azzera filtri","closeFilters":"Chiudi i filtri","filter":"Filtra","removeFilter":"Rimuovi il filtro {{valueLabel}}","showing":"{{showing}} su {{total}} mostrati"},"Choice":{"cancel":"Annulla","identify":"Identifica","lessInfo":"Meno informazioni","moreInfo":"Altre informazioni","notThis":"Non  questo"},"ChoiceButton":{"identified":"identificato","openSubmenu":"Apri il sottomenu per {{choiceLabel}}"},"ConfusedWith":{"cancel":"Annulla","confused":"Pu essere confuso con","itsThis":"Penso che sia questo"},"DeleteButton":{"delete":"Elimina l\'opzione {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Resetta"},"TextTask":{"TextTagButtons":{"modifiers":"Modificatori di testo"}},"TranscriptionLine":{"created":"Trascrizione creata","editing":"Modifica della trascrizione"}}')},"../lib-classifier/dist/esm/translations/ja/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"","tooltipText":["",""]},"Banner":{"next":"","previous":"","whyAmISeeingThis":""},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":""},"RetiredBanner":{"bannerText":":","tooltipText":["",""]},"SubjectSetProgressBanner":{"alreadySeen":"","bannerText":"{{setName}}:{{number}}/{{total}}","finished":"","tooltipText":["",""]},"UserHasFinishedWorkflowBanner":{"bannerText":"","tooltipText":["",""]},"WorkflowIsFinishedBanner":{"bannerText":"","tooltipText":["",""]}},"DrawingTools":{"RotateHandle":"/"},"FeedbackModal":{"keepClassifying":"","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":""},"FieldGuideItem":{"ariaTitle":""},"FieldGuideItemAnchor":{"ariaTitle":"{{title}}"},"title":""},"ImageToolbar":{"AnnotateButton":{"ariaLabel":""},"FullscreenButton":{"ariaLabel":{"actualSize":"","fullscreen":""}},"InvertButton":{"ariaLabel":""},"MoveButton":{"ariaLabel":""},"ResetButton":{"ariaLabel":""},"RotateButton":{"ariaLabel":""},"ZoomInButton":{"ariaLabel":""},"ZoomOutButton":{"ariaLabel":""}},"MetaTools":{"CollectionsButton":{"add":""},"HidePreviousMarksDrawingButton":{"hide":"","show":""},"HidePreviousTranscriptionsButton":{"hide":"","show":"","showUser":""},"MetadataButton":{"label":""},"MetadataModal":{"table":{"label":"","value":""},"title":""}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"","goToTalk":"","mainPanel":"","openButton":"{{count}}","panelContent":"","panelHeading":""},"errors":{"failPostComment":"","failPostDiscussion":"","noBoard":"","noText":"","noUser":""},"loginToPost":"","status":{"initialized":"","loading":"...","success":""},"subjectHasNoComments":""},"SlideTutorial":{"StepNavigation":{"go":"{{index}}","next":"","previous":""},"alt":"{{activeStep}}","error":"","getStarted":"","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":"{{index}}","next":"","previous":""},"SubjectViewer":{"BarChartViewer":{"chartLabel":""},"ImageAndTextViewer":{"textIconAltText":""},"InteractionLayer":{"ConfirmModal":{"close":"","confirm":"","keepWorking":""},"SaveButton":{"save":""},"SubTaskPopup":{"notRender":"","required":""},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"","explanation":"{{count}}","noAggregation":"","title":"","transcriptionsUnavailable":""},"complete":"","transcribed":""}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":""}},"ScatterPlotViewer":{"Selection":{"delete":"{{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"","switchToSeparateFrames":""}},"SingleVideoViewerContainer":{"error":""},"VariableStarViewer":{"controls":"","figCaption":"HR","flip":"","focus":"","highlight":"","imageTitle":"HR:","label":"{{id}}","periodMultiple":"","phase":"","phaseFocus":""},"VideoController":{"closeVolume":"","fullscreen":"","openVolume":"","pause":"","play":"","playbackSpeed":"","scrubber":"","volumeSlider":""},"ZoomControlButton":{"disable":"","enable":""},"loading":"","zoomHelp":"CTRL + "},"TaskArea":{"DisabledTaskPopup":{"body":"","options":{"dismiss":"","next":"","select":""},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"","newTab":""},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":"","label":""},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"?"},"demoMode":"","error":"","loading":"","renderFallback":""},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/ja/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"","closePoint":"","inactive":"","spliceDrag":"","splicePoint":""},"HighlighterTask":{"delete":"","noLabels":"","status":"{{count}}"},"InputStatus":{"drawn":"{{count}}","max":"{{count}}{{max}}","maxAndMin":"{{min}}{{count}}{{max}}","min":"{{min}}{{count}}"},"LineControls":{"close":"","delete":"","deleteCancel":"","deleteConfirm":"","lineControls":"","move":"","redo":"","undo":""},"SimpleDropdownTask":{"customInputPlaceholder":"","otherLabel":"","selectPlaceholder":""},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"","closeFilters":"","filter":"","removeFilter":"{{valueLabel}}","showing":"{{total}}{{showing}}"},"Choice":{"cancel":"","identify":"","lessInfo":"","moreInfo":"","notThis":""},"ChoiceButton":{"identified":"","openSubmenu":"{{choiceLabel}}"},"ConfusedWith":{"cancel":"","confused":"","itsThis":""},"DeleteButton":{"delete":"{{choiceLabel}}"}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":""}},"TranscriptionLine":{"created":"","editing":""}}')},"../lib-classifier/dist/esm/translations/kn/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"    ","tooltipText":["      ,       .","   ,           ."]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"  ?"},"InProgressConfirmModal":{"cancel":" ","confirm":"","inProgress":"      ?       ."},"RetiredBanner":{"bannerText":":   ","tooltipText":["     ,      .","   ,           ."]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":" ()","tooltipText":["       .","  ,     ."]},"UserHasFinishedWorkflowBanner":{"bannerText":":   ","tooltipText":["      ,         .","   ,           ."]},"WorkflowIsFinishedBanner":{"bannerText":"   .","tooltipText":["     ,         .","   ,           ."]}},"DrawingTools":{"RotateHandle":" /  ."},"FeedbackModal":{"keepClassifying":" ","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":"    "},"FieldGuideItemAnchor":{"ariaTitle":"{{title}} "},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":" "},"FullscreenButton":{"ariaLabel":{"actualSize":"   ","fullscreen":"    "}},"InvertButton":{"ariaLabel":"  ( )"},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"  "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"    "},"ZoomOutButton":{"ariaLabel":"   "}},"MetaTools":{"CollectionsButton":{"add":" "},"HidePreviousMarksDrawingButton":{"hide":"  () ","show":"  () "},"HidePreviousTranscriptionsButton":{"hide":"  () ","show":"  () ","showUser":"  () "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"   ","goToTalk":"   ","mainPanel":"QuickTalk   ","openButton":" {{count}}  .   .","panelContent":"  ","panelHeading":" "},"errors":{"failPostComment":"    .","failPostDiscussion":"    .","noBoard":"        .","noText":"    .","noUser":"  ."},"loginToPost":"     .","status":{"initialized":"     ","loading":"  ...","success":"  !"},"subjectHasNoComments":"    ."},"SlideTutorial":{"StepNavigation":{"go":"{{index}}  ","next":"  ","previous":"  "},"alt":"  {{activeStep}}","error":"    .","getStarted":"","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":"{{index}}  ","next":"  ","previous":"  "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"  "},"InteractionLayer":{"ConfirmModal":{"close":" ","confirm":"   ?   .","keepWorking":" "},"SaveButton":{"save":"  "},"SubTaskPopup":{"notRender":"   .","required":"  ."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":" {{count}}       .","noAggregation":"  .","title":" ","transcriptionsUnavailable":" ."},"complete":" ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":"{{index}}  "}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"  ","switchToSeparateFrames":"   "}},"SingleVideoViewerContainer":{"error":"    ."},"VariableStarViewer":{"controls":"","figCaption":"HR ","flip":"  ()","focus":"","highlight":" ","imageTitle":"HR :  vs ","label":"{{id}}  ","periodMultiple":" ","phase":" ()","phaseFocus":"  ( )"},"VideoController":{"closeVolume":"  ","fullscreen":"    ","openVolume":"  ","pause":" ","play":"  ","playbackSpeed":"    ","scrubber":"  ","volumeSlider":" "},"ZoomControlButton":{"disable":" ","enable":" "},"loading":"  ","zoomHelp":"  CTRL +  "},"TaskArea":{"DisabledTaskPopup":{"body":"    ,        .       .","options":{"dismiss":"","next":"  ","select":"  "},"title":" ()"},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"  ","newTab":" "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"    ?"},"demoMode":" ,  .   ,    .","error":" .","loading":" ","renderFallback":"   ."},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/kn/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                  ","closePoint":"       ","inactive":"      ","spliceDrag":"       ","splicePoint":"        "},"HighlighterTask":{"delete":"","noLabels":"   ","status":"{{count}} "},"InputStatus":{"drawn":"{{count}} ","max":" {{max}}  {{count}} ","maxAndMin":" {{min}}  {{count}},  {{max}} ","min":" {{min}}  {{count}} "},"LineControls":{"close":"","delete":"","deleteCancel":" ","deleteConfirm":" ","lineControls":" ","move":"","redo":" ","undo":" "},"SimpleDropdownTask":{"customInputPlaceholder":" ","otherLabel":"...","selectPlaceholder":" "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":" ","closeFilters":" ","filter":"","removeFilter":"{{valueLabel}}  ","showing":"{{total}}  {{showing}}  "},"Choice":{"cancel":" ","identify":"","lessInfo":" ","moreInfo":" ","notThis":""},"ChoiceButton":{"identified":"","openSubmenu":"{{choiceLabel}}   "},"ConfusedWith":{"cancel":" ","confused":"  ","itsThis":"    "},"DeleteButton":{"delete":"{{choiceLabel}}  "}},"TextFromSubjectTask":{"reset":" "},"TextTask":{"TextTagButtons":{"modifiers":" () "}},"TranscriptionLine":{"created":"  ( )","editing":"  "}}')},"../lib-classifier/dist/esm/translations/ko/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"   ","tooltipText":["    ,     .","   ,       ."]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"   "},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":"  ?      ."},"RetiredBanner":{"bannerText":":   ","tooltipText":["           .","   ,       ."]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":"","tooltipText":["        .","      ."]},"UserHasFinishedWorkflowBanner":{"bannerText":":  ","tooltipText":["    ,        .","   ,       ."]},"WorkflowIsFinishedBanner":{"bannerText":"  ","tooltipText":["    ,        .","   ,       ."]}},"DrawingTools":{"RotateHandle":" /   ."},"FeedbackModal":{"keepClassifying":" ","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":"    "},"FieldGuideItemAnchor":{"ariaTitle":"{{title}} "},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":" "},"FullscreenButton":{"ariaLabel":{"actualSize":"   ","fullscreen":"    "}},"InvertButton":{"ariaLabel":" "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"  "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":" "},"ZoomOutButton":{"ariaLabel":" "}},"MetaTools":{"CollectionsButton":{"add":" "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":"  "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"  ","goToTalk":"   ","mainPanel":"   ","openButton":" {{count}}  .  .","panelContent":"  ","panelHeading":" "},"errors":{"failPostComment":"     .","failPostDiscussion":"     .","noBoard":"       .","noText":"    .","noUser":"  ."},"loginToPost":"  .","status":{"initialized":"    ","loading":"  ...","success":" !"},"subjectHasNoComments":"    ."},"SlideTutorial":{"StepNavigation":{"go":"{{index}} ","next":"  ","previous":"  "},"alt":"  {{activeStep}}","error":"    .","getStarted":"","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":"{{index}} ","next":"  ","previous":"  "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"  "},"InteractionLayer":{"ConfirmModal":{"close":"  ","confirm":" ?   .","keepWorking":" "},"SaveButton":{"save":"  "},"SubTaskPopup":{"notRender":"    .","required":"  ."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":"   {{count}}     .","noAggregation":"   .","title":" ","transcriptionsUnavailable":"   ."},"complete":" ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":" {{index}} "}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"   ","switchToSeparateFrames":"   "}},"SingleVideoViewerContainer":{"error":"    ."},"VariableStarViewer":{"controls":"","figCaption":"HR ","flip":"","focus":"","highlight":"","imageTitle":"HR :    ","label":" {{id}}","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"  ","fullscreen":"   ","openVolume":"  ","pause":"  ","play":" ","playbackSpeed":"   ","scrubber":"  ","volumeSlider":" "},"ZoomControlButton":{"disable":"/ ","enable":"/ "},"loading":"  ","zoomHelp":"CTRL    /"},"TaskArea":{"DisabledTaskPopup":{"body":"            .       .","options":{"dismiss":"","next":"   ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"  ","newTab":" "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"   ?"},"demoMode":"    .      .","error":" ","loading":" ","renderFallback":"    ."},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/ko/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"          ","closePoint":"     ","inactive":"   ","spliceDrag":"   ","splicePoint":"      "},"HighlighterTask":{"delete":"","noLabels":"   ","status":"{{count}} "},"InputStatus":{"drawn":"{{count}} ","max":" {{max}}  {{count}} ","maxAndMin":" {{min}} ,  {{max}}  {{count}} ","min":" {{min}}  {{count}} "},"LineControls":{"close":"","delete":"","deleteCancel":" ","deleteConfirm":" ","lineControls":" ","move":"","redo":" ","undo":" "},"SimpleDropdownTask":{"customInputPlaceholder":" ","otherLabel":"...","selectPlaceholder":" "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":" ","closeFilters":" ","filter":"","removeFilter":"{{valueLabel}}  ","showing":"{{total}}  {{showing}} "},"Choice":{"cancel":"","identify":"","lessInfo":"  ","moreInfo":"  ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"{{choiceLabel}}   "},"ConfusedWith":{"cancel":"","confused":"  ","itsThis":"  "},"DeleteButton":{"delete":" {{choiceLabel}} "}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":" ","editing":"  "}}')},"../lib-classifier/dist/esm/translations/mr/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"     ","tooltipText":["                ","              "]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"    ?"},"InProgressConfirmModal":{"cancel":" ","confirm":" ","inProgress":"        ?        "},"RetiredBanner":{"bannerText":":      ","tooltipText":["            ","                "]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}:  {{number}}{{total}}","finished":"","tooltipText":["       .","       "]},"UserHasFinishedWorkflowBanner":{"bannerText":":    ","tooltipText":["                 .","                "]},"WorkflowIsFinishedBanner":{"bannerText":"   ","tooltipText":["                 .","                "]}},"DrawingTools":{"RotateHandle":"  / "},"FeedbackModal":{"keepClassifying":"  ","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":"     "},"FieldGuideItemAnchor":{"ariaTitle":"{{title}} "},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":" "},"FullscreenButton":{"ariaLabel":{"actualSize":"   ","fullscreen":"     "}},"InvertButton":{"ariaLabel":"  "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"   "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"   "},"ZoomOutButton":{"ariaLabel":"   "}},"MetaTools":{"CollectionsButton":{"add":"  "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":"  "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"   ","goToTalk":"   ","mainPanel":"  ","openButton":" {{count}}  () .    .","panelContent":"  ","panelHeading":" "},"errors":{"failPostComment":"     .","failPostDiscussion":"     .","noBoard":"          .","noText":"      ","noUser":"    "},"loginToPost":"      ","status":{"initialized":"    ","loading":"   ","success":"  "},"subjectHasNoComments":"     "},"SlideTutorial":{"StepNavigation":{"go":"{{index}}  ","next":"  ","previous":"  "},"alt":"  {{activeStep}}","error":"     ","getStarted":" ","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":"{{index}}  ","next":"  ","previous":"  "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"   /"},"InteractionLayer":{"ConfirmModal":{"close":"    ","confirm":"      ?    .","keepWorking":"  "},"SaveButton":{"save":"   "},"SubTaskPopup":{"notRender":"    ","required":"   ."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":"{{count}}               .","noAggregation":"  ","title":" ","transcriptionsUnavailable":"  "},"complete":"  ","transcribed":"  "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":"{{index}}  "}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"   ","switchToSeparateFrames":"    "}},"SingleVideoViewerContainer":{"error":"    "},"VariableStarViewer":{"controls":"","figCaption":" ","flip":"","focus":"","highlight":"","imageTitle":" :   ","label":"{{id}}  ","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"   ","fullscreen":"    ","openVolume":"  ","pause":" ","play":" ","playbackSpeed":"   ","scrubber":"  ","volumeSlider":" "},"ZoomControlButton":{"disable":"  ","enable":"  "},"loading":"   ","zoomHelp":"  CTRL + scroll "},"TaskArea":{"DisabledTaskPopup":{"body":"             .       .","options":{"dismiss":"","next":"  ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"  ","newTab":"   "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":" ","label":"      ?"},"demoMode":"      .        .","error":" .","loading":"  ","renderFallback":"    "},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/mr/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                 ","closePoint":"       ","inactive":"     ","spliceDrag":"         ","splicePoint":"        "},"HighlighterTask":{"delete":" ","noLabels":"    ","status":"{{count}}  "},"InputStatus":{"drawn":"{{count}} ","max":"{{max}}  {{count}}  ","maxAndMin":"{{min}}  {{count}} , {{max}}","min":"{{min}}  {{count}}  "},"LineControls":{"close":" ","delete":"","deleteCancel":"  ","deleteConfirm":"  ","lineControls":" ","move":"","redo":" ","undo":""},"SimpleDropdownTask":{"customInputPlaceholder":"  ","otherLabel":"","selectPlaceholder":" "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"  ","closeFilters":"  ","filter":" ","removeFilter":"{{valueLabel}}   ","showing":"{{total}}{{showing}} "},"Choice":{"cancel":" ","identify":"","lessInfo":" ","moreInfo":" ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"{{choiceLabel}}  "},"ConfusedWith":{"cancel":" ","confused":"      ","itsThis":"    "},"DeleteButton":{"delete":"{{choiceLabel}}  "}},"TextFromSubjectTask":{"reset":" "},"TextTask":{"TextTagButtons":{"modifiers":" / "}},"TranscriptionLine":{"created":"  ","editing":" /  "}}')},"../lib-classifier/dist/esm/translations/nl/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Je hebt dit onderwerp al eens gezien","tooltipText":["Je hebt dit onderwerp al gezien en geclassificeerd, dus verdere classificaties dragen niet bij aan de analyse ervan.","Als je wilt helpen, probeer dan eens een andere workflow of draag bij aan een ander project."]},"Banner":{"next":"Volgende","previous":"Vorige","whyAmISeeingThis":"Waarom zie ik dit?"},"InProgressConfirmModal":{"cancel":"Annuleren","confirm":"OK","inProgress":"Let op! Niet opgeslagen gegevens gaan verloren."},"RetiredBanner":{"bannerText":"Klaar: Dit onderwerp is niet meer beschikbaar.","tooltipText":["Dit onderwerp is al voldoende geclassificeerd, dus jouw classificatie wordt niet gebruikt in de analyse.","Als je wilt helpen, probeer dan eens een andere workflow of draag bij aan een ander project."]},"SubjectSetProgressBanner":{"alreadySeen":"Al gezien","bannerText":"{{setName}}: Onderwerp {{number}}/{{total}}","finished":"Klaar","tooltipText":["Dit project laat vrijwilligers onderwerpen in de juiste volgorde bekijken.","Het getal laat zien waar de persoon zich bevindt in de hele groep."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Klaar: Je hebt alles gezien","tooltipText":["Je hebt al alles in deze workflow geclassificeerd, dus verdere classificaties over dit onderwerp worden niet gebruikt in de analyse.","Als je wilt helpen, probeer dan eens een andere workflow of draag bij aan een ander project."]},"WorkflowIsFinishedBanner":{"bannerText":"Deze workflow is klaar.","tooltipText":["Alle onderwerpen in deze workflow zijn afgerond, dus verdere classificaties op dit onderwerp worden niet gebruikt in de analyse.","Als je wilt helpen, probeer dan eens een andere workflow of draag bij aan een ander project."]}},"DrawingTools":{"RotateHandle":"Knop om getekende aantekeningen/markeringen te draaien."},"FeedbackModal":{"keepClassifying":"Doorgaan","label":"Feedback"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Praktische gids"},"FieldGuideItem":{"ariaTitle":"Terug"},"FieldGuideItemAnchor":{"ariaTitle":"Selecteer {{title}}"},"title":"Praktische gids"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Annoteren"},"FullscreenButton":{"ariaLabel":{"actualSize":"Bekijk onderwerp op normale grootte","fullscreen":"Bekijk onderwerp op het volledige scherm"}},"InvertButton":{"ariaLabel":"Onderwerp omkeren"},"MoveButton":{"ariaLabel":"Onderwerp verplaatsen"},"ResetButton":{"ariaLabel":"Onderwerpweergave resetten"},"RotateButton":{"ariaLabel":"Onderwerp draaien"},"ZoomInButton":{"ariaLabel":"Zoom in op het onderwerp"},"ZoomOutButton":{"ariaLabel":"Zoom uit van het onderwerp"}},"MetaTools":{"CollectionsButton":{"add":"Aan collectie toevoegen"},"HidePreviousMarksDrawingButton":{"hide":"Vorige punten verbergen","show":"Vorige punten weergeven"},"HidePreviousTranscriptionsButton":{"hide":"Alle punten verbergen","show":"Alle punten weergeven","showUser":"Je punten weergeven"},"MetadataButton":{"label":"Onderwerpinformatie"},"MetadataModal":{"table":{"label":"Label","value":"Waarde"},"title":"Onderwerp metadata"}},"ModalTutorial":{"title":"Uitleg"},"QuickTalk":{"aria":{"closeButton":"Sluit het opmerkingenpaneel","goToTalk":"Ga naar Onderwerp Discussie op Talk","mainPanel":"QuickTalk-opmerkingenpaneel","openButton":"Het onderwerp heeft {{count}} opmerking(en). Klik om uit te vouwen.","panelContent":"Discussie over onderwerp reacties","panelHeading":"Discussie over onderwerp"},"errors":{"failPostComment":"Ik kon geen reacties toevoegen aan een bestaande discussie.","failPostDiscussion":"Ik kon geen reacties toevoegen aan een nieuwe discussie.","noBoard":"Er is nog geen forum voor opmerkingen over dit project.","noText":"Je kunt geen lege reactie plaatsen.","noUser":"Je bent niet ingelogd."},"loginToPost":"Log in om een reactie te plaatsen.","status":{"initialized":"Laat een bericht achter over dit onderwerp","loading":"(Laden)","success":"Reactie geplaatst!"},"subjectHasNoComments":"Er zijn nog geen reacties op dit onderwerp."},"SlideTutorial":{"StepNavigation":{"go":"Ga naar stap {{index}}","next":"Ga naar de volgende stap","previous":"Ga terug naar de vorige stap"},"alt":"Tutorial stap {{activeStep}}","error":"Tutorial stap kon niet worden geladen.","getStarted":"Beginnen","heading":"{{projectDisplayName}} Uitleg"},"StepNavigation":{"go":"Ga naar stap {{index}}","next":"Ga naar de volgende stap","previous":"Ga terug naar de vorige stap"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Staafdiagram"},"ImageAndTextViewer":{"textIconAltText":"Pictogram voor tekstviewer"},"InteractionLayer":{"ConfirmModal":{"close":"Sluiten zonder op te slaan","confirm":"Wil je echt sluiten? Deze markering wordt verwijderd.","keepWorking":"Doorgaan"},"SaveButton":{"save":"Opslaan en sluiten"},"SubTaskPopup":{"notRender":"De taakcomponent kon niet worden weergegeven.","required":"Deze taak is verplicht."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"geaggregeerde transcriptie","explanation":"Deze {{count}} transcripties zijn ingezonden door vrijwilligers en kan niet worden aangepast.","noAggregation":"Geen samenvatting beschikbaar.","title":"Vorige transcripties","transcriptionsUnavailable":"Er zijn geen transcripties beschikbaar."},"complete":"Transcriptie afgerond","transcribed":"Heeft transcripties"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Volgende","previousFrameLabel":"Vorige","thumbnailAltText":"Miniatuurweergave van afbeelding"}},"ScatterPlotViewer":{"Selection":{"delete":"Selectie verwijderen {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Ga naar flipbook-weergave","switchToSeparateFrames":"Ga naar de weergave met aparte frames"}},"SingleVideoViewerContainer":{"error":"Er is iets misgegaan bij het laden van het onderwerp."},"VariableStarViewer":{"controls":"bediening","figCaption":"HR-diagram","flip":"draaien","focus":"focus","highlight":"highlight","imageTitle":"HR-diagram: helderheid versus temperatuur","label":"Filter {{id}}","periodMultiple":"periode meervoud","phase":"fase","phaseFocus":"fasefocus"},"VideoController":{"closeVolume":"Sluit volumeschuifregelaar","fullscreen":"Video op volledig scherm afspelen","openVolume":"Open volumeschuifregelaar","pause":"Video pauzeren","play":"Video afspelen","playbackSpeed":"Snelheid van video afspelen kiezen","scrubber":"Videospeler-scrubber","volumeSlider":"Volumeregelaar"},"ZoomControlButton":{"disable":"zoom uitschakelen","enable":"zoom inschakelen"},"loading":"Een onderwerp laden","zoomHelp":"Gebruik CTRL + scroll om in te zoomen"},"TaskArea":{"DisabledTaskPopup":{"body":"Dit onderwerp heeft al voldoende classificaties, dus eventuele extra classificaties die worden ingediend, worden niet meegenomen in de analyse. Je kunt dit onderwerp nog steeds bekijken ter referentie.","options":{"dismiss":"Sluiten","next":"Volgende beschikbare onderwerp","select":"Kies een nieuw onderwerp"},"title":"Klaar"},"Tasks":{"BackButton":{"back":"Terug"},"DoneAndTalkButton":{"doneAndTalk":"Afronden & Bespreken","newTab":"in een nieuwe tabblad"},"DoneButton":{"done":"Afronden"},"ExpertOptions":{"demoToggle":"Demo-modus","label":"Opties voor experts"},"NextButton":{"next":"Volgende"},"TaskHelp":{"close":"Sluiten","label":"Hulp nodig met deze taak?"},"demoMode":"In de demo-modus wordt de classificatie niet opgeslagen. Gebruik dit voor snelle, onnauwkeurige demo\'s van de classificatie-interface.","error":"Er is iets misgegaan","loading":"(Laden)","renderFallback":"De taakcomponent kon niet worden weergegeven."},"task":"Taak","tutorial":"Uitleg"}}')},"../lib-classifier/dist/esm/translations/nl/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Klik en sleep van het openingspunt naar het sluitingspunt of dubbelklik ergens op de lijn om een splitsingspunt te maken","closePoint":"Klik ergens op de lijn om het sluitpunt in te stellen","inactive":"Klik hier om deze regel te bewerken","spliceDrag":"Klik en sleep van het open punt naar het sluitpunt","splicePoint":"Klik twee keer ergens op de lijn om een splitsingspunt te maken"},"HighlighterTask":{"delete":"Verwijderen","noLabels":"Geen labels voor de Highlighter-taak","status":"{{count}} gemarkeerd"},"InputStatus":{"drawn":"{{count}} getrokken","max":"{{count}} van {{max}} maximaal getrokken","maxAndMin":"{{count}} van {{min}} veplicht, {{max}} maximaal getrokken","min":"{{count}} van {{min}} verplicht getrokken"},"LineControls":{"close":"Sluiten","delete":"Verwijderen","deleteCancel":"Verwijderen annuleren","deleteConfirm":"Verwijderen bevestigen","lineControls":"Lijnbediening","move":"Verplaatsen","redo":"Opnieuw doen","undo":"Ongedaan maken"},"SimpleDropdownTask":{"customInputPlaceholder":"Iets invoeren","otherLabel":"Anders...","selectPlaceholder":"Kies een antwoord"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Wis filters","closeFilters":"Kies filters","filter":"Filter","removeFilter":"Verwijder {{valueLabel}} filter","showing":"Toont {{showing}} van {{total}}"},"Choice":{"cancel":"Annuleren","identify":"Selecteren","lessInfo":"Lees de informatie","moreInfo":"Meer informatie","notThis":"Niet dit"},"ChoiceButton":{"identified":"gedentificeerd","openSubmenu":"Open het submenu voor {{choiceLabel}}"},"ConfusedWith":{"cancel":"Annuleren","confused":"Word vaak verward met","itsThis":"Volgens mij het deze"},"DeleteButton":{"delete":"Keuze verwijderen {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Opnieuw instellen"},"TextTask":{"TextTagButtons":{"modifiers":"Tekstwijzigers"}},"TranscriptionLine":{"created":"Transcriptie gemaakt","editing":"Transcriptie bewerken"}}')},"../lib-classifier/dist/esm/translations/pl/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Ten materia zosta ju przez Ciebie wywietlony","tooltipText":["Ten materia zosta ju przez Ciebie wywietlony i sklasyfikowany, dlatego dalsze klasyfikacje nie bd uwzgldniane przy jego analizie.","Jeli chcesz pomc, sprbuj wybra inny przepyw pracy lub docz do innego projektu."]},"Banner":{"next":"Nastpny","previous":"Poprzedni","whyAmISeeingThis":"Dlaczego to widz?"},"InProgressConfirmModal":{"cancel":"Anuluj","confirm":"Potwierd","inProgress":"Czy na pewno chcesz przej do innego materiau? Wszelkie adnotacje dodane do biecego materiau zostan utracone."},"RetiredBanner":{"bannerText":"Zakoczono: ten materia nie jest ju aktywny","tooltipText":["Ten materia zawiera ju dostateczn liczb klasyfikacji, dlatego Twoja klasyfikacja nie zostanie wykorzystana w analizie.","Jeli chcesz pomc, sprbuj wybra inny przepyw pracy lub docz do innego projektu."]},"SubjectSetProgressBanner":{"alreadySeen":"Ju wywietlano","bannerText":"{{setName}}: Materia {{number}}/{{total}}","finished":"Zakoczono","tooltipText":["Ten projekt umoliwia wolontariuszom przegldanie materiaw w zadanej kolejnoci.","Ta warto wskazuje pozycj Twojego materiau w grupie wszystkich materiaw."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Zakoczono: pokazalimy Ci ju wszystkie materiay.","tooltipText":["Udao Ci si ukoczy wszystkie klasyfikacje w tym przepywie pracy, wic dodatkowe klasyfikacje do tego materiau nie bd uwzgldniane w analizie.","Jeli chcesz pomc, sprbuj wybra inny przepyw pracy lub docz do innego projektu."]},"WorkflowIsFinishedBanner":{"bannerText":"Ten przepyw pracy zosta zakoczony","tooltipText":["Wszystkie materiay w tym przepywie pracy zostay ukoczone, wic dodatkowe klasyfikacje do tego materiau nie bd uwzgldniane w analizie.","Jeli chcesz pomc, sprbuj wybra inny przepyw pracy lub docz do innego projektu."]}},"DrawingTools":{"RotateHandle":"Uchwyt do obracania narysowanej adnotacji lub znacznika."},"FeedbackModal":{"keepClassifying":"Dalej","label":"Opinia"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Przewodnik"},"FieldGuideItem":{"ariaTitle":"Wstecz"},"FieldGuideItemAnchor":{"ariaTitle":"Wybierz {{title}}"},"title":"Przewodnik"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Dodaj adnotacj"},"FullscreenButton":{"ariaLabel":{"actualSize":"Wywietl widok w normalnym rozmiarze","fullscreen":"Wywietl widok w trybie penoekranowym"}},"InvertButton":{"ariaLabel":"Zamie materia"},"MoveButton":{"ariaLabel":"Przesu widok"},"ResetButton":{"ariaLabel":"Resetuj widok"},"RotateButton":{"ariaLabel":"Obr widok"},"ZoomInButton":{"ariaLabel":"Powiksz widok"},"ZoomOutButton":{"ariaLabel":"Pomniejsz widok"}},"MetaTools":{"CollectionsButton":{"add":"Dodaj do kolekcji"},"HidePreviousMarksDrawingButton":{"hide":"Ukryj poprzednie znaczniki","show":"Poka poprzednie znaczniki"},"HidePreviousTranscriptionsButton":{"hide":"Ukryj wszystkie znaczniki","show":"Poka wszystkie znaczniki","showUser":"Poka wasne znaczniki"},"MetadataButton":{"label":"Informacje o temacie"},"MetadataModal":{"table":{"label":"Etykieta","value":"Warto"},"title":"Metadane materiau"}},"ModalTutorial":{"title":"Samouczek"},"QuickTalk":{"aria":{"closeButton":"Zamknij panel komentarzy","goToTalk":"Przejd do dyskusji na temat materiau w sekcji Dyskusja","mainPanel":"Panel komentarzy QuickTalk","openButton":"Do materiau dodano nastpujc liczb komentarzy: {{count}}. Kliknij, aby rozwin.","panelContent":"Komentarze w dyskusji na temat materiau","panelHeading":"Dyskusja na temat materiau"},"errors":{"failPostComment":"Nie udao si doda komentarzy do istniejcej dyskusji.","failPostDiscussion":"Nie udao si doda komentarzy do nowej dyskusji.","noBoard":"Tablica na komentarze na temat materiau nie zostaa jeszcze skonfigurowana dla tego projektu.","noText":"Nie mona zamieci pustego komentarza.","noUser":"Uytkownik niezalogowany."},"loginToPost":"Zaloguj si, aby doda komentarz.","status":{"initialized":"Dodaj notatk na temat tego materiau","loading":"Zamieszczanie komentarza...","success":"Dodano komentarz!"},"subjectHasNoComments":"Ten materia nie by jeszcze komentowany."},"SlideTutorial":{"StepNavigation":{"go":"Id do kroku {{index}}","next":"Id do nastpnego kroku","previous":"Id do poprzedniego kroku"},"alt":"Krok {{activeStep}} samouczka","error":"Nie udao si wczyta kroku samouczka.","getStarted":"Zaczynaj","heading":"{{projectDisplayName}} Samouczek"},"StepNavigation":{"go":"Id do kroku {{index}}","next":"Id do nastpnego kroku","previous":"Id do poprzedniego kroku"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Wykres supkowy"},"ImageAndTextViewer":{"textIconAltText":"Ikona przegldarki tekstowej"},"InteractionLayer":{"ConfirmModal":{"close":"Zamknij bez zapisywania","confirm":"Czy na pewno chcesz zamkn? Ten znacznik zostanie usunity.","keepWorking":"Kontynuuj prac"},"SaveButton":{"save":"Zapisz i zamknij"},"SubTaskPopup":{"notRender":"Nie udao si zrenderowa komponentu zadania.","required":"To zadanie jest wymagane."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"zagregowana transkrypcja","explanation":"Te transkrypcje ({{count}}) zostay przesane przez poprzednich wolontariuszy i nie mona ich modyfikowa.","noAggregation":"Brak dostpnej agregacji.","title":"Poprzednie transkrypcje","transcriptionsUnavailable":"Transkrypcje niedostpne."},"complete":"Transkrypcja ukoczona","transcribed":"Zawiera transkrypcje"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Nastpny","previousFrameLabel":"Poprzednia","thumbnailAltText":"Miniatura obrazu"}},"ScatterPlotViewer":{"Selection":{"delete":"Usu zaznaczenie {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Przecz na widok poklatkowy","switchToSeparateFrames":"Przecz na widok poszczeglnych klatek"}},"SingleVideoViewerContainer":{"error":"Podczas wczytywania materiau wystpi bd."},"VariableStarViewer":{"controls":"opcje sterowania","figCaption":"Diagram Hertzsprunga-Russella","flip":"obr","focus":"przybli","highlight":"zaznacz","imageTitle":"Diagram Hertzsprunga-Russella: zaleno midzy jasnoci a temperatur","label":"Filtruj {{id}}","periodMultiple":"mnonik okresu","phase":"faza","phaseFocus":"przyblienie fazy"},"VideoController":{"closeVolume":"Zamknij suwak gonoci","fullscreen":"Wywietl film na penym ekranie","openVolume":"Otwrz suwak gonoci","pause":"Wstrzymaj film","play":"Odtwrz film","playbackSpeed":"Wybr prdkoci odtwarzania filmu","scrubber":"Suwak odtwarzacza","volumeSlider":"Suwak gonoci"},"ZoomControlButton":{"disable":"wycz powikszenie","enable":"wcz powikszenie"},"loading":"Wczytywanie materiau","zoomHelp":"Aby zmieni powikszenie, nacinij klawisz CTRL i obr kkiem myszy"},"TaskArea":{"DisabledTaskPopup":{"body":"Ten materia ma ju wystarczajc liczb klasyfikacji, dlatego dodatkowo przesane klasyfikacje nie zostan wykorzystane przy jego analizie. Moesz jednak przeglda ten materia w charakterze materiau referencyjnego.","options":{"dismiss":"Odrzu","next":"Kolejny dostpny materia","select":"Wybierz nowy materia"},"title":"Zakoczone"},"Tasks":{"BackButton":{"back":"Wstecz"},"DoneAndTalkButton":{"doneAndTalk":"Gotowe & Lista dyskusyjna","newTab":"w nowej karcie"},"DoneButton":{"done":"Gotowe"},"ExpertOptions":{"demoToggle":"Tryb demonstracyjny","label":"Opcje eksperta"},"NextButton":{"next":"Nastpny"},"TaskHelp":{"close":"Zamknij","label":"Potrzebujesz pomocy?"},"demoMode":"W trybie demonstracyjnym klasyfikacje nie zostan zapisane. Suy on do szybkiej, niedokadnej demonstracji interfejsu klasyfikacji.","error":"Co poszo nie tak","loading":"Wczytywanie","renderFallback":"Nie udao si zrenderowa komponentu zadania."},"task":"Zadanie","tutorial":"Samouczek"}}')},"../lib-classifier/dist/esm/translations/pl/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Kliknij i przecignij od punktu otwarcia do punktu zamknicia lub kliknij dwukrotnie dowolny punkt na linii, aby utworzy punkt podziau","closePoint":"Kliknij dowolny punkt na linii, aby ustawi punkt zamknicia","inactive":"Kliknij, aby edytowa t lini","spliceDrag":"Kliknij i przecignij od punktu otwarcia do punktu zamknicia","splicePoint":"Kliknij dwukrotnie dowolny punkt na linii, aby utworzy punkt podziau"},"HighlighterTask":{"delete":"Usu","noLabels":"Brak etykiet dla zadania zakrelacza","status":"Liczba zaznacze: {{count}}"},"InputStatus":{"drawn":"Narysowano {{count}}","max":"Narysowano {{count}} z {{max}} (liczba maksymalna)","maxAndMin":"Narysowano {{count}} z {{min}} (liczba wymagana), maks. {{max}}","min":"Narysowano {{count}} z {{min}} (liczba wymagana)"},"LineControls":{"close":"Zamknij","delete":"Usu","deleteCancel":"Anuluj usunicie","deleteConfirm":"Potwierd usunicie","lineControls":"Opcje sterowania na pasku","move":"Przenie","redo":"Ponw","undo":"Cofnij"},"SimpleDropdownTask":{"customInputPlaceholder":"Wprowad tre","otherLabel":"Inne...","selectPlaceholder":"Wybierz odpowied"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Wyczy filtry","closeFilters":"Zamknij filtry","filter":"Filtruj","removeFilter":"Usu filtr {{valueLabel}}","showing":"Wywietlanie {{showing}} z {{total}}"},"Choice":{"cancel":"Anuluj","identify":"Identyfikuj","lessInfo":"Mniej informacji","moreInfo":"Wicej informacji","notThis":"To nie to"},"ChoiceButton":{"identified":"zidentyfikowano","openSubmenu":"Otwrz menu podrzdne {{choiceLabel}}"},"ConfusedWith":{"cancel":"Anuluj","confused":"Bywa mylone z obiektem:","itsThis":"Myl, e to jest to"},"DeleteButton":{"delete":"Usu wybr {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Resetuj"},"TextTask":{"TextTagButtons":{"modifiers":"Modyfikatory tekstu"}},"TranscriptionLine":{"created":"Utworzono transkrypcj","editing":"Edytowanie transkrypcji"}}')},"../lib-classifier/dist/esm/translations/pt/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"J viu este objeto","tooltipText":["J viu e classificou este objeto pelo que eventuais classificaes adicionais no contribuiro para a anlise do mesmo.","Se quiser ajudar, experimente escolher um fluxo de trabalho diferente ou contribuir para outro projeto."]},"Banner":{"next":"Prximo","previous":"Anterior","whyAmISeeingThis":"Porque estou a ver isto?"},"InProgressConfirmModal":{"cancel":"Cancelar","confirm":"OK","inProgress":"Voltar limpar o seu trabalho na tarefa actual."},"RetiredBanner":{"bannerText":"Concludo: este objeto foi retirado","tooltipText":["Este objeto j possui classificaes suficientes pelo que a sua no ser utilizada na anlise do mesmo.","Se quiser ajudar, experimente escolher um fluxo de trabalho diferente ou contribuir para outro projeto."]},"SubjectSetProgressBanner":{"alreadySeen":"J visto","bannerText":"{{setName}}: Objeto {{number}}/{{total}}","finished":"Concludo","tooltipText":["Este projeto permite que os voluntrios vejam objetos por ordem sequencial.","O nmero mostra-lhe a posio do objeto no grupo total."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Concludo: j viu tudo","tooltipText":["J classificou tudo neste fluxo de trabalho pelo que classificaes adicionais deste objeto no sero utilizadas na anlise do mesmo.","Se quiser ajudar, experimente escolher um fluxo de trabalho diferente ou contribuir para outro projeto."]},"WorkflowIsFinishedBanner":{"bannerText":"Este fluxo de trabalho est concludo","tooltipText":["Todos os objetos neste fluxo de trabalho foram concludos pelo que classificaes adicionais deste objeto no sero utilizadas na anlise do mesmo.","Se quiser ajudar, experimente escolher um fluxo de trabalho diferente ou contribuir para outro projeto."]}},"DrawingTools":{"RotateHandle":"Ala para rodar nota/marcao desenhada."},"FeedbackModal":{"keepClassifying":"Continuar","label":"Feedback"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Guia de Campo"},"FieldGuideItem":{"ariaTitle":"Voltar"},"FieldGuideItemAnchor":{"ariaTitle":"Selecionar {{title}}"},"title":"Guia de Campo"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Anotar"},"FullscreenButton":{"ariaLabel":{"actualSize":"Ver objeto no tamanho normal","fullscreen":"Ver objeto no modo de ecr inteiro"}},"InvertButton":{"ariaLabel":"Inverter objeto"},"MoveButton":{"ariaLabel":"Mover objeto"},"ResetButton":{"ariaLabel":"Repor vista do objeto"},"RotateButton":{"ariaLabel":"Rodar objeto"},"ZoomInButton":{"ariaLabel":"Ampliar objeto"},"ZoomOutButton":{"ariaLabel":"Reduzir zoom do objeto"}},"MetaTools":{"CollectionsButton":{"add":"Adicionar a colees"},"HidePreviousMarksDrawingButton":{"hide":"Ocultar marcaes anteriores","show":"Mostrar marcaes anteriores"},"HidePreviousTranscriptionsButton":{"hide":"Ocultar todas as marcaes","show":"Mostrar todas as marcaes","showUser":"Mostrar as suas marcaes"},"MetadataButton":{"label":"Informaes do objeto"},"MetadataModal":{"table":{"label":"Etiqueta","value":"Valor"},"title":"Metadados do objeto"}},"ModalTutorial":{"title":"Tutorial"},"QuickTalk":{"aria":{"closeButton":"Fechar o painel de comentrios","goToTalk":"Ir para a conversa do objeto em Conversar","mainPanel":"Painel de comentrios QuickTalk","openButton":"O objeto tem {{count}} comentrio(s). Clique para expandir.","panelContent":"Comentrios na conversa do objeto","panelHeading":"Conversa do objeto"},"errors":{"failPostComment":"No foi possvel adicionar comentrios a conversa existente.","failPostDiscussion":"No foi possvel adicionar comentrios a nova conversa.","noBoard":"Ainda no foi configurado um quadro de comentrios sobre o objeto para este projeto.","noText":"No  possvel publicar um comentrio vazio.","noUser":"Utilizador sem sesso iniciada"},"loginToPost":"Inicie sesso para publicar um comentrio","status":{"initialized":"Deixar uma nota sobre este objeto","loading":"(A carregar)","success":"Comentrio publicado!"},"subjectHasNoComments":"Este objeto ainda no tem comentrios."},"SlideTutorial":{"StepNavigation":{"go":"Ir para o passo {{index}}","next":"Ir para o passo seguinte","previous":"Ir para o passo anterior"},"alt":"Passo de tutorial {{activeStep}}","error":"O passo de tutorial no pde ser carregado.","getStarted":"Iniciar","heading":"{{projectDisplayName}} Tutorial"},"StepNavigation":{"go":"Ir para o passo {{index}}","next":"Ir para o passo seguinte","previous":"Ir para o passo anterior"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Grfico de barras"},"ImageAndTextViewer":{"textIconAltText":"cone de visualizador de texto"},"InteractionLayer":{"ConfirmModal":{"close":"Fechar sem guardar","confirm":"Quer mesmo fechar? Esta marcao ser eliminada.","keepWorking":"Continuar a trabalhar"},"SaveButton":{"save":"Guardar e fechar"},"SubTaskPopup":{"notRender":"A componente da tarefa no pde ser composta.","required":"Esta tarefa  necessria."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"transcrio agregada","explanation":"Estas {{count}} transcries foram submetidas por voluntrios anteriores e no podem ser modificadas.","noAggregation":"Sem agregaes disponveis.","title":"Transcries anteriores","transcriptionsUnavailable":"Transcries indisponveis."},"complete":"Transcrio concluda","transcribed":"Tem transcries"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Prximo","previousFrameLabel":"Anterior","thumbnailAltText":"Miniatura da imagem"}},"ScatterPlotViewer":{"Selection":{"delete":"Eliminar seleo {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Mudar para vista de flipbook","switchToSeparateFrames":"Mudar para vista de frames separados"}},"SingleVideoViewerContainer":{"error":"Ocorreu um erro ao carregar o objeto."},"VariableStarViewer":{"controls":"controlos","figCaption":"Diagrama HR","flip":"inverter","focus":"focar","highlight":"destacar","imageTitle":"Diagrama RH: Luminosidade vs Temperatura","label":"Filtro {{id}}","periodMultiple":"mltiplo do perodo","phase":"fase","phaseFocus":"foco de fase"},"VideoController":{"closeVolume":"Fechar o controlo de deslize do volume","fullscreen":"Mostrar vdeo em ecr inteiro","openVolume":"Abrir o controlo de deslize do volume","pause":"Colocar vdeo em pausa","play":"Reproduzir vdeo","playbackSpeed":"Seleo da velocidade de reproduo do vdeo","scrubber":"Limpeza de dados do leitor de vdeo","volumeSlider":"Controlo de deslize do volume"},"ZoomControlButton":{"disable":"desativar zoom","enable":"ativar zoom"},"loading":"Carregar um objeto","zoomHelp":"Utilize CTRL + deslocao para fazer zoom"},"TaskArea":{"DisabledTaskPopup":{"body":"Este objeto tem classificaes suficientes pelo que quaisquer classificaes adicionais submetidas no sero utilizadas para fins de anlise. Pode continuar a ver este objeto para referncia.","options":{"dismiss":"Ignorar","next":"Prximo objeto disponvel","select":"Escolher um novo objeto"},"title":"Concludo"},"Tasks":{"BackButton":{"back":"Voltar"},"DoneAndTalkButton":{"doneAndTalk":"Concluir e Debater","newTab":"num novo separador"},"DoneButton":{"done":"Concluir"},"ExpertOptions":{"demoToggle":"Modo de demonstrao","label":"Opes de especialista"},"NextButton":{"next":"Prximo"},"TaskHelp":{"close":"Fechar","label":"Precisa de ajuda com esta tarefa?"},"demoMode":"No modo de demonstrao, as classificaes no sero guardadas. Utilize-o para demonstraes rpidas e imprecisas da interface de classificao.","error":"Algo correu mal","loading":"(A carregar)","renderFallback":"A componente da tarefa no pde ser composta."},"task":"Tarefa","tutorial":"Tutorial"}}')},"../lib-classifier/dist/esm/translations/pt/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Clique e arraste do ponto de abertura at ao ponto de fecho ou faa duplo clique em qualquer parte da linha para criar um ponto de unio","closePoint":"Clique em qualquer parte da linha para definir o ponto de fecho","inactive":"Clique para editar esta linha","spliceDrag":"Clique e arraste do ponto de abertura at ao ponto de fecho","splicePoint":"Faa duplo clique em qualquer parte da linha para criar um ponto de unio"},"HighlighterTask":{"delete":"Eliminar","noLabels":"Sem etiquetas para a tarefa de destaque","status":"{{count}} marcadas"},"InputStatus":{"drawn":"{{count}} desenhada(s)","max":"{{count}} do mximo de {{max}} desenhadas","maxAndMin":"{{count}} de {{min}} necessrias, mximo de {{max}} desenhadas","min":"{{count}} de {{min}} necessrias desenhadas"},"LineControls":{"close":"Fechar","delete":"Eliminar","deleteCancel":"Cancelar eliminao","deleteConfirm":"Confirmar eliminao","lineControls":"Controlos de linha","move":"Mover","redo":"Refazer","undo":"Anular"},"SimpleDropdownTask":{"customInputPlaceholder":"Introduza algo","otherLabel":"Outro...","selectPlaceholder":"Escolher uma resposta"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Limpar filtros","closeFilters":"Fechar filtros","filter":"Filtro","removeFilter":"Remover filtro {{valueLabel}}","showing":"Mostrar {{showing}} de {{total}}"},"Choice":{"cancel":"Cancelar","identify":"Identificar","lessInfo":"Menos informaes","moreInfo":"Mais informaes","notThis":"Isto no"},"ChoiceButton":{"identified":"identificado","openSubmenu":"Abrir o submenu para {{choiceLabel}}"},"ConfusedWith":{"cancel":"Cancelar","confused":"Muitas vezes confundido com","itsThis":"Creio que  isto"},"DeleteButton":{"delete":"Eliminar opo {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Repor"},"TextTask":{"TextTagButtons":{"modifiers":"Modificadores de texto"}},"TranscriptionLine":{"created":"Transcrio criada","editing":"Editar transcrio"}}')},"../lib-classifier/dist/esm/translations/ru/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"    ","tooltipText":["      ,        .","   ,           ."]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"   ?"},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":"   \\"\\",       "},"RetiredBanner":{"bannerText":":    ","tooltipText":["      ,        .","   ,           ."]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":"","tooltipText":["        .","      ."]},"UserHasFinishedWorkflowBanner":{"bannerText":":   ","tooltipText":["       ,            .","   ,           ."]},"WorkflowIsFinishedBanner":{"bannerText":"   ","tooltipText":["       ,            .","   ,           ."]}},"DrawingTools":{"RotateHandle":"    /."},"FeedbackModal":{"keepClassifying":"","label":" "},"FieldGuide":{"FieldGuideButton":{"buttonLabel":""},"FieldGuideItem":{"ariaTitle":""},"FieldGuideItemAnchor":{"ariaTitle":" {{title}}"},"title":"Field Guide"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":" "},"FullscreenButton":{"ariaLabel":{"actualSize":"    ","fullscreen":"    "}},"InvertButton":{"ariaLabel":" "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"Reset view"},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"  "},"ZoomOutButton":{"ariaLabel":"  "}},"MetaTools":{"CollectionsButton":{"add":"  "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":"  "},"MetadataButton":{"label":"  "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":"   "},"QuickTalk":{"aria":{"closeButton":"  ","goToTalk":"     Talk","mainPanel":"  QuickTalk","openButton":"   {{count}} . ,  .","panelContent":"   ","panelHeading":" "},"errors":{"failPostComment":"      .","failPostDiscussion":"      .","noBoard":"          .","noText":"   .","noUser":"    ."},"loginToPost":",   ,   .","status":{"initialized":"    ","loading":" ","success":" !"},"subjectHasNoComments":"     ."},"SlideTutorial":{"StepNavigation":{"go":"   {{index}}","next":"  ","previous":"  "},"alt":",  {{activeStep}}","error":"    .","getStarted":"","heading":"{{projectDisplayName}}   "},"StepNavigation":{"go":"   {{index}}","next":"  ","previous":"  "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"   "},"InteractionLayer":{"ConfirmModal":{"close":",  ","confirm":" ,   ?    .","keepWorking":" "},"SaveButton":{"save":"  "},"SubTaskPopup":{"notRender":"     .","required":"    ."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":" {{count}}          .","noAggregation":" .","title":" ","transcriptionsUnavailable":" ."},"complete":" ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":"  {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"     ","switchToSeparateFrames":"      "}},"SingleVideoViewerContainer":{"error":"    ."},"VariableStarViewer":{"controls":"","figCaption":" HR","flip":"","focus":"","highlight":"","imageTitle":" HR:   ","label":" {{id}}","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"  ","fullscreen":"   ","openVolume":"  ","pause":"   ","play":" ","playbackSpeed":"  ","scrubber":" ","volumeSlider":" "},"ZoomControlButton":{"disable":" ","enable":" "},"loading":" ","zoomHelp":" CTRL +   "},"TaskArea":{"DisabledTaskPopup":{"body":"    ,          .        .","options":{"dismiss":"","next":"  ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":", ","newTab":"  "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":"-","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"    ?"},"demoMode":" -    .    ,    .","error":"-   ","loading":" ","renderFallback":"     ."},"task":"","tutorial":"  "}}')},"../lib-classifier/dist/esm/translations/ru/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"               ,    ","closePoint":"    ,    ","inactive":",    ","spliceDrag":"        ","splicePoint":"     ,    "},"HighlighterTask":{"delete":"","noLabels":"    ","status":"{{count}} "},"InputStatus":{"drawn":"{{count}} ","max":"{{count}}   {{max}} ","maxAndMin":"{{count}}  {{min}} ,   {{max}}","min":"{{count}}   {{min}} "},"LineControls":{"close":"","delete":"","deleteCancel":" ","deleteConfirm":" ","lineControls":" ","move":"","redo":"","undo":""},"SimpleDropdownTask":{"customInputPlaceholder":" -","otherLabel":"...","selectPlaceholder":" "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":" ","closeFilters":" ","filter":"","removeFilter":" {{valueLabel}} ()","showing":"  {{showing}} of {{total}}"},"Choice":{"cancel":"","identify":"","lessInfo":" ","moreInfo":" ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"   {{choiceLabel}}"},"ConfusedWith":{"cancel":"","confused":"  ","itsThis":",  "},"DeleteButton":{"delete":"  {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":" ","editing":" "}}')},"../lib-classifier/dist/esm/translations/sv/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Du har redan sett det hr motivet","tooltipText":["Du har redan sett och klassificerat detta motiv, s ytterligare klassificeringar kommer inte att bidra till dess analys.","Om du vill hjlpa till, frsk att vlja ett annat arbetsflde eller att bidra till ett annat projekt."]},"Banner":{"next":"Nsta","previous":"Tidigare","whyAmISeeingThis":"Varfr ser jag detta?"},"InProgressConfirmModal":{"cancel":"Avbryt","confirm":"OK","inProgress":"Om du gr tillbaka sparas inte ditt arbete med den aktuella uppgiften."},"RetiredBanner":{"bannerText":"Avslutat: Detta motivet har tagits ur bruk","tooltipText":["Det hr motivet har redan tillrckligt med klassificeringar, s din kommer inte att anvndas i dess analys.","Om du vill hjlpa till, frsk att vlja ett annat arbetsflde eller att bidra till ett annat projekt."]},"SubjectSetProgressBanner":{"alreadySeen":"Redan sett","bannerText":"{{setName}}: Motiv {{number}}/{{total}}","finished":"Slutfrt","tooltipText":["Det hr projektet gr det mjligt fr volontrer att se frskspersoner i ordningsfljd.","Siffran visar dig motivets position inom den totala gruppen."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Klart: Du har sett allt","tooltipText":["Du har redan klassificerat allt i det hr arbetsfldet, s ytterligare klassificeringar av detta motiv kommer inte att anvndas i analysen.","Om du vill hjlpa till, frsk att vlja ett annat arbetsflde eller att bidra till ett annat projekt."]},"WorkflowIsFinishedBanner":{"bannerText":"Detta arbetsflde r slutfrt","tooltipText":["Alla motiv i det hr arbetsfldet har slutfrts, s ytterligare klassificeringar av detta motiv kommer inte att anvndas i analysen.","Om du vill hjlpa till, frsk att vlja ett annat arbetsflde eller att bidra till ett annat projekt."]}},"DrawingTools":{"RotateHandle":"Handtag fr roterande ritad kommentar/markering."},"FeedbackModal":{"keepClassifying":"Fortstt","label":"Feedback"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Fltguide"},"FieldGuideItem":{"ariaTitle":"Tillbaka"},"FieldGuideItemAnchor":{"ariaTitle":"Vlj {{title}}"},"title":"Fltguide"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Kommentera"},"FullscreenButton":{"ariaLabel":{"actualSize":"Visa motivet i normal storlek","fullscreen":"Visa motivet i helskrmslge"}},"InvertButton":{"ariaLabel":"Invertera motiv"},"MoveButton":{"ariaLabel":"Flytta motiv"},"ResetButton":{"ariaLabel":"terstll"},"RotateButton":{"ariaLabel":"Rotera motivet"},"ZoomInButton":{"ariaLabel":"Zooma in p motivet"},"ZoomOutButton":{"ariaLabel":"Zooma ut frn motivet"}},"MetaTools":{"CollectionsButton":{"add":"Lgg till i samling"},"HidePreviousMarksDrawingButton":{"hide":"Dlj tidigare markeringar","show":"Visa tidigare markeringar"},"HidePreviousTranscriptionsButton":{"hide":"Dlj alla markeringar","show":"Visa alla markeringar","showUser":"Visa dina markeringar"},"MetadataButton":{"label":"Motivinformation"},"MetadataModal":{"table":{"label":"Mrka","value":"Vrde"},"title":"Motivmetadata"}},"ModalTutorial":{"title":"Snabbkurs"},"QuickTalk":{"aria":{"closeButton":"Stng kommentarspanelen","goToTalk":"G till motivsdiskussion p Talk","mainPanel":"QuickTalk-kommentarspanelen","openButton":"Motivet har {{count}} kommentar(er). Klicka fr att expandera.","panelContent":"Kommentarer till motivdiskussionen","panelHeading":"Motivdiskussion"},"errors":{"failPostComment":"Kunde inte lgga till kommentarer i befintlig diskussion.","failPostDiscussion":"Kunde inte lgga till kommentarer i den nya diskussionen.","noBoard":"En forum fr motivkommentarer har nnu inte skapats fr detta projekt.","noText":"Det gr inte att posta en tom kommentar.","noUser":"Anvndaren r inte inloggad."},"loginToPost":"Logga in fr att posta en kommentar.","status":{"initialized":"Lmna en kommentar om detta motiv","loading":"(Laddar)","success":"Kommentar postad!"},"subjectHasNoComments":"Det hr motivet har inga kommentarer nnu."},"SlideTutorial":{"StepNavigation":{"go":"G till steg {{index}}","next":"G till nsta steg","previous":"G till fregende steg"},"alt":"Handledningssteg {{activeStep}}","error":"Handledningssteget kunde inte laddas.","getStarted":"Kom igng","heading":"{{projectDisplayName}} Snabbkurs"},"StepNavigation":{"go":"G till steg {{index}}","next":"G till nsta steg","previous":"G till fregende steg"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Stapeldiagram"},"ImageAndTextViewer":{"textIconAltText":"Ikon fr textvisare"},"InteractionLayer":{"ConfirmModal":{"close":"Stng utan att spara","confirm":"r du sker p att du vill stnga? Denna markering kommer att raderas.","keepWorking":"Fortstt arbeta"},"SaveButton":{"save":"Spara och stng"},"SubTaskPopup":{"notRender":"Det gick inte att terge uppgiftskomponenten.","required":"Denna uppgift krvs."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"aggregerad transkription","explanation":"Dessa {{count}} transkriptioner har skickats in av tidigare volontrer och de kan inte ndras.","noAggregation":"Ingen tillgnglig aggregering.","title":"Tidigare transkriptioner","transcriptionsUnavailable":"Transkriptioner r inte tillgngliga."},"complete":"Skapad transkription","transcribed":"Har transkriptioner"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Nsta","previousFrameLabel":"Tidigare","thumbnailAltText":"Miniatyr av bild"}},"ScatterPlotViewer":{"Selection":{"delete":"Ta bort val {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Byt till bldderboksvy","switchToSeparateFrames":"Byt till vy med separata ramar"}},"SingleVideoViewerContainer":{"error":"Det uppstod ett fel vid inlsning av motivet."},"VariableStarViewer":{"controls":"kontroller","figCaption":"HR-diagram","flip":"vnd","focus":"fokusera","highlight":"markera","imageTitle":"HR-diagram: Luminans kontra temperatur","label":"Filtrera {{id}}","periodMultiple":"period multipel","phase":"fas","phaseFocus":"fasfokus"},"VideoController":{"closeVolume":"Stng volymreglaget","fullscreen":"Visa video i helskrmslge","openVolume":"ppna volymreglaget","pause":"Pausa video","play":"Spela upp video","playbackSpeed":"Val av uppspelningshastighet fr video","scrubber":"Scrubber fr videospelare","volumeSlider":"Volymreglage"},"ZoomControlButton":{"disable":"inaktivera zoom","enable":"aktivera zoom"},"loading":"Laddar ett motiv","zoomHelp":"Anvnd CTRL + scrolla fr att zooma"},"TaskArea":{"DisabledTaskPopup":{"body":"Det hr motivet har tillrckligt mnga klassificeringar, s eventuella ytterligare klassificeringar som skickas in kommer inte att anvndas i analysen. Du kan fortfarande se detta motiv som referens.","options":{"dismiss":"Stng","next":"Nsta tillgngliga motiv","select":"Vlj ett nytt motiv"},"title":"Slutfrt"},"Tasks":{"BackButton":{"back":"Tillbaka"},"DoneAndTalkButton":{"doneAndTalk":"Klart & diskutera","newTab":"i en ny flik"},"DoneButton":{"done":"Klart"},"ExpertOptions":{"demoToggle":"Demolge","label":"Expertalternativ"},"NextButton":{"next":"Nsta"},"TaskHelp":{"close":"Stng","label":"Behver du hjlp med den hr uppgiften?"},"demoMode":"I demolge sparas inte klassificeringar. Anvnd detta fr snabba, felaktiga demonstrationer av klassificeringsgrnssnittet.","error":"Ngot gick fel","loading":"(Laddar)","renderFallback":"Det gick inte att terge uppgiftskomponenten."},"task":"Uppgift","tutorial":"Snabbkurs"}}')},"../lib-classifier/dist/esm/translations/sv/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Klicka och dra frn ppningspunkten till stngningspunkten eller dubbelklicka var som helst p linjen fr att skapa en skarvpunkt","closePoint":"Klicka var som helst p linjen fr att stlla in stngningspunkten","inactive":"Klicka fr att redigera denna linjen","spliceDrag":"Klicka och dra frn ppningspunkten till stngningspunkten","splicePoint":"Dubbelklicka var som helst p linjen fr att skapa en skarvpunkt"},"HighlighterTask":{"delete":"Radera","noLabels":"Inga mrkningar fr verstrykningspennan","status":"{{count}} har markerats"},"InputStatus":{"drawn":"{{count}} ritad","max":"{{count}} av {{max}} maximalt ritade","maxAndMin":"{{count}} av {{min}} som krvs, {{max}} maximalt ritade","min":"{{count}} av {{min}} ritade enligt krav"},"LineControls":{"close":"Stng","delete":"Radera","deleteCancel":"Avbryt radering","deleteConfirm":"Bekrfta radering","lineControls":"Linjekontroller","move":"Flytta","redo":"Gr om","undo":"ngra"},"SimpleDropdownTask":{"customInputPlaceholder":"Ange ngot","otherLabel":"Annat...","selectPlaceholder":"Vlj ett svar"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Rensa filter","closeFilters":"Stng filter","filter":"Filtrera","removeFilter":"Ta bort {{valueLabel}} filtret","showing":"Visar {{showing}} av {{total}}"},"Choice":{"cancel":"Avbryt","identify":"Identifiera","lessInfo":"Mindre information","moreInfo":"Mer information","notThis":"Inte detta"},"ChoiceButton":{"identified":"identifierad","openSubmenu":"ppna undermeny fr {{choiceLabel}}"},"ConfusedWith":{"cancel":"Avbryt","confused":"Frvxlas ofta med","itsThis":"Jag tror att det r det hr"},"DeleteButton":{"delete":"Ta bort val {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"terstll"},"TextTask":{"TextTagButtons":{"modifiers":"Textmodifierare"}},"TranscriptionLine":{"created":"Skapad transkription","editing":"Redigering av transkription"}}')},"../lib-classifier/dist/esm/translations/sw/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Tayari umeona picha hii","tooltipText":["Tayari umeona na kuainisha picha hii, kwa hivyo uainishaji zaidi hautachangia katika uchambuzi wake.","Ikiwa unataka kusaidia, jaribu kuchagua mtiririko tofauti wa kazi au kuchangia kwenye mradi tofauti."]},"Banner":{"next":"Inayofuata","previous":"Iliyotangulia","whyAmISeeingThis":"Kwa nini ninaona haya?"},"InProgressConfirmModal":{"cancel":"Acha","confirm":"Thibitisha","inProgress":"Una uhakika unataka kwenda kwenye Picha tofauti? Manukuu yoyote uliyofanya kwenye Picha ya sasa yatapotea."},"RetiredBanner":{"bannerText":"Imekamilika: Picha hii imeondolewa","tooltipText":["Tayari picha hii ina uainishaji wa kutosha, kwa hivyo uainishaji wako hautatumika katika uchambuzi wake.","Ikiwa unataka kusaidia, jaribu kuchagua mtiririko tofauti wa kazi au kuchangia kwenye mradi tofauti."]},"SubjectSetProgressBanner":{"alreadySeen":"Tayari umeona","bannerText":"{{setName}}: Picha ya {{number}}kati ya{{total}}","finished":"Imekamilika","tooltipText":["Mradi huu unawezesha watu wa kujitolea kuangalia picha katika mpangilio wa mfuatano.","Namba inakuonyesha nafasi ya picha ndani ya jumla ya kikundi."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Imekamilika: Umeona kila kitu","tooltipText":["Tayari umeainisha kila kitu kwenye mtiririko huu wa kazi, kwa hivyo uainishaji zaidi wa picha hii hautatumika katika uchambuzi wake.","Ikiwa unataka kusaidia, jaribu kuchagua mtiririko tofauti wa kazi au kuchangia kwenye mradi tofauti."]},"WorkflowIsFinishedBanner":{"bannerText":"Mtiririko huu wa kazi umekamilika","tooltipText":["Picha zote kwenye mtiririko huu wa kazi zimekamilishwa, kwa hivyo uainishaji zaidi wa picha hii hautatumika katika uchambuzi wake.","Ikiwa unataka kusaidia, jaribu kuchagua mtiririko tofauti wa kazi au kuchangia kwenye mradi tofauti."]}},"DrawingTools":{"RotateHandle":"Kishikio cha kuzungusha manukuu/alama iliyochorwa."},"FeedbackModal":{"keepClassifying":"Endelea Kuainisha","label":"Maoni"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Mwongozo wa Sehemu"},"FieldGuideItem":{"ariaTitle":"Rudi kwenye orodha ya vipengee vya Mwongozo wa Sehemu"},"FieldGuideItemAnchor":{"ariaTitle":"Chagua {{title}}"},"title":"Mwongozo wa Sehemu"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Manukuu"},"FullscreenButton":{"ariaLabel":{"actualSize":"Angalia picha katika ukubwa wa kawaida","fullscreen":"Angalia picha katika hali ya skrini nzima"}},"InvertButton":{"ariaLabel":"Geuza picha"},"MoveButton":{"ariaLabel":"Hamisha picha"},"ResetButton":{"ariaLabel":"Badilisha mwonekano wa picha"},"RotateButton":{"ariaLabel":"Zungusha picha"},"ZoomInButton":{"ariaLabel":"Vuta karibu na picha"},"ZoomOutButton":{"ariaLabel":"Sogeza mbali na picha"}},"MetaTools":{"CollectionsButton":{"add":"Weka kwenye mikusanyiko"},"HidePreviousMarksDrawingButton":{"hide":"Ficha Alama za Awali","show":"Onyesha Alama za Awali"},"HidePreviousTranscriptionsButton":{"hide":"Ficha Alama Zote","show":"Onyesha Alama Zote","showUser":"Onyesha Alama Zako"},"MetadataButton":{"label":"Maelezo ya Picha"},"MetadataModal":{"table":{"label":"Lebo","value":"Thamani"},"title":"Metadata ya Picha"}},"ModalTutorial":{"title":"Mafunzo"},"QuickTalk":{"aria":{"closeButton":"Funga kidirisha cha maoni","goToTalk":"Nenda kwenye Majadiliano ya Picha kwenye Talk","mainPanel":"Kidirisha cha Maoni cha QuickTalk","openButton":"Picha ina maoni {{count}} . Bofya ili upanue.","panelContent":"Maoni ya Majadiliano ya Picha","panelHeading":"Majadiliano ya Picha"},"errors":{"failPostComment":"Imeshindwa kuweka maoni kwenye majadiliano yaliyopo.","failPostDiscussion":"Imeshindwa kuweka maoni kwenye majadiliano mapya.","noBoard":"Bodi ya maoni ya picha bado haijawekwa kwa mradi huu.","noText":"Huwezi kuchapisha maoni yasiyo na maandishi.","noUser":"Mtumiaji hajaingia katika akaunti."},"loginToPost":"Tafadhali ingia katika akaunti ili uchapishe maoni.","status":{"initialized":"Andika maoni kuhusu picha hii","loading":"Inachapisha maoni...","success":"Maoni yamechapishwa!"},"subjectHasNoComments":"Picha hii bado haina maoni yoyote."},"SlideTutorial":{"StepNavigation":{"go":"Nenda kwenye hatua ya {{index}}","next":"Nenda kwenye hatua inayofuata","previous":"Nenda kwenye hatua iliyotangulia"},"alt":"Hatua ya mafunzo ya {{activeStep}}","error":"Imeshindwa kupakia hatua ya mafunzo.","getStarted":"Anza","heading":"Mafunzo ya {{projectDisplayName}}"},"StepNavigation":{"go":"Nenda kwenye hatua ya {{index}}","next":"Nenda kwenye hatua inayofuata","previous":"Nenda kwenye hatua iliyotangulia"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Chati ya pau"},"ImageAndTextViewer":{"textIconAltText":"Aikoni ya kitazamaji maandishi"},"InteractionLayer":{"ConfirmModal":{"close":"Funga bila kuhifadhi","confirm":"Una uhakika unataka kufunga? Alama hii itafutwa.","keepWorking":"Endelea kufanya kazi"},"SaveButton":{"save":"Hifadhi na Ufunge"},"SubTaskPopup":{"notRender":"Imeshinda kutekeleza kipengele cha kazi.","required":"Kazi hii inatakikana."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"manukuu yaliyojumlishwa","explanation":"Manukuu haya {{count}} yaliwasilishwa na watu wa kujitolea waliotangulia na hayawezi kurekebishwa.","noAggregation":"Hakuna ujumlishaji unaopatikana.","title":"Manukuu ya Awali","transcriptionsUnavailable":"Manukuu hayapatikani."},"complete":"Manukuu yamekamilika","transcribed":"Ina manukuu"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Inayofuata","previousFrameLabel":"Iliyotangulia","thumbnailAltText":"Kijipicha cha picha"}},"ScatterPlotViewer":{"Selection":{"delete":"Futa chaguo {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Badili utumie mwonekano wa kitabu cha kugeuza","switchToSeparateFrames":"Badili utumie mwonekano wa fremu tofauti"}},"SingleVideoViewerContainer":{"error":"Hitilafu imetokea wakati wa kupakia picha."},"VariableStarViewer":{"controls":"vidhibiti","figCaption":"Mchoro wa HR","flip":"geuza","focus":"lenga","highlight":"angazia","imageTitle":"Mchoro wa HR: Ung\'aavu dhidi ya Halijoto","label":"Chuja {{id}}","periodMultiple":"alama za dukuduku","phase":"awamu","phaseFocus":"uangaziaji wa awamu"},"VideoController":{"closeVolume":"Funga Kitelezi cha Sauti","fullscreen":"Onyesha Skrini Nzima ya Video","openVolume":"Fungua Kitelezi cha Sauti","pause":"Simamisha video","play":"Cheza video","playbackSpeed":"Uteuzi wa kasi ya uchezaji wa video","scrubber":"Kitelezi cha kicheza video","volumeSlider":"Kitelezi cha Sauti"},"ZoomControlButton":{"disable":"zima kipengele cha kukuza","enable":"washa kipengele cha kukuza"},"loading":"Inapakia picha","zoomHelp":"Tumia CTRL + scroll kukuza"},"TaskArea":{"DisabledTaskPopup":{"body":"Picha hii ina uainishaji wa kutosha, kwa hivyo uainishaji wowote wa ziada utakaowasilishwa hautatumika katika uchambuzi wake. Bado unaweza kuangalia picha hii kama marejeleo.","options":{"dismiss":"Ondoa","next":"Mradi unaofuata unaopatikana","select":"Chagua mradi mpya"},"title":"Imekamilika"},"Tasks":{"BackButton":{"back":"Nyuma"},"DoneAndTalkButton":{"doneAndTalk":"Done & Talk","newTab":"kwenye kichupo kipya"},"DoneButton":{"done":"Umemaliza"},"ExpertOptions":{"demoToggle":"Hali ya Onyesho","label":"Chaguo za Mtaalamu"},"NextButton":{"next":"Inayofuata"},"TaskHelp":{"close":"Funga","label":"Unahitaji msaada kwa kazi hii?"},"demoMode":"Katika hali ya onyesho, uainishaji hautahifadhiwa. Tumia hii kwa maonyesho ya haraka yasiyo sahihi ya kiolesura cha uainishaji.","error":"Hitilafu fulani imetokea","loading":"Inapakia","renderFallback":"Imeshinda kutekeleza kipengele cha kazi."},"task":"Kazi","tutorial":"Mafunzo"}}')},"../lib-classifier/dist/esm/translations/sw/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Bofya na uburute kutoka sehemu ya kufungua hadi sehemu ya kufunga au bofya mara mbili popote kwenye mstari ili utengeneze sehemu ya kuunganisha","closePoint":"Bofya popote kwenye mstari ili uweke sehemu ya kufunga","inactive":"Bofya ili ubadilishe mstari huu","spliceDrag":"Bofya na uburute kutoka sehemu ya kufungua hadi sehemu ya kufunga","splicePoint":"Bofya mara mbili popote kwenye mstari ili uweke sehemu ya kuunganisha"},"HighlighterTask":{"delete":"Futa","noLabels":"Hakuna lebo za Kazi ya Kiangaziaji","status":"{{count}} Umewekewa alama"},"InputStatus":{"drawn":"Umechora {{count}}","max":"Umechora {{count}} kati ya kikomo cha juu cha {{max}}","maxAndMin":"Inatakikana {{count}} kati ya {{min}}, umechora isiyozidi {{max}}","min":"Umechora {{count}} kati ya {{min}} inayotakikana"},"LineControls":{"close":"Funga","delete":"Futa","deleteCancel":"Acha Kufuta","deleteConfirm":"Thibitisha Kufuta","lineControls":"Vidhibiti vya Mstari","move":"Hamisha","redo":"Rejesha","undo":"Tendua"},"SimpleDropdownTask":{"customInputPlaceholder":"Andika kitu","otherLabel":"Nyingine...","selectPlaceholder":"Chagua jibu"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Futa vichujio","closeFilters":"Funga vichujio","filter":"Chuja","removeFilter":"Ondoa kichujio {{valueLabel}}","showing":"Inaonyesha {{showing}} kati ya {{total}}"},"Choice":{"cancel":"Acha","identify":"Tambua","lessInfo":"Maelezo machache","moreInfo":"Maelezo zaidi","notThis":"Si hii"},"ChoiceButton":{"identified":"imetambuliwa","openSubmenu":"Fungua mengu ndogo ya {{choiceLabel}}"},"ConfusedWith":{"cancel":"Acha","confused":"Wakati mwingine inachanganywa na","itsThis":"Ninafikiri ni hii"},"DeleteButton":{"delete":"Futa chaguo {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Badilisha"},"TextTask":{"TextTagButtons":{"modifiers":"Virekebishaji maandishi"}},"TranscriptionLine":{"created":"Imetayarisha manukuu","editing":"Inahariri manukuu"}}')},"../lib-classifier/dist/esm/translations/te/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"    ","tooltipText":["     ,       .","  ,        ."]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"  ?"},"InProgressConfirmModal":{"cancel":" ","confirm":"","inProgress":"     ?        ."},"RetiredBanner":{"bannerText":":    .","tooltipText":["      ,      .","  ,        ."]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":"","tooltipText":["      .","       ."]},"UserHasFinishedWorkflowBanner":{"bannerText":":   .","tooltipText":["     ,        .","  ,        ."]},"WorkflowIsFinishedBanner":{"bannerText":"  ","tooltipText":["    ,        .","  ,        ."]}},"DrawingTools":{"RotateHandle":" /  ."},"FeedbackModal":{"keepClassifying":" ","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":"     "},"FieldGuideItemAnchor":{"ariaTitle":"{{title}} "},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":""},"FullscreenButton":{"ariaLabel":{"actualSize":"   ","fullscreen":"    "}},"InvertButton":{"ariaLabel":"  "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"   "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"   "},"ZoomOutButton":{"ariaLabel":"    "}},"MetaTools":{"CollectionsButton":{"add":" "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":"  "},"MetadataButton":{"label":" "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"  ","goToTalk":"Talk   ","mainPanel":"QuickTalk  ","openButton":" {{count}} ()  .   .","panelContent":"   ","panelHeading":" "},"errors":{"failPostComment":"     .","failPostDiscussion":"   .","noBoard":"          .","noText":"     .","noUser":"  ."},"loginToPost":"      .","status":{"initialized":"     ","loading":"  ...","success":"  !"},"subjectHasNoComments":"     ."},"SlideTutorial":{"StepNavigation":{"go":" {{index}} ","next":"  ","previous":"  "},"alt":"  {{activeStep}}","error":"    .","getStarted":"","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":" {{index}} ","next":"  ","previous":"  "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"   "},"InteractionLayer":{"ConfirmModal":{"close":"  ","confirm":"  ?   .","keepWorking":"  "},"SaveButton":{"save":"  "},"SubTaskPopup":{"notRender":"Task  .","required":"  ."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":" {{count}}           .","noAggregation":"   .","title":" ","transcriptionsUnavailable":"  ."},"complete":" ","transcribed":"  "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":"  "}},"ScatterPlotViewer":{"Selection":{"delete":" {{index}} "}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"  ","switchToSeparateFrames":"   "}},"SingleVideoViewerContainer":{"error":"    ."},"VariableStarViewer":{"controls":"","figCaption":"HR ","flip":"","focus":" ","highlight":" ","imageTitle":"HR :  vs ","label":"{{id}}  ","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"   ","fullscreen":"   ","openVolume":"  ","pause":"  ","play":"  ","playbackSpeed":"    ","scrubber":"  ","volumeSlider":" "},"ZoomControlButton":{"disable":" ","enable":" "},"loading":"  ","zoomHelp":"  CTRL +  "},"TaskArea":{"DisabledTaskPopup":{"body":"    ,        .       .","options":{"dismiss":"","next":"   ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":" & ","newTab":"  "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":" ","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"    ?"},"demoMode":" ,   .    ,     .","error":"  ","loading":" ","renderFallback":"Task  ."},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/te/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                   ","closePoint":"        .","inactive":"    .","spliceDrag":"        ","splicePoint":"        "},"HighlighterTask":{"delete":"","noLabels":"   ","status":"{{count}}  "},"InputStatus":{"drawn":"{{count}}  ","max":"{{count}}  {{max}}  ","maxAndMin":"{{count}}  {{min}} , {{max}}    ","min":"{{count}}   {{min}}  "},"LineControls":{"close":"","delete":"","deleteCancel":"  ","deleteConfirm":" ","lineControls":" ","move":"","redo":" ","undo":"  "},"SimpleDropdownTask":{"customInputPlaceholder":"  ","otherLabel":"...","selectPlaceholder":"  "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"  ","closeFilters":" ","filter":" ","removeFilter":"{{valueLabel}}  ","showing":"{{showing}}  {{total}} "},"Choice":{"cancel":" ","identify":"","lessInfo":" ","moreInfo":" ","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"{{choiceLabel}}   "},"ConfusedWith":{"cancel":" ","confused":"  ","itsThis":"   "},"DeleteButton":{"delete":" {{choiceLabel}} "}},"TextFromSubjectTask":{"reset":" "},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":" ","editing":" "}}')},"../lib-classifier/dist/esm/translations/test/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Translated","tooltipText":["Translated","Translated"]},"Banner":{"next":"Translated","previous":"Translated","whyAmISeeingThis":"Translated"},"InProgressConfirmModal":{"cancel":"Translated","confirm":"Translated","inProgress":"Translated"},"RetiredBanner":{"bannerText":"Translated","tooltipText":["Translated","Translated"]},"SubjectSetProgressBanner":{"alreadySeen":"Translated","bannerText":"{{setName}}: Translated {{number}}/{{total}}","finished":"Translated","tooltipText":["Translated","Translated"]},"UserHasFinishedWorkflowBanner":{"bannerText":"Translated","tooltipText":["Translated","Translated"]},"WorkflowIsFinishedBanner":{"bannerText":"Translated","tooltipText":["Translated","Translated"]}},"DrawingTools":{"RotateHandle":"Translated"},"FeedbackModal":{"keepClassifying":"Translated","label":"Translated"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Translated"},"FieldGuideItem":{"ariaTitle":"Translated"},"FieldGuideItemAnchor":{"ariaTitle":"Translated {{title}}"},"title":"Translated"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Translated"},"FullscreenButton":{"ariaLabel":{"actualSize":"Translated","fullscreen":"Translated"}},"InvertButton":{"ariaLabel":"Translated"},"MoveButton":{"ariaLabel":"Translated"},"ResetButton":{"ariaLabel":"Translated"},"RotateButton":{"ariaLabel":"Translated"},"ZoomInButton":{"ariaLabel":"Translated"},"ZoomOutButton":{"ariaLabel":"Translated"}},"MetaTools":{"CollectionsButton":{"add":"Translated"},"HidePreviousMarksDrawingButton":{"hide":"Translated","show":"Translated"},"HidePreviousTranscriptionsButton":{"hide":"Translated","show":"Translated","showUser":"Translated"},"MetadataButton":{"label":"Translated"},"MetadataModal":{"table":{"label":"Translated","value":"Translated"},"title":"Translated"}},"ModalTutorial":{"title":"Translated"},"QuickTalk":{"aria":{"closeButton":"Translated","goToTalk":"Translated","mainPanel":"Translated","openButton":"Translated {{count}} Translated","panelContent":"Translated","panelHeading":"Translated"},"errors":{"failPostComment":"Translated","failPostDiscussion":"Translated","noBoard":"Translated","noText":"Translated","noUser":"Translated"},"loginToPost":"Translated","status":{"initialized":"Translated","loading":"Translated","success":"Translated"},"subjectHasNoComments":"Translated"},"SlideTutorial":{"StepNavigation":{"go":"Translated {{index}}","next":"Translated","previous":"Translated"},"alt":"Translated {{activeStep}}","error":"Translated","getStarted":"Translated","heading":"{{projectDisplayName}} Translated"},"StepNavigation":{"go":"Translated {{index}}","next":"Translated","previous":"Translated"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Translated"},"ImageAndTextViewer":{"textIconAltText":"Translated"},"InteractionLayer":{"ConfirmModal":{"close":"Translated","confirm":"Translated","keepWorking":"Translated"},"SaveButton":{"save":"Translated"},"SubTaskPopup":{"notRender":"Translated","required":"Translated"},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"Translated","explanation":"Translated {{count}} Translated","noAggregation":"Translated","title":"Translated","transcriptionsUnavailable":"Translated"},"complete":"Translated","transcribed":"Translated"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Translated","previousFrameLabel":"Translated","thumbnailAltText":"Translated"}},"ScatterPlotViewer":{"Selection":{"delete":"Translated {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Translated","switchToSeparateFrames":"Translated"}},"SingleVideoViewerContainer":{"error":"Translated"},"VariableStarViewer":{"controls":"Translated","figCaption":"Translated","flip":"Translated","focus":"Translated","highlight":"Translated","imageTitle":"Translated","label":"Translated {{id}} Translated","periodMultiple":"Translated","phase":"Translated","phaseFocus":"Translated"},"VideoController":{"closeVolume":"Translated","fullscreen":"Translated","openVolume":"Translated","pause":"Translated","play":"Translated","playbackSpeed":"Translated","scrubber":"Translated","volumeSlider":"Translated"},"ZoomControlButton":{"disable":"Translated","enable":"Translated"},"loading":"Translated","zoomHelp":"Translated"},"TaskArea":{"DisabledTaskPopup":{"body":"Translated","options":{"dismiss":"Translated","next":"Translated","select":"Translated"},"title":"Translated"},"Tasks":{"BackButton":{"back":"Translated"},"DoneAndTalkButton":{"doneAndTalk":"Translated","newTab":"Translated"},"DoneButton":{"done":"Translated"},"ExpertOptions":{"demoToggle":"Translated","label":"Translated"},"NextButton":{"next":"Translated"},"TaskHelp":{"close":"Translated","label":"Translated"},"demoMode":"Translated","error":"Translated","loading":"Translated","renderFallback":"Translated"},"task":"Translated","tutorial":"Translated"}}')},"../lib-classifier/dist/esm/translations/test/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Translated","closePoint":"Translated","inactive":"Translated","spliceDrag":"Translated","splicePoint":"Translated"},"HighlighterTask":{"delete":"Translated","noLabels":"Translated","status":"{{count}} Translated"},"InputStatus":{"drawn":"{{count}} Translated","max":"{{count}} Translated {{max}} Translated","maxAndMin":"{{count}} Translated {{min}} Translated {{max}}","min":"{{count}} Translated {{min}} Translated"},"LineControls":{"close":"Translated","delete":"Translated","deleteCancel":"Translated","deleteConfirm":"Translated","lineControls":"Translated","move":"Translated","redo":"Translated","undo":"Translated"},"SimpleDropdownTask":{"customInputPlaceholder":"Translated","otherLabel":"Translated","selectPlaceholder":"Translated"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Translated","closeFilters":"Translated","filter":"Translated","removeFilter":"Translated {{valueLabel}}","showing":"Translated  {{total}} Translated {{showing}}"},"Choice":{"cancel":"Translated","identify":"Translated","lessInfo":"Translated","moreInfo":"Translated","notThis":"Translated"},"ChoiceButton":{"identified":"Translated","openSubmenu":"Translated {{choiceLabel}}"},"ConfusedWith":{"cancel":"Translated","confused":"Translated","itsThis":"Translated"},"DeleteButton":{"delete":"Translated {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Translated"},"TextTask":{"TextTagButtons":{"modifiers":"Translated"}},"TranscriptionLine":{"created":"Translated","editing":"Translated"}}')},"../lib-classifier/dist/esm/translations/tr/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Bu grnty daha nce grdnz","tooltipText":["Bu grnty daha nce grdnz ve snflandrdnz, bu nedenle daha fazla snflandrma onun analizine katkda bulunmayacaktr.","Yardm etmek istiyorsanz, baka bir i ak semeyi veya baka bir projeye katkda bulunmay deneyin."]},"Banner":{"next":"Sonraki","previous":"nceki","whyAmISeeingThis":"Bunu neden gryorum?"},"InProgressConfirmModal":{"cancel":"ptal et","confirm":"Onayla","inProgress":"Farkl bir grntye gitmek istediinizden emin misiniz? Mevcut grnt iin yaptnz tm almalar kaybolacaktr."},"RetiredBanner":{"bannerText":"Bitti: Bu grnt kullanmdan kaldrld","tooltipText":["Bu grnt yeterince snflandrmaya sahiptir, bu nedenle sizinki analizde kullanlmayacaktr.","Yardm etmek istiyorsanz, baka bir i ak semeyi veya baka bir projeye katkda bulunmay deneyin."]},"SubjectSetProgressBanner":{"alreadySeen":"Daha nce grld","bannerText":"{{setName}}: Grnt {{number}}/{{total}}","finished":"Bitti","tooltipText":["Bu proje, gnlllerin grntleri srayla grmesine olanak tanr.","Bu say, grntnn tm grup iindeki konumunu gsterir."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Bitti: Her eyi grdnz","tooltipText":["Bu i akndaki her eyi zaten snflandrdnz, bu grntyle ilgili daha fazla snflandrma analizde kullanlmayacak.","Yardm etmek istiyorsanz, baka bir i ak semeyi veya baka bir projeye katkda bulunmay deneyin."]},"WorkflowIsFinishedBanner":{"bannerText":"Bu i ak tamamland","tooltipText":["Bu i akndaki tm grntler tamamlanmtr, bu grntyle ilgili daha fazla alma analizde kullanlmayacaktr.","Yardm etmek istiyorsanz, baka bir i ak semeyi veya baka bir projeye katkda bulunmay deneyin."]}},"DrawingTools":{"RotateHandle":"izilen aklamay/iareti dndr."},"FeedbackModal":{"keepClassifying":"Snflandrmaya Devam Et","label":"Geri bildirim"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Kullanm Klavuzu"},"FieldGuideItem":{"ariaTitle":"Klavuza geri dn"},"FieldGuideItemAnchor":{"ariaTitle":"{{title}} esini sein"},"title":"Kullanm Klavuzu"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Aklama ekle"},"FullscreenButton":{"ariaLabel":{"actualSize":"Normal boyutta grntle","fullscreen":"Tam ekran modunda grntle"}},"InvertButton":{"ariaLabel":"Grnty tersine evir"},"MoveButton":{"ariaLabel":"Grnty ta"},"ResetButton":{"ariaLabel":"Grnty sfrla"},"RotateButton":{"ariaLabel":"Grnty dndr"},"ZoomInButton":{"ariaLabel":"Grntye yaknla"},"ZoomOutButton":{"ariaLabel":"Grntden uzakla"}},"MetaTools":{"CollectionsButton":{"add":"Koleksiyonlara ekle"},"HidePreviousMarksDrawingButton":{"hide":"nceki aretleri Gizle","show":"nceki aretleri Gster"},"HidePreviousTranscriptionsButton":{"hide":"Tm aretleri Gizle","show":"Tm aretleri Gster","showUser":"aretlerinizi Gsterin"},"MetadataButton":{"label":"Konu Bilgisi"},"MetadataModal":{"table":{"label":"Etiket","value":"Deer"},"title":"Grnt stverisi"}},"ModalTutorial":{"title":"Tutorial"},"QuickTalk":{"aria":{"closeButton":"Yorum panelini kapat","goToTalk":"Tartma iin Sohbete git","mainPanel":"QuickTalk Yorumlar Paneli","openButton":"Bu grnt hakknda {{count}} yorum(lar) var. Grmek iin tkla.","panelContent":"Tartma Yorumlar","panelHeading":"Tartma"},"errors":{"failPostComment":"Mevcut tartmaya yorum eklenemedi.","failPostDiscussion":"Yeni tartmaya yorum eklenemedi.","noBoard":"Bu grnt iin yorum panosu henz oluturulmad.","noText":"Bo yorum gnderilemiyor.","noUser":"Kullanc giri yapmam."},"loginToPost":"Yorum yapmak iin ltfen giri yapnz.","status":{"initialized":"Bu grnt hakknda not brakn","loading":"Yorum gnderiliyor...","success":"Yorum gnderildi!"},"subjectHasNoComments":"Bu grnt hakknda henz herhangi bir yorum yaplmamtr."},"SlideTutorial":{"StepNavigation":{"go":"{{index}} admna gidin","next":"Sonraki adma ge","previous":"nceki adma git"},"alt":"Tutorial adm {{activeStep}}","error":"Tutorial adm yklenemedi.","getStarted":"Bala","heading":"{{projectDisplayName}} Tutorial"},"StepNavigation":{"go":"{{index}} Numaral Adma Ge","next":"Sonraki adma ge","previous":"nceki adma git"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"ubuk grafik"},"ImageAndTextViewer":{"textIconAltText":"Metin grntleyici simgesi"},"InteractionLayer":{"ConfirmModal":{"close":"Kaydetmeden kapat","confirm":"Kapatmak istediinizden emin misiniz? Bu iaret silinecektir.","keepWorking":"almaya devam et"},"SaveButton":{"save":"Kaydet ve Kapat"},"SubTaskPopup":{"notRender":"lem esi oluturulamad.","required":"Bu ilem gereklidir."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"Uzlalm transkripsiyon","explanation":"Bu {{count}} transkripsiyon nceki gnlller tarafndan gnderilmitir ve deitirilemez.","noAggregation":"Uzlama mevcut deil.","title":"nceki Transkripsiyonlar","transcriptionsUnavailable":"Transkripsiyonlara ulalamyor."},"complete":"Transkripsiyon tamamland","transcribed":"Transkripsiyonlar var"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Sonraki","previousFrameLabel":"nceki","thumbnailAltText":"Resmin nizlemesi"}},"ScatterPlotViewer":{"Selection":{"delete":"{{index}} seimini sil"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Geili grnme ge","switchToSeparateFrames":"Ayr kareler grnmne ge"}},"SingleVideoViewerContainer":{"error":"Ykleme srasnda bir hata olutu."},"VariableStarViewer":{"controls":"Kontroller","figCaption":"HR Diyagram","flip":"Dndr","focus":"Odaklan","highlight":"Vurgula","imageTitle":"HR Diyagram: Parlaklk vs Scaklk","label":"Filtre {{id}}","periodMultiple":"oklu dnem","phase":"Aama","phaseFocus":"Aama oda"},"VideoController":{"closeVolume":"Ses Ayarn Kapat","fullscreen":"Videoyu Tam Ekran Gster","openVolume":"Ses Ayarn A","pause":"Videoyu duraklat","play":"Videoyu oynat","playbackSpeed":"Video oynatma hz seimi","scrubber":"Video oynatc temizleyici","volumeSlider":"Ses Ayar"},"ZoomControlButton":{"disable":"Yaknlatrmay devre d brak","enable":"Yaknlatrmay etkinletir"},"loading":"Ykleniyor","zoomHelp":"Yaknlatrmak iin CTRL + kaydrma tularn kullann"},"TaskArea":{"DisabledTaskPopup":{"body":"Bu grnt yeterli snflandrmaya sahiptir, bu nedenle gnderilen herhangi bir ek snflandrma analizde kullanlmayacaktr. Referans iin bu grnty grmeye devam edebilirsiniz.","options":{"dismiss":"Reddet","next":"Bir sonraki kullanlabilir grnt","select":"Yeni bir grnt sein"},"title":"Bitti"},"Tasks":{"BackButton":{"back":"Geri git"},"DoneAndTalkButton":{"doneAndTalk":"Bitir & Sohbet Et","newTab":"yeni bir sekmede"},"DoneButton":{"done":"Bitti"},"ExpertOptions":{"demoToggle":"Demo Modu","label":"Uzman Seenekleri"},"NextButton":{"next":"Sonraki"},"TaskHelp":{"close":"Kapat","label":"Bu ilemle ilgili yardma m ihtiyacnz var?"},"demoMode":"Demo modunda, snflandrmalar kaydedilmeyecektir. Bunu, snflandrma arayznn hzl ve hatasz demolar iin kullann.","error":"Bir sorun olutu","loading":"Ykleniyor","renderFallback":"lem esi oluturulamad."},"task":"lem","tutorial":"Tutorial"}}')},"../lib-classifier/dist/esm/translations/tr/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"A noktasndan kapan noktasna tklayp srkleyin veya birletirme noktas oluturmak iin izgi zerinde herhangi bir yere ift tklayn","closePoint":"Kapan noktasn belirlemek iin izgi zerinde herhangi bir yere tklayn","inactive":"Bu izgiyi dzenlemek iin tklayn","spliceDrag":"A noktasndan kapan noktasna tklayp srkleyin","splicePoint":"Birletirme noktas oluturmak iin izgi zerinde herhangi bir yere ift tklayn"},"HighlighterTask":{"delete":"Sil","noLabels":"Vurgulayc Grevi iin etiket yok","status":"{{count}} aretli"},"InputStatus":{"drawn":"{{count}} izildi","max":"{{count}}/{{max}} maksimum izim","maxAndMin":"{{count}}/{{min}}   gerekli , {{max}} maksimum izim","min":"{{count}} / {{min}} gerekli izim"},"LineControls":{"close":"Kapat","delete":"Sil","deleteCancel":"Silme lemini ptal Et","deleteConfirm":"Silme lemini Onayla","lineControls":"izgi Kontrolleri","move":"Ta","redo":"Yeniden yap","undo":"Geri al"},"SimpleDropdownTask":{"customInputPlaceholder":"Bir ey girin","otherLabel":"Dier...","selectPlaceholder":"Bir cevap sein"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Filtreleri temizle","closeFilters":"Filtreleri kapat","filter":"Filtrele","removeFilter":"{{valueLabel}} Filtresini kaldr","showing":"{{showing}} / {{total}} gsteriliyor"},"Choice":{"cancel":"ptal et","identify":"Tanmla","lessInfo":"Daha az bilgi","moreInfo":"Daha fazla bilgi","notThis":"Bu deil"},"ChoiceButton":{"identified":"tanmlanm","openSubmenu":"{{choiceLabel}} iin alt meny a"},"ConfusedWith":{"cancel":"ptal et","confused":"Bazen ununla kartrlr","itsThis":"Bence bu"},"DeleteButton":{"delete":"{{choiceLabel}} seimini sil"}},"TextFromSubjectTask":{"reset":"Sfrla"},"TextTask":{"TextTagButtons":{"modifiers":"Metin deitiriciler"}},"TranscriptionLine":{"created":"Transkripsiyon oluturuldu","editing":"Transkripsiyon dzenleme"}}')},"../lib-classifier/dist/esm/translations/uk/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"    ","tooltipText":["      ,       .","    ,           ."]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"   ?"},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":" ,      ? - ,      ,  ."},"RetiredBanner":{"bannerText":":   ","tooltipText":["     ,        .","    ,           ."]},"SubjectSetProgressBanner":{"alreadySeen":" ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":"","tooltipText":["        .","       ."]},"UserHasFinishedWorkflowBanner":{"bannerText":":   ","tooltipText":["       ,            .","    ,           ."]},"WorkflowIsFinishedBanner":{"bannerText":"   ","tooltipText":["       ,           .","    ,           ."]}},"DrawingTools":{"RotateHandle":"    /."},"FeedbackModal":{"keepClassifying":" ","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":""},"FieldGuideItem":{"ariaTitle":"    "},"FieldGuideItemAnchor":{"ariaTitle":" {{title}}"},"title":""},"ImageToolbar":{"AnnotateButton":{"ariaLabel":" "},"FullscreenButton":{"ariaLabel":{"actualSize":"    ","fullscreen":"    "}},"InvertButton":{"ariaLabel":" "},"MoveButton":{"ariaLabel":" "},"ResetButton":{"ariaLabel":"  "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"   "},"ZoomOutButton":{"ariaLabel":"   "}},"MetaTools":{"CollectionsButton":{"add":"  "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":"  "},"MetadataButton":{"label":"  "},"MetadataModal":{"table":{"label":"","value":""},"title":" "}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"  ","goToTalk":"      ","mainPanel":"  QuickTalk","openButton":" \' {{count}} (-). ,  .","panelContent":"   ","panelHeading":" "},"errors":{"failPostComment":"      .","failPostDiscussion":"      .","noBoard":"          .","noText":"   .","noUser":"    ."},"loginToPost":"  , .","status":{"initialized":"    ","loading":" ...","success":" !"},"subjectHasNoComments":"     ."},"SlideTutorial":{"StepNavigation":{"go":"   {{index}}","next":"   ","previous":"   "},"alt":"  {{activeStep}}","error":"     .","getStarted":"","heading":" {{projectDisplayName}}"},"StepNavigation":{"go":"   {{index}}","next":"   ","previous":"   "},"SubjectViewer":{"BarChartViewer":{"chartLabel":""},"ImageAndTextViewer":{"textIconAltText":"   "},"InteractionLayer":{"ConfirmModal":{"close":"  ","confirm":" ,   ?    .","keepWorking":" "},"SaveButton":{"save":"  "},"SubTaskPopup":{"notRender":"    .","required":"   \'."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":" {{count}}         .","noAggregation":" .","title":" ","transcriptionsUnavailable":" ."},"complete":" ","transcribed":" "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":" "}},"ScatterPlotViewer":{"Selection":{"delete":"  {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"     ","switchToSeparateFrames":"    "}},"SingleVideoViewerContainer":{"error":"    ."},"VariableStarViewer":{"controls":" ","figCaption":"   ","flip":"","focus":"","highlight":"","imageTitle":"   :   ","label":" {{id}}","periodMultiple":"   ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"  ","fullscreen":"    ","openVolume":"  ","pause":"  ","play":" ","playbackSpeed":"   ","scrubber":" ","volumeSlider":" "},"ZoomControlButton":{"disable":" ","enable":" "},"loading":" ","zoomHelp":"   CTRL + "},"TaskArea":{"DisabledTaskPopup":{"body":"     ,  -  ,   ,     .         .","options":{"dismiss":"","next":"  ","select":"  "},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"  ","newTab":"  "},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":"-","label":" "},"NextButton":{"next":""},"TaskHelp":{"close":"","label":"    ?"},"demoMode":" -   .    ,    .","error":"   ","loading":"","renderFallback":"    ."},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/uk/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"            -  ,    \'.","closePoint":" -  ,    ","inactive":",    ","spliceDrag":"        ","splicePoint":"  -  ,    \'"},"HighlighterTask":{"delete":"","noLabels":"    ","status":"{{count}} "},"InputStatus":{"drawn":"{{count}} ","max":"{{count}}    {{max}} ","maxAndMin":"{{count}}    {{min}},    {{max}} ","min":"{{count}}    {{min}} "},"LineControls":{"close":"","delete":"","deleteCancel":" ","deleteConfirm":" ","lineControls":"  ","move":"","redo":" ","undo":" "},"SimpleDropdownTask":{"customInputPlaceholder":" ","otherLabel":"...","selectPlaceholder":" "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":" ","closeFilters":" ","filter":"","removeFilter":"  {{valueLabel}}","showing":" {{showing}}  {{total}}"},"Choice":{"cancel":"","identify":"","lessInfo":" ","moreInfo":"","notThis":" "},"ChoiceButton":{"identified":"","openSubmenu":"   {{choiceLabel}}"},"ConfusedWith":{"cancel":"","confused":"  ","itsThis":" ,   "},"DeleteButton":{"delete":"  {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":" "}},"TranscriptionLine":{"created":" ","editing":" "}}')},"../lib-classifier/dist/esm/translations/ur/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"        ","tooltipText":["                          ","                    "]},"Banner":{"next":"","previous":"","whyAmISeeingThis":"      "},"InProgressConfirmModal":{"cancel":" ","confirm":" ","inProgress":"          "},"RetiredBanner":{"bannerText":"  :        ","tooltipText":["                       ","                    "]},"SubjectSetProgressBanner":{"alreadySeen":"    ","bannerText":"{{setName}}:  {{number}}/{{total}}","finished":"  ","tooltipText":["             ","           "]},"UserHasFinishedWorkflowBanner":{"bannerText":"  :       ","tooltipText":["                               ","                    "]},"WorkflowIsFinishedBanner":{"bannerText":"       ","tooltipText":["                            ","                    "]}},"DrawingTools":{"RotateHandle":"   /    "},"FeedbackModal":{"keepClassifying":" ","label":" "},"FieldGuide":{"FieldGuideButton":{"buttonLabel":" "},"FieldGuideItem":{"ariaTitle":""},"FieldGuideItemAnchor":{"ariaTitle":"{{title}}  "},"title":" "},"ImageToolbar":{"AnnotateButton":{"ariaLabel":" "},"FullscreenButton":{"ariaLabel":{"actualSize":"    ","fullscreen":"      "}},"InvertButton":{"ariaLabel":"   "},"MoveButton":{"ariaLabel":"  "},"ResetButton":{"ariaLabel":"     "},"RotateButton":{"ariaLabel":" "},"ZoomInButton":{"ariaLabel":"    "},"ZoomOutButton":{"ariaLabel":"    "}},"MetaTools":{"CollectionsButton":{"add":"   "},"HidePreviousMarksDrawingButton":{"hide":"  ","show":"  "},"HidePreviousTranscriptionsButton":{"hide":"  ","show":"  ","showUser":"  "},"MetadataButton":{"label":"  "},"MetadataModal":{"table":{"label":"","value":""},"title":"   "}},"ModalTutorial":{"title":" "},"QuickTalk":{"aria":{"closeButton":"    ","goToTalk":"Talk       ","mainPanel":"QuickTalk    ","openButton":"  {{count}} ()       ","panelContent":"     ","panelHeading":"  "},"errors":{"failPostComment":"          ","failPostDiscussion":"        ","noBoard":"                  ","noText":"      ","noUser":"     "},"loginToPost":"         ","status":{"initialized":"       ","loading":"","success":"   !"},"subjectHasNoComments":"        "},"SlideTutorial":{"StepNavigation":{"go":" {{index}}  ","next":"   ","previous":"   "},"alt":"   {{activeStep}}","error":"       ","getStarted":" ","heading":"{{projectDisplayName}}  "},"StepNavigation":{"go":" {{index}}  ","next":"   ","previous":"   "},"SubjectViewer":{"BarChartViewer":{"chartLabel":" "},"ImageAndTextViewer":{"textIconAltText":"   "},"InteractionLayer":{"ConfirmModal":{"close":"    ","confirm":"            ","keepWorking":"  "},"SaveButton":{"save":"    "},"SubTaskPopup":{"notRender":"        ","required":"   "},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":" ","explanation":" {{count}}                   ","noAggregation":"   ","title":" ","transcriptionsUnavailable":"   "},"complete":"   ","transcribed":"  "}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":"   "}},"ScatterPlotViewer":{"Selection":{"delete":" {{index}}  "}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"     ","switchToSeparateFrames":"      "}},"SingleVideoViewerContainer":{"error":"        "},"VariableStarViewer":{"controls":"","figCaption":"HR ","flip":"","focus":" ","highlight":"  ","imageTitle":"HR :    ","label":" {{id}}","periodMultiple":" ","phase":"","phaseFocus":" "},"VideoController":{"closeVolume":"   ","fullscreen":"    ","openVolume":"  ","pause":" ","play":" ","playbackSpeed":"      ","scrubber":"  ","volumeSlider":" "},"ZoomControlButton":{"disable":"    ","enable":"   "},"loading":"    ","zoomHelp":"    CTRL +   "},"TaskArea":{"DisabledTaskPopup":{"body":"                                    ","options":{"dismiss":" ","next":"  ","select":"    "},"title":"  "},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"     ","newTab":"  "},"DoneButton":{"done":"  "},"ExpertOptions":{"demoToggle":" ","label":"  "},"NextButton":{"next":""},"TaskHelp":{"close":" ","label":"      "},"demoMode":"                    ","error":"   ","loading":"","renderFallback":"        "},"task":"","tutorial":" "}}')},"../lib-classifier/dist/esm/translations/ur/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"                          ","closePoint":"             ","inactive":"        ","spliceDrag":"         ","splicePoint":"               "},"HighlighterTask":{"delete":" ","noLabels":"        ","status":"{{count}}   "},"InputStatus":{"drawn":"{{count}}    ","max":"   {{max}}  {{count}}    ","maxAndMin":"{{min}}  {{count}}      {{max}}     ","min":"{{min}}  {{count}}     "},"LineControls":{"close":" ","delete":" ","deleteCancel":"  ","deleteConfirm":"   ","lineControls":" ","move":" ","redo":" ","undo":" "},"SimpleDropdownTask":{"customInputPlaceholder":"   ","otherLabel":"...","selectPlaceholder":"   "},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"      ","closeFilters":"  ","filter":" ","removeFilter":"{{valueLabel}}  ","showing":"{{showing}}  {{total}}    "},"Choice":{"cancel":" ","identify":"","lessInfo":" ","moreInfo":" ","notThis":" "},"ChoiceButton":{"identified":" ","openSubmenu":"{{choiceLabel}}     "},"ConfusedWith":{"cancel":" ","confused":"   ","itsThis":"    "},"DeleteButton":{"delete":" {{choiceLabel}}  "}},"TextFromSubjectTask":{"reset":"    "},"TextTask":{"TextTagButtons":{"modifiers":"    "}},"TranscriptionLine":{"created":"  ","editing":"   "}}')},"../lib-classifier/dist/esm/translations/ve/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"No no vhona thero iyi","tooltipText":["U no vhona na u khethekanya thero iyi, ngauralo u khethekanya ho engedzeaho a zwi nga o shela mulenzhe kha tsenguluso yayo.","Arali ni tshi khou oa u thusa, lingedzani u nanga nila yo fhambanaho ya u shuma kana u shela mulenzhe kha mushumo wo fhambanaho."]},"Banner":{"next":"Zwi tevhelaho","previous":"Zwo fhiraho","whyAmISeeingThis":"Ndi ngani ndi tshi khou vhona zwenezwi?"},"InProgressConfirmModal":{"cancel":"Khantselani","confirm":"Khwahisedzani","inProgress":"Naa ni na vhungoho ha uri ni oa u dzhena kha Thero yo fhambanaho? Annotation iwe na iwe ye na i ita kha Thero ya zwino i o xela."},"RetiredBanner":{"bannerText":"Ro fhedza: Thero iyi yo no i bviswa","tooltipText":["Thero iyi yo no vha na zwigwada zwo eanaho, ngauralo yau a i nga o shumiswa kha tsenguluso yayo.","Arali ni tshi khou oa u thusa, lingedzani u nanga nila yo fhambanaho ya u shuma kana u shela mulenzhe kha mushumo wo fhambanaho."]},"SubjectSetProgressBanner":{"alreadySeen":"Zwo no vhonwa","bannerText":"{{setName}}: Thero{{number}}{{total}}","finished":"U fhedza","tooltipText":["Heyi phurojeke i tendela vhashumi vha u ifunela u vhona thero nga u tevhekana.","Nomboro i sumbedza vhuimo ha hoho kha group yohe."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Ro fhedza: No vhona zwohe","tooltipText":["U khethekanya zwohe kha nila iyi ya mushumo, ngauralo u khethekanya ho engedzeaho kha thero iyi a hu nga o shumiswa kha tsenguluso yayo.","Arali ni tshi khou oa u thusa, lingedzani u nanga nila yo fhambanaho ya u shuma kana u shela mulenzhe kha mushumo wo fhambanaho."]},"WorkflowIsFinishedBanner":{"bannerText":"Mushumo uyu wo fhela","tooltipText":["Thero dzohe dzi re kha mushumo dzo no fhela, ngauralo u khethekanya ho engedzeaho kha thero iyi a hu nga o shumiswa kha tsenguluso yayo.","Arali ni tshi khou oa u thusa, lingedzani u nanga nila yo fhambanaho ya u shuma kana u shela mulenzhe kha mushumo wo fhambanaho."]}},"DrawingTools":{"RotateHandle":"Handle ya u rembulusa halutshedzo/tshiga."},"FeedbackModal":{"keepClassifying":"Dzulani ni tshi khethekanya","label":"Vhupfiwa"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Fhethu ha vhulivhisi"},"FieldGuideItem":{"ariaTitle":"Humelani kha mutevhe wa zwithu zwa Fhethu ha vhulivhisi"},"FieldGuideItemAnchor":{"ariaTitle":"Khethani{{title}}"},"title":"Fhethu ha vhulivhisi"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"walani halutshedzo"},"FullscreenButton":{"ariaLabel":{"actualSize":"Vhonani thero nga saizi yo oweleaho","fullscreen":"Vhonani thero kha moudu wa tshikirini tsho fhelelaho"}},"InvertButton":{"ariaLabel":"Rembulusani thero"},"MoveButton":{"ariaLabel":"Sudzulusani thero"},"ResetButton":{"ariaLabel":"Sethani hafhu mbonalo ya thero"},"RotateButton":{"ariaLabel":"Rembulusani thero"},"ZoomInButton":{"ariaLabel":"Zoom in kha thero"},"ZoomOutButton":{"ariaLabel":"Zoom out  kha thero"}},"MetaTools":{"CollectionsButton":{"add":"Engedzani kha u kuvhanganya"},"HidePreviousMarksDrawingButton":{"hide":"U dzumba Zwiga zwo fhiraho","show":"Sumbedzani Zwiga zwo fhiraho"},"HidePreviousTranscriptionsButton":{"hide":"Dzumbani zwiga zwohe","show":"Sumbedzani Zwiga Zwohe","showUser":"Sumbedzani Zwiga Zwanu"},"MetadataButton":{"label":"Mafhungo a thero"},"MetadataModal":{"table":{"label":"Lebuu","value":"Tshileme"},"title":"Metadatha ya thero"}},"ModalTutorial":{"title":"U funza"},"QuickTalk":{"aria":{"closeButton":"Valani phanele ya vhupfiwa","goToTalk":"Iyani kha Khaseledzo ya Thero kha Nyambo","mainPanel":"Phanele ya Vhupfiwa ha QuickTalk","openButton":"Thero i na {{count}}vhupfiwa. Puedzani u itela u engedza.","panelContent":"Vhupfiwa ha Khaseledzo ya Thero","panelHeading":"Khaseledzo ya Thero"},"errors":{"failPostComment":"A ri koni u engedza vhupfiwa kha nyambedzano i re hone.","failPostDiscussion":"A thi koni u engedza vhupfiwa kha nyambedzano ntswa.","noBoard":"Bodo ya vhupfiwa ha thero a i athu vhewa kha heyi phurojeke.","noText":"A thi koni u posta vhupfiwa vhu si na tshithu.","noUser":"Mushumisi ha athu log in"},"loginToPost":"Login ni pose vhupfiwa.","status":{"initialized":"Siani notsi nga ha thero iyi","loading":"U posta vhupfiwa","success":"Vhupfiwa ho phostiwa!"},"subjectHasNoComments":"Thero iyi a i athu vha na vhupfiwa."},"SlideTutorial":{"StepNavigation":{"go":"Iyani kha vhukando{{index}}","next":"Iyani kha vhukando vhu tevhelaho","previous":"Humelani kha vhukando vhu vhukando"},"alt":"iga a u funza{{activeStep}}","error":"iga a u gudisa a o ngo kona u dzhena.","getStarted":"Thomani","heading":"{{projectDisplayName}} U funza"},"StepNavigation":{"go":"Iyani kha vhukando{{index}}","next":"Iyani kha vhukando vhu tevhelaho","previous":"Iyani kha vhukando ho fhiraho"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Tshathi ya bara"},"ImageAndTextViewer":{"textIconAltText":"Ikhoni ya text viewer"},"InteractionLayer":{"ConfirmModal":{"close":"U vala ni songo seiva","confirm":"Ni khou khwahisedza uri ni khou oa u vala? Luswayo ulu lu o thuthiwa.","keepWorking":"Bvelani phana na u shuma"},"SaveButton":{"save":"Seivani nahone ni Vale"},"SubTaskPopup":{"notRender":"Tshipia tsha mushumo a tsho ngo kona u ekedzwa.","required":"Mushumo uyu u a oea."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"u walululwa ho anganyiswaho","explanation":"Hohu{{count}}u walululwa ho etshedzwa nga vhashumi vha u ifunela vho fhiraho nahone a dzi nga shandukiswa.","noAggregation":"A hu na hanganyelo ine ya vha hone.","title":"U  walululwa ho fhiraho","transcriptionsUnavailable":"Zwo walulwaho a zwi wanali."},"complete":"U walululwa ho fhela","transcribed":"I na zwiwalululwa"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"I tevhelaho","previousFrameLabel":"Yo fhiraho","thumbnailAltText":"Tshifanyiso tshiuku tsha tshifanyiso"}},"ScatterPlotViewer":{"Selection":{"delete":"Thuthani khetho{{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Tshintshani kha mbonalo ya flipbook","switchToSeparateFrames":"Tshintshani kha mbonalo ya fureme dzo fhambanaho"}},"SingleVideoViewerContainer":{"error":"Ho vha na vhukhakhi musi hu tshi khou dzheniswa mafhungo."},"VariableStarViewer":{"controls":"ndaulo","figCaption":"Dayagiramu ya HR","flip":"rembulusa","focus":"Mbuno ya ndeme","highlight":"U vhonetshela","imageTitle":"Dayagiramu ya HR: Tshedza vs Mufhiso","label":"Filithara{{id}}","periodMultiple":"tshifhinga tshinzhi","phase":"lua","phaseFocus":"lua lwa u sedza"},"VideoController":{"closeVolume":"Valani Tshiaidara tsha Volumu","fullscreen":"Sumbedzani Vidio kha Tshikirini tsho Fhelelaho","openVolume":"Vulani Tshiaidara tsha Volumu","pause":"Imisani vidio","play":"Tambani vidio","playbackSpeed":"Khetho ya luvhilo lwa u tamba vidio","scrubber":"Scrubber tsha vidio","volumeSlider":"Tshiaidara tsha Volumu"},"ZoomControlButton":{"disable":"dzimani zoom","enable":"zoom kha i shume"},"loading":"U dzhenisa thero","zoomHelp":"Shumisani CTRL + scroll u itela u anavhudza"},"TaskArea":{"DisabledTaskPopup":{"body":"Thero iyi i na zwigwada zwo eanaho, ngauralo zwigwada zwiwe na zwiwe zwo engedzwaho zwo etshedzwaho a zwi nga o shumiswa kha tsenguluso yayo. Ni nga kha i vhona yeneyi thero u itela u i shumisa.","options":{"dismiss":"Bvisa","next":"Thero i re hone i tevhelaho","select":"Khethani ther ntswa"},"title":"No fhedza"},"Tasks":{"BackButton":{"back":"Murahu"},"DoneAndTalkButton":{"doneAndTalk":"Ro fhedza & Ri ambe","newTab":"kha thebu ntswa"},"DoneButton":{"done":"Fhedza"},"ExpertOptions":{"demoToggle":"Moudu wa Demo","label":"Expert Options"},"NextButton":{"next":"I tevhelaho"},"TaskHelp":{"close":"Valani","label":"Ni khou oa thuso kha mushumo uyu?"},"demoMode":"Kha moudu wa demo, zwigwada a zwi nga o vhulungwa. Shumisani hezwi kha demo dzi avhanyaho, dzi songo teaho dza vhukwamani ha u khethekanya.","error":"Hu na zwo khakheaho","loading":"U dzhena","renderFallback":"Tshipia tsha mushumo a tsho ngo kona u ekedzwa."},"task":"Mushumo","tutorial":"U funza"}}')},"../lib-classifier/dist/esm/translations/ve/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Puedzani ni kokodze u bva kha hodzi yo vuleaho u ya kha hodzi yo valwaho kana ni puedze luvhili huwe na huwe kha aini u itela u sika hodzi ya u anganya","closePoint":"Puedzani fhethu hohe kha aini u itela u vhea fhethu ha u vala","inactive":"Puedzani u itela u shandula aini iyi","spliceDrag":"Puedzani ni kokodze u bva kha hodzi yo vuleaho u ya kha hodzi ya u vala","splicePoint":"Puedzani luvhili fhethu hohe kha aini u itela u sika hodzi ya u anganya"},"HighlighterTask":{"delete":"Thuthani","noLabels":"A hu na zwiga zwa Mushumo Hailaitha","status":"{{count}}Yo swaiwa"},"InputStatus":{"drawn":"{{count}}olani","max":"{{count}}ha {{max}}zwine zwa olwa","maxAndMin":"{{count}}ha {{min}}zwine zwa{{max}}tea u olwa","min":"{{count}}ha {{min}}zwine zwa tea u olwa"},"LineControls":{"close":"Valani","delete":"Thuthani","deleteCancel":"Khantselani uri ni khou thutha","deleteConfirm":"Khwahisedzani uri ni khou thutha","lineControls":"Mutevhe wa u  langa","move":"Pfukelani phana","redo":"Dovhani ni ite","undo":"Itululani"},"SimpleDropdownTask":{"customInputPlaceholder":"Input zwwe zwithu","otherLabel":"Zwwe...","selectPlaceholder":"Phindulo yo khethiwaho"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"U bvisa filithara","closeFilters":"Filithara dzo valwaho","filter":"filithara","removeFilter":"Bvisani{{valueLabel}}filithara","showing":"U shumbedza {{showing}} ha{{total}}"},"Choice":{"cancel":"Khantsela","identify":"halusavhue","lessInfo":"Mafhungo a si gathi","moreInfo":"Mafhungo o engedzeaho","notThis":"Hu si hezwi"},"ChoiceButton":{"identified":"zwo topolwa","openSubmenu":"Vulani menyu muuku wa{{choiceLabel}}"},"ConfusedWith":{"cancel":"Thuthani","confused":"Tshiwe tshifhinga zwi anganyiswa na","itsThis":"Ndi vhona unga ndi hezwi"},"DeleteButton":{"delete":"Thuthani khetho{{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"Sethani hafhu"},"TextTask":{"TextTagButtons":{"modifiers":"Vhashandukisi vha mawalo"}},"TranscriptionLine":{"created":"Ho sikiwa u walulula","editing":"U dzudzanya u walululwa"}}')},"../lib-classifier/dist/esm/translations/vi/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"Bn  xem ch th ny ri","tooltipText":["Bn  xem v phn loi ch th ny, v vy cc phn loi tip theo s khng c tnh vo phn tch.","Nu bn mun ng gp, hy th chn mt quy trnh lm vic khc hoc tham gia vo mt d n khc."]},"Banner":{"next":"Tip theo","previous":"Trc","whyAmISeeingThis":"Ti sao ti thy iu ny?"},"InProgressConfirmModal":{"cancel":"Hy","confirm":"Xc nhn","inProgress":"Bn c chc chn mun chuyn sang ch th khc khng? Mi ch thch bn  thc hin cho ch th hin ti s b mt."},"RetiredBanner":{"bannerText":"Hon tt: Ch th ny  c kt thc x l","tooltipText":["Ch th ny  c  phn loi, v vy phn loi ca bn s khng c s dng trong phn tch.","Nu bn mun ng gp, hy th chn mt quy trnh lm vic khc hoc tham gia vo mt d n khc."]},"SubjectSetProgressBanner":{"alreadySeen":" xem","bannerText":"{{setName}}: Ch th {{number}}/{{total}}","finished":" hon thnh","tooltipText":["D n ny cho php cc tnh nguyn vin xem cc ch th theo th t tun t.","Con s cho bn bit v tr ca ch th trong ton b nhm."]},"UserHasFinishedWorkflowBanner":{"bannerText":"Hon tt: Bn  xem tt c","tooltipText":["Bn  phn loi ton b trong quy trnh lm vic ny, v vy cc phn loi thm i vi ch th ny s khng c s dng trong phn tch.","Nu bn mun ng gp, hy th chn mt quy trnh lm vic khc hoc tham gia vo mt d n khc."]},"WorkflowIsFinishedBanner":{"bannerText":"Quy trnh lm vic ny  hon tt","tooltipText":["Tt c cc ch th trong quy trnh lm vic ny  c hon thnh, v vy cc phn loi thm i vi ch th ny s khng c s dng trong phn tch.","Nu bn mun ng gp, hy th chn mt quy trnh lm vic khc hoc tham gia vo mt d n khc."]}},"DrawingTools":{"RotateHandle":"Tay cm  xoay ch thch/du  v"},"FeedbackModal":{"keepClassifying":"Tip tc phn loi","label":"Phn hi"},"FieldGuide":{"FieldGuideButton":{"buttonLabel":"Hng dn thc a"},"FieldGuideItem":{"ariaTitle":"Quay li danh sch mc Hng dn Thc a"},"FieldGuideItemAnchor":{"ariaTitle":"Chn {{title}}"},"title":"Hng dn Thc a"},"ImageToolbar":{"AnnotateButton":{"ariaLabel":"Ch thch"},"FullscreenButton":{"ariaLabel":{"actualSize":"Xem ch th  kch thc bnh thng","fullscreen":"Xem ch th  ch  ton mn hnh"}},"InvertButton":{"ariaLabel":"o ngc ch th"},"MoveButton":{"ariaLabel":"Di chuyn ch th"},"ResetButton":{"ariaLabel":"t li ch  xem ch th"},"RotateButton":{"ariaLabel":"Xoay ch th"},"ZoomInButton":{"ariaLabel":"Phng to vo ch th"},"ZoomOutButton":{"ariaLabel":"Thu nh khi ch th"}},"MetaTools":{"CollectionsButton":{"add":"Thm vo b su tp"},"HidePreviousMarksDrawingButton":{"hide":"n im trc ","show":"Hin th im trc "},"HidePreviousTranscriptionsButton":{"hide":"n tt c im","show":"Hin th tt c im","showUser":"Hin th im ca bn"},"MetadataButton":{"label":"Thng tin ch th"},"MetadataModal":{"table":{"label":"Nhn","value":"Gi tr"},"title":"Siu d liu ch "}},"ModalTutorial":{"title":"Hng dn"},"QuickTalk":{"aria":{"closeButton":"ng bng bnh lun","goToTalk":"Chuyn n phn Tho lun ch th trn Talk","mainPanel":"Bng bnh lun QuickTalk","openButton":"Ch th c {{count}} bnh lun. Nhp  m rng.","panelContent":"Bnh lun trong phn tho lun ch th","panelHeading":"Tho lun v ch th"},"errors":{"failPostComment":"Khng th thm bnh lun vo tho lun hin c.","failPostDiscussion":"Khng th thm bnh lun vo tho lun mi.","noBoard":"Bng bnh lun cho ch th vn cha c thit lp cho d n ny.","noText":"Khng th ng bnh lun trng.","noUser":"Ngi dng cha ng nhp."},"loginToPost":"Vui lng ng nhp  ng bnh lun.","status":{"initialized":" li ghi ch v ch th ny","loading":"ang ng bnh lun...","success":"Bnh lun  c ng!"},"subjectHasNoComments":"Ch th ny cha c bnh lun no."},"SlideTutorial":{"StepNavigation":{"go":"Chuyn n bc {{index}}","next":"Chuyn sang bc tip theo","previous":"Quay li bc trc"},"alt":"Bc hng dn {{activeStep}}","error":"Khng th ti bc hng dn.","getStarted":"Bt u","heading":"Hng dn {{projectDisplayName}}"},"StepNavigation":{"go":"Chuyn n bc {{index}}","next":"Chuyn sang bc tip theo","previous":"Quay li bc trc"},"SubjectViewer":{"BarChartViewer":{"chartLabel":"Biu  thanh"},"ImageAndTextViewer":{"textIconAltText":"Biu tng cho trnh xem vn bn"},"InteractionLayer":{"ConfirmModal":{"close":"ng m khng lu","confirm":"Bn c chc chn mun ng khng? Du nh du ny s b xa.","keepWorking":"Tip tc lm vic"},"SaveButton":{"save":"Lu v ng"},"SubTaskPopup":{"notRender":"Khng th hin th thnh phn nhim v.","required":"Nhim v ny l bt buc."},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"bn chp li tng hp","explanation":"{{count}} bn chp li ny  c gi bi cc tnh nguyn vin trc  v khng th chnh sa.","noAggregation":"Khng c d liu tng hp.","title":"Cc bn chp li trc ","transcriptionsUnavailable":"Bn chp li khng kh dng."},"complete":"Hon tt bn chp li","transcribed":"C cc bn chp li"}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"Tip theo","previousFrameLabel":"Trc","thumbnailAltText":"nh thu nh"}},"ScatterPlotViewer":{"Selection":{"delete":"Xa la chn {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"Chuyn sang ch  xem dng lt trang","switchToSeparateFrames":"Chuyn sang ch  xem khung ring bit"}},"SingleVideoViewerContainer":{"error":" xy ra li khi ti ch th."},"VariableStarViewer":{"controls":"iu khin","figCaption":"Biu  HR","flip":"lt","focus":"tp trung","highlight":"nu bt","imageTitle":"Biu  HR:  sng so vi Nhit ","label":"B lc {{id}}","periodMultiple":"bi s chu k","phase":"giai on","phaseFocus":"Ly nt theo pha"},"VideoController":{"closeVolume":"ng thanh trt m lng","fullscreen":"Hin th video ton mn hnh","openVolume":"M thanh trt m lng","pause":"Tm dng video","play":"Pht video","playbackSpeed":"Chn tc  pht li video","scrubber":"Scrubber trnh pht video","volumeSlider":"Thanh trt m lng"},"ZoomControlButton":{"disable":"Tt chc nng thu phng","enable":"Bt chc nng thu phng"},"loading":"ang ti ch th","zoomHelp":"Dng CTRL + cun  phng to/thu nh"},"TaskArea":{"DisabledTaskPopup":{"body":"Ch th ny  c  phn loi, v vy mi phn loi b sung s khng c s dng trong qu trnh phn tch. Tuy nhin, bn vn c th xem ch th ny  tham kho.","options":{"dismiss":"ng","next":"Ch th kh dng tip theo","select":"Chn mt ch th mi"},"title":" hon thnh"},"Tasks":{"BackButton":{"back":"Quay li"},"DoneAndTalkButton":{"doneAndTalk":"Hon tt & Tr chuyn","newTab":"trong mt tab mi"},"DoneButton":{"done":"Hon tt"},"ExpertOptions":{"demoToggle":"Ch  Demo","label":"Ty chn nng cao"},"NextButton":{"next":"Tip theo"},"TaskHelp":{"close":"ng","label":"Cn tr gip vi nhim v ny khng?"},"demoMode":" ch  Demo, cc phn loi s khng c lu. S dng ch  ny  trnh din nhanh giao din phn loi, khng yu cu  chnh xc cao.","error":" xy ra s c","loading":"ang ti","renderFallback":"Khng th hin th thnh phn nhim v."},"task":"Nhim v","tutorial":"Hng dn"}}')},"../lib-classifier/dist/esm/translations/vi/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"Nhn v ko t im m n im ng hoc nhp p vo bt k v tr no trn dng  to im ni","closePoint":"Nhn vo bt k v tr no trn dng  t im ng","inactive":"Nhn  chnh sa dng ny","spliceDrag":"Nhn v ko t im m n im ng","splicePoint":"Nhn p vo bt k v tr no trn dng  to im ni"},"HighlighterTask":{"delete":"Xa","noLabels":"Khng c nhn cho Nhim v T sng","status":"{{count}}  c nh du"},"InputStatus":{"drawn":" rt {{count}} mc","max":" rt {{count}} trong tng s ti a {{max}} mc","maxAndMin":" chn {{count}} trong s ti thiu {{min}}, ti a {{max}} mc c chn","min":" chn {{count}} trn ti thiu {{min}} mc cn thit"},"LineControls":{"close":"ng","delete":"Xa","deleteCancel":"Hy xa","deleteConfirm":"Xc nhn xa","lineControls":"iu khin dng","move":"Di chuyn","redo":"Lm li","undo":"Hon tc"},"SimpleDropdownTask":{"customInputPlaceholder":"Nhp g ","otherLabel":"Khc...","selectPlaceholder":"Chn mt cu tr li"},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"Xa b lc","closeFilters":"ng b lc","filter":"B lc","removeFilter":"Xa b lc {{valueLabel}}","showing":"ang hin th {{showing}} trong tng s {{total}}"},"Choice":{"cancel":"Hy","identify":"Xc nh","lessInfo":"t thng tin hn","moreInfo":"Thm thng tin","notThis":"Khng phi ci ny"},"ChoiceButton":{"identified":" xc nh","openSubmenu":"M menu ph cho {{choiceLabel}}"},"ConfusedWith":{"cancel":"Hy","confused":"Thnh thong b nhm vi","itsThis":"Ti ngh l ci ny"},"DeleteButton":{"delete":"Xa la chn {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":"t li"},"TextTask":{"TextTagButtons":{"modifiers":"B chnh sa vn bn"}},"TranscriptionLine":{"created":" to bn chp li","editing":"ang chnh sa bn chp li"}}')},"../lib-classifier/dist/esm/translations/zh-CN/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"","tooltipText":["",""]},"Banner":{"next":"","previous":"","whyAmISeeingThis":""},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":""},"RetiredBanner":{"bannerText":"","tooltipText":["",""]},"SubjectSetProgressBanner":{"alreadySeen":"","bannerText":"{{setName}} {{number}}/{{total}}","finished":"","tooltipText":["",""]},"UserHasFinishedWorkflowBanner":{"bannerText":"","tooltipText":["",""]},"WorkflowIsFinishedBanner":{"bannerText":"","tooltipText":["",""]}},"DrawingTools":{"RotateHandle":"/"},"FeedbackModal":{"keepClassifying":"","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":""},"FieldGuideItem":{"ariaTitle":""},"FieldGuideItemAnchor":{"ariaTitle":" {{title}}"},"title":""},"ImageToolbar":{"AnnotateButton":{"ariaLabel":""},"FullscreenButton":{"ariaLabel":{"actualSize":"","fullscreen":""}},"InvertButton":{"ariaLabel":""},"MoveButton":{"ariaLabel":""},"ResetButton":{"ariaLabel":""},"RotateButton":{"ariaLabel":""},"ZoomInButton":{"ariaLabel":""},"ZoomOutButton":{"ariaLabel":""}},"MetaTools":{"CollectionsButton":{"add":""},"HidePreviousMarksDrawingButton":{"hide":"","show":""},"HidePreviousTranscriptionsButton":{"hide":"","show":"","showUser":""},"MetadataButton":{"label":""},"MetadataModal":{"table":{"label":"","value":""},"title":""}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"","goToTalk":" Talk ","mainPanel":"","openButton":" {{count}} ","panelContent":"","panelHeading":""},"errors":{"failPostComment":"","failPostDiscussion":"","noBoard":"","noText":"","noUser":""},"loginToPost":"","status":{"initialized":"","loading":"...","success":""},"subjectHasNoComments":""},"SlideTutorial":{"StepNavigation":{"go":" {{index}} ","next":"","previous":""},"alt":" {{activeStep}} ","error":"","getStarted":"","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":" {{index}} ","next":"","previous":""},"SubjectViewer":{"BarChartViewer":{"chartLabel":""},"ImageAndTextViewer":{"textIconAltText":""},"InteractionLayer":{"ConfirmModal":{"close":"","confirm":"","keepWorking":""},"SaveButton":{"save":""},"SubTaskPopup":{"notRender":"","required":""},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"","explanation":" {{count}} ","noAggregation":"","title":"","transcriptionsUnavailable":""},"complete":"","transcribed":""}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":""}},"ScatterPlotViewer":{"Selection":{"delete":" {{index}}"}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"","switchToSeparateFrames":""}},"SingleVideoViewerContainer":{"error":""},"VariableStarViewer":{"controls":"","figCaption":"","flip":"","focus":"","highlight":"","imageTitle":"","label":" {{id}}","periodMultiple":"","phase":"","phaseFocus":""},"VideoController":{"closeVolume":"","fullscreen":"","openVolume":"","pause":"","play":"","playbackSpeed":"","scrubber":"","volumeSlider":""},"ZoomControlButton":{"disable":"","enable":""},"loading":"","zoomHelp":" CTRL + "},"TaskArea":{"DisabledTaskPopup":{"body":"","options":{"dismiss":"","next":"","select":""},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":" ","newTab":""},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":"","label":""},"NextButton":{"next":""},"TaskHelp":{"close":"","label":""},"demoMode":"","error":"","loading":"","renderFallback":""},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/zh-CN/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"","closePoint":"","inactive":"","spliceDrag":"","splicePoint":""},"HighlighterTask":{"delete":"","noLabels":"","status":"{{count}} "},"InputStatus":{"drawn":" {{count}} ","max":" {{count}}  {{max}} ","maxAndMin":" {{count}}  {{min}}  {{max}} ","min":" {{count}}  {{min}} "},"LineControls":{"close":"","delete":"","deleteCancel":"","deleteConfirm":"","lineControls":"","move":"","redo":"","undo":""},"SimpleDropdownTask":{"customInputPlaceholder":"","otherLabel":"...","selectPlaceholder":""},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"","closeFilters":"","filter":"","removeFilter":" {{valueLabel}} ","showing":" {{showing}}  {{total}} "},"Choice":{"cancel":"","identify":"","lessInfo":"","moreInfo":"","notThis":""},"ChoiceButton":{"identified":"","openSubmenu":" {{choiceLabel}} "},"ConfusedWith":{"cancel":"","confused":"","itsThis":""},"DeleteButton":{"delete":" {{choiceLabel}}"}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":""}},"TranscriptionLine":{"created":"","editing":""}}')},"../lib-classifier/dist/esm/translations/zh-TW/components.json"(module){"use strict";module.exports=JSON.parse('{"Banners":{"AlreadySeenBanner":{"bannerText":"","tooltipText":["",""]},"Banner":{"next":"","previous":"","whyAmISeeingThis":""},"InProgressConfirmModal":{"cancel":"","confirm":"","inProgress":""},"RetiredBanner":{"bannerText":"","tooltipText":["",""]},"SubjectSetProgressBanner":{"alreadySeen":"","bannerText":"{{setName}}{{number}}/{{total}} ","finished":"","tooltipText":["",""]},"UserHasFinishedWorkflowBanner":{"bannerText":"","tooltipText":["",""]},"WorkflowIsFinishedBanner":{"bannerText":"","tooltipText":["",""]}},"DrawingTools":{"RotateHandle":"/"},"FeedbackModal":{"keepClassifying":"","label":""},"FieldGuide":{"FieldGuideButton":{"buttonLabel":""},"FieldGuideItem":{"ariaTitle":""},"FieldGuideItemAnchor":{"ariaTitle":" {{title}}"},"title":""},"ImageToolbar":{"AnnotateButton":{"ariaLabel":""},"FullscreenButton":{"ariaLabel":{"actualSize":"","fullscreen":""}},"InvertButton":{"ariaLabel":""},"MoveButton":{"ariaLabel":""},"ResetButton":{"ariaLabel":""},"RotateButton":{"ariaLabel":""},"ZoomInButton":{"ariaLabel":""},"ZoomOutButton":{"ariaLabel":""}},"MetaTools":{"CollectionsButton":{"add":""},"HidePreviousMarksDrawingButton":{"hide":"","show":""},"HidePreviousTranscriptionsButton":{"hide":"","show":"","showUser":""},"MetadataButton":{"label":""},"MetadataModal":{"table":{"label":"","value":""},"title":""}},"ModalTutorial":{"title":""},"QuickTalk":{"aria":{"closeButton":"","goToTalk":"","mainPanel":"","openButton":" {{count}} ","panelContent":"","panelHeading":""},"errors":{"failPostComment":"","failPostDiscussion":"","noBoard":"","noText":"","noUser":""},"loginToPost":"","status":{"initialized":"","loading":"","success":""},"subjectHasNoComments":""},"SlideTutorial":{"StepNavigation":{"go":" {{index}} ","next":"","previous":""},"alt":"{{activeStep}} ","error":"","getStarted":"","heading":"{{projectDisplayName}} "},"StepNavigation":{"go":" {{index}} ","next":"","previous":""},"SubjectViewer":{"BarChartViewer":{"chartLabel":""},"ImageAndTextViewer":{"textIconAltText":""},"InteractionLayer":{"ConfirmModal":{"close":"","confirm":"","keepWorking":""},"SaveButton":{"save":""},"SubTaskPopup":{"notRender":"","required":""},"TranscribedLines":{"ConsensusPopup":{"aggregatedTranscription":"","explanation":" {{count}} ","noAggregation":"","title":"","transcriptionsUnavailable":""},"complete":"","transcribed":""}},"MultiFrameViewer":{"FrameCarousel":{"nextFrameLabel":"","previousFrameLabel":"","thumbnailAltText":""}},"ScatterPlotViewer":{"Selection":{"delete":" {{index}} "}},"SeparateFramesViewer":{"ViewModeButton":{"switchToFlipbook":"","switchToSeparateFrames":""}},"SingleVideoViewerContainer":{"error":""},"VariableStarViewer":{"controls":"","figCaption":"","flip":"","focus":"","highlight":"","imageTitle":"","label":"{{id}} ","periodMultiple":"","phase":"","phaseFocus":""},"VideoController":{"closeVolume":"","fullscreen":"","openVolume":"","pause":"","play":"","playbackSpeed":"","scrubber":"","volumeSlider":""},"ZoomControlButton":{"disable":"","enable":""},"loading":"","zoomHelp":" CTRL "},"TaskArea":{"DisabledTaskPopup":{"body":"","options":{"dismiss":"","next":"","select":""},"title":""},"Tasks":{"BackButton":{"back":""},"DoneAndTalkButton":{"doneAndTalk":"","newTab":""},"DoneButton":{"done":""},"ExpertOptions":{"demoToggle":"","label":""},"NextButton":{"next":""},"TaskHelp":{"close":"","label":""},"demoMode":"","error":"","loading":"","renderFallback":""},"task":"","tutorial":""}}')},"../lib-classifier/dist/esm/translations/zh-TW/plugins.json"(module){"use strict";module.exports=JSON.parse('{"FreehandLine":{"active":"","closePoint":"","inactive":"","spliceDrag":"","splicePoint":""},"HighlighterTask":{"delete":"","noLabels":"","status":" {{count}} "},"InputStatus":{"drawn":" {{count}}","max":" {{count}}/{{max}}","maxAndMin":" {{count}}/{{min}} {{max}}","min":" {{count}}/{{min}}"},"LineControls":{"close":"","delete":"","deleteCancel":"","deleteConfirm":"","lineControls":"","move":"","redo":"","undo":""},"SimpleDropdownTask":{"customInputPlaceholder":"","otherLabel":"","selectPlaceholder":""},"SurveyTask":{"CharacteristicsFilter":{"clearFilters":"","closeFilters":"","filter":"","removeFilter":" {{valueLabel}} ","showing":" {{showing}}  {{total}} "},"Choice":{"cancel":"","identify":"","lessInfo":"","moreInfo":"","notThis":""},"ChoiceButton":{"identified":"","openSubmenu":" {{choiceLabel}} "},"ConfusedWith":{"cancel":"","confused":"","itsThis":""},"DeleteButton":{"delete":" {{choiceLabel}} "}},"TextFromSubjectTask":{"reset":""},"TextTask":{"TextTagButtons":{"modifiers":""}},"TranscriptionLine":{"created":"","editing":""}}')},"../lib-react-components/dist/esm/FavouritesButton/FavouritesButton.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>FavouritesButton_FavouritesButton});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),MetaToolsButton=__webpack_require__("../lib-react-components/dist/esm/MetaToolsButton/MetaToolsButton.js"),Blank=__webpack_require__("../../node_modules/grommet-icons/es6/icons/Blank.js"),jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledBlank=(0,styled_components_browser_esm.default)(Blank.h).withConfig({displayName:"HeartIcon__StyledBlank",componentId:"sc-1sa7tpr-0"})(["",""],props=>props.fill&&(0,styled_components_browser_esm.css)(["fill:",";"],props.fill));function HeartIcon(props){return(0,jsx_runtime.jsx)(StyledBlank,_objectSpread(_objectSpread({viewBox:"0 0 24 24"},props),{},{children:(0,jsx_runtime.jsx)("path",{strokeWidth:"1",d:"M1,8.4 C1,4 4.5,3 6.5,3 C9,3 11,5 12,6.5 C13,5 15,3 17.5,3 C19.5,3 23,4 23,8.4 C23,15 12,21 12,21 C12,21 1,15 1,8.4 Z"})}))}var i18n=__webpack_require__("../lib-react-components/dist/esm/translations/i18n.js"),DEFAULT_HANDLER=()=>{};function FavouritesButton(_ref){var{checked=!1,disabled=!1,onClick=DEFAULT_HANDLER}=_ref,[isFavourite,setIsFavourite]=(0,react.useState)(checked),{global}=(0,styled_components_browser_esm.useTheme)(),label=isFavourite?"FavouritesButton.remove":"FavouritesButton.add",fill=isFavourite?global.colors.statusColors.error:"none";var{t}=(0,i18n.B)();return(0,jsx_runtime.jsx)(MetaToolsButton.h,{"aria-checked":isFavourite,disabled,icon:(0,jsx_runtime.jsx)(HeartIcon,{color:"dark-5",fill,size:"15px"}),role:"checkbox",text:t(label),onClick:function toggleFavourite(){setIsFavourite(!isFavourite),onClick()}})}FavouritesButton.propTypes={checked:prop_types.bool,disabled:prop_types.bool,onClick:prop_types.func};const FavouritesButton_FavouritesButton=FavouritesButton},"../lib-react-components/dist/esm/Markdownz/Markdownz.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>Markdownz_Markdownz});var prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),Table=__webpack_require__("../../node_modules/grommet/es6/components/Table/Table.js"),TableCell=__webpack_require__("../../node_modules/grommet/es6/components/TableCell/TableCell.js"),Anchor=__webpack_require__("../../node_modules/grommet/es6/components/Anchor/Anchor.js"),Heading=__webpack_require__("../../node_modules/grommet/es6/components/Heading/Heading.js"),Paragraph=__webpack_require__("../../node_modules/grommet/es6/components/Paragraph/Paragraph.js"),Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),TableFooter=__webpack_require__("../../node_modules/grommet/es6/components/TableFooter/TableFooter.js"),TableHeader=__webpack_require__("../../node_modules/grommet/es6/components/TableHeader/TableHeader.js"),TableBody=__webpack_require__("../../node_modules/grommet/es6/components/TableBody/TableBody.js"),TableRow=__webpack_require__("../../node_modules/grommet/es6/components/TableRow/TableRow.js"),esm=__webpack_require__("../../node_modules/markdownz/lib/esm/index.js"),Media=__webpack_require__("../lib-react-components/dist/esm/Media/Media.js"),withThemeContext=__webpack_require__("../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js");const theme={anchor:{fontWeight:400,textDecoration:"underline"},heading:{color:{dark:"accent-1",light:"neutral-1"},level:{1:{small:{size:"26px",height:"31px",maxWidth:"816px"},medium:{size:"26px",height:"31px",maxWidth:"1200px"},large:{size:"46px",height:"51px",maxWidth:"1968px"},xlarge:{size:"66px",height:"71px",maxWidth:"2736px"}},2:{small:{size:"22px",height:"27px",maxWidth:"816px"},medium:{size:"22px",height:"27px",maxWidth:"816px"},large:{size:"42px",height:"47px",maxWidth:"1968px"},xlarge:{size:"62px",height:"67px",maxWidth:"2736px"}},3:{small:{size:"18px",height:"23px",maxWidth:"528px"},medium:{size:"18px",height:"23px",maxWidth:"528px"},large:{size:"38px",height:"43px",maxWidth:"816px"},xlarge:{size:"58px",height:"63px",maxWidth:"1008px"}},4:{font:{weight:"bold"},small:{size:"16px",height:"21px",maxWidth:"432px"},medium:{size:"16px",height:"21px",maxWidth:"432px"},large:{size:"36px",height:"41px",maxWidth:"432px"},xlarge:{size:"56px",height:"61px",maxWidth:"432px"}},5:{small:{size:"14px",height:"19px",maxWidth:"384px"},medium:{size:"14px",height:"19px",maxWidth:"384px"},large:{size:"34px",height:"39px",maxWidth:"384px"},xlarge:{size:"54px",height:"59px",maxWidth:"384px"}},6:{small:{size:"12px",height:"17px",maxWidth:"336px"},medium:{size:"12px",height:"17px",maxWidth:"336px"},large:{size:"32px",height:"37px",maxWidth:"384px"},xlarge:{size:"52px",height:"57px",maxWidth:"384px"}}},responsiveBreakpoint:"small",weight:600,extend:props=>(0,styled_components_browser_esm.css)(["letter-spacing:-0.5px;margin:",";"],props.margin||"10px 0 10px 0")}};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),console=__webpack_require__("../../node_modules/console-browserify/index.js"),_excluded=["style"],_excluded2=["style"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var StyledHorizontalRule=styled_components_browser_esm.default.hr.withConfig({displayName:"Markdownz__StyledHorizontalRule",componentId:"sc-13w1mlf-0"})(["width:100%;"]),StyledOrderedList=styled_components_browser_esm.default.ol.withConfig({displayName:"Markdownz__StyledOrderedList",componentId:"sc-13w1mlf-1"})(["font-size:1rem;margin-top:0;"]),StyledUnorderedList=styled_components_browser_esm.default.ul.withConfig({displayName:"Markdownz__StyledUnorderedList",componentId:"sc-13w1mlf-2"})(["font-size:1rem;margin-top:0;"]),StyledTable=(0,styled_components_browser_esm.default)(Table.X).withConfig({displayName:"Markdownz__StyledTable",componentId:"sc-13w1mlf-3"})(["font-size:1rem;font-weight:normal;th{font-weight:bold;}"]),StyledTableCell=(0,styled_components_browser_esm.default)(TableCell.n).withConfig({displayName:"Markdownz__StyledTableCell",componentId:"sc-13w1mlf-4"})(["",""],_ref=>{var{styleString}=_ref;return styleString||""}),StyledVideo=styled_components_browser_esm.default.video.withConfig({displayName:"Markdownz__StyledVideo",componentId:"sc-13w1mlf-5"})(["max-width:100%;"]),componentMappings={a:Anchor.M,h1:_ref2=>{var{id,children}=_ref2;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"1",children})},h2:_ref3=>{var{id,children}=_ref3;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"2",children})},h3:_ref4=>{var{id,children}=_ref4;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"3",children})},h4:_ref5=>{var{id,children}=_ref5;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"4",children})},h5:_ref6=>{var{id,children}=_ref6;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"5",children})},h6:_ref7=>{var{id,children}=_ref7;return(0,jsx_runtime.jsx)(Heading.D,{id,level:"6",children})},hr:StyledHorizontalRule,img:function renderMedia(nodeProps){var width=nodeProps.width,height=nodeProps.height,alt=nodeProps.alt,src=nodeProps.src;if(src.startsWith("https://cdn.jsdelivr.net/gh/jdecked/twemoji"))return alt;var match=alt.match(/=(\d+(%|px|em|rem|vw)?)x(\d+(%|px|em|rem|vh)?)?/);return match&&match.length>0&&(width=parseInt(match[1]),match[3]&&(height=parseInt(match[3])),alt=alt.split(match[0])[0].trim()),src?(0,jsx_runtime.jsx)(Media.A,{alt,defaultMimeType:"image",height,src,width}):null},p:Paragraph.f,span:Text.E,table:StyledTable,tfoot:TableFooter.G,thead:TableHeader.A,th:_ref8=>{var{style}=_ref8,props=_objectWithoutProperties(_ref8,_excluded);return(0,jsx_runtime.jsx)(StyledTableCell,_objectSpread({scope:"col",styleString:style},props))},tbody:TableBody.B,td:_ref9=>{var{style}=_ref9,props=_objectWithoutProperties(_ref9,_excluded2);return(0,jsx_runtime.jsx)(StyledTableCell,_objectSpread({styleString:style},props))},tr:TableRow.H,ol:StyledOrderedList,ul:StyledUnorderedList,video:StyledVideo};function Markdownz(_ref0){var{baseURI="",children,components={},inline=!1,projectSlug="",settings={}}=_ref0;if(!children)return null;Object.keys(components).includes("img")&&console.warn("Overriding the rendering function for the img tag may break the syntax support for image resizing and using image markup for video and audio. Are you sure you want to do this?");var rehypeReactComponents=_objectSpread(_objectSpread({},componentMappings),components),markdownChildren=(_objectSpread({fragment:!0},settings),(0,esm.Vq)({baseURI,components:rehypeReactComponents,content:children,inline,project:{slug:projectSlug},settings}));return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:markdownChildren})}Markdownz.propTypes={baseURI:prop_types.string,children:prop_types.string.isRequired,components:prop_types.object,inline:prop_types.bool,projectSlug:prop_types.string,settings:prop_types.object};const Markdownz_Markdownz=(0,withThemeContext.A)(Markdownz,theme)},"../lib-react-components/dist/esm/MetaToolsButton/MetaToolsButton.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>__WEBPACK_DEFAULT_EXPORT__});var prop_types__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_PlainButton__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../lib-react-components/dist/esm/PlainButton/PlainButton.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_excluded=["disabled","icon","onClick","text"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledPlainButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.default)(_PlainButton__WEBPACK_IMPORTED_MODULE_2__.Ay).withConfig({displayName:"MetaToolsButton__StyledPlainButton",componentId:"sc-1tg3efk-0"})(["> div{justify-content:flex-start;"," ","}span{","}"],props=>(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.css)(["padding:",";"],props.padding),props=>(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.css)(["line-height:",";"],props.theme.paragraph.small.height),props=>props.active&&(0,styled_components__WEBPACK_IMPORTED_MODULE_1__.css)(["font-weight:bold;"])),DEFAULT_HANDLER=()=>{};function MetaToolsButton(_ref){var{disabled=!1,icon=null,onClick=DEFAULT_HANDLER,text=""}=_ref,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(StyledPlainButton,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({"data-testid":"test-meta-tools-button",disabled,icon,labelSize:"small",text,onClick},rest))}MetaToolsButton.propTypes={disabled:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,icon:(0,prop_types__WEBPACK_IMPORTED_MODULE_0__.oneOfType)([prop_types__WEBPACK_IMPORTED_MODULE_0__.node,prop_types__WEBPACK_IMPORTED_MODULE_0__.object]),onClick:prop_types__WEBPACK_IMPORTED_MODULE_0__.func,text:prop_types__WEBPACK_IMPORTED_MODULE_0__.string,theme:(0,prop_types__WEBPACK_IMPORTED_MODULE_0__.shape)({dark:prop_types__WEBPACK_IMPORTED_MODULE_0__.bool,paragraph:prop_types__WEBPACK_IMPORTED_MODULE_0__.object})};const __WEBPACK_DEFAULT_EXPORT__=MetaToolsButton},"../lib-react-components/dist/esm/PlainButton/PlainButton.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),prop_types__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/prop-types/index.js"),styled_components__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),_SpacedText__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../lib-react-components/dist/esm/SpacedText/SpacedText.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_excluded=["as","className","disabled","href","onClick","labelSize","text","color"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var StyledPlainButton=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.default)(grommet__WEBPACK_IMPORTED_MODULE_0__.$).withConfig({displayName:"PlainButton__StyledPlainButton",componentId:"sc-4x2flx-0"})(["&:focus,&:hover{text-decoration:underline;}&:disabled{cursor:not-allowed;text-decoration:none;}"]),defaultColor={dark:"accent-1",light:"neutral-1"};function PlainButton(_ref){var{as="",className="",disabled=!1,href=null,onClick=()=>{},labelSize="medium",text="",color=defaultColor}=_ref,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(StyledPlainButton,function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({as,className,disabled,href:disabled?null:href,gap:"xxsmall",label:text?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(_SpacedText__WEBPACK_IMPORTED_MODULE_3__.A,{color,size:labelSize,children:text}):null,onClick,plain:!0},rest))}PlainButton.propTypes={as:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,className:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,color:(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.oneOfType)([(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.shape)({dark:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,light:prop_types__WEBPACK_IMPORTED_MODULE_1__.string}),prop_types__WEBPACK_IMPORTED_MODULE_1__.string]),disabled:prop_types__WEBPACK_IMPORTED_MODULE_1__.bool,href:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,labelSize:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,onClick:prop_types__WEBPACK_IMPORTED_MODULE_1__.func,text:prop_types__WEBPACK_IMPORTED_MODULE_1__.string,theme:(0,prop_types__WEBPACK_IMPORTED_MODULE_1__.shape)({dark:prop_types__WEBPACK_IMPORTED_MODULE_1__.bool})};const __WEBPACK_DEFAULT_EXPORT__=(0,styled_components__WEBPACK_IMPORTED_MODULE_2__.withTheme)(PlainButton)},"../lib-react-components/dist/esm/PrimaryButton/PrimaryButton.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>PrimaryButton_PrimaryButton});var Text=__webpack_require__("../../node_modules/grommet/es6/components/Text/Text.js"),ThemeContext=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),Button=__webpack_require__("../../node_modules/grommet/es6/components/Button/Button.js"),prop_types=__webpack_require__("../../node_modules/prop-types/index.js"),react=__webpack_require__("../../node_modules/react/index.js"),utils=__webpack_require__("../../node_modules/grommet/utils/index.js"),styled_components_browser_esm=__webpack_require__("../../node_modules/styled-components/dist/styled-components.browser.esm.js"),polished_esm=__webpack_require__("../../node_modules/polished/dist/polished.esm.js");function overlay(source){var overlay=arguments.length>1&&void 0!==arguments[1]?arguments[1]:76,value=source<128?2*overlay*source/255:255-2*(255-overlay)*(255-source)/255;return Math.round(value)}const helpers_getGradientShade=function getGradientShade(hex){var color=(0,polished_esm.kN)(hex);return color.red=overlay(color.red),color.green=overlay(color.green),color.blue=overlay(color.blue),(0,polished_esm.Qh)(color)};const blue={button:{border:{color:"neutral-5",width:"1px"},color:{dark:"white",light:"black"},primary:{color:{dark:"dark-3",light:"neutral-5"}},extend:props=>{var color=(0,utils.normalizeColor)("neutral-5",props.theme),gradientShade=helpers_getGradientShade(color);return(0,styled_components_browser_esm.css)(["transition:none;text-align:center;width:100%;max-width:350px;&:disabled{cursor:not-allowed;pointer-events:'none';}&:focus:not(:disabled),&:hover:not(:disabled){color:black;background:linear-gradient(",",",");box-shadow:none;}&:active:not(:disabled){color:black;background:linear-gradient(",",",");}"],color,gradientShade,gradientShade,color)}}};const gold={button:{border:{color:"neutral-2",width:"1px"},color:{dark:"white",light:"black"},primary:{color:{dark:"dark-3",light:"neutral-2"}},extend:props=>{var color=(0,utils.normalizeColor)("neutral-2",props.theme),gradientShade=helpers_getGradientShade(color);return(0,styled_components_browser_esm.css)(["transition:none;text-align:center;width:100%;max-width:350px;&:disabled{cursor:not-allowed;pointer-events:'none';}&:focus:not(:disabled),&:hover:not(:disabled){color:black;background:linear-gradient(",",",");box-shadow:none;}&:active:not(:disabled){color:black;background:linear-gradient(",",",");}"],color,gradientShade,gradientShade,color)}}};const green={button:{border:{color:"status-ok",width:"1px"},color:{dark:"white",light:"black"},primary:{color:{dark:"dark-3",light:"status-ok"}},extend:props=>{var color=(0,utils.normalizeColor)("status-ok",props.theme),gradientShade=helpers_getGradientShade(color);return(0,styled_components_browser_esm.css)(["transition:none;text-align:center;width:100%;max-width:350px;&:disabled{cursor:not-allowed;pointer-events:'none';}&:focus:not(:disabled),&:hover:not(:disabled){color:black;background:linear-gradient(",",",");box-shadow:none;}&:active:not(:disabled){color:black;background:linear-gradient(",",",");}"],color,gradientShade,gradientShade,color)}}};const teal={button:{border:{color:"brand",width:"1px"},color:{dark:"white",light:"white"},primary:{color:{dark:"dark-3",light:"brand"}},extend:props=>{var color=(0,utils.normalizeColor)("brand",props.theme),gradientShade=helpers_getGradientShade(color);return(0,styled_components_browser_esm.css)(["transition:none;text-align:center;width:100%;max-width:350px;&:disabled{cursor:not-allowed;pointer-events:'none';}&:focus:not(:disabled),&:hover:not(:disabled){color:white;background:linear-gradient(",",",");box-shadow:none;}&:active:not(:disabled){color:white;background:linear-gradient(",",",");}"],color,gradientShade,gradientShade,color)}}};var jsx_runtime=__webpack_require__("../../node_modules/react/jsx-runtime.js"),_excluded=["as","color","disabled","href","label","onClick"];function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var themeMap={blue,gold,green,teal};function PrimaryButton(_ref){var{as="",color="gold",disabled=!1,href=null,label,onClick=()=>{}}=_ref,rest=function _objectWithoutProperties(e,t){if(null==e)return{};var o,r,i=function _objectWithoutPropertiesLoose(r,e){if(null==r)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(-1!==e.indexOf(n))continue;t[n]=r[n]}return t}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)o=n[r],-1===t.indexOf(o)&&{}.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}(_ref,_excluded),theme=themeMap[color]||themeMap.gold,wrappedLabel=(0,react.isValidElement)(label)?label:(0,jsx_runtime.jsx)(Text.E,{size:"medium",children:label});return(0,jsx_runtime.jsx)(ThemeContext.D.Extend,{value:theme,children:(0,jsx_runtime.jsx)(Button.$,_objectSpread({as,disabled,href:disabled?null:href,label:wrappedLabel,primary:!0,onClick},rest))})}PrimaryButton.propTypes={as:prop_types.string,color:(0,prop_types.oneOf)(["blue","gold","green","teal"]),disabled:prop_types.bool,href:prop_types.string,label:(0,prop_types.oneOfType)([prop_types.element,prop_types.string]).isRequired,onClick:prop_types.func};const PrimaryButton_PrimaryButton=PrimaryButton},"../lib-react-components/dist/esm/helpers/withThemeContext/withThemeContext.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var grommet__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/grommet/es6/contexts/ThemeContext/ThemeContext.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/react/jsx-runtime.js");function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,o)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach(function(r){_defineProperty(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function _defineProperty(e,r,t){return(r=function _toPropertyKey(t){var i=function _toPrimitive(t,r){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,r||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:i+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}const __WEBPACK_DEFAULT_EXPORT__=function withThemeContext(WrappedComponent,theme){return props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(grommet__WEBPACK_IMPORTED_MODULE_0__.D.Extend,{value:theme,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(WrappedComponent,_objectSpread({},props))})}},"?3310"(){},"?4e1e"(){}}]);