{"version":3,"file":"4430.fddcd7e2.iframe.bundle.js","mappings":";;;;;;;;;;;AAgBA;AAIA;AAFA;AACA;;;;;ACRA;;;;ACSA;AACA;AASA;;AAMA;;;AAGA;AACA;AACA;;;AAGA;;;;AAMA;AACA;AACA;;;;AAIA;;;;AAQA","sources":["webpack://@zooniverse/fe-project/./src/screens/SubjectTalkPage/components/SubjectTalkData/components/TalkComment/components/Role/Role.jsx","webpack://@zooniverse/fe-project/./src/screens/SubjectTalkPage/components/SubjectTalkData/components/TalkComment/components/Avatar/Avatar.jsx","webpack://@zooniverse/fe-project/./src/screens/SubjectTalkPage/components/SubjectTalkData/components/TalkComment/TalkComment.jsx"],"sourcesContent":["import { Box } from 'grommet'\nimport { useTranslation } from 'next-i18next'\nimport { shape, string } from 'prop-types'\nimport styled, { css } from 'styled-components'\n\nexport const StyledRole = styled(Box)`\n  font-size: 8px;\n  letter-spacing: 0.5px;\n  display: flex;\n  align-items: center;\n  width: 90px;\n  line-height: 1;\n  padding: 5px 0;\n  text-transform: uppercase;\n  font-weight: bold;\n  margin: 5px 5px 0 0;\n  ${props =>\n    css`\n      color: ${props.theme.global.colors.black};\n    `}\n`\n\nfunction Role({ role }) {\n  const { t } = useTranslation('screens')\n\n  let roleName = ''\n  let roleColor = 'accent-1'\n  if (role.section === 'zooniverse' && ['admin', 'team'].includes(role.name)) {\n    roleName = t('About.TeamMember.admin')\n    roleColor = 'light-2'\n  } else if (['admin', 'scientist', 'owner'].includes(role.name)) {\n    roleName = t('About.TeamMember.researcher')\n    roleColor = 'neutral-2'\n  } else {\n    roleName = t(`About.TeamMember.${role.name}`)\n  }\n  \n  return(\n    <StyledRole\n      key={role.id}\n      round='xxsmall'\n      background={roleColor}\n    >\n      {roleName}\n    </StyledRole>\n  )\n}\n\nRole.propTypes = {\n  role: shape({\n    id: string,\n    name: string,\n    section: string,\n    user_id: string\n  }).isRequired\n}\n\nexport default Role\n","import { Image } from 'grommet'\nimport { string } from 'prop-types'\nimport styled from 'styled-components'\n\nconst StyledAvatar = styled(Image)`\n  width: 50px;\n  height: 50px;\n  object-fit: cover;\n  border-radius: 50%;\n`\n\nfunction Avatar({\n  src,\n  alt\n}) {\n  return (\n    <StyledAvatar\n      src={src}\n      alt={alt}\n    />\n  )\n}\n\nAvatar.propTypes = {\n  src: string,\n  alt: string\n}\n\nexport default Avatar\n","import { Markdownz } from '@zooniverse/react-components'\nimport { Anchor, Box, Paragraph, Text } from 'grommet'\nimport { LikeFill, Share } from 'grommet-icons'\nimport { useTranslation } from 'next-i18next'\nimport styled from 'styled-components'\n\nimport addQueryParams from '@helpers/addQueryParams'\nimport Avatar from './components/Avatar'\nimport Role from './components/Role'\n\nconst markdownComponents = {\n  p: (nodeProps) => <Paragraph color={{ dark: 'neutral-6', light: 'neutral-7' }}>{nodeProps.children}</Paragraph>\n}\n\nconst StyledCommentCard = styled(Box)`\n  &:hover {\n    box-shadow: 1px 1px 4px 0 rgba(0, 0, 0, 0.25);\n  }\n`\n\nconst StyledReplyBox = styled(Box)`\n  background: ${props => {\n    const lightStart = props.theme.global.colors['neutral-6']\n    const lightEnd = props.theme.global.colors['light-1']\n    const darkStart = props.theme.global.colors['dark-3']\n    const darkEnd = props.theme.global.colors['dark-4']\n    return props.theme.dark\n      ? `linear-gradient(270deg, ${darkStart} 0%, ${darkEnd} 100%), ${darkEnd}`\n      : `linear-gradient(270deg, ${lightStart} 0%, ${lightEnd} 100%), ${lightEnd}`\n  }};\n`\n\nconst StyledDisplayName = styled(Text)`\n  letter-spacing: 0.8px;\n`\n\nconst StyledDate = styled(Text)`\n  visibility: visible;\n\n  ${StyledCommentCard}:hover &,\n  ${StyledCommentCard}:focus &,\n  ${StyledCommentCard}:focus-within & {\n    display: none;\n  }\n`\n\nconst StyledLink = styled(Anchor)`\n  opacity: 0;\n  pointer-events: none;\n\n  ${StyledCommentCard}:hover &,\n  ${StyledCommentCard}:focus &,\n  ${StyledCommentCard}:focus-within & {\n    opacity: 1;\n    pointer-events: auto;\n  }\n`\n\nconst StyledLinkLabel = styled(Text)`\n  font-size: 1rem;\n  font-weight: 500;\n  text-transform: uppercase;\n`\n\nconst DEFAULT_COMMENT = {\n  id: '',\n  board_id: '',\n  body: '',\n  created_at: '',\n  discussion_id: '',\n  project_slug: '',\n  user_display_name: '',\n  user_login: ''\n}\n\nfunction TalkComment({\n  avatar = '',\n  comment = DEFAULT_COMMENT,\n  login = '',\n  roles = undefined\n}) {\n  const { t } = useTranslation('screens')\n  \n  const localeDate = new Date(comment.created_at).toLocaleString(undefined, {\n    dateStyle: 'medium',\n    timeStyle: 'short'\n  })\n  \n  let upvoted = false\n  let upvotes = 0\n  if (comment?.upvotes) {\n    const upvotedLogins = Object.keys(comment.upvotes)\n    upvoted = login ? upvotedLogins.includes(login) : false\n    upvotes = upvotedLogins.length\n  }\n\n  return (\n    <StyledCommentCard\n      margin='2px'\n      pad={{ bottom: 'xsmall', horizontal: 'xsmall' }}\n      round='4px'\n      tabIndex={0}\n    >\n      {comment.reply_id ? (\n        <StyledReplyBox\n          align='center'\n          direction='row'\n          gap='xxsmall'\n          margin={{ left: '60px' }}\n        >\n            <Text size='0.75rem'>\n              {t('Talk.Comment.reply')}\n            </Text>\n            <Anchor\n              href={addQueryParams(`/projects/${comment.project_slug}/users/${comment.reply_user_login}`)}\n              size='0.75rem'\n              weight='500'\n            >\n              {t('Talk.Comment.userDisplayNamePossessive', { userDisplayName: comment.reply_user_display_name })}\n            </Anchor>\n            <Anchor\n              href={addQueryParams(`/projects/${comment.project_slug}/talk/${comment.board_id}/${comment.discussion_id}?comment=${comment.reply_id}`)}\n              size='0.75rem'\n              weight='500'\n            >\n              {t('Talk.Comment.comment')}\n            </Anchor>\n        </StyledReplyBox>\n      ) : null}\n      <Box\n        justify='between'\n        direction='row'\n      >\n        <Box\n          direction='row'\n          gap='10px'\n        >\n          <Avatar\n            alt={t('Talk.Comment.avatarAlt', { login: comment.user_login })}\n            src={avatar || 'https://static.zooniverse.org/fem-assets/simple-avatar.jpg'}\n          />\n          <Box\n            justify='center'\n          >\n            <Anchor href={addQueryParams(`/projects/${comment.project_slug}/users/${comment.user_login}`)}>\n              <StyledDisplayName\n                color={{ dark: 'accent-1', light: 'neutral-1' }}\n                size='1rem'\n              >\n                {comment.user_display_name}\n              </StyledDisplayName>\n            </Anchor>\n            {comment.user_login ?\n              <Text\n                size='xsmall'\n                uppercase={false}\n              >\n                @{comment.user_login}\n              </Text>\n              : null}\n          </Box>\n          <Box\n            height={{ max: '50px' }}\n            wrap\n          >\n            {roles?.map(role => (\n              <Role\n                key={role.id}\n                role={role}\n              />\n            ))}\n          </Box>\n        </Box>\n        <Box\n          align='end'\n          pad={{ top: 'xsmall' }}\n        >\n          <StyledDate\n            size='xsmall'\n            uppercase={false}\n          >\n            {localeDate}\n          </StyledDate>\n          <StyledLink\n            a11yTitle={t('Talk.Comment.goToComment')}\n            gap='xsmall'\n            href={addQueryParams(`/projects/${comment.project_slug}/talk/${comment.board_id}/${comment.discussion_id}?comment=${comment.id}`)}\n            icon={<Share size='14.667px' />}\n            label={<StyledLinkLabel>{t('Talk.Comment.goToComment').toUpperCase()}</StyledLinkLabel>}\n          />\n        </Box>\n      </Box>\n      <Box\n        pad={{ left: '60px' }}\n      >\n        <Markdownz\n          baseURI={''}\n          components={markdownComponents}\n          projectSlug={comment.project_slug}\n        >\n          {comment.body}\n        </Markdownz>\n      </Box>\n      {upvotes > 0 ? (\n        <Box\n          align='center'\n          direction='row'\n          gap='xxsmall'\n          justify='end'\n        >\n          <LikeFill\n            size='small'\n            color={upvoted ? { dark: 'accent-1', light: 'neutral-1' } : undefined}\n          />\n          <Text\n            color={{ dark: 'accent-1', light: 'neutral-1' }}\n            size='1rem'\n          >\n            {upvotes}\n          </Text>\n        </Box>\n      ) : null}\n    </StyledCommentCard>\n  )\n}\n\nexport default TalkComment\n"],"names":[],"ignoreList":[],"sourceRoot":""}