{"version":3,"file":"components-ProjectHeader-components-DropdownNav-DropdownNav-stories.3ad41cbb.iframe.bundle.js","mappings":";;;;;AAiBA;;;AAGA;;;;;AAQA;;;;AAMA;;AAKA;AAVA;AACA;AAKA;AACA;AACA","sources":["webpack://@zooniverse/fe-project/./src/components/ProjectHeader/components/DropdownNav/DropdownNav.jsx"],"sourcesContent":["import { SpacedText } from '@zooniverse/react-components'\nimport { Anchor, Box, DropButton } from 'grommet'\nimport { FormDown } from 'grommet-icons'\nimport NavLink from '@shared/components/NavLink'\nimport { bool, object, oneOfType, string } from 'prop-types'\nimport { useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport { useTranslation } from 'next-i18next'\nimport { useRouter } from 'next/router'\n\nimport { useProjectNavigation } from '../../hooks'\n\nconst StyledAnchor = styled(Anchor)`\n  padding: 10px 20px;\n  text-shadow: 0 2px 2px rgba(0, 0, 0, 0.22);\n  &:focus,\n  &:hover {\n    ${props => css`background: ${props.theme.global.colors['neutral-1']};`}\n    text-decoration: none;\n  }\n`\n\n// `tabindex=\"-1\"` is for the button's open state.\nconst StyledDropButton = styled(DropButton)`\n  padding: 10px 10px 10px 15px;\n  border-radius: 2em;\n  color: white;\n\n  ${props => props.isOpen && css`\n    background: ${props.theme.global.colors['accent-1']};\n  `}\n\n  &:focus,\n  &:hover {\n    ${props => css`\n      background: ${props.theme.global.colors['accent-1']};\n      color: ${props.theme.global.colors.brand};\n    `}\n  }\n`\n\nconst defaultMargin = {\n  top: 0\n}\n\nfunction DropdownNav({\n  adminMode = false,\n  className,\n  margin = defaultMargin,\n  organizationSlug = '',\n  organizationTitle = ''\n}) {\n  const { t } = useTranslation('components')\n  const navLinks = useProjectNavigation(adminMode)\n  const [ isOpen, setIsOpen ] = useState(false)\n\n  function onClose() {\n    setIsOpen(false)\n  }\n\n  function onOpen() {\n    setIsOpen(true)\n  }\n\n  function NavItem({ navLink }) {\n    const router = useRouter()\n    let isCurrentPage\n    if (router?.asPath) {\n      const routerPath = router.asPath.split('/')\n      const hrefPath = navLink.href.split('/')\n      /*\n        The path arrays will be ['', owner, project, section, ...rest].\n        The section is always the fourth item.\n      */\n      isCurrentPage = routerPath[3] === hrefPath[3]\n    }\n\n    return (\n      <Box as='li' key={navLink.href}>\n        <NavLink\n          aria-current={isCurrentPage ? 'page' : undefined}\n          color='white'\n          link={navLink}\n          StyledAnchor={StyledAnchor}\n          weight='bold'\n        />\n      </Box>\n    )\n  }\n\n  /* /about and /classify are internal routes in this Next.js app. The rest are not. */\n  const dropContent = (\n    <Box\n      aria-label={t('ProjectHeader.ProjectNav.ariaLabel')}\n      as='nav'\n      background='brand'\n      elevation='medium'\n    >\n      <Box as='ul' pad='0'>\n      {navLinks?.map(navLink => (\n          <NavItem key={navLink.href} navLink={navLink} />\n        ))}\n        {organizationTitle ? (\n          <Box as='li' key={organizationSlug}>\n            <StyledAnchor\n              href={`/organizations/${organizationSlug}`}\n              label={\n                <Box pad='none'>\n                  <SpacedText color='white' size='xsmall'>\n                    {t('ProjectHeader.organization')}\n                  </SpacedText>\n                  <SpacedText color='white' weight='bold'>\n                    {organizationTitle}\n                  </SpacedText>\n                </Box>\n              }\n            />\n          </Box>\n        ) : null}\n      </Box>\n    </Box>\n  )\n\n  return (\n    <StyledDropButton\n      a11yTitle={t('ProjectHeader.exploreProject')}\n      alignSelf='center'\n      className={className}\n      dropContent={dropContent}\n      dropAlign={{ top: 'bottom' }}\n      isOpen={isOpen}\n      margin={margin}\n      onClose={onClose}\n      onOpen={onOpen}\n    >\n      <Box\n        align='center'\n        as='span'\n        direction='row'\n        gap='xsmall'\n        justify='center'\n      >\n        <SpacedText weight='bold' style={{ width: 'max-content' }}>\n          {t('ProjectHeader.exploreProject')}\n        </SpacedText>\n        <FormDown />\n      </Box>\n    </StyledDropButton>\n  )\n}\n\nDropdownNav.propTypes = {\n  /** Zooniverse admin mode */\n  adminMode: bool,\n  /** CSS class */\n  className: string,\n  /** Margin for the dropdown button (Grommet t-shirt size, CSS length or Grommet margin object.) */\n  margin: oneOfType([string, object]),\n  /** Organization slug */\n  organizationSlug: string,\n  /** Organization title */\n  organizationTitle: string\n}\n\nexport default DropdownNav\n// export { DropdownNav, StyledDropButton }\n"],"names":[],"ignoreList":[],"sourceRoot":""}