{"version":3,"file":"screens-Publications-Publications-stories.a38eed90.iframe.bundle.js","mappings":";;;;;;;;AAeA;;;;;;;;AAWA;AATA;AACA;;;;;;AAgBA;;;;;;;;;;;AAaA;AAwBA;AApCA;AACA;AAcA;;;;;;;;;;;;;;;AAeA;;;;;AAKA;;;;;AAUA;;;;AAMA;;;AC3EA;;;;AAIA;;;;;ACcA;;;AAGA","sources":["webpack://@zooniverse/content/./src/components/DropdownNav/DropdownNav.jsx","webpack://@zooniverse/content/./src/components/HeadingForAboutNav/HeadingForAboutNav.jsx","webpack://@zooniverse/content/./src/screens/Publications/Publications.jsx"],"sourcesContent":["import { useState } from 'react'\nimport { arrayOf, bool, func, number, shape, string } from 'prop-types'\nimport styled, { css } from 'styled-components'\nimport { Box, Button, DropButton, Nav } from 'grommet'\nimport { FormDown } from 'grommet-icons'\nimport { SpacedText } from '@zooniverse/react-components'\n\nconst StyledButton = styled(Button)`\n  text-decoration: none;\n  padding: 10px 15px;\n  width: 100%;\n  text-shadow: 0 2px 2px rgba(0, 0, 0, 0.22);\n\n  &:hover,\n  :focus {\n    ${props =>\n      css`\n        background: ${props.theme.global.colors['neutral-1']};\n      `}\n  }\n\n  &[aria-current='true'] {\n    & > span {\n      border-bottom: 2px solid white;\n    }\n  }\n`\n\nconst StyledDropButton = styled(DropButton)`\n  border-radius: 2em;\n  position: relative;\n  min-width: 18rem;\n\n  &:hover, &:focus {\n    ${props => css`\n      background: ${props.theme.global.colors['neutral-1']};\n    `}\n\n    & > div > span {\n      color: white;\n    }\n\n    & > div > [aria-label='FormDown'] {\n      stroke: white;\n    }\n  }\n\n  ${props =>\n    props.open &&\n    css`\n      background: ${props.theme.global.colors['neutral-1']};\n\n      & > div > span {\n        color: white;\n      }\n\n      & > div > [aria-label='FormDown'] {\n        stroke: white;\n      }\n\n      &::after {\n        content: '';\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        background: ${props.theme.global.colors.brand};\n        height: 50%;\n        width: 100%;\n        z-index: -1;\n      }\n    `}\n`\n\nconst StyledUl = styled.ul`\n  padding-inline-start: 0;\n  margin: 0;\n  display: flex;\n  flex-direction: column;\n`\n\nconst StyledLi = styled.li`\n  list-style-type: none;\n  display: flex;\n  width: 100%;\n`\n\nconst DEFAULT_HANDLER = () => {}\n\nfunction DropdownNav({\n  activeSection = 0,\n  className = '',\n  sections = [],\n  setActiveSection = DEFAULT_HANDLER,\n  sidebarLabel = ''\n}) {\n  const [isOpen, setIsOpen] = useState(false)\n\n  const handleOpen = () => {\n    setIsOpen(true)\n  }\n\n  const handleClose = () => {\n    setIsOpen(false)\n  }\n\n  const handleSectionSelect = index => {\n    handleClose()\n    setActiveSection(index)\n  }\n\n  const dropContent = (\n    <Nav aria-label={sidebarLabel} width='100%' background='brand'>\n      <StyledUl>\n        {sections.map((section, index) => (\n          <StyledLi key={section.name}>\n            <StyledButton\n              aria-current={index === activeSection ? 'true' : 'false'}\n              href={section.slug ? `#${section.slug}` : ''}\n              onClick={() => handleSectionSelect(index)}\n            >\n              <SpacedText size='0.875rem' color='white' weight='bold'>\n                {section.name}\n              </SpacedText>\n            </StyledButton>\n          </StyledLi>\n        ))}\n      </StyledUl>\n    </Nav>\n  )\n\n  return (\n    <StyledDropButton\n      alignSelf='center'\n      className={className}\n      dropAlign={{ top: 'bottom' }}\n      onClose={handleClose}\n      onOpen={handleOpen}\n      open={isOpen}\n      margin={{ top: '30px' }}\n      dropContent={dropContent}\n    >\n      <Box\n        align='center'\n        direction='row'\n        gap='xsmall'\n        justify='center'\n        pad={{ horizontal: '20px', vertical: '10px' }}\n      >\n        <SpacedText weight='bold' color={{ light: 'neutral-1', dark: 'white' }}>\n          {sidebarLabel}\n        </SpacedText>\n        <FormDown color={{ light: 'neutral-1', dark: 'white' }} />\n      </Box>\n    </StyledDropButton>\n  )\n}\n\nexport default DropdownNav\n\nDropdownNav.propTypes = {\n  activeSection: number,\n  className: string,\n  sections: arrayOf(\n    shape({\n      active: bool,\n      name: string,\n      setActive: func,\n      slug: string\n    })\n  ),\n  setActiveSection: func,\n  sidebarLabel: string\n}\n","import { useEffect, useRef } from 'react'\nimport SpacedHeading from '@zooniverse/react-components/SpacedHeading'\nimport styled from 'styled-components'\nimport { Box } from 'grommet'\nimport { func, number, string } from 'prop-types'\n\nimport { mobileBreakpoint } from '../SharedStyledComponents/SharedStyledComponents'\n\nconst HeadingForNav = styled(SpacedHeading)`\n  margin: 0;\n\n  @media (width <= ${mobileBreakpoint}) {\n    border-top: 70px solid transparent; // Handles navigation to an h2 without the sticky dropdown covering it\n    margin-top: -70px;\n  }\n`\n\nconst defaultPad = { vertical: '30px' }\n\nexport default function HeadingForAboutNav({\n  color = 'black',\n  pad = defaultPad,\n  sectionIndex = 0,\n  sectionName = '',\n  setActiveSection = () => {},\n  slug = ''\n}) {\n  const headingRef = useRef()\n\n  /**\n   * Observe the headings of each navigable section\n   * When a heading is fully visible in the top third of a viewport,\n   * highlight the sidebar and update the url hash.\n   */\n  useEffect(() => {\n    const options = {\n      root: null, // use the viewport as the root element\n      rootMargin: '0px 0px -70% 0px', // observe visibility in the top third of the viewport\n      threshold: 1 // callback when target is fully visible\n    }\n\n    const intersectionObserver = new window.IntersectionObserver(entries => {\n      if (entries[0].isIntersecting) {\n        setActiveSection(sectionIndex)\n\n        /* Change the has in the url without doing a navigation event */\n        const location = window.location.toString().split('#')[0]\n        const oldHash = window.location.hash\n        const hash = '#' + slug\n\n        if (sectionIndex === 0) {\n          history.replaceState(null, null, location)\n        } else if (oldHash !== slug) {\n          history.replaceState(null, null, location + hash)\n        }\n      }\n    }, options)\n\n    intersectionObserver.observe(headingRef.current)\n\n    return () => {\n      intersectionObserver.disconnect()\n    }\n  }, [headingRef.current])\n\n  return (\n    <Box ref={headingRef} pad={pad}>\n      <HeadingForNav\n        id={slug}\n        color={color}\n        level={2}\n        size='1.5rem'\n        tabIndex={-1}\n        textAlign='center'\n      >\n        {sectionName}\n      </HeadingForNav>\n    </Box>\n  )\n}\n\nHeadingForAboutNav.propTypes = {\n  // color: object or string for Grommet theme,\n  sectionIndex: number,\n  sectionName: string,\n  setActiveSection: func,\n  slug: string\n}\n","'use client'\n\nimport { useState } from 'react'\nimport { Anchor, Box, Paragraph } from 'grommet'\nimport { array, arrayOf, bool, func, number, shape, string } from 'prop-types'\nimport styled from 'styled-components'\n\nimport { useTranslation } from '@translations/i18n'\nimport DropdownNav from '@components/DropdownNav/DropdownNav'\nimport MaxWidthContent from '@components/MaxWidthContent/MaxWidthContent'\nimport AboutLayout from '@components/PageLayout/AboutLayout'\nimport {\n  mobileBreakpoint,\n  MobileHeading,\n  StickyBox,\n  StickySidebar,\n  StyledGrid,\n  StyledHeading\n} from '@components/SharedStyledComponents/SharedStyledComponents'\nimport Discipline from './components/Discipline/Discipline'\n\nconst FORM_URL =\n  'https://docs.google.com/forms/d/e/1FAIpQLSdbAKVT2tGs1WfBqWNrMekFE5lL4ZuMnWlwJuCuNM33QO2ZYg/viewform'\n\nconst StyledSection = styled.section`\n  // Brings this section forward in z-index order so that the next navigable\n  // heading's margin doesn't overlap and render the paragraph link useless\n  position: relative;\n\n  @media (width <= ${mobileBreakpoint}) {\n    padding: 0 20px;\n  }\n`\n\nfunction Publications({ publicationsData = [], sections = [] }) {\n  const { t } = useTranslation()\n  const [activeSection, setActiveSection] = useState(0)\n\n  return (\n    <>\n      <AboutLayout>\n        <MobileHeading level='1' size='1.5rem'>\n          {t('Publications.title')}\n        </MobileHeading>\n        <StickyBox background={{ dark: 'dark-3', light: 'neutral-6' }}>\n          <DropdownNav\n            activeSection={activeSection}\n            sidebarLabel={t('Publications.sidebarLabel')}\n            sections={sections}\n            setActiveSection={setActiveSection}\n          />\n        </StickyBox>\n        <MaxWidthContent>\n          <StyledSection>\n            <StyledHeading level='1' color={{ light: 'neutral-1', dark: 'accent-1' }} size='small'>\n              {t('Publications.title')}\n            </StyledHeading>\n            <Paragraph textAlign='center' margin={{ top: '30px' }}>\n              {t('Publications.formInstruction')}{' '}\n              <Anchor href={FORM_URL}>{t('Publications.formLabel')}</Anchor>.{' '}\n              {t('Publications.formInfo')}\n            </Paragraph>\n          </StyledSection>\n        </MaxWidthContent>\n        <StyledGrid>\n          <Box as='aside' align='center'>\n            <StickySidebar\n              activeSection={activeSection}\n              ariaLabel={t('Publications.sidebarLabel')}\n              sections={sections}\n              setActiveSection={setActiveSection}\n            />\n          </Box>\n          <article>\n            {publicationsData?.map((item, index) => (\n              <Discipline\n                key={item.title}\n                projects={item.projects}\n                sectionIndex={index}\n                setActiveSection={setActiveSection}\n                slug={item.slug}\n                title={item.title}\n              />\n            ))}\n          </article>\n          <Box />\n        </StyledGrid>\n      </AboutLayout>\n    </>\n  )\n}\n\nPublications.propTypes = {\n  publicationsData: arrayOf(\n    shape({\n      projects: array,\n      slug: string,\n      title: string,\n      weight: number\n    })\n  ),\n  sections: arrayOf(\n    shape({\n      active: bool,\n      setActive: func,\n      title: string\n    })\n  )\n}\n\nexport default Publications\n"],"names":[],"ignoreList":[],"sourceRoot":""}