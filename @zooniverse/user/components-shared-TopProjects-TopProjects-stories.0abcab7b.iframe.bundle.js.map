{"version":3,"file":"components-shared-TopProjects-TopProjects-stories.0abcab7b.iframe.bundle.js","mappings":";;;AAUA;;;;;;ACGA;;;;;;;;ACMA;;;;;;;;;AAWA","sources":["webpack://@zooniverse/user/./src/components/shared/ContentBox/components/ContentHeading.jsx","webpack://@zooniverse/user/./src/components/shared/ContentBox/components/ContentLink.jsx","webpack://@zooniverse/user/./src/components/shared/TopProjects/TopProjects.jsx"],"sourcesContent":["import { SpacedText } from '@zooniverse/react-components'\nimport { Heading } from 'grommet'\nimport { node, string } from 'prop-types'\nimport styled from 'styled-components'\n\nconst StyledHeading = styled(Heading)`\n  font-size: 1rem;\n  line-height: normal;\n`\n\nfunction ContentHeading({\n  children,\n  id\n}) {\n  return (\n    <StyledHeading\n      id={id}\n      level={2}\n      margin='0'\n    >\n      <SpacedText\n        color={{\n          dark: 'light-1',\n          light: 'black'\n        }}\n        size='inherit'\n        weight='bold'\n      >\n        {children}\n      </SpacedText>\n    </StyledHeading>\n  )\n}\n\nContentHeading.propTypes = {\n  children: node.isRequired,\n  id: string\n}\n\nexport default ContentHeading\n","import { SpacedText } from '@zooniverse/react-components'\nimport { Anchor } from 'grommet'\nimport { object, oneOfType, shape, string } from 'prop-types'\nimport styled from 'styled-components'\n\nconst StyledAnchor = styled(Anchor)`\n  font-family: 'Karla', Arial, sans-serif;\n  font-size: 1rem;\n  line-height: normal;\n  background: none;\n  border: none;\n`\n\nconst DEFAULT_LINK = {\n  as: 'a',\n  href: '#',\n  text: ''\n}\n\nfunction ContentLink({\n  link = DEFAULT_LINK\n}) {\n  return (\n    <StyledAnchor\n      color={{\n        dark: 'light-4',\n        light: 'dark-5'\n      }}\n      disabled={link.disabled || false}\n      download={link.download || false}\n      forwardedAs={link.as || 'a'}\n      href={link.href}\n      label={\n        <SpacedText\n          size='inherit'\n          uppercase={false}\n        >\n          {link.text}\n        </SpacedText>\n      }\n      onClick={link.onClick}\n    />\n  )\n}\n\nContentLink.propTypes = {\n  link: shape({\n    as: oneOfType([object, string]),\n    href: string,\n    text: string\n  })\n}\n\nexport default ContentLink\n","import { Box, Grid, ResponsiveContext } from 'grommet'\nimport { arrayOf, bool, node, number, string, shape } from 'prop-types'\nimport { useContext } from 'react'\nimport styled from 'styled-components'\nimport { Loader, ProjectCard } from '@zooniverse/react-components'\nimport { useTranslation } from '@translations/i18n'\n\nimport { ContentBox } from '@components/shared'\n\nconst StyledGridList = styled(Grid)`\n  list-style: none;\n  margin-block-end: 0;\n  margin-block-start: 0;\n  max-height: 420px;\n  overflow-x: none;\n  overflow-y: auto;\n  padding-inline-start: 0;\n`\n\nconst StyledRowList = styled(Box)`\n  list-style: none;\n  margin-block-end: 0;\n  margin-block-start: 0;\n  scroll-snap-type: x mandatory;\n\n  li {\n    scroll-snap-align: start;\n  }\n`\n\nfunction CardsGrid({ children }) {\n  const { t } = useTranslation()\n  return (\n    <StyledGridList\n      a11yTitle={t('TopProjects.title')}\n      columns={['1fr', '1fr', '1fr']}\n      forwardedAs='ul'\n      gap='xsmall'\n      justify='center'\n      pad='xxsmall'\n      rows={[ 'auto', 'auto' ]}\n    >\n      {children}\n    </StyledGridList>\n  )\n}\n\nCardsGrid.propTypes = {\n  children: node\n}\n\nfunction CardsRow({ children }) {\n  const { t } = useTranslation()\n  return (\n    <StyledRowList\n      a11yTitle={t('TopProjects.title')}\n      direction='row'\n      forwardedAs='ul'\n      gap='small'\n      overflow={{ horizontal: 'auto' }}\n      pad={{\n        bottom: 'xsmall',\n        horizontal: 'xxsmall',\n        top: 'xxsmall'\n      }}\n      tabIndex={0}\n    >\n      {children}\n    </StyledRowList>\n  )\n}\n\nCardsRow.propTypes = {\n  children: node\n}\n\nfunction TopProjects({\n  allProjectsStats = {},\n  grid = false,\n  linkProps = { href: null },\n  loading = false,\n  projects = []\n}) {\n  const { t } = useTranslation()\n  const size = useContext(ResponsiveContext)\n  const cardSize = grid ? 'small' : size\n\n  // set top projects based on selected date range and all project stats\n  let topProjects = []\n  const topProjectContributions = allProjectsStats?.project_contributions\n    ?.sort((a, b) => b.count - a.count)\n\n  if (topProjectContributions?.length > 0) {\n    topProjects = topProjectContributions\n      ?.map(projectContribution => {\n        const projectData = projects?.find(project => project.id === projectContribution.project_id.toString())\n        return {\n          count: projectContribution.count,\n          ...projectData\n        }\n      })\n      .filter(project => project?.id)\n      .slice(0, 20)\n  }\n\n  const Container = grid ? CardsGrid : CardsRow\n\n  return (\n    <ContentBox\n      linkLabel={t('common.seeAll')}\n      linkProps={linkProps}\n      title={t('TopProjects.title')}\n    >\n      {loading ? (\n        <Box\n          align='center'\n          fill\n          justify='center'\n          pad='medium'\n        >\n          <Loader />\n        </Box>\n      ) : (\n        <Container>\n          {topProjects.map(topProject => {\n            return (\n              <li key={topProject?.id}>\n                <ProjectCard\n                  badge={topProject?.count}\n                  description={topProject?.description}\n                  displayName={topProject?.display_name}\n                  href={`https://www.zooniverse.org/projects/${topProject?.slug}`}\n                  imageSrc={topProject?.avatar_src}\n                  size={cardSize}\n                  state={topProject?.state}\n                />\n              </li>\n            )\n          })}\n        </Container>\n      )}\n    </ContentBox>\n  )\n}\n\nTopProjects.propTypes = {\n  allProjectsStats: shape({\n    project_contributions: arrayOf(shape({\n      count: number,\n      project_id: number\n    }))\n  }),\n  grid: bool,\n  linkProps: shape({\n    href: string\n  }),\n  loading: bool,\n  projects: arrayOf(shape({\n    avatar_src: string,\n    description: string,\n    display_name: string,\n    id: string,\n    slug: string\n  }))\n}\n\nexport default TopProjects\n"],"names":[],"ignoreList":[],"sourceRoot":""}