{"version":3,"sources":["../../src/components/display-name-slug-editor.jsx"],"names":["DisplayNameSlugEditor","props","getResourceUrl","bind","handleInputChange","undoNameChange","warnURLChange","state","origin","url","value","warn","resource","setState","window","location","nextProps","resourceType","display_name","slug","event","target","displayNameInputValue","match","className","live","listed_at","node","input","Component","propTypes","PropTypes","string","shape","bool","defaultProps"],"mappings":"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","file":"display-name-slug-editor.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass DisplayNameSlugEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.getResourceUrl = this.getResourceUrl.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.undoNameChange = this.undoNameChange.bind(this);\n    this.warnURLChange = this.warnURLChange.bind(this);\n    this.state = {\n      origin: '',\n      url: null,\n      value: '',\n      warn: false,\n    };\n  }\n\n  componentDidMount() {\n    this.getResourceUrl(this.props.resource);\n    this.setState({ origin: window.location.origin });\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (this.props.resource !== nextProps.resource) {\n      this.getResourceUrl(nextProps.resource);\n    }\n  }\n\n  getResourceUrl(resource) {\n    const { resourceType } = this.props;\n    this.setState({ value: resource.display_name, url: `/${resourceType}s/${resource.slug}` });\n  }\n\n  value() {\n    return this.state.value;\n  }\n\n  handleInputChange(event) {\n    const value = event.target.value;\n    this.setState({ value });\n    this.warnURLChange(this.props.resource, value);\n  }\n\n  undoNameChange() {\n    this.setState({ value: this.props.resource.display_name, warn: false });\n  }\n\n  warnURLChange(resource, displayNameInputValue) {\n    const warn = resource.display_name !== displayNameInputValue &&\n      (resource.slug.match(/(untitled-project)/i) === null ||\n        resource.slug.match(/(untitled-organization)/i) === null);\n\n    if (warn) {\n      this.setState({ warn });\n    }\n  }\n\n  render() {\n    const { state, undoNameChange } = this;\n    const { resource, resourceType } = this.props;\n    return (\n      <p className={`${this.props.className}`}>\n        <label htmlFor=\"display_name\">\n          <span className={`${this.props.className}__form-label`}>Name</span>\n          <br />\n          <input\n            type=\"text\"\n            className={`${this.props.className}__form-input`}\n            disabled={resource.live || !!resource.listed_at}\n            id=\"display_name\"\n            name=\"display_name\"\n            onChange={this.handleInputChange}\n            ref={(node) => { this.input = node; }}\n            value={this.state.value}\n          />\n        </label>\n\n        {(state.warn)\n          ? <small className={`${this.props.className}__form-help`}>\n              You’re changing the url of your {resourceType}. Users with bookmarks and links in Talk will no longer work.\n              {' '}\n              <button type=\"button\" onClick={undoNameChange}>\n                Cancel\n              </button>\n              {' '}\n            </small>\n          : null\n        }\n\n        {(state.url)\n          ? <small className={`${this.props.className}__form-help`}>\n              {(resource.live || !!resource.listed_at)\n                ? `You cannot change a live ${resourceType}'s name.`\n                : `The ${resourceType} name is the first thing people will see about the ${resourceType}, and it will show up in the ${resourceType} URL. Try to keep it short and sweet.`\n              }\n              {' '}\n              Your {resourceType}’s URL is\n              {' '}\n              <a href={this.props.origin + state.url}>\n                {this.props.origin + state.url}\n              </a>\n            </small>\n          : null\n        }\n      </p>\n    );\n  }\n\n}\n\nDisplayNameSlugEditor.propTypes = {\n  className: PropTypes.string,\n  resource: PropTypes.shape({\n    display_name: PropTypes.string,\n    listed_at: PropTypes.string,\n    live: PropTypes.bool,\n  }),\n  resourceType: PropTypes.string,\n};\n\nDisplayNameSlugEditor.defaultProps = {\n  className: 'slug-editor',\n  resource: {},\n  resourceType: '',\n};\n\nexport default DisplayNameSlugEditor;\n"]}