{"version":3,"sources":["../../src/components/media-icon.jsx"],"names":["MediaIcon","props","state","deleting","handleDelete","bind","setState","resource","delete","then","onDelete","mediaIconStyle","opacity","src","height","position","maxHeight","maxWidth","metadata","filename","e","target","setSelectionRange","value","length","React","Component","defaultProps","propTypes","PropTypes","number","func","shape","id","string","object","isRequired"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEqBA,S;;;AACnB,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA,sHACXA,KADW;;AAGjB,UAAKC,KAAL,GAAa;AACXC,gBAAU;AADC,KAAb;;AAIA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,OAApB;AAPiB;AAQlB;;;;mCAEc;AAAA;;AACb,WAAKC,QAAL,CAAc,EAAEH,UAAU,IAAZ,EAAd;AACA,WAAKF,KAAL,CAAWM,QAAX,CAAoBC,MAApB,GAA6BC,IAA7B,CAAkC,YAAM;AACtC,eAAKH,QAAL,CAAc,EAAEH,UAAU,KAAZ,EAAd;AACA,eAAKF,KAAL,CAAWS,QAAX,CAAoB,OAAKT,KAAL,CAAWM,QAA/B;AACD,OAHD;AAID;;AAED;;;;6BACS;AACP,UAAMI,iBAAiB,KAAKT,KAAL,CAAWC,QAAX,GAAsB,EAAES,SAAS,GAAX,EAAtB,GAAyC,IAAhE;;AAEA,aACE;AAAA;AAAA,UAAK,WAAU,YAAf,EAA4B,OAAOD,cAAnC;AACE;AAAA;AAAA,YAAK,WAAU,gCAAf;AACE;AAAC,+BAAD;AAAA;AACE,uBACE,8BAAC,mBAAD,IAAW,WAAU,sBAArB,EAA4C,KAAK,KAAKV,KAAL,CAAWM,QAAX,CAAoBM,GAArE,EAA0E,QAAQ,KAAKZ,KAAL,CAAWa,MAA7F,EAAqG,OAAO,EAAEC,UAAU,UAAZ,EAA5G;AAFJ;AAKE;AAAA;AAAA,gBAAK,WAAU,mBAAf;AACE,qDAAK,KAAI,EAAT,EAAY,KAAK,KAAKd,KAAL,CAAWM,QAAX,CAAoBM,GAArC,EAA0C,OAAO,EAAEG,WAAW,MAAb,EAAqBC,UAAU,MAA/B,EAAjD;AADF;AALF,WADF;AAUE;AAAA;AAAA,cAAQ,MAAK,QAAb,EAAsB,WAAU,0BAAhC,EAA2D,UAAU,KAAKf,KAAL,CAAWC,QAAhF,EAA0F,SAAS,KAAKC,YAAxG;AAAA;AAAA;AAVF,SADF;AAaG,aAAKH,KAAL,CAAWM,QAAX,CAAoBW,QAApB,IACC;AAAA;AAAA;AACE;AAAA;AAAA,cAAM,WAAU,kBAAhB,EAAmC,OAAO,EAAEH,UAAU,UAAZ,EAA1C;AAAqE,iBAAKd,KAAL,CAAWM,QAAX,CAAoBW,QAApB,CAA6BC;AAAlG,WADF;AAEE;AACE,uBAAU,qBADZ;AAEE,0BAAY,KAAKlB,KAAL,CAAWM,QAAX,CAAoBW,QAApB,CAA6BC,QAAzC,SAAqD,KAAKlB,KAAL,CAAWM,QAAX,CAAoBM,GAAzE,MAFF;AAGE,sBAAU,IAHZ;AAIE,mBAAO,EAAEE,UAAU,UAAZ,EAJT;AAKE,qBAAS;AAAA,qBAAKK,EAAEC,MAAF,CAASC,iBAAT,CAA2B,CAA3B,EAA8BF,EAAEC,MAAF,CAASE,KAAT,CAAeC,MAA7C,CAAL;AAAA;AALX;AAFF;AAdJ,OADF;AA2BD;AACD;;;;;EAnDqCC,gBAAMC,S;;kBAAxB1B,S;;;AAsDrBA,UAAU2B,YAAV,GAAyB;AACvBb,UAAQ,EADe;AAEvBJ,YAAU,oBAAM,CAAE,CAFK;AAGvBH,YAAU;AAHa,CAAzB;;AAMAP,UAAU4B,SAAV,GAAsB;AACpBd,UAAQe,oBAAUC,MADE;AAEpBpB,YAAUmB,oBAAUE,IAFA;AAGpBxB,YAAUsB,oBAAUG,KAAV,CAAgB;AACxBxB,YAAQqB,oBAAUE,IADM;AAExBE,QAAIJ,oBAAUK,MAFU;AAGxBhB,cAAUW,oBAAUM,MAHI;AAIxBtB,SAAKgB,oBAAUK;AAJS,GAAhB,EAKPE;AARiB,CAAtB","file":"media-icon.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport TriggeredModalForm from 'modal-form/triggered';\nimport Thumbnail from './thumbnail';\n\nexport default class MediaIcon extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      deleting: false,\n    };\n\n    this.handleDelete = this.handleDelete.bind(this);\n  }\n\n  handleDelete() {\n    this.setState({ deleting: true });\n    this.props.resource.delete().then(() => {\n      this.setState({ deleting: false });\n      this.props.onDelete(this.props.resource);\n    });\n  }\n\n  /* eslint-disable max-len */\n  render() {\n    const mediaIconStyle = this.state.deleting ? { opacity: 0.5 } : null;\n\n    return (\n      <div className=\"media-icon\" style={mediaIconStyle}>\n        <div className=\"media-icon-thumbnail-container\">\n          <TriggeredModalForm\n            trigger={\n              <Thumbnail className=\"media-icon-thumbnail\" src={this.props.resource.src} height={this.props.height} style={{ position: 'relative' }} />\n            }\n          >\n            <div className=\"content-container\">\n              <img alt=\"\" src={this.props.resource.src} style={{ maxHeight: '80vh', maxWidth: '60vw' }} />\n            </div>\n          </TriggeredModalForm>\n          <button type=\"button\" className=\"media-icon-delete-button\" disabled={this.state.deleting} onClick={this.handleDelete}>&times;</button>\n        </div>\n        {this.props.resource.metadata &&\n          <div>\n            <span className=\"media-icon-label\" style={{ position: 'relative' }}>{this.props.resource.metadata.filename}</span>\n            <textarea\n              className=\"media-icon-markdown\"\n              value={`![${this.props.resource.metadata.filename}(${this.props.resource.src})`}\n              readOnly={true}\n              style={{ position: 'relative' }}\n              onFocus={e => e.target.setSelectionRange(0, e.target.value.length)}\n            />\n          </div>}\n      </div>\n    );\n  }\n  /* eslint-enable */\n}\n\nMediaIcon.defaultProps = {\n  height: 80,\n  onDelete: () => {},\n  resource: {},\n};\n\nMediaIcon.propTypes = {\n  height: PropTypes.number,\n  onDelete: PropTypes.func,\n  resource: PropTypes.shape({\n    delete: PropTypes.func,\n    id: PropTypes.string,\n    metadata: PropTypes.object,\n    src: PropTypes.string,\n  }).isRequired,\n};\n"]}